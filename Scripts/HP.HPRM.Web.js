var __extends = (this && this.__extends) || function (d, b) {
    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];
    function __() { this.constructor = d; }
    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
};
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var Framework;
        (function (Framework) {
            var Components;
            (function (Components) {
                var Shared;
                (function (Shared) {
                    "use strict";
                    var JsonRequest = (function () {
                        function JsonRequest() {
                        }
                        JsonRequest.prototype.getAjaxSettings = function (type, url, data, success, error) {
                            var me = this;
                            var settings = {
                                type: type,
                                url: url,
                                dataType: 'json',
                                contentType: 'application/x-www-form-urlencoded',
                                data: JSON.stringify(data),
                                success: success,
                                error: function (jqXhr, textStatus, errorThrown) {
                                    if (error) {
                                        var contentType = (jqXhr.getResponseHeader('Content-Type'));
                                        if (contentType && contentType.indexOf('json') > -1) {
                                            var errorResponse = JSON.parse(jqXhr.responseText);
                                            error(errorResponse);
                                            return;
                                        }
                                        if (errorThrown != 'abort') {
                                            error(errorThrown);
                                        }
                                    }
                                }
                            };
                            if (type === 'POST') {
                                settings.contentType = 'application/json;charset=utf-8';
                                settings.data = JSON.stringify(data);
                            }
                            return settings;
                        };
                        JsonRequest.prototype.checkForJsonError = function (parsedJson) {
                            if (parsedJson.Success !== null && parsedJson.Success === false) {
                                var str = parsedJson.Message;
                                str = str.replace(/<\s*br\/*>/gi, "");
                                str = str.replace(/<\s*a.*href="(.*?)".*>(.*?)<\/a>/gi, " $2 (Link->$1) ");
                                str = str.replace(/<\s*\/*.+?>/ig, "");
                                str = str.replace(/ {2,}/gi, " ");
                                str = str.replace(/\n+\s*/gi, "");
                                parsedJson.Message = str;
                                return true;
                            }
                            return false;
                        };
                        return JsonRequest;
                    }());
                    Shared.JsonRequest = JsonRequest;
                })(Shared = Components.Shared || (Components.Shared = {}));
            })(Components = Framework.Components || (Framework.Components = {}));
        })(Framework = HPTRIM.Framework || (HPTRIM.Framework = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var Framework;
        (function (Framework) {
            var Components;
            (function (Components) {
                var Shared;
                (function (Shared) {
                    "use strict";
                    var AjaxLoader = (function () {
                        function AjaxLoader(url, type) {
                            if (type === void 0) { type = 'POST'; }
                            this._jsonRequest = new HP.HPTRIM.Framework.Components.Shared.JsonRequest();
                            var me = this;
                            me._url = url;
                            me._type = type;
                            me._requestId = 0;
                            me.loading = ko.observable(false);
                        }
                        AjaxLoader.prototype.load = function (requestData, callback, errorCallback, fromItemIndex, itemsToGet) {
                            var me = this;
                            if (me._currentRequestXhr) {
                                me._currentRequestXhr.abort();
                                me._currentRequestXhr = null;
                            }
                            me._requestId++;
                            var currentRequestId = me._requestId;
                            var ajaxSettings = me._jsonRequest.getAjaxSettings(me._type, this._url, requestData, function (result) {
                                me._currentRequestXhr = null;
                                if (currentRequestId != me._requestId) {
                                    return;
                                }
                                me.loading(false);
                                if (callback) {
                                    callback(result);
                                }
                                return;
                            }, function (error) {
                                me.loading(false);
                                if (errorCallback) {
                                    errorCallback(error);
                                }
                                return;
                            });
                            me.loading(true);
                            me._currentRequestXhr = $.ajax(ajaxSettings);
                        };
                        AjaxLoader.prototype.abort = function () {
                            this.loading(false);
                            if (this._currentRequestXhr) {
                                this._currentRequestXhr.abort();
                            }
                        };
                        return AjaxLoader;
                    }());
                    Shared.AjaxLoader = AjaxLoader;
                })(Shared = Components.Shared || (Components.Shared = {}));
            })(Components = Framework.Components || (Framework.Components = {}));
        })(Framework = HPTRIM.Framework || (HPTRIM.Framework = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var Framework;
        (function (Framework) {
            var Components;
            (function (Components) {
                var Shared;
                (function (Shared) {
                    'use strict';
                    var String = (function () {
                        function String() {
                        }
                        String.format = function (str, args) {
                            return str.replace(new RegExp("{-?[0-9]+}", "g"), function (item) {
                                var intVal = parseInt(item.substring(1, item.length - 1));
                                var replace;
                                if (intVal >= 0) {
                                    replace = args[intVal];
                                }
                                else if (intVal === -1) {
                                    replace = "{";
                                }
                                else if (intVal === -2) {
                                    replace = "}";
                                }
                                else {
                                    replace = "";
                                }
                                return replace;
                            });
                        };
                        return String;
                    }());
                    Shared.String = String;
                })(Shared = Components.Shared || (Components.Shared = {}));
            })(Components = Framework.Components || (Framework.Components = {}));
        })(Framework = HPTRIM.Framework || (HPTRIM.Framework = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var Framework;
        (function (Framework) {
            var Components;
            (function (Components) {
                var Layouts;
                (function (Layouts) {
                    "use strict";
                    var Panel = (function () {
                        function Panel(templateName, visible) {
                            Panel._lastId++;
                            this.id = this.constructor.name + '_' + Panel._lastId;
                            this.templateName = ko.observable(templateName);
                            var calculatedVisible = typeof visible != 'undefined' ? visible : true;
                            this.visible = ko.observable(calculatedVisible);
                            var me = this;
                            this.templateConfiguration = {
                                name: function () { return me.templateName(); },
                                data: me,
                                'if': me.visible
                            };
                            this.cssClass = ko.observable('');
                        }
                        Panel.prototype.getClassName = function () {
                            return Panel.CLASS_NAME;
                        };
                        Panel.prototype.initialiseView = function () {
                        };
                        Panel._lastId = 1;
                        Panel.CLASS_NAME = "PANEL";
                        return Panel;
                    }());
                    Layouts.Panel = Panel;
                    var ContainerPanel = (function (_super) {
                        __extends(ContainerPanel, _super);
                        function ContainerPanel(panels, visible) {
                            _super.call(this, 'templates/Framework/Layouts/ContainerPanel', visible);
                            if (!panels) {
                                panels = [];
                            }
                            this.panels = ko.observableArray(panels);
                        }
                        return ContainerPanel;
                    }(Panel));
                    Layouts.ContainerPanel = ContainerPanel;
                    var CardPanel = (function (_super) {
                        __extends(CardPanel, _super);
                        function CardPanel(panels, visible) {
                            _super.call(this, panels, visible);
                            this.templateName(CardPanel.templates.card);
                            this.activePanel = ko.observable(null);
                            if (this.panels().length > 0) {
                                this.activatePanel(this.panels()[0]);
                            }
                        }
                        CardPanel.prototype.getActivePanelId = function () {
                            var currentPanel = this.activePanel();
                            return currentPanel.id;
                        };
                        CardPanel.prototype.activatePanel = function (panel) {
                            var currentPanel = this.activePanel();
                            if (currentPanel == panel) {
                                return;
                            }
                            if (currentPanel) {
                                currentPanel.visible(false);
                            }
                            this.activePanel(panel);
                            panel.visible(true);
                            var cssChecker = panel.cssClass();
                            if (cssChecker == 'as-spa-dash') {
                                setTimeout(function () {
                                    $(".draggable").sortable({
                                        handle: ".drag-handle",
                                        connectWith: ".draggable",
                                        tolerance: "pointer",
                                        forcePlaceholderSize: true,
                                        opacity: 0.8,
                                    });
                                }, 2000);
                            }
                        };
                        CardPanel.templates = {
                            card: 'templates/Framework/Layouts/CardPanel',
                        };
                        return CardPanel;
                    }(ContainerPanel));
                    Layouts.CardPanel = CardPanel;
                    var CollapsiblePanel = (function (_super) {
                        __extends(CollapsiblePanel, _super);
                        function CollapsiblePanel(label, contentTemplateName) {
                            _super.call(this, "CollapsiblePanel-Template", true);
                            this.onLoad = function () { };
                            this.onMinimize = function () { };
                            this.onRestore = function () { };
                            this.onClose = function () { };
                            this.actionPanel = null;
                            this.label = label;
                            this.contentTemplateName = contentTemplateName;
                        }
                        CollapsiblePanel.prototype.minimize = function () {
                            var commandPanel = $("#" + this.id);
                            var me = this;
                            setTimeout(function () {
                                commandPanel.on({
                                    'click': function (e) {
                                        me.restore(e.currentTarget);
                                        var span = $('.panelreduce-white')[0];
                                        if (span) {
                                            $(span).removeClass("panelreduce-white");
                                        }
                                    },
                                    'keyup': function (e) {
                                        var keynum;
                                        if (window.event) {
                                            keynum = event.keyCode;
                                        }
                                        else if (event.which) {
                                            keynum = event.which;
                                        }
                                        if (keynum === 13) {
                                            me.restore(e.currentTarget);
                                            var span = $('.panelreduce-white')[0];
                                            if (span) {
                                                $(span).removeClass("panelreduce-white");
                                            }
                                        }
                                    }
                                });
                            }, 500);
                            this.onMinimize();
                            commandPanel.toggleClass('command-panel-minimized');
                            commandPanel.removeClass('command-panel-maximized');
                        };
                        CollapsiblePanel.prototype.maximize = function () {
                            var ele = $("#" + this.id);
                            ele.toggleClass('command-panel-maximized');
                            var e = arguments[0];
                            if (e) {
                                var span = $(e.currentTarget);
                                span.toggleClass("panelreduce-white");
                            }
                        };
                        CollapsiblePanel.prototype.restore = function (element) {
                            var ele = element ? $(element) : $("#" + this.id);
                            ele.toggleClass('command-panel-minimized');
                            ele.off('click');
                            ele.off('keyup');
                            this.onRestore();
                        };
                        CollapsiblePanel.prototype.close = function () {
                            this.onClose();
                        };
                        CollapsiblePanel.prototype.keybordXEnterKey = function (action) {
                            var keynum;
                            if (window.event) {
                                keynum = event.keyCode;
                            }
                            else if (event.which) {
                                keynum = event.which;
                            }
                            if (keynum === 13) {
                                if (action == "close")
                                    this.onClose();
                                else if (action == "maximize")
                                    this.maximize();
                                else if (action == "minimize")
                                    this.minimize();
                                return false;
                            }
                            return true;
                        };
                        ;
                        return CollapsiblePanel;
                    }(Panel));
                    Layouts.CollapsiblePanel = CollapsiblePanel;
                    var ModalPanel = (function (_super) {
                        __extends(ModalPanel, _super);
                        function ModalPanel(panels, visible) {
                            _super.call(this, 'templates/Framework/Layouts/ModalPanel', visible);
                            if (!panels) {
                                panels = [];
                            }
                            this.panels = ko.observableArray(panels);
                            this.cssClass('modal-fullscreen');
                        }
                        ModalPanel.prototype.hide = function () {
                            $(".modal-fullscreen").hide();
                            $("#bodyContent").show();
                        };
                        ModalPanel.prototype.show = function () {
                            $(".modal-fullscreen").show();
                            $("#bodyContent").hide();
                        };
                        return ModalPanel;
                    }(Panel));
                    Layouts.ModalPanel = ModalPanel;
                })(Layouts = Components.Layouts || (Components.Layouts = {}));
            })(Components = Framework.Components || (Framework.Components = {}));
        })(Framework = HPTRIM.Framework || (HPTRIM.Framework = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var Framework;
        (function (Framework) {
            var Components;
            (function (Components) {
                var ItemList;
                (function (ItemList) {
                    'use strict';
                    var ItemListComponent = (function (_super) {
                        __extends(ItemListComponent, _super);
                        function ItemListComponent(options, instanceName) {
                            _super.call(this, ItemListComponent.templates.card.listTemplate);
                            this.items = ko.observableArray([]);
                            this.allowedFields = ko.observableArray([]);
                            this.pluginSummaries = ko.observableArray([]);
                            this.propertyAndFieldDefinitions = ko.observable();
                            var me = this;
                            this.plugins = [];
                            this.itemExtenders = [];
                            this._options = {};
                            $.extend(me._options, options);
                            if (!me._options.loader) {
                                me._options.loader = new Components.Shared.AjaxLoader(me._options.url);
                            }
                            this.instanceName = instanceName;
                            me.errorMessage = ko.observable(null);
                            me.loading = ko.computed(function () { return me._options.loader.loading(); });
                            me.summary = ko.computed(function () {
                                if (me.errorMessage()) {
                                    return me.errorMessage();
                                }
                                if (me.loading()) {
                                    return 'Loading';
                                }
                                return null;
                            });
                            me.hasMoreItems = ko.observable(false);
                            me._pageSize = 20;
                        }
                        ItemListComponent.prototype.updateLoader = function (loader) {
                            this._options.loader = loader;
                        };
                        ItemListComponent.prototype.registerPlugin = function (plugin) {
                            this.plugins.push(plugin);
                            var me = this;
                            if (plugin.ready) {
                                plugin.ready.subscribe(function (value) {
                                    if (value) {
                                        if (me._shouldLoad && me.allPluginsReady()) {
                                            me.load(me._shouldLoadCallback);
                                        }
                                    }
                                });
                            }
                            if (plugin.summaryMessage) {
                                plugin.summaryMessage.subscribe(function (value) {
                                    me.regeneratePluginSummaries();
                                });
                            }
                        };
                        ItemListComponent.prototype.regeneratePluginSummaries = function () {
                            var summaries = [];
                            for (var index = 0; index < this.plugins.length; index++) {
                                var plugin = this.plugins[index];
                                if (plugin.summaryMessage) {
                                    var summary = plugin.summaryMessage();
                                    if (summary) {
                                        summaries.push(summary);
                                    }
                                }
                            }
                            this.pluginSummaries(summaries);
                        };
                        ItemListComponent.prototype.getPlugin = function (pluginName) {
                            for (var index = 0; index < this.plugins.length; index++) {
                                var plugin = this.plugins[index];
                                if (plugin.name === pluginName) {
                                    return plugin;
                                }
                            }
                            return null;
                        };
                        ItemListComponent.prototype.registerItemExtender = function (itemExtender) {
                            this.itemExtenders.push(itemExtender);
                        };
                        ItemListComponent.prototype.load = function (callback) {
                            this.loaded = true;
                            this.refresh(callback);
                        };
                        ItemListComponent.prototype.getExtraItems = function (fromItemIndex, itemsToGet, refreshAfterGet, callback) {
                            var me = this;
                            var currentItems = ko.observableArray([]);
                            currentItems(me.items());
                            var itemListRequest = {};
                            for (var index = 0; index < this.plugins.length; index++) {
                                var plugin = this.plugins[index];
                                var pluginRequestData = plugin.getRequestData();
                                $.extend(true, itemListRequest, pluginRequestData);
                            }
                            me.items(currentItems());
                            me.errorMessage(null);
                            var currentIndex = me._options.loader.getListStartItemIndex();
                            me._options.loader.load(itemListRequest, function (responseData) {
                                me.loadCallback(responseData, callback, refreshAfterGet);
                            }, function (error) {
                                me.errorMessage(error.ExceptionMessage ? error.ExceptionMessage : error);
                                me.loadCallback(error, callback);
                            }, fromItemIndex, itemsToGet);
                        };
                        ItemListComponent.prototype.decrease = function (newSize, decrement) {
                            var me = this;
                            if (decrement == undefined || decrement == null) {
                                decrement = 20;
                            }
                            while (decrement > 0 && me.items().length > newSize) {
                                me.items.pop();
                                decrement--;
                            }
                        };
                        ItemListComponent.prototype.refresh = function (callback) {
                            var me = this;
                            if (!me.loaded) {
                                return;
                            }
                            if (!me.allPluginsReady()) {
                                me._shouldLoad = true;
                                me._shouldLoadCallback = callback;
                                return;
                            }
                            var itemListRequest = {};
                            for (var index = 0; index < this.plugins.length; index++) {
                                var plugin = this.plugins[index];
                                var pluginRequestData = plugin.getRequestData();
                                $.extend(true, itemListRequest, pluginRequestData);
                            }
                            me.errorMessage(null);
                            me._options.loader.load(itemListRequest, function (responseData) {
                                me.loadCallback(responseData, callback);
                            }, function (error) {
                                me.errorMessage(error.ExceptionMessage ? error.ExceptionMessage : error);
                                me.loadCallback(error, callback);
                            });
                        };
                        ItemListComponent.prototype.loadMore = function (callback, recordSetSearchId) {
                            var me = this;
                            var itemListRequest = {};
                            for (var index = 0; index < this.plugins.length; index++) {
                                var plugin = this.plugins[index];
                                var pluginRequestData = plugin.getRequestData();
                                $.extend(true, itemListRequest, pluginRequestData);
                            }
                            me.errorMessage(null);
                            me._options.loader.load(itemListRequest, function (responseData) {
                                me.loadCallback(responseData, callback);
                            }, function (error) {
                                me.errorMessage(error.ExceptionMessage ? error.ExceptionMessage : error);
                                me.loadCallback(error, callback);
                            });
                        };
                        ItemListComponent.prototype.allPluginsReady = function () {
                            var allReady = true;
                            for (var index = 0; index < this.plugins.length; index++) {
                                var plugin = this.plugins[index];
                                if (plugin.ready && !plugin.ready()) {
                                    allReady = false;
                                }
                            }
                            return allReady;
                        };
                        ItemListComponent.prototype.loadCallback = function (responseData, callback, refreshAfterLoad) {
                            var me = this;
                            if (responseData.Items && me.itemExtenders.length > 0) {
                                me.extendItems((responseData.Items));
                            }
                            var appendItems = true;
                            if (appendItems) {
                                for (var i in responseData.Items) {
                                    me.items.push(responseData.Items[i]);
                                }
                            }
                            else {
                                me.items(responseData.Items);
                            }
                            for (var index = 0; index < this.plugins.length; index++) {
                                var plugin = this.plugins[index];
                                if (plugin && responseData.PluginData) {
                                    plugin.setResponseData(responseData.PluginData);
                                }
                            }
                            me.hasMoreItems(responseData.HasMoreItems);
                            if (callback) {
                                callback(responseData);
                            }
                        };
                        ItemListComponent.prototype.resetPlugins = function (pluginNames) {
                            if (pluginNames) {
                                for (var index = 0; index < pluginNames.length; index++) {
                                    var pluginName = pluginNames[index];
                                    var plugin = this.getPlugin(pluginName);
                                    if (plugin) {
                                        plugin.reset();
                                    }
                                }
                            }
                            else {
                                for (var index = 0; index < this.plugins.length; index++) {
                                    var plugin = this.plugins[index];
                                    plugin.reset();
                                }
                            }
                        };
                        ItemListComponent.prototype.setPageSize = function (newPageSize) {
                            if (newPageSize != undefined && newPageSize > -1) {
                                this._pageSize = newPageSize;
                            }
                        };
                        ItemListComponent.prototype.clear = function () {
                            this._options.loader.abort();
                            this.loaded = false;
                            this.items.removeAll();
                            this.errorMessage('');
                            this.resetPlugins();
                        };
                        ItemListComponent.prototype.extendItems = function (items) {
                            for (var index = 0; index < items.length; index++) {
                                var item = items[index];
                                for (var itemExtenderIndex = 0; itemExtenderIndex < this.itemExtenders.length; itemExtenderIndex++) {
                                    var itemExtender = this.itemExtenders[itemExtenderIndex];
                                    itemExtender.extend(item);
                                }
                            }
                        };
                        ItemListComponent.templates = {
                            card: {
                                listTemplate: 'templates/Framework/ItemList/Card'
                            }
                        };
                        return ItemListComponent;
                    }(Components.Layouts.Panel));
                    ItemList.ItemListComponent = ItemListComponent;
                })(ItemList = Components.ItemList || (Components.ItemList = {}));
            })(Components = Framework.Components || (Framework.Components = {}));
        })(Framework = HPTRIM.Framework || (HPTRIM.Framework = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var Framework;
        (function (Framework) {
            var Components;
            (function (Components) {
                var ActionManager;
                (function (ActionManager) {
                    "use strict";
                    var ActionBase = (function () {
                        function ActionBase(actionOptions) {
                            this.id = actionOptions.id;
                            this.caption = actionOptions.caption;
                            this.tooltip = actionOptions.tooltip;
                            this.actionHandler = actionOptions.actionHandler;
                            this.icon = ko.observable(actionOptions.icon);
                            this.active = ko.observable(actionOptions.active);
                            this.targetUrl = ko.observable(actionOptions.url);
                            this.hasChildren = ko.observable(false);
                            this.childActions = ko.observableArray([]);
                            if (actionOptions.childActions) {
                                this.hasChildren(true);
                                this.childActions(actionOptions.childActions);
                            }
                            if (actionOptions.visible) {
                                this.visible = actionOptions.visible;
                            }
                            else {
                                this.visible = ko.computed(function () { return true; });
                            }
                            if (actionOptions.enabled) {
                                this.enabled = actionOptions.enabled;
                            }
                            else {
                                this.enabled = ko.computed(function () { return true; });
                            }
                        }
                        return ActionBase;
                    }());
                    ActionManager.ActionBase = ActionBase;
                })(ActionManager = Components.ActionManager || (Components.ActionManager = {}));
            })(Components = Framework.Components || (Framework.Components = {}));
        })(Framework = HPTRIM.Framework || (HPTRIM.Framework = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var Framework;
        (function (Framework) {
            var Components;
            (function (Components) {
                var ActionManager;
                (function (ActionManager) {
                    "use strict";
                    var ActionManagerComponent = (function (_super) {
                        __extends(ActionManagerComponent, _super);
                        function ActionManagerComponent(caption, actions) {
                            _super.call(this, ActionManagerComponent.templates.buttonGroup);
                            this.caption = ko.observable("");
                            this.extraTitle = ko.observable("");
                            this.actions = ko.observableArray([]);
                            this.dropDownButtonClass = ko.observable("");
                            this.displayDropDownCaret = ko.observable(true);
                            this.caption(caption);
                            this.actions(actions ? actions : []);
                            this.navClasses = ko.observable({ 'nav': true });
                        }
                        ActionManagerComponent.templates = {
                            buttonGroup: 'templates/Framework/ActionManager/ButtonGroup',
                            dropdown: 'templates/Framework/ActionManager/Dropdown',
                            splitButton: 'templates/Framework/ActionManager/SplitButton',
                            panel: 'templates/Framework/ActionManager/ActionPanel',
                            button: 'templates/Framework/ActionManager/Button'
                        };
                        return ActionManagerComponent;
                    }(Components.Layouts.Panel));
                    ActionManager.ActionManagerComponent = ActionManagerComponent;
                    var Button = (function (_super) {
                        __extends(Button, _super);
                        function Button(action) {
                            _super.call(this, ActionManagerComponent.templates.button);
                            this.icon = ko.observable('');
                            this.caption = ko.observable("");
                            this.tooltip = ko.observable("");
                            this.actionHandler = ko.observable(function () { });
                            this.cssClass = ko.observable('btn btn-accent dark-grey-button');
                            if (action === undefined) {
                                throw "ActionManagerComponent - Button : action button must be defined";
                            }
                            $.extend(this, action);
                        }
                        Button.prototype.setAsPrimary = function () {
                            this.cssClass('btn button-primary');
                        };
                        return Button;
                    }(Components.Layouts.Panel));
                    ActionManager.Button = Button;
                })(ActionManager = Components.ActionManager || (Components.ActionManager = {}));
            })(Components = Framework.Components || (Framework.Components = {}));
        })(Framework = HPTRIM.Framework || (HPTRIM.Framework = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var Framework;
        (function (Framework) {
            var Components;
            (function (Components) {
                var Notification;
                (function (Notification) {
                    'use strict';
                    var NotificationComponent = (function (_super) {
                        __extends(NotificationComponent, _super);
                        function NotificationComponent(name) {
                            _super.call(this, NotificationComponent.templates.alert);
                            this.currentNotification = ko.observable({});
                            var me = this;
                            me._name = name;
                            this.currentNotification.subscribeTo('publish-notification-' + this._name, false);
                        }
                        NotificationComponent.publishNotification = function (name, notificationMessage) {
                            ko.postbox.publish('publish-notification-' + name, notificationMessage);
                        };
                        NotificationComponent.templates = {
                            alert: 'templates/Framework/Notification/Notification'
                        };
                        return NotificationComponent;
                    }(Components.Layouts.Panel));
                    Notification.NotificationComponent = NotificationComponent;
                })(Notification = Components.Notification || (Components.Notification = {}));
            })(Components = Framework.Components || (Framework.Components = {}));
        })(Framework = HPTRIM.Framework || (HPTRIM.Framework = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var Framework;
        (function (Framework) {
            var Components;
            (function (Components) {
                var Layouts;
                (function (Layouts) {
                    var SinglePage;
                    (function (SinglePage) {
                        "use strict";
                        var SinglePagePanel = (function (_super) {
                            __extends(SinglePagePanel, _super);
                            function SinglePagePanel(navPanel, bodyPanel, headerPanel) {
                                var panels = [navPanel, bodyPanel, headerPanel];
                                _super.call(this, panels);
                                if (navPanel && bodyPanel && headerPanel) {
                                    this.initialisePanels(navPanel, bodyPanel, headerPanel);
                                }
                                this.cssClass('as-spa');
                            }
                            SinglePagePanel.prototype.initialisePanels = function (navPanel, bodyPanel, headerPanel) {
                                this.panels([navPanel, bodyPanel, headerPanel]);
                                this.navPanel = navPanel;
                                this.bodyPanel = bodyPanel;
                                this.headerPanel = headerPanel;
                            };
                            return SinglePagePanel;
                        }(Layouts.ContainerPanel));
                        SinglePage.SinglePagePanel = SinglePagePanel;
                        var NavPanel = (function (_super) {
                            __extends(NavPanel, _super);
                            function NavPanel(panel) {
                                _super.call(this);
                                this.cssClass('as-spa-nav');
                            }
                            return NavPanel;
                        }(HP.HPTRIM.Framework.Components.ActionManager.ActionManagerComponent));
                        SinglePage.NavPanel = NavPanel;
                        var BodyPanel = (function (_super) {
                            __extends(BodyPanel, _super);
                            function BodyPanel(panels) {
                                _super.call(this, panels);
                                this.cssClass('as-spa-body');
                            }
                            return BodyPanel;
                        }(Layouts.CardPanel));
                        SinglePage.BodyPanel = BodyPanel;
                        var HeaderPanel = (function (_super) {
                            __extends(HeaderPanel, _super);
                            function HeaderPanel() {
                                _super.call(this);
                                this.cssClass('as-spa-header');
                            }
                            return HeaderPanel;
                        }(Layouts.ContainerPanel));
                        SinglePage.HeaderPanel = HeaderPanel;
                        var DashboardPanel = (function (_super) {
                            __extends(DashboardPanel, _super);
                            function DashboardPanel(mainPanel) {
                                var panels = [mainPanel];
                                _super.call(this, panels);
                                this.mainPanel = mainPanel;
                                this.cssClass('as-spa-dash');
                            }
                            return DashboardPanel;
                        }(Layouts.ContainerPanel));
                        SinglePage.DashboardPanel = DashboardPanel;
                        var DashboardMainPanel = (function (_super) {
                            __extends(DashboardMainPanel, _super);
                            function DashboardMainPanel() {
                                _super.call(this);
                                this.cssClass('as-spa-dash-main draggable ui-sortable');
                            }
                            return DashboardMainPanel;
                        }(Layouts.ContainerPanel));
                        SinglePage.DashboardMainPanel = DashboardMainPanel;
                        var DashboardMainSecondaryPanel = (function (_super) {
                            __extends(DashboardMainSecondaryPanel, _super);
                            function DashboardMainSecondaryPanel() {
                                _super.call(this);
                                this.cssClass('as-spa-dash-main-secondary');
                            }
                            return DashboardMainSecondaryPanel;
                        }(Layouts.ContainerPanel));
                        SinglePage.DashboardMainSecondaryPanel = DashboardMainSecondaryPanel;
                        var DashboardMainTertiaryPanel = (function (_super) {
                            __extends(DashboardMainTertiaryPanel, _super);
                            function DashboardMainTertiaryPanel() {
                                _super.call(this);
                                this.cssClass('as-spa-dash-main-tertiary');
                            }
                            return DashboardMainTertiaryPanel;
                        }(Layouts.ContainerPanel));
                        SinglePage.DashboardMainTertiaryPanel = DashboardMainTertiaryPanel;
                        var DashboardAdditionalPanel = (function (_super) {
                            __extends(DashboardAdditionalPanel, _super);
                            function DashboardAdditionalPanel() {
                                _super.call(this);
                                this.cssClass('as-spa-dash-additional');
                            }
                            return DashboardAdditionalPanel;
                        }(Layouts.ContainerPanel));
                        SinglePage.DashboardAdditionalPanel = DashboardAdditionalPanel;
                        var DashboardAdditionalPrimaryPanel = (function (_super) {
                            __extends(DashboardAdditionalPrimaryPanel, _super);
                            function DashboardAdditionalPrimaryPanel() {
                                _super.call(this);
                                this.cssClass('as-spa-dash-additional-primary');
                            }
                            return DashboardAdditionalPrimaryPanel;
                        }(Layouts.ContainerPanel));
                        SinglePage.DashboardAdditionalPrimaryPanel = DashboardAdditionalPrimaryPanel;
                        var DashboardAdditionalSecondaryPanel = (function (_super) {
                            __extends(DashboardAdditionalSecondaryPanel, _super);
                            function DashboardAdditionalSecondaryPanel() {
                                _super.call(this);
                                this.cssClass('as-spa-dash-additional-secondary');
                            }
                            return DashboardAdditionalSecondaryPanel;
                        }(Layouts.ContainerPanel));
                        SinglePage.DashboardAdditionalSecondaryPanel = DashboardAdditionalSecondaryPanel;
                        var ContentPanel = (function (_super) {
                            __extends(ContentPanel, _super);
                            function ContentPanel(primaryPanel, mainPanel, additionalPanel) {
                                if (!primaryPanel) {
                                    primaryPanel = new ContentPrimaryPanel();
                                }
                                if (!mainPanel) {
                                    mainPanel = new ContentMainPanel();
                                }
                                var panels = [primaryPanel, mainPanel];
                                if (additionalPanel) {
                                    panels.push(additionalPanel);
                                }
                                _super.call(this, panels);
                                this.primaryPanel = primaryPanel;
                                this.mainPanel = mainPanel;
                                this.additionalPanel = additionalPanel;
                                this.cssClass('as-spa-content');
                            }
                            ContentPanel.prototype.initialiseAdditionalPanel = function (additionalPanel) {
                                if (!additionalPanel) {
                                    additionalPanel = new ContentAdditionalPanel();
                                    ;
                                }
                                if (this.additionalPanel) {
                                    this.panels.remove(this.additionalPanel);
                                }
                                this.additionalPanel = additionalPanel;
                                this.panels.push(this.additionalPanel);
                            };
                            return ContentPanel;
                        }(Layouts.ContainerPanel));
                        SinglePage.ContentPanel = ContentPanel;
                        var ContentPrimaryPanel = (function (_super) {
                            __extends(ContentPrimaryPanel, _super);
                            function ContentPrimaryPanel() {
                                _super.call(this);
                                this.cssClass('as-spa-content-primary');
                            }
                            return ContentPrimaryPanel;
                        }(Layouts.ContainerPanel));
                        SinglePage.ContentPrimaryPanel = ContentPrimaryPanel;
                        var ContentMainPanel = (function (_super) {
                            __extends(ContentMainPanel, _super);
                            function ContentMainPanel() {
                                _super.call(this);
                                this.cssClass('as-spa-content-main');
                            }
                            return ContentMainPanel;
                        }(Layouts.ContainerPanel));
                        SinglePage.ContentMainPanel = ContentMainPanel;
                        var ContentAdditionalPanel = (function (_super) {
                            __extends(ContentAdditionalPanel, _super);
                            function ContentAdditionalPanel() {
                                _super.call(this);
                                this.cssClass('as-spa-content-additional');
                            }
                            return ContentAdditionalPanel;
                        }(Layouts.ContainerPanel));
                        SinglePage.ContentAdditionalPanel = ContentAdditionalPanel;
                    })(SinglePage = Layouts.SinglePage || (Layouts.SinglePage = {}));
                })(Layouts = Components.Layouts || (Components.Layouts = {}));
            })(Components = Framework.Components || (Framework.Components = {}));
        })(Framework = HPTRIM.Framework || (HPTRIM.Framework = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var TrimClient = (function () {
            function TrimClient(objectList) {
                this.defaultOwner = {};
                this.CurrencySymbol = {};
                this.CurrencyDecimalDigits = {};
                this.currentUserSortName = "";
                this.harvestedRequests = [];
                this.harvestRequests = false;
                this.userOptions = new HPTRIM.UserOptions();
                this.searchDefaults = {};
                this.currentUserType = ko.observable("");
                this.currentUserTypeValue = ko.observable("");
                this.canCreateRecord = ko.observable(false);
                this.canRequestRecord = ko.observable(false);
                this.canModifyRecord = ko.observable(false);
                this.isWorkflowAdmin = ko.observable(false);
                this.isRequestAdmin = ko.observable(false);
                this.isRecordAdmin = ko.observable(false);
                this.searchOptionDefinitions = {};
                this.propertyAndFieldCache = [];
                this.enumItems = {};
                this.enumNames = [];
                this.searchClauseDefCache = {};
                this.classificationDefCache = {};
                this.objectList = [];
                this.currentListPageSize = ko.observable(TrimClient.PAGE_SIZE);
                this.isManualNumberedRecord = false;
                this.loadedLookupSets = new Object();
                this.pendingSearchClauseDefPromiseList = {};
                this.additionalFieldSearchClausesLoaded = false;
                this.initalisingAdditionalFieldSearchClauses = false;
                this.additionalFieldSearchClauses = [];
                this.initalisingAdditionalFieldsSearchClauses = false;
                this.additionalFieldSearchClausesCallbackStack = [];
                this.additionalFieldsCallbackStack = [];
                this.additionalFieldsLoaded = false;
                this.initalisingAdditionalFields = false;
                this.additionalFields = [];
                if (!objectList) {
                    objectList = TrimClient.DEFAULT_OBJECT_LIST;
                }
                this.objectList = objectList;
                this.serviceUrl = TrimClient.getServiceAPIUrl();
                this.database = new HPTRIM.Database("", "", "", new HPTRIM.TrimBaseObject(HPTRIM.BaseObjectTypes.Location, "0", ""));
                this.applyLocalisation();
                this.getCommandsDefinition();
                this.loadPropertyOrFieldDef();
                var pageSize = TrimClient.PAGE_SIZE;
                try {
                    pageSize = HPRM_webClientOptions.WebClientUserOptionsPageSize.Value;
                }
                catch (ex) {
                }
                this.currentListPageSize(pageSize);
            }
            TrimClient.handleAjaxError = function (err) {
            };
            TrimClient.prototype.loadPropertyOrFieldDef = function () {
                var _this = this;
                var url = TrimClient.getRawUrl("API/PropertyOrFieldDef?GetPropertyOrFieldDef");
                url += "/";
                var data = "GetPropertyOrFieldDef";
                $.ajax({
                    type: "GET",
                    url: url, data: data,
                    success: function (response) {
                        var obj = jQuery.parseJSON(response);
                        _this.setPropertyDefCache(obj.PropertyOrFieldDef);
                        _this.setEnumCache(obj.Enum);
                    }
                });
            };
            TrimClient.prototype.getCommandsDefinition = function () {
                var recordTasks = HP.HPTRIM.App.Panels.RecordDetails.RecordTasks;
                var url = TrimClient.getServiceAPIUrl();
                url += "/CommandDef";
                var data = "trimType=Record&format=json";
                $.ajax({
                    type: "GET",
                    url: url, data: data,
                    success: function (response) {
                        var commandDefsById = _.indexBy(response.CommandDefs, "CommandId");
                        for (var i in recordTasks) {
                            var recTask = recordTasks[i];
                            var cid = recTask.id;
                            if (cid) {
                                var commandDef = commandDefsById[cid];
                                if (commandDef) {
                                    if (commandDef.MenuEntryString) {
                                        recTask.caption = commandDef.MenuEntryString;
                                    }
                                }
                            }
                        }
                    }
                });
            };
            TrimClient.prototype.applyLocalisation = function () {
                if (typeof HPRM != 'undefined') {
                    $.extend(HP.HPTRIM.Messages, HPRM.Messages);
                }
            };
            TrimClient.prototype.setDatabase = function (trimDatabase) {
                var me = this;
                var dbId = trimDatabase.DatabaseId.Value;
                var dbName = trimDatabase.DatabaseName.Value;
                var wgsName = trimDatabase.DatabaseWorkgroupServerName.Value;
                var currentUser = new HPTRIM.TrimBaseObject(HPTRIM.BaseObjectTypes.Location, trimDatabase.DatabaseCurrentUser.Uri, trimDatabase.DatabaseCurrentUser.LocationFormattedName.Value);
                var currentUserSortName = trimDatabase.DatabaseCurrentUser.NameString;
                var licensedFeatures = trimDatabase.LicensedProductFeatures;
                var activatedFeatures = trimDatabase.ActivatedProductFeatures;
                var defaultOwner = trimDatabase.DatabaseDefaultOwner;
                var db = new HPTRIM.Database(dbId, dbName, wgsName, currentUser);
                db.activeFeatures(activatedFeatures);
                db.licensedFeatures(licensedFeatures);
                if (trimDatabase['DatabaseGoogleKey'] && trimDatabase['DatabaseGoogleKey'].Value) {
                    db.googleGISKeySet(true);
                }
                me.database = db;
                me.defaultOwner = defaultOwner;
                me.CurrencySymbol = trimDatabase.DatabaseCurrencySymbol.Value;
                me.CurrencyDecimalDigits = trimDatabase.DatabaseCurrencyDecimalDigits.Value;
                me.currentUserSortName = currentUserSortName;
            };
            TrimClient.prototype.setCurrentUser = function (currentUser) {
                var me = this;
                var userType = currentUser.LocationUserType.StringValue || currentUser.LocationUserType.Value;
                me.currentUserType(userType);
                me.currentUserTypeValue(currentUser.LocationUserType.Value);
                var prms = currentUser.Permissions;
                me.database.currentUserPermissions(prms);
                me.canCreateRecord(prms.RecordCreate);
                me.canRequestRecord(prms.MakeRequests);
                me.canModifyRecord(prms.RecordModify);
                me.isWorkflowAdmin(prms.WorkflowAdmin);
                me.isRequestAdmin(prms.RequestAdministrator);
                me.isRecordAdmin(prms.RecordAdmin);
                var defaults = currentUser.SearchDefaults;
                me.searchDefaults = defaults;
            };
            TrimClient.prototype.setCurrentUserMemberships = function (currentUserMemberships) {
                var me = this;
                me.currentUserMemberships = currentUserMemberships;
            };
            TrimClient.prototype.setStartupOptions = function (startupOptions) {
                this.userOptions.startupOptions(startupOptions);
            };
            TrimClient.prototype.setStartupOptionsDef = function (startupOptionDef) {
                this.userOptions.startupOptionDefs(startupOptionDef);
            };
            TrimClient.prototype.setLocaleData = function (serverOptions) {
                var me = this;
                var dateSep = serverOptions.LocaleUserOptionsDateSeparator.Value;
                var opts = me.userOptions;
                opts.dateSeparator(dateSep);
                opts.monthBeforeDay(serverOptions.LocaleUserOptionsMonthBeforeDay.Value);
                opts.preferredLanguage(serverOptions.LocaleUserOptionsPreferredLanguage.Value);
                opts.yearFirst(serverOptions.LocaleUserOptionsYearFirst.Value);
                var friendlyDateFormat = "";
                var dateOnlyFormat = "";
                if (opts.yearFirst() === true) {
                    friendlyDateFormat = HP.HPTRIM.Utils.TrimHelper.format("YYYY{0}MM{0}DD hh:mm:ss A", [dateSep]);
                    dateOnlyFormat = HP.HPTRIM.Utils.TrimHelper.format("YYYY{0}MM{0}DD", [dateSep]);
                    opts.yyyymmdd = true;
                }
                else if (opts.monthBeforeDay() === true) {
                    friendlyDateFormat = HP.HPTRIM.Utils.TrimHelper.format("MM{0}DD{0}YYYY hh:mm:ss A", [dateSep]);
                    dateOnlyFormat = HP.HPTRIM.Utils.TrimHelper.format("MM{0}DD{0}YYYY", [dateSep]);
                    opts.mmddyyyy = true;
                }
                else {
                    friendlyDateFormat = HP.HPTRIM.Utils.TrimHelper.format("DD{0}MM{0}YYYY hh:mm:ss A", [dateSep]);
                    dateOnlyFormat = HP.HPTRIM.Utils.TrimHelper.format("DD{0}MM{0}YYYY", [dateSep]);
                    opts.ddmmyyyy = true;
                }
                opts.dateOnlyFormat(dateOnlyFormat);
                opts.friendlyDateFormat(friendlyDateFormat);
            };
            TrimClient.prototype.setFileDropOptions = function (fileDropOption) {
                this.userOptions.fileDropOptions = fileDropOption;
            };
            TrimClient.prototype.setPropertyDefCache = function (propertyDefs) {
                var me = this;
                _.each(this.objectList, function (objectName) {
                    var propertyAndFieldEntry = {
                        baseObjectName: objectName,
                        propertyOrFieldList: propertyDefs[objectName],
                    };
                    me.propertyAndFieldCache.push(propertyAndFieldEntry);
                });
            };
            TrimClient.prototype.setDefaultClientTimezoneIfEmpty = function (webOpt) {
                if (webOpt.WebClientUserOptionsTimezone.StringValue != '') {
                    return;
                }
                var guessTz = '';
                var guessTzOffset = moment().format('Z');
                var timezones = HPRM_applicationSettings.Timezones;
                var firstMatchTz = _.find(timezones, function (tz) {
                    return (tz.indexOf(guessTzOffset) > 0);
                });
                return firstMatchTz;
            };
            TrimClient.prototype.setWebClientOptions = function (webClientOptions) {
                var userOption = this.userOptions;
                userOption.webclientOptions(webClientOptions);
                var separator = ';';
                userOption.bypassViewerFileTypes(HP.HPTRIM.Utils.String.toArray(webClientOptions.WebClientUserOptionsBypassFileTypes.Value, separator));
                userOption.onstreamViewerFileTypes(HP.HPTRIM.Utils.String.toArray(webClientOptions.WebClientUserOptionsOnstreamFileTypes.Value, separator));
            };
            TrimClient.prototype.setEnumCache = function (enumDefs) {
                if (enumDefs) {
                    this.enumItems = enumDefs;
                }
            };
            TrimClient.prototype.setCheckoutCaptionData = function (caption) {
                HP.HPTRIM.Captions.RecordIsCheckedOut = caption.Property['FalseString'];
            };
            TrimClient.prototype.setObjectDefs = function (objectDefs) {
                for (var key in objectDefs) {
                    var obj = objectDefs[key];
                    var allBobTypes = _.keys(HP.HPTRIM.BaseObjectTypes);
                    _.each(allBobTypes, function (bobType) {
                        if (bobType == obj.Id) {
                            $.extend(HP.HPTRIM.BaseObjectTypes[bobType], obj);
                        }
                    });
                }
            };
            TrimClient.prototype.initialiseMainObjectDefinitions = function (objectDefs, objectPropertyCache) {
                this.mainObjectPropertyCache = objectPropertyCache;
                this.mainObjectDefinitions = new HPTRIM.App.Panels.MainObject.MainObjectDefinitions(this, objectDefs, this.objectList, objectPropertyCache);
            };
            TrimClient.prototype.setSearchOptionDefinitions = function (searchOptionDefs) {
                this.searchOptionDefinitions = searchOptionDefs;
            };
            TrimClient.getServiceAPIUrl = function () {
                return HPRMWebConfig.virtualDirectory + "ServiceApi";
            };
            TrimClient.getRawUrl = function (path) {
                return HPRMWebConfig.virtualDirectory + "/" + path;
            };
            TrimClient.prototype.isSupportedObjectType = function (objectTypeName) {
                var supportedObjectTypes = ['record', 'workflow', 'activity',];
                try {
                    _.each(this.getMainObjectDefinitions().definitions, function (definition) {
                        if (definition.Id) {
                            supportedObjectTypes.push(definition.Id.toLowerCase());
                        }
                    });
                }
                catch (ex) {
                    throw ex;
                }
                return _.contains(supportedObjectTypes, objectTypeName.toLowerCase());
            };
            TrimClient.prototype.getADFSLogoutURL = function () {
                return TrimClient.getServiceAPIUrl() + '/auth/logout?Continue=' + TrimClient.getServiceAPIUrl() + '/auth/adlogout';
            };
            TrimClient.prototype.getFileDropDefaultRecordType = function () {
                var retOpt = this.userOptions.fileDropOptions;
                if (retOpt == undefined && retOpt == null) {
                    return null;
                }
                if (retOpt.DroppedFilesUserOptionsRecordType.Uri == 0) {
                    return null;
                }
                else {
                    var rty = retOpt.DroppedFilesUserOptionsRecordType;
                    return new HPTRIM.TrimBaseObject(HP.HPTRIM.BaseObjectTypes.RecordType, rty.Uri, rty.RecordTypeName.Value, rty.RecordTypeName.Value, rty.Icon.Id);
                }
            };
            TrimClient.prototype.getFileDropDefaultContainer = function () {
                var retOpt = this.userOptions.fileDropOptions;
                if (retOpt == undefined && retOpt == null) {
                    return null;
                }
                if (retOpt.DroppedFilesUserOptionsContainer.Uri == 0) {
                    return null;
                }
                else {
                    return new HPTRIM.TrimBaseObject(HP.HPTRIM.BaseObjectTypes.Record, retOpt.DroppedFilesUserOptionsContainer.Uri, retOpt.DroppedFilesUserOptionsContainer.RecordNumber.Value);
                }
            };
            TrimClient.prototype.getUrl = function (path) {
                return this.serviceUrl + "/" + path;
            };
            TrimClient.prototype.getDatabase = function () {
                return this.database;
            };
            TrimClient.prototype.getSearchDefaults = function () {
                return this.searchDefaults;
            };
            TrimClient.prototype.getSearchDefaultsForObject = function (objectType) {
                if (this.searchDefaults[objectType.name]) {
                    return this.searchDefaults[objectType.name];
                }
                return {
                    Filters: [],
                    SortString: "",
                };
            };
            TrimClient.prototype.updateSearchDefaultFilters = function (objectType, filters) {
                if (!this.searchDefaults[objectType.name]) {
                    this.searchDefaults[objectType.name] = {};
                }
                this.searchDefaults[objectType.name]["Filters"] = filters;
            };
            TrimClient.prototype.updateSearchDefaultSort = function (objectType, sortString) {
                if (!this.searchDefaults[objectType.name]) {
                    this.searchDefaults[objectType.name] = {};
                }
                this.searchDefaults[objectType.name]["SortString"] = sortString;
            };
            TrimClient.prototype.getUserOptions = function () {
                return this.userOptions;
            };
            TrimClient.prototype.getDateFormat = function () {
                var userOptions = this.userOptions;
                var dateFormat = {
                    ddmmyyyy: userOptions.ddmmyyyy,
                    mmddyyyy: userOptions.mmddyyyy,
                    yyyymmdd: userOptions.yyyymmdd,
                    monthBeforeDay: userOptions.monthBeforeDay(),
                    dateSeparator: userOptions.dateSeparator(),
                    friendlyDateFormat: userOptions.friendlyDateFormat(),
                    dateOnlyFormat: userOptions.dateOnlyFormat(),
                };
                return dateFormat;
            };
            TrimClient.prototype.getListPageSize = function () {
                return parseInt(this.userOptions.webclientOptions().WebClientUserOptionsPageSize.Value);
            };
            TrimClient.prototype.getCurrentLanguageCode = function () {
                var codeMap = {
                    'default': "en",
                    'chinese': "zh-cn",
                    'dutch': "nl",
                    'englishus': "en-us",
                    'english': "en",
                    'french': "fr",
                    'german': "de",
                    'italian': "it",
                    'portuguesebz': "en",
                    'russian': "en",
                    'spanish': "es",
                    'vietnamese': "vi"
                };
                var currentSelectedLocale = this.userOptions.preferredLanguage();
                var key = currentSelectedLocale.toLowerCase();
                var languageCode = codeMap[key];
                if (languageCode == null) {
                    languageCode = codeMap["default"];
                }
                return languageCode;
            };
            TrimClient.prototype.getAccessControlValue = function (accessControlType) {
                var bypassAccesssCheck = this.getDatabase().currentUserPermissions().BypassAllAccess;
                if (bypassAccesssCheck) {
                    return true;
                }
                var currentUserUri = this.getDatabase().currentLoggedInUser().Uri;
                var allowedLocations = accessControlType.AccessLocations;
                if (allowedLocations) {
                    if (allowedLocations.length == 0) {
                        return true;
                    }
                    var matchingLocation = _.find(allowedLocations, function (allowedLocation) {
                        return (allowedLocation.Uri == currentUserUri);
                    });
                    if (matchingLocation) {
                        return true;
                    }
                    var matchingMemberGroup = _.find(this.currentUserMemberships, function (memberOf) {
                        var matchingLocation = _.find(allowedLocations, function (allowedLocation) {
                            return (allowedLocation.Uri == memberOf.Uri);
                        });
                        if (matchingLocation) {
                            return true;
                        }
                    });
                    if (matchingMemberGroup) {
                        return true;
                    }
                }
                return false;
            };
            TrimClient.prototype.setCookie = function (cname, cvalue, exdays) {
                if (exdays != null && exdays > 0) {
                    var d = new Date();
                    d.setTime(d.getTime() + (exdays * 24 * 60 * 60 * 1000));
                    var expires = "expires=" + d.toUTCString();
                    document.cookie = cname + "=" + cvalue + "; " + expires;
                }
                else {
                    document.cookie = cname + "=" + cvalue;
                }
                this.currentListPageSize(this.getListPageSize());
            };
            TrimClient.prototype.getCookie = function (cname, defValue) {
                var name = cname + "=";
                var ca = document.cookie.split(';');
                for (var i = 0; i < ca.length; i++) {
                    var c = ca[i];
                    while (c.charAt(0) == ' ')
                        c = c.substring(1);
                    if (c.indexOf(name) == 0)
                        return c.substring(name.length, c.length);
                }
                return defValue;
            };
            TrimClient.prototype.doGet = function (path, data, dataType, synchronous, recordSetId) {
                var _dataType = dataType || "json";
                var me = this;
                if (data != null) {
                    data["ResultsOnly"] = true;
                }
                var requestObject = {
                    path: path,
                    url: this.getUrl(path),
                    data: data,
                    dataType: _dataType
                };
                if (recordSetId) {
                    requestObject.beforeSend = function (request) {
                        request.setRequestHeader("Next-Page-Id", unescape(encodeURIComponent(recordSetId)));
                    };
                }
                if (synchronous) {
                    requestObject.async = false;
                }
                var jqueryXHR = $.ajax(requestObject)
                    .done(function (result) {
                    if (me.harvestRequests) {
                        requestObject['result'] = result;
                        me.harvestedRequests.push(requestObject);
                        var logMesg = JSON.stringify(requestObject);
                    }
                })
                    .fail(function (xhr, textStatus, errorThrown) {
                    if (xhr.status == 404 && HP.HPTRIM.Config.useADFS) {
                        window.location.reload();
                    }
                });
                return jqueryXHR;
            };
            TrimClient.prototype.doGetAsHTML = function (path, data) {
                return this.doGet(path, data, 'html');
            };
            TrimClient.prototype.doGetForExternalResource = function (path, data, basePath, deferred) {
                var realResourcePath = this.getUrl(basePath);
                var request = $.ajax({
                    url: this.getUrl(path),
                    data: data,
                    dataType: 'html'
                }).done(function (result) {
                    deferred.resolve(result, realResourcePath);
                }).fail(function (xhr, textStatus, errorThrown) {
                    var response;
                    if (xhr.responseText) {
                        response = xhr.responseText;
                    }
                    deferred.reject(errorThrown, response, realResourcePath);
                });
                return request;
            };
            TrimClient.prototype.doGetForRenditionResource = function (url) {
                return $.ajax({ url: url, type: 'HEAD' });
            };
            TrimClient.prototype.doPost = function (path, data, dataType) {
                var deferred = new $.Deferred();
                var promise = deferred.promise();
                if (!dataType) {
                    dataType = "json";
                }
                var requestVerificationToken = HP.HPTRIM.Utils.TrimHelper.getAntiForegryToken();
                $.ajax({
                    headers: requestVerificationToken,
                    url: this.getUrl(path),
                    data: JSON.stringify(data),
                    dataType: dataType,
                    contentType: 'application/json;charset=utf-8',
                    type: 'POST',
                })
                    .done(function (result) {
                    deferred.resolve(result);
                })
                    .fail(function (xhr, textStatus, errorThrown) {
                    var err = eval("(" + xhr.responseText + ")");
                    deferred.reject(err, xhr);
                });
                return promise;
            };
            TrimClient.prototype.doPostForFormSearch = function (path, data, dataType) {
                var deferred = new $.Deferred();
                var promise = deferred.promise();
                data.append("ByPassSave", "true");
                if (!dataType) {
                    dataType = "json";
                }
                var requestVerificationToken = HP.HPTRIM.Utils.TrimHelper.getAntiForegryToken();
                $.ajax({
                    headers: requestVerificationToken,
                    url: this.getUrl(path),
                    data: data,
                    dataType: dataType,
                    cache: false,
                    processData: false,
                    contentType: false,
                    type: 'POST',
                })
                    .done(function (result) {
                    deferred.resolve(result);
                })
                    .fail(function (xhr, textStatus, errorThrown) {
                    var err = eval("(" + xhr.responseText + ")");
                    deferred.reject(err, xhr);
                });
                return promise;
            };
            TrimClient.prototype.doPostForDelete = function (path) {
                var deferred = new $.Deferred();
                var promise = deferred.promise();
                var requestVerificationToken = HP.HPTRIM.Utils.TrimHelper.getAntiForegryToken();
                $.ajax({
                    headers: requestVerificationToken,
                    url: this.getUrl(path),
                    dataType: 'json',
                    contentType: 'application/json;charset=utf-8',
                    type: 'POST'
                })
                    .done(function (result) {
                    deferred.resolve(result);
                })
                    .fail(function (xhr, textStatus, errorThrown) {
                    if (xhr.status == 200) {
                        deferred.resolve();
                        return;
                    }
                    var err = eval("(" + xhr.responseText + ")");
                    deferred.reject(err, xhr);
                });
                return promise;
            };
            TrimClient.prototype.doPostWithDownloadLink = function (path, data, basePath, dataType) {
                var deferred = new $.Deferred();
                var promise = deferred.promise();
                if (!dataType) {
                    dataType = "json";
                }
                var requestVerificationToken = HP.HPTRIM.Utils.TrimHelper.getAntiForegryToken();
                var realResourcePath = this.getUrl(basePath);
                $.ajax({
                    headers: requestVerificationToken,
                    url: this.getUrl(path),
                    data: JSON.stringify(data),
                    dataType: dataType,
                    contentType: 'application/json;charset=utf-8',
                    type: 'POST'
                })
                    .done(function (result, textStatus, xhr) {
                    deferred.resolve(result, realResourcePath);
                })
                    .fail(function (xhr, textStatus, errorThrown) {
                    var err = eval("(" + xhr.responseText + ")");
                    deferred.reject(err, xhr);
                });
                return promise;
            };
            TrimClient.prototype.getMainObjectPropertyDefFromCache = function (baseObjectType, propertyId) {
                var me = this;
                if (propertyId == "Icon") {
                    return;
                }
                var mainObjectCacheEntry = _.find(me.mainObjectPropertyCache, function (cacheEntry) {
                    return (cacheEntry.objectName == baseObjectType.name);
                });
                if (mainObjectCacheEntry) {
                    var property = _.find(mainObjectCacheEntry.properties, function (propertyOrField) {
                        return propertyOrField.Id == propertyId;
                    });
                }
                if (property) {
                    return property;
                }
                throw ("Can't find property: " + propertyId + " for object " + baseObjectType.name);
            };
            TrimClient.prototype.loadPropertyDef = function (baseObjectType, propertyId, resultProcessor) {
                var me = this;
                var propFieldDef = _.find(me.propertyAndFieldCache, function (propEntry) {
                    return (propEntry.baseObjectName == baseObjectType.name);
                });
                if (propFieldDef) {
                    return _.find(propFieldDef.propertyOrFieldList, function (propertyOrField) {
                        return propertyOrField.Id == propertyId;
                    });
                }
                this.doGet("PropertyDef", { 'TrimType': baseObjectType.name, 'GetProperties': propertyId }).done(function (result) {
                    if (result.PropertiesAndFields && result.PropertiesAndFields.length == 1) {
                        var propFieldDef = _.find(me.propertyAndFieldCache, function (propEntry) {
                            return (propEntry.baseObjectName == baseObjectType.name);
                        });
                        if (propFieldDef) {
                            propFieldDef.propertyOrFieldList.push(result.PropertiesAndFields[0]);
                        }
                        else {
                            me.propertyAndFieldCache.push({
                                baseObjectName: baseObjectType.name,
                                propertyOrFieldList: [result.PropertiesAndFields[0]]
                            });
                        }
                        resultProcessor(result.PropertiesAndFields[0]);
                    }
                });
            };
            TrimClient.prototype.getPropertyAndFieldDefs = function (baseObjectType, propertySet, resultProcessor) {
                if (propertySet.name != "All") {
                    this.doGet("PropertyDef", { 'get': propertySet.name, 'TrimType': baseObjectType.name }).done(resultProcessor);
                    return;
                }
                var me = this;
                var propFieldsForObject = _.find(me.propertyAndFieldCache, function (propEntry) {
                    return (propEntry.baseObjectName == baseObjectType.name);
                });
                if (propFieldsForObject) {
                    var result = {
                        "PropertiesAndFields": propFieldsForObject.propertyOrFieldList
                    };
                    resultProcessor(result);
                }
                else {
                    this.doGet("PropertyDef", { 'get': propertySet.name, 'TrimType': baseObjectType.name }).done(function (result) {
                        if (result.PropertiesAndFields) {
                            me.propertyAndFieldCache.push({ baseObjectName: baseObjectType.name, propertyOrFieldList: result.PropertiesAndFields[baseObjectType.Name] });
                        }
                        resultProcessor(result);
                    });
                }
            };
            TrimClient.prototype.getPropertyAndFieldDefsCustom = function (baseObjectType, properties, resultProcessor) {
                var me = this;
                var propFieldsForObject = _.find(me.propertyAndFieldCache, function (propEntry) {
                    return (propEntry.baseObjectName == baseObjectType.name);
                });
                var missingAny = false;
                var result = {
                    "PropertiesAndFields": []
                };
                if (propFieldsForObject) {
                    _.each(properties, function (propertyName) {
                        var propertyDef = _.find(propFieldsForObject.propertyOrFieldList, function (propField) {
                            return propField.PropertyId == propertyName;
                        });
                        if (propertyDef) {
                            result.PropertiesAndFields.push(propertyDef);
                        }
                        else {
                            missingAny = true;
                        }
                    });
                }
                if (propFieldsForObject && !missingAny) {
                    resultProcessor(result);
                }
                else {
                    this.doGet("PropertyDef", { 'GetProperties': properties.join(','), 'TrimType': baseObjectType.name }).done(resultProcessor);
                }
            };
            TrimClient.prototype.getAndProcessEnumDefinition = function (enumName, resultProcessor) {
                var _this = this;
                if (this.enumItems[enumName]) {
                    resultProcessor(this.enumItems[enumName]);
                }
                else {
                    var path = "EnumItem";
                    var request = {};
                    request.Enums = enumName;
                    request.ExcludeUneditedCustomValues = true;
                    this.doGet(path, request).done(function (result) {
                        var parts = enumName.split(',');
                        if (parts.length > 1) {
                            resultProcessor(result.EnumItems);
                        }
                        else {
                            _this.enumItems[enumName] = result.EnumItems[enumName];
                            resultProcessor(result.EnumItems[enumName]);
                        }
                    });
                }
            };
            TrimClient.prototype.getEnumItemCaption = function (enumName, enumItemValue) {
                var enumItem = this.enumItems[enumName];
                if (enumItem) {
                    var enumValueDefinition = _.find(enumItem, function (enumValue) {
                        return (enumValue.Name == enumItemValue);
                    });
                    if (enumValueDefinition) {
                        return enumValueDefinition.Caption;
                    }
                }
                return enumItemValue;
            };
            TrimClient.prototype.getEnumDefinition = function (enumName) {
                var _this = this;
                var promise = $.Deferred();
                if (this.enumItems[enumName]) {
                    promise.resolve(this.enumItems[enumName]);
                }
                else {
                    var path = "EnumItem";
                    var request = {};
                    request.Enums = enumName;
                    this.doGet(path, request).done(function (result) {
                        _this.enumItems[enumName] = result.EnumItems[enumName];
                        promise.resolve(_this.enumItems[enumName]);
                    });
                }
                return promise;
            };
            TrimClient.prototype.addSearchClauseHelpToCache = function (objectName, searchClauseHelp) {
                var dictionaryId = objectName.toLowerCase();
                this.searchClauseDefCache[dictionaryId] = searchClauseHelp;
            };
            TrimClient.prototype.getAndProcessSearchClauseDefinition = function (objectName, resultProcessor) {
                var _this = this;
                var dictionaryId = objectName.toLowerCase();
                if (this.searchClauseDefCache[dictionaryId]) {
                    resultProcessor(this.searchClauseDefCache[dictionaryId]);
                }
                else if (this.pendingSearchClauseDefPromiseList[objectName]) {
                    this.pendingSearchClauseDefPromiseList[objectName].done(function (result) {
                        _this.searchClauseDefCache[dictionaryId] = result.SearchClauseDefs;
                        resultProcessor(result.SearchClauseDefs);
                    });
                }
                else {
                    var path = "SearchClauseDef";
                    var request = {};
                    request.TrimType = objectName;
                    this.pendingSearchClauseDefPromiseList[objectName] = this.doGet(path, request).done(function (result) {
                        _this.pendingSearchClauseDefPromiseList[objectName] = null;
                        _this.searchClauseDefCache[dictionaryId] = result.SearchClauseDefs;
                        resultProcessor(result.SearchClauseDefs);
                    });
                }
            };
            TrimClient.prototype.getAndProcessObjectDefinition = function (objectName, includeDataEntryForms, resultProcessor) {
                var path = "ObjectDef";
                var request = {};
                request.TrimType = objectName;
                request.IncludeDataEntryForms = includeDataEntryForms;
                this.doGet(path, request).done(function (result) {
                    resultProcessor(result);
                });
            };
            TrimClient.prototype.getAdditionaFieldSearchClauses = function (callback) {
                var _this = this;
                var me = this;
                if (this.initalisingAdditionalFieldsSearchClauses == false && this.additionalFieldSearchClausesLoaded == false) {
                    this.initalisingAdditionalFieldsSearchClauses = true;
                    var properties = [
                        "FieldDefinitionName", "FieldDefinitionObjectType", "FieldDefinitionFormat",
                        "FieldDefinitionLookupSet", "FieldDefinitionIconId", "FieldDefinitionSearchClause",
                        "FieldDefinitionSearchClauseName", "FieldDefinitionIsSearchable", "FieldDefinitionNotes",
                        "FieldDefinitionLowerLimit", "FieldDefinitionUpperLimit", "FieldDefinitionLength", "FieldDefinitionIsSearchable",
                        "FieldDefinitionIsVisible"
                    ];
                    var search = new HPTRIM.TrimMainObjectSearch(this, HPTRIM.BaseObjectTypes.FieldDefinition);
                    search.setProperties(properties);
                    search.setSearchString("all");
                    search.setPageSize(100);
                    var errorHandler = function (error) {
                    };
                    var currentPage = 0;
                    var resultsHandler = function (response) {
                        var result = response.Results;
                        for (var i = 0; i < result.length; i++) {
                            var field = result[i];
                            var toolTip = field.FieldDefinitionName.Value;
                            if (field.FieldDefinitionNotes && field.FieldDefinitionNotes.Value) {
                                toolTip = field.FieldDefinitionNotes.Value;
                            }
                            var lookupSet = undefined;
                            if (field.FieldDefinitionLookupSet) {
                                lookupSet = new HPTRIM.TrimBaseObject(HPTRIM.BaseObjectTypes.LookupSet, field.FieldDefinitionLookupSet.Uri);
                            }
                            var userFieldSearchClause = {
                                ParameterFormat: field.FieldDefinitionFormat.Value,
                                MethodGroup: "AdditionalField",
                                ObjectTypeParameter: field.FieldDefinitionObjectType.Value,
                                Caption: field.FieldDefinitionName.Value,
                                ToolTip: toolTip,
                                Icon: field.FieldDefinitionIconId.Value,
                                InternalName: field.FieldDefinitionSearchClauseName.Value,
                                Name: field.FieldDefinitionSearchClauseName.Value,
                                Uri: field.Uri,
                                LookupSet: lookupSet,
                                minValue: Number(field.FieldDefinitionLowerLimit.Value),
                                maxValue: Number(field.FieldDefinitionUpperLimit.Value),
                                maxLength: Number(field.FieldDefinitionLength.Value),
                                CanSearch: []
                            };
                            _this.additionalFieldSearchClauses.push(userFieldSearchClause);
                        }
                        if (response.HasMoreItems == true) {
                            currentPage = currentPage + 1;
                            search.page(currentPage).done(resultsHandler).fail(resultsHandler);
                        }
                        else {
                            _this.additionalFieldSearchClausesLoaded = true;
                            if (callback) {
                                callback(me.additionalFieldSearchClauses);
                            }
                            _.forEach(me.additionalFieldSearchClausesCallbackStack, function (callback) {
                                callback(me.additionalFieldSearchClauses);
                            });
                        }
                    };
                    search.page(currentPage).done(resultsHandler).fail(resultsHandler);
                }
                else if (this.additionalFieldSearchClausesLoaded) {
                    callback(this.additionalFieldSearchClauses);
                }
                else if (this.initalisingAdditionalFieldSearchClauses) {
                    if (callback) {
                        this.additionalFieldSearchClausesCallbackStack.push(callback);
                    }
                }
            };
            TrimClient.prototype.getAdditionaFields = function (callback) {
                var _this = this;
                var me = this;
                if (this.initalisingAdditionalFields == false && this.additionalFieldsLoaded == false) {
                    this.initalisingAdditionalFields = true;
                    if (this.additionalFields.length == 0) {
                        var propperties = [
                            "FieldDefinitionName", "FieldDefinitionObjectType", "FieldDefinitionFormat",
                            "FieldDefinitionLookupSet", "FieldDefinitionIconId", "FieldDefinitionSearchClause",
                            "FieldDefinitionSearchClauseName", "FieldDefinitionIsSearchable", "FieldDefinitionNotes",
                            "FieldDefinitionLowerLimit", "FieldDefinitionUpperLimit", "FieldDefinitionLength", "CanSearch"
                        ];
                        var search = new HPTRIM.TrimMainObjectSearch(this, HPTRIM.BaseObjectTypes.FieldDefinition);
                        search.setProperties(propperties);
                        search.setSearchString("all");
                        search.setPageSize(100);
                        var errorHandler = function (error) {
                        };
                        var currentPage = 0;
                        var resultsHandler = function (response) {
                            var result = response.Results;
                            for (var i = 0; i < result.length; i++) {
                                var field = result[i];
                                var toolTip = field.FieldDefinitionName.Value;
                                if (field.FieldDefinitionNotes && field.FieldDefinitionNotes.Value) {
                                    toolTip = field.FieldDefinitionNotes.Value;
                                }
                                var lookupSet = undefined;
                                if (field.FieldDefinitionLookupSet) {
                                    lookupSet = new HPTRIM.TrimBaseObject(HPTRIM.BaseObjectTypes.LookupSet, field.FieldDefinitionLookupSet.Uri);
                                }
                                var fieldMandatoryValue = HP.HPTRIM.Form.FieldMandaoryOption.None;
                                if (field.Mandatory == true) {
                                    fieldMandatoryValue = HP.HPTRIM.Form.FieldMandaoryOption.Mandatory;
                                }
                                else if (field.WarnWhenBlank == true) {
                                    fieldMandatoryValue = HP.HPTRIM.Form.FieldMandaoryOption.WarningOnly;
                                }
                                else if (field.MandatoryTime == true) {
                                    fieldMandatoryValue = HP.HPTRIM.Form.FieldMandaoryOption.Partially;
                                }
                                var udf = {
                                    ParameterFormat: field.FieldDefinitionFormat.Value,
                                    MethodGroup: "AdditionalField",
                                    ObjectTypeParameter: field.FieldDefinitionObjectType.Value,
                                    Caption: field.FieldDefinitionName.Value,
                                    ToolTip: toolTip,
                                    Icon: field.FieldDefinitionIconId.Value,
                                    InternalName: field.FieldDefinitionSearchClauseName.Value,
                                    Name: field.FieldDefinitionSearchClauseName.Value,
                                    Uri: field.Uri,
                                    LookupSet: lookupSet,
                                    minValue: Number(field.FieldDefinitionLowerLimit.Value),
                                    maxValue: Number(field.FieldDefinitionUpperLimit.Value),
                                    maxLength: Number(field.FieldDefinitionLength.Value),
                                    MandatoryOptionValue: fieldMandatoryValue,
                                    CanSearch: field.CanSearch
                                };
                                _this.additionalFields.push(udf);
                            }
                            if (response.HasMoreItems == true) {
                                currentPage = currentPage + 1;
                                search.page(currentPage).done(resultsHandler).fail(resultsHandler);
                            }
                            else {
                                _this.additionalFieldsLoaded = true;
                                if (callback) {
                                    callback(me.additionalFields);
                                }
                                _.forEach(me.additionalFieldsCallbackStack, function (callback) {
                                    callback(me.additionalFields);
                                });
                            }
                        };
                        search.page(currentPage).done(resultsHandler).fail(resultsHandler);
                    }
                }
                else if (this.additionalFieldsLoaded) {
                    callback(this.additionalFields);
                }
                else if (this.initalisingAdditionalFields) {
                    if (callback) {
                        this.additionalFieldsCallbackStack.push(callback);
                    }
                }
            };
            TrimClient.prototype.getCachedSearchClauseDef = function (objectName, clauseName) {
                var clauseInfo = {};
                var dictionaryId = objectName.toLowerCase();
                var clauseDefs = this.searchClauseDefCache[dictionaryId];
                if (clauseDefs) {
                    clauseInfo = _.find(clauseDefs, function (clause) {
                        return clause.Id == clauseName;
                    });
                }
                return clauseInfo;
            };
            TrimClient.prototype.getAndProcessClassificationDefinition = function (objectName, resultProcessor) {
                var _this = this;
                var path = "Classification?q=all&properties=ParentClassification%2C+Title&PropertyValue=String&stringDisplayType=Default&IncludePropertyDefs=false";
                var request = {};
                request.TrimType = objectName;
                this.doGet(path, request).done(function (result) {
                    _this.classificationDefCache = result.Results;
                    resultProcessor(result);
                });
            };
            TrimClient.prototype.getMainObjectDefinitions = function () {
                return this.mainObjectDefinitions;
            };
            TrimClient.prototype.getPageItem = function (formDefinition, pageItemId) {
                if (formDefinition.Pages && pageItemId != undefined && pageItemId != "") {
                    for (var i = 0; i < formDefinition.Pages.length; i++) {
                        var page = formDefinition.Pages[i];
                        for (var j = 0; j < page.PageItems.length; j++) {
                            if (page.PageItems[j].Name == pageItemId) {
                                return page.PageItems[j];
                            }
                        }
                    }
                }
                return undefined;
            };
            TrimClient.prototype.getAndLoadLookupSet = function (lookupSetUri, loadedCallback) {
                if (lookupSetUri == undefined || lookupSetUri == "") {
                    return null;
                }
                var me = this;
                if (me.loadedLookupSets[lookupSetUri] != undefined) {
                    if (me.loadedLookupSets[lookupSetUri] == 'pending') {
                        setTimeout(function () { me.getAndLoadLookupSet(lookupSetUri, loadedCallback); }, 3000);
                    }
                    else {
                        if (me.loadedLookupSets[lookupSetUri] == 'bad') {
                            return null;
                        }
                        else {
                            loadedCallback(me.loadedLookupSets[lookupSetUri]);
                            return me.loadedLookupSets[lookupSetUri];
                        }
                    }
                }
                else {
                    me.loadedLookupSets[lookupSetUri] = 'pending';
                    var returnSet = {};
                    returnSet.LookupSetUri = lookupSetUri;
                    var failHandler = function (errorResponse) {
                        var errorMsg = HP.HPTRIM.Messages.web_unableToConnectToWebServices;
                        if (errorResponse.responseJSON && errorResponse.responseJSON.ResponseStatus && errorResponse.responseJSON.ResponseStatus.Message) {
                            errorMsg = errorResponse.responseJSON.ResponseStatus.Message;
                        }
                        ko.postbox.publish(HPTRIM.App.TRIMApp.NOTIFICATION_ERROR_TOPIC, errorMsg);
                        me.loadedLookupSets[lookupSetUri] = 'bad';
                        return null;
                    };
                    var search = new HPTRIM.TrimMainObjectSearch(me, HPTRIM.BaseObjectTypes.LookupSet);
                    search.setProperties(["name", "LookupSetOnlySelectLowestLevel", "LookupSetItemsHaveLongValue", "LookupSetItemsHaveShortValue", "LookupSetItemsHaveComments", "LookupSetItemDisplayStyle"]);
                    search.setSearchString("uri:" + lookupSetUri + " " + HPTRIM.Messages.core_and + " usable");
                    search.page().done(function (result) {
                        if (result.Results.length > 0) {
                            returnSet.LookupSetName = result.Results[0].LookupSetName.Value;
                            returnSet.SelectLowestLevelOnly = result.Results[0].LookupSetOnlySelectLowestLevel.Value;
                            returnSet.LookupSetDisplayStyle = result.Results[0].LookupSetItemDisplayStyle.Value;
                            returnSet.HasShortValue = result.Results[0].LookupSetItemsHaveShortValue.Value;
                            returnSet.HasLongValue = result.Results[0].LookupSetItemsHaveLongValue.Value;
                            var lookupItemFullNames = [];
                            var lookupItemUris = [];
                            var currentPage = 0;
                            var search = new HPTRIM.TrimMainObjectSearch(me, HPTRIM.BaseObjectTypes.LookupItem);
                            search.setProperties(["LookupItemFullDescription"]);
                            search.setPageSize(10000);
                            search.setSearchString("set:" + lookupSetUri + " " + HPTRIM.Messages.core_and + " usable");
                            var resultsHandler = function (result) {
                                if (result.Results.length > 0) {
                                    for (var i = 0; i < result.Results.length; i++) {
                                        lookupItemFullNames.push(result.Results[i].LookupItemFullDescription.Value);
                                        lookupItemUris.push(result.Results[i].Uri);
                                    }
                                }
                                if (result.HasMoreItems) {
                                    currentPage++;
                                    search.page(currentPage).done(resultsHandler).fail(failHandler);
                                }
                                else {
                                    returnSet.LookupItemFullNames = lookupItemFullNames;
                                    returnSet.LookupItemUris = lookupItemUris;
                                    me.loadedLookupSets[lookupSetUri] = returnSet;
                                    loadedCallback(returnSet);
                                    return returnSet;
                                }
                            };
                            search.page(currentPage).done(resultsHandler).fail(failHandler);
                        }
                    }).fail(failHandler);
                }
                return null;
            };
            TrimClient.PAGE_SIZE = 40;
            TrimClient.DEFAULT_OBJECT_LIST = [
                "Record",
                "Location",
                "Workflow",
                "CheckinStyle",
                "UserLabel",
                "SavedSearch",
                "Activity",
                "Request",
                "TodoItem",
                "TodoItemItemReference",
                "RecordAction",
                "ActionDef",
                "SearchForm",
                "History",
                "ConsignmentApprover",
                "ConsignmentRejection",
            ];
            return TrimClient;
        }());
        HPTRIM.TrimClient = TrimClient;
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var MessageService;
        (function (MessageService) {
            var WebHub = (function () {
                function WebHub() {
                    this.m_service = $.connection['webHub'];
                }
                WebHub.getConnectionId = function () {
                    return HP.HPTRIM.MessageService.WebHub.s_service.connection.id;
                };
                WebHub.prototype.start = function () {
                    var _this = this;
                    $.connection.hub.start().done(function () {
                        HP.HPTRIM.MessageService.WebHub.s_service = _this.m_service;
                    });
                };
                return WebHub;
            }());
            MessageService.WebHub = WebHub;
        })(MessageService = HPTRIM.MessageService || (HPTRIM.MessageService = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var IncludeProperties = (function () {
            function IncludeProperties() {
            }
            IncludeProperties.None = { name: 'None' };
            IncludeProperties.Properties = { name: 'Properties' };
            IncludeProperties.PropertySets = { name: 'PropertySets' };
            IncludeProperties.All = { name: 'All' };
            return IncludeProperties;
        }());
        HPTRIM.IncludeProperties = IncludeProperties;
        var PropertySets = (function () {
            function PropertySets() {
            }
            PropertySets.DataGridVisible = { name: 'DataGridVisible' };
            PropertySets.Detailed = { name: 'Detailed' };
            PropertySets.ViewPanel = { name: 'ViewPane' };
            PropertySets.All = { name: 'All' };
            return PropertySets;
        }());
        HPTRIM.PropertySets = PropertySets;
        ;
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var MessagesWrapper = (function () {
            function MessagesWrapper() {
                this.core_fieldBlank = '"" cannot be left blank.';
                this.edi_badLong = '"" is not a valid number.';
                this.edi_numberOutOfRange = ' is not in the range  to .';
                this.ocx_electronicMailMessage = 'Email Message';
                this.dbp_favorites = 'Favorite Records';
                this.vwr_tbar_view = 'View';
                this.core_no = 'No';
                this.core_yes = 'Yes';
                this.dp_cap_SavedSearch = 'Saved Search';
                this.dp_cap_SaveConfig = 'Save';
                this.td_DocumentView = 'Documents';
                this.vb_nts_Next = 'Next';
                this.dp_cap_Help = 'Help';
                this.vb_nts_Back = 'Back';
                this.trm_tbar_edit = 'Edit';
                this.bob_infoLanguage = 'Language';
                this.dp_cap_Selected = 'Selected';
                this.core_failed = 'Failed';
                this.vb_tio_Error = 'Error';
                this.rty_save = 'Save';
                this.rec_select = 'Select';
                this.rec_edmFile = 'File';
                this.tem_tool_startBtn = 'Start';
                this.core_new = 'New';
                this.prp_propertyStringTooLong = 'Property "" is limited to  characters of text. Please supply a shorter string value.';
                this.trm_reindexStateComplete = 'Complete';
                this.wrk_documentNeedsARecordAttached = 'The working document "" must have a record attached before the activity can be completed.';
                this.bob_selectDlgNotes = 'Notes';
                this.wrk_supervisor = 'Supervisor';
                this.wrk_atLeaseOneResultToBeReached = 'You must select at least one result.';
                this.wrk_suspended = 'Suspended';
                this.core_hours = 'hours';
                this.core_minutes = 'minutes';
                this.core_days = 'days';
                this.tem_status = 'Status';
                this.core_badDateValue = '"" is not a valid date.';
                this.rec_selectRTY = 'Please select a record type';
                this.dsg_certTitle = 'Title';
                this.rec_autoRenditionStatusCol = 'Status';
                this.loc_activityAssignee = 'Assigned To';
                this.core_document = 'Document';
                this.rdr_documentType = 'Document type';
                this.rec_asSuperCopyMsg = ' (as a SuperCopy)';
                this.vb_tio_AttachElectronicDocument = 'Attach electronic document';
                this.vb_tio_AttachTRIMrecords = 'Attach Content Manager records';
                this.bob_noChangeMsg = 'No change';
                this.core_genericFieldBlank = 'This field cannot be left blank.';
                this.ocx_menuClear = 'Clear';
                this.vb_ascOcx_User = 'Current user';
                this.bob_noBobsFoundPossibleFilter = 'No  found.There may be matching  that are prevented from being displayed because of filtering or for security reasons.';
                this.bob_select1orMore = 'Please select one or more of the values displayed.';
                this.dp_cap_DateFormat = 'Date Format';
                this.rp_sepCap = 'Separator';
                this.loc_everyone = 'Unrestricted';
                this.sdk_invalidDateTime = 'The specified date/time is invalid.';
                this.evt_licenseHdrUserType = 'User Type';
                this.tnt_workgroup = 'Workgroup Server';
                this.trm_statsTimeZoneHeading = 'Time Zone';
                this.vwr_caption = 'Content Manager Document Viewer';
                this.loc_customizeAccess = 'Customize access';
                this.bob_noObjectsFound = 'No  found.';
                this.trm_shortCutWorkTray = 'Records Work Tray';
                this.dbp_recentContainers = 'Recent Containers';
                this.dp_cap_relatedRecords = 'Related Records';
                this.dbp_category = 'Category';
                this.dsg_certOwner = 'Owner';
                this.rec_accessControl = 'Access control';
                this.trm_shortcutFavPage = 'Favorites';
                this.loc_searchAll = 'All';
                this.rec_docIsDraft = 'Record has been made a working document.';
                this.sui_suggestedParameterCaption = 'Please enter value for .';
                this.trm_irmRecordProcessed = 'Processed successfully.';
                this.bob_objectIsActive = 'Active';
                this.rec_finalised = 'Finalized';
                this.bob_sbMe = 'Me';
                this.core_and = 'and';
                this.wrk_cannotSelectRollbackAndNoRollback = 'You cannot select a rollback result as well as a non-rollback result.';
                this.wrk_cannotSelectMoreThanOneRollbackResult = 'You cannot select more than one rollback result.';
                this.core_processingFile = 'Processing File: ""';
                this.web_deselectOneOrMoreItem = 'Maximum number of dashboard items selected. Please deselect one dashboard item before adding .';
                this.web_onlySupportThreeDashboarrdItems = 'Content Manager Web Client supports up to 3 dashboard items.';
                this.web_menuText = 'Menu';
                this.web_dragAndDropToUpload = 'Click here or Drag and Drop to upload files';
                this.web_showURLLink = 'Show URL';
                this.web_attachedTerms = 'Attached terms';
                this.web_listPageSize = 'List page size';
                this.web_startYourSearchHere = 'Start your search here';
                this.web_clieckAddRightClickClearMarker = 'Click on the map to add markers. Click on the marker to remove individually.';
                this.web_asPolygon = 'As Polygon';
                this.web_useAllMarkersToDrawPolygon = 'Use all markers to draw a polygon';
                this.web_asLine = 'As Line';
                this.web_useAllMarkersToDrawLine = 'Use all markers to draw a line';
                this.web_traffic = 'Traffic';
                this.web_showTrafficLayer = 'Show traffic layer';
                this.web_clearMarkers = 'Clear Markers';
                this.web_clearAllMarkers = 'Clear all markers';
                this.web_wopiConversionWarning = 'This document will be converted to a supported file format to enable editing.';
                this.web_wopiConversionTitle = 'Document requires conversion';
                this.web_wopiConversionOldFormatRevision = 'The original file will be added as a revision to this record.';
                this.web_wopiPleaseCloseWindow = 'This document is in use in Microsoft Office Online and needs to be closed before it can be checked in.';
                this.web_wopiAlreadyOpen = 'This document is open for editing in Microsoft Office Online.  Go to the open session to resume editing it.';
                this.web_FindAProperty_placeHolderTxt = 'Find a property';
                this.web_unableToViewDocumentsOfThisType = 'Unable to view documents of this type';
                this.web_wopiAlreadyOpenForView = 'This document is already open for viewing in Microsoft Office Online.';
                this.web_useAttachmentNewVersionRecordActions = 'Use the following document to start off the new version';
                this.web_confirmRejection = 'Confirm rejection';
                this.web_cancelRejection = 'Cancel rejection';
                this.web_revisionLatest_caption = 'Latest';
                this.web_revisionCurrent_tooltip = 'Show the current Revision';
                this.web_revisionDelete_caption = 'About to delete Revision {0}';
                this.web_revisionPromote_caption = 'About to promote Revision {0}';
                this.web_revisions = 'Revisions';
                this.web_revisionDelete_tooltip = 'Delete the selected Revision';
                this.web_revisionPromote_tooltip = 'Promote the selected Revision';
                this.web_showThePreviousRevisions = 'Show the previous Revisions for this Record';
                this.web_showRecordActions = 'Show Actions/Procedures';
                this.web_attachedRecordActions = 'Attached Actions/Procedures';
                this.web_noAttachedRecordActions = 'There are no Actions/Procedures attached to this record. Click on "New" to attach Actions/Procedures';
                this.web_attachActionTitle = 'Attach Action';
                this.web_actionToAttach = 'Action to Attach';
                this.web_responsibleLocation = 'Responsible Location';
                this.web_assignOnlyIfNoDefault = 'Assign only if no default location';
                this.web_assignToThisAndSubordinate = 'Assign to this and subordinate actions';
                this.web_scheduleAction = 'Schedule action';
                this.web_areYouSure = 'Are you sure?';
                this.web_scheduleActionSpecificDate = 'On a specific date';
                this.web_scheduleActionBeforeAll = 'Before existing actions';
                this.web_scheduleActionAfterAll = 'After existing actions';
                this.web_scheduleActionBeforeSpecific = 'Before specified action';
                this.web_scheduleActionAfterSpecific = 'After specified action';
                this.web_scheduleActionExisting = 'Existing action';
                this.web_searchAnd = 'And';
                this.web_searchOr = 'Or';
                this.web_searchNegatePart = 'Negate part';
                this.web_searchNegateGroup = 'Negate group';
                this.web_searchSelectItem = 'Select Item';
                this.web_searchSelectList = 'Select List';
                this.web_searchSubQuery = 'Sub query';
                this.web_searchGroupMustHaveSameParent = 'Items in a group must be in the same level';
                this.web_searchSelectStartAndEndOfGroup = 'Select a start and end part to make a group';
                this.web_searchUpdateGroup = 'Update Group';
                this.web_searchAddToGroup = 'Add new search clause to group';
                this.web_searchAdd = 'Add new search clause';
                this.web_searchUpdate = 'Update search clause';
                this.web_searchNot = 'Not';
                this.web_searchBuildQuery = 'Build Query';
                this.web_searchEditor = 'Search Editor';
                this.web_searchUpdateQuery = 'Update query';
                this.web_searchBuildGroup = 'Build group';
                this.web_searchCreateGroup = 'Create group';
                this.web_searchSelectMethod = 'Select Method';
                this.web_searchSelectMethodOrUpdate = 'Select a method to use or select a part to modify';
                this.web_searchRunCurrentSearch = 'Run current search';
                this.web_searchFinishUpdatingPart = 'Finish updating search part';
                this.web_searchUnknownClause = 'Unknown search clause. This string will be applied to the default search method instead.';
                this.web_searchComposeSubSearch = 'Compose sub search';
                this.web_searchSubSearchLabel = 'All items matching the following search';
                this.web_initiatingRecord = 'Initiating Record';
                this.web_initiatingRecordBehaviour = 'Initiating Record behavior';
                this.web_pleaseEnterTime = 'Please enter a time';
                this.web_makeInActive = 'Make Inactive';
                this.web_addRemove = 'Add/Remove';
                this.web_final = 'Make Final';
                this.web_finaliseSuccessMessage = 'Record has been finalized';
                this.web_makeInactiveSuccessMessage = 'Record has been made inactive';
                this.web_searchAddSearchMethod = 'Add a search method';
                this.web_searchAlphabetical = 'Alphabetical';
                this.web_searchByCategory = 'Category';
                this.web_showSecurityAccess = 'Security/Access';
                this.web_showActiveAuditEvents = 'Active Audit Events';
                this.web_updateCost = 'Update Cost';
                this.web_completeAll = 'Complete All';
                this.web_deleteAll = 'Delete All';
                this.web_searchBuildGroupHelp = 'Select the beginning and end search parts to build a group.';
                this.web_searchBuildGroupExtendedHelp = 'Group search parts together to allow them to be combined with other search parts or negated using the not operator.';
                this.web_searchRecursive = 'Recursive';
                this.web_searchDateRange = 'Date range';
                this.web_searchDateFloatingRange = 'Floating range';
                this.web_searchDateStringFormat = 'String format';
                this.web_searchSelectSingleItem = 'Select a single item';
                this.web_searchSelectItemFromSearch = 'Select all items that match a search';
                this.web_searchSelectToAddToGroup = 'Select a method to add to the group';
                this.web_newRecordAction = 'New Record Action';
                this.web_recordActionName = 'Record Action Name';
                this.web_sonfirmRemoveAction = 'Are you sure you want to remove the Record Action ?';
                this.web_removeAction = 'Remove Record Action';
                this.web_latestVersion = 'Latest Version';
                this.web_containedRecords = 'Contained Records';
                this.web_containedRecordsAlt = 'Contained Records (+Alternative)';
                this.web_containerRecords = 'Container Records';
                this.web_containerRecordsAlt = 'Container Records (+Alternative)';
                this.web_recordsWithSameContacts = 'Records with the same Contacts';
                this.web_clientMatters = 'Client Matters';
                this.web_addToRecentRecords = 'Add to Recent Documents';
                this.web_addToMyContainers = 'Add to My Containers';
                this.web_addToRecordsWorkTray = 'Add to Records Work Tray';
                this.web_removeFromRecentRecords = 'Remove from Recent Documents';
                this.web_removeFromMyContainers = 'Remove from My Containers';
                this.web_removeFromRecordsWorkTray = 'Remove from Records Work Tray';
                this.web_dateRange = 'Date range';
                this.web_floatingRange = 'Floating range';
                this.web_checkOutEditTitle = 'Check out and edit with {0}';
                this.web_editDocFailedNoApp = 'Unable to edit document.  Check that you have an application capable of editing this type of document.';
                this.web_removeAllActions = 'Remove all Actions';
                this.web_assignNextActivity = 'The next Activity {0} does not have an assignee set.';
                this.web_activityResultsSaved = 'Results saved';
                this.web_searchBuildSearchQuery = 'Build Search Query';
                this.web_myContainers = 'My Containers';
                this.web_selectAccessLocations = 'Select the Locations to grant access.';
                this.web_setGPSLocation = 'Set GPS Location';
                this.web_GPSLocation = 'GPS Location';
                this.web_GPSWithin = 'Within';
                this.web_GPS = 'GPS';
                this.web_draftWorkingDocument = 'Draft/Working document';
                this.web_userLabelCreated = 'New User Label created';
                this.web_GPSPoint = 'Point';
                this.web_GPSKilometres = 'Kilometres';
                this.web_GPSMiles = 'Miles';
                this.web_GPSMetres = 'Metres';
                this.web_GPSYards = 'Yards';
                this.web_GPSof = 'of';
                this.web_newCost = 'New cost';
                this.web_GPSNoKey = 'Error loading map. There is no key set for your mapping service. Please contact your administrator.';
                this.web_groupWordForSearchClause = 'Group words as a phrase';
                this.web_invalidSavedSearchOwner = 'Invalid owner for this saved search. Please select a valid location or leave blank to create a public saved search.';
                this.web_numberOfDays = 'Enter number of days';
                this.web_GPSErrorNoKey = 'No GIS Provider has been set up. Please contact your CM administrator.';
                this.web_setGPS = 'Set GPS';
                this.web_GPSlocationBrowser = 'GPS Location Browser';
                this.web_makeActive = 'Make Active';
                this.web_makeActiveSuccessMessage = 'Make Active succeeded';
                this.web_editOnlineTitle = 'Edit with {0}';
                this.web_recordFileTypeFilterField = 'Enter a list of file types separated by a comma ( , )';
                this.web_recordDispositionFilter = 'Disposition filter';
                this.web_recordClassFilter = 'Record Class';
                this.web_recordExtensionFilter = 'File Types';
                this.web_recordSavedSearchFilter = 'Saved Search';
                this.web_recordDateRegisteredFilter = 'Records with date registered within:';
                this.web_recordFinalisedFilter = 'Finalized status';
                this.web_todoCompleteFilter = 'Filter completed items';
                this.web_todoPriorityFilter = 'Select Priority Types to be filtered for';
                this.web_locationTypeFilter = 'Select Location Types to be filtered for';
                this.web_locationActiveFilter = 'Active';
                this.web_locationActiveFilterActive = 'Active';
                this.web_locationActiveFilterInactive = 'InActive';
                this.web_locationInternalFilter = 'Internal';
                this.web_locationInternalFilterExternal = 'External';
                this.web_locationInternalFilterInternal = 'Internal';
                this.web_locationCanUseFilter = 'Only locations without "can use" access';
                this.web_removeFromRecordWorkTray = 'Remove from Records Work Tray';
                this.web_globalSettings = 'Global Settings';
                this.web_topLevel = 'Top Level';
                this.web_dispositionFilter = 'Disposition filter';
                this.web_sendToRecordWorkTray = 'Send to Records Work Tray';
                this.web_showLocations = 'Show Locations';
                this.web_navigateToParentUserLabel = 'Parent Level';
                this.web_navigateToSubUserLabel = 'Sub Level';
                this.web_filterCompletedItems = 'Filter completed items';
                this.web_showCompletedActivities = 'Show Completed Activities';
                this.web_selectPriorityTypesToBeFiltered = 'Select Priority Types to be filtered for';
                this.web_allSearchForms = 'All Search Forms';
                this.web_selectLocationTypesToBeFiltered = 'Select Location Types to be filtered for';
                this.web_showWothoutCanUse = 'Show without "Can Use"';
                this.web_notFinalized = 'Not Finalized';
                this.web_excludeCompletedOrSkippedWorkflows = 'Exclude workflows that have been completed or skipped';
                this.web_excludeCompletedOrSkippedActivities = 'Exclude activities that have been completed or skipped';
                this.web_excludeNotReadyStartActivities = 'Exclude activities that are not ready to start';
                this.web_excludeParentActivities = 'Exclude parent activities';
                this.web_excludeChildActivities = 'Exclude child activities';
                this.web_moreItemsToShow = 'more';
                this.web_moreItemsToShowNoCount = 'More results';
                this.web_moreItemShowAll = 'Show all';
                this.web_Expand = 'Expand';
                this.web_Collapse = 'Collapse';
                this.web_ProcessingOperation = 'Processing the current operation';
                this.web_warning = 'Warning';
                this.web_shouldContinue = 'Continue processing remaining items?';
                this.web_continueAfterAllErrors = 'Continue after all errors';
                this.web_warnings = 'Warnings';
                this.web_warningsDuringProcessing = 'warnings during processing';
                this.web_couldNotBeProcessed = 'could not be processed';
                this.web_noToAll = 'No to all';
                this.web_shouldIgnoreWarning = 'Do you want to ignore this warning?';
                this.web_yesToAllWarnings = 'Yes to all warnings of this type';
                this.web_noToAllWarnings = 'No to all warnings of this type';
                this.web_copyToClipboard = 'Copy to clipboard';
                this.web_cut = 'Cut';
                this.web_copy = 'Copy';
                this.web_paste = 'Paste';
                this.web_errors = 'Errors';
                this.web_oneOrMoreWarnings = 'You have one or more warnings. Do you wish to proceed?';
                this.web_resolveConsigmentIssues = 'Resolve Issues';
                this.web_resolveByRemove = 'Remove record from consignment';
                this.web_consignmentsTobeApproved = 'Consignments to be approved';
                this.web_consignmentNotAbleToBeProcessedFromWeb = 'This consignment is unable to be approved from the web client';
                this.web_showConsignmentRejections = 'Show consignment record rejections';
                this.web_latestPart = 'Latest Part';
                this.web_allParts = 'All Parts';
                this.web_allVersions = 'All Versions';
                this.web_currentVersion = 'Current Version';
                this.web_linkedDocuments = 'Linked Documents';
                this.web_documentLinkOf = 'Document Link Of';
                this.web_clientRecordsForContacts = 'Client Records for Contacts';
                this.web_recordsInEmailConversation = 'Records in Email Conversation';
                this.web_seriesRecord = 'Series Record';
                this.web_recordsWithinSeries = 'Records within Series';
                this.web_allRedactions = 'All Redactions';
                this.web_redactedFrom = 'Redacted From';
                this.web_derivations = 'Derivations';
                this.web_encloseRecordOption = 'Enclose the record now';
                this.web_encloseRecordWarning = 'Note: Unchecking this box will not "unenclose" any record. To "unenclose" records "set assignee".';
                this.web_webErrorPromotingRevision = 'Error promoting revision';
                this.web_webErrorPreservingRevision = 'Error preserving revision';
                this.web_webErrorDeletetingRevision = 'Error deleting revision';
                this.web_formFieldsBlank = 'The following fields are blank. Do you wish to continue?';
                this.web_noAttachedActionRecordActions = 'There are no Actions/Procedures attached to this record.';
                this.web_checkedOutView = 'checkedOutBy:';
                this.web_favoritesView = 'favorite';
                this.web_recentsView = 'myDocuments';
                this.web_createdView = 'creator:';
                this.web_securityDefaultvalue = 'No Security Level';
                this.web_selectionCaption = 'Click method to select';
                this.web_renumberRecord = 'already exists. If you wish to use it for this record you will first need to renumber or remove record';
                this.web_enterFormattedNumber = 'Enter Formatted Number';
                this.web_allTabs = 'All tabs';
                this.web_recordCreatedButAccessDenied = 'Record has been successfully created but insufficient security prevents you from accessing it.';
                this.web_recordUpdatedButAccessDenied = 'Record has been successfully updated but insufficient security prevents you from accessing it.';
                this.web_keyword = 'Thesaurus Term';
                this.web_badDateValue = '"{0}" is not a valid date.';
                this.web_documentReviewDueDateInThePast = 'You need to specify a due date that is in future.';
                this.web_openFormSearch = 'Open Form Search';
                this.web_selectTimeZone = 'Your default time zone has not been set. Please set your time zone.';
                this.web_formSearch = '{0} Form Search';
                this.web_addSearchClause = 'Add search clause';
                this.web_remove = 'Remove';
                this.web_insert = 'Insert';
                this.web_searchBuilder = ' search builder';
                this.web_enterSearchQuery = '< Enter Search Query >';
                this.web_changeToOr = 'Or';
                this.web_changeToAnd = 'And';
                this.web_addNot = 'Add Not';
                this.web_removeNot = 'Remove Not';
                this.web_previewTitle = 'Preview - ';
                this.web_browse = 'Browse';
                this.web_Not = 'Not';
                this.web_insertStamp = 'Insert User Stamp';
                this.web_trimPropSelector = 'Properties and Fields Selector';
                this.web_availableProps = 'Available Properties or Fields';
                this.web_selectedProps = 'Selected Properties or Fields';
                this.web_unableToGetProps = 'Unable to get all Properties';
                this.web_error = 'Error';
                this.web_unableToUpdate = 'Unable to update ';
                this.web_notes = 'Notes';
                this.web_dataEntry = 'Data Entry';
                this.web_editing = 'Editing - ';
                this.web_closeOtherTabs = 'Close Other Tabs';
                this.web_unableToFetchList = 'Unable to fetch  list';
                this.web_unableToGet = 'Unable to get .';
                this.web_dataEntryError = 'Data Entry Error.';
                this.web_setNotes = 'Set notes';
                this.web_setProperty = 'Set Property [Security]';
                this.web_gridcolumnRequestFailed = 'Request for grid columns failed. Please try again.';
                this.web_formatColumns = 'Format Columns';
                this.web_errorCustomisingViewPane = 'Error Customizing View Pane';
                this.web_customiseViewPane = 'Customize View Pane';
                this.web_pleaseSelectARow = 'Please select a row to customize';
                this.web_displayingResult = 'Displaying result {0} - {1} of {2}';
                this.web_noTopicsFiltered = '{0} - {1} - Filtered - No {2} found.<br />There may be matching {2} that are prevented from being displayed because of filtering or security reasons.';
                this.web_setting = 'Settings';
                this.web_pagesize = 'Page Size';
                this.web_contextMenuRequestFailed = 'Request for context menu failed. Please try again.';
                this.web_pofdRequestFailed = 'Request for properties and fields was unsuccessful. This could be because the web service was not configured correctly or the request was timeout.';
                this.web_pleaseSpecifySearchString = 'Please specify searchString';
                this.web_testGrid = 'Test Grid';
                this.web_ok = 'OK';
                this.web_name = 'Name';
                this.web_newTitle = 'New - ';
                this.web_tooltip = 'Tooltip';
                this.web_paramFormat = 'Parameter format';
                this.web_sorting = 'Sorting';
                this.web_newtitle2 = 'New-:';
                this.web_selectTitle = 'Select ';
                this.web_initiateWorkFlow = 'Initiate Workflow from Template';
                this.web_notImplemented = 'The feature is not implemented.';
                this.web_unableToSetTimeZone = 'Unable to set Client time zone on the server';
                this.web_closeTab = 'Close Tab';
                this.web_columns = 'columns';
                this.web_gridPage = 'Page';
                this.web_main = 'Main';
                this.web_sort = 'Sort';
                this.web_filter = 'Filter';
                this.web_To_Date = 'To';
                this.web_From_Date = 'From';
                this.web_sortClause = 'Sort Clause';
                this.web_direction = 'Direction';
                this.web_asc = 'ASC';
                this.web_desc = 'DESC';
                this.web_to = 'to';
                this.web_userLabelRemoved = '{0} has been removed from {1} {2}';
                this.web_userLabelAdded = '{0} has been added to {1} {2}';
                this.web_confirmDelete = 'Do you wish to remove the : ""?';
                this.web_quickSearchBtn = 'Quick Search';
                this.web_advancedSearchBtn = 'Advanced Search';
                this.web_recent = 'Recent';
                this.web_showMine = 'Mine';
                this.web_showPublic = 'Public';
                this.web_from = 'from';
                this.web_docInSharePointNotPreviewable = 'This document is hosted in SharePoint and is not available for previewing.';
                this.web_customizeJurisdiction = 'Customize Jurisdiction';
                this.web_filterColon = 'Filter:';
                this.web_includePersonPosition = 'Include a person"s position';
                this.web_locTypeOrganisation = 'Organization';
                this.web_locTypeGroup = 'Group';
                this.web_locTypePosition = 'Position';
                this.web_locTypePerson = 'Person';
                this.web_locTypeProjectTeam = 'Project Team';
                this.web_locTypeCommittee = 'Committee';
                this.web_locTypeVenue = 'Venue';
                this.web_locTypeWorkgroup = 'Workgroup';
                this.web_substitution = 'Substitution';
                this.web_showAsList = 'Display as list';
                this.web_showAsTree = 'Display as tree';
                this.web_link = 'Link';
                this.web_feed = 'Feed';
                this.web_feedTitle = 'Content Manager {0} {1}';
                this.web_feedDescSearch = '{0} search using criteria search: "{1}"{2}{3}.';
                this.web_feedDescSort = ', sort: "{0}"';
                this.web_feedDescFilter = ', filter: "{0}"';
                this.web_private = 'Private';
                this.web_custom = 'Custom';
                this.web_container = 'Container';
                this.web_columnsPreferences = 'Column Preferences';
                this.web_relatedNumber = 'Related Number';
                this.web_removeFromContainer = 'Remove from Container';
                this.web_electronicDocument = 'Electronic Document';
                this.web_browseViaUserLabel = 'Browse via User Label';
                this.web_browseViaClassification = 'Browse via Classification';
                this.web_newFilePlan = 'Record using classification Browser';
                this.web_showRecords = 'Show Records';
                this.web_saveAsDefaultSort = 'Save as Default Sort Fields';
                this.web_saveAsDefaultFilter = 'Save as Default Filter';
                this.web_saveAsRecordTypeDefaultFilter = 'Save as default filter for record search';
                this.web_todoItem = 'To Do Item';
                this.web_todoItems = 'To Do Items';
                this.web_todoItemDescription = 'View, add, or update your To Do Items.';
                this.web_myTodoItems = 'My To Do Items';
                this.web_allTodoItems = 'All To Do Items';
                this.web_todoItemDue = 'Due';
                this.web_complete = 'Complete';
                this.web_incomplete = 'Incomplete';
                this.web_updateTodoITem = 'Update To Do Item';
                this.web_todoItemOwner = 'Person responsible';
                this.web_todoDescriptionOfTask = 'Description of task to be performed';
                this.web_sendNotificationsByEmail = 'Send notifications by email';
                this.web_todoItemChildReference = 'To Do Item Reference List';
                this.web_todoItemChildReferenceDescription = 'List of References for the selected To Do Item';
                this.web_todoItemReferences = 'References';
                this.web_todoItemReferenceDocuments = 'Reference documents';
                this.web_returnToTodoItem = 'Return to To Do Item';
                this.web_goToRecord = 'Go to Record';
                this.web_makeValidSelection = 'Please make a valid selection.';
                this.web_addTodoItemReference = 'Add To Do Item Reference';
                this.web_errorAddingReferenceItem = 'Error adding reference item.';
                this.web_returnToObject = 'Return to {0}';
                this.web_createNewObject = 'Create new {0}';
                this.web_showingChildObjectsForObjectTypeAndTitle = 'Showing {0} for {1}: {2}';
                this.web_viewAddOrRemoveChildObjectForObjectType = 'View, add or remove {0} for the selected {1}';
                this.web_objectCreationFailed = '{0} creation failed.';
                this.web_mandatoryFieldNeedsValue = 'A value must be entered for the field "{0}".';
                this.web_logout = 'Log out';
                this.web_HPWebsite = 'Content Manager on the web';
                this.web_workLists = 'Work Lists';
                this.web_noSelection = 'No value selected';
                this.web_searchEmailLinkClassification = 'Search Classification for Records';
                this.web_todoItemReferenceType = 'Reference type';
                this.web_todoItemReferenceRecord = 'Reference Record';
                this.web_todoItemUncompleteToolTip = 'Uncomplete To Do Item';
                this.web_todoItemCompleteToolTip = 'Complete To Do Item';
                this.web_finalizedFilters = 'You must select at least one of the finalized filters';
                this.web_locationShowCaption = 'Show';
                this.web_locationShowToolTip = 'Show related items';
                this.web_navigateToLinkedRecord = 'Navigate to linked Record';
                this.web_viewReferencedDocument = 'View referenced document';
                this.web_locationContactRecords = 'Contact Records';
                this.web_locationAssignedRecords = 'Assigned Records';
                this.web_locationCreatedRecords = 'Created Records';
                this.web_locationOwnedRecords = 'Owned Records';
                this.web_locationCheckedOutRecords = 'Checked out Records';
                this.web_locationRequestsFor = 'Requests for';
                this.web_locationRequestsBy = 'Requests by';
                this.web_locationDateRange = 'Date range';
                this.web_locationDateRangeToolTip = 'Set active date range';
                this.web_activedateTo = 'Active To';
                this.web_unsupportedType = 'This type is not supported.';
                this.web_mustPickAtLeatOneRecordClassFilter = 'You must select at least one of the record class filters';
                this.web_mustPickAtLeatOneDispFilter = 'You must select at least one of the disposition filters';
                this.web_updateLocationCaption = 'Update Location';
                this.web_allRecordTypes = 'All Record Types';
                this.web_invalidFields = 'The following fields are invalid:';
                this.web_oldFormatSavedSearchNotSupported = 'Saved Searches  with old formats are not supported. Please update the Saved Search  to the latest format.';
                this.web_userLabel = 'User Labels';
                this.web_userLabelToolTip = 'User Labels';
                this.web_selectUserLabel = 'Select User Label';
                this.web_addToUserLabel = 'Add to User Label';
                this.web_addToUserLabelToolTip = 'Add to User Label';
                this.web_addToUserLabelSuccess = 'Successfully added to User Label.';
                this.web_removeUserLabel = 'Remove from User Label';
                this.web_removeUserLabelToolTip = 'Remove from User Label';
                this.web_removeUserLabelSuccess = 'Successfully removed User Label.';
                this.web_createRecordInContainerToolTip = 'Create a new Record in this container';
                this.web_newRecordPart = 'New Part';
                this.web_newRecordPartToolTip = 'Create a new Part for this Record';
                this.web_newRecordVersion = 'New Version';
                this.web_newRecordVersionToolTip = 'Create a new Version of this Record';
                this.web_folderNotLatestPart = 'This folder is not the latest part.';
                this.web_recordLocations = 'Locations';
                this.web_addContact = 'Add Contact';
                this.web_showContacts = 'Show Contacts';
                this.web_effectiveFrom = 'Effective from';
                this.web_newAssignee = 'New Assignee';
                this.web_clearSelections = 'Cancel selection';
                this.web_selectDeselectAllByPage = 'Select / deselect all on current page';
                this.web_errorPerformingOperation = 'An error occurred performing the selected operation.';
                this.web_progressErrorHeading = 'An error has occurred processing the selected items.';
                this.web_setHomeAsSpace = 'Set as Space';
                this.web_setHomeAndAssignee = 'Also set Assignee to be the new Home';
                this.web_bulkSelection = 'Select all results';
                this.web_bulkItemsSelected = 'All results of this search are selected';
                this.web_removeContactLabel = 'Remove Contacts';
                this.web_noChildLocations = 'No Record contacts found';
                this.web_savedSearchCreatedButNotFavorited = 'Saved Search was created but there was an error adding it to your favorites.';
                this.web_requestRetrieveTemporary = 'Retrieve - Temporary';
                this.web_requestRetrievePermanent = 'Retrieve - Permanent';
                this.web_requestRetrieveRecurring = 'Retrieve - Recurring';
                this.web_requestRetrievePickupNew = 'Pick up - New';
                this.web_requestRetrievePickupReturn = 'Pick up - Return';
                this.web_myRecordRequestsNotYetActioned = 'My Requests not yet actioned';
                this.web_navigateToParentClassification = 'Navigate to parent Classification';
                this.web_navigateToSubClassifications = 'Navigate to child Classifications';
                this.web_addToCheckinStyle = 'Add to Check In Style';
                this.web_dateInterval = 'Date interval';
                this.web_every = 'Every';
                this.web_recurringRequest = 'Recurring request';
                this.web_dateRequired = 'Date required';
                this.web_delete = 'Delete';
                this.web_until = 'Until';
                this.web_showRequests = 'Show Requests';
                this.web_viewErrors = 'Search for error items';
                this.web_contactRemoved = 'Contact removed';
                this.web_errorEarliestRequestorMustExist = 'Record requires a Request to be assigned to earliest requester';
                this.web_udpatedSuccessfully = 'Update successful';
                this.web_insertNotesAddStamp = 'Insert the new notes with a user stamp';
                this.web_NotesAtTheStart = 'At the Start';
                this.web_NotesAtTheEnd = 'At the End';
                this.web_favoriteRemoved = '{0} has been removed from {1} favorites.';
                this.web_options = 'Options';
                this.web_ActivityDates = 'Activity Dates';
                this.web_All = 'All';
                this.web_Top = 'Top';
                this.web_noMathingTopics = 'There may be matching {0} that are prevented from being displayed because of filtering or security reasons.';
                this.web_noMatchTopicsFound = 'No {0} found.';
                this.web_objectType = 'Object type: {0}';
                this.web_dateNeeded = 'Date needed';
                this.web_releationshipType = 'Relationship type';
                this.web_checkingOut = 'Checking out';
                this.web_upload = 'Upload';
                this.web_uploading = 'Uploading';
                this.web_fileToUpload = 'File to upload';
                this.web_uploaded = 'File {0} has been successfully uploaded.';
                this.web_uploadFailed = 'Uploading file to the server failed. Please try again.';
                this.web_newRecordRelationship = 'New Related record';
                this.web_basedOnContainer = 'Based on container';
                this.web_worktrayRemoved = '{0} has been removed from {1} Work Tray.';
                this.web_setHome = 'Set Home';
                this.web_setContainer = 'Set Container';
                this.web_setToLocation = 'Set to Location';
                this.web_setToHomeLocation = 'Set to Home Location';
                this.web_SetAsMissing = 'Set as Missing';
                this.web_setContainerTo = 'Set Container To';
                this.web_dueForReturnBy = 'Due for Return By';
                this.web_setAssignee = 'Set Assignee';
                this.web_setOwner = 'Set Owner';
                this.web_newHomeLocation = 'New Home';
                this.web_requestedBy = 'Requested by';
                this.web_dp_nextText = 'Next Month (Control+Right)';
                this.web_db_prevText = 'Previous Month (Control+Left)';
                this.web_dp_monthYearText = 'Choose a month (Control+Up/Down to move years)';
                this.web_dp_okText = 'OK';
                this.web_dp_cancelText = 'Cancel';
                this.web_dp_minText = 'The date in this field must be equal to or after {0}';
                this.web_dp_maxText = 'The date in this field must be equal to or before {0}';
                this.web_sessionExpired = 'Your session has expired. Please refresh your web browser then try again.';
                this.web_inContainer = '{0} (In container)';
                this.web_dp_invalidText = '"{0}" is not a valid date - it must be in the format {1}';
                this.web_tabsLose = 'You will lose unsaved data in all other tabs. Are you sure?';
                this.web_makePrimaryContact = 'Make Primary Contact';
                this.web_pgt_displayMsg = 'Displaying {0} - {1} of {2}';
                this.web_pgt_emptyMsg = 'No data to display"';
                this.web_pgt_beforePageText = 'Page';
                this.web_pgt_afterPageText = 'of {0}';
                this.web_pgt_firstText = 'First Page';
                this.web_pgt_prevText = 'Previous Page';
                this.web_pgt_nextText = 'Next Page';
                this.web_pgt_lastText = 'Last Page';
                this.web_pgt_refreshText = 'Refresh';
                this.web_activedateRangeTitle = 'Set active date range for {0}';
                this.web_activedateFrom = 'Active From';
                this.web_recentDocRemoved = '{0} has been removed from {1} recent documents.';
                this.web_myContainerRemoved = '{0} has been removed from {1} my containers.';
                this.web_contactType = 'Contact Type';
                this.web_contactName = 'Contact Name';
                this.web_removeContact = 'Remove Contact - {0}';
                this.web_noTopics = '{0} - {1} - No {2} found.<br />There may be matching {2} that are prevented from being displayed because of filtering or security reasons.';
                this.web_fieldsAreMandatory = 'Fields marked with an asterisk(*) are mandatory.';
                this.web_locationTypes = 'Location Types';
                this.web_parserError = 'The search string is not valid for this object type. Either change the search string or choose a different object type.<br /> Parser message: {0}';
                this.web_finalCheckBoxMesssage = 'Final and remove any previous Revisions';
                this.web_checkOut = 'Select OK to check out the document from Content Manager and download to your computer. Remember to take note of where you save the document so that you can check in modifications later.';
                this.web_checkOutTitle = 'Check out Document {0}';
                this.web_superCopyTitle = 'Supercopy Document {0}';
                this.web_superCopy = 'Select OK to save document locally.';
                this.web_checkInTitle = 'Check In - {0}';
                this.web_localFile = 'Local File';
                this.web_fileBrowse = 'Browse...';
                this.web_customiseViewPaneTitle = '{0} View Pane';
                this.web_customiseRecViewPaneTitle = '{0} View Pane - {1}';
                this.web_replaceCurrentRevision = 'Replace the current revision';
                this.web_discardMods = 'Discard any modifications made';
                this.web_returnType = 'Return type';
                this.web_radioBlank = 'You must select one item in this group';
                this.web_type = 'Type';
                this.web_ssDesc = '{0} - {1}';
                this.web_ssDescfiltered = '{0} - {1} - Filtered';
                this.web_searchClauseHelp = 'Search Clause: {0}';
                this.web_dateOr = '{0} or {1}';
                this.web_triggerAlt = 'Click here to select a value for "{0}"';
                this.web_dateAlt = 'Click here to select a date for "{0}"';
                this.web_searchFldTitle = 'Search Field';
                this.web_searchTypeTitle = 'Search Type';
                this.web_objectTypeTitle = 'Object Type';
                this.web_invalidPageSize = 'The page size value is invalid, resetting to the previous value';
                this.web_srchLbl_administeredBy = 'Administered By';
                this.web_srchLbl_authorisedBy = 'Authorized By';
                this.web_favoriteAdded = '{0} has been added to favorites.';
                this.web_srchLbl_sortName = 'Sort Name';
                this.web_renditionRequested = 'A rendition has been requested for this record and is awaiting processing.';
                this.web_customAccessControlNotSupported = 'Setting custom for multiple access control items is not supported.';
                this.web_deleteRelatedRecord = 'Delete Related Record.';
                this.web_canNotHaveMoreThanXColumnsIE7 = 'You can not have more than {0} columns in the current browser.';
                this.web_unableToLoadContextMenu = 'Unable to load context menu.';
                this.web_selectWorkflowTemplate = 'Please select a Workflow template';
                this.web_enterWorkflowName = 'Please enter a Workflow name.';
                this.web_cannotFindTemplateUri = 'Cannot find Workflow Template with URI: ';
                this.web_formSearchMenu = 'Form Search';
                this.web_insertActionAssignIfNoLoc = 'Assign only if Action has no default responsible Location';
                this.web_insertActionAssignToActionAndSubordinate = 'Assign to this Action and any subordinate Record Action';
                this.web_insertActionOnASpecificDate = 'On a specific date';
                this.web_insertActionInsertAtBegining = 'Before any existing record actions for this Record';
                this.web_insertActionInsertAtEnd = 'After any existing record actions for this Record';
                this.web_insertActionInsertBeforeNominatedAct = 'Before the nominated Action below';
                this.web_insertActionInsertAfterNominatedAct = 'After the nominated Action below';
                this.web_responsibleLoc = 'Responsible Location';
                this.web_insertActionNewActionStart = 'New Action starts';
                this.web_enterAddressSearchQuery = '< Enter city or postcode or use search assistant >';
                this.web_clickToSort = 'Click to sort';
                this.web_selectColMenu = 'Select column menu';
                this.web_Add = 'Add';
                this.web_ExpandCollapse = 'Expand / Collapse';
                this.web_postSortMax = 'There are too many search results to sort this column. Please refine the search so there are fewer than {0} results.';
                this.web_completeCurrentAction = 'Complete Current action';
                this.web_sessionAboutToExpire = 'Your session is going to expire in  minutes at . Please save any incomplete data entry form and refresh the page to continue.';
                this.web_completionDateTime = 'Completion Date/Time';
                this.web_completeAllPreviousIncompleteRecordActions = 'Complete all previous incomplete record actions.';
                this.web_collapseALL = 'Collapse All';
                this.web_expandAll = 'Expand All';
                this.web_confirmCompleteCurrentAction = 'Complete Current action for record ""?';
                this.web_additional_Fields = 'Additional Fields';
                this.web_ascending = 'Ascending';
                this.web_descending = 'Descending';
                this.web_removeAllConfirmation = 'Are you sure you want to delete all ?';
                this.web_thereIsNoJurisdiction = 'There are no jurisdictions.';
                this.web_tagToAdd = 'Tag any of the  listed below that you want to add';
                this.web_tagToRemove = 'Tag any of the  listed below that you want to remove';
                this.web_homeLocationLabel = 'Home Location';
                this.web_homeLocationChangeAssignee = 'When should the Assignee be changed to the new Home Location?';
                this.web_homeLocationAlwaysOption = 'Always';
                this.web_homeLocationNeverOption = 'Never';
                this.web_homeLocationChangeAssigneesOption = 'Change when the Assignee is the current Home Location';
                this.web_aclApplyTogetherWithAnyRtyReferences = 'Access controls apply together with any record type references';
                this.web_aclBypassWithAnyRtyReferences = 'Access controls bypass any Record Type references';
                this.web_noRequests = 'There are no Requests for this record.';
                this.web_setToEarliestRequester = 'Set to Earliest Requester';
                this.web_recentDocumentsAdded = '{0} has been added to Recent Documents.';
                this.web_behaviourWithRespectRtyReferences = 'Behavior with respect to record type access control references';
                this.web_setAccessFor = 'Set Access For';
                this.web_worktrayAdded = '{0} has been added to record Work Tray.';
                this.web_myContainersAdded = '{0} has been added to My Containers.';
                this.web_defaultApplication = 'default application';
                this.web_authenticateAboutToExpire = 'Your authentication is soon to expire, would you like to re-authenticate?';
                this.web_authenticationExpired = 'Your authentication has expired, you must re-authenticate to continue.';
                this.web_keepCheckedOut = 'Keep document checked out after check in complete';
                this.web_comment = 'Comment';
                this.web_changeDateToDocumentDate = 'Change date date created to document date';
                this.web_viewAction = 'View Action';
                this.web_viewActions = 'View Actions';
                this.web_leaveAsIs = 'Leave as is';
                this.web_setToHome = 'Set to home';
                this.web_setToNextActionsLocation = 'Set to Next actions location';
                this.web_setToSpecifiedLocation = 'Set to Specified location';
                this.web_applyAssigneeToContainer = 'Also apply assignee change to the container of this record';
                this.web_declareRecordFinal = 'Declare this record as final';
                this.web_removePreviousRevisions = 'Remove all previous revisions of this document';
                this.web_uploadProgress = 'Upload progress';
                this.web_checkIn = 'Check In';
                this.web_actionTracking = 'Action Tracking';
                this.web_assignee = 'Assignee';
                this.web_status = 'Status';
                this.web_access = 'Access';
                this.web_createNewRecord = 'Create new Record';
                this.web_suppressDataEntryForm = 'If possible, suppress data entry form.';
                this.web_useReplForACL = 'Use replacement location for the private access control';
                this.web_useReplForRequests = 'Use replacement location for outstanding record request';
                this.web_replaceLocationLabel = 'Enter replacement location';
                this.web_removeLocationDlgTitle = 'Delete location';
                this.web_moveEmailsToReplLocation = 'Move email addresses to replacement location';
                this.web_moveAssociationsToReplLocation = 'Copy associated locations to replacement location';
                this.web_details = 'Details';
                this.web_create = 'Create';
                this.web_convert = 'convert';
                this.web_body = 'Body';
                this.web_backToSearch = 'Back to search';
                this.web_backToSummary = 'Back to summary';
                this.web_blah = '...';
                this.web_dateRegistered = 'Date registered';
                this.web_download = 'Download';
                this.web_enterAQuery = 'Please enter a query';
                this.web_favoriteRecords = 'Favorite Records';
                this.web_favorites = 'Favorites';
                this.web_field = 'field';
                this.web_footer = 'Footer';
                this.web_form = 'Form';
                this.web_formSearchCap = 'Form search';
                this.web_formSearchTitle = 'Form search title';
                this.web_getStarted = 'Get started';
                this.web_header = 'Header';
                this.web_home = 'Home';
                this.web_attachElectronicDocument = 'Attach electronic document';
                this.web_createElectronicOrPhysicalRecord = 'Create a new electronic or physical record';
                this.web_accessDenied = 'Access denied';
                this.web_addToFavorites = 'Add to Favorites';
                this.web_addedToFavorites = 'Added to favorites successfully';
                this.web_advancedFormBasedSearch = 'Advanced form based search';
                this.web_category = 'Category';
                this.web_checkedOut = 'Checked out';
                this.web_checkedOutRecords = 'Checked Out Records';
                this.web_classic = 'Classic';
                this.web_clickToDisplay = 'Click to display';
                this.web_constructRefinedSearchUsingFilters = 'Construct a refined search using various data filters';
                this.web_contactAdministrator = 'For further assistance please contact your administrator.';
                this.web_downloadElectronicAttachmentToYourDevice = 'Download the electronic attachment to your device';
                this.web_downloadRecordToViewInYourEnvironment = 'Download the record to view it in your local environment';
                this.web_incontainerColon = 'In container:';
                this.web_incorrectObjectType = 'Incorrect object type';
                this.web_initiateYourSearch = 'Initiate your search';
                this.web_loading = 'Loading';
                this.web_location = 'Location';
                this.web_explore = 'Explore';
                this.web_exploreRecentOrFavoriteRecords = 'Explore your recent and favorite records';
                this.web_exploreRecords = 'Explore your records';
                this.web_failToInitialiseFormSearchPanel = 'Fail to initialize form search panel';
                this.web_editCurrentRecord = 'Edit the current record';
                this.web_editInfoForRecordAndHowToComplete = 'Edit the information required for the record. To complete the fields, you can either:';
                this.web_enterText = 'Enter text';
                this.web_enterTitle = 'Please enter a title';
                this.web_errorAddingToFavorites = 'Error adding to favorites';
                this.web_errorRemovingFromFavorites = 'Error removing from favorites';
                this.web_errorTryingToSaveSearch = 'An error occurred trying to save your search';
                this.web_errorUploadingYourFile = 'An error occurred uploading your file';
                this.web_expandedRecordNumber = 'Expanded Number';
                this.web_filterOrSecurityMayPreventedTheDisplayOfMatchRecords = 'There may be matching records that are prevented from being displayed because of filtering, or for security reasons.';
                this.web_howToCreateNewRecord = 'Select a record type from the drop-down list to create a new record. You can refine the list by typing the record type name, or part of it, into the selection field.';
                this.web_howToSearch1 = 'type the full value into the input field, or';
                this.web_howToSearch2 = 'search by typing part of the value into the input field and selecting from the resulting drop-down list';
                this.web_howToSelectCategory = 'The record type you"ve selected uses classification. Select and navigate to the required classification from the drop-down list. You can search for a Top level classification by typing into the';
                this.web_HPRM = 'Content Manager';
                this.web_minimum3LettersRequiredForSearch = 'a minimum of three characters is required for searching';
                this.web_modify = 'Modify';
                this.web_moreOptions = 'More options';
                this.web_needToBeSelected = 'needs to be selected';
                this.web_newRecord = 'New Record';
                this.web_noMatchfound = 'No matches found';
                this.web_noRecordsFound = 'No records found';
                this.web_noResponseReceivedFromServer = 'No response received from the server';
                this.web_noSavedSearchAvailable = 'No saved searches available';
                this.web_notImplementedYet = 'The feature is not implemented.';
                this.web_numbers = 'Numbers';
                this.web_openInClassicMode = 'Open in classic mode';
                this.web_openNewbBowserWindowInClassicMode = 'Open a new browser window in classic mode.';
                this.web_public = 'Public';
                this.web_readySearches = 'Ready searches';
                this.web_reason = 'Reason';
                this.web_recentRecords = 'Recent Documents';
                this.web_record = 'Record';
                this.web_records = 'Records';
                this.web_recordAlreayInHomeLocation = 'Record already in home location';
                this.web_recordCreationFailed = 'Record creation failed:';
                this.web_recordRequestCreated = 'Record request created';
                this.web_recordRequestOutstanding = 'Record request outstanding';
                this.web_recordReturnedToHomeLocation = 'Record returned to home location';
                this.web_recordTitleMaximumLengthIs254 = 'The maximum length for the record title field is 254 characters.';
                this.web_recordTitleMustBeEntered = 'The record title is a mandatory field. Please enter a title for the record';
                this.web_recordType = 'Record Type';
                this.web_recordUpdateFailed = 'Record update failed:';
                this.web_recordUpdateSucceeded = 'Record successfully updated';
                this.web_removeFromFavorites = 'Remove from Favorites';
                this.web_removedFromFavorites = 'Removed from Favorites successfully';
                this.web_requestThisRecord = 'Request this Record';
                this.web_requestingRecord = 'Requesting Record';
                this.web_retrievingResults = 'Retrieving results';
                this.web_return = 'Return';
                this.web_returnRecordToHomeLoction = 'Returning Record to home location';
                this.web_returnTheRecord = 'Return the Record';
                this.web_search = 'Search';
                this.web_searchContents = 'Search contents';
                this.web_searchForRecordsAcrossDataset = 'Search for Records across a dataset';
                this.web_searchThisContainerforMoreRecords = 'Search Containers for more Records';
                this.web_searchYourRecords = 'Search your Records';
                this.web_searching = 'Searching';
                this.web_seeMore = 'See more';
                this.web_selectedFileHasNotBeenUploadedToServer = 'The selected file has not been uploaded to the server';
                this.web_startTypingToBeginNewSearch = 'Start typing to begin a new search';
                this.web_submit = 'Submit';
                this.web_thisFieldRequired = 'This field is required';
                this.web_thisRecordHasBeenRequested = 'This Record has already been requested';
                this.web_unableMapData = 'Unable to map data';
                this.web_unableReturnRecordToHomeLocation = 'Unable to return record to home location';
                this.web_unableToConnectToWebServices = 'Content Manager web client is unable to establish a connection to the Web Service';
                this.web_unableToDisplayDetailsNow = 'Unable to display details at this time';
                this.web_unableToDownloadNowTryLater = 'Unable to download at this time. Try again later. URI:';
                this.web_unableToRequestRecord = 'Unable to request Record';
                this.web_unableToViewRecordType = 'Unable to view this Record Type';
                this.web_update = 'Update';
                this.web_updateExistingRecordInfo = 'Update the information for an existing Record in Content Manager';
                this.web_validCategoryNeedToBeSelected = 'A valid Classification needs to be selected.';
                this.web_viewAddOrModifyRecords = 'View, add or modify records';
                this.web_viewAllCheckedOutRecords = 'View all checked out Records';
                this.web_viewAllFavouriteRecords = 'View all Favorite Records';
                this.web_viewAllRecentRecords = 'View all recent records';
                this.web_welcomeToRecordCreationWizard = 'Welcome to the Record creation wizard';
                this.web_enterSearchName = 'Enter search name:';
                this.web_searchSelectOwnerInputLabel = 'Search owner';
                this.web_searchQueryInputLabel = 'Query';
                this.web_enterSearchDescription = 'Enter search description:';
                this.web_checkInRecord = 'Check in Record';
                this.web_checkInKeepCheckedOut = 'Keep checked out';
                this.web_checkInMakeNewRevision = 'Make a new revision';
                this.web_checkInComments = 'Comments';
                this.web_additionalRequest = 'Additional request';
                this.web_or = 'Or';
                this.web_selectTopTerm = 'A record title must start with a thesaurus term that is a top term.  is not a top term.';
                this.web_createdRecords = 'Created Records';
                this.web_cancel = 'Cancel';
                this.web_clickReport = 'Click Report to generate and open the HTML Report';
                this.web_close = 'Close';
                this.web_created = 'Created';
                this.web_createReport = 'Create report';
                this.web_createLocationFormTitle = 'Create new location:';
                this.web_dateFieldTitle = 'Enter date (Short format of YYYY/MM/DD)';
                this.web_errorCheckin = 'Error checking record in';
                this.web_errorCreatingLocation = 'An error occurred creating the location';
                this.web_locate = 'Locate';
                this.web_manage = 'Manage';
                this.web_pleaseUploadFile = 'Please upload a file';
                this.web_recordCheckedOut = 'Record checked out';
                this.web_recordCheckedIn = 'Record checked in';
                this.web_report = 'Report';
                this.web_save = 'Save';
                this.web_saveSearchMenu = 'Save search';
                this.web_searchQueryLabel = 'Search for';
                this.web_selectAll = 'Select all';
                this.web_selectDeselectAll = 'Select / deselect all';
                this.web_selectNone = 'Select None';
                this.web_selectRecordsForReport = 'Select the records to be included in the Report';
                this.web_selectTemplate = 'Select a Report Template from the below list';
                this.web_showReport = 'Show Report';
                this.web_unknownRecordType = 'Unknown record type';
                this.web_unknownRecordTitle = 'Unknown record title';
                this.web_unknownRecordNumber = 'Unknown record number';
                this.web_unsupportedSearchType = 'This search type is not supported. The default value will be used';
                this.web_additionalRequestRecord = 'Request Records';
                this.web_resetButtonCaption = 'Reset';
                this.web_requestSelectRequestorInputLabel = 'Requestor name';
                this.web_navigateBackToContainer = 'Navigate back to the container';
                this.web_sendRequestOnBehalfOfButtonCaption = 'Send';
                this.web_selectPropertiesCaption = 'Select properties';
                this.web_newSavedSearch = 'New saved search';
                this.web_checkOutTitleNoSubstitute = 'Check out';
                this.web_query = 'Query';
                this.web_more = 'More';
                this.web_profile = 'Profile';
                this.web_savedSearches = 'Saved Searches';
                this.web_parameterisedSavedSearch = 'Search by method';
                this.web_parameterisedStartOver = 'Start over';
                this.web_items = 'Item(s)';
                this.web_requested = 'Requested';
                this.web_reportRequestedNotification = 'You requested the report';
                this.web_recordNumberCaption = 'Record Number';
                this.web_profileInformation = ' is using  on ';
                this.web_pageInformation = 'Showing  -  of ';
                this.web_pageEnd = 'End';
                this.web_searchUsageInformation = 'Start typing to begin a new search or construct a refined search using various data filters';
                this.web_viewAll = 'View all';
                this.web_loadingMask = 'Please wait, loading';
                this.web_minimumBrowserVersion = 'The minimum supported version for Content Manager is . Please upgrade to the latest version';
                this.web_cancelAndReturn = 'Cancel and return';
                this.web_itemsSelected = 'Item(s) selected';
                this.web_reportButtonCaption = 'Report';
                this.web_additionalRequestTooltip = 'Additional request';
                this.web_continueButtonCaption = 'Continue';
                this.web_correctButtonCaption = 'Correct';
                this.web_uploadButtonCaption = 'Upload the selected file';
                this.web_totalResults = 'Total Results';
                this.web_previewAttachment = 'Preview';
                this.web_viewProperties = 'Properties';
                this.web_showingResults = 'Showing Results  - ';
                this.web_newSaveSearchCaption = 'Save';
                this.web_request = 'Request';
                this.web_copyURL = 'Copy URL';
                this.web_urlCoppied = 'URL has been copied to clipboard.';
                this.web_mobile_dbNotConnected = 'Not connected';
                this.web_actionsPanelCaption = 'actions';
                this.web_searchByMethods = 'by method';
                this.web_securityCaveatCaption = 'Active Security Caveats';
                this.web_viewEditAccessControlCaption = 'Add or modify access controls';
                this.web_fieldTypeNotSupported = 'The following field type is not supported';
                this.web_dataFormEntryBlankError = 'DataEntryForm: FormDefinition cannot be undefined';
                this.web_documentCheckedIn = 'Electronic document checked in';
                this.web_selectedLookupItems = 'Selected Lookup Items';
                this.web_thereAreNoMatchingResults = 'There are no matching results.';
                this.web_whyEnclosedFieldisIsDisabled = 'This field is disabled because this record does not have a container record.';
                this.web_setGlobalSettingInfo = 'The following settings will be saved as Global Settings: Time Zone, Document Viewer, Dashboard Configuration, Search Result Page Size.';
                this.web_getGlobalSettingConfirmation = 'You are about to download the following global settings as defined by your Administrator: Time Zone, Search Result Page Size, Document Viewer and Dashboard Configuration settings. Are you sure you want to change your settings to the global version?';
                this.web_setAsGlobalSettings = 'Set as Global Settings';
                this.web_getGlobalSettings = 'Get Settings';
                this.web_UDFalphabeticOrderTooltips = 'List in alphabetic order';
                this.web_UDFcategoryOrderTooltips = 'List according to their categories';
                this.web_UDFalphabeticSectionOrderTooltips = 'List in alphabetic section order';
                this.web_results = 'Results';
                this.web_reassign = 'Reassign';
                this.web_activity = 'Activity';
                this.web_activities = 'Activities';
                this.web_workflow = 'Workflow';
                this.web_activitiesDue = 'Activities due';
                this.web_activitiesReadyToStart = 'Ready to start';
                this.web_activitiesIncomplete = 'Incomplete';
                this.web_recordsDue = 'Records due';
                this.web_unknownActivityName = 'Unknown activity name';
                this.web_unknownDocumentType = 'This document does not have a default record type';
                this.web_unknownDocumentOrigin = 'Unknown document origin';
                this.web_unknown = 'Unknown';
                this.web_notApplicable = 'Not applicable';
                this.web_dateDue = 'Date due';
                this.web_noActivitesFound = 'No activities found';
                this.web_noAttachedDocumentsFound = 'No attached documents found';
                this.web_unknownActivityState = 'Unknown status';
                this.web_unknownDuedate = 'Unknown due date';
                this.web_unknownWorkflow = 'Unknown workflow';
                this.web_noDueDate = 'No due date';
                this.web_noWorkflowsFound = 'No workflows found';
                this.web_viewWorkflowsAndActivites = 'View workflows and activities';
                this.web_unknownWorkflowTitle = 'Unknown workflow title';
                this.web_returnToActivites = 'Return to activities';
                this.web_returnToActivityDocuments = 'Return to activity documents';
                this.web_returnToWorkflows = 'Return to workflows';
                this.web_modifyWorkflow = 'Update workflow';
                this.web_updateActivity = 'Update activity';
                this.web_activityUpdated = 'Activity updated.';
                this.web_coundNotLoadActivity = 'Could not load activity.';
                this.web_couldNotSaveActivity = 'Could not save activity.';
                this.web_activityAssignedTo = 'Assigned to';
                this.web_activityNotAssigned = 'Activity unassigned';
                this.web_activityNoSupervisor = 'No Supervisor';
                this.web_priority = 'Priority';
                this.web_activityEstimatedTime = 'Estimated duration';
                this.web_activityEstimatedCost = 'Estimated cost';
                this.web_invalidURL = 'The supplied URL is invalid.';
                this.web_requests = 'Requests';
                this.web_unknownRequestRecordTitle = 'Unknown record title for request.';
                this.web_requestDue = 'Request due';
                this.web_notRequestsFound = 'No requests found.';
                this.web_unknownRequestType = 'Unknown	Request type.';
                this.web_requiredCaption = 'Required';
                this.web_fileSizeError = 'File is zero length or too big.';
                this.web_yesToAll = 'Yes to all';
                this.web_preference = 'Preference';
                this.web_origin = 'Origin';
                this.web_usage = 'Usage';
                this.web_returnToActivities = 'Return to activities';
                this.web_emailLink = 'Check In Style';
                this.web_createEmailLink = 'Create Check In Style';
                this.web_emailLinkDescription = 'View or modify check in styles';
                this.web_selectAdditionalFieldsForUpdate = 'No Additional Fields selected. Please select fields to be updated below.';
                this.web_myObject = 'My ';
                this.web_uncomplete = 'Uncomplete';
                this.web_suspend = 'Suspend';
                this.web_emailLinkDisplayName = 'Display linked target as';
                this.web_emailLinkRecordType = 'Record Type for registering items';
                this.web_emailLinkRetainItems = 'Retain items within email client';
                this.web_emailLinkOwner = 'Check In Style owner';
                this.web_emailLinkLinkedToRecord = 'Linked to';
                this.web_emailLinkItemRecordType = 'Record Type for registered items';
                this.web_couldNotLoadEmailLink = 'Could not load specified check in style';
                this.web_NeedLinkedTargetName = 'You must specify a name for the check in style.';
                this.web_NeedTypeForEmailLinkItems = 'You must specify a record type for the items that are created.';
                this.web_initiate = 'Initiate';
                this.web_attachExisting = 'Attach existing record';
                this.web_attachSuperCopy = 'Attach record (as SuperCopy)';
                this.web_attachElectronic = 'Attach electronic document';
                this.web_noImage = 'No image';
                this.web_couldNotSaveEmailLink = 'Could not save check in style';
                this.web_couldNotLoadActivity = 'Could not load specified activity';
                this.web_info = 'Information';
                this.web_success = 'Success';
                this.web_detach = 'Detach';
                this.web_rtyForSubFolders = 'Record Type for registering within matter subfolders';
                this.web_deleteEmailPermanently = 'Delete emails permanently rather than moving to "Deleted Items".';
                this.web_deleteEmailLink = 'Delete';
                this.web_confirmDeleteHeading = 'Confirm delete';
                this.web_navigateToEmailLinkRecord = 'Navigate to linked record';
                this.web_searchEmailLinkRecordContainer = 'Search linked record as container';
                this.web_browseRecord = 'Browse record information';
                this.web_AllHighAndMediumPriority = 'High and Medium priority';
                this.web_MyRecordReturnApprovalList = 'My requests awaiting approval';
                this.web_AllRequestsNeedToApprove = 'All requests awaiting approval';
                this.web_NewRecordPickups = 'New record pick ups';
                this.web_RecordReturns = 'Record returns';
                this.web_TemporaryRetrievals = 'Temporary retrievals';
                this.web_PermanentRetrievals = 'Permanent retrievals';
                this.web_approvals = 'Approvals';
                this.web_pickups = 'Pick up list';
                this.web_deliveries = 'Deliveries';
                this.web_RecordsInCirculation = 'Records in circulation';
                this.web_reject = 'Reject';
                this.web_approve = 'Approve';
                this.web_CompleteRequest = 'Complete';
                this.web_addClientMatterParty = 'Add client/matter party';
                this.web_addClientMatterRole = 'Add client/matter role';
                this.web_activityWithoutAssignee = 'This activity doesn"t have an assignee.';
                this.web_detachElectronic = 'Detach electronic document';
                this.web_showLatest = 'Show Latest';
                this.web_addToNotes = 'Add to Notes';
                this.web_datasetId = 'Dataset ID';
                this.web_Server = 'Server';
                this.web_object = 'Object';
                this.web_webClientClassicUrlError = 'Please specify a valid URL for the "webClientClassicUrl" property in the "hprmServiceAPI.config" file.';
                this.web_selectRequestsForReport = 'Select the requests to be included in the Report.';
                this.web_pleaseEnterSearch = 'Please enter a search query or use the search form to initiate a search.';
                this.web_errorSavingSearch = 'An error occurred trying to save your search.';
                this.web_urlLink = 'Generate URL link';
                this.web_togglePropertiesPanel = 'Hide/show the Properties Panel';
                this.web_togglePropertiesSettings = 'Update visible properties on the Properties Panel';
                this.web_viewAndActionRequests = 'View or action requests';
                this.web_viewActivitiesOrWorkflows = 'View, initiate or modify workflows and associated activities';
                this.web_errorRejectRequestRecord = 'An error occurred rejecting the request.';
                this.web_errorApproveRequestRecord = 'An error occurred approving the request.';
                this.web_general = 'General';
                this.web_errorCompleteRequestRecord = 'An error occurred completing the request.';
                this.web_navigateTo = 'Navigate to';
                this.web_matterRecord = 'Matter record';
                this.web_clientRecord = 'Client record';
                this.web_noReportTemplatesAvailable = 'There are no report templates available.';
                this.web_updateRecord = 'Update record';
                this.web_updateEmailLink = 'Create or update check in style';
                this.web_localElectronicFile = 'Local Electronic File';
                this.web_recordSupercopy = 'Record Supercopy';
                this.web_matterFolders = 'Matter Folders';
                this.web_requestOnBehalfOf = 'Request record on behalf of';
                this.web_selectLocationForRequest = 'You must select a location for this request';
                this.web_bypassViewerFileTypes = 'Bypass the Content Manager viewer for these file types';
                this.web_useOnstreamViewerFileTypes = 'Use the Trapeze viewer for these file types';
                this.web_documentViewer = 'Document Viewer';
                this.web_dashboardConfiguration = 'Dashboard Configuration';
                this.web_locale = 'Locale';
                this.web_duplicateFileExtensionFound = 'Duplicate file extension found. Please remove duplicate file extension in either field to continue';
                this.web_relationship = 'Relationship';
                this.web_createLowerLevelItem = 'Create lower level item';
                this.web_recordAdditionalField = 'Update Record Additional Fields';
                this.web_loadingAdditionalFields = 'Loading Additional Fields...';
                this.web_alphabetic = 'Alphabetic';
                this.web_section = 'Section';
                this.web_additionalFieldsToBeUpdated = 'Additional Fields To Be Updated';
                this.web_selectAdditionalFields = 'Select Additional Fields';
                this.web_textStringGeography = 'Text, String, Geography';
                this.web_dateDatetime = 'Date, Datetime';
                this.web_numberDecimalCurrencyBigNumber = 'Number, Decimal, Currency, BigNumber';
                this.web_boolean = 'Boolean';
                this.web_xml = 'Xml';
                this.web_noUserLabelBeingFound = 'No user labels have been found for the current object.';
                this.web_selectedAdditionalFields = 'Selected Additional Fields';
                this.web_showTheseTypes = 'Show these types:';
                this.web_folderNotSupported = 'The dropped file is actually a folder. Folders are not supported as an electronic attachment.';
                this.web_pendingElectronicUpload = 'Electronic attachment upload is pending.';
                this.web_warnNoAccess = 'You no longer have access to view this record.';
                this.web_clickToNotSetfieldValue = 'Click to not set value for this field.';
                this.web_editValueWithLookupSet = 'Edit Value With Lookup Set:';
                this.web_allowToSelectDeSelectLowestNode = 'You are only allowed to select/deselect the node at the lowest level!';
                this.web_dateValueMustBeSet = 'Date value must be set!';
                this.web_datetAndTimeValueMustBeSet = 'Date and time values must both be set!';
                this.web_valueMustNotLessThan = 'The value must not be less than {0}.';
                this.web_valueMustNotLargerThan = 'The value must not be larger than {0}.';
                this.web_fieldMaximumLengthIs = 'The maximum length of this field is {0}.';
                this.web_selectedJurisdictions = 'Selected Jurisdictions';
                this.web_NewContainer = 'New container';
                this.web_NewCreator = 'New creator location';
                this.web_NewDocumentStore = 'New document store';
                this.web_RelatedLocation = 'Related location';
                this.web_NewParent = 'New parent';
                this.web_LogRecordType = 'Log record type';
                this.web_LogContainer = 'Log container';
                this.web_RelatedKeyword = 'Related thesaurus term';
                this.web_shareUsingObjectiveConnect = 'Share using Objective Connect';
                this.web_usable = 'usable';
                this.web_fileScanningInProgress = 'File scanning is in progress.';
                this.web_fileScanningCompleted = 'File scanning completed.';
                this.web_fileNotFound = 'The file  is not found. It may have been removed by virus checker. Please upload another file.';
                this.web_placeNewNotes = 'Place the new notes.';
                this.web_viewRendition = 'View Rendition';
                this.web_renditions = 'Renditions';
                this.web_showThePreviousRenditions = 'Show renditions for this Record';
                this.web_startAuthorization = 'Start Authorization';
                this.web_startReview = 'Start Review';
                this.web_authorizeDocument = 'Authorize Document';
                this.web_finalizeDocument = 'Finalize Document';
                this.web_viewComments = 'View Comments';
                this.web_restart = 'Restart';
                this.web_reviewDocument = 'Review Document';
                this.web_documentReview = 'Document Review';
                this.web_documentReviewAuthorizationTitle = 'Add comments and set the {0} status for the selected document';
                this.web_reviewDate = 'Your {0} was completed on {1}';
                this.web_reviewDueDate = 'Your {0} should be completed by {1}';
                this.web_needCommentCaption = 'Comments for the editor: {0}';
                this.web_needCompleted = 'I have completed my {0} of this document';
                this.web_itemTitle = 'Please select a value for "{0}"';
                this.web_addAnnotation = 'Add annotation';
                this.web_needAuthorized = 'I have authorized the content of this document';
                this.web_useStamp = 'User Stamp';
                this.web_review = 'Review';
                this.web_authorize = 'Authorization';
                this.web_documentReviewSuccess = 'Successfully updated document review';
                this.web_documentAuthorizationSuccess = 'Successfully updated document authorization';
                this.web_documentAuthorization = 'Document Authorization';
                this.web_viewCommentsHeader = 'View Comments Provided by Reviewers and Authorizers';
                this.web_startReviewAuthorizationTitle = 'Notify {0} that the document is ready for {1}';
                this.web_startReviewAuthorizationCaption = 'Notify {0} activity ready to start for record "{1}"?';
                this.web_startReviewAuthorizationDueDateCaption = 'Due date for the {0} to complete their work';
                this.web_reviewer = 'Reviewer';
                this.web_authorizer = 'Authorizer';
                this.web_finalizeDocumentCaption = 'Finalize Record "{0}"?';
                this.web_finalizeDocumentTitle = 'Finalize the document review process for the selected document';
                this.web_purgeOldRevDocument = 'Purge old revisions of this document';
                this.web_restartDocumentCaption = 'Are you sure you want to restart all document review processing for record "{0}"?';
                this.web_restartDocumentTitle = 'Restarts review processing steps';
                this.web_restartDocumentLeaveDraft = 'Leave the drafting process as completed';
                this.web_restartDocumentResetCompletion = 'Reset completion status for document reviewers';
                this.web_promoteSignedCopyRevDocument = 'Promote the signed copy rendition of this document to be the main document';
                this.web_keepOriginalRendition = 'And keep the original document as a rendition';
                this.web_roles = 'Roles';
                this.web_addNotes = 'Add Notes';
                this.web_viewTheDocument = 'View the Document';
                this.web_enterSearchQueryField = 'Enter Search Query for {0} Field';
                this.web_reviewerAuthorizerCommentsCaption = '{0} Comments';
                this.web_saveAsDefaultOption = 'Save as default options';
                this.web_showHighlighting = 'Show Highlighting';
            }
            return MessagesWrapper;
        }());
        HPTRIM.MessagesWrapper = MessagesWrapper;
        HPTRIM.Captions = {};
        HPTRIM.Messages = new MessagesWrapper();
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var IconsWrapper = (function () {
            function IconsWrapper() {
                this.navParent_x24 = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAHQSURBVEhLY/j//z/VMQrApgCGg5ZoCPjOVjsRskKz3X+eOgs2NdgwCsCmAIbDNmgXu3Yr/nfvVf4buFTDDpsabBgFYFMAwoGLNOQ9Jyt/d+pQ+A/CQB9c8JmjBvZFXHI6HxA7A3E9Lgw1HrcFwSs0prt0KYINB2G3HqV/AUs0IqNScziBBnijG4gFh+K0IHi5hjYoWGCGw7DXVNU30RlpHlgMw4rhFgA5IFeBBWNTU5uCZxo+QDcchEHxEdHvsBOmlhBGtgAuGNXsvRQUHNgsAGHf6Ro/Ygqie5H14MIYFsSmJ7f4Tdd6h81gGAbFS8R062PIBuHCGBZE9DluR45YXNh9gsqfmIqwKciGYcMoFsRmJrZ5TVb7hc1AdAxyROnuoCuvXr2qx4axWhDSa3OQGNfDMDCe/m+9snQ2URZE58R2Ab1NlOuRcdAM/U83H11pJ2xBbnSv+0SVvyBXgbBrD3afgMSR1XhP1vh57snhvhcvnzfgtQAmkFtUClcEMgTZcBAf2RB8GKcF589egCtC9wWIj2wIPozTAmRFNPEBsiKaW0CTIELG2HyATR0+DLcAakkFsiTVLUDH2IIIXQ0ujAKwKaAUowBsCijFCMDAAAAC2OomSJMCEgAAAABJRU5ErkJggg==';
                this.navContents_x24 = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAHESURBVEhLYxi+IFOp53+aYgccg/hQKeqATGU0C4B8qBRDXHI6HxA7A3E9LgxVihvgsiAqNYcTaIA3uoFYcCjYIFwAVxDFpGa5YjEMKwYbBAJADshVKJLYfICuhhCGGg+2AEOS9hZgCSJs6vBhqPF08EFSeEFvrsrEvyBDwBjN9XBLgOLIago0J/+8efhJ38vnLxtevXpVD8MYFiRG5Xflqk74hc1QfLhUf8anu1cetSMbjtUCEKfAuu9gulIXVoOwYZAvjiy9MhvdcJwWJMTmtOWrTSbKFyCHzAjafQWb4SCM1QIQrnCbup0YX+SpTfpzZsuNKdgMB2GcFpw8dLalxnjBO2yGwjDIAfMT9x3DZjAM47QAJLlz8tmlwPD9h81wEC7VmfXj6tG7veiGImO8Fjx7/Lyp03nNA2yGZyh1/19efGgnuoHoGK8FIHx60/Wp2Sp9GL4o0Znx9dmTF43IhmHDOC1AxmUW008jRzgo2HJd2tdgU4sLQ42HAKBABbJkSlhJf57qpN9w1+vOfB6fmNmIrIYQhhqNG7RobygGhXuWct/fGs2ldlBh6oFqzSUCJWqzT9RprWgvU5/HAhUeTICBAQB4iik6WPJeawAAAABJRU5ErkJggg==';
                this.truckWithLoad_x24 = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAFISURBVEhLY/j//z8DLTFNDQc5nCoWcEy9+J9n6mUUzA3kU8UCbIbDLCPaAo4pF/5zTL2EFaO7HJlPvAVAw/EZhEuOvhaAIoUH6FJuML4MpvkmHAdHFCh4KPIBxHCIoTA2iM8O5FPFApBhvJNOgw0DYZglVLUAZtjwtIBz8jmc+QBX/gCJw5MpLIVAUg8iy8MUUVIYgiMVXxKEJVlICiMe8wBzP4YPyEnrRBUV6EGEHlSEfYgatBiFHXKuRQ5v5PjAZgkXNCJheriAiQFvYSfbvuUuC1ATCMu2b32BnCdwlfdivYd+gCyCJQi+SWf+4SyukV0MsoRQ6olNTLUjlOpQajTRviPfYLYrtqx7AzRABp8lcUlpCnyTz8NdzDvl4h909SgWADXIwwo5IFsZiLkJ+QKoxhrmC83mtdp4LSBkGDnyVKn08VkMAPvGCcl5v/HDAAAAAElFTkSuQmCC';
                this.truckWithoutLoad_x24 = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAE6SURBVEhLY/j//z8DLTFNDQc5fNQCgiFAUAGlCYB+FnBPvfyfZ+ql/9xgfBlM8004DvQAZckY7AOI4RBDYWwQnx3IB9LPKLEEbAHIMN5Jp+GuhVkCteAnVSwAGQYzCM0CioIJ7oOhbwEkkiEYxAZhDkgkf4LxSaCPwYIbHkS4NMOSLCSFEY95plwAxx1BC0hwNdznMD0YFsCCCD2o8FmCrAddHdwCXLkWOT6wWcKFlLRBhnFNPofiC4z6QLZ9y10WoCYQlm3f+gI5l6NbALIcJC/We+gHyCJQggDx+Sad+YcRROgZDKQAZAmhHBybmGqHnurQ9aCUpqJ9R77BbFdsWfcGaIAMPkviktIU+Cafh7uYd8rFP3gtAGqQhxVyQLYyEHMT8gVQjTXMF5rNa7XxWkDIMHLkaV7hAAAs2kq171e7ZgAAAABJRU5ErkJggg==';
                this.emailLink_x24 = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAI4SURBVEhL7VVLS1tBFL4IgaCUYpWu7MJ/4ba/oCAUQXwsqtSGLBpQ0KWCgpb4SGwVF0JdiFVc2xcIRQOJEQM+FiYiVMEsjCBKUBd3Ot/JOTf3TtKIha7aAx9z5syZ7ztnZnJj/be/Yh2vXj/TGOns6rnTUGVww6kPt9buYJ0mn9HIg0yPNmD4t3qM8paHWVt3YEwTXIHwHlzzFmr5SZkqSnx3zJybPsD0lqUnl/dtMGODw6P22tdvKr6VJMBHTPIApicBd2sVMTQyqnK5CwVLZ45UYmubIDH4ob4BymX6goBZYTl/enaOSFDx297+khx0ACEIY870pQIvggN2zWRCWR8OHDQspNXPqzu1nLn0xF5+OSXAR+z50j4Vsfhp5fcCT8e+F0je79sE7YdT57Sx4eMhxSBkGonrNRwTumB67x20d71RjyZiTpUCd/WhzSwRYpR1GDqBL0fJ9N4OmgN9tj+yXdjo6gBGBHoeO8srwJ1D659PyC8rIHg8vqGqjfP3CLBv3gVM1nH+MKYvdtChx5rJuKqa3qWqpTohlQ5AjiOTnNBG1tOBPF+mLwrUv1tX/qmkU5kjwgJyiSDCPJbNU0zWIIqjg+H3wvTFI/JHksoXTXkFGOFUjgjkOTatHhMpAF9yMAc5+Ji+2EFt+IeH1A05ZxA0zu/ZvsiO7YvuKBoNXwpmehI4l2Al4HXglwrg24O5QD4XLT0hJ5/pC6YDMVmoBHxnQI6LdBsE8HpcuX/+p/MvmWX9AqK6q1qiaxhPAAAAAElFTkSuQmCC';
                this.emailLinkLinked_x24 = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAKUSURBVEhL5VVNS1RhFB6CgaGI6GNpTUK1bdu2P5D2IUKYLVIyadFQUm5sSjKmNHVGLVokuSgrgjbSF/SFDeiMKJQt0ggqaBZNIMagLu7pPGfueefeO3fs4rYHHt7zfj3Pec99772h/wNEtGYGgndT44mT25ldx5taVpjkwyVd68LBXXGqiV6sSGw42nx6K4vfZBYgxq0FeuJlblNlBip0INohbW11nEZ739L9nndUs7No0NDceo0FFiH4D/4xBuy2Bc5qYIx2dECUhs6PSR8bNUvQ2ffGoDHgzgImVBSsjcap/+wTMUDfa3DpSsJ6+uIlTWSyQsQYq2QgAxBpPzxcFOUyASNXX9GR3Z3G4HJXgvL53zI3N/+FJjNTQh1DHGtrLzfQE9Tt6aSx4YwsBiR7rj/mBm7dljFkfObchbKy4AQwgnFFA7Bhb0KE7nW/MeUBvy2u0MP5BQoNfRJWjcxR3fMfQsQY2z86W9z74BEaHwPOVp+DU9y+RVR197MVGpy1YOSFmPMcyoRTMEoGymNNp2hjb9pkqXRmH3ufE0G0Og/gJIi1lIySgdbxUGubFUlOFTdyNkKnAPfTPwsEOtfI/LPvEvsaKDfdGKf1fZMmMyWgGQLeZwHovF1/oGQgt4HbDX0TtG7gg2St2amongDiKJmuiY3nXCfQ68twG2y7/poi/VmTmTGxDfQhQgj9dK4gYzoHU5QOwPvCKBmAkWSWwqkZt4HNnpm8COh13Pf4q4iCiHUN+hCHnssAJ9jMHzWnqJNaZwhU3/lohZPTVjg1TdJ6Yk3YafBLB1cjbgfeVBDfHvSV+rmob4mZ9cYA4IG0TqxGfGcgbr9IBjDA7XGslZ9OIGDhWhkIfhuDMhD8NgYjhf4CMS/PF8muWosAAAAASUVORK5CYII=';
                this.checkIn_x24 = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAA7EAAAOxAGVKw4bAAACKUlEQVRIibWVsW4aQRCGv8E0hqNwGlJxIFM5QrErK/gJUOooBbLkAikg5WGiNBySCySLyqki+RFsKZUTkeAmiEDkKC5iFz5C5ZsUuUOr8yLOifir0e7s/PPvzs7AiiHLHLLtwrqIlIAdIK+qiMiVqp6LyMhvjmf/ROB4bgZoqOqBiFSANQBVVRERVb0TkT7QVdXDaWvyOzFBtl3YBY6AzWUKQwyB/Wlr8mEpgeO5L1S1LSKPzIyjfUPBfD20b4CW3xwfLyRwPHcXOFHVjdjhJAQCXKvqc1PJ/GC2XcgAHx9wLYswBLajN0kbGw0RKceztinwm+PUVq8afPd/3PNR1U0RaQBv5wocz11X1VMR2U5KAPCkt6cT/9Lm/wnY85vjWTpcLAEVVVUzkM028aV+Ko7nBhb/ClACBmkAEdlR1ZQta5sCk2TBda3x92MOIgV5gNtX36JAZnXFS/leaQ/qZ6mtXjWY3F6aSeQhfOSw7Gy3kBiD+lkq1ylqXHFURT//KzqQ6xTjGV6ZBOdAkOsUE71BVEURHM8NTB/gLoxJ9AYjoK+qT81ANjuOZ8c1WxX1gdGcYNqazLLtQldE3iRRENnVdzX9fH0hQNy/G7Vx8ycfAq+B8qJsTdTevwz6vy5s3XgYxgJiJRe26RNgIwmJBTeAvdlFWGm7NpWIyBFQTkjwVUT2/eZ4+cAxSDJAAzgAKkAq5hIAfaALPGxkxojMof84zDzx0F85/gBVBZcJngmGhAAAAABJRU5ErkJggg==';
                this.checkOut_x24 = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAA7EAAAOxAGVKw4bAAACqklEQVRIibWVP0zbQBTGP8cEkwxlSSiRKmNLVQQqEpglHdBVJ1XqxMjWMawtc6sKtfTPSivGjt06slVqTQJIdIkrQRkYsOMmEigMharABezrEidOsBOnVZ9kyb579/3ee3fnB/RhnPMp13Wn+lkj9HIoEZIQRFEFoLXBHMcQRNHUdP38rwAGpUkA+Xq1usjKZdVlDPc4BwAUBAExSYKkquZgJrPCHef9TLF4FhlQIiTHbHuNWVbaP+4H+E1SlJoky3MzxeLXngCD0vnfOzsfro6PBzvnwgAAEE+n68nJyYearn8MBRiU5s52d4uXtdo18V4AD5KYmCD+TJqeJUKSzLatzrL0AwCa5VK8PRnwzeW7iUc1ZlnpIVXNA3gHNDIwKE3Uq9Xv5/v7arfFUTIAgMT4uDmYydzRdP18AAC446hB4kOyDElRrgkME9KKuFzGRbncnoVpqvGRERXA3gAACKLYdok8y1kWEBDtdKHQ+uAchVisbd5lzNPc8zK4GQTYVhTc7YiOuy4AQGiIbgdk6Nf0MggsKrNt2EvPID9fbo4Jvmh/vHkNZtuBAEEU0QQAOAz0AmC+eInMwgLit+S28avjGg6ePA1bBgBHfoDRzdNafoXbq6sQ4vHW2NJSqH9Mkpqa3h6YiWzWDDumJ1ub+FX4ghv3HwAATj9/wk//RneYNDZmcscxgfab/Oi0WHwbtmh4dhbTGxsAgG+E4KTxHuhL6WNN11sXrQFI1isV6+Lg4J9us6QotSFVVTRdv/77LhGS20yl2DrA1wHOXZdHMYMQvg7wzVSKlQjJdY3AoHTeg3DXjfRsyzLfSqeZQel8p15ow6lXKmtRy9Uoy5ym670bjg+SBJC/PDxcDDtdiWzWjI+OrgDor2V2gPxNf5Q7DhdE8Shq0//v9gc/v3vTR/4ssQAAAABJRU5ErkJggg==';
                this.checkOutEdit_x24 = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAA7EAAAOxAGVKw4bAAACcUlEQVRIibWVT08TURTFf/OHEirgnw3GHV/AhLgoYETNOIiBwcYEPgG6FHfFxL2ZnRBXhC8gRlOBhMDYCG2iZWFIXLhlKxvbYIXQcd5z0b5JWxjaknCSyczcN++cd+be3AsXDK3ZB5bjdukG/cAA0CcC0A32RcCubrDnpVNH5xKwk24cmNn2i2/KSE2uva7fOPGSbgw51NH7QgQsZVZThy0LWI6byIlivowMY6cJKHRjyITeO5RZTe00cpmnnHwq6xeXa8mboUSg5UQxbyfdaS+deh8pYCfdRNYvLh+3Qa5QRrLtF5ctxx2sdRIKWI4b9/xCXr3fGxsG4M9Bie9ff7QssiMOvlmO261yEgpkROGven74+C4SSadh0BEzuTV8s2UnJQJNN5gBFqCaZDvpdnl+4RDAnhw5sUkDNp49qo/VJLkR1eq65KVTRyaACOiPIgfazkiJQKty/jQBdIMBRJssTaAbDIQCIqCvXQLl9lpXJ4fHPqvprbp1xakcaOd18PvoGICJJ/dZ+/gljOtG5a6q6FczotHF9TPXy/8CHkzc4fNaToX2awV2mwlsNlRRo6AEDKOu8+yGAiJgD8BbyUZWUivQdR2AGJpUnKGk5bjPM6IwD9HlqlxE/S4N2FzJYndcnfXSqYXQQRVLMbT5s5pcszxc8X1ilTMv1YqGsBw3kRGVfmRPjrD5dAy0pjOJ0cV1bsRM3n3Y4rZ2efC0th3CTrpTjM9JxuekFKKla/rtJxmffCXtpDvVyBc5cJQT5SYKuY08sbIgYfYMeumTJ4/0bzmVkakSfxripsmQ6JmFNkdmg1Dt0L8uAmQ7Q//C8R+23iJv+mbdDQAAAABJRU5ErkJggg==';
                this.editAttachment_x24 = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAA7EAAAOxAGVKw4bAAAB6klEQVRIibWVsW7aUBiFv2tjo6QU0SldeQQmiNR2cj1VljwkT8DcdLLUJ6h0pyYzT0AHS1EnlA6USCVdsnVlbaZaSZQo0HvdoTExEBuwyFnt/xyfe67/I+I45ilRWvaC48ktw6QONIAdrcAwudCKc8Nk1AuD27x5keXA9eU20O5Pos9jYhF//TQ7+O4jFcx416p+0IrOyXFws7KA48nmQEfDMQ/PHhNIUMGMm0Z19+Q4OJvnWjgi15d7pzrqpsmX4RolBjoaur7c74XBl0wB15fN75Ooe7cGeYIxMf1J1HU82Uo7mQo4ntz+qS+HRcjTImf68ofjyUqSSdpB+wpVmDzBNUoYJm3gCO5Ddn251Z9EN/PnXrZK3E3+Avkhz+P+dj3rhcFtCUAr6o+FmpAXcaEVdeBXCcAwaaALcWXCMGlMBbRiZ7P0D5yJA/EEDpgKAL+XDeSFmoGLtMD5srfXuUVpziSDkY1gnfWQBxsRa8UIUsvO8eT7b/rPYd5g4mLZ17+1Xhz0wuAIZv/kjo04zHOxSg42AqAznUmva8eTzVMdFd5HZQSvjNrMslvoA9eXe0U2ahnBG6u2sK5XLpw8PMekZVVbvXCxcDIr0/H+V+ZAR5m52AheG7UDWLMy54TSpf9SK+KNlP6m8A93hPmE2yCcjgAAAABJRU5ErkJggg==';
                this.isLoading_x24 = "url(data:image/gif;base64,R0lGODlhEAAQAPIAAP///wAAAMLCwkJCQgAAAGJiYoKCgpKSkiH+GkNyZWF0ZWQgd2l0aCBhamF4bG9hZC5pbmZvACH5BAAKAAAAIf8LTkVUU0NBUEUyLjADAQAAACwAAAAAEAAQAAADMwi63P4wyklrE2MIOggZnAdOmGYJRbExwroUmcG2LmDEwnHQLVsYOd2mBzkYDAdKa+dIAAAh+QQACgABACwAAAAAEAAQAAADNAi63P5OjCEgG4QMu7DmikRxQlFUYDEZIGBMRVsaqHwctXXf7WEYB4Ag1xjihkMZsiUkKhIAIfkEAAoAAgAsAAAAABAAEAAAAzYIujIjK8pByJDMlFYvBoVjHA70GU7xSUJhmKtwHPAKzLO9HMaoKwJZ7Rf8AYPDDzKpZBqfvwQAIfkEAAoAAwAsAAAAABAAEAAAAzMIumIlK8oyhpHsnFZfhYumCYUhDAQxRIdhHBGqRoKw0R8DYlJd8z0fMDgsGo/IpHI5TAAAIfkEAAoABAAsAAAAABAAEAAAAzIIunInK0rnZBTwGPNMgQwmdsNgXGJUlIWEuR5oWUIpz8pAEAMe6TwfwyYsGo/IpFKSAAAh+QQACgAFACwAAAAAEAAQAAADMwi6IMKQORfjdOe82p4wGccc4CEuQradylesojEMBgsUc2G7sDX3lQGBMLAJibufbSlKAAAh+QQACgAGACwAAAAAEAAQAAADMgi63P7wCRHZnFVdmgHu2nFwlWCI3WGc3TSWhUFGxTAUkGCbtgENBMJAEJsxgMLWzpEAACH5BAAKAAcALAAAAAAQABAAAAMyCLrc/jDKSatlQtScKdceCAjDII7HcQ4EMTCpyrCuUBjCYRgHVtqlAiB1YhiCnlsRkAAAOwAAAAAAAAAAAA==)";
                this.isLoadingOff_x24 = 'url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAE6SURBVDhPrZOxSsQwHMZPDrfj4FYXJ0FcdbhF7wV8AnFxVqfjJkXBAxGdfA/lShuahKSc4iI+gOADOLsoOKm/nI2UtjkoWAilyff//b98SVut/3riVC8w9hNpnnV2/+1Gouwrc5eM7tw+cWoWKVS+sPwWyr5EQi8FIQAufFEk1MALo1SvUPzg12oBdO5KM/10IqyulUWsdwrwrQok1dnmbL/S2pBFsjhzGqGzo4qG7oNfgLkJAWJphk6D9rSiwfbqX+rStOsg5HCbN9kL5fCUC67LAkLdVfbuKzXTD1z2agGI1rH3nmfxiHCIswP2PutcCHEUPEqOrB+6B37eOQE8nncf2gi2OZljHJ3gZIc70mHuvAh3343/AByOnQMPAnLVGDIRauQhuHwju+XGEIoO2Z6dJHKjcXFdwQ+0gy3al6ODdgAAAABJRU5ErkJggg==")';
                this.favorite_x24 = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAHpSURBVEhLtZVNSwJBHMY1i4yiY9jBCqUXyihfQoMuvUAQXewDBJ3qFt06doyCFCJoV8hbX6BrobNFfYf6Dt0ECXJ7/jYju7N/yw07/JiZZ/7zPDOz7hqwbftfYcV2jJ+/DEbPnme4uXawYjsQcISAO7S93DwHK3LAOLJUqtoE+utcDQcrcmDXJ7mSsJdNYScNUUdIH1enw4o6MI/SzsmcoCAE5LlaHVbUgVkxJ80VqZL4hN7D1TthRScwmXDuXkGnwMl2uTVOWh3aDRbEwBr6+2hPJy+eHjhzBYXMXT2+of4S9YdgG/1ZtAOtAAjRWNF6Vb8QhXqgnUDXp6+fN8UHvDeaKUhcIZFb/Bfk9R0gIOS8okQ3QuQvbAcEm1ekAgikjmXMaoNb2Am0QRi7XkJXAIGQyKIhapzBT6SNSgNrs7qfa6DALoZ9PeTvO5/ivDyCws/zkFczyvl4BALFYb8BOMEm5+URCASk/ATQe4CAY87LIxAI2NO/PUTWrDQypqhxc1hzy3l5BALFBbWQzBLX1jt2mAdhzIXQpuMFy3IGJY1qHXq/7uUaECgKwuReGaO/BS2k18naBVCm65TPYUSvcQ0IGA6BG7AKmm/jb6AuDspgWp9zDQh5go7/cxVYR19jz0ldg+5jB74Aph4Ki2679ZIAAAAASUVORK5CYII=";
                this.filledStar = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAHpSURBVEhLtZVNSwJBHMY1i4yiY9jBCqUXyihfQoMuvUAQXewDBJ3qFt06doyCFCJoV8hbX6BrobNFfYf6Dt0ECXJ7/jYju7N/yw07/JiZZ/7zPDOz7hqwbftfYcV2jJ+/DEbPnme4uXawYjsQcISAO7S93DwHK3LAOLJUqtoE+utcDQcrcmDXJ7mSsJdNYScNUUdIH1enw4o6MI/SzsmcoCAE5LlaHVbUgVkxJ80VqZL4hN7D1TthRScwmXDuXkGnwMl2uTVOWh3aDRbEwBr6+2hPJy+eHjhzBYXMXT2+of4S9YdgG/1ZtAOtAAjRWNF6Vb8QhXqgnUDXp6+fN8UHvDeaKUhcIZFb/Bfk9R0gIOS8okQ3QuQvbAcEm1ekAgikjmXMaoNb2Am0QRi7XkJXAIGQyKIhapzBT6SNSgNrs7qfa6DALoZ9PeTvO5/ivDyCws/zkFczyvl4BALFYb8BOMEm5+URCASk/ATQe4CAY87LIxAI2NO/PUTWrDQypqhxc1hzy3l5BALFBbWQzBLX1jt2mAdhzIXQpuMFy3IGJY1qHXq/7uUaECgKwuReGaO/BS2k18naBVCm65TPYUSvcQ0IGA6BG7AKmm/jb6AuDspgWp9zDQh5go7/cxVYR19jz0ldg+5jB74Aph4Ki2679ZIAAAAASUVORK5CYII=";
                this.emptyStar = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAI2SURBVEhLtZU9SFxREIV3VVYlEKMWi2LAYEJU0MZ0NoqFkCAWktoIFhZJFXY7kaRLEX8qwSYQop2lIIiVKFgkgppgQIkK2giiBmJQcf2OjPL2uW/3PliLw8y9d2bOffNzXySVSkXuE6GCJ5PJ8kQiURfmQmEJBiH4AlHUlcSZgMBVBE4J6M15JyDwELgk+Dnya14JCBgHe2ABginkX2STC4lTigj2wVLTht4AjsBkXggIVG65n0UWKihy3Pbqc5GkfQFOMfCUoJ3It2AMfcmCtd0EY/3c9tZFhs17ZDdoRC/xkkbYKAKjloILdBVSOPN0zWfZeR1Zc3zdUdvg1ON3afvf2Ht4/QVsPGOxZgFn0DvQa0EFeiwoDZwXgUfY1CBbwYSIkNvghfxuU8RBNVgB/8CbXLn1n+PzChyAfXA7J/4aqB3VihfId6DAhQj7Lmz/g5/oT9Jq4A+AUSVG6hjVADWRlQSbPmxOkN+Van+8jHOg4mC8DA7RH2epQQk2O9hsIeOZ7AIHDadp8AcUZ0sT54vgR5BNIAE32gBzXkfWMYKl9Tl7moPToHoFpagUBxV6xDNc7dbGelF7bmqjZrDWbHBOEQ4tcgL9QO/PvIIjd8FvO1tFvgQdtn4dhqDXbvsLZ7Wfbq3nOs66DDmA3LROW7Mv+BiGYNiCHuOsl/ROh7CvR1Dvhb5M0zvtRIBx1Jw+oWdsPd+b9AA7PXYiKs05BxhGdTuXCfZ1mL7ozlA6/XDCknntrwCBz+v5PC5oxQAAAABJRU5ErkJggg==";
                this.progressIndicator = "data:image/gif;base64,R0lGODlheAB4APcAAAAAAAEBAQQEBAcHBwkJCQkJCQkJCQkJCQkJCQkJCQoKCgsLCwwMDA4ODhERERQUFBcXFxoaGhsbGxwcHB0dHR0dHR0dHR0dHR0dHR0dHR4eHh4eHh4eHh4eHh4eHh8fHyAgICIiIiQkJCcnJysrKy8vLzExMTIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjMzMzMzMzMzMzMzMzMzMzQ0NDU1NTY2Njg4ODo6Oj09PUBAQENDQ0VFRUdHR0hISEhISEhISEhISEhISEhISElJSUlJSUlJSUlJSUlJSUpKSktLS01NTU9PT1JSUlRUVFdXV1paWltbW1xcXF1dXV1dXV1dXV5eXl5eXl5eXl5eXl5eXl5eXl9fX2BgYGFhYWNjY2ZmZmlpaWtra25ubnBwcHFxcXJycnJycnNzc3R0dHV1dXZ2dnh4eHp6enx8fH5+foCAgIKCgoSEhIaGhoeHh4iIiIiIiIiIiIiIiImJiYmJiYmJiYqKioqKiouLi42NjY6Ojo+Pj5KSkpSUlJWVlZeXl5mZmZubm5ycnJ2dnZ6enqGhoaSkpKioqKysrK6urrGxsbKysrKysrKysrOzs7Ozs7Ozs7Ozs7Ozs7S0tLW1tba2tri4uLq6uru7u729vb6+vsDAwMHBwcLCwsPDw8TExMXFxcfHx8fHx8jIyMjIyMnJycnJycnJycrKysvLy8zMzM7Ozs/Pz9DQ0NHR0dLS0tPT09TU1NbW1tfX19jY2Nra2tvb29zc3N3d3d3d3d3d3d7e3t7e3t7e3t/f3+Dg4OLi4uXl5efn5+np6evr6+3t7e7u7vDw8PDw8PHx8fLy8vLy8vLy8vLy8vLy8vPz8/Pz8/Pz8/T09PX19fX19fb29vf39/j4+Pj4+Pj4+Pn5+fn5+fn5+fn5+fn5+fr6+vv7+/z8/P39/f39/f7+/v7+/v7+/v7+/v7+/v7+/v///////////////////////////////////////////////////yH/C05FVFNDQVBFMi4wAwEAAAAh+QQJBAD5ACwAAAAAeAB4AAAI/gDzCRxIsKDBgwgTKlzIsKHDhxAjSpxIsaLFixgzatzIsaPHjyBDihxJsqTJkyhTqlzJsqXLlzBjypxJs6ZNhrakjBghxdbNnwKRRThA9EAEZEBvjilalE1SmxCYEo3wtKbUolVn2rpK1OdDadKyLmTnLVs2b+wcluJ6oJRDXVI4cJCiS+xBdtvMmt2WluFarm4Z6iohV26JunYJftOrt1vDv1cDK5S2o3BhMYkJMmZczi9byQnVWLaceWDZzWbVLYQsFfRBVaMLSyktMBxqs95Wf14YNzYHNbTzsbttNp1C1kxdF4zkWy5i2qdRO06IvKjygZSbzw6eTx3xbJ0R/lYnel3goOYcnge3fXsbPPG7DyZDD5z7wLy3v8EHjFBMcxJh2SdQOd+pZtB4bb2G3iACEtQNcbkZtBVXXhVERHM7NEiQd8QZZxBbBzHXnCoaEhTdZtMVFJVUEBxUmW/blSgQPN95SNBSUjm1HHrJJFUOM8ko04x+DhF4W4QEIbMiURAgVVBvsc3x0CxzTNHDGr2UVE4yxXTZ5TLhMYQfigfZEsVOUVRI0IujAdhQL2PQIKecPWQ5EjNe5llMM30phM5tKUZEgm+RMFTNHHMmSkN9IbGjp57JQMPQiWaFGdEcsWG2UCI9KKpoNSM9+mgygR50IpISSXNhYUQEiBAp/k546ilJy4j66DI2HpSON96gg9EiUkhRaELKxCmromOQlA4ytj7qTJ8tVSPIsZ72oIyWXDabZzLZuFRJp9QmOoWdJbHjjLZ6MgOtSdWsEa6igoCa0je1otslMyoZ+y4NY8ziUjbZoutqSY/sS4MTlcTEDjTMaovvSWq820Mi8sqUDp7NPmxSxNSqce1N3yhja7cnVXLsFP4+BbCey+SrKMKJZbMMMsk8q5K0TvQwRsIy9uzzz0AHLfTQFXVTzdFIJ310qTUJg8vTUEf9tDAelVMMLa9krfXWXL9CSzGWusTMIFEkYfbZaKedRBSDaGxRN1h3LXfXtDCtkjBlq623/tpRUH2RL3MHzrUvMNGx9+Fp04FR3IILriZLeSOOOBgY2dJ444+vBIbkklP+9+WCE/6S4ZwfrvhFcIMud90w4V263n1ntCXjoNOSTNgtMZNI5KVHkYjbGhmt9PB2zyTMLcgnrzzyfhPt/PPQRy/99C4lo8onouzia0rdPLIGGXecklgyomRivvkkpmQHF+yzv4b4Tzljyvn0Z9LjSaa0rz8XcvDykzeyqF/9ZIESQuxvf4VoBk3Q4YtPCHCABTzg/sggieKlhHwPFGAxUPIJCR7wfS5xhioyKEACqs+DB7yD/1KCjl2QUIC22B5KumFAFO7vERb0iDTK98LzfeJ+/iwxBRlsqL81AFEk3nBgD82nCxm2pHtEbB8ZFDiSES5RFagyyC8+8YldYMQUiECECRHSjPVF8Q4kWaIonKGQckyiEXBsxCRw5xBvDGINeFzDILJYEFqoIYojQccLPyE6hXgijnF8BUUmkcc8IoIhkhgiCnOYkQA+MIYM2QUi4/gIisShkXk0BUO6oQgPEoIk0lDi+VQxsISU4xGbhOOwCsIMSSQiEZIAnkDqAEo8xoGP8jGjFI8YEmnI4hOlsAUbHfKKWMLREwaJRiH6QM0+FCIaBkFEL/E4iYfwQhFxIAMhiFmTbDgTjr8wSCeqWU1RGCQW28TjMnt2SGfOkiCE/mAnNQtxEF5u85E9S8Y5G5FOg+izmgeBZzxz0bNInLObBmHGQampy3wIIp52kFEtBtoygyRjon0gZz6AEc81gEJDrzynO+UDUpHmoxHx/GWDTHHOR5DMoy1FiDNKCgkBLWOgtUjIRyfq0nyAoqQfC049YxkJOgpkqActqjf82UuA0sYZAy0oQqCqz6LmQ6HbTGpmaOpMaCqEq+z0aj60uc2e0uaNzuyoUHOqEJL+MzjnVORC0FpNteaDkdsMjiiY6lSC8JWafp1qLxsRHGfAkpPzPCtdF6KMT+YxDmLNjDPq6YnISpaoDlEGWxGRWdqUo7AHkehEK5oQXlFvICB9NG1F8qnPU8p2IuvU50pvG5Fo0JaahMAmbyVSy1vmcrjITa5yl8vc5jr3udCNrnSnS92eBQQAIfkECQQA8wAsAAAAAHgAeACHAAAAAgICBgYGCQkJDQ0NDg4ODw8PEBAQEBAQEBAQEBAQERERERERERERERERERERERERERERExMTFBQUFxcXGRkZHR0dISEhIyMjJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJiYmJiYmJiYmJiYmJiYmJycnKCgoKysrLi4uMDAwMzMzNjY2ODg4Ojo6Ozs7Ozs7Ozs7Ozs7PDw8PDw8PDw8PDw8PDw8PDw8PDw8PT09Pz8/QEBAQ0NDRUVFR0dHSUlJS0tLTU1NTk5OT09PUFBQUFBQUFBQUVFRUVFRUVFRUVFRUVFRUVFRUVFRUlJSU1NTVFRUVVVVV1dXWlpaXFxcX19fYWFhY2NjZGRkZWVlZWVlZWVlZmZmZmZmZmZmaGhoaWlpa2trbW1tb29vcXFxdHR0dnZ2eHh4eHh4eXl5enp6e3t7e3t7e3t7e3t7fHx8fHx8fHx8fHx8fHx8fX19fn5+gICAgoKChYWFhoaGh4eHh4eHiIiIiYmJioqKjIyMjo6OkJCQkZGRlJSUl5eXnJycnp6eoKCgoqKio6OjpKSkpaWlpqampqampqampqamp6enp6enqKioqKioqampqqqqqqqqq6urra2tr6+vsrKys7OztbW1tra2t7e3uLi4ubm5urq6u7u7u7u7vLy8vLy8vLy8vLy8vb29v7+/wcHBw8PDxsbGycnJzMzMzc3Nzs7Oz8/Pz8/Pz8/Pz8/P0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0dHR09PT1dXV2dnZ3d3d4ODg4uLi5OTk5eXl5ubm5ubm5ubm5+fn6Ojo6enp6+vr7Ozs7e3t7e3t7u7u7+/v7+/v7+/v7+/v8PDw8fHx8vLy9PT09fX19/f3+Pj4+fn5+fn5+vr6+/v7+/v7+/v7+/v7/Pz8/Pz8/Pz8/Pz8/f39/v7+/v7+/v7+/v7+/v7+/v7+/////////////////////////////////v7+/v7+/v7+/v7+/v7+/v7+/v7+CP4A5wkcSLCgwYMIEypcyLChw4cQI0qcSLGixYsYM2rcyLGjx48gQ4ocSbKkyZMoU6pcybKly5cwY8qcSbOmzYbqcqq7yZOgOnRA0e3seTNf0KD5iNr8eVSo0ppNgz4NmS8pxKhAI2LDNnUhuWfKlEkj9xAruofBjDhwYCRY14PkmoUN24xsQ7MOg11Yu/aC27cEp82d+8zqQrwMsbngyzcLYIKDB2e7i7WhGcaMHw8EGzksOIaIFcLCzNeIZoHYOoeVBrryQrWkHZg5PY+c6rDdDrtOCCn22r+npd0urDD0QcW+TdOeB+62sm3Fdx8M5NsBcNqpVTc7i9B4QWPVZ/4vF5hPruppCb0TzOL7AtfxArc5/3xQvcDRvgPBJ8i587Pu0hHkg28t7EeQN87lZpB9vfkGi4EECafafwYxddRQBbWQHIQEoZOgQUY1ZdhADcZmDFHdFCPMMMdA51A2t7FW4YUHwUaaGw/J0gYSL5ghTEndCAPMkEMSo+BC5U2IkE4YZhibew0Jk8UJVFL5wo8jFUPklsAcw51C8vlH0V6kQcJQNm1UqeYJZYyEDpdcCtMMQxJKRpEbpDm20CEvrLnmZCLBCecwgCKUT39ijQgRNgPy5cN7CKEShJ9+kkSMoHASE45C3UgjjYsWJWKEEWYmdMyUlK6pp0jhCIkpl/7KfNlSNn2k6ucLxwA5zKtxotdSJ33aquYRWJaEDjK8clmMrCZlY4awa/ZR6EnbXJrskMWohCq0J2Qhi0vT7HothSYxwu0JQHQSEzrNuPpqtieVAe0Lh0wLUzhavouSvLaWketN24gLp68mdZLqEd8qFS6XxGi7ZrqATUPMisgwWxKtQLyQhbocduzxxyCHLPLIFW1jzckop3wyqDcNg8vLMMf88jAeBfnKKjjnrPPOq7wizJEvKeMHEToUbfTRSOtAhB/KZLTNzTxHzfMrLLM0DNFJZ500ETRfBIzUYO8MDExuaG020jheBHXYYccCE9Znn20FRrGwzbbbL1URd/7cVWD0td1gj/1S2XubnbZFTwMeNdUwXV141lxn1M0wawP+yjBAu6TMIXAXTsQhTXe0zTSkl2466VXXNEwtrLfuOutdkyz77LTXbvvtLhHTSief0LJpStssQkYWebgCGDGfTKK88q2oZMcT0ENPhvFKOTPK8thP0vBJrkTv/RNpXEfTNrBkn/2DJwHy/feBOENTOMF0Yv75KKm/vvdZYJL6SsjPb37sJQHF/dY3PZc4oxX+Mx/6UPK8AX4vD+IrSThokUDzyeJ3KNmG/RzovUXsDyTTSF4Fl9eJ7bHEFVngoPfIYEKRbEN+I1Se72ASPBVGLwvuG8kqYjiJVXxQIP7C6EQncIGRVRSiEHhDiDMaqMI8kCSGn8ghQrwxiUNY8RCT8AZFuMEHMXhRDHzghkJkQQYbjiQcFexEBA3SiSte8RUUycQXv1gIhmAihQ78oUbKN78LMgQXbrxiIiiChjl+cRUM2cYhBggIkkwDhstbBcEU4o1EBNKKjDiIMiBxREiEriBuMKQX0yBGhhCDidDLQgtDMg1YdGIUspAiQ15xSStyjCDW6IMddmmHPljDIIQQpRczgZZDpCELgFhlTbJRSysWayCd4CUvQ2GQWAjTi9D4WBtrmUmD6FKavTxIKIVZx44Ro5mHeOZAwMnLg1jzmkTkECOaOQlNsnOXn/4kSBeF+QYOyQKd/yrIKe+pzHkM45pi+ISBKtlMUCBkoOws6DwScU1S7scUzUyEvQYCUXBKFBoI7eZyjoHOhB2ko9KU6Dw+gdATLWebl2SEFh96TzuolBvjFGU5T/MMdKpToDVV6TzeKUyXagajtbwlTQm6kGAKU6SPqWItA7rUiC7koMIkBG2aCceFoJSXQhWIHIVJG1DEdKYK+eouwzoPnIpykDy1pCDJldagNsQYhfwiGoyqmWdssxN0rStT7+pUQvCVNt5Aa0OUUdN8MoQbpcTdPGoq2Yp8U5p9qCxFoglOampWIrnE7C8/K5FNEoIQniStalfL2ta69rWwjQutbGdL29ratmMBAQAh+QQJBAD2ACwAAAAAeAB4AIcAAAABAQEDAwMEBAQEBAQEBAQEBAQEBAQEBAQEBAQFBQUHBwcKCgoODg4TExMXFxcZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkaGhoaGhoaGhoaGhoaGhocHBwdHR0gICAjIyMlJSUnJycpKSkrKystLS0uLi4uLi4uLi4vLy8vLy8vLy8vLy8vLy8wMDAwMDAxMTExMTExMTEzMzM1NTU3Nzc5OTk7Ozs9PT0/Pz9AQEBBQUFCQkJDQ0NDQ0NDQ0NDQ0NERERERERERERERERFRUVFRUVGRkZISEhKSkpOTk5QUFBTU1NVVVVXV1dYWFhZWVlZWVlaWlpaWlpaWlpaWlpbW1tcXFxeXl5hYWFiYmJlZWVoaGhqampra2tsbGxtbW1ubm5ubm5ubm5ubm5vb29vb29vb29vb29vb29vb29wcHBxcXFycnJzc3N1dXV3d3d4eHh6enp7e3t8fHx8fHx9fX1+fn5+fn6AgICBgYGDg4OEhISGhoaJiYmMjIyQkJCTk5OUlJSWlpaXl5eYmJiZmZmampqampqampqbm5ubm5ubm5ucnJycnJydnZ2enp6enp6fn5+goKChoaGjo6OlpaWmpqapqamqqqqsrKytra2tra2urq6urq6urq6vr6+vr6+wsLCxsbG0tLS4uLi8vLzAwMDBwcHDw8PDw8PDw8PExMTExMTExMTExMTFxcXGxsbHx8fIyMjKysrLy8vMzMzPz8/S0tLU1NTW1tbY2NjZ2dna2tra2tra2trb29vd3d3h4eHk5OTm5ubn5+fo6Ojo6Ojp6enq6urq6urr6+vr6+vs7Ozs7Ozt7e3u7u7u7u7u7u7v7+/v7+/w8PDx8fHy8vL09PT19fX29vb39/f4+Pj6+vr7+/v8/Pz8/Pz9/f39/f3+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7///////////////////////////////////////////////////////////////////////////8I/gDtCRxIsKDBgwgTKlzIsKHDhxAjSpxIsaLFixgzatzIsaPHjyBDihxJsqTJkyhTqlzJsqXLlzBjypxJs6ZNhuK0YcOmTdzNnwLJXbNG1No1ckBvbitalFtSm0OZGn1aU2pRqiHJIX0ozipRnw+JYl3ojRgwYMW8OQTn1Ro4h7mCGDAQJNfYg96GnT07TC1Dtl7fMszlYO5cB3bvEjS2dy+xrQoBWxWs0NoIw4adKCbYuLGzv20pJ+SCGfPmgWY7n3UaOfTCVKUN+zgtMJnqs8UWSpYq+qCP2HO50Lbn7fZZbK0DK6wEfG5i2sWMP064m2lvgpabzx5uj5txYNGo/rtGyKe5gefDbd8edl1g9aLt7REzL5x7UL23jSF8TzS+k+YOWGPfQNF8x1pB/Ll1EGzN8TEgQampRsxBXXkFVkE1NCfCgwRp8x1yBrV1EHPNpcIhQdHdNqFBUTF1zUEiaHciQeB8aNBSUh04EInArfiTNr3UkoswIDbkjHG5FSSUi5AN9BtwbjwkSxtIlMDFLiVpUwssXHK5izYNkYNfZz4SlNNOPcEIXIAN7fIEB3DCWQKWI/XS5Z2wCHNhQtaoSFFhsVXC0DVtxGkoB1uMJA6eeNZSJkIpekaRG7FptlAgJRx66IsiMcooLuElRE6EaDUJkTUZGlaDgAmdcoOm/pqStIunjO7iF0LYFFMMqxYJ4oMPgiZEzJuwHmqpSN5sSSuew+zJ0jV7FKtpCY+CpA0uyzaqjEuaZCqtoUjQWZI4w2SLZy/OlnQNF98eqgenKGEzq7lc9qKSE+3G6YQsLimDLb36naRIvhzcoElM4hCj7LL2nrRFuyUEAm9M3tjJMEoPS7tFtTJhkwut256kSbFI8PuUv3iKexK+hhqsmDK71IJLsypdo8cNJThx8Iw89+zzz0AHLXRF1zhj9NFIGz2xTb3c4vTTUDvdMEfb4GLKKFhnrfXWo5iCyzYyGYOHDi2UbfbZaLegAx4BX3TN1VzHzbUpS6/UC9lp5522/g5TV1SL3IBvXQtMbehtONptYAR34IGfAhPehx++BEanMM644y8tEXnkk1/0t+WAD/5S4Zsbnrjbi4OuNd0w3V163nxntI0uqVtuii5gx2QMIJCXrgMgbW9UdNLE101T01En3/fQzDfv/PPQR8+SL6ZYkgkt36ikTSFZNAEH5mP5koki5JNvikpwFKG++lmAD5QxnpQvvyK+oHTK+vgX4QV6NGWDyvzzQwVK9JC//O3hGDT5Bi4sAcAADrCA+WvCJcAEE/E1EIAqI4knIFjA9rnEGKa4IAAFmJL0cTB/cOBfSb5BCxECMBXZS4k2CHjC/BWCgiWBxvhcWL5K1K8l/qdoQg3xl4VhlCQbDOQh+WYRQ5dsb4jrawICRxJCJZoiGwrRxSUuYQvK+cEPq1DIMUw4RDiQRImZCJ5BugGJL34REt2gyDboYIU6WoEOuUMILLAAxZF8w4WVwAVDLuFGN5JQIpewox39wBBLCPGEOATJ/xoIQ4bYopBuDARFuqBIO7oPIdoABAf1QBJoVGJ+poBGQ7oRCEx+cRAHKQYk+MAHSCSpIGXoZB27kEeFDIOM6muCEUuJikp4IhVqVAgqXPnFSxgkGnNQgzTVMIdQEaQPuqyjM+ECCC80QQ/D/Mk1mPlFXRgEE9OcJigMoops1pEZPiMkM2FpkGimk5oH/sllNhnJM1+Q0w/mNMg9p3mQdrrzFjwbBDkbEcuBSvOWBKFjNtUwo1X8k2PCcKgahHEQXrjTCpzgECvJuQmEZNShHD1IINzJyweVgpwSM6lGU2oQZnz0EAMixj/DKFOUJoQTH+XYXeTpykHEsacDpemN9KlLftImGf8MKFLvqVR2BnU4L2XmNhNy0qQuBJvZxCltGkFOoQ6kq1RdiEez2YfhkPOQXJ3pIN05nE0U9agKQWs6q3qQbTDVjpp8aiszmYyG6HWafD0IMThpxy6YlSrJkOclCmtYuTaEGGDtw2PH0g28NqQYGoUoQ7bRy+hpVHoWsWc654DaiqDznutsJO1EoLlaa8o2IrKkpS1vy9ve+va3wA2ucIdL3OIa97jIlV5AAAAh+QQJBAD5ACwAAAAAeAB4AIcAAAABAQEFBQUJCQkLCwsMDAwMDAwMDAwMDAwMDAwMDAwMDAwNDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0ODg4QEBATExMXFxcaGhocHBweHh4fHx8gICAhISEhISEhISEhISEiIiIiIiIiIiIiIiIiIiIjIyMkJCQlJSUnJycqKiosLCwvLy8xMTEzMzM0NDQ1NTU2NjY2NjY2NjY3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc4ODg4ODg5OTk7Ozs9PT0/Pz9DQ0NGRkZJSUlKSkpLS0tMTExMTExMTExNTU1NTU1NTU1NTU1OTk5OTk5QUFBRUVFUVFRXV1daWlpcXFxeXl5gYGBhYWFhYWFhYWFhYWFiYmJiYmJiYmJiYmJiYmJiYmJjY2NjY2NkZGRlZWVlZWVmZmZnZ2dnZ2doaGhoaGhqampsbGxubm5wcHBxcXFycnJycnJzc3N0dHR0dHR1dXV2dnZ3d3d6enp9fX2BgYGDg4OFhYWHh4eIiIiJiYmLi4uMjIyNjY2NjY2NjY2Ojo6Ojo6Pj4+Pj4+QkJCQkJCRkZGSkpKSkpKTk5OUlJSVlZWXl5eZmZmampqcnJydnZ2enp6fn5+goKChoaGhoaGioqKioqKioqKjo6OkpKSnp6eqqqqtra2xsbGzs7O1tbW2tra2tra2tra2tra3t7e3t7e3t7e3t7e4uLi5ubm8vLy/v7/Dw8PFxcXGxsbIyMjIyMjKysrLy8vMzMzMzMzMzMzNzc3Nzc3Pz8/R0dHU1NTX19fb29ve3t7g4ODh4eHh4eHh4eHh4eHi4uLi4uLi4uLi4uLj4+Pk5OTk5OTl5eXl5eXm5ubm5ubn5+fo6Ojp6enr6+vt7e3w8PD09PT19fX29vb39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f4+Pj5+fn6+vr7+/v9/f39/f3+/v7+/v7+/v7+/v7+/v7///////////////////////////////////////////////8I/gDzCRxIsKDBgwgTKlzIsKHDhxAjSpxIsaLFixgzatzIsaPHjyBDihxJsqTJkyhTqlzJsqXLlzBjypxJs6ZNhuusRYtmbd3NnwLbNUtGNFmzdkBvWita9FpSm0OZGn1aU2pRqiHbIX24zipRn1g5avu1axcwbQ7TeU2WzmE8deLEqYsX9qC2XmXL9kLLUK3XtgzjpYsbNx3dugSD5c3ra6tCv1YBLxxMOC5YxAIXL17Wd63khOsqV8Y8kKzmstgme17oTjRhdaQFCjtdFpjqvwvhuhZ3GbM22mWtPV6dsN3uuIdjAwPeOCFkqZ8NUnYNO7ZAbMB3RXNO/CC74+KS/lufTbtXdendC8YD39t6O7y0gyF8zjT6wNC77VuPlj01etwGtXYcO9Yd5AtwvxzUlVftCaSba/oVeE12whm01kHGHedOgQgtR5svB0XFVDMHTSfaeRwWpA6FBi0llVMFZbibeDZhw4srsfRSYUPLAGdbjCIa5dhAD4pGoEOwoMFDBlH0UhI2rqgipZS1+LfQex8qWM1O1TSYj4mERWhQL0I8YKaZGTg5Ei9TtqlKL0cqRE2WE4EZ15AIXYPGmXw+AMVI7Ljppis/KuThZhR9J5qXBe2RQZ99whiSoIK+Qo1C7ZhWG54QFYniQaKoACmkJNVCqaC18IWQNcAAc+lF/u2oow6nBAlT5qh9BkGSNlGe6uYvcbZ0TR24QoqBME++4uugJLbUyaPF8smDmiWx88uybvISrEnXRBFtn3RIepI1pmIrJS8qBfHtmUHA4lIzypqL7EmOrPuACp3ExA4wvfqK7klQfIvBHuLCpA2b/qIUcLFQzGuTNbGc2qxJneDKg7tPwetmLen2iS9izdTiyivAqnQNHSpgEES+Kbbs8sswxyzzzDVZM83NOOd88443+ULLz0AH/TOIHWETiyeaJK300kxr4kksVr60zBwsiGD11VhnLQILc3CGkTVINy12057wzJIvVWutttYsEG3RK2PHzfQrMJmx9t1Zm4FR/thyyw0KTCvgLbgIPmAESt99//1SD4Pj3QNGcCMeN90v2d342npfBLbkYpcNky+BX571Cm5bhI0tfEvuiS1Ru7RMHqFfvkIeXnNks864m12TL7P07vvvvZdO8/DEF2/88ci37MsnjkjyipghYWNIEz+kMQpivkgSyPbbf6JSGjaEH34T1z+1DCfcpx+I8CONIv77Nkyxy0/XhKK++qGgNAf88NOx3UzpkIUj7oc//fEPfj+QROvOpj0Cqm9+J/HEAflHPtd9woH3y19KwDdB+KUBgihJxysweD9WQA8k2NhfB+FniAWGpBoNJOH2GsE+lIziByt8XxMKJZJrDFCG/tt7HkywQYgciu8H/xPJBYH4iYIVBBeQgEQsMBIKO9jBFQqJBgdzmAaSAFEStbNLIupAxjokQlURwQYbksDGJLDBhQN5RROMOJJ0kLARsmAIJMpYRlFQRBJtbKMdGCIJHHYQjhuxHwFNyBBY8LGMeKAIFALZRg0qBBt5mOAcSFKNRqjvE9VoiDbw8Egy8uEgxWgEHejQiGIcBAyUZGMUEEkQYGwxfD/g4QtD0QhNsCKMCxFFKckICYNUQw1cSCYX1BDKgtghlmyUxEN2kQcp/GAOuqzZMMmIC4NMQpnK9IRBXAFNNr4qZnsc5ikNgkxwLvOV5RxkzHyxzTp00yDu/lTmQchZzlnEjA/bRAQq85lMVxpkDeUMA8xcUU/5GOQXBOVCgsZUziSIs2Wj3CYmEAJRgk7UIHoo5yxb9olt4kF3AuloPj9aEGpUVKAcCkY9scjRiLK0IJ6oqEOtk85S8gGNBVGpO29KEGzAEpryjM0z6nnPmnpUIfyE5k4xU9JhFlMhQgUnUZ1ZTpiSBhHbnOpBsqrMrRKkF/G0zjb9uBCyJtOsBAEkNK2DCZ8Cdaw2ZYhRY6kH6zyDlJB8RkPcKtGGBGOSbYSCWBHzjHRCQrCDzathn5kEOyyWNNq4q0KKEVGDOgQbtDReRJOnkXaCUw2kzcg33XnR1FrkmKdtIqZrLVIMRqySEZ6drW53y9ve+va3wA2ucIdL3OIa97gnCQgAIfkECQQA9QAsAAAAAHgAeACHAAAAAQEBAgICCAgIDg4OEBAQERERExMTFBQUFRUVFRUVFRUVFRUVFRUVFRUVFhYWFhYWFxcXGRkZGxsbHh4eISEhIyMjJSUlJycnKCgoKioqKioqKioqKioqKioqKioqKysrKysrKysrKysrKysrKysrKysrKysrLCwsLS0tLi4uLy8vMTExMzMzNjY2ODg4OTk5Ozs7PDw8PT09Pj4+Pz8/Pz8/Pz8/QEBAQEBAQEBAQEBAQEBAQUFBQkJCRERER0dHSkpKTU1NT09PUVFRUlJSVFRUVFRUVFRUVFRUVVVVVVVVVVVVVVVVVVVVVVVVVlZWVlZWV1dXWFhYWFhYWVlZWVlZWlpaWlpaW1tbXFxcXFxcXl5eX19fYWFhY2NjZWVlZmZmZmZmZ2dnZ2dnaGhoaWlpaWlpampqa2trbW1tb29vcnJydXV1dnZ2eXl5enp6fHx8fX19fn5+f39/f39/gICAgICAgYGBgYGBgoKCg4ODg4ODhISEhYWFhoaGhoaGh4eHiIiIioqKi4uLjY2Njo6Oj4+PkJCQkZGRkpKSk5OTlJSUlJSUlZWVlZWVlpaWl5eXmZmZnJycoKCgpKSkp6enqampqqqqqqqqqqqqq6urq6urq6urq6urq6urra2tr6+vs7Ozt7e3u7u7vb29v7+/v7+/wMDAwMDAwMDAwMDAwcHBw8PDxMTExsbGyMjIy8vLzs7O0NDQ0tLS1NTU1NTU1dXV1dXV1dXV1tbW19fX2dnZ2tra3Nzc3d3d3d3d39/f4ODg4eHh4uLi4uLi4+Pj5OTk5eXl5ubm5+fn6Ojo6enp6urq6urq6urq6+vr6+vr6+vr6+vr7Ozs7e3t7u7u8PDw8fHx8vLy9PT09fX19vb29/f3+Pj4+vr6+vr6+/v7/Pz8/f39/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+////////////////////////////////////////////////////////////////////////////////CP4A6wkcSLCgwYMIEypcyLChw4cQI0qcSLGixYsYM2rcyLGjx48gQ4ocSbKkyZMoU6pcybKly5cwY8qcSbOmTYbdjPnyZazbzZ8CwfHCRRQXL3BAbyIrWnRZUptDmRp9WlNqUaohw4WD2M0qUZ8P0aHDulBbLFWqZmlzuM0rrm0OxV2TJu2aOLIHtblCi9bVWoZtvcJlKK4aXbrV7uIlaIsvX1hbFwa2OlghOmuHD2dbTNCxY1+A3VZOqC1zZs4Dz3pGe02y6IXgTB9ujboer9VoZ7kWvHCubGl/UWvDjdZpwslSRxv09puu4tqziEM+/hrh5ea0a9e7RlyVMOq8Ef5uay7tufbbuF2BNYicqfKB48gH114v3F7ctsRXN5itebWx9A0kTHfZEdReUe/VE1tzCWoHC3GxHNSVV+sR5Jts1gRoEDXdGVeQWwcx1xxSGhYUHW6wHBQVU7wchNlvBZYoUDcdGrSUVB4OJOJv4yR1zSuikBKLMw/5QpxuBQnFIokWNjefTdeI0smUU6oSI0L2oShhMTsVU+FAL5r2X1KvUGlmJ7EwmdAxWk5kmGzeJAXOmWeKggtDJ35GUWmmbfYUnXSOgoxC4aiWW2QSoXNhXQAmpQqgdKrSoEDLzDLLMRh1c801cWK1TSiQ0jmLmjJqdM0oodb5XakcgTNLqv5nvkIqqxc58yisU75Ca0fCoIprL7u2iguoqeoaLEfblBmqscdy5AwpkK7aLK++UqnKtCENGMooo2Lr7bfghivuuOQ6JA0y6KarLrrSJFXLK/DGKy+8tXiUTSmTPKLvvvz2+8gkpfgJ0zBqXMDAwQgnrDADF6gxTEbS5OvvxP5O0u5LtRi88MYLX1DvRaNQLHK/o8DEBccoK8wFRhKPPHIlMFmQ8swMtIBRJS67DPNLLdCcss0g5zxyyS+d7DPHK18UsdATWwxTLTIfrbAFH1+UTSstCz1JKwK/NEwcUR9tQRwPd3Tuumhf/FMtrrTt9tttV13u3HTXbffddM9Cif4giIzyZUnYCAIEDF6EstgsiNyhuOKUqOQFCZBDDoThTwUjyeKY34GkSaFE7jkJRkR40zWXZJ75JSip8fnna2A6E42CmH566qt/DsMj2MSEuOymp3hSJbWvPrlLwVDCu+mop/R48J97ITpK3YxyvOmh/E0SNqoz/7kguZukTOLTLy7I5iuF8oL2ngOxS0nXxB6+4n7DhE0g6EcOg+siGf8+JVcSBAsiiDgFRjqxhjUQDSHHWB76vECS9yEiGArhRiDSQME0BIIbewKDDjaoAzA8qSCl+EH9RtKN6QniWgtBRAUrCAqKLIKDHFwDQx5xPuZ1LySlk131GGKKFVawDf4UEQIMOdgJhmADDsFTA0mU4b7FUUIZDeFGG3xIQTkcJBiEoCAhIGgQKgxxg0L44EF2oUDIvWB9S7yEICQRCi42BBRUpCAiDOIMLzThjk3wApEKsoYvbnARD4kFHIrwAjWg8SfUiCMFfUeQR+ARj40ryCj8uEEo7kqFcbSiQbrwyDsysIuUlCGtaKHINDCSIJ3E40EmSclW0EoOigzEFVN5RzcSRIN+pAKrRlFKYBnEFrRsQn4MMgtK6iCSGpKiIiWBEGDScpgGiQMlw1iiSiiyDdRoZjChWRBlGFOWAepFKQ/4y20mhBLGBA19MElFOWBQm88kjRf9KMraGKOUp7EsZzwTwko/qhM11ozjHBXizFRy8yB99CM4UTPBOPoyIQXt5EGJGUrtKLKFC4noIydqkBf6UTuSaOc7CWrOsswThnHQjjGm+ENjNESjeOSoQXwhRA4K4Z+oMQYmEeHSl5aUIb5I6Bpwqh1ujLQhwQimLRmiDTGGK5h4gwgnO9mFqD7EkZ1EplUX4oyp3rELe9wqQ4IxCDSgYRBLFata18rWtrr1rXCNq1znSte62rUeAQEAIfkECQQA+AAsAAAAAHgAeACHAAAAAQEBAgICBQUFCQkJCQkJCQkJCQkJCQkJCQkJCgoKCwsLDQ0NDw8PERERFBQUFhYWGRkZGhoaGxsbHBwcHR0dHR0dHR0dHh4eHh4eHh4eHh4eHh4eHh4eHx8fHx8fICAgIiIiIyMjJiYmKCgoKysrLi4uLy8vMTExMjIyMjIyMjIyMjIyMzMzMzMzMzMzMzMzNDQ0NDQ0NjY2Nzc3Ojo6Pj4+QUFBQ0NDRUVFRkZGSEhISEhISEhISEhISUlJSUlJSUlJSUlJSUlJSUlJSkpKSkpKS0tLTExMTU1NTU1NTk5OTk5OT09PT09PUFBQUVFRUlJSU1NTVFRUVlZWWFhYWVlZWlpaW1tbW1tbXFxcXV1dXV1dXl5eXl5eXl5eYWFhYmJiZGRkZmZmaGhoampqbGxsbm5ub29vcHBwcXFxcnJycnJycnJyc3Nzc3NzdHR0dXV1dnZ2d3d3d3d3eXl5enp6enp6e3t7e3t7fHx8fn5+f39/gYGBg4ODhISEhYWFhoaGh4eHh4eHiIiIiIiIiYmJiYmJioqKi4uLjY2Nj4+Pk5OTlpaWmZmZm5ubnJycnZ2dnZ2dnp6enp6enp6enp6enp6en5+foaGho6Ojqampra2tsLCwsrKysrKysrKys7Ozs7OztLS0tra2uLi4u7u7vb29wMDAwcHBwsLCxMTExsbGx8fHyMjIyMjIycnJycnJysrKy8vLzMzMzc3Nz8/P0dHR09PT1dXV19fX2NjY2tra29vb3Nzc3Nzc3d3d3d3d3d3d3d3d3d3d3t7e3t7e3t7e3t7e39/f4ODg4eHh4uLi4+Pj5OTk5ubm6Ojo6urq7u7u8PDw8PDw8fHx8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8/Pz8/Pz8/Pz8/Pz8/Pz9PT09fX19fX19vb2+Pj4+vr6+/v7/Pz8/f39/v7+/v7+/v7+/v7+/v7+////////////////////////////////////////////////////////////CP4A8QkcSLCgwYMIEypcyLChw4cQI0qcSLGixYsYM2rcyLGjx48gQ4ocSbKkyZMoU6pcybKly5cwY8qcSbOmTYbleN26xavczZ8C0dWKRTRWLXRAbx4rWnRZUptDmRp9WlNqUaoh0SF9WM4qUZ8P163DurCaKlGiWFVzqM1rLG0O0UE7dgzaVrIFq5VCi7bUWoZtvcJliG4ZXbrL7uIVOIsv31OKEQa2OljhumaHD0dbTNCx41yA3VZOGC1zZs4DU3nmK23hZKmjD54zfRgaaoG3VqNl5Vr0wrm0j22+XU032mYKXzONXRBccLqRF7MyDjmh8qLMB15+bvu2QGnGRf7xsu4b4bTnx6Jzzq27lDnJ5Q2mQz/ce9C9umfBF4ywdHBlY9k3EC/htWbQdURlN9tz0whY0CnGqXJQV16BVdAzzzHjYEHQhIecQW4d5Nxz52xY0HS6nXJQVEzVchAz3JlYkDkeGrSUVE41h146SUlziiaerNJdQ7kYx1tBQrUYHXC0GdiQOueYM845AY4kjSaVZJllKU4qhA5+nqloUE479fTif1VaZg44bLI5TpognaLlnJWsol5Bx6RIkTLBgdPQOW0GCk6JIqFDJ52a2MIQip9RJA1t9SWEzjiCCkrSoYdykiNC6KjGFyt3MrQOhoc9A2dB6pRTaaUkkYLpof6l+JlQM6ywcgxG1UADjawIubPmqoK+NxI4WL5KZyyhooQOsJWO405J0mxiLKK9uJQOpcwGas6pWcUyLZ3VqQRotoEmGxI0rn6bpZgo/UouOOao41Iv0qoL2knLvlsOjzChY0uxxrJb0rjMjmOuSuDIGTBKBK96zrM3QdPJq9WelA6w8VJFL52kqOQum/su1gspmmyC7ErolDOOOfzK6PLLMMcs88w0cxQNMzjnrDPOkdp0iypABy000Ld4RA0pjByi9NJMN30II6RQI5MyY0RwwNVYZ631ARGMoUxG0STt9NhOM9LzSrdYvfXaW0dQ9EWckC1305zARAXbeGtNBf5Gi8zt9yGOwKR23nmTgJEjf88d+EskEE644XAnLnfdL93tON57XxRN35I3vcjZKqV9+dpuZ0TNKZxLvsgpUsekDByDXx4BHF93dPPOuIM+0y2p9O77772/XfPwxBdv/PHI1yRLI3oA4omwKFXTRw0mVEE5WbIA8sb22zeiEhUbhB9+DdcD9csi3Kf/hiwobSL++xsIcaRN0mCivvqYoCQG/PCPoeFM5iiFHu6HP/3xD34mWMRfXpI9At5PQieBxAH5Rz6X/KIRDrxf/lICvgnCrwrzO4k5PJHB+20Ceiepxv48CL8+LJAkz9BeCbmnB/a1ZBMlYOH7anAvKw1whv7b6wQKWSI9HYrPBP8TCQaB2IguGUQVgxhEKTCiiTGMQRQKYUYHdVgFkgDxD79QSDn24IUyemEPFoqINq7wgja+4ArZGUgpamDEkZijhHqY4kICYUYzaoIiinCjG8fAkEXk0IMv/Ij9CHhChpSij2YsA0VsIEg3/rEsbJigGGD4Q+414hkNKUcZIFlGNhxEGH4AAxj8IIyDIKGSbbxBHAuSiy2GrwQ9FMkzMKEHRWwijA7RBCnLGAiDQIMKQkimEKgwpIGMAZZtVMRDWMGGHpRADLm0STSGWUYIEkQRylTm4gjyCWi2EZQw4+MwTWmQKYQzmZkryCuhSciX1YKbXv7wJkHeqcyDlNOcqHgZG7iph1PyM5mtNIgVzKkEl3ECn7o4yC0OKgThEYQW5nzBOAUkSm4uAiETPahFCcIGc8pyQ4/gJhl0F1J+jnQgz8goHxykC3yWryAtfedLB+KIjO5CQOokJRvSiFOK7lQg2pgnLOt5m2XgU58GyWk4jyqQf0Lzp7dJ6TCLqRCpKpOqAnkmNGd6Gz1wM6JdNepCMEpP73DzkmkVKUMCCU3vLEKoRJWoWl2jVDeyEzXLIEMfybCpuLq0IbugpBttgNWmqjMQhTWsTh2yC7GOobH2KUdeFSIMiiaULbMkHkWTdxF3vnMKpLUION+50dRGBBqmTSHmFJrp2oigUpWsrK1ud8vb3vr2t8ANrnCHS9ziGpe4AQEAIfkECQQA+gAsAAAAAHgAeACHAAAAAQEBCQkJEBAQEREREREREREREREREREREREREREREREREREREhISExMTFRUVFhYWGBgYGxsbHBwcHh4eICAgISEhIiIiJCQkJCQkJSUlJSUlJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJycnKCgoKioqLCwsLy8vMjIyNTU1ODg4OTk5Ojo6Ozs7Ozs7Ozs7Ozs7PDw8PDw8PDw8PDw8PDw8PT09PT09Pj4+Pz8/QEBAQUFBQUFBQkJCQkJCQ0NDQ0NDRERERERERUVFRkZGR0dHSEhISkpKS0tLTU1NTk5OT09PT09PUFBQUFBQUVFRUVFRUlJSU1NTVFRUVVVVV1dXWVlZWlpaXV1dX19fYWFhYmJiY2NjZGRkZWVlZWVlZWVlZmZmZmZmZ2dnaGhoaWlpampqa2trbGxsbW1tbm5ub29vcHBwcHBwcnJyc3NzdXV1dnZ2d3d3eHh4eXl5enp6enp6e3t7e3t7fHx8fHx8fHx8fX19f39/gYGBg4ODh4eHi4uLjY2Nj4+PkJCQkJCQkZGRkZGRkZGRkZGRkZGRkZGRk5OTlJSUlpaWmZmZnZ2doqKipKSkpaWlpaWlpqampqamp6enqKioqqqqq6urrq6us7Oztra2uLi4urq6u7u7u7u7vLy8vLy8vLy8vb29vr6+wMDAwsLCxMTExsbGycnJy8vLzc3Nzs7Oz8/P0NDQ0NDQ0NDQ0NDQ0dHR0dHR0dHR0dHR0tLS09PT1dXV1tbW2NjY2dnZ29vb3d3d3t7e39/f39/f4ODg4uLi4+Pj5OTk5eXl5eXl5eXl5ubm5ubm5ubm5ubm5ubm5ubm5+fn5+fn6enp6urq7Ozs7e3t7u7u8PDw8fHx8vLy8/Pz9PT09PT09fX19vb29/f3+Pj4+fn5+vr6+vr6+/v7+/v7+/v7/Pz8/Pz8/Pz8/Pz8/Pz8/f39/f39/v7+/v7+/v7+/v7+/v7+/v7+////////////////////////////////////////////CP4A9QkcSLCgwYMIEypcyLChw4cQI0qcSLGixYsYM2rcyLGjx48gQ4ocSbKkyZMoU6pcybKly5cwY8qcSbOmTYbbbq1adWvbzZ8CwaUiRZRUKnBAb+4qWvRXUpuomBJN9bSm1KJVQ5IjB3HbVaI+H6pTl3XhtU+XLpm65vDaV1JsG4IDdusWMKRlDV7blDbtprhm3wJWCG5X3bq78OYdmKpv305cA38djFBdr8OHiS0m6NixK4ZuJzM0hhnz5oFoO6edJvkqZYPdSh8GdlogK9VpTbWW+rogXdm3jNXWdw132mAKQ7tODryu4tOkjENOqJx3QsvNaQ/XN834JV3UBf4nnNb81vPat3Fv6oawOtPe+siVF75dIDm+uKkedF8UPrHmu5BVn0C6eMeaXuLBVt6BAwrUiXGfHOTVV2EV9EtzvTRIkDHeIWfQW/uVx56GA0WHWycHRSUVKgddBpx2JArUTYcGLSWVUwVdU15kP1HTCSSXiHLMQ64YR4pB4KhIFCrn6fObbMk8JA421UxzjTklUQOJIlxyyQk1Dd13ooQ68VQhQS6WFmBD5ljjzJtvToPlSJ10aaciooTDUC9jTmSYbPARJA82cBbqTKAahXPnnZCwwpCJnlGUjGyaLbTNNIYaKs9Iiy4aCYwHkZNaWqTwGJE6Fx72i4AIhUNNpv6ZksRJp4tyko1CwRCV4UXVAAMMouq4Cauh1pCUzZa03pmKni/Jk82wmU7DqkjURJIso7y49A2m0BZazZwlhZPKtXd2wixK8lzTraHZbJrSMbOSyyWKKQm7rjPWiOMSL9bKCwtK3dzrDDXfxBQOK8gmS69J6nY7zTbuypRNnQqj1PCw10xL0zGX0JrtSd8MW42+T/F7Jycq2fsmwYvxwgkkkSyrkrPUTGNNwTHmrPPOPPfs888VOTPM0EQXPbQzQE+EDSeB7OH001BHvUcgnGAzkzzujKX11lyP5U7EFznTtNRkSx0I0jBl3fXaXbuTUSVlxx11JWmzbTfXbl8EiP7cfO8xSN13B563RYP0LfffL6kduN2DVwS34WXTnfjidzdOkTN7Qx41IGhPTnnbGmHjSeaQA+KJ1TJh/bnXYG/kTDCwxy477J0nbfvtuOeu++68T7TKIG7coYk3KmFzBwoVKHHJYqvcMcbzzyOOkhIIVF89Css/5Qsg0Hc/xiooVWL9+AjkoMpP1TzivfePoIQF+eRnUQxN3nTixvrsuw8/+RUEgvpLzcPf+o50kkfsD37Yc4kvBiHA9bUvJdQ7IPmUcL6UeEMTDVxfJIiXEmy8T4Lku8P/SFIM52UQemwAX0sqUQEQjg8FuShJNe53wucNDybYqIMLrVeB+Y2Egf41HEQ1FHKKPvRhYRWRRBaygLKEFCOCLlQCSWpYB18opBtviIIWo/CGEUkkG00AgRhB0IRbJaQTKNjhSLyRQTYgESF72OIWI0GRQIxxjFlgSCBaKMERfkR9+NsgQzohxy3mcSIpuOMYJcEQbJzhgFggIRu8NwgfLqQbWSikFslwkF/UoQpVqAOOCtIDRYpRBWZcSC6gWL0KxJCEj2ADICJhRYdEQpNa3INBnIEEGviSBkionUCyYEoxBuIhqjgDDiqAhVf+ZBq41OIpDBKIX/5SEQbhRDHFOCSdxRGXnDTIEazpSyQcpJTFPGSMWBHNKEzTIOT85UG0uU1R5IwM0f58Qyfj6ctREmQJ2/xBjDLRTvAY5BX8pMErDsKKbYKgERrCZDSPeRCE8nOhBzHDNlHZoEZEMwsMKohF44lRgxzDoXMYkC7amYmEjJScJTVIIxz6seF8U5Nk8OJBExrTgmQDnaZU52mC0c53IuSl1uxpQehZzJpuxqO41KVCkPpLpRaEmMVMaW2yiEuDupSnC2loOocTTTouhKq+tGpB7FjM4QQCpzo9KlgX8lNTmmE4wcikIT101rkuhBeJHGMKnLqZYHxzD3zt60UdwgusZoGwtelGXBfyi4T6kyHZSOXuEto7ioyTnEfo7ESqSU5sijYizvisL48gzNM2xJNUoBmCKF1L29ra9ra4za1ud8vb3vr2t8AtS0AAACH5BAkEAPsALAAAAAB4AHgAhwAAAAEBAQICAgMDAwQEBAQEBAQEBAQEBAQEBAQEBAQEBAUFBQUFBQYGBggICAkJCQwMDA4ODhERERMTExUVFRYWFhcXFxgYGBkZGRkZGRoaGhoaGhsbGxwcHB0dHR8fHyMjIyYmJioqKiwsLC0tLS4uLi4uLi4uLi8vLy8vLy8vLy8vLzAwMDExMTExMTIyMjMzMzU1NTY2NjY2Njc3Nzc3Nzg4ODg4ODk5OTo6Ojs7Ozw8PDw8PD4+Pj8/P0FBQUJCQkNDQ0REREREREVFRUZGRkZGRkhISElJSUpKSktLS0xMTE1NTU9PT1BQUFJSUlRUVFZWVldXV1hYWFlZWVlZWVlZWVlZWVlZWVpaWltbW1tbW1xcXF1dXV9fX2BgYGFhYWJiYmNjY2RkZGVlZWVlZWZmZmhoaGlpaWpqamtra2xsbGxsbG1tbW5ubm5ubm5ubm5ubm9vb29vb29vb3BwcHFxcXNzc3Z2dnp6en19fYCAgIKCgoODg4ODg4ODg4ODg4SEhISEhISEhISEhISEhISEhIWFhYeHh4qKio2NjZCQkJSUlJaWlpiYmJmZmZmZmZmZmZmZmZqampqampubm5ycnJ6enqGhoaOjo6ampqenp6qqqqysrK6urq6urq6urq6urq6urq+vr6+vr7CwsLKysrW1tbm5ub+/v8HBwcPDw8PDw8PDw8PDw8PDw8TExMTExMTExMTExMXFxcbGxsfHx8nJycvLy8zMzM7OztDQ0NLS0tTU1NbW1tfX19jY2NjY2NjY2NnZ2dnZ2dnZ2dnZ2dra2tra2tra2tra2tra2tra2tra2tvb293d3d/f3+Hh4ePj4+Xl5efn5+np6evr6+3t7e7u7u7u7u7u7u7u7u/v7+/v7/Dw8PHx8fLy8vPz8/T09PX19fb29vf39/j4+Pn5+fr6+vv7+/v7+/39/f39/f39/f7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v///////////////////////////////wj+APcJHEiwoMGDCBMqXMiwocOHECNKnEixosWLGDNq3Mixo8ePIEOKHEmypMmTKFOqXMmypcuXMGPKnEmzpk2G3m6hQnXL282fAsedIkWU1KlxQG/qKlqUV1KbQ5kafVpTalGqIc+dg+jNKlGfD9etw7rwmidKlE5dc2jNKylrDsX1kiWrlziyB69hQosW01qGbb3CZSjuFl26t+7iJYiKL99NWxcGtjpY4bpchw//WkzQseNagN1WTqgsc2bOA896RktNsuiF30wf7oVaoKrVaE+5FrxwrmxZymrvu4YbbTGFk6WONljtN13FtU0Vh5wwOdPlBC87py18H7XilHT+VX+NUJpzWdCF38aNCRxC60WxCzR3Pnh3gef24kb1nrzBX87dMtZ9AukCXmsGwUeUfLE5Jw2BBG1SnCcHdeUVWAXt4lwuEBIUDXjHGeTWQc05902HBEmH2yYHRcWUbgZh9ht3KAoEDogGLSWVUwWV+Js5SVXTiSKWmBLNQ7UUZ4pBQr2IVEG+yQbNQ+RUE80z1ABJUjWKEOKll5lU01B+K1aoE08YEiSjaQI2ZM40ysQZ5zNaisTJl3gSYko5DPVS5kSGySbmQuxUI+ehyiAYUjl55qnIKgyp+BlF0Mi2WVnPIIooOyM12igjISJ0jmpomRKZROtoeNguAyIkDjT+mmpKUiaeNppJmgYVY4opNFY0TS+9DIqQOnDGiug0JHnTZa15osLnS+xYY6ymz6hTUjWMMOsojyx9k+m0h0ZTJ0nloKJtnp08ixI71ICLqDWcphQNred62YlKxbqrzDTkuMRLtvXeglI3+ioDzYkwlbPKssxyglK74D5zTbwyeXNnww+DS421N0VTSa3clvSNsdH0+9S/eWaCL6IHL8ZLJoow4qxK0ULzzDQI16jzzjz37PPPQFM0jTNEF2000cgCtY46TDftNNOtbnSNJnnMYfXVWGc9Rx6a/AUTO+N4083YZJdtdjfejEOxRdNUrfXbWueRtEvriH323Wd7EzX+RZbA7XfWlsAkDt6Em50eRW7//TcfMNldeOE5V8SH4ooz/tI3jz8eOd+U/x34S4NnTvjhE7Xd+dtyw1S36HfrndE1oCTeeR6geA0tOY6L7g05a2s09NHAz33T0k8Xv3fQyCev/PLMN7+SKoSUMUcmTw58BwgUBIHJYqrMkcX33xOiEhAHlF8+CNs/5Use4LefhSooYWL+/AfEAP9N1ijivvuKoPQE/fSDwpRmMg5PlGF//PMfAOlHAT50IybdQ+D++HOSRSwQgOhziS8IIcH99S8l5Lsg/YJwP5SMIxMd3J8jqneSbvxPhPS7wwNNEg3vpRB8YyjhSjAxARjODwT+uyiJNQ54w+9RDybdsIMPzUeBAYrkD0XMwh/kMxBU3OEOoMAIJaAABYclBBoh9GEQSFJEOPhCIeE4wxDWOIQzhIMi3iDCBua4ASLgqiClAMESRzKOFI7hXgu5AxvZ2AiK6IGOdIQCQ/jQQxHOMCT6Q+AKGeKJQbLRCRQRASLpSAmGdCMMF3wCSaIxBvf94UgMCYcTLLnGLRwkGHVAAhLqEIyDzGCTcxTBHQ+yizCWbwJBHKUixpAHR5zRIY1g5RrvYJBp8EAF0FQBD4QnECjgco56eIgqwgCDCTwhmD+hhjLXSEGC6CGa0UyEQThxzTk+aGeCVKYrDfJMdErTlu3+VKTOZDHOIZSTIPaM5kHY2c5/QmgL4zzDKwMKzVoaRI7XrEGNMNFPcBIEFwxVAS4OQot2buCDBFLlOLN5EIwydKMHAUM7dQmhRIyzCYoqiEkDilKDSMOjcyDQLvqZvpJmtKYGUYRHe4WaeLJyC29EyEztCdSCeOOW19RnbZ7RT4PK9KcKIeg1iYoXlyqTmQpZKjqbahBrXjOntVGjMi3q05MupKNRFc44C7kQsUaTrAY55DWFo4ejJjWsWF3IU3EJBuE8owmDbMIzGmJXaOLVIL3QJB1FwFW8PCOed1gsYwPbJ7NCobKcCcdfGxKMjDrUId7YpfIy6jyL1BOdPGgqbUXOaU91yrZ0r5UmNW/7EFjKkpa8Da5wh0vc4hr3uMhNrnKXy9zmOi8gACH5BAkEAPkALAAAAAB4AHgAhwAAAAMDAwcHBwoKCgwMDA0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ4ODhAQEBERERQUFBUVFRcXFxoaGh0dHR8fHyAgICAgICEhISEhISEhISEhISEhISIiIiIiIiIiIiIiIiMjIyQkJCUlJScnJykpKSoqKisrKysrKysrKywsLCwsLC0tLS4uLi4uLi8vLzExMTIyMjMzMzU1NTU1NTY2Njc3Nzg4ODk5OTo6Ojw8PD09PT4+Pj8/P0FBQUJCQkNDQ0VFRUZGRkdHR0lJSUpKSktLS0xMTExMTExMTExMTE1NTU1NTU1NTU5OTk9PT1BQUFFRUVJSUlNTU1VVVVZWVlhYWFhYWFlZWVpaWltbW1xcXF1dXV5eXl9fX2BgYGBgYGFhYWFhYWFhYWFhYWJiYmJiYmJiYmJiYmJiYmJiYmNjY2NjY2VlZWdnZ2pqam1tbW9vb3JycnR0dHV1dXV1dXZ2dnZ2dnZ2dnZ2dnZ2dnd3d3d3d3d3d3d3d3d3d3d3d3h4eHl5eXx8fH9/f4KCgoSEhIaGhoiIiIqKiouLi4yMjIyMjIyMjI2NjY2NjY6Ojo+Pj5GRkZSUlJeXl5qampycnJ6enqCgoKGhoaGhoaGhoaGhoaKioqKioqOjo6SkpKenp6qqqq+vr7KysrS0tLW1tba2tra2tre3t7e3t7e3t7e3t7e3t7i4uLm5ubu7u729vb+/v8HBwcTExMXFxcfHx8rKysvLy8zMzMzMzMzMzMzMzMzMzMzMzMzMzM3Nzc3Nzc3Nzc/Pz9DQ0NHR0dLS0tTU1NXV1dbW1tfX19jY2NjY2NnZ2dvb29zc3N7e3uDg4OHh4eHh4eLi4uPj4+Pj4+Xl5efn5+np6e3t7fDw8PHx8fLy8vPz8/T09PX19fb29vb29vb29vf39/f39/f39/j4+Pr6+vz8/P39/f7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v////7+/v///////////////////////////////////////////wj+APMJHEiwoMGDCBMqXMiwocOHECNKnEixosWLGDNq3Mixo8ePIEOKHEmypMmTKFOqXMmypcuXMGPKnEmzpk2G2maNGjVL282fAr+F8kTUU6hvQG/WKloUV1KbQ5kafVpTalGqIc+dg6jNKlGfD9Olw7ow26dHj0Rlc5jNq6e1DbvdWrXqVjeyB7NNQot2Etyybv8q7BaLLt1Yd/ESJMWXr6WtgL0KRphulmHDwxQTbNxYFsO2khkau3xZ80BPnPlai2x1skFtpA3fMi3QVWq0olhLdV1wbuxVxmjny3Yb7TGFoFsrvPabbmLaooo/Tph8d8LKzWcLz2et+CNb1AP+J3TWfNVz4bZvT+KGsDpT3vnElQ++XeC5vbdJtRd/cFjzWGPVJ5At3q1mkHtF8QZbc84ISJAlxX1yUFdegVVQLc3N4iBBznh3nEFuHcRccxZumE90t1lyUFRMhXKQZb9pZ6JA3Hho0FJSOVXQiL+Jk9Q1nhAiiSjQPCRLcbkVJFSLSPXWnDIPeRONMsVA4yNJ1xDix5ZbVnJNQ/elOKEsO8lS4kAwkgZgQ+I4E8ybbxZzpUibcGmnH6LMmVAwYk5UWGxfLpRONHAWGkyRIolz552EwMIQip1RpExsmS2ETTGGGhpgSIsuisiHCJ2DGl+iQCZROhgaVsumB21zTKb+mZJUSaeLVnJmQceIIkowGEVzyy2BIoSOm7Aa2uBI2mhJ652l6MlSOtYUmykx6JR0DSLLMsqLS9pgKm2hyjibKCnZ3umJuCSlA823hlrDqknQzFrulp6oRCy7wTjjjUu8YDsvLShlg28wx9y6kjiwKLvsJiit+y0x2Lz7kjZ1Ltzwt9BUexM0ktC67UnaFKvMvk/1e2cl9hpasGK8VEIIIqSgOxK0xxDjjMEz5qzzzjz37PPPD03DzNBEFz30NEmho9XSTC+tMUfaXAIHGlRXbfXVaMBxCc4qpaPNNdSELfbYZFNzjTYSTzTN1Fi3jTUcSL+EDthl1132NU9XNIn+23xfPQlM2tgtONlcP8R2333jARPdgw+ODUZ4II644i9h03jjj1+0t+R8/z3x5YMX7tDanLcNN0xzg1433hlpE8rhnMMRiugnpbMN46Bfs03aFwlt9O9x/6R008TnDfTxyCev/PLMsxSLIFi0YUmTKaWjFTq8/xRLG0x0370gKqFTzvjjn5P9TMbE4f36TMSCUjrkx18OOur8lM0h7LNvCEriyx8/Ou+giVCwkD/98c9/8jOfTLZXwPzpp3YI9J8CW2IMQTQwf/tLSf8i+L/6peQblrhg/iRBvQNyUH7n8wg0uCdC713BfS2x3gnjd44AkiQbBGxh96YXE/jNsHz+NhSJBXUoCPgIpBRveIOLNFeEIoBCIe/Y4AmN9xEdsoE+COkGF2zARRtw4TwQ2YYOEkDGBOhgGwpRxzl+OJJviPAKS1TIG7rYRUhQBA9lLGMRGCJDDpLEEA0kIUNCQccuBoEiFMhjGT23ECn+jyTQuAL7BIGohXQjCIXkIhQOggw38IAHbkDGQVCgSDJSAI0MiWICgygSaBjiCnGQBBYZAolMcvENBrEGDD7Ayw/AwEAEIUIpyUi5hqgDHUoDYFKwYUsulsIgdehlLwthEFAMk4zR2NkcbblJg7xAmryEwSivuceczaKZNnimQcDZy4NY85rqNBEUmrkFTrKTl6L+NEgOrrmCGVkCnbwyiC3u+QHwGGQW10zAITZ0yWbWASEDvadBDXKFa57SQYVoJhAyJ1CCTrQg0UioGwQUDHSqCKIeTcghElqM+mwzk1AAI0Eiys6PFmQbpBxmOWnTDHTG8yA0BadNC/LOYbaUNhm1JS4VElRpDrUgwhzmSGmzhWYGNCFN7eVTCYLQYRJBOM2040KyysutEgSPwxROHWAq045KlCE4LeUVhNMMINARCM1oCFkL2pBiJLKMFDgqT7f5hrzqNaV9jSoRBLudbrQ1IcggaD4dsg1UNi8fBL1sRb4JzhdoliLRBCc1PysRa3CWly8AJmkh0skd7CCUq40UrWxnS9va2va2uM2tbnfL297mLCAAIfkECQQA+wAsAAAAAHgAeACHAAAAAQEBBAQEBwcHCgoKDAwMERERExMTFBQUFBQUFRUVFRUVFRUVFRUVFRUVFRUVFhYWFxcXGBgYGRkZGxsbHR0dHh4eHx8fICAgISEhIiIiIyMjJCQkJSUlJSUlJiYmJiYmJycnJycnKSkpKioqKysrKysrLCwsLS0tLi4uLi4uLy8vMDAwMTExMjIyMzMzNDQ0NTU1NjY2ODg4OTk5Ozs7PDw8PT09Pj4+Pz8/Pz8/Pz8/Pz8/Pz8/QEBAQEBAQUFBQUFBQ0NDRERERkZGR0dHSEhISkpKS0tLTExMTU1NTk5OT09PUFBQUVFRUlJSU1NTU1NTVFRUVFRUVFRUVVVVVVVVVVVVVVVVVVVVVVVVVVVVVlZWVlZWV1dXV1dXWFhYWlpaXFxcXl5eYWFhY2NjZWVlZ2dnaGhoaWlpampqampqampqampqampqampqa2tra2tra2tra2tra2tra2trbGxsbW1tbm5ucXFxdHR0d3d3eXl5e3t7fX19fn5+f39/f39/f39/f39/gICAgICAgICAgYGBhYWFh4eHioqKjY2NkJCQkZGRk5OTk5OTlJSUlJSUlZWVlZWVl5eXmZmZnZ2doaGhpKSkp6enqampqqqqqqqqqqqqqqqqq6urq6urq6urq6urrKysra2tr6+vsLCwsrKytLS0tra2uLi4ubm5urq6vLy8vb29vr6+v7+/v7+/v7+/v7+/v7+/wMDAwMDAwMDAwMDAwMDAwcHBwcHBw8PDxsbGycnJzs7Oz8/P0dHR0tLS09PT09PT1NTU1NTU1dXV1dXV1dXV1tbW19fX2NjY2tra3t7e4eHh4+Pj5ubm6enp6urq6urq6urq6urq6+vr6+vr7Ozs7e3t7+/v8PDw8fHx8vLy8/Pz9PT09PT09fX19fX19vb2+Pj4+vr6/f39/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/////////v7+/v7+/v7+/v7+/v7+/v7+/v7+////////////////////////////CP4A9wkcSLCgwYMIEypcyLChw4cQI0qcSLGixYsYM2rcyLGjx48gQ4ocSbKkyZMoU6pcybKly5cwY8qcSbOmTYbYVGHCpArbzZ8CvVmaRHSSJW9Ab7oqWpRXUptDmRp9WlNqUaohy5WDiM0qUZ8PzZnDujBapUKFLkVzGM3rpLUNt90KFerWNrIHoyVCizYR3LJu/yrcdoou3VN38RLUxJcvo62AvQpGaC6VYcO9FBNs3FgVw7aSGfq6fFnzwLOc0TqLbHWywWqkDd8yLdBUarSXWEt1XXBu7FC+aO+LdhstMIWgWyt89ptuYtqXij9OmHx3wsrNZwvf56x4Ie15A/4nRNY81HPhtm8nOk+wOlPe+8aVD75dYLm9tzUhdF8Ufq/mpoxVn0C3eLeaQfwRxRtszSEzIEGMFFfJQV15BVZBrTSXyoMELePdcQa5dRBzzVXDIUHR3cbIQVExZclBlv0G3on7bPOhQUtJ5VRBJP42TlLQVKJHIpg085AqxeVWkFAuItVbc8E8xA0zv/BizDclQaPHHFxyyQg0Dd2nIoWpXHJJKhcSFCNpATb0TTC3xBknL1iOVEmXeM6BCTkM9TLmRKb89gxD5jAj56G3GDMSOXnmqceGC6XYGUXBxJbZQs/wgiiiAobUaKN/RJlQOajhBplE5mRoWCudHpSNL/6bbkoSI582ykg2CgFj5qUWNRPnoKPCGSuiooqUzZa15jkKny+Z48ywm/JyqkjQ+JGso7yuJI2m0B76S50lkTPKtXlWwixK5hjTLaLOtGpSM7SSy+WEKQm77i3BcONSL9bK+wpK0Nx7iy/SxEROKsgmS69J6nbLyzPuvpTNnQqj1PCwxkxLUzOJ1JotSdIM+4u+T/Gb54r1IkqwYr0woocfy6rkrC+8BFMwjTjnrPPOPPfsc0XOICP00EQLfeBP5Yyj9NJMK61xRtVMQgYWVFdt9dVYkDGJiTGZEw0zRYddNDPRRDyRM1NjrTbWZBzdUjlgiy030cw8LZEia+d9tf4iMEEz999Dg3nRGHoXjsUcMMUN+NxGXtSG4Xq3AVMzi//duEV4Q7423y/5XbncglvkDOGaXz2G2yzB/XnYdUN9Cemaj3EJ1zCZI43ilTMjjdkXOWPM78AH/zvqNSXd9PF2/6z88sw37/zzKamSRxJgRALuSe+Es4023CT/kypg/CC++HmoxA026KO/jfczAWPG+PD/4NlJ5aRvPzbb8A5TNH7EH38fKPHG/e7njXPQ5BuXSIL//hfAAd5PG+N4R0zAt0D/hQIl9XPg/dbnEmDkoYL+A2BKzqfB+3FDfyH5RiRA6L9EXM8k7xBgCe8XDgm+K3wsHF8S5pc6bczQfv7bMCBJoqHAHIrvES9cSfZ+mD5tCFEkHzRiHuAjkFKQgQyYMMk5SPhDkonEiGAAEUK6EQUTmNEEUeiGScyxDSaO5BssTIKSFEKGM54xESgZhw9LaMOQ9KGCLmTIJex4Rhqk5B3f0KCTRNKMIo4vD5dTSDdoQEgzEuEgxBjDC14wBmJ4ZIsPfCIj+5AEMyRCjAxJRCXNSAaDPIMDDYhlAzgArI6Y4xvbKyCQVmnGUhjEDrKUpQihN5A6rvKSBtlAMGPJAWIOpBW8NIEvDbJMWTpTIETg5RMwWc1YepKYk4gmfQrCi242YEfPmyQv74CQcnYTnc7rAy9nEDpymhOezJzzRTQnkRB3VhOfyzNmJYmgxnbe83nLiOY0DfrO58lzla1UiD+XCdCfPYGX42ToP5/HSzwuZKLBrKjP7jDQgkr0oM5bxgzsOINlNASkshSpz5ZhTDK49KUohV43TNoQYpjzm9eEiDmDKhFlLnMDRI0IMJc5zKQ25BlGjeUGaunUno7BBS7oZFW3ytWuevWrYA2rWMdK1rKa9awiCQgAIfkECQQA+QAsAAAAAHgAeACHAAAAAQEBAwMDBgYGCAgICQkJCQkJCQkJCQkJCQkJCgoKCwsLDAwMDg4ODw8PERERExMTFBQUFRUVFhYWFxcXGRkZGhoaGhoaGxsbHBwcHR0dHh4eHh4eHx8fICAgISEhIiIiJCQkJSUlJiYmJycnKCgoKSkpKioqLCwsLi4uLy8vMDAwMTExMTExMjIyMjIyMjIyMjIyMzMzMzMzNDQ0NDQ0NTU1NjY2ODg4OTk5PDw8Pj4+Pz8/QEBAQUFBQ0NDRERERUVFRkZGR0dHSEhISEhISEhISEhISEhISUlJSUlJSUlJSUlJSUlJSkpKSkpKS0tLS0tLTExMTU1NTk5OUFBQUlJSU1NTVVVVV1dXWVlZWlpaW1tbXFxcXV1dXV1dXV1dXV1dXV1dXV1dXl5eXl5eXl5eXl5eXl5eXl5eX19fYGBgY2NjZmZmaWlpbW1tb29vcXFxcnJycnJycnJycnJyc3Nzc3Nzc3NzdHR0dHR0d3d3e3t7fn5+gICAg4ODhYWFhoaGh4eHiIiIiIiIiIiIiYmJiYmJioqKjIyMjo6Ok5OTlpaWmZmZm5ubnJycnZ2dnZ2dnZ2dnZ2dnp6enp6enp6enp6en5+foKCgoqKipaWlp6enqampqqqqrKysra2trq6usLCwsbGxsbGxsrKysrKysrKysrKysrKysrKysrKys7Ozs7Ozs7Ozs7OztLS0tLS0tra2uLi4u7u7vr6+wcHBxMTExsbGx8fHyMjIyMjIyMjIycnJysrKzMzMzc3Nzs7O0NDQ0NDQ0dHR0tLS09PT1dXV19fX2dnZ3Nzc3d3d3t7e3t7e3t7e39/f4ODg4eHh4+Pj5+fn6+vr7u7u8PDw8fHx8fHx8vLy8vLy8vLy8vLy8vLy8/Pz8/Pz8/Pz8/Pz9PT09fX19fX19vb29/f3+fn5+/v7+/v7/Pz8/f39/v7+/v7+/v7+/v7+/v7+/v7+/v7+////////////////////////////////////////////////////CP4A8wkcSLCgwYMIEypcyLChw4cQI0qcSLGixYsYM2rcyLGjx48gQ4ocSbKkyZMoU6pcybKly5cwY8qcSbOmTYbUQjVqFIrazZ8CrS06RPTQImtAb8oqWrRWUpuKmBJd9LSm1KJVQ5YrB5HaVaI+H547l3XhNEV37jCa5lDa10PSHFabZcnSrGplD07jkzYtH7YM3X6Ny7Daprp1N+HNSxBT376AuC4UfJWwwnOfECOmxZjg48eiAr+1nNCWZs2dB6L9nFbZ5NFmTyOWlVogJ9ZpGb0evFCW7Lq2auebhjutL4WUpZI2qOx33cW1GRWPnDA50+UEMTunLTyfsuJ3Zv5Vh41QmHNL0IXfxs0nPUHrRbELBHc+eHeB5fjixoQQPlH5+dDi3CZk3SfQLOC5ZpB/cOl1njAGEgRIcYoc5NVXYRUkinOeREiQMeAdZ9BbBzXnHGAeCiQdboAcFJVUFRrkyXYpElRNiAYtJZVTBZn4GzhJRbOIG304gsxDohSnW0HWvEiUIkgV5NtvvTxEzTC2zPILNiVF48YZYIIpSDQN5ceihTrxlCFBM8pGYEPY4OLKnHPOwuVIioSp5xmOkMOQLWdOdJhsCiqEzjB0JurKLyORs+eeboS20IqgUdSLbJwtlMwsiiqKzkiPPnoHMAqVs1pukkl0zoaIiVIgQv7T1NJppyQFEuqjgqxpkC+MMGKfRcfIIkuhB5Uj56yK4kISNV/euucmfr6EzjHIdjpLqiJFQ4ezkP66kjScVpuoLXeWRM4m3O65SLQoofOLuIoe82lKyNiaLphUpXQsvK7gomtKtmx7r3gnNcOvK7UAmBI5oTTrbIwmvSvuLMnMKxM1eT6MksTI/oItTcjwcau3JEmDrC3/2hTwnoGotO+cCTNmSyBu0AGtStPWMgsuCtfo889ABy300EQ3tEwxSCetNNLLJEXONlBHLTXU7G50FhZLZK311lwvgYUiKL50TjPA9GL22Win3Qswzbxq0TJYdy1311g0/RI5Zautt/7awFRN0R9zB871HzAls/fhaSeDUdyCC74GTHkjjvgwGK3ReOOPvzSM5JJTfhHglwdO+EuGc3644hfBHbrcdcOEt+l6953RNI0wHjoWjYTt0jnRRG46MNG4rdEyxBRv/PHF2/3T01M373fR0Ecv/fTUV78SKm30MIUi26i0TjXSRDMNkHmhMsUM6KPfhkrTNOO++9KQn9QvW6Rv/wyooATO+/w3M405PyHO/e5HB5RQo3/9o0Y6aLKNRvRggAQ0IAL7Fw1rrCMm5oPgADeBEmxMEIHxc8kv2qDBARYwJe37YP/+p5JtKKKEA/RD91KyjgOqsH/VuKBJknE+GKaPB/75awk4oHFD/klDeCCZxgN9iL5EzNAl3yvi+6KxwJGQkIlt0F1BPJGFLEgCI+jYShURko4UFlGLHmGiFBiVEGwsgQNw5MASyiWRcoDjjuD4mEHIIQ0pjmQbMORBIxiShTjG0Q8UOQce8ahHg1iDiCrUYUjooEEZMuQRhoxjCigijkXi0WIJqeEHU9aRZPDgfm1A3UKwkYJMwjEHBxlGFkpQgix4riDk8OQdxeGQc5jRfdBA4keSQQceaMEPbGyIH1wJxywYBBoVOIA0D1ABaBjEjroEhzARYg5qTAMa1NimTKTBTDh2qCBtmOY09WCQdGTzju8AWiGZCUuDRFOd1P48SC6z2cj7zKKcHDhnQfA5zYO4853q8FkOymmEWBJUmrckCDZ1+bzuKAKgyjKILR56AJIJRB3v1KaHWFlONiBkow/1qEDM8U5eRogO5UQBgFBKUJXm4x0hFWdZcAFQiGmUozbNhyLfKcnazNOVOaBjQWiKz6DmY5+67GdWjgFQgR6Eqep06kGzWVTGwJSZzlQIVqfp1HxM1JM6TYoRypnR0gB1ISDlp3DKiciFjFWaZRXqO4XDBqQq9apvZQhU8QjA2hwDBYZEwTEacteONmQdncSjOLrKmGPMMwuLZWxgGbIObJaDsqnBxl8VMgyORtR6EeEoaityT3VWYLUUSSwnPtkJW4lA07XWrK1EhoEFEpAAC6fVrXCHS9ziGve4yE2ucpfL3OY610ABAQAh+QQJBAD3ACwAAAAAeAB4AIcAAAABAQECAgIDAwMGBgYJCQkMDAwQEBARERERERERERERERESEhISEhITExMTExMVFRUXFxcYGBgaGhocHBweHh4gICAhISEiIiIjIyMkJCQlJSUlJSUlJSUlJSUlJSUlJSUlJSUmJiYmJiYmJiYmJiYnJycnJycoKCgpKSkrKystLS0vLy8xMTEzMzM0NDQ2NjY3Nzc4ODg5OTk6Ojo7Ozs7Ozs7Ozs7Ozs7Ozs8PDw8PDw8PDw8PDw9PT09PT0+Pj4/Pz9AQEBAQEBCQkJERERGRkZJSUlLS0tNTU1OTk5PT09PT09QUFBQUFBQUFBQUFBQUFBRUVFRUVFRUVFRUVFRUVFRUVFSUlJTU1NUVFRWVlZZWVlcXFxfX19hYWFjY2NkZGRlZWVlZWVlZWVlZWVlZWVmZmZmZmZmZmZmZmZnZ2doaGhqampubm5xcXF0dHR2dnZ5eXl6enp7e3t7e3t7e3t7e3t7e3t8fHx9fX1/f3+CgoKGhoaKioqNjY2Pj4+QkJCQkJCQkJCQkJCRkZGRkZGRkZGRkZGSkpKTk5OVlZWXl5ebm5uenp6hoaGjo6OkpKSlpaWlpaWlpaWlpaWmpqampqampqampqampqampqampqampqanp6enp6eoqKirq6utra2wsLCysrK1tbW4uLi5ubm6urq7u7u7u7u8vLy8vLy8vLy+vr7AwMDCwsLFxcXIyMjKysrMzMzOzs7Pz8/Q0NDQ0NDQ0NDR0dHR0dHS0tLT09PV1dXX19fa2trd3d3g4ODh4eHj4+Pk5OTl5eXl5eXm5ubm5ubn5+fo6Ojp6enr6+vt7e3u7u7u7u7v7+/v7+/w8PDw8PDy8vL09PT29vb4+Pj6+vr7+/v7+/v7+/v7+/v8/Pz8/Pz8/Pz8/Pz8/Pz8/Pz8/Pz9/f39/f3+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7///////////////////////////////////////////////////////////////8I/gDvCRxIsKDBgwgTKlzIsKHDhxAjSpxIsaLFixgzatzIsaPHjyBDihxJsqTJkyhTqlzJsqXLlzBjypxJs6ZNhsko/flDKdnNnwKl9clDNE8faUBviipatFRSm0OZGn1aU2pRqiGvXYOYzCpRnw+xYcO6kBifNGn+EHMYzGueYA6biTp0SFQzsgeJvUGL9s1ahm29wmXYjBFduozu4iXIiC/fOVsXBrY6WCE2R4cPk1pM0LFjUIDdVk6IKnNmzgPPekYLTLLohcVMHxaFWqCj1Wj/uBa8cK7sQ6hq3yOGG20shZOljjb46zddxbX/FIecMDnT5QQvO6ct/B6w4mk2/iO0XhT7QFnOD0EXfhv3G2fjXx+slj54d4HX3BRnFJ/3QVLOMTLWfQKRAl5rBpFHlHmxOScLgQTJURwfB3XlFVgFaeKcIxASZAt4xxnk1kHNOVdMhwRJh9scB0XFVB8HYfYbdygK5AyIBi0llVMFlfhbNUkF40cXbyjSy0OgFKdbQUK9iFRBvskGy0PMyGKKKLBAU1IwXVThpZd6mGdQfitWqBNPGBIko2kCNgSNK5rEGacoWo7Ux5d4VqGINQyxgpscFBkm2y8MZSOLnIhqMqVI1uSZZxegLaTiZxTBIpt4CvUiSqKJZjOSo46u8WBC16iWW2QSYaPhYZoMiBAx/qRwyilJeYDqqB7MKBTLTqxgZIsoohCakDVwypporyMx06WteTrC50vZ1GIsp6I8O1IwazD7qCsuBbPptIiaUmdJ1jiibZ5+WHtSNrCAm2gtnqbUS63neumHSqy4KycrubbkSrb1YlrSL/pqQoqYKVkDyrLMwnhSu+CK0ku8MjFzZ8MoQWwsLOrS1MsbtnJ7UjDGmtJvUv/mmQe+iR68mCt5dLGGsypFS4oorCBc48489+zzz0AH3RAwthRt9NFFI/iTNdI07fTTTXecUTJ9HMHD1VhnrTUPR/SRpkvY/AILK2SXbfbZrMDyi6sWAWP11nBvfYTSLVkzNtp4o80x/kZyxO231oC+tEvehJ+9C0Zv//33FjC9UvjjrIRokRaKK64FTLFAXrjkFfVdud+BuzS45nkffpHbn8M9N0zWOE762a9IPVEyhyT++RGHfN0SNsC4TvorwLCtETC1FG/88cXTbZM10DTv/PPNyy709NRXb/312KckShcvENEHkCmFk8wvvgQzLlaiEEHC+ut3oVIwu8Qf/y/n/yQLE+znTwKNJUEj//+7AIb0YFKMNuhPf21AiTAACEBhUCwm1VDECw6IQAUyEIC+WEY4YpI+Ch7wEShpxgUZSD+XyKILHjxgAlMCvxECMBgDDEk1+pDCA8YBfCgJxwJdCMBkbNAk/r9QXw3Z5wL+qQQavuDh/9ZWkmJMcIjr+x5MwnEMJcrPFw8ECQqh2IUTJYQSSUgCfy5iDWc4A1UHyUYLlagzjUCRCKNCCDWAoIA6KgAI1KDIOpqRjD4moxnrUEg1fmHFkVSjhi5IBEOSYEc7hi4i1fCjH+GzkGUk0YU/DIkBKXhDhjCikXa0AEWWIUk/xlAg4SDGCIVBkl+4QH9dENZCqGEBUNaRBQgxhy7NgRA+ljIZywgkQ7Cxxvj5Qngg+UUbXKCEOMSRIXKwZR2TcBBzhOOa4eClQZzxyz7ikCHWIAYwfCEMZNJkGNKsIyUMsg5sYlOYBLlGN/uYyRoxUpq4/jSINd2ZzYP48peUrFEp0qmAdRqEn9g8iDznac7usCCdP0AIQq/Zy3muh0B+IOiiDjpRhGRjnsk4JVlomU73SbSjCIHGPIMJoTak0wLDSMhE61kQ8c0zj/eBBUHvJVOUIsQaIOXGfe5pSxbg9KQIVcge5xlQ1PCCoAbtaVIVstBuCrU2LpUmNRcyU4Zws5tH5cwP0rlRqfKzUEwVTjofaVZ3NiSS3RROF4oa1rYmlCFLLWX98MKLWoaSFw7pakO4QUo/LuOqteHFPZMA2MD6lCHc+KozENsdatSVIYJ9yDrgmb3MZm8i+3SnNj87kXbyk7OkjUho+5naiuxytK2NFK1sZ0vb2tr2trjNrW53y9veXi8gACH5BAkEAOwALAAAAAB4AHgAhwAAAAEBAQICAgMDAwQEBAQEBAQEBAQEBAQEBAUFBQcHBwgICAoKCgwMDA4ODhERERMTExQUFBYWFhcXFxgYGBgYGBkZGRkZGRkZGRkZGRkZGRkZGRkZGRoaGhsbGxwcHB0dHR4eHiAgICIiIiMjIyUlJScnJykpKSoqKisrKywsLC0tLS4uLi4uLi4uLi4uLi8vLy8vLy8vLy8vLzAwMDExMTExMTMzMzQ0NDU1NTY2Njg4ODs7Oz09PT4+PkBAQEFBQUJCQkNDQ0NDQ0NDQ0NDQ0NDQ0REREREREREREREREREREREREZGRklJSUxMTE9PT1NTU1ZWVldXV1lZWVlZWVlZWVlZWVpaWlpaWlpaWlpaWlpaWlxcXF1dXV9fX2BgYGNjY2ZmZmlpaWpqamtra2xsbG1tbW5ubm5ubm5ubm5ubm9vb29vb3BwcHJycnR0dHh4eHt7e39/f4GBgYKCgoODg4ODg4ODg4SEhISEhISEhISEhIWFhYeHh4mJiYuLi46OjpGRkZSUlJaWlpiYmJmZmZmZmZmZmZmZmZmZmZmZmZmZmZqampqampqampqampubm5ubm5ycnJ2dnZ6enqCgoKKioqSkpKampqioqKmpqaurq62tra2tra6urq6urq+vr6+vr6+vr7CwsLGxsbKysrOzs7W1tbi4uLu7u76+vr+/v8DAwMHBwcLCwsPDw8PDw8TExMXFxcbGxsjIyMnJycrKysvLy87OztDQ0NPT09XV1dfX19jY2NnZ2dra2tra2tvb29zc3N3d3d/f3+Hh4ePj4+bm5ujo6Ovr6+zs7O3t7e7u7u7u7u/v7+/v7/Dw8PLy8vT09Pf39/r6+v39/f39/f7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v////////////////////////////////////////7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v///////////////////////////////////wj+ANkJHEiwoMGDCBMqXMiwocOHECNKnEixosWLGDNq3Mixo8ePIEOKHEmypMmTKFOqXMmypcuXMGPKnEmzpk2GxybRoTPp2M2fApnFaUO0TRxmQG9mKloUVFKbQ5kafVpTalGqIadNg3jMKlGfD6lRw7rQWBwtWvYYcyjMaxthDpNh2rMHUzKyB42JQYtWzFqGbb3CZZgMEF26gO7iJRiIL982WxcGtjpYIbVBhw9zWkzQseNLgN1WTmgqc2bOA896RttLsuiypg9jQi2w0Gq0e1wLXjg39h5TtNkZu43WlcLJUkcb1OWbrmLad4hDToicqXKCl5vPDs6uF3Etnaj+v0b4qvme58Ft3xajDGH1otcFRjMPnLvAaWGIB3I/3iCn5oCMZZ9AnXzXmkHvERWfMea9MiBBahAXx0FdeQVWQZI0N8iDBOHynXEGuXUQc839xaFA0d3WxkFRMTWhQZj5tt2JAinzoUFLSeVUQST6Fk1Sw8wBxRiA6PLQJcTdYZBQLiJVUG+xqfIQMq14cokqy5Q0DBRKdNklHMM0hJ+KFOrE04UExWhagA0tg8ojcMJ5SZYjzeHlnUoAEplCqdymBkWGxWbkQtW0Euehj0gp0jR44gkFaAul+BlFqsS22UK5XIIootWM1GijXcii0DSqoXXHnhFRk+FhkgiIkDH+mmy6KUlwfNooHOgZ5Modd6SCkS2YYDIoQtK8KSuip5CUDJe24kkIqixVU8uxm1oijZZdNOuory39oim1h3pCZ0nTEKItnnNAW1I1qoCLKC2dpqRLred2OYdKp7gb5ynIuJRKtvV6gtIu+j6iyS8xTXMJs83ee1K74FqSS7wyJWNnwyhBfKwq196kixi2cmvSL8d60u9T/+IJB76IHrxYKnBA0cWzKlVDiyaWnIIwjTz37PPPQActdEW+4GL00Ugb7UtS0Sjj9NNQO/1jR8jM0YMMWGet9dYy9DDHyTBNkwsqopRt9tloi4JKLupO5MvVXMfNdQ9LvxQN2WnnnTb+KlNb5IbcgG/tBky16G042rVgBHfggTsBE96HHy5yRU4wzrjjL6USeeSTU/S35YAP/lLhmxue+EVvgx433TDdXXrefGeEDCCLg94DIGC/NM0ukJeOyi5to5708LjU/VPTUSff99DMN+/889BH39ImUZywwxzLm2RNMbjUskuuT22yQwfkkx+FSrvIor76uIBv0yxNlC9/B5uglMz6+MuiS8c2HRPG/PMDA0p6kb/89cJVMYlGIE4AwAAOsID5q8UxrBET8TUQgI9ACTIgWMD2uWQWUbggAAWYkvRxMH+74N9JojEHEQKwDdkriTUIeML8FYOCJuHF+FxYvhPUryX+yahFDfGHi+B15BgM5CH5sAeT7Q1xfbVAIEhCqMQooMkgliACEQSBEWgc4xgqNAg1TDjEXZBEiTqYhUKggQMDuNEAOIAGRa5hjGDYMRjGuIZCmIGLJ44kGi48ASAYEoQ3vvENFFHGHe94RQoJ8YQ4DAkYLghDhgjCkG+MAEWIscg7ynEh1ggGBw8kEl4ksXxR4EVDoBEBTLqRBAexxjSkIY1pRJIgxeikHYmhR4bsLoJG5AgvwHCCJrRBjQ55gyvdGASDXCMa0IgmNKLRS4IcQ5d2bI9DpBEMXdSiF8GESTGW6UZLGGQa0pSmFNnBTWwGg2I0KuQyYWkQaKZzmgf+ySU2GzkgUpDTAOY0yD2leZB2YjOcnCEBOW8Qy4FG85YDqSM2i0EjOvyzFQephkOhAc+BUMOdwXDSgFhJzvNldKMdHQgy3MnLB4WBnBCg6EkdmlKBVAOk7ltMK/5Jh4RolKYJYQZI17kYebqSBJ+c6UBrKpBr6FOX/CSLLv4ZUIT8dKkKMaguiYqVly6zmQq56j2ZOpBrYjOnVLkBOTEaVpQu5KP7DA45EUkoty5EkdgMThSOmlSf2lUhTtVl7hajCwgYEgLDaitQGUINTt6RGFzFii7kGYTEKharDaGGWY8RWbxEEyLW2ChEF3KNakpvo9KziD3TGcPUPgSd9+wlrGsBu9ppmna2oJ1lLUeL29769rfADa5wh0vc4hr3uMhNLvMCAgAh+QQJBAD1ACwAAAAAeAB4AIcAAAABAQEDAwMFBQUGBgYKCgoLCwsMDAwNDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0ODg4PDw8QEBASEhIUFBQXFxcYGBgZGRkbGxsdHR0eHh4fHx8gICAgICAhISEhISEhISEhISEhISEiIiIiIiIiIiIjIyMkJCQlJSUmJiYoKCgpKSkrKystLS0uLi4wMDAxMTEyMjIzMzM0NDQ1NTU1NTU2NjY2NjY2NjY2NjY2NjY3Nzc3Nzc3Nzc3Nzc4ODg6Ojo8PDw+Pj5BQUFFRUVJSUlLS0tMTExMTExNTU1NTU1NTU1NTU1NTU1OTk5OTk5QUFBSUlJUVFRWVlZZWVlaWlpbW1tcXFxdXV1eXl5fX19fX19gYGBgYGBhYWFhYWFhYWFhYWFhYWFiYmJiYmJjY2NkZGRmZmZpaWlsbGxwcHBycnJ0dHR2dnZ2dnZ2dnZ2dnZ3d3d3d3d3d3d4eHh6enp9fX2AgICEhISHh4eJiYmLi4uMjIyMjIyMjIyNjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2Pj4+QkJCRkZGTk5OUlJSVlZWXl5eYmJiampqbm5ucnJyenp6enp6fn5+goKChoaGhoaGhoaGioqKioqKjo6OlpaWnp6epqamsrKyurq6xsbGzs7O1tbW2tra2tra2tra3t7e3t7e4uLi6urq9vb3BwcHFxcXHx8fJycnKysrMzMzMzMzNzc3Nzc3Ozs7Q0NDS0tLU1NTW1tbZ2dnb29vd3d3f39/g4ODg4ODh4eHh4eHi4uLi4uLi4uLj4+Pk5OTl5eXm5ubn5+fo6Ojo6Ojq6urr6+vs7Ozu7u7v7+/w8PDy8vL09PT29vb39/f39/f4+Pj5+fn6+vr6+vr7+/v7+/v7+/v7+/v8/Pz9/f39/f39/f3+/v7+/v7+/v7+/v7+/v7+/v7///////////////////////////////////////////////////////////////////////////////////8I/gDrCRxIsKDBgwgTKlzIsKHDhxAjSpxIsaLFixgzatzIsaPHjyBDihxJsqTJkyhTqlzJsqXLlzBjypxJs6ZNhsMauXHTaNjNnwKfoRlDdAyaZ0BvUipa9FNSm0OZGn1aU2pRqiGrVYM4zCpRnw+tWcO60FcaJUro+HLIy+sYXg6TRYoTJ1Iysgd9TUGLdspahm29wmWYzA5dunbu4iV4hy/fMlsXBrY6WKG1PIcPZ1pM0LFjSYDdVk4IKnNmzgPPekabS7LosqYPR0ItUNFqtHRcC144N3YcULTr+bqNtpXCyVJHG6Tlm65i2nSIQ06InKlygpebzw5eLxdxJU4R/lYven0gq+Zxnge3fXuKM/GvD0ZDD5y7wGp7b9+Bv/tgpuZ2jGWfQJ9815pB4xFVni/osTIgQWQQl8ZBXXkFVkGKNJfHgwTB8p1xBrl1EHPN/cWhQNHdVsZBUTGFxkGY+bbdiQI586FBS0kVHkEk+hZNUry4McQVd9jykCTE5VaQUC4iVVBvsZHy0DGrdOLIKO+RxMsQPHTZ5RnlGYSfihQyshMjFxIUo2kBNuQMKIPEGacjWYrEhpd48nAHNQyNchsZFBkWGy0MZbOKnIgOMspI1OSZ5xCgLZTiZxSREttmC8HiSKKJZjOSo44+4YpC1aiGW2QSWZPhYYoIiFAv/pNwyilJZ4Dq6BnKKNQKHXQsetErkURCaELUwClrovWJpAyXtuaZCJ8vZePKsZw2Au1IvDzR7KOluKTLptQiykmdJFGTyLZ5unHtSdmMEm6irniaki21otulGyoZ++4goBzjUina2rtjSbbsO4gkusREjSTMNssGSu6G2wgs8sqkzJ0OQxzuKOvSZIsVtnZ7ki7HcuLvUwDneUa+iSK8WClnDPHEsypJK0kjoCRM48489+zzz0AHXdEusRRt9NFF75JUNM007fTTTf/Y0TFsuDDC1VhnrfUILrBxMkzVvAIKJ2SXbfbZnIDyCqoW7WL11nBv7YLSL0UzNtp4ow2K/tQWmRH331qbAZMreRd+9qgXvQ044EHAdLfhhouCURCLL974S6JADrnkF/ld+d+Cv0S45oUj3rbin2c9N0x2k4733hkdcwfqlbtwx9cvVTPL46SDMgvbGu0Cy/DEFz883T8xDfXyfAvt/PPQRy/99C15UgQGLMQhjUrf7OJKK7Egs5gnLCxgvvlFqBSLKuyz74r4T7kCxPn0L+AJSsi0r78qrzRPUzBTqF/9poCSW+xvf7dwVUykgQcMCHCABTzg/lrRi2/EhHwPFKAjUBIMCR7wfS5xRREyKEACpmR9HtxfLPxXEmnEgYQCNMP2UvINA6Zwf7uwoElyUT4Yng8D/vdrCTJacUP9uaJjIAmGA31oPjfM0CXdK2L7WqFAkBCBiQsgQjAUEg5taCMcGHFGL3rBQuygsIixIAkTV2A6hGgDG3DEhjYqEo5d2OKOttgFGBPiDFdIcSTSgCEG8MCQN8YRjjqUyDHwiMdeMKQXRExhIkESwAfKkCHhOGQcKxYRXDASj+RCyDdy4cFbkCQXSzwfEQ5UKE3CkZMD4QY0lKEMaHDjILr45B1zsceFUOOM7GsFEj+Siylg4AdmaONCvuFKOM6xIOFARjGmWQxk9HIgvdDlHXG3kGjk4hWtuMUwZ4KOZsLxmgKJBjWp+cSBREObd3zmzgzpSlgKRJrr/qwmLuHpyJ2Nw5zYQKdA8klN+cDTFtPYWTbMKU+CcIOg07ylQeyoTZ1xiJnmHMdBsgHRYtizHtU4aK44tNBmStQgHIXoR4UDT14+iBvmzAY6EJJSgq5UGwfdon3+ac5JFqSm+VxpPZRx0Cpyhp6aFGo9gLpOoYYjl9rsJ23KaU6BEoSp1FTqO+FpVLLAtJkN3WhHlVqPbGpTp6hB6iE1qhCsTpOsIY1qcHpaqLEyZJHaDM5XD0lWgbjVo5iEKiNNxBl0lPSVM62rShtiDU/iERddJQs6DKmNxCrWpg6xhll7EdmgPRSiJ21IOKwKvY5SzyL4XCf8TjsRdeaznayFJUg0VUva2DKEG8+g5TNCa9ve+va3wA2ucIdL3OIa97jITS70AgIAIfkECQQA+wAsAAAAAHgAeACHAAAAAQEBAwMDCQkJCwsLDQ0NDg4OEBAQEREREhISFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFRUVFRUVFRUVFhYWFxcXGBgYGhoaHh4eICAgJCQkJycnKCgoKioqKioqKioqKioqKioqKioqKysrKysrKysrKysrKysrKysrLCwsLCwsLS0tLi4uLy8vMTExMjIyNDQ0NjY2ODg4Ojo6PDw8PDw8PT09PT09Pj4+Pz8/Pz8/Pz8/QEBAQEBAQEBAQEBAQUFBQkJCRERESEhITExMTk5OUFBQUlJSVFRUVFRUVFRUVFRUVFRUVFRUVVVVVVVVVVVVVVVVVVVVV1dXWVlZWlpaXFxcXl5eYWFhZGRkZmZmaGhoaWlpampqampqampqampqa2tra2tra2tra2tra2trbGxsb29vcnJydnZ2eXl5fX19fn5+f39/f39/f39/f39/f39/f39/gICAgICAgICAgICAgICAgICAgICAgYGBgoKCg4ODhISEhYWFhYWFhoaGh4eHiIiIioqKi4uLjY2Nj4+PkJCQkZGRkpKSk5OTk5OTlJSUlJSUlJSUlZWVlZWVlZWVlpaWmZmZnJycn5+foqKipaWlqKioqampqqqqq6urq6urq6urrKysrKysra2tr6+vsLCws7OztbW1uLi4u7u7vb29vr6+v7+/wMDAwMDAwcHBwsLCwsLCw8PDxMTExMTExsbGyMjIysrKzMzMz8/P0tLS09PT1NTU1NTU1NTU1NTU1NTU1dXV1dXV1dXV1tbW19fX2NjY2dnZ3Nzc3d3d3t7e39/f4ODg4uLi4+Pj5OTk5eXl5ubm5+fn6Ojo6enp6urq6urq6+vr7Ozs7e3t7u7u7+/v8fHx8vLy9PT09PT09fX19fX19/f3+Pj4+fn5+vr6+/v7/Pz8/f39/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+////////////////////////////////////CP4A9wkcSLCgwYMIEypcyLChw4cQI0qcSLGixYsYM2rcyLGjx48gQ4ocSbKkyZMoU6pcybKly5cwY8qcSbOmTYbMEJ05g4jZzZ8Cr3GhQpQKl2tAb1IqWjRTUptbmBLl8rSm1KJVQ377BpHZVaI+H44bl3Vhsi5ChKxJ5vDXVyq/HD5btHPRs7IHkyFJmxYJW4Zuv8Zl+KzNzp1t7uIl+IYvXyxcFwa+OljhODiHD19aTNCx40eA31ZOqClzZs4D0XpOq0uy6IXITB9ehFpgodVp17gWvJCu7DOaau9LhjttKoWTpY42eOv3TsW11xSHnDA50+UELzunLXyfruJCnP4itF4U+0BUzs9AF34bN5Jp418fzJY+eHeB3/bifhOf98FLzrVB1n0CZQJeawaRR5R5sTmHCoEEYVFcFwd59VVYBRXiHH8QDjQLeMcZ9NZBzTmHTIcESYcbFgdFJdUWB72xHYoETQOiQUtJJR5BJf6WTVLGrHEDE2/g8tAjxelW0DUuErUFUgX5JtsoDzFjyiWGcAIfScbcoMKXX3JhTEP5rVjhIWOMcQiGjP0mYEPTZKLHnHMasqVIaoCppwpvdMMQKGZOZJhstzA0jil0JqoHJyN1s+eeN1DCkIqfUTSKbJst9Iohiio6YEiPPnrEKgp9o1pukUk0joaHFfLpQf7GLNJppyRxEeqjXECjUCprrAEKRqwsskihCXEj56yK7hgSNDbc+qghfr40TirIdmoINyUZY4SzkJbiki6cVpvoJXeS1E0h3O65RrQojcOJuIqm8qpJuNia7pdKonQsvHpkwqZKpWx7r30m3cKvHosg+FI3lDTLrRoovSuuIa/M+xI0eToL8UkSI8sJtjfhssSt3p6kC7KX/HtTwHtSldK+cya8WClc2GBEIeyeNO0ihmSiMI1ABy300EQXbfREvNii9NJMK81LUthEI/XUVEuNjUfOqOGBBVx37fXXFnighjMyebMKJpSkrfbabFOCySreZMTL1mDXDbYHT7+EDf7abffdNiZXX7SF3YR/DeNLqPitONsPXkR34YXTABPfiy9OcEUzQA75DDBpUnnll1M0uOaEH+5S4p8r3rhFc5NeN94w7Z1634Bn5Mwbj5PuwRtkx+TNLJSnjskscXfESy3IJ6888nn/FHXV0Ad+9PTUV2/99dhnT5A5uqBiyivNaH/RK6CUXz4q4YsvUTPmtw+KKlCq75At7rtvizjyN0R//e2bMow5+VMIMvhXP/QFMCHkI6D7XhG/Aw7EHPtTYPt0AUAHEqQZppBg+1ABMgsKhHsaNJ8p8JcVcnSjGxaTCDR0oQtqKEQcCdTgK6oCD25g44bY4AY8KHKOXLzih/6vyMU5FBINVISwKt3AIQ7BQZFkABGIP0PIMDKowAr+ZBxKxKE2KFKLJwJRVwsxRy4IaIukwEMbWbzhNg4yjmckIxnPSOEtvPjDWgyRIdyIYflM0cGbgCONN8zZB48xjEIO4xhWHIgu6PjDvzTkGrlQhSls0UebpAOQNySHQaJhSEO6sCDUYOQPU0igJAJyjQYhZCcPSSJRRhFC5cAkNjRpkFUa8iChFOWPaLQNTFZSIOOwZSFT6ENGEqtD4pBlIgciDmEOg4QF6YYowdehM2KyeAZppjChWZBfiNKOEPoGJrWRDoRo05bczM40j0Egc8gynQQ55yrhOZBmTDNVtb0xZRq3sUNzOpOeAjnHHBn5SrygQ5a09Oc2FZJLRuJzMeIEpCCz+c+FLJKR7KyNDQG5TIouVCHSJKhwMMnEhcizkwAliBMZKRxv7LOfL6zoQgRKR/NkBR1o1CI6GnJSQ6aUIN/oIhBr8dDFoMOU3dgpT2XKkG9cVBdFRQ08YNqQYAqTlAg5xx2150wPMkSVncyoVxPCyVV+cqwIMQdYD9lRtGbHGW90BlbdSte62vWueM2rXvfK17769a9JCQgAIfkECQQA9QAsAAAAAHgAeACHAAAAAQEBAwMDBAQEBwcHBwcHCAgICAgICAgICQkJCQkJCQkJCQkJCQkJCgoKCwsLDQ0NEBAQExMTFRUVGBgYGxsbHBwcHR0dHR0dHR0dHR0dHR0dHh4eHh4eHh4eHh4eHh4eHh4eHx8fHx8fICAgISEhIiIiJCQkJSUlJycnKSkpLCwsLi4uLy8vMDAwMDAwMTExMTExMjIyMjIyMjIyMjIyMzMzMzMzMzMzNDQ0NTU1Nzc3Ozs7Pz8/QkJCRERER0dHSEhISEhISEhISEhISEhISEhISUlJSUlJSUlJSUlJSkpKTExMTk5OUVFRVFRUVlZWWFhYWlpaW1tbXFxcXV1dXV1dXV1dXV1dXl5eXl5eXl5eXl5eYGBgY2NjZ2dna2trb29vcXFxcnJycnJycnJycnJyc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3NzdHR0dXV1d3d3eXl5e3t7fX19f39/gYGBg4ODhISEhoaGh4eHh4eHiIiIiIiIiIiIiYmJiYmJiYmJioqKjIyMj4+PkpKSlJSUlpaWmJiYmpqanJycnZ2dnp6enp6en5+foKCgoqKipKSkpaWlqKioq6urra2tr6+vsbGxsrKysrKysrKys7OztLS0tbW1t7e3ubm5u7u7vb29v7+/wcHBwsLCw8PDxMTExsbGx8fHyMjIyMjIyMjIycnJycnJycnJysrKy8vLzMzMzs7Oz8/P0dHR09PT1dXV1tbW2NjY2tra3Nzc3t7e39/f4ODg4uLi4+Pj5OTk5eXl5ubm6Ojo6urq7Ozs7u7u7+/v8PDw8fHx8vLy8vLy8vLy8/Pz8/Pz8/Pz9PT09PT09PT09PT09fX19vb29vb29/f3+Pj4+fn5+vr6/Pz8/f39/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+////////////////////////////////////////////////////////////////////////////////////CP4A6wkcSLCgwYMIEypcyLChw4cQI0qcSLGixYsYM2rcyLGjx48gQ4ocSbKkyZMoU6pcybKly5cwY8qcSbOmTYa77nTpcmfXzZ8Ch0FJQjQJlGFAbw4qWhRRUptPmBKF8rSm1KJVQy5bBnHXVaI+H1KjlnUhLik3bnzB5ZDW1yS0HPras2XLHl9lD+LqkTZtD7YM3X6Ny9AXmLp1weDNS7BM375NuC4UfJWwQmprECMmxJjg48eDAr+1nDCRZs2dB6L9nDbW5NFmTyPOk1pgHdZpv7wevDCP7LqJatfDhTttJoWUpZI2SOp33cW1vxSPnDA50+UEMTunLbxerOI3gv4jtF4U+0BLzrdAF34bd49g42EfLJZefPd6y/jiXhOf90FCzn1B1n0CJQKeawaRR5R5uKRnCYEEMVGcFAd59VVYBdHhXBkQEiQKeMcZ9NZBzTkHWIcCSYdbEwdFJdUTB5WxHYoEBQOiQUtJ5VRBJf5WTFK2fMFCEmuc8tAgxelW0DAuEvUEUgX59lskD+kyCSF0OAIfSbaw8MGXX0ZhS0P5rVihTjxh2NhvAjYUzCFrxBknHVuK5AWYeH6wRjIMSYIbExR98RspDFkziZyIruHISMnkmScLnC2kImgURSJbpAp9QkeiiVozkqOO8vCJQsuslptkElGjIWJ0DIhQLf55cMopSVCA6mgU6xmUyRdfSILRJ3nkQWhCxsApa6KHkOTLCrY6agefL1lzybGc0mFMSbbw0OyjlLj0yqbUIjpInSQlY8e2eX4BLUrWOBJuopd4mtIptaL7pZIoGfvuGofo4hIl2tqrCEqk7LsGHq/ElAwhzG7rBUruhkvHJ/LK5MudzT58UsTHOnLtTacQYWu3J71y7CD+PgVwnlSlpG+cCDNGCRQr8PCsStLiQcchCdPo889ABy300ERXRAspSCetNNLmzUSML1BHLTXUxHjUyxcULKD11lx3vQAFX/QiEzKeFALI2WinrTYghXiCTEa0ZO313F5T0DRKxJi99v7eaxdS9UVQ0C141y27ZAnfiKv94EVyDz64CjARkvjkgOxoUQqOO54CTIhQnrjlFQWeueCFt3S453wvblHco89tN0zESI662oT8fVEvbzQ+OgVviB0TMqHIjjohobzdES2jJK/88snfHdPTU0dve9HUV2/99dhn39I21khDTTYrZdMKJZJ4knJZ21DjzPrrV3ySJ43EHz8l5wPFPfv4O7MNSrrI738jl4CSTchxjfzl7xooCcX//hcKZ9QkG9Iw4AETuMD/SWIW4INJ+iRoQG2gxBYVXCD9XHI/Dk4wJfAL4f88IUCUZMOEBsRG+BSowv+1IoMl4Yb6YMg+aeyvJf66iEQN/UeJj42EHBHk4fpw6BLxDVF+knDgSKyhRGdYgxwKccYwhrGuiuziFKf4RRZTOERPkESJ1PghQrgRjF24cRfB4AZFtEGKTdhxE6TwYEJ8QYknntGE0mAiQobxxjcaMSK2uOMdjbSQWQhRhYL0SAElKEOGJKOQb8zVQz6hyDuqCSHZIEUIQ0ESbiSRfdaQI0O44QtMulGT9aBGLmhBi1y4iiCh6KQdP6HHhRiDjPGLxCFDwo1rSMMa2FAjQ4zhSje2UCDZkEUrptkKWUTyFLq045gcMgxSXCISoRhmTbbRTDdKkSC7oCY1NfmLbNrRfSgiZDNhKU11VvMguf7MJiNpRI1y7uKcBLEnNQ/STnc+k0CtbCa5BkINgU7zlgMZhTtJiaJj+BOBBlmGQ1uBKoIUw52byEWHWFnO6RFEow7tKEFg4U5eQqgY5eyFMk+6UZUOxBogdV5WruHPYyQEpQK16UByAdIupkaervSFKg8CVHsKVSDayKcu95mabPgToBmtqUIKmk2j5gWmzTxoQZqqzqcOBJvZ1ClQ2thMjP5Uqwr5qD6FU05xZjWlDElkNoVDjKQu9a14XUhUdQkL4WSjF4XsRSSZCteFJIOTd/yEV/OSDXkOY7GMDawl0XqKyXaGG39lSEMdClHB9lJ7G9WeReqpTlmo1osChSXlaxsSzdZidrainWUtS4vb3vr2t8ANrnCHS9ziGve4yE0u9QICACH5BAkEAPkALAAAAAB4AHgAhwAAAAEBAQUFBQgICAsLCw4ODhAQEBAQEBAQEBAQEBERERERERERERERERERERERERERERISEhMTExQUFBUVFRcXFxkZGRsbGx0dHR4eHiAgICEhISIiIiIiIiMjIyQkJCUlJSUlJSUlJSUlJSUlJSYmJiYmJicnJycnJykpKSsrKy4uLi8vLzIyMjU1NTc3Nzk5OTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozw8PDw8PDw8PDw8PD09PT4+PkFBQUREREdHR0lJSUtLS01NTU5OTk9PT1BQUFBQUFBQUFFRUVFRUVFRUVFRUVFRUVJSUlRUVFhYWFtbW19fX2NjY2RkZGVlZWVlZWVlZWVlZWZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmdnZ2hoaGlpaWxsbG9vb3FxcXJycnNzc3R0dHZ2dnd3d3h4eHl5eXl5eXp6ent7e3t7e3t7e3x8fHx8fHx8fH19fX5+fn9/f4CAgIKCgoSEhIaGhomJiYuLi4yMjI6Ojo+Pj5CQkJCQkJGRkZKSkpSUlJWVlZiYmJubm56enqCgoKKioqSkpKWlpaWlpaampqampqenp6enp6ioqKmpqaysrK+vr7Ozs7a2tri4uLm5ubq6uru7u7u7u7u7u7y8vLy8vLy8vLy8vL29vb6+vsHBwcPDw8XFxcfHx8jIyMnJycrKyszMzM3Nzc/Pz9DQ0NHR0dPT09bW1tjY2Nra2tzc3N3d3d3d3d7e3t7e3t/f39/f3+Dg4OHh4eLi4uPj4+Tk5OTk5OXl5eXl5ebm5ubm5ubm5ubm5ubm5ubm5ufn5+fn5+jo6Ojo6Ojo6Onp6erq6uzs7O3t7e7u7u/v7/Hx8fLy8vT09Pb29vb29vf39/j4+Pn5+fr6+vv7+/v7+/v7+/v7+/v7+/v7+/z8/Pz8/Pz8/P39/f39/f39/f7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v///////////////////////////////////////////////wj+APMJHEiwoMGDCBMqXMiwocOHECNKnEixosWLGDNq3Mixo8ePIEOKHEmypMmTKFOqXMmypcuXMGPKnEmzpk2GtNo4cdKG1s2fAo8ByUE0B5BjQG/uKVp0UFKbQ5kafVpTalGqIatVg0jLKlGfD69dw7pQFhETJqLIcujKaw5XDnPVUaKkTi6yB2W5QIvWxVqGbb3CZZgLCl26UO7iJSiGL98eWxcGtjpY4TUwhw/vWUzQsePNkt1WTkgoc2bOA4d45psqtOCFsUwfnoNaoJrVaKO4prxwjmy6hGrnk4UbbSWFk6WONkjqN13FtaEUh5wwOdPlBC87py08X6riJoL+I7ReFPvASc6VQBd+G7eLYONFI3yWXnz3fNVaFBcT//XBPc5BMdZ9AhECXmsGkUeUebE5NwmBBPVQHBEHdeUVWAWV4RwYEBLUCXjHGeTWQc05F0uHBEmHWw8HRcUUEAdh9ht3KAoUDIgGLSWVUwWV+NszScUChQY8jGHKQ3sUB4VBQr2IVEG+/ZbIQ7QookcZhvhSUiwaNOCll0KcyFB+K1aoE08YEiSjaQI25MsfXMQZZxlajgTFl3g2MEZkCilS5kSGyUYKQ9goIuehXBgyUjV55qkBHwyp+BlFicgGmkKXlIEootiM1GijLFyiUDWq8QUFnxFdo+FhZQw4nhv+m25KkhCfNipELwpVAgUUimB0yRxzDJpQNHDGiqgfJPXSZa15uoEqS9hQYuymZESz5QrMOuqIS6hoOu2hetRZUjVtZJvnqSphY8i3iFLSaUqm0Gqul0um5Ae7cvqRpkqOYDuvoieFgi8XbaASUzV8LMtsvSat+y0Zl7wrUy93LoySw8YaYu1NpuxQ67YnoWKsHvve1G+eQqh076EFL+aIEBqs0MazJUXbBhl+GFzjzjz37PPPQActtELH7GL00Ugb/WRH76BTztNQRy11Oei8MxM1luwB7NZcdw3sHpZQo5HTU5c9NToxHaO112x7vcfSFZFt9txQo/2SI23n3TX+yBbJTffcdrukh96Ez/EHRn7/XXbgLflRuN7IXpS44lIzzhLej7fNd9+UL5724Jl3rQfcFjXd+dNVX40J6JnrgYnYQ0d0TC6012477aTHrvvuvPfu++8dZSNNM9BUY3VK25iiyCGV/EVWNtAcI7300qhUySDYY6+I80BxE8304B+TDUqyZG/+IJDAd1M504Qf/jQoXXL++ZfQ7NI71zTj/vvxz3/+IanYRkygtz/3uaokrvDf/LbnEm5Io4Dug19KrqfA81VCfSh5RzUg6D7jqWQb8qvg+UwhQJOEI3ocnF4zxtcSWRxChOZTBDRKUg79pVB6HnzJNkoBw+wdwn7+HXngDaVRDoVM4xa32JhFZjGKUazHINWgIAxDJJIbQoMbCikHLWDBRVjQoogT6UYmIEFGSGSiGwq5hSJ6OJJ3cLAZB0TILbrYxWFQpBVlLOMoGJKKF1awhCFp3/5yqJBo0LGLYpJIJfJYxlkwZBubUKCoRhIOG05PGuFoSDlicUguOtIg14DFKU4BizgK5BKMJGMl0MgQaEgRe4eYIUnCMY1mRKMaWHTIMDrJxVsYRBulCIUwQ1EKbRgkFKkkYyseEoxNQOIQl5DlT7rBSy5KkCCyGOYwS5aLZJLRlBCaIy8/WZBgapOYB0FlMve4s2pUExbXJMg5h3mQbnrzFzv+m0U1S5aPa8xTmOAcYzIn2aFmvBOc0/hnKOI5kGd4ExKJvM8mq8kLhCT0nwwdiCm8uUoI/aKasWClQS46z4wK5BoPRVB3QlnNZiSEpOc0qUBi8VCZkkWcnZwFGA8CU23atBvqTCU7a6ONd9o0Hz0d5lHtmcyjJuWjvPSlERXqVGQmU6Wc2SIvwUmQpArTqQ5NZiiEU007LsSrC2UIHpMpHF7kdKcvpSpDgJrKIxGVk4g0JkPQ6lSBTGORZaxEX4GiDXHeQq97lWtDEkrGtBLoaRDx5z+5ipBuiNR3CgUeRcypzVJodiLZPCc/P7sQYHYWsaQNiyhJSdnUuva1sI0QrWxnS9va2va2uM2tbmsSEAAh+QQJBAD5ACwAAAAAeAB4AIcAAAABAQECAgIDAwMEBAQEBAQEBAQEBAQEBAQEBAQFBQUFBQUGBgYICAgMDAwPDw8SEhIVFRUXFxcYGBgZGRkZGRkZGRkZGRkaGhoaGhoaGhobGxscHBweHh4hISEjIyMmJiYoKCgqKiosLCwuLi4uLi4uLi4uLi4uLi4uLi4vLy8vLy8vLy8vLy8vLy8wMDAyMjI0NDQ4ODg7Ozs+Pj5BQUFCQkJCQkJDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NERERERERERERFRUVHR0dKSkpOTk5SUlJVVVVYWFhZWVlZWVlZWVlZWVlZWVlZWVlaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpbW1tcXFxdXV1fX19iYmJlZWVnZ2dqampra2tsbGxtbW1tbW1ubm5ubm5ubm5ubm5ubm5ubm5vb29wcHBxcXFycnJ0dHR1dXV2dnZ3d3d5eXl8fHx+fn6AgICBgYGCgoKDg4ODg4ODg4ODg4OEhISFhYWIiIiMjIyPj4+Tk5OVlZWXl5eZmZmZmZmampqbm5ubm5ucnJydnZ2enp6fn5+hoaGioqKkpKSnp6epqamrq6usrKytra2urq6urq6urq6vr6+vr6+vr6+vr6+wsLCxsbGysrK0tLS1tbW3t7e7u7u9vb2/v7/BwcHCwsLDw8PExMTGxsbJycnMzMzNzc3Q0NDR0dHS0tLT09PV1dXW1tbX19fY2NjY2NjZ2dnZ2dnZ2dna2tra2tra2tra2tra2trb29vb29vb29vb29vb29vc3Nzc3Nzc3Nzd3d3e3t7f39/f39/h4eHj4+Pl5eXn5+fp6enq6urs7Ozt7e3u7u7u7u7u7u7v7+/v7+/v7+/w8PDx8fHx8fHy8vLz8/P09PT19fX39/f4+Pj5+fn6+vr7+/v7+/v7+/v7+/v8/Pz8/Pz9/f39/f39/f3+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7///////////////////////////////////////////////8I/gDzCRxIsKDBgwgTKlzIsKHDhxAjSpxIsaLFixgzatzIsaPHjyBDihxJsqTJkyhTqlzJsqXLlzBjypxJs6ZNhrPSDBmSZtbNnwKVzWBBlMUMZUBvyilatE9Sm0OZGn1aU2pRqiGtWYM4yypRnw+1acO68FWQDBmMvHKYyiuLVA6Fsfnxg40wsgdfiUCLVsRahm29wmUorAhdukXu4iWohS9fGVsXBrY6WKG2K4cPy1lM0LHjzZLdVk7YJ3NmzgPPekZ7KrTghatMH2aDWiCa1WiNuKa8cK7sH05rv8KN9pHCyVJHGwT1m67i2kWIQ06InKlygpeb064t8BTxDMEP/lYven3gouY/nnO/jVtEMoTjiZbPtwx9eO75rIUgrgW+aIRyNEfEWPgN1Md3rRkU31sHxdbcIgUWJANxQRzUlVdgFcRFc1ZEWNAn3xlnkFsHMdfcKh4WFB1uMhwUFVMzHGSFdikWlEyIBi0l1X0CmfjbMkmtUkQEMWgxykNyEFeEQULBiFRBvskWyEOwCALHFn4gU9IqERzgpZc7oMiQfixaqBNPGRI0o2wDNoSMHlLEGecWWo5UxJd4HqAFNQwRUuZERPwGCkPcCCLnoVLw6BE1eeYZQR0MrfgZRYHIBppCkWyBKKLcjNRoox9oopA1qqFVRGQSabPhYVwQCB8a/ptuStINnza6wzEKPVJEEYRgJAkbbAyaUDNwxoooHiQdA0Gtja7B50vcNGLspls0s+UHzDoKYUujaDrtoXDUWRI1amSbZxHPosSNH98iykinKY1Cq7leLpkSHu3KiQcsLi2CLb1/oPRJvlKUcSRM1NCxbLb2mtRHu1tEAq9Mx9zJbMMlPTxtH9beNEoMtW5r0ijGwsHvU/7meYNK+B5q8GKL3ADBB2qkexI3jJSxBR4H1+jzz0AHLfTQRHNkzjhIJ6000uYkpYwvUEctNdRPcoQON9ZQo/XWXHdNjTXcoCPTM43AgcbZaKetNhpwNPJMRuZk7fXcXlvT9EvKmL32/t5rw1F1RdvQLXjX28B0CN+Iq30IRnIPPjg2MOmdeOJ0YISN445D/hIdk09e+UWBYy544S8d3jnii18Ut+hz2w1T3qfv7XdG6HTTuOjWdCN2TM9QIvnpcFDydkdHL2383T89PfXyfxft/PPQRy/99DNhowwxxzizO0rdgAJIH42wshg2x+RivvnNl9SIHuyzD4j4T3WDzPn056K5Say0r78eh4hb0zjLqF/9gHQSSOxvf5BAVUzQ8QxiCHCAKDHgAfXXB1J0Iybke6AAbUYSVEzwgO9zSTeUoUEBEhAl6/vg/hrhP5OgwxklFCAztneSbkhQhfoDxQVN4o3yxfB8/sS430pY0Qcc6g8QzCjJOBz4Q/NpDybdM2L7+qBAkJCwicoYh0KY4QpXnLAiruhEJ3IxqhQasREkaeIxdogQc6zCFHA0xSqQF5FvSIIQeCSEJL6hkFr8QYojQUcMiTE8hbgijnEsBkVOkcc8doIhpCiiCtkIkgA+cIYMUQYi44gKiiyikXl0BUO6wYkPQoIk3mDi+ZThjYaYAxWbhGN5rIEKUIACFVUUiCNAicdF8JEhzDAj+/qQRFQugxjIYAYlF1KMWMJRlAXhRicwQU1MdGJiA+kEL/GYIDdxwhB9gEQxf+INZ8JxnANRRTWr2QqD1GKbeMxG0A7pzPJMc53W/jzILrf5yJ89w5ymQOdA8FnNg7wTni2MUCrMKaaCWIOg1MxlPu64TUf4LBkAFeJAnAFRTDjjIMuAJyFUkaJXmjMWCOEoRD9aInj60kO5MCcqWnkQlRKUpQbJhkh7xh1sAPQ9Ke0oTg2iCpEOFTX0jGUq6FgQm+LzqAT5xj552c/abAOgAm2qUPtoVO7E1JnQTIhT1wnVgmhzmzxdzBudqVGDjLWaZSVISPnJHXMqciFvpWZcCcLIbXInFkplak23uhCp8lJYqNkGLDlJOrwSFq+fzOMi9kqVbdDTFY117Eod4oyzdoKyZDGHYEfVUYkm5Bu/pJ5AOqpai9xznVVtKq1E1InPdsp2ItKELTZvCxFa2hKXvA2ucIdL3OIa97jITa5yl8vc5qo2IAAh+QQJBAD7ACwAAAAAeAB4AIcAAAABAQECAgIICAgKCgoLCwsMDAwMDAwMDAwMDAwNDQ0NDQ0NDQ0ODg4PDw8RERETExMVFRUXFxcaGhodHR0fHx8gICAgICAhISEhISEhISEhISEhISEhISEiIiIiIiIiIiIiIiIiIiIjIyMkJCQlJSUmJiYoKCgsLCwvLy8xMTEzMzM0NDQ1NTU2NjY2NjY2NjY2NjY2NjY2NjY2NjY3Nzc3Nzc3Nzc3Nzc4ODg5OTk8PDxAQEBDQ0NISEhKSkpLS0tMTExMTExMTExMTExMTExMTExMTExNTU1NTU1NTU1NTU1NTU1NTU1NTU1OTk5OTk5PT09SUlJVVVVYWFhbW1teXl5gYGBgYGBhYWFhYWFhYWFhYWFiYmJiYmJiYmJiYmJjY2NjY2NkZGRmZmZoaGhra2tubm5vb29ycnJzc3N0dHR0dHR1dXV2dnZ2dnZ2dnZ3d3d3d3d3d3d3d3d4eHh6enp9fX2AgICEhISIiIiJiYmLi4uMjIyNjY2Ojo6Pj4+Pj4+RkZGSkpKTk5OVlZWXl5eZmZmcnJyenp6fn5+goKChoaGhoaGhoaGhoaGioqKioqKioqKioqKjo6OkpKSmpqaoqKiqqqqsrKyurq6vr6+xsbGzs7O2tra3t7e5ubm9vb2/v7/Dw8PFxcXHx8fIyMjJycnKysrKysrLy8vLy8vMzMzMzMzNzc3Nzc3Ozs7Ozs7Ozs7Pz8/Q0NDR0dHR0dHS0tLT09PU1NTV1dXW1tbW1tbX19fX19fX19fY2NjZ2dna2trb29vd3d3e3t7f39/g4ODh4eHh4eHh4eHi4uLi4uLj4+Pl5eXo6Ojr6+vt7e3v7+/w8PDy8vLz8/P09PT19fX29vb29vb39/f39/f39/f39/f39/f39/f4+Pj4+Pj4+Pj4+Pj5+fn5+fn6+vr7+/v7+/v8/Pz8/Pz8/Pz9/f39/f39/f3+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7///////////////////////////////////8I/gD3CRxIsKDBgwgTKlzIsKHDhxAjSpxIsaLFixgzatzIsaPHjyBDihxJsqTJkyhTqlzJsqXLlzBjypxJs6ZNhrrK8OBRRtfNnwKbqQBBFISKZkBvtilaNE9SmymYElXxtKbUolVDSpMGUddVoj4fUqOWdaGtHQsW/LDlsNRXEKUcBitz40aZYGUP2qKQNi0Ftgzdfo3LMFiPunV74M1LkErfvii4LhR8lbBCalEQI27DmODjx28Cv7WcMI9mzZ0H6vjcd9Tk0QtfnUZcJrXAMqzT/ng9eCHd2Tec2raVO20lhZSlkjbYCXjdxbZ/FI+cMDnT5QQxO69tW+Co4gv0/lSHjRCR8xvQu+POTeEYQutFsQt0dl54d4HS+Oam8p68wTbO9UDWfQPpAZ5rBsFHlHyyOYcIgQWhUNwOB3n1VVgFVeFcFBAW1Al4xxn01kHNOfdKhwVJlxsKB0UlVQoHZQYcdygOdAyI/11l30AlAudMUvOYI0455rTz0BvF7VZQMy4SlQJSBf022x8P3SIIGlTkQUxJ84jTzZdfljNPQ/mtWGEZO+zQU4zACdgQMXYsIaecVGw5kjlg5tmNOQ0VYuZEh83WCUPWCDLnoUvsCJKeeoqDDkMqgkbRH7NxtpAlVCCKqDUjMcqoOEYmJM1qff0gmUTUaIhYFQO+N4am/pqSVI6njIqpUCU//FAIRpeUUcagCT0TJ6yI2kFSl7Qy+ihM1iBCrKZUPMOll8nmKY46LoWS6bOHnmGnSehUqyefKlmTB7eIIsJpSu3MKu6X5KI0LLpL2HGLS+pQKy62J3FC7xJihCITOvrSGm9J53JLhSXryhRktQeTlDCxeUh7U7u08mtSKMSece9T+epZjkrzyhkwY+qUI46jKzUrBhV2CFzjzDTXbPPNOOfckZAr9+zzyhHXlAwwRBdtNNHJeKRONM4w4/TTUEfNjDPRaPwSNImY8cXWXHft9RdmJAJNRuY0LfXZUjsTtErJaP3121+bkfRF0KBtd9Rjv0QI/tx8e00IRmbfffePL7ndd9+hXRS44GgT7tIbhx+euEV1M2533i7tHTnff19UtuVnqw1T25u/LXdG6kizOOPOSGO1S9BcYvjmZlyC+UY8//zz2jMNffTvc+ss/PDEF2/88TVFI4wtuTTzeknZdKIHHoe0wlg0ubyivfbCqHTIHOCDr4f1T1Xjy/bovxINSq2E7/4cgnxbUznEpJ++/CQ58v77kpwakzrOsIX97ocS/e3PfXgIRTZigr0B2s9iJhnFAfc3PpdUQxgOtB/+SvK9Cb7vEBskiTqakUH7HeN5JMmGAT3ovk4s0CTZyF4Jt0eL9bWkFXhgofv04DiRlEOA/jPUnvNgEj0dhg8P/gMJBoMojJElxBmnOIV7LvIKTGACQweRRgd1eAiSBDEX1VAIOkjxiTJ+ghTLkog4KOGHNvqBEuJQSC70YMSRqKOEtOghQk5hRjP6giKicKMbMcGQUOTQgy8MSf0GeEKGHKOPZpSZRAohSDeeaCHZwMQEHZFCWqRPGIkUYyggWUZRZFEUmtCEKJIoEERUso2FiCNDnLFF8OFBjyDJBjFo4YtjhNEhviBlGU9hEGtcQhLIlMQlGjYQTLyyjaZ0CDEwIQg8OAKXNMmGMMuIS1IkM5mrMEguntnGVs2Mj8KMZkGO+U1lHsSVzyQkzZ6xzU9gs53J/jzIOMk5DJqJYpukyCI+kcnKfUiCnA+q0TDqacOCPGOgkoAgQZpBTj/IJzXoGKUwY4GQhw5UogThBDlj2aFbbFOBHYUoSAdCjYqCAkLRqGc/U/rR6lT0dqlBJylFkUaDeBSfKx2IOOD5Snnahhr1xOZAftrOoA5kn8/EaV5MKkxiKoSp33RqM8n5UtuQUZgNpSlQF0LReHZnm39cCFaTqdWBBPKZ3YnFTnsq1qYyZKiv5ER3qKHRMobCnMFSaUOgQUk3FkKqeaEGOk8B2MDWdLDO9AMmENsZdNB1IdKAaEETsjLkEQSinrUIO795idBWxJvtDKdpJ2JM0jJztRCRGwYqVblZ2Nr2trjNrW53y9ve+va3wA2ucHUWEAAh+QQJBAD8ACwAAAAAeAB4AIcAAAACAgIFBQUICAgKCgoMDAwODg4SEhITExMUFBQUFBQUFBQUFBQUFBQVFRUVFRUVFRUVFRUWFhYWFhYXFxcYGBgaGhocHBweHh4gICAjIyMlJSUnJycpKSkqKioqKioqKioqKioqKioqKioqKiorKysrKysrKysrKysrKysrKysrKyssLCwuLi4wMDAzMzM3Nzc6Ojo9PT0+Pj4/Pz8/Pz8/Pz8/Pz8/Pz8/Pz8/Pz8/Pz8/Pz8/Pz8/Pz9AQEBAQEBAQEBAQEBAQEBBQUFCQkJDQ0NERERGRkZISEhLS0tNTU1QUFBSUlJSUlJTU1NTU1NUVFRUVFRUVFRUVFRUVFRUVFRVVVVVVVVVVVVWVlZXV1dZWVlbW1tdXV1gYGBkZGRnZ2dpaWlqampqampqampra2tra2tra2tra2tra2tra2tsbGxtbW1tbW1vb29xcXF0dHR3d3d6enp8fHx9fX1+fn5/f39/f3+AgICBgYGCgoKDg4OFhYWGhoaIiIiKioqMjIyOjo6RkZGSkpKTk5OUlJSUlJSUlJSUlJSVlZWVlZWVlZWVlZWWlpaXl5eZmZmbm5udnZ2goKCgoKCioqKjo6OlpaWnp6epqamrq6usrKyvr6+ysrK3t7e6urq8vLy+vr6+vr6/v7+/v7+/v7/AwMDAwMDAwMDBwcHBwcHCwsLCwsLDw8PDw8PExMTExMTFxcXFxcXGxsbIyMjJycnKysrNzc3Pz8/R0dHT09PT09PU1NTU1NTU1NTU1NTU1NTU1NTV1dXV1dXV1dXV1dXW1tbX19fa2tre3t7i4uLl5eXn5+fp6enq6urq6urq6urq6urr6+vr6+vr6+vr6+vs7Ozt7e3u7u7u7u7v7+/w8PDx8fHy8vLz8/P19fX19fX19fX29vb29vb29vb39/f4+Pj4+Pj5+fn5+fn6+vr6+vr7+/v8/Pz8/Pz9/f3+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7///////////////////////8I/gD5CRxIsKDBgwgTKlzIsKHDhxAjSpxIsaLFixgzatzIsaPHjyBDihxJsqTJkyhTqlzJsqXLlzBjypxJs6ZNhru+vHjxZdfNnwKVbYBAFMIGZUBvsilalE5SmxqYEt3wtKbUolVn7rpK1OdDbtyyfoTFFQIsh8e+oEDx5ZhYjmS5nmV4LMbatTHcvs0Y9+pchdyQ3L3rZi/fsn8Tzhk82DDGvlITH7TF+O4XxxchM5VsUG1lFHMwW9RclDNBTp/X6hU9kTRR0wIDp77MmqJrswkZpUaxunbE27CX7Q7tuzVihG5SwwhbXCLwybsZNZ+4lavXgk5SI5lOsexB1Klt/nGfGFWqhoOCP9MeH3GpVKcFwX9eltRdt2vavK37qKw8UQ1IFeRZZX88hMsfYCxBBzIluXMNNRBCuI07Hu3ixU5eXEdQeowt1xAycAQhoohLMDhSNxGmSI039aQEw2ecMOTNHyPWGAR8IdWjoorXgIPSH5UVttAkS9hoozcj7bhjNumYxE12dznBHEKucGGkkSRto+SO27xjUiVffBFjQsyEeKWNcJD0zoNbqvhNiy95g8iZRi7BTIPZtMnjOS55UiSdNYJhYkn1fKOnit3AiZI3dABqYyFIprSOlodC2I1KZjoaBBy4uHROnpWWg5ImmgbBhScx1QMOm21eelKj/oAuMUmkMr2DYqsowXomHXfetI42W/J5kidngtHpU5+quA2mNp661znbXJPNmyp5UwgXS8CBKnvcduvtt+CGK25B5YBj7rnomisqUMkQ4+678LqbjEfrLHNMvPjGe8wy+8UEDSNfYCHwwAQXjMUXjECTUTn35uswvMes61IyARtsscFfzHuRMg93/G6ALgFy8cgFA4JRwx4/PGhLFZNMchoYIZNyxyuzRIbLLpOBEcczOwxySyLjPLLJFzHcM74Rw0Sx0BZnnNE6zaA88zHN9AsTNJO0LPQXkyjcUbnphi3xTcn8YvbZaJut8bhst+3223DHDVIzucBCSzLsqDTO/iZ2xDEILXs1Q8sphBOei0qDpKG44nYA/tQ2txQu+SnNoETL4pin8UfNM5Xzy+ST/4ISJJlnHok1NLGjDCyghz566ZnH4ck4MQneOuj0nSQK7KU37tI2udwOuugpJc575oNwThI7yQgP+jF5pzQO6cdnvgntJnkzuPOFw1J5S7TEUT3mdvwcUjmsc0843jDtPf7icaA+UvDq5zK2QcoQrnxEtFBCyeEJsYbxxjcIkqiPFstKyDpAoYkGagIUVotIOSCRhwrmARL3K0gu6vC+kbDDebAw30FO4UAHAlAinrCgBSnBEE+I73jYC8nnWgc9hiCjhA7sBEX+oEILOk4h/uOoBO8gQRJvpK9wuaCVQtbRCRw2cFsFoYYnLGEJT1DjIIPoYQX/kMGDKGOAiouDCD/ijV/A4hbHSGBDcuHEBp7CIN2QBCPmyAhJuIoglNBiBaFow0r8IQ6QGONMwNHGBoowFHSkoysMggs9VlAb3CJhG/k4EDkmso5YdCQLx7OMQmpijJek40Ea6cjeFMcThQTFQagRyjle0SAU1GMBp0MMT3qtIMtoJSNyV5BkODIPbywOEwspC4TkspW8LEgmHMnF4tiikJzw0UGOGcpkEkQbvxwTa6DhSWIkhJqXtCZBTvHLXolGkk70RARxqUtxDqQcWdTjJjGjDU8KUiDgpEykOwdCSj2a0zDPbGMwv9nOheRRj9o0DAPbeEtjFlQhvpSnaAp5QoIis4WOFI0s0rnOaT5UIfDUYiZEow1OlJATkGRIPum4z4Iwg4cW/MM/DaMNSZ4ipSr96EKYcVBKzBQz6+ioQljZylc6pBxdZJsu5UYRSyZSEkydCCIvucioRiSOT72jVR8ixUpUwopbDatYx0rWspr1rGhNq1rXyta2iiUgADsAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA";
                this.progressLoading = "data:image/gif;base64,R0lGODlheAB4APcAAAAAAAEBAQQEBAcHBwkJCQkJCQkJCQkJCQkJCQkJCQoKCgsLCwwMDA4ODhERERQUFBcXFxoaGhsbGxwcHB0dHR0dHR0dHR0dHR0dHR0dHR4eHh4eHh4eHh4eHh4eHh8fHyAgICIiIiQkJCcnJysrKy8vLzExMTIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjMzMzMzMzMzMzMzMzMzMzQ0NDU1NTY2Njg4ODo6Oj09PUBAQENDQ0VFRUdHR0hISEhISEhISEhISEhISEhISElJSUlJSUlJSUlJSUlJSUpKSktLS01NTU9PT1JSUlRUVFdXV1paWltbW1xcXF1dXV1dXV1dXV5eXl5eXl5eXl5eXl5eXl5eXl9fX2BgYGFhYWNjY2ZmZmlpaWtra25ubnBwcHFxcXJycnJycnNzc3R0dHV1dXZ2dnh4eHp6enx8fH5+foCAgIKCgoSEhIaGhoeHh4iIiIiIiIiIiIiIiImJiYmJiYmJiYqKioqKiouLi42NjY6Ojo+Pj5KSkpSUlJWVlZeXl5mZmZubm5ycnJ2dnZ6enqGhoaSkpKioqKysrK6urrGxsbKysrKysrKysrOzs7Ozs7Ozs7Ozs7Ozs7S0tLW1tba2tri4uLq6uru7u729vb6+vsDAwMHBwcLCwsPDw8TExMXFxcfHx8fHx8jIyMjIyMnJycnJycnJycrKysvLy8zMzM7Ozs/Pz9DQ0NHR0dLS0tPT09TU1NbW1tfX19jY2Nra2tvb29zc3N3d3d3d3d3d3d7e3t7e3t7e3t/f3+Dg4OLi4uXl5efn5+np6evr6+3t7e7u7vDw8PDw8PHx8fLy8vLy8vLy8vLy8vLy8vPz8/Pz8/Pz8/T09PX19fX19fb29vf39/j4+Pj4+Pj4+Pn5+fn5+fn5+fn5+fn5+fr6+vv7+/z8/P39/f39/f7+/v7+/v7+/v7+/v7+/v7+/v///////////////////////////////////////////////////yH/C05FVFNDQVBFMi4wAwEAAAAh+QQJBAD5ACwAAAAAeAB4AAAI/gDzCRxIsKDBgwgTKlzIsKHDhxAjSpxIsaLFixgzatzIsaPHjyBDihxJsqTJkyhTqlzJsqXLlzBjypxJs6ZNhrakjBghxdbNnwKRRThA9EAEZEBvjilalE1SmxCYEo3wtKbUolVn2rpK1OdDadKyLmTnLVs2b+wcluJ6oJRDXVI4cJCiS+xBdtvMmt2WluFarm4Z6iohV26JunYJftOrt1vDv1cDK5S2o3BhMYkJMmZczi9byQnVWLaceWDZzWbVLYQsFfRBVaMLSyktMBxqs95Wf14YNzYHNbTzsbttNp1C1kxdF4zkWy5i2qdRO06IvKjygZSbzw6eTx3xbJ0R/lYnel3goOYcnge3fXsbPPG7DyZDD5z7wLy3v8EHjFBMcxJh2SdQOd+pZtB4bb2G3iACEtQNcbkZtBVXXhVERHM7NEiQd8QZZxBbBzHXnCoaEhTdZtMVFJVUEBxUmW/blSgQPN95SNBSUjm1HHrJJFUOM8ko04x+DhF4W4QEIbMiURAgVVBvsc3x0CxzTNHDGr2UVE4yxXTZ5TLhMYQfigfZEsVOUVRI0IujAdhQL2PQIKecPWQ5EjNe5llMM30phM5tKUZEgm+RMFTNHHMmSkN9IbGjp57JQMPQiWaFGdEcsWG2UCI9KKpoNSM9+mgygR50IpISSXNhYUQEiBAp/k546ilJy4j66DI2HpSON96gg9EiUkhRaELKxCmromOQlA4ytj7qTJ8tVSPIsZ72oIyWXDabZzLZuFRJp9QmOoWdJbHjjLZ6MgOtSdWsEa6igoCa0je1otslMyoZ+y4NY8ziUjbZoutqSY/sS4MTlcTEDjTMaovvSWq820Mi8sqUDp7NPmxSxNSqce1N3yhja7cnVXLsFP4+BbCey+SrKMKJZbMMMsk8q5K0TvQwRsIy9uzzz0AHLfTQFXVTzdFIJ310qTUJg8vTUEf9tDAelVMMLa9krfXWXL9CSzGWusTMIFEkYfbZaKedRBSDaGxRN1h3LXfXtDCtkjBlq623/tpRUH2RL3MHzrUvMNGx9+Fp04FR3IILriZLeSOOOBgY2dJ444+vBIbkklP+9+WCE/6S4ZwfrvhFcIMud90w4V263n1ntCXjoNOSTNgtMZNI5KVHkYjbGhmt9PB2zyTMLcgnrzzyfhPt/PPQRy/99C4lo8onouzia0rdPLIGGXecklgyomRivvkkpmQHF+yzv4b4Tzljyvn0Z9LjSaa0rz8XcvDykzeyqF/9ZIESQuxvf4VoBk3Q4YtPCHCABTzg/sggieKlhHwPFGAxUPIJCR7wfS5xhioyKEACqs+DB7yD/1KCjl2QUIC22B5KumFAFO7vERb0iDTK98LzfeJ+/iwxBRlsqL81AFEk3nBgD82nCxm2pHtEbB8ZFDiSES5RFagyyC8+8YldYMQUiECECRHSjPVF8Q4kWaIonKGQckyiEXBsxCRw5xBvDGINeFzDILJYEFqoIYojQccLPyE6hXgijnF8BUUmkcc8IoIhkhgiCnOYkQA+MIYM2QUi4/gIisShkXk0BUO6oQgPEoIk0lDi+VQxsISU4xGbhOOwCsIMSSQiEZIAnkDqAEo8xoGP8jGjFI8YEmnI4hOlsAUbHfKKWMLREwaJRiH6QM0+FCIaBkFEL/E4iYfwQhFxIAMhiFmTbDgTjr8wSCeqWU1RGCQW28TjMnt2SGfOkiCE/mAnNQtxEF5u85E9S8Y5G5FOg+izmgeBZzxz0bNInLObBmHGQampy3wIIp52kFEtBtoygyRjon0gZz6AEc81gEJDrzynO+UDUpHmoxHx/GWDTHHOR5DMoy1FiDNKCgkBLWOgtUjIRyfq0nyAoqQfC049YxkJOgpkqActqjf82UuA0sYZAy0oQqCqz6LmQ6HbTGpmaOpMaCqEq+z0aj60uc2e0uaNzuyoUHOqEJL+MzjnVORC0FpNteaDkdsMjiiY6lSC8JWafp1qLxsRHGfAkpPzPCtdF6KMT+YxDmLNjDPq6YnISpaoDlEGWxGRWdqUo7AHkehEK5oQXlFvICB9NG1F8qnPU8p2IuvU50pvG5Fo0JaahMAmbyVSy1vmcrjITa5yl8vc5jr3udCNrnSnS92eBQQAIfkECQQA8wAsAAAAAHgAeACHAAAAAgICBgYGCQkJDQ0NDg4ODw8PEBAQEBAQEBAQEBAQERERERERERERERERERERERERERERExMTFBQUFxcXGRkZHR0dISEhIyMjJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJSUlJiYmJiYmJiYmJiYmJiYmJycnKCgoKysrLi4uMDAwMzMzNjY2ODg4Ojo6Ozs7Ozs7Ozs7Ozs7PDw8PDw8PDw8PDw8PDw8PDw8PDw8PT09Pz8/QEBAQ0NDRUVFR0dHSUlJS0tLTU1NTk5OT09PUFBQUFBQUFBQUVFRUVFRUVFRUVFRUVFRUVFRUVFRUlJSU1NTVFRUVVVVV1dXWlpaXFxcX19fYWFhY2NjZGRkZWVlZWVlZWVlZmZmZmZmZmZmaGhoaWlpa2trbW1tb29vcXFxdHR0dnZ2eHh4eHh4eXl5enp6e3t7e3t7e3t7e3t7fHx8fHx8fHx8fHx8fHx8fX19fn5+gICAgoKChYWFhoaGh4eHh4eHiIiIiYmJioqKjIyMjo6OkJCQkZGRlJSUl5eXnJycnp6eoKCgoqKio6OjpKSkpaWlpqampqampqampqamp6enp6enqKioqKioqampqqqqqqqqq6urra2tr6+vsrKys7OztbW1tra2t7e3uLi4ubm5urq6u7u7u7u7vLy8vLy8vLy8vLy8vb29v7+/wcHBw8PDxsbGycnJzMzMzc3Nzs7Oz8/Pz8/Pz8/Pz8/P0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0dHR09PT1dXV2dnZ3d3d4ODg4uLi5OTk5eXl5ubm5ubm5ubm5+fn6Ojo6enp6+vr7Ozs7e3t7e3t7u7u7+/v7+/v7+/v7+/v8PDw8fHx8vLy9PT09fX19/f3+Pj4+fn5+fn5+vr6+/v7+/v7+/v7+/v7/Pz8/Pz8/Pz8/Pz8/f39/v7+/v7+/v7+/v7+/v7+/v7+/////////////////////////////////v7+/v7+/v7+/v7+/v7+/v7+/v7+CP4A5wkcSLCgwYMIEypcyLChw4cQI0qcSLGixYsYM2rcyLGjx48gQ4ocSbKkyZMoU6pcybKly5cwY8qcSbOmzYbqcqq7yZOgOnRA0e3seTNf0KD5iNr8eVSo0ppNgz4NmS8pxKhAI2LDNnUhuWfKlEkj9xAruofBjDhwYCRY14PkmoUN24xsQ7MOg11Yu/aC27cEp82d+8zqQrwMsbngyzcLYIKDB2e7i7WhGcaMHw8EGzksOIaIFcLCzNeIZoHYOoeVBrryQrWkHZg5PY+c6rDdDrtOCCn22r+npd0urDD0QcW+TdOeB+62sm3Fdx8M5NsBcNqpVTc7i9B4QWPVZ/4vF5hPruppCb0TzOL7AtfxArc5/3xQvcDRvgPBJ8i587Pu0hHkg28t7EeQN87lZpB9vfkGi4EECafafwYxddRQBbWQHIQEoZOgQUY1ZdhADcZmDFHdFCPMMMdA51A2t7FW4YUHwUaaGw/J0gYSL5ghTEndCAPMkEMSo+BC5U2IkE4YZhibew0Jk8UJVFL5wo8jFUPklsAcw51C8vlH0V6kQcJQNm1UqeYJZYyEDpdcCtMMQxJKRpEbpDm20CEvrLnmZCLBCecwgCKUT39ijQgRNgPy5cN7CKEShJ9+kkSMoHASE45C3UgjjYsWJWKEEWYmdMyUlK6pp0jhCIkpl/7KfNlSNn2k6ucLxwA5zKtxotdSJ33aquYRWJaEDjK8clmMrCZlY4awa/ZR6EnbXJrskMWohCq0J2Qhi0vT7HothSYxwu0JQHQSEzrNuPpqtieVAe0Lh0wLUzhavouSvLaWketN24gLp68mdZLqEd8qFS6XxGi7ZrqATUPMisgwWxKtQLyQhbocduzxxyCHLPLIFW1jzckop3wyqDcNg8vLMMf88jAeBfnKKjjnrPPOq7wizJEvKeMHEToUbfTRSOtAhB/KZLTNzTxHzfMrLLM0DNFJZ500ETRfBIzUYO8MDExuaG020jheBHXYYccCE9Znn20FRrGwzbbbL1URd/7cVWD0td1gj/1S2XubnbZFTwMeNdUwXV141lxn1M0wawP+yjBAu6TMIXAXTsQhTXe0zTSkl2466VXXNEwtrLfuOutdkyz77LTXbvvtLhHTSief0LJpStssQkYWebgCGDGfTKK88q2oZMcT0ENPhvFKOTPK8thP0vBJrkTv/RNpXEfTNrBkn/2DJwHy/feBOENTOMF0Yv75KKm/vvdZYJL6SsjPb37sJQHF/dY3PZc4oxX+Mx/6UPK8AX4vD+IrSThokUDzyeJ3KNmG/RzovUXsDyTTSF4Fl9eJ7bHEFVngoPfIYEKRbEN+I1Se72ASPBVGLwvuG8kqYjiJVXxQIP7C6EQncIGRVRSiEHhDiDMaqMI8kCSGn8ghQrwxiUNY8RCT8AZFuMEHMXhRDHzghkJkQQYbjiQcFexEBA3SiSte8RUUycQXv1gIhmAihQ78oUbKN78LMgQXbrxiIiiChjl+cRUM2cYhBggIkkwDhstbBcEU4o1EBNKKjDiIMiBxREiEriBuMKQX0yBGhhCDidDLQgtDMg1YdGIUspAiQ15xSStyjCDW6IMddmmHPljDIIQQpRczgZZDpCELgFhlTbJRSysWayCd4CUvQ2GQWAjTi9D4WBtrmUmD6FKavTxIKIVZx44Ro5mHeOZAwMnLg1jzmkTkECOaOQlNsnOXn/4kSBeF+QYOyQKd/yrIKe+pzHkM45pi+ISBKtlMUCBkoOws6DwScU1S7scUzUyEvQYCUXBKFBoI7eZyjoHOhB2ko9KU6Dw+gdATLWebl2SEFh96TzuolBvjFGU5T/MMdKpToDVV6TzeKUyXagajtbwlTQm6kGAKU6SPqWItA7rUiC7koMIkBG2aCceFoJSXQhWIHIVJG1DEdKYK+eouwzoPnIpykDy1pCDJldagNsQYhfwiGoyqmWdssxN0rStT7+pUQvCVNt5Aa0OUUdN8MoQbpcTdPGoq2Yp8U5p9qCxFoglOampWIrnE7C8/K5FNEoIQniStalfL2ta69rWwjQutbGdL29ratmMBAQAh+QQJBAD2ACwAAAAAeAB4AIcAAAABAQEDAwMEBAQEBAQEBAQEBAQEBAQEBAQEBAQFBQUHBwcKCgoODg4TExMXFxcZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkZGRkaGhoaGhoaGhoaGhoaGhocHBwdHR0gICAjIyMlJSUnJycpKSkrKystLS0uLi4uLi4uLi4vLy8vLy8vLy8vLy8vLy8wMDAwMDAxMTExMTExMTEzMzM1NTU3Nzc5OTk7Ozs9PT0/Pz9AQEBBQUFCQkJDQ0NDQ0NDQ0NDQ0NERERERERERERERERFRUVFRUVGRkZISEhKSkpOTk5QUFBTU1NVVVVXV1dYWFhZWVlZWVlaWlpaWlpaWlpaWlpbW1tcXFxeXl5hYWFiYmJlZWVoaGhqampra2tsbGxtbW1ubm5ubm5ubm5ubm5vb29vb29vb29vb29vb29vb29wcHBxcXFycnJzc3N1dXV3d3d4eHh6enp7e3t8fHx8fHx9fX1+fn5+fn6AgICBgYGDg4OEhISGhoaJiYmMjIyQkJCTk5OUlJSWlpaXl5eYmJiZmZmampqampqampqbm5ubm5ubm5ucnJycnJydnZ2enp6enp6fn5+goKChoaGjo6OlpaWmpqapqamqqqqsrKytra2tra2urq6urq6urq6vr6+vr6+wsLCxsbG0tLS4uLi8vLzAwMDBwcHDw8PDw8PDw8PExMTExMTExMTExMTFxcXGxsbHx8fIyMjKysrLy8vMzMzPz8/S0tLU1NTW1tbY2NjZ2dna2tra2tra2trb29vd3d3h4eHk5OTm5ubn5+fo6Ojo6Ojp6enq6urq6urr6+vr6+vs7Ozs7Ozt7e3u7u7u7u7u7u7v7+/v7+/w8PDx8fHy8vL09PT19fX29vb39/f4+Pj6+vr7+/v8/Pz8/Pz9/f39/f3+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7///////////////////////////////////////////////////////////////////////////8I/gDtCRxIsKDBgwgTKlzIsKHDhxAjSpxIsaLFixgzatzIsaPHjyBDihxJsqTJkyhTqlzJsqXLlzBjypxJs6ZNhuK0YcOmTdzNnwLJXbNG1No1ckBvbitalFtSm0OZGn1aU2pRqiHJIX0ozipRnw+JYl3ojRgwYMW8OQTn1Ro4h7mCGDAQJNfYg96GnT07TC1Dtl7fMszlYO5cB3bvEjS2dy+xrQoBWxWs0NoIw4adKCbYuLGzv20pJ+SCGfPmgWY7n3UaOfTCVKUN+zgtMJnqs8UWSpYq+qCP2HO50Lbn7fZZbK0DK6wEfG5i2sWMP064m2lvgpabzx5uj5txYNGo/rtGyKe5gefDbd8edl1g9aLt7REzL5x7UL23jSF8TzS+k+YOWGPfQNF8x1pB/Ll1EGzN8TEgQampRsxBXXkFVkE1NCfCgwRp8x1yBrV1EHPNpcIhQdHdNqFBUTF1zUEiaHciQeB8aNBSUh04EInArfiTNr3UkoswIDbkjHG5FSSUi5AN9BtwbjwkSxtIlMDFLiVpUwssXHK5izYNkYNfZz4SlNNOPcEIXIAN7fIEB3DCWQKWI/XS5Z2wCHNhQtaoSFFhsVXC0DVtxGkoB1uMJA6eeNZSJkIpekaRG7FptlAgJRx66IsiMcooLuElRE6EaDUJkTUZGlaDgAmdcoOm/pqStIunjO7iF0LYFFMMqxYJ4oMPgiZEzJuwHmqpSN5sSSuew+zJ0jV7FKtpCY+CpA0uyzaqjEuaZCqtoUjQWZI4w2SLZy/OlnQNF98eqgenKGEzq7lc9qKSE+3G6YQsLimDLb36naRIvhzcoElM4hCj7LL2nrRFuyUEAm9M3tjJMEoPS7tFtTJhkwut256kSbFI8PuUv3iKexK+hhqsmDK71IJLsypdo8cNJThx8Iw89+zzz0AHLXRF1zhj9NFIGz2xTb3c4vTTUDvdMEfb4GLKKFhnrfXWo5iCyzYyGYOHDi2UbfbZaLegAx4BX3TN1VzHzbUpS6/UC9lp5522/g5TV1SL3IBvXQtMbehtONptYAR34IGfAhPehx++BEanMM644y8tEXnkk1/0t+WAD/5S4Zsbnrjbi4OuNd0w3V163nxntI0uqVtuii5gx2QMIJCXrgMgbW9UdNLE101T01En3/fQzDfv/PPQR8+SL6ZYkgkt36ikTSFZNAEH5mP5koki5JNvikpwFKG++lmAD5QxnpQvvyK+oHTK+vgX4QV6NGWDyvzzQwVK9JC//O3hGDT5Bi4sAcAADrCA+WvCJcAEE/E1EIAqI4knIFjA9rnEGKa4IAAFmJL0cTB/cOBfSb5BCxECMBXZS4k2CHjC/BWCgiWBxvhcWL5K1K8l/qdoQg3xl4VhlCQbDOQh+WYRQ5dsb4jrawICRxJCJZoiGwrRxSUuYQvK+cEPq1DIMUw4RDiQRImZCJ5BugGJL34REt2gyDboYIU6WoEOuUMILLAAxZF8w4WVwAVDLuFGN5JQIpewox39wBBLCPGEOATJ/xoIQ4bYopBuDARFuqBIO7oPIdoABAf1QBJoVGJ+poBGQ7oRCEx+cRAHKQYk+MAHSCSpIGXoZB27kEeFDIOM6muCEUuJikp4IhVqVAgqXPnFSxgkGnNQgzTVMIdQEaQPuqyjM+ECCC80QQ/D/Mk1mPlFXRgEE9OcJigMoops1pEZPiMkM2FpkGimk5oH/sllNhnJM1+Q0w/mNMg9p3mQdrrzFjwbBDkbEcuBSvOWBKFjNtUwo1X8k2PCcKgahHEQXrjTCpzgECvJuQmEZNShHD1IINzJyweVgpwSM6lGU2oQZnz0EAMixj/DKFOUJoQTH+XYXeTpykHEsacDpemN9KlLftImGf8MKFLvqVR2BnU4L2XmNhNy0qQuBJvZxCltGkFOoQ6kq1RdiEez2YfhkPOQXJ3pIN05nE0U9agKQWs6q3qQbTDVjpp8aiszmYyG6HWafD0IMThpxy6YlSrJkOclCmtYuTaEGGDtw2PH0g28NqQYGoUoQ7bRy+hpVHoWsWc654DaiqDznutsJO1EoLlaa8o2IrKkpS1vy9ve+va3wA2ucIdL3OIa97jIlV5AAAAh+QQJBAD5ACwAAAAAeAB4AIcAAAABAQEFBQUJCQkLCwsMDAwMDAwMDAwMDAwMDAwMDAwMDAwNDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0ODg4QEBATExMXFxcaGhocHBweHh4fHx8gICAhISEhISEhISEhISEiIiIiIiIiIiIiIiIiIiIjIyMkJCQlJSUnJycqKiosLCwvLy8xMTEzMzM0NDQ1NTU2NjY2NjY2NjY3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc4ODg4ODg5OTk7Ozs9PT0/Pz9DQ0NGRkZJSUlKSkpLS0tMTExMTExMTExNTU1NTU1NTU1NTU1OTk5OTk5QUFBRUVFUVFRXV1daWlpcXFxeXl5gYGBhYWFhYWFhYWFhYWFiYmJiYmJiYmJiYmJiYmJiYmJjY2NjY2NkZGRlZWVlZWVmZmZnZ2dnZ2doaGhoaGhqampsbGxubm5wcHBxcXFycnJycnJzc3N0dHR0dHR1dXV2dnZ3d3d6enp9fX2BgYGDg4OFhYWHh4eIiIiJiYmLi4uMjIyNjY2NjY2NjY2Ojo6Ojo6Pj4+Pj4+QkJCQkJCRkZGSkpKSkpKTk5OUlJSVlZWXl5eZmZmampqcnJydnZ2enp6fn5+goKChoaGhoaGioqKioqKioqKjo6OkpKSnp6eqqqqtra2xsbGzs7O1tbW2tra2tra2tra2tra3t7e3t7e3t7e3t7e4uLi5ubm8vLy/v7/Dw8PFxcXGxsbIyMjIyMjKysrLy8vMzMzMzMzMzMzNzc3Nzc3Pz8/R0dHU1NTX19fb29ve3t7g4ODh4eHh4eHh4eHh4eHi4uLi4uLi4uLi4uLj4+Pk5OTk5OTl5eXl5eXm5ubm5ubn5+fo6Ojp6enr6+vt7e3w8PD09PT19fX29vb39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f39/f4+Pj5+fn6+vr7+/v9/f39/f3+/v7+/v7+/v7+/v7+/v7///////////////////////////////////////////////8I/gDzCRxIsKDBgwgTKlzIsKHDhxAjSpxIsaLFixgzatzIsaPHjyBDihxJsqTJkyhTqlzJsqXLlzBjypxJs6ZNhuusRYtmbd3NnwLbNUtGNFmzdkBvWita9FpSm0OZGn1aU2pRqiHbIX24zipRn1g5avu1axcwbQ7TeU2WzmE8deLEqYsX9qC2XmXL9kLLUK3XtgzjpYsbNx3dugSD5c3ra6tCv1YBLxxMOC5YxAIXL17Wd63khOsqV8Y8kKzmstgme17oTjRhdaQFCjtdFpjqvwvhuhZ3GbM22mWtPV6dsN3uuIdjAwPeOCFkqZ8NUnYNO7ZAbMB3RXNO/CC74+KS/lufTbtXdendC8YD39t6O7y0gyF8zjT6wNC77VuPlj01etwGtXYcO9Yd5AtwvxzUlVftCaSba/oVeE12whm01kHGHedOgQgtR5svB0XFVDMHTSfaeRwWpA6FBi0llVMFZbibeDZhw4srsfRSYUPLAGdbjCIa5dhAD4pGoEOwoMFDBlH0UhI2rqgipZS1+LfQex8qWM1O1TSYj4mERWhQL0I8YKaZGTg5Ei9TtqlKL0cqRE2WE4EZ15AIXYPGmXw+AMVI7Ljppis/KuThZhR9J5qXBe2RQZ99whiSoIK+Qo1C7ZhWG54QFYniQaKoACmkJNVCqaC18IWQNcAAc+lF/u2oow6nBAlT5qh9BkGSNlGe6uYvcbZ0TR24QoqBME++4uugJLbUyaPF8smDmiWx88uybvISrEnXRBFtn3RIepI1pmIrJS8qBfHtmUHA4lIzypqL7EmOrPuACp3ExA4wvfqK7klQfIvBHuLCpA2b/qIUcLFQzGuTNbGc2qxJneDKg7tPwetmLen2iS9izdTiyivAqnQNHSpgEES+Kbbs8sswxyzzzDVZM83NOOd88443+ULLz0AH/TOIHWETiyeaJK300kxr4kksVr60zBwsiGD11VhnLQILc3CGkTVINy12057wzJIvVWutttYsEG3RK2PHzfQrMJmx9t1Zm4FR/thyyw0KTCvgLbgIPmAESt99//1SD4Pj3QNGcCMeN90v2d342npfBLbkYpcNky+BX571Cm5bhI0tfEvuiS1Ru7RMHqFfvkIeXnNks864m12TL7P07vvvvZdO8/DEF2/88ci37MsnjkjyipghYWNIEz+kMQpivkgSyPbbf6JSGjaEH34T1z+1DCfcpx+I8CONIv77Nkyxy0/XhKK++qGgNAf88NOx3UzpkIUj7oc//fEPfj+QROvOpj0Cqm9+J/HEAflHPtd9woH3y19KwDdB+KUBgihJxysweD9WQA8k2NhfB+FniAWGpBoNJOH2GsE+lIziByt8XxMKJZJrDFCG/tt7HkywQYgciu8H/xPJBYH4iYIVBBeQgEQsMBIKO9jBFQqJBgdzmAaSAFEStbNLIupAxjokQlURwQYbksDGJLDBhQN5RROMOJJ0kLARsmAIJMpYRlFQRBJtbKMdGCIJHHYQjhuxHwFNyBBY8LGMeKAIFALZRg0qBBt5mOAcSFKNRqjvE9VoiDbw8Egy8uEgxWgEHejQiGIcBAyUZGMUEEkQYGwxfD/g4QtD0QhNsCKMCxFFKckICYNUQw1cSCYX1BDKgtghlmyUxEN2kQcp/GAOuqzZMMmIC4NMQpnK9IRBXAFNNr4qZnsc5ikNgkxwLvOV5RxkzHyxzTp00yDu/lTmQchZzlnEjA/bRAQq85lMVxpkDeUMA8xcUU/5GOQXBOVCgsZUziSIs2Wj3CYmEAJRgk7UIHoo5yxb9olt4kF3AuloPj9aEGpUVKAcCkY9scjRiLK0IJ6oqEOtk85S8gGNBVGpO29KEGzAEpryjM0z6nnPmnpUIfyE5k4xU9JhFlMhQgUnUZ1ZTpiSBhHbnOpBsqrMrRKkF/G0zjb9uBCyJtOsBAEkNK2DCZ8Cdaw2ZYhRY6kH6zyDlJB8RkPcKtGGBGOSbYSCWBHzjHRCQrCDzathn5kEOyyWNNq4q0KKEVGDOgQbtDReRJOnkXaCUw2kzcg33XnR1FrkmKdtIqZrLVIMRqySEZ6drW53y9ve+va3wA2ucIdL3OIa97gnCQgAIfkECQQA9QAsAAAAAHgAeACHAAAAAQEBAgICCAgIDg4OEBAQERERExMTFBQUFRUVFRUVFRUVFRUVFRUVFRUVFhYWFhYWFxcXGRkZGxsbHh4eISEhIyMjJSUlJycnKCgoKioqKioqKioqKioqKioqKioqKysrKysrKysrKysrKysrKysrKysrKysrLCwsLS0tLi4uLy8vMTExMzMzNjY2ODg4OTk5Ozs7PDw8PT09Pj4+Pz8/Pz8/Pz8/QEBAQEBAQEBAQEBAQEBAQUFBQkJCRERER0dHSkpKTU1NT09PUVFRUlJSVFRUVFRUVFRUVFRUVVVVVVVVVVVVVVVVVVVVVVVVVlZWVlZWV1dXWFhYWFhYWVlZWVlZWlpaWlpaW1tbXFxcXFxcXl5eX19fYWFhY2NjZWVlZmZmZmZmZ2dnZ2dnaGhoaWlpaWlpampqa2trbW1tb29vcnJydXV1dnZ2eXl5enp6fHx8fX19fn5+f39/f39/gICAgICAgYGBgYGBgoKCg4ODg4ODhISEhYWFhoaGhoaGh4eHiIiIioqKi4uLjY2Njo6Oj4+PkJCQkZGRkpKSk5OTlJSUlJSUlZWVlZWVlpaWl5eXmZmZnJycoKCgpKSkp6enqampqqqqqqqqqqqqq6urq6urq6urq6urq6urra2tr6+vs7Ozt7e3u7u7vb29v7+/v7+/wMDAwMDAwMDAwMDAwcHBw8PDxMTExsbGyMjIy8vLzs7O0NDQ0tLS1NTU1NTU1dXV1dXV1dXV1tbW19fX2dnZ2tra3Nzc3d3d3d3d39/f4ODg4eHh4uLi4uLi4+Pj5OTk5eXl5ubm5+fn6Ojo6enp6urq6urq6urq6+vr6+vr6+vr6+vr7Ozs7e3t7u7u8PDw8fHx8vLy9PT09fX19vb29/f3+Pj4+vr6+vr6+/v7/Pz8/f39/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+////////////////////////////////////////////////////////////////////////////////CP4A6wkcSLCgwYMIEypcyLChw4cQI0qcSLGixYsYM2rcyLGjx48gQ4ocSbKkyZMoU6pcybKly5cwY8qcSbOmTYbdjPnyZazbzZ8CwfHCRRQXL3BAbyIrWnRZUptDmRp9WlNqUaohw4WD2M0qUZ8P0aHDulBbLFWqZmlzuM0rrm0OxV2TJu2aOLIHtblCi9bVWoZtvcJlKK4aXbrV7uIlaIsvX1hbFwa2OlghOmuHD2dbTNCxY1+A3VZOqC1zZs4Dz3pGe02y6IXgTB9ujboer9VoZ7kWvHCubGl/UWvDjdZpwslSRxv09puu4tqziEM+/hrh5ea0a9e7RlyVMOq8Ef5uay7tufbbuF2BNYicqfKB48gH114v3F7ctsRXN5itebWx9A0kTHfZEdReUe/VE1tzCWoHC3GxHNSVV+sR5Jts1gRoEDXdGVeQWwcx1xxSGhYUHW6wHBQVU7wchNlvBZYoUDcdGrSUVB4OJOJv4yR1zSuikBKLMw/5QpxuBQnFIokWNjefTdeI0smUU6oSI0L2oShhMTsVU+FAL5r2X1KvUGlmJ7EwmdAxWk5kmGzeJAXOmWeKggtDJ35GUWmmbfYUnXSOgoxC4aiWW2QSoXNhXQAmpQqgdKrSoEDLzDLLMRh1c801cWK1TSiQ0jmLmjJqdM0oodb5XakcgTNLqv5nvkIqqxc58yisU75Ca0fCoIprL7u2iguoqeoaLEfblBmqscdy5AwpkK7aLK++UqnKtCENGMooo2Lr7bfghivuuOQ6JA0y6KarLrrSJFXLK/DGKy+8tXiUTSmTPKLvvvz2+8gkpfgJ0zBqXMDAwQgnrDADF6gxTEbS5OvvxP5O0u5LtRi88MYLX1DvRaNQLHK/o8DEBccoK8wFRhKPPHIlMFmQ8swMtIBRJS67DPNLLdCcss0g5zxyyS+d7DPHK18UsdATWwxTLTIfrbAFH1+UTSstCz1JKwK/NEwcUR9tQRwPd3Tuumhf/FMtrrTt9tttV13u3HTXbffddM9Cif4giIzyZUnYCAIEDF6EstgsiNyhuOKUqOQFCZBDDoThTwUjyeKY34GkSaFE7jkJRkR40zWXZJ75JSip8fnna2A6E42CmH566qt/DsMj2MSEuOymp3hSJbWvPrlLwVDCu+mop/R48J97ITpK3YxyvOmh/E0SNqoz/7kguZukTOLTLy7I5iuF8oL2ngOxS0nXxB6+4n7DhE0g6EcOg+siGf8+JVcSBAsiiDgFRjqxhjUQDSHHWB76vECS9yEiGArhRiDSQME0BIIbewKDDjaoAzA8qSCl+EH9RtKN6QniWgtBRAUrCAqKLIKDHFwDQx5xPuZ1LySlk131GGKKFVawDf4UEQIMOdgJhmADDsFTA0mU4b7FUUIZDeFGG3xIQTkcJBiEoCAhIGgQKgxxg0L44EF2oUDIvWB9S7yEICQRCi42BBRUpCAiDOIMLzThjk3wApEKsoYvbnARD4kFHIrwAjWg8SfUiCMFfUeQR+ARj40ryCj8uEEo7kqFcbSiQbrwyDsysIuUlCGtaKHINDCSIJ3E40EmSclW0EoOigzEFVN5RzcSRIN+pAKrRlFKYBnEFrRsQn4MMgtK6iCSGpKiIiWBEGDScpgGiQMlw1iiSiiyDdRoZjChWRBlGFOWAepFKQ/4y20mhBLGBA19MElFOWBQm88kjRf9KMraGKOUp7EsZzwTwko/qhM11ozjHBXizFRy8yB99CM4UTPBOPoyIQXt5EGJGUrtKLKFC4noIydqkBf6UTuSaOc7CWrOsswThnHQjjGm+ENjNESjeOSoQXwhRA4K4Z+oMQYmEeHSl5aUIb5I6Bpwqh1ujLQhwQimLRmiDTGGK5h4gwgnO9mFqD7EkZ1EplUX4oyp3rELe9wqQ4IxCDSgYRBLFata18rWtrr1rXCNq1znSte62rUeAQEAIfkECQQA+AAsAAAAAHgAeACHAAAAAQEBAgICBQUFCQkJCQkJCQkJCQkJCQkJCQkJCgoKCwsLDQ0NDw8PERERFBQUFhYWGRkZGhoaGxsbHBwcHR0dHR0dHR0dHh4eHh4eHh4eHh4eHh4eHh4eHx8fHx8fICAgIiIiIyMjJiYmKCgoKysrLi4uLy8vMTExMjIyMjIyMjIyMjIyMzMzMzMzMzMzMzMzNDQ0NDQ0NjY2Nzc3Ojo6Pj4+QUFBQ0NDRUVFRkZGSEhISEhISEhISEhISUlJSUlJSUlJSUlJSUlJSUlJSkpKSkpKS0tLTExMTU1NTU1NTk5OTk5OT09PT09PUFBQUVFRUlJSU1NTVFRUVlZWWFhYWVlZWlpaW1tbW1tbXFxcXV1dXV1dXl5eXl5eXl5eYWFhYmJiZGRkZmZmaGhoampqbGxsbm5ub29vcHBwcXFxcnJycnJycnJyc3Nzc3NzdHR0dXV1dnZ2d3d3d3d3eXl5enp6enp6e3t7e3t7fHx8fn5+f39/gYGBg4ODhISEhYWFhoaGh4eHh4eHiIiIiIiIiYmJiYmJioqKi4uLjY2Nj4+Pk5OTlpaWmZmZm5ubnJycnZ2dnZ2dnp6enp6enp6enp6enp6en5+foaGho6Ojqampra2tsLCwsrKysrKysrKys7Ozs7OztLS0tra2uLi4u7u7vb29wMDAwcHBwsLCxMTExsbGx8fHyMjIyMjIycnJycnJysrKy8vLzMzMzc3Nz8/P0dHR09PT1dXV19fX2NjY2tra29vb3Nzc3Nzc3d3d3d3d3d3d3d3d3d3d3t7e3t7e3t7e3t7e39/f4ODg4eHh4uLi4+Pj5OTk5ubm6Ojo6urq7u7u8PDw8PDw8fHx8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8/Pz8/Pz8/Pz8/Pz8/Pz9PT09fX19fX19vb2+Pj4+vr6+/v7/Pz8/f39/v7+/v7+/v7+/v7+/v7+////////////////////////////////////////////////////////////CP4A8QkcSLCgwYMIEypcyLChw4cQI0qcSLGixYsYM2rcyLGjx48gQ4ocSbKkyZMoU6pcybKly5cwY8qcSbOmTYbleN26xavczZ8C0dWKRTRWLXRAbx4rWnRZUptDmRp9WlNqUaoh0SF9WM4qUZ8P163DurCaKlGiWFVzqM1rLG0O0UE7dgzaVrIFq5VCi7bUWoZtvcJliG4ZXbrL7uIVOIsv31OKEQa2OljhumaHD0dbTNCx41yA3VZOGC1zZs4DU3nmK23hZKmjD54zfRgaaoG3VqNl5Vr0wrm0j22+XU032mYKXzONXRBccLqRF7MyDjmh8qLMB15+bvu2QGnGRf7xsu4b4bTnx6Jzzq27lDnJ5Q2mQz/ce9C9umfBF4ywdHBlY9k3EC/htWbQdURlN9tz0whY0CnGqXJQV16BVdAzzzHjYEHQhIecQW4d5Nxz52xY0HS6nXJQVEzVchAz3JlYkDkeGrSUVE41h146SUlziiaerNJdQ7kYx1tBQrUYHXC0GdiQOueYM845AY4kjSaVZJllKU4qhA5+nqloUE479fTif1VaZg44bLI5TpognaLlnJWsol5Bx6RIkTLBgdPQOW0GCk6JIqFDJ52a2MIQip9RJA1t9SWEzjiCCkrSoYdykiNC6KjGFyt3MrQOhoc9A2dB6pRTaaUkkYLpof6l+JlQM6ywcgxG1UADjawIubPmqoK+NxI4WL5KZyyhooQOsJWO405J0mxiLKK9uJQOpcwGas6pWcUyLZ3VqQRotoEmGxI0rn6bpZgo/UouOOao41Iv0qoL2knLvlsOjzChY0uxxrJb0rjMjmOuSuDIGTBKBK96zrM3QdPJq9WelA6w8VJFL52kqOQum/su1gspmmyC7ErolDOOOfzK6PLLMMcs88w0cxQNMzjnrDPOkdp0iypABy000Ld4RA0pjByi9NJMN30II6RQI5MyY0RwwNVYZ631ARGMoUxG0STt9NhOM9LzSrdYvfXaW0dQ9EWckC1305zARAXbeGtNBf5Gi8zt9yGOwKR23nmTgJEjf88d+EskEE644XAnLnfdL93tON57XxRN35I3vcjZKqV9+dpuZ0TNKZxLvsgpUsekDByDXx4BHF93dPPOuIM+0y2p9O77772/XfPwxBdv/PHI1yRLI3oA4omwKFXTRw0mVEE5WbIA8sb22zeiEhUbhB9+DdcD9csi3Kf/hiwobSL++xsIcaRN0mCivvqYoCQG/PCPoeFM5iiFHu6HP/3xD34mWMRfXpI9At5PQieBxAH5Rz6X/KIRDrxf/lICvgnCrwrzO4k5PJHB+20Ceiepxv48CL8+LJAkz9BeCbmnB/a1ZBMlYOH7anAvKw1whv7b6wQKWSI9HYrPBP8TCQaB2IguGUQVgxhEKTCiiTGMQRQKYUYHdVgFkgDxD79QSDn24IUyemEPFoqINq7wgja+4ArZGUgpamDEkZijhHqY4kICYUYzaoIiinCjG8fAkEXk0IMv/Ij9CHhChpSij2YsA0VsIEg3/rEsbJigGGD4Q+414hkNKUcZIFlGNhxEGH4AAxj8IIyDIKGSbbxBHAuSiy2GrwQ9FMkzMKEHRWwijA7RBCnLGAiDQIMKQkimEKgwpIGMAZZtVMRDWMGGHpRADLm0STSGWUYIEkQRylTm4gjyCWi2EZQw4+MwTWmQKYQzmZkryCuhSciX1YKbXv7wJkHeqcyDlNOcqHgZG7iph1PyM5mtNIgVzKkEl3ECn7o4yC0OKgThEYQW5nzBOAUkSm4uAiETPahFCcIGc8pyQ4/gJhl0F1J+jnQgz8goHxykC3yWryAtfedLB+KIjO5CQOokJRvSiFOK7lQg2pgnLOt5m2XgU58GyWk4jyqQf0Lzp7dJ6TCLqRCpKpOqAnkmNGd6Gz1wM6JdNepCMEpP73DzkmkVKUMCCU3vLEKoRJWoWl2jVDeyEzXLIEMfybCpuLq0IbugpBttgNWmqjMQhTWsTh2yC7GOobH2KUdeFSIMiiaULbMkHkWTdxF3vnMKpLUION+50dRGBBqmTSHmFJrp2oigUpWsrK1ud8vb3vr2t8ANrnCHS9ziGpe4AQEAIfkECQQA+gAsAAAAAHgAeACHAAAAAQEBCQkJEBAQEREREREREREREREREREREREREREREREREREREhISExMTFRUVFhYWGBgYGxsbHBwcHh4eICAgISEhIiIiJCQkJCQkJSUlJSUlJiYmJiYmJiYmJiYmJiYmJiYmJiYmJiYmJycnKCgoKioqLCwsLy8vMjIyNTU1ODg4OTk5Ojo6Ozs7Ozs7Ozs7Ozs7PDw8PDw8PDw8PDw8PDw8PT09PT09Pj4+Pz8/QEBAQUFBQUFBQkJCQkJCQ0NDQ0NDRERERERERUVFRkZGR0dHSEhISkpKS0tLTU1NTk5OT09PT09PUFBQUFBQUVFRUVFRUlJSU1NTVFRUVVVVV1dXWVlZWlpaXV1dX19fYWFhYmJiY2NjZGRkZWVlZWVlZWVlZmZmZmZmZ2dnaGhoaWlpampqa2trbGxsbW1tbm5ub29vcHBwcHBwcnJyc3NzdXV1dnZ2d3d3eHh4eXl5enp6enp6e3t7e3t7fHx8fHx8fHx8fX19f39/gYGBg4ODh4eHi4uLjY2Nj4+PkJCQkJCQkZGRkZGRkZGRkZGRkZGRkZGRk5OTlJSUlpaWmZmZnZ2doqKipKSkpaWlpaWlpqampqamp6enqKioqqqqq6urrq6us7Oztra2uLi4urq6u7u7u7u7vLy8vLy8vLy8vb29vr6+wMDAwsLCxMTExsbGycnJy8vLzc3Nzs7Oz8/P0NDQ0NDQ0NDQ0NDQ0dHR0dHR0dHR0dHR0tLS09PT1dXV1tbW2NjY2dnZ29vb3d3d3t7e39/f39/f4ODg4uLi4+Pj5OTk5eXl5eXl5eXl5ubm5ubm5ubm5ubm5ubm5ubm5+fn5+fn6enp6urq7Ozs7e3t7u7u8PDw8fHx8vLy8/Pz9PT09PT09fX19vb29/f3+Pj4+fn5+vr6+vr6+/v7+/v7+/v7/Pz8/Pz8/Pz8/Pz8/Pz8/f39/f39/v7+/v7+/v7+/v7+/v7+/v7+////////////////////////////////////////////CP4A9QkcSLCgwYMIEypcyLChw4cQI0qcSLGixYsYM2rcyLGjx48gQ4ocSbKkyZMoU6pcybKly5cwY8qcSbOmTYbbbq1adWvbzZ8CwaUiRZRUKnBAb+4qWvRXUpuomBJN9bSm1KJVQ5IjB3HbVaI+H6pTl3XhtU+XLpm65vDaV1JsG4IDdusWMKRlDV7blDbtprhm3wJWCG5X3bq78OYdmKpv305cA38djFBdr8OHiS0m6NixK4ZuJzM0hhnz5oFoO6edJvkqZYPdSh8GdlogK9VpTbWW+rogXdm3jNXWdw132mAKQ7tODryu4tOkjENOqJx3QsvNaQ/XN834JV3UBf4nnNb81vPat3Fv6oawOtPe+siVF75dIDm+uKkedF8UPrHmu5BVn0C6eMeaXuLBVt6BAwrUiXGfHOTVV2EV9EtzvTRIkDHeIWfQW/uVx56GA0WHWycHRSUVKgddBpx2JArUTYcGLSWVUwVdU15kP1HTCSSXiHLMQ64YR4pB4KhIFCrn6fObbMk8JA421UxzjTklUQOJIlxyyQk1Dd13ooQ68VQhQS6WFmBD5ljjzJtvToPlSJ10aaciooTDUC9jTmSYbPARJA82cBbqTKAahXPnnZCwwpCJnlGUjGyaLbTNNIYaKs9Iiy4aCYwHkZNaWqTwGJE6Fx72i4AIhUNNpv6ZksRJp4tyko1CwRCV4UXVAAMMouq4Cauh1pCUzZa03pmKni/Jk82wmU7DqkjURJIso7y49A2m0BZazZwlhZPKtXd2wixK8lzTraHZbJrSMbOSyyWKKQm7rjPWiOMSL9bKCwtK3dzrDDXfxBQOK8gmS69J6nY7zTbuypRNnQqj1PCw10xL0zGX0JrtSd8MW42+T/F7Jycq2fsmwYvxwgkkkSyrkrPUTGNNwTHmrPPOPPfs888VOTPM0EQXPbQzQE+EDSeB7OH001BHvUcgnGAzkzzujKX11lyP5U7EFznTtNRkSx0I0jBl3fXaXbuTUSVlxx11JWmzbTfXbl8EiP7cfO8xSN13B563RYP0LfffL6kduN2DVwS34WXTnfjidzdOkTN7Qx41IGhPTnnbGmHjSeaQA+KJ1TJh/bnXYG/kTDCwxy477J0nbfvtuOeu++68T7TKIG7coYk3KmFzBwoVKHHJYqvcMcbzzyOOkhIIVF89Css/5Qsg0Hc/xiooVWL9+AjkoMpP1TzivfePoIQF+eRnUQxN3nTixvrsuw8/+RUEgvpLzcPf+o50kkfsD37Yc4kvBiHA9bUvJdQ7IPmUcL6UeEMTDVxfJIiXEmy8T4Lku8P/SFIM52UQemwAX0sqUQEQjg8FuShJNe53wucNDybYqIMLrVeB+Y2Egf41HEQ1FHKKPvRhYRWRRBaygLKEFCOCLlQCSWpYB18opBtviIIWo/CGEUkkG00AgRhB0IRbJaQTKNjhSLyRQTYgESF72OIWI0GRQIxxjFlgSCBaKMERfkR9+NsgQzohxy3mcSIpuOMYJcEQbJzhgFggIRu8NwgfLqQbWSikFslwkF/UoQpVqAOOCtIDRYpRBWZcSC6gWL0KxJCEj2ADICJhRYdEQpNa3INBnIEEGviSBkionUCyYEoxBuIhqjgDDiqAhVf+ZBq41OIpDBKIX/5SEQbhRDHFOCSdxRGXnDTIEazpSyQcpJTFPGSMWBHNKEzTIOT85UG0uU1R5IwM0f58Qyfj6ctREmQJ2/xBjDLRTvAY5BX8pMErDsKKbYKgERrCZDSPeRCE8nOhBzHDNlHZoEZEMwsMKohF44lRgxzDoXMYkC7amYmEjJScJTVIIxz6seF8U5Nk8OJBExrTgmQDnaZU52mC0c53IuSl1uxpQehZzJpuxqO41KVCkPpLpRaEmMVMaW2yiEuDupSnC2loOocTTTouhKq+tGpB7FjM4QQCpzo9KlgX8lNTmmE4wcikIT101rkuhBeJHGMKnLqZYHxzD3zt60UdwgusZoGwtelGXBfyi4T6kyHZSOXuEto7ioyTnEfo7ESqSU5sijYizvisL48gzNM2xJNUoBmCKF1L29ra9ra4za1ud8vb3vr2t8AtS0AAACH5BAkEAPsALAAAAAB4AHgAhwAAAAEBAQICAgMDAwQEBAQEBAQEBAQEBAQEBAQEBAQEBAUFBQUFBQYGBggICAkJCQwMDA4ODhERERMTExUVFRYWFhcXFxgYGBkZGRkZGRoaGhoaGhsbGxwcHB0dHR8fHyMjIyYmJioqKiwsLC0tLS4uLi4uLi4uLi8vLy8vLy8vLy8vLzAwMDExMTExMTIyMjMzMzU1NTY2NjY2Njc3Nzc3Nzg4ODg4ODk5OTo6Ojs7Ozw8PDw8PD4+Pj8/P0FBQUJCQkNDQ0REREREREVFRUZGRkZGRkhISElJSUpKSktLS0xMTE1NTU9PT1BQUFJSUlRUVFZWVldXV1hYWFlZWVlZWVlZWVlZWVlZWVpaWltbW1tbW1xcXF1dXV9fX2BgYGFhYWJiYmNjY2RkZGVlZWVlZWZmZmhoaGlpaWpqamtra2xsbGxsbG1tbW5ubm5ubm5ubm5ubm9vb29vb29vb3BwcHFxcXNzc3Z2dnp6en19fYCAgIKCgoODg4ODg4ODg4ODg4SEhISEhISEhISEhISEhISEhIWFhYeHh4qKio2NjZCQkJSUlJaWlpiYmJmZmZmZmZmZmZmZmZqampqampubm5ycnJ6enqGhoaOjo6ampqenp6qqqqysrK6urq6urq6urq6urq6urq+vr6+vr7CwsLKysrW1tbm5ub+/v8HBwcPDw8PDw8PDw8PDw8PDw8TExMTExMTExMTExMXFxcbGxsfHx8nJycvLy8zMzM7OztDQ0NLS0tTU1NbW1tfX19jY2NjY2NjY2NnZ2dnZ2dnZ2dnZ2dra2tra2tra2tra2tra2tra2tra2tvb293d3d/f3+Hh4ePj4+Xl5efn5+np6evr6+3t7e7u7u7u7u7u7u7u7u/v7+/v7/Dw8PHx8fLy8vPz8/T09PX19fb29vf39/j4+Pn5+fr6+vv7+/v7+/39/f39/f39/f7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v///////////////////////////////wj+APcJHEiwoMGDCBMqXMiwocOHECNKnEixosWLGDNq3Mixo8ePIEOKHEmypMmTKFOqXMmypcuXMGPKnEmzpk2G3m6hQnXL282fAsedIkWU1KlxQG/qKlqUV1KbQ5kafVpTalGqIc+dg+jNKlGfD9etw7rwmidKlE5dc2jNKylrDsX1kiWrlziyB69hQosW01qGbb3CZSjuFl26t+7iJYiKL99NWxcGtjpY4bpchw//WkzQseNagN1WTqgsc2bOA896RktNsuiF30wf7oVaoKrVaE+5FrxwrmxZymrvu4YbbTGFk6WONljtN13FtU0Vh5wwOdPlBC87py18H7XilHT+VX+NUJpzWdCF38aNCRxC60WxCzR3Pnh3gef24kb1nrzBX87dMtZ9AukCXmsGwUeUfLE5Jw2BBG1SnCcHdeUVWAXt4lwuEBIUDXjHGeTWQc05902HBEmH2yYHRcWUbgZh9ht3KAoEDogGLSWVUwWV+Js5SVXTiSKWmBLNQ7UUZ4pBQr2IVEG+yQbNQ+RUE80z1ABJUjWKEOKll5lU01B+K1aoE08YEiSjaQI2ZM40ysQZ5zNaisTJl3gSYko5DPVS5kSGySbmQuxUI+ehyiAYUjl55qnIKgyp+BlF0Mi2WVnPIIooOyM12igjISJ0jmpomRKZROtoeNguAyIkDjT+mmpKUiaeNppJmgYVY4opNFY0TS+9DIqQOnDGiug0JHnTZa15osLnS+xYY6ymz6hTUjWMMOsojyx9k+m0h0ZTJ0nloKJtnp08ixI71ICLqDWcphQNred62YlKxbqrzDTkuMRLtvXeglI3+ioDzYkwlbPKssxyglK74D5zTbwyeXNnww+DS421N0VTSa3clvSNsdH0+9S/eWaCL6IHL8ZLJoow4qxK0ULzzDQI16jzzjz37PPPQFM0jTNEF2000cgCtY46TDftNNOtbnSNJnnMYfXVWGc9Rx6a/AUTO+N4083YZJdtdjfejEOxRdNUrfXbWueRtEvriH323Wd7EzX+RZbA7XfWlsAkDt6Em50eRW7//TcfMNldeOE5V8SH4ooz/tI3jz8eOd+U/x34S4NnTvjhE7Xd+dtyw1S36HfrndE1oCTeeR6geA0tOY6L7g05a2s09NHAz33T0k8Xv3fQyCev/PLMN7+SKoSUMUcmTw58BwgUBIHJYqrMkcX33xOiEhAHlF8+CNs/5Use4LefhSooYWL+/AfEAP9N1ijivvuKoPQE/fSDwpRmMg5PlGF//PMfAOlHAT50IybdQ+D++HOSRSwQgOhziS8IIcH99S8l5Lsg/YJwP5SMIxMd3J8jqneSbvxPhPS7wwNNEg3vpRB8YyjhSjAxARjODwT+uyiJNQ54w+9RDybdsIMPzUeBAYrkD0XMwh/kMxBU3OEOoMAIJaAABYclBBoh9GEQSFJEOPhCIeE4wxDWOIQzhIMi3iDCBua4ASLgqiClAMESRzKOFI7hXgu5AxvZ2AiK6IGOdIQCQ/jQQxHOMCT6Q+AKGeKJQbLRCRQRASLpSAmGdCMMF3wCSaIxBvf94UgMCYcTLLnGLRwkGHVAAhLqEIyDzGCTcxTBHQ+yizCWbwJBHKUixpAHR5zRIY1g5RrvYJBp8EAF0FQBD4QnECjgco56eIgqwgCDCTwhmD+hhjLXSEGC6CGa0UyEQThxzTk+aGeCVKYrDfJMdErTlu3+VKTOZDHOIZSTIPaM5kHY2c5/QmgL4zzDKwMKzVoaRI7XrEGNMNFPcBIEFwxVAS4OQot2buCDBFLlOLN5EIwydKMHAUM7dQmhRIyzCYoqiEkDilKDSMOjcyDQLvqZvpJmtKYGUYRHe4WaeLJyC29EyEztCdSCeOOW19RnbZ7RT4PK9KcKIeg1iYoXlyqTmQpZKjqbahBrXjOntVGjMi3q05MupKNRFc44C7kQsUaTrAY55DWFo4ejJjWsWF3IU3EJBuE8owmDbMIzGmJXaOLVIL3QJB1FwFW8PCOed1gsYwPbJ7NCobKcCcdfGxKMjDrUId7YpfIy6jyL1BOdPGgqbUXOaU91yrZ0r5UmNW/7EFjKkpa8Da5wh0vc4hr3uMhNrnKXy9zmOi8gACH5BAkEAPkALAAAAAB4AHgAhwAAAAMDAwcHBwoKCgwMDA0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ4ODhAQEBERERQUFBUVFRcXFxoaGh0dHR8fHyAgICAgICEhISEhISEhISEhISEhISIiIiIiIiIiIiIiIiMjIyQkJCUlJScnJykpKSoqKisrKysrKysrKywsLCwsLC0tLS4uLi4uLi8vLzExMTIyMjMzMzU1NTU1NTY2Njc3Nzg4ODk5OTo6Ojw8PD09PT4+Pj8/P0FBQUJCQkNDQ0VFRUZGRkdHR0lJSUpKSktLS0xMTExMTExMTExMTE1NTU1NTU1NTU5OTk9PT1BQUFFRUVJSUlNTU1VVVVZWVlhYWFhYWFlZWVpaWltbW1xcXF1dXV5eXl9fX2BgYGBgYGFhYWFhYWFhYWFhYWJiYmJiYmJiYmJiYmJiYmJiYmNjY2NjY2VlZWdnZ2pqam1tbW9vb3JycnR0dHV1dXV1dXZ2dnZ2dnZ2dnZ2dnZ2dnd3d3d3d3d3d3d3d3d3d3d3d3h4eHl5eXx8fH9/f4KCgoSEhIaGhoiIiIqKiouLi4yMjIyMjIyMjI2NjY2NjY6Ojo+Pj5GRkZSUlJeXl5qampycnJ6enqCgoKGhoaGhoaGhoaGhoaKioqKioqOjo6SkpKenp6qqqq+vr7KysrS0tLW1tba2tra2tre3t7e3t7e3t7e3t7e3t7i4uLm5ubu7u729vb+/v8HBwcTExMXFxcfHx8rKysvLy8zMzMzMzMzMzMzMzMzMzMzMzMzMzM3Nzc3Nzc3Nzc/Pz9DQ0NHR0dLS0tTU1NXV1dbW1tfX19jY2NjY2NnZ2dvb29zc3N7e3uDg4OHh4eHh4eLi4uPj4+Pj4+Xl5efn5+np6e3t7fDw8PHx8fLy8vPz8/T09PX19fb29vb29vb29vf39/f39/f39/j4+Pr6+vz8/P39/f7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v////7+/v///////////////////////////////////////////wj+APMJHEiwoMGDCBMqXMiwocOHECNKnEixosWLGDNq3Mixo8ePIEOKHEmypMmTKFOqXMmypcuXMGPKnEmzpk2G2maNGjVL282fAr+F8kTUU6hvQG/WKloUV1KbQ5kafVpTalGqIc+dg6jNKlGfD9Olw7ow26dHj0Rlc5jNq6e1DbvdWrXqVjeyB7NNQot2Etyybv8q7BaLLt1Yd/ESJMWXr6WtgL0KRphulmHDwxQTbNxYFsO2khkau3xZ80BPnPlai2x1skFtpA3fMi3QVWq0olhLdV1wbuxVxmjny3Yb7TGFoFsrvPabbmLaooo/Tph8d8LKzWcLz2et+CNb1AP+J3TWfNVz4bZvT+KGsDpT3vnElQ++XeC5vbdJtRd/cFjzWGPVJ5At3q1mkHtF8QZbc84ISJAlxX1yUFdegVVQLc3N4iBBznh3nEFuHcRccxZumE90t1lyUFRMhXKQZb9pZ6JA3Hho0FJSOVXQiL+Jk9Q1nhAiiSjQPCRLcbkVJFSLSPXWnDIPeRONMsVA4yNJ1xDix5ZbVnJNQ/elOKEsO8lS4kAwkgZgQ+I4E8ybbxZzpUibcGmnH6LMmVAwYk5UWGxfLpRONHAWGkyRIolz552EwMIQip1RpExsmS2ETTGGGhpgSIsuisiHCJ2DGl+iQCZROhgaVsumB21zTKb+mZJUSaeLVnJmQceIIkowGEVzyy2BIoSOm7Aa2uBI2mhJ652l6MlSOtYUmykx6JR0DSLLMsqLS9pgKm2hyjibKCnZ3umJuCSlA823hlrDqknQzFrulp6oRCy7wTjjjUu8YDsvLShlg28wx9y6kjiwKLvsJiit+y0x2Lz7kjZ1Ltzwt9BUexM0ktC67UnaFKvMvk/1e2cl9hpasGK8VEIIIqSgOxK0xxDjjMEz5qzzzjz37PPPD03DzNBEFz30NEmho9XSTC+tMUfaXAIHGlRXbfXVaMBxCc4qpaPNNdSELfbYZFNzjTYSTzTN1Fi3jTUcSL+EDthl1132NU9XNIn+23xfPQlM2tgtONlcP8R2333jARPdgw+ODUZ4II644i9h03jjj1+0t+R8/z3x5YMX7tDanLcNN0xzg1433hlpE8rhnMMRiugnpbMN46Bfs03aFwlt9O9x/6R008TnDfTxyCev/PLMsxSLIFi0YUmTKaWjFTq8/xRLG0x0370gKqFTzvjjn5P9TMbE4f36TMSCUjrkx18OOur8lM0h7LNvCEriyx8/Ou+giVCwkD/98c9/8jOfTLZXwPzpp3YI9J8CW2IMQTQwf/tLSf8i+L/6peQblrhg/iRBvQNyUH7n8wg0uCdC713BfS2x3gnjd44AkiQbBGxh96YXE/jNsHz+NhSJBXUoCPgIpBRveIOLNFeEIoBCIe/Y4AmN9xEdsoE+COkGF2zARRtw4TwQ2YYOEkDGBOhgGwpRxzl+OJJviPAKS1TIG7rYRUhQBA9lLGMRGCJDDpLEEA0kIUNCQccuBoEiFMhjGT23ECn+jyTQuAL7BIGohXQjCIXkIhQOggw38IAHbkDGQVCgSDJSAI0MiWICgygSaBjiCnGQBBYZAolMcvENBrEGDD7Ayw/AwEAEIUIpyUi5hqgDHUoDYFKwYUsulsIgdehlLwthEFAMk4zR2NkcbblJg7xAmryEwSivuceczaKZNnimQcDZy4NY85rqNBEUmrkFTrKTl6L+NEgOrrmCGVkCnbwyiC3u+QHwGGQW10zAITZ0yWbWASEDvadBDXKFa57SQYVoJhAyJ1CCTrQg0UioGwQUDHSqCKIeTcghElqM+mwzk1AAI0Eiys6PFmQbpBxmOWnTDHTG8yA0BadNC/LOYbaUNhm1JS4VElRpDrUgwhzmSGmzhWYGNCFN7eVTCYLQYRJBOM2040KyysutEgSPwxROHWAq045KlCE4LeUVhNMMINARCM1oCFkL2pBiJLKMFDgqT7f5hrzqNaV9jSoRBLudbrQ1IcggaD4dsg1UNi8fBL1sRb4JzhdoliLRBCc1PysRa3CWly8AJmkh0skd7CCUq40UrWxnS9va2va2uM2tbnfL297mLCAAIfkECQQA+wAsAAAAAHgAeACHAAAAAQEBBAQEBwcHCgoKDAwMERERExMTFBQUFBQUFRUVFRUVFRUVFRUVFRUVFRUVFhYWFxcXGBgYGRkZGxsbHR0dHh4eHx8fICAgISEhIiIiIyMjJCQkJSUlJSUlJiYmJiYmJycnJycnKSkpKioqKysrKysrLCwsLS0tLi4uLi4uLy8vMDAwMTExMjIyMzMzNDQ0NTU1NjY2ODg4OTk5Ozs7PDw8PT09Pj4+Pz8/Pz8/Pz8/Pz8/Pz8/QEBAQEBAQUFBQUFBQ0NDRERERkZGR0dHSEhISkpKS0tLTExMTU1NTk5OT09PUFBQUVFRUlJSU1NTU1NTVFRUVFRUVFRUVVVVVVVVVVVVVVVVVVVVVVVVVVVVVlZWVlZWV1dXV1dXWFhYWlpaXFxcXl5eYWFhY2NjZWVlZ2dnaGhoaWlpampqampqampqampqampqampqa2tra2tra2tra2tra2tra2trbGxsbW1tbm5ucXFxdHR0d3d3eXl5e3t7fX19fn5+f39/f39/f39/f39/gICAgICAgICAgYGBhYWFh4eHioqKjY2NkJCQkZGRk5OTk5OTlJSUlJSUlZWVlZWVl5eXmZmZnZ2doaGhpKSkp6enqampqqqqqqqqqqqqqqqqq6urq6urq6urq6urrKysra2tr6+vsLCwsrKytLS0tra2uLi4ubm5urq6vLy8vb29vr6+v7+/v7+/v7+/v7+/v7+/wMDAwMDAwMDAwMDAwMDAwcHBwcHBw8PDxsbGycnJzs7Oz8/P0dHR0tLS09PT09PT1NTU1NTU1dXV1dXV1dXV1tbW19fX2NjY2tra3t7e4eHh4+Pj5ubm6enp6urq6urq6urq6urq6+vr6+vr7Ozs7e3t7+/v8PDw8fHx8vLy8/Pz9PT09PT09fX19fX19vb2+Pj4+vr6/f39/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/////////v7+/v7+/v7+/v7+/v7+/v7+/v7+////////////////////////////CP4A9wkcSLCgwYMIEypcyLChw4cQI0qcSLGixYsYM2rcyLGjx48gQ4ocSbKkyZMoU6pcybKly5cwY8qcSbOmTYbYVGHCpArbzZ8CvVmaRHSSJW9Ab7oqWpRXUptDmRp9WlNqUaohy5WDiM0qUZ8PzZnDujBapUKFLkVzGM3rpLUNt90KFerWNrIHoyVCizYR3LJu/yrcdoou3VN38RLUxJcvo62AvQpGaC6VYcO9FBNs3FgVw7aSGfq6fFnzwLOc0TqLbHWywWqkDd8yLdBUarSXWEt1XXBu7FC+aO+LdhstMIWgWyt89ptuYtqXij9OmHx3wsrNZwvf56x4Ie15A/4nRNY81HPhtm8nOk+wOlPe+8aVD75dYLm9tzUhdF8Ufq/mpoxVn0C3eLeaQfwRxRtszSEzIEGMFFfJQV15BVZBrTSXyoMELePdcQa5dRBzzVXDIUHR3cbIQVExZclBlv0G3on7bPOhQUtJ5VRBJP42TlLQVKJHIpg085AqxeVWkFAuItVbc8E8xA0zv/BizDclQaPHHFxyyQg0Dd2nIoWpXHJJKhcSFCNpATb0TTC3xBknL1iOVEmXeM6BCTkM9TLmRKb89gxD5jAj56G3GDMSOXnmqceGC6XYGUXBxJbZQs/wgiiiAobUaKN/RJlQOajhBplE5mRoWCudHpSNL/6bbkoSI582ykg2CgFj5qUWNRPnoKPCGSuiooqUzZa15jkKny+Z48ywm/JyqkjQ+JGso7yuJI2m0B76S50lkTPKtXlWwixK5hjTLaLOtGpSM7SSy+WEKQm77i3BcONSL9bK+wpK0Nx7iy/SxEROKsgmS69J6nbLyzPuvpTNnQqj1PCwxkxLUzOJ1JotSdIM+4u+T/Gb54r1IkqwYr0woocfy6rkrC+8BFMwjTjnrPPOPPfsc0XOICP00EQLfeBP5Yyj9NJMK61xRtVMQgYWVFdt9dVYkDGJiTGZEw0zRYddNDPRRDyRM1NjrTbWZBzdUjlgiy030cw8LZEia+d9tf4iMEEz999Dg3nRGHoXjsUcMMUN+NxGXtSG4Xq3AVMzi//duEV4Q7423y/5XbncglvkDOGaXz2G2yzB/XnYdUN9Cemaj3EJ1zCZI43ilTMjjdkXOWPM78AH/zvqNSXd9PF2/6z88sw37/zzKamSRxJgRALuSe+Es4023CT/kypg/CC++HmoxA026KO/jfczAWPG+PD/4NlJ5aRvPzbb8A5TNH7EH38fKPHG/e7njXPQ5BuXSIL//hfAAd5PG+N4R0zAt0D/hQIl9XPg/dbnEmDkoYL+A2BKzqfB+3FDfyH5RiRA6L9EXM8k7xBgCe8XDgm+K3wsHF8S5pc6bczQfv7bMCBJoqHAHIrvES9cSfZ+mD5tCFEkHzRiHuAjkFKQgQyYMMk5SPhDkonEiGAAEUK6EQUTmNEEUeiGScyxDSaO5BssTIKSFEKGM54xESgZhw9LaMOQ9KGCLmTIJex4Rhqk5B3f0KCTRNKMIo4vD5dTSDdoQEgzEuEgxBjDC14wBmJ4ZIsPfCIj+5AEMyRCjAxJRCXNSAaDPIMDDYhlAzgArI6Y4xvbKyCQVmnGUhjEDrKUpQihN5A6rvKSBtlAMGPJAWIOpBW8NIEvDbJMWTpTIETg5RMwWc1YepKYk4gmfQrCi242YEfPmyQv74CQcnYTnc7rAy9nEDpymhOezJzzRTQnkRB3VhOfyzNmJYmgxnbe83nLiOY0DfrO58lzla1UiD+XCdCfPYGX42ToP5/HSzwuZKLBrKjP7jDQgkr0oM5bxgzsOINlNASkshSpz5ZhTDK49KUohV43TNoQYpjzm9eEiDmDKhFlLnMDRI0IMJc5zKQ25BlGjeUGaunUno7BBS7oZFW3ytWuevWrYA2rWMdK1rKa9awiCQgAIfkECQQA+QAsAAAAAHgAeACHAAAAAQEBAwMDBgYGCAgICQkJCQkJCQkJCQkJCQkJCgoKCwsLDAwMDg4ODw8PERERExMTFBQUFRUVFhYWFxcXGRkZGhoaGhoaGxsbHBwcHR0dHh4eHh4eHx8fICAgISEhIiIiJCQkJSUlJiYmJycnKCgoKSkpKioqLCwsLi4uLy8vMDAwMTExMTExMjIyMjIyMjIyMjIyMzMzMzMzNDQ0NDQ0NTU1NjY2ODg4OTk5PDw8Pj4+Pz8/QEBAQUFBQ0NDRERERUVFRkZGR0dHSEhISEhISEhISEhISEhISUlJSUlJSUlJSUlJSUlJSkpKSkpKS0tLS0tLTExMTU1NTk5OUFBQUlJSU1NTVVVVV1dXWVlZWlpaW1tbXFxcXV1dXV1dXV1dXV1dXV1dXV1dXl5eXl5eXl5eXl5eXl5eXl5eX19fYGBgY2NjZmZmaWlpbW1tb29vcXFxcnJycnJycnJycnJyc3Nzc3Nzc3NzdHR0dHR0d3d3e3t7fn5+gICAg4ODhYWFhoaGh4eHiIiIiIiIiIiIiYmJiYmJioqKjIyMjo6Ok5OTlpaWmZmZm5ubnJycnZ2dnZ2dnZ2dnZ2dnp6enp6enp6enp6en5+foKCgoqKipaWlp6enqampqqqqrKysra2trq6usLCwsbGxsbGxsrKysrKysrKysrKysrKysrKysrKys7Ozs7Ozs7Ozs7OztLS0tLS0tra2uLi4u7u7vr6+wcHBxMTExsbGx8fHyMjIyMjIyMjIycnJysrKzMzMzc3Nzs7O0NDQ0NDQ0dHR0tLS09PT1dXV19fX2dnZ3Nzc3d3d3t7e3t7e3t7e39/f4ODg4eHh4+Pj5+fn6+vr7u7u8PDw8fHx8fHx8vLy8vLy8vLy8vLy8vLy8/Pz8/Pz8/Pz8/Pz9PT09fX19fX19vb29/f3+fn5+/v7+/v7/Pz8/f39/v7+/v7+/v7+/v7+/v7+/v7+/v7+////////////////////////////////////////////////////CP4A8wkcSLCgwYMIEypcyLChw4cQI0qcSLGixYsYM2rcyLGjx48gQ4ocSbKkyZMoU6pcybKly5cwY8qcSbOmTYbUQjVqFIrazZ8CrS06RPTQImtAb8oqWrRWUpuKmBJd9LSm1KJVQ5YrB5HaVaI+H547l3XhNEV37jCa5lDa10PSHFabZcnSrGplD07jkzYtH7YM3X6Ny7Daprp1N+HNSxBT376AuC4UfJWwwnOfECOmxZjg48eiAr+1nNCWZs2dB6L9nFbZ5NFmTyOWlVogJ9ZpGb0evFCW7Lq2auebhjutL4WUpZI2qOx33cW1GRWPnDA50+UEMTunLTyfsuJ3Zv5Vh41QmHNL0IXfxs0nPUHrRbELBHc+eHeB5fjixoQQPlH5+dDi3CZk3SfQLOC5ZpB/cOl1njAGEgRIcYoc5NVXYRUkinOeREiQMeAdZ9BbBzXnHGAeCiQdboAcFJVUFRrkyXYpElRNiAYtJZVTBZn4GzhJRbOIG304gsxDohSnW0HWvEiUIkgV5NtvvTxEzTC2zPILNiVF48YZYIIpSDQN5ceihTrxlCFBM8pGYEPY4OLKnHPOwuVIioSp5xmOkMOQLWdOdJhsCiqEzjB0JurKLyORs+eeboS20IqgUdSLbJwtlMwsiiqKzkiPPnoHMAqVs1pukkl0zoaIiVIgQv7T1NJppyQFEuqjgqxpkC+MMGKfRcfIIkuhB5Uj56yK4kISNV/euucmfr6EzjHIdjpLqiJFQ4ezkP66kjScVpuoLXeWRM4m3O65SLQoofOLuIoe82lKyNiaLphUpXQsvK7gomtKtmx7r3gnNcOvK7UAmBI5oTTrbIwmvSvuLMnMKxM1eT6MksTI/oItTcjwcau3JEmDrC3/2hTwnoGotO+cCTNmSyBu0AGtStPWMgsuCtfo889ABy300EQ3tEwxSCetNNLLJEXONlBHLTXU7G50FhZLZK311lwvgYUiKL50TjPA9GL22Win3Qswzbxq0TJYdy1311g0/RI5Zautt/7awFRN0R9zB871HzAls/fhaSeDUdyCC74GTHkjjvgwGK3ReOOPvzSM5JJTfhHglwdO+EuGc3644hfBHbrcdcOEt+l6953RNI0wHjoWjYTt0jnRRG46MNG4rdEyxBRv/PHF2/3T01M373fR0Ecv/fTUV78SKm30MIUi26i0TjXSRDMNkHmhMsUM6KPfhkrTNOO++9KQn9QvW6Rv/wyooATO+/w3M405PyHO/e5HB5RQo3/9o0Y6aLKNRvRggAQ0IAL7Fw1rrCMm5oPgADeBEmxMEIHxc8kv2qDBARYwJe37YP/+p5JtKKKEA/RD91KyjgOqsH/VuKBJknE+GKaPB/75awk4oHFD/klDeCCZxgN9iL5EzNAl3yvi+6KxwJGQkIlt0F1BPJGFLEgCI+jYShURko4UFlGLHmGiFBiVEGwsgQNw5MASyiWRcoDjjuD4mEHIIQ0pjmQbMORBIxiShTjG0Q8UOQce8ahHg1iDiCrUYUjooEEZMuQRhoxjCigijkXi0WIJqeEHU9aRZPDgfm1A3UKwkYJMwjEHBxlGFkpQgix4riDk8OQdxeGQc5jRfdBA4keSQQceaMEPbGyIH1wJxywYBBoVOIA0D1ABaBjEjroEhzARYg5qTAMa1NimTKTBTDh2qCBtmOY09WCQdGTzju8AWiGZCUuDRFOd1P48SC6z2cj7zKKcHDhnQfA5zYO4853q8FkOymmEWBJUmrckCDZ1+bzuKAKgyjKILR56AJIJRB3v1KaHWFlONiBkow/1qEDM8U5eRogO5UQBgFBKUJXm4x0hFWdZcAFQiGmUozbNhyLfKcnazNOVOaBjQWiKz6DmY5+67GdWjgFQgR6Eqep06kGzWVTGwJSZzlQIVqfp1HxM1JM6TYoRypnR0gB1ISDlp3DKiciFjFWaZRXqO4XDBqQq9apvZQhU8QjA2hwDBYZEwTEacteONmQdncSjOLrKmGPMMwuLZWxgGbIObJaDsqnBxl8VMgyORtR6EeEoaityT3VWYLUUSSwnPtkJW4lA07XWrK1EhoEFEpAAC6fVrXCHS9ziGve4yE2ucpfL3OY610ABAQAh+QQJBAD3ACwAAAAAeAB4AIcAAAABAQECAgIDAwMGBgYJCQkMDAwQEBARERERERERERERERESEhISEhITExMTExMVFRUXFxcYGBgaGhocHBweHh4gICAhISEiIiIjIyMkJCQlJSUlJSUlJSUlJSUlJSUlJSUlJSUmJiYmJiYmJiYmJiYnJycnJycoKCgpKSkrKystLS0vLy8xMTEzMzM0NDQ2NjY3Nzc4ODg5OTk6Ojo7Ozs7Ozs7Ozs7Ozs7Ozs8PDw8PDw8PDw8PDw9PT09PT0+Pj4/Pz9AQEBAQEBCQkJERERGRkZJSUlLS0tNTU1OTk5PT09PT09QUFBQUFBQUFBQUFBQUFBRUVFRUVFRUVFRUVFRUVFRUVFSUlJTU1NUVFRWVlZZWVlcXFxfX19hYWFjY2NkZGRlZWVlZWVlZWVlZWVlZWVmZmZmZmZmZmZmZmZnZ2doaGhqampubm5xcXF0dHR2dnZ5eXl6enp7e3t7e3t7e3t7e3t7e3t8fHx9fX1/f3+CgoKGhoaKioqNjY2Pj4+QkJCQkJCQkJCQkJCRkZGRkZGRkZGRkZGSkpKTk5OVlZWXl5ebm5uenp6hoaGjo6OkpKSlpaWlpaWlpaWlpaWmpqampqampqampqampqampqampqampqanp6enp6eoqKirq6utra2wsLCysrK1tbW4uLi5ubm6urq7u7u7u7u8vLy8vLy8vLy+vr7AwMDCwsLFxcXIyMjKysrMzMzOzs7Pz8/Q0NDQ0NDQ0NDR0dHR0dHS0tLT09PV1dXX19fa2trd3d3g4ODh4eHj4+Pk5OTl5eXl5eXm5ubm5ubn5+fo6Ojp6enr6+vt7e3u7u7u7u7v7+/v7+/w8PDw8PDy8vL09PT29vb4+Pj6+vr7+/v7+/v7+/v7+/v8/Pz8/Pz8/Pz8/Pz8/Pz8/Pz8/Pz9/f39/f3+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7///////////////////////////////////////////////////////////////8I/gDvCRxIsKDBgwgTKlzIsKHDhxAjSpxIsaLFixgzatzIsaPHjyBDihxJsqTJkyhTqlzJsqXLlzBjypxJs6ZNhsko/flDKdnNnwKl9clDNE8faUBviipatFRSm0OZGn1aU2pRqiGvXYOYzCpRnw+xYcO6kBifNGn+EHMYzGueYA6biTp0SFQzsgeJvUGL9s1ahm29wmXYjBFduozu4iXIiC/fOVsXBrY6WCE2R4cPk1pM0LFjUIDdVk6IKnNmzgPPekYLTLLohcVMHxaFWqCj1Wj/uBa8cK7sQ6hq3yOGG20shZOljjb46zddxbX/FIecMDnT5QQvO6ct/B6w4mk2/iO0XhT7QFnOD0EXfhv3G2fjXx+slj54d4HX3BRnFJ/3QVLOMTLWfQKRAl5rBpFHlHmxOScLgQTJURwfB3XlFVgFaeKcIxASZAt4xxnk1kHNOVdMhwRJh9scB0XFVB8HYfYbdygK5AyIBi0llVMFlfhbNUkF40cXbyjSy0OgFKdbQUK9iFRBvskGy0PMyGKKKLBAU1IwXVThpZd6mGdQfitWqBNPGBIko2kCNgSNK5rEGacoWo7Ux5d4VqGINQyxgpscFBkm2y8MZSOLnIhqMqVI1uSZZxegLaTiZxTBIpt4CvUiSqKJZjOSo46u8WBC16iWW2QSYaPhYZoMiBAx/qRwyilJeYDqqB7MKBTLTqxgZIsoohCakDVwypporyMx06WteTrC50vZ1GIsp6I8O1IwazD7qCsuBbPptIiaUmdJ1jiibZ5+WHtSNrCAm2gtnqbUS63neumHSqy4KycrubbkSrb1YlrSL/pqQoqYKVkDyrLMwnhSu+CK0ku8MjFzZ8MoQWwsLOrS1MsbtnJ7UjDGmtJvUv/mmQe+iR68mCt5dLGGsypFS4oorCBc48489+zzz0AH3RAwthRt9NFFI/iTNdI07fTTTXecUTJ9HMHD1VhnrTUPR/SRpkvY/AILK2SXbfbZrMDyi6sWAWP11nBvfYTSLVkzNtp4o80x/kZyxO231oC+tEvehJ+9C0Zv//33FjC9UvjjrIRokRaKK64FTLFAXrjkFfVdud+BuzS45nkffpHbn8M9N0zWOE762a9IPVEyhyT++RGHfN0SNsC4TvorwLCtETC1FG/88cXTbZM10DTv/PPNyy709NRXb/312KckShcvENEHkCmFk8wvvgQzLlaiEEHC+ut3oVIwu8Qf/y/n/yQLE+znTwKNJUEj//+7AIb0YFKMNuhPf21AiTAACEBhUCwm1VDECw6IQAUyEIC+WEY4YpI+Ch7wEShpxgUZSD+XyKILHjxgAlMCvxECMBgDDEk1+pDCA8YBfCgJxwJdCMBkbNAk/r9QXw3Z5wL+qQQavuDh/9ZWkmJMcIjr+x5MwnEMJcrPFw8ECQqh2IUTJYQSSUgCfy5iDWc4A1UHyUYLlagzjUCRCKNCCDWAoIA6KgAI1KDIOpqRjD4moxnrUEg1fmHFkVSjhi5IBEOSYEc7hi4i1fCjH+GzkGUk0YU/DIkBKXhDhjCikXa0AEWWIUk/xlAg4SDGCIVBkl+4QH9dENZCqGEBUNaRBQgxhy7NgRA+ljIZywgkQ7Cxxvj5Qngg+UUbXKCEOMSRIXKwZR2TcBBzhOOa4eClQZzxyz7ikCHWIAYwfCEMZNJkGNKsIyUMsg5sYlOYBLlGN/uYyRoxUpq4/jSINd2ZzYP48peUrFEp0qmAdRqEn9g8iDznac7usCCdP0AIQq/Zy3muh0B+IOiiDjpRhGRjnsk4JVlomU73SbSjCIHGPIMJoTak0wLDSMhE61kQ8c0zj/eBBUHvJVOUIsQaIOXGfe5pSxbg9KQIVcge5xlQ1PCCoAbtaVIVstBuCrU2LpUmNRcyU4Zws5tH5cwP0rlRqfKzUEwVTjofaVZ3NiSS3RROF4oa1rYmlCFLLWX98MKLWoaSFw7pakO4QUo/LuOqteHFPZMA2MD6lCHc+KozENsdatSVIYJ9yDrgmb3MZm8i+3SnNj87kXbyk7OkjUho+5naiuxytK2NFK1sZ0vb2tr2trjNrW53y9veXi8gACH5BAkEAOwALAAAAAB4AHgAhwAAAAEBAQICAgMDAwQEBAQEBAQEBAQEBAQEBAUFBQcHBwgICAoKCgwMDA4ODhERERMTExQUFBYWFhcXFxgYGBgYGBkZGRkZGRkZGRkZGRkZGRkZGRkZGRoaGhsbGxwcHB0dHR4eHiAgICIiIiMjIyUlJScnJykpKSoqKisrKywsLC0tLS4uLi4uLi4uLi4uLi8vLy8vLy8vLy8vLzAwMDExMTExMTMzMzQ0NDU1NTY2Njg4ODs7Oz09PT4+PkBAQEFBQUJCQkNDQ0NDQ0NDQ0NDQ0NDQ0REREREREREREREREREREREREZGRklJSUxMTE9PT1NTU1ZWVldXV1lZWVlZWVlZWVlZWVpaWlpaWlpaWlpaWlpaWlxcXF1dXV9fX2BgYGNjY2ZmZmlpaWpqamtra2xsbG1tbW5ubm5ubm5ubm5ubm9vb29vb3BwcHJycnR0dHh4eHt7e39/f4GBgYKCgoODg4ODg4ODg4SEhISEhISEhISEhIWFhYeHh4mJiYuLi46OjpGRkZSUlJaWlpiYmJmZmZmZmZmZmZmZmZmZmZmZmZmZmZqampqampqampqampubm5ubm5ycnJ2dnZ6enqCgoKKioqSkpKampqioqKmpqaurq62tra2tra6urq6urq+vr6+vr6+vr7CwsLGxsbKysrOzs7W1tbi4uLu7u76+vr+/v8DAwMHBwcLCwsPDw8PDw8TExMXFxcbGxsjIyMnJycrKysvLy87OztDQ0NPT09XV1dfX19jY2NnZ2dra2tra2tvb29zc3N3d3d/f3+Hh4ePj4+bm5ujo6Ovr6+zs7O3t7e7u7u7u7u/v7+/v7/Dw8PLy8vT09Pf39/r6+v39/f39/f7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v////////////////////////////////////////7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v///////////////////////////////////wj+ANkJHEiwoMGDCBMqXMiwocOHECNKnEixosWLGDNq3Mixo8ePIEOKHEmypMmTKFOqXMmypcuXMGPKnEmzpk2GxybRoTPp2M2fApnFaUO0TRxmQG9mKloUVFKbQ5kafVpTalGqIadNg3jMKlGfD6lRw7rQWBwtWvYYcyjMaxthDpNh2rMHUzKyB42JQYtWzFqGbb3CZZgMEF26gO7iJRiIL982WxcGtjpYIbVBhw9zWkzQseNLgN1WTmgqc2bOA896RttLsuiypg9jQi2w0Gq0e1wLXjg39h5TtNkZu43WlcLJUkcb1OWbrmLad4hDToicqXKCl5vPDs6uF3Etnaj+v0b4qvme58Ft3xajDGH1otcFRjMPnLvAaWGIB3I/3iCn5oCMZZ9AnXzXmkHvERWfMea9MiBBahAXx0FdeQVWQZI0N8iDBOHynXEGuXUQc839xaFA0d3WxkFRMTWhQZj5tt2JAinzoUFLSeVUQST6Fk1Sw8wBxRiA6PLQJcTdYZBQLiJVUG+xqfIQMq14cokqy5Q0DBRKdNklHMM0hJ+KFOrE04UExWhagA0tg8ojcMJ5SZYjzeHlnUoAEplCqdymBkWGxWbkQtW0Euehj0gp0jR44gkFaAul+BlFqsS22UK5XIIootWM1GijXcii0DSqoXXHnhFRk+FhkgiIkDH+mmy6KUlwfNooHOgZ5Modd6SCkS2YYDIoQtK8KSuip5CUDJe24kkIqixVU8uxm1oijZZdNOuory39oim1h3pCZ0nTEKItnnNAW1I1qoCLKC2dpqRLred2OYdKp7gb5ynIuJRKtvV6gtIu+j6iyS8xTXMJs83ee1K74FqSS7wyJWNnwyhBfKwq196kixi2cmvSL8d60u9T/+IJB76IHrxYKnBA0cWzKlVDiyaWnIIwjTz37PPPQActdEW+4GL00Ugb7UtS0Sjj9NNQO/1jR8jM0YMMWGet9dYy9DDHyTBNkwsqopRt9tloi4JKLupO5MvVXMfNdQ9LvxQN2WnnnTb+KlNb5IbcgG/tBky16G042rVgBHfggTsBE96HHy5yRU4wzrjjL6USeeSTU/S35YAP/lLhmxue+EVvgx433TDdXXrefGeEDCCLg94DIGC/NM0ukJeOyi5to5708LjU/VPTUSff99DMN+/889BH39ImUZywwxzLm2RNMbjUskuuT22yQwfkkx+FSrvIor76uIBv0yxNlC9/B5uglMz6+MuiS8c2HRPG/PMDA0p6kb/89cJVMYlGIE4AwAAOsID5q8UxrBET8TUQgI9ACTIgWMD2uWQWUbggAAWYkvRxMH+74N9JojEHEQKwDdkriTUIeML8FYOCJuHF+FxYvhPUryX+yahFDfGHi+B15BgM5CH5sAeT7Q1xfbVAIEhCqMQooMkgliACEQSBEWgc4xgqNAg1TDjEXZBEiTqYhUKggQMDuNEAOIAGRa5hjGDYMRjGuIZCmIGLJ44kGi48ASAYEoQ3vvENFFHGHe94RQoJ8YQ4DAkYLghDhgjCkG+MAEWIscg7ynEh1ggGBw8kEl4ksXxR4EVDoBEBTLqRBAexxjSkIY1pRJIgxeikHYmhR4bsLoJG5AgvwHCCJrRBjQ55gyvdGASDXCMa0IgmNKLRS4IcQ5d2bI9DpBEMXdSiF8GESTGW6UZLGGQa0pSmFNnBTWwGg2I0KuQyYWkQaKZzmgf+ySU2GzkgUpDTAOY0yD2leZB2YjOcnCEBOW8Qy4FG85YDqSM2i0EjOvyzFQephkOhAc+BUMOdwXDSgFhJzvNldKMdHQgy3MnLB4WBnBCg6EkdmlKBVAOk7ltMK/5Jh4RolKYJYQZI17kYebqSBJ+c6UBrKpBr6FOX/CSLLv4ZUIT8dKkKMaguiYqVly6zmQq56j2ZOpBrYjOnVLkBOTEaVpQu5KP7DA45EUkoty5EkdgMThSOmlSf2lUhTtVl7hajCwgYEgLDaitQGUINTt6RGFzFii7kGYTEKharDaGGWY8RWbxEEyLW2ChEF3KNakpvo9KziD3TGcPUPgSd9+wlrGsBu9ppmna2oJ1lLUeL29769rfADa5wh0vc4hr3uMhNLvMCAgAh+QQJBAD1ACwAAAAAeAB4AIcAAAABAQEDAwMFBQUGBgYKCgoLCwsMDAwNDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0ODg4PDw8QEBASEhIUFBQXFxcYGBgZGRkbGxsdHR0eHh4fHx8gICAgICAhISEhISEhISEhISEhISEiIiIiIiIiIiIjIyMkJCQlJSUmJiYoKCgpKSkrKystLS0uLi4wMDAxMTEyMjIzMzM0NDQ1NTU1NTU2NjY2NjY2NjY2NjY2NjY3Nzc3Nzc3Nzc3Nzc4ODg6Ojo8PDw+Pj5BQUFFRUVJSUlLS0tMTExMTExNTU1NTU1NTU1NTU1NTU1OTk5OTk5QUFBSUlJUVFRWVlZZWVlaWlpbW1tcXFxdXV1eXl5fX19fX19gYGBgYGBhYWFhYWFhYWFhYWFhYWFiYmJiYmJjY2NkZGRmZmZpaWlsbGxwcHBycnJ0dHR2dnZ2dnZ2dnZ2dnZ3d3d3d3d3d3d4eHh6enp9fX2AgICEhISHh4eJiYmLi4uMjIyMjIyMjIyNjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2Pj4+QkJCRkZGTk5OUlJSVlZWXl5eYmJiampqbm5ucnJyenp6enp6fn5+goKChoaGhoaGhoaGioqKioqKjo6OlpaWnp6epqamsrKyurq6xsbGzs7O1tbW2tra2tra2tra3t7e3t7e4uLi6urq9vb3BwcHFxcXHx8fJycnKysrMzMzMzMzNzc3Nzc3Ozs7Q0NDS0tLU1NTW1tbZ2dnb29vd3d3f39/g4ODg4ODh4eHh4eHi4uLi4uLi4uLj4+Pk5OTl5eXm5ubn5+fo6Ojo6Ojq6urr6+vs7Ozu7u7v7+/w8PDy8vL09PT29vb39/f39/f4+Pj5+fn6+vr6+vr7+/v7+/v7+/v7+/v8/Pz9/f39/f39/f3+/v7+/v7+/v7+/v7+/v7+/v7///////////////////////////////////////////////////////////////////////////////////8I/gDrCRxIsKDBgwgTKlzIsKHDhxAjSpxIsaLFixgzatzIsaPHjyBDihxJsqTJkyhTqlzJsqXLlzBjypxJs6ZNhsMauXHTaNjNnwKfoRlDdAyaZ0BvUipa9FNSm0OZGn1aU2pRqiGrVYM4zCpRnw+tWcO60FcaJUro+HLIy+sYXg6TRYoTJ1Iysgd9TUGLdspahm29wmWYzA5dunbu4iV4hy/fMlsXBrY6WKG1PIcPZ1pM0LFjSYDdVk4IKnNmzgPPekabS7LosqYPR0ItUNFqtHRcC144N3YcULTr+bqNtpXCyVJHG6Tlm65i2nSIQ06InKlygpebzw5eLxdxJU4R/lYven0gq+Zxnge3fXuKM/GvD0ZDD5y7wGp7b9+Bv/tgpuZ2jGWfQJ9815pB4xFVni/osTIgQWQQl8ZBXXkFVkGKNJfHgwTB8p1xBrl1EHPN/cWhQNHdVsZBUTGFxkGY+bbdiQI586FBS0kVHkEk+hZNUry4McQVd9jykCTE5VaQUC4iVVBvsZHy0DGrdOLIKO+RxMsQPHTZ5RnlGYSfihQyshMjFxIUo2kBNuQMKIPEGacjWYrEhpd48nAHNQyNchsZFBkWGy0MZbOKnIgOMspI1OSZ5xCgLZTiZxSREttmC8HiSKKJZjOSo44+4YpC1aiGW2QSWZPhYYoIiFAv/pNwyilJZ4Dq6BnKKNQKHXQsetErkURCaELUwClrovWJpAyXtuaZCJ8vZePKsZw2Au1IvDzR7KOluKTLptQiykmdJFGTyLZ5unHtSdmMEm6irniaki21otulGyoZ++4goBzjUina2rtjSbbsO4gkusREjSTMNssGSu6G2wgs8sqkzJ0OQxzuKOvSZIsVtnZ7ki7HcuLvUwDneUa+iSK8WClnDPHEsypJK0kjoCRM48489+zzz0AHXdEusRRt9NFF75JUNM007fTTTf/Y0TFsuDDC1VhnrfUILrBxMkzVvAIKJ2SXbfbZnIDyCqoW7WL11nBv7YLSL0UzNtp4ow2K/tQWmRH331qbAZMreRd+9qgXvQ044EHAdLfhhouCURCLL974S6JADrnkF/ld+d+Cv0S45oUj3rbin2c9N0x2k4733hkdcwfqlbtwx9cvVTPL46SDMgvbGu0Cy/DEFz883T8xDfXyfAvt/PPQRy/99C15UgQGLMQhjUrf7OJKK7Egs5gnLCxgvvlFqBSLKuyz74r4T7kCxPn0L+AJSsi0r78qrzRPUzBTqF/9poCSW+xvf7dwVUykgQcMCHCABTzg/lrRi2/EhHwPFKAjUBIMCR7wfS5xRREyKEACpmR9HtxfLPxXEmnEgYQCNMP2UvINA6Zwf7uwoElyUT4Yng8D/vdrCTJacUP9uaJjIAmGA31oPjfM0CXdK2L7WqFAkBCBiQsgQjAUEg5taCMcGHFGL3rBQuygsIixIAkTV2A6hGgDG3DEhjYqEo5d2OKOttgFGBPiDFdIcSTSgCEG8MCQN8YRjjqUyDHwiMdeMKQXRExhIkESwAfKkCHhOGQcKxYRXDASj+RCyDdy4cFbkCQXSzwfEQ5UKE3CkZMD4QY0lKEMaHDjILr45B1zsceFUOOM7GsFEj+Siylg4AdmaONCvuFKOM6xIOFARjGmWQxk9HIgvdDlHXG3kGjk4hWtuMUwZ4KOZsLxmgKJBjWp+cSBREObd3zmzgzpSlgKRJrr/qwmLuHpyJ2Nw5zYQKdA8klN+cDTFtPYWTbMKU+CcIOg07ylQeyoTZ1xiJnmHMdBsgHRYtizHtU4aK44tNBmStQgHIXoR4UDT14+iBvmzAY6EJJSgq5UGwfdon3+ac5JFqSm+VxpPZRx0Cpyhp6aFGo9gLpOoYYjl9rsJ23KaU6BEoSp1FTqO+FpVLLAtJkN3WhHlVqPbGpTp6hB6iE1qhCsTpOsIY1qcHpaqLEyZJHaDM5XD0lWgbjVo5iEKiNNxBl0lPSVM62rShtiDU/iERddJQs6DKmNxCrWpg6xhll7EdmgPRSiJ21IOKwKvY5SzyL4XCf8TjsRdeaznayFJUg0VUva2DKEG8+g5TNCa9ve+va3wA2ucIdL3OIa97jITS70AgIAIfkECQQA+wAsAAAAAHgAeACHAAAAAQEBAwMDCQkJCwsLDQ0NDg4OEBAQEREREhISFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFRUVFRUVFRUVFhYWFxcXGBgYGhoaHh4eICAgJCQkJycnKCgoKioqKioqKioqKioqKioqKioqKysrKysrKysrKysrKysrKysrLCwsLCwsLS0tLi4uLy8vMTExMjIyNDQ0NjY2ODg4Ojo6PDw8PDw8PT09PT09Pj4+Pz8/Pz8/Pz8/QEBAQEBAQEBAQEBAQUFBQkJCRERESEhITExMTk5OUFBQUlJSVFRUVFRUVFRUVFRUVFRUVFRUVVVVVVVVVVVVVVVVVVVVV1dXWVlZWlpaXFxcXl5eYWFhZGRkZmZmaGhoaWlpampqampqampqampqa2tra2tra2tra2tra2trbGxsb29vcnJydnZ2eXl5fX19fn5+f39/f39/f39/f39/f39/f39/gICAgICAgICAgICAgICAgICAgICAgYGBgoKCg4ODhISEhYWFhYWFhoaGh4eHiIiIioqKi4uLjY2Nj4+PkJCQkZGRkpKSk5OTk5OTlJSUlJSUlJSUlZWVlZWVlZWVlpaWmZmZnJycn5+foqKipaWlqKioqampqqqqq6urq6urq6urrKysrKysra2tr6+vsLCws7OztbW1uLi4u7u7vb29vr6+v7+/wMDAwMDAwcHBwsLCwsLCw8PDxMTExMTExsbGyMjIysrKzMzMz8/P0tLS09PT1NTU1NTU1NTU1NTU1NTU1dXV1dXV1dXV1tbW19fX2NjY2dnZ3Nzc3d3d3t7e39/f4ODg4uLi4+Pj5OTk5eXl5ubm5+fn6Ojo6enp6urq6urq6+vr7Ozs7e3t7u7u7+/v8fHx8vLy9PT09PT09fX19fX19/f3+Pj4+fn5+vr6+/v7/Pz8/f39/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+////////////////////////////////////CP4A9wkcSLCgwYMIEypcyLChw4cQI0qcSLGixYsYM2rcyLGjx48gQ4ocSbKkyZMoU6pcybKly5cwY8qcSbOmTYbMEJ05g4jZzZ8Cr3GhQpQKl2tAb1IqWjRTUptbmBLl8rSm1KJVQ377BpHZVaI+H44bl3Vhsi5ChKxJ5vDXVyq/HD5btHPRs7IHkyFJmxYJW4Zuv8Zl+KzNzp1t7uIl+IYvXyxcFwa+OljhODiHD19aTNCx40eA31ZOqClzZs4D0XpOq0uy6IXITB9ehFpgodVp17gWvJCu7DOaau9LhjttKoWTpY42eOv3TsW11xSHnDA50+UELzunLXyfruJCnP4itF4U+0BUzs9AF34bN5Jp418fzJY+eHeB3/bifhOf98FLzrVB1n0CZQJeawaRR5R5sTmHCoEEYVFcFwd59VVYBRXiHH8QDjQLeMcZ9NZBzTmHTIcESYcbFgdFJdUWB72xHYoETQOiQUtJJR5BJf6WTVLGrHEDE2/g8tAjxelW0DUuErUFUgX5JtsoDzFjyiWGcAIfScbcoMKXX3JhTEP5rVjhIWOMcQiGjP0mYEPTZKLHnHMasqVIaoCppwpvdMMQKGZOZJhstzA0jil0JqoHJyN1s+eeN1DCkIqfUTSKbJst9Iohiio6YEiPPnrEKgp9o1pukUk0joaHFfLpQf7GLNJppyRxEeqjXECjUCprrAEKRqwsskihCXEj56yK7hgSNDbc+qghfr40TirIdmoINyUZY4SzkJbiki6cVpvoJXeS1E0h3O65RrQojcOJuIqm8qpJuNia7pdKonQsvHpkwqZKpWx7r30m3cKvHosg+FI3lDTLrRoovSuuIa/M+xI0eToL8UkSI8sJtjfhssSt3p6kC7KX/HtTwHtSldK+cya8WClc2GBEIeyeNO0ihmSiMI1ABy300EQXbfREvNii9NJMK81LUthEI/XUVEuNjUfOqOGBBVx37fXXFnighjMyebMKJpSkrfbabFOCySreZMTL1mDXDbYHT7+EDf7abffdNiZXX7SF3YR/DeNLqPitONsPXkR34YXTABPfiy9OcEUzQA75DDBpUnnll1M0uOaEH+5S4p8r3rhFc5NeN94w7Z1634Bn5Mwbj5PuwRtkx+TNLJSnjskscXfESy3IJ6888nn/FHXV0Ad+9PTUV2/99dhnT5A5uqBiyivNaH/RK6CUXz4q4YsvUTPmtw+KKlCq75At7rtvizjyN0R//e2bMow5+VMIMvhXP/QFMCHkI6D7XhG/Aw7EHPtTYPt0AUAHEqQZppBg+1ABMgsKhHsaNJ8p8JcVcnSjGxaTCDR0oQtqKEQcCdTgK6oCD25g44bY4AY8KHKOXLzih/6vyMU5FBINVISwKt3AIQ7BQZFkABGIP0PIMDKowAr+ZBxKxKE2KFKLJwJRVwsxRy4IaIukwEMbWbzhNg4yjmckIxnPSOEtvPjDWgyRIdyIYflM0cGbgCONN8zZB48xjEIO4xhWHIgu6PjDvzTkGrlQhSls0UebpAOQNySHQaJhSEO6sCDUYOQPU0igJAJyjQYhZCcPSSJRRhFC5cAkNjRpkFUa8iChFOWPaLQNTFZSIOOwZSFT6ENGEqtD4pBlIgciDmEOg4QF6YYowdehM2KyeAZppjChWZBfiNKOEPoGJrWRDoRo05bczM40j0Egc8gynQQ55yrhOZBmTDNVtb0xZRq3sUNzOpOeAjnHHBn5SrygQ5a09Oc2FZJLRuJzMeIEpCCz+c+FLJKR7KyNDQG5TIouVCHSJKhwMMnEhcizkwAliBMZKRxv7LOfL6zoQgRKR/NkBR1o1CI6GnJSQ6aUIN/oIhBr8dDFoMOU3dgpT2XKkG9cVBdFRQ08YNqQYAqTlAg5xx2150wPMkSVncyoVxPCyVV+cqwIMQdYD9lRtGbHGW90BlbdSte62vWueM2rXvfK17769a9JCQgAIfkECQQA9QAsAAAAAHgAeACHAAAAAQEBAwMDBAQEBwcHBwcHCAgICAgICAgICQkJCQkJCQkJCQkJCQkJCgoKCwsLDQ0NEBAQExMTFRUVGBgYGxsbHBwcHR0dHR0dHR0dHR0dHR0dHh4eHh4eHh4eHh4eHh4eHh4eHx8fHx8fICAgISEhIiIiJCQkJSUlJycnKSkpLCwsLi4uLy8vMDAwMDAwMTExMTExMjIyMjIyMjIyMjIyMzMzMzMzMzMzNDQ0NTU1Nzc3Ozs7Pz8/QkJCRERER0dHSEhISEhISEhISEhISEhISEhISUlJSUlJSUlJSUlJSkpKTExMTk5OUVFRVFRUVlZWWFhYWlpaW1tbXFxcXV1dXV1dXV1dXV1dXl5eXl5eXl5eXl5eYGBgY2NjZ2dna2trb29vcXFxcnJycnJycnJycnJyc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3Nzc3NzdHR0dXV1d3d3eXl5e3t7fX19f39/gYGBg4ODhISEhoaGh4eHh4eHiIiIiIiIiIiIiYmJiYmJiYmJioqKjIyMj4+PkpKSlJSUlpaWmJiYmpqanJycnZ2dnp6enp6en5+foKCgoqKipKSkpaWlqKioq6urra2tr6+vsbGxsrKysrKysrKys7OztLS0tbW1t7e3ubm5u7u7vb29v7+/wcHBwsLCw8PDxMTExsbGx8fHyMjIyMjIyMjIycnJycnJycnJysrKy8vLzMzMzs7Oz8/P0dHR09PT1dXV1tbW2NjY2tra3Nzc3t7e39/f4ODg4uLi4+Pj5OTk5eXl5ubm6Ojo6urq7Ozs7u7u7+/v8PDw8fHx8vLy8vLy8vLy8/Pz8/Pz8/Pz9PT09PT09PT09PT09fX19vb29vb29/f3+Pj4+fn5+vr6/Pz8/f39/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+////////////////////////////////////////////////////////////////////////////////////CP4A6wkcSLCgwYMIEypcyLChw4cQI0qcSLGixYsYM2rcyLGjx48gQ4ocSbKkyZMoU6pcybKly5cwY8qcSbOmTYa77nTpcmfXzZ8Ch0FJQjQJlGFAbw4qWhRRUptPmBKF8rSm1KJVQy5bBnHXVaI+H1KjlnUhLik3bnzB5ZDW1yS0HPras2XLHl9lD+LqkTZtD7YM3X6Ny9AXmLp1weDNS7BM375NuC4UfJWwQmprECMmxJjg48eDAr+1nDCRZs2dB6L9nDbW5NFmTyPOk1pgHdZpv7wevDCP7LqJatfDhTttJoWUpZI2SOp33cW1vxSPnDA50+UEMTunLbxerOI3gv4jtF4U+0BLzrdAF34bd49g42EfLJZefPd6y/jiXhOf90FCzn1B1n0CJQKeawaRR5R5uKRnCYEEMVGcFAd59VVYBdHhXBkQEiQKeMcZ9NZBzTkHWIcCSYdbEwdFJdUTB5WxHYoEBQOiQUtJ5VRBJf5WTFK2fMFCEmuc8tAgxelW0DAuEvUEUgX59lskD+kyCSF0OAIfSbaw8MGXX0ZhS0P5rVihTjxh2NhvAjYUzCFrxBknHVuK5AWYeH6wRjIMSYIbExR98RspDFkziZyIruHISMnkmScLnC2kImgURSJbpAp9QkeiiVozkqOO8vCJQsuslptkElGjIWJ0DIhQLf55cMopSVCA6mgU6xmUyRdfSILRJ3nkQWhCxsApa6KHkOTLCrY6agefL1lzybGc0mFMSbbw0OyjlLj0yqbUIjpInSQlY8e2eX4BLUrWOBJuopd4mtIptaL7pZIoGfvuGofo4hIl2tqrCEqk7LsGHq/ElAwhzG7rBUruhkvHJ/LK5MudzT58UsTHOnLtTacQYWu3J71y7CD+PgVwnlSlpG+cCDNGCRQr8PCsStLiQcchCdPo889ABy300ERXRAspSCetNNLmzUSML1BHLTXUxHjUyxcULKD11lx3vQAFX/QiEzKeFALI2WinrTYghXiCTEa0ZO313F5T0DRKxJi99v7eaxdS9UVQ0C141y27ZAnfiKv94EVyDz64CjARkvjkgOxoUQqOO54CTIhQnrjlFQWeueCFt3S453wvblHco89tN0zESI662oT8fVEvbzQ+OgVviB0TMqHIjjohobzdES2jJK/88snfHdPTU0dve9HUV2/99dhn39I21khDTTYrZdMKJZJ4knJZ21DjzPrrV3ySJ43EHz8l5wPFPfv4O7MNSrrI738jl4CSTchxjfzl7xooCcX//hcKZ9QkG9Iw4AETuMD/SWIW4INJ+iRoQG2gxBYVXCD9XHI/Dk4wJfAL4f88IUCUZMOEBsRG+BSowv+1IoMl4Yb6YMg+aeyvJf66iEQN/UeJj42EHBHk4fpw6BLxDVF+knDgSKyhRGdYgxwKccYwhrGuiuziFKf4RRZTOERPkESJ1PghQrgRjF24cRfB4AZFtEGKTdhxE6TwYEJ8QYknntGE0mAiQobxxjcaMSK2uOMdjbSQWQhRhYL0SAElKEOGJKOQb8zVQz6hyDuqCSHZIEUIQ0ESbiSRfdaQI0O44QtMulGT9aBGLmhBi1y4iiCh6KQdP6HHhRiDjPGLxCFDwo1rSMMa2FAjQ4zhSje2UCDZkEUrptkKWUTyFLq045gcMgxSXCISoRhmTbbRTDdKkSC7oCY1NfmLbNrRfSgiZDNhKU11VvMguf7MJiNpRI1y7uKcBLEnNQ/STnc+k0CtbCa5BkINgU7zlgMZhTtJiaJj+BOBBlmGQ1uBKoIUw52byEWHWFnO6RFEow7tKEFg4U5eQqgY5eyFMk+6UZUOxBogdV5WruHPYyQEpQK16UByAdIupkaervSFKg8CVHsKVSDayKcu95mabPgToBmtqUIKmk2j5gWmzTxoQZqqzqcOBJvZ1ClQ2thMjP5Uqwr5qD6FU05xZjWlDElkNoVDjKQu9a14XUhUdQkL4WSjF4XsRSSZCteFJIOTd/yEV/OSDXkOY7GMDawl0XqKyXaGG39lSEMdClHB9lJ7G9WeReqpTlmo1osChSXlaxsSzdZidrainWUtS4vb3vr2t8ANrnCHS9ziGve4yE0u9QICACH5BAkEAPkALAAAAAB4AHgAhwAAAAEBAQUFBQgICAsLCw4ODhAQEBAQEBAQEBAQEBERERERERERERERERERERERERERERISEhMTExQUFBUVFRcXFxkZGRsbGx0dHR4eHiAgICEhISIiIiIiIiMjIyQkJCUlJSUlJSUlJSUlJSUlJSYmJiYmJicnJycnJykpKSsrKy4uLi8vLzIyMjU1NTc3Nzk5OTs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozw8PDw8PDw8PDw8PD09PT4+PkFBQUREREdHR0lJSUtLS01NTU5OTk9PT1BQUFBQUFBQUFFRUVFRUVFRUVFRUVFRUVJSUlRUVFhYWFtbW19fX2NjY2RkZGVlZWVlZWVlZWVlZWZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmZmdnZ2hoaGlpaWxsbG9vb3FxcXJycnNzc3R0dHZ2dnd3d3h4eHl5eXl5eXp6ent7e3t7e3t7e3x8fHx8fHx8fH19fX5+fn9/f4CAgIKCgoSEhIaGhomJiYuLi4yMjI6Ojo+Pj5CQkJCQkJGRkZKSkpSUlJWVlZiYmJubm56enqCgoKKioqSkpKWlpaWlpaampqampqenp6enp6ioqKmpqaysrK+vr7Ozs7a2tri4uLm5ubq6uru7u7u7u7u7u7y8vLy8vLy8vLy8vL29vb6+vsHBwcPDw8XFxcfHx8jIyMnJycrKyszMzM3Nzc/Pz9DQ0NHR0dPT09bW1tjY2Nra2tzc3N3d3d3d3d7e3t7e3t/f39/f3+Dg4OHh4eLi4uPj4+Tk5OTk5OXl5eXl5ebm5ubm5ubm5ubm5ubm5ubm5ufn5+fn5+jo6Ojo6Ojo6Onp6erq6uzs7O3t7e7u7u/v7/Hx8fLy8vT09Pb29vb29vf39/j4+Pn5+fr6+vv7+/v7+/v7+/v7+/v7+/v7+/z8/Pz8/Pz8/P39/f39/f39/f7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v///////////////////////////////////////////////wj+APMJHEiwoMGDCBMqXMiwocOHECNKnEixosWLGDNq3Mixo8ePIEOKHEmypMmTKFOqXMmypcuXMGPKnEmzpk2GtNo4cdKG1s2fAo8ByUE0B5BjQG/uKVp0UFKbQ5kafVpTalGqIatVg0jLKlGfD69dw7pQFhETJqLIcujKaw5XDnPVUaKkTi6yB2W5QIvWxVqGbb3CZZgLCl26UO7iJSiGL98eWxcGtjpY4TUwhw/vWUzQsePNkt1WTkgoc2bOA4d45psqtOCFsUwfnoNaoJrVaKO4prxwjmy6hGrnk4UbbSWFk6WONkjqN13FtaEUh5wwOdPlBC87py08X6riJoL+I7ReFPvASc6VQBd+G7eLYONFI3yWXnz3fNVaFBcT//XBPc5BMdZ9AhECXmsGkUeUebE5NwmBBPVQHBEHdeUVWAWV4RwYEBLUCXjHGeTWQc05F0uHBEmHWw8HRcUUEAdh9ht3KAoUDIgGLSWVUwWV+NszScUChQY8jGHKQ3sUB4VBQr2IVEG+/ZbIQ7QookcZhvhSUiwaNOCll0KcyFB+K1aoE08YEiSjaQI25MsfXMQZZxlajgTFl3g2MEZkCilS5kSGyUYKQ9goIuehXBgyUjV55qkBHwyp+BlFicgGmkKXlIEootiM1GijLFyiUDWq8QUFnxFdo+FhZQw4nhv+m25KkhCfNipELwpVAgUUimB0yRxzDJpQNHDGiqgfJPXSZa15uoEqS9hQYuymZESz5QrMOuqIS6hoOu2hetRZUjVtZJvnqSphY8i3iFLSaUqm0Gqul0um5Ae7cvqRpkqOYDuvoieFgi8XbaASUzV8LMtsvSat+y0Zl7wrUy93LoySw8YaYu1NpuxQ67YnoWKsHvve1G+eQqh076EFL+aIEBqs0MazJUXbBhl+GFzjzjz37PPPQActtELH7GL00Ugb/WRH76BTztNQRy11Oei8MxM1luwB7NZcdw3sHpZQo5HTU5c9NToxHaO112x7vcfSFZFt9txQo/2SI23n3TX+yBbJTffcdrukh96Ez/EHRn7/XXbgLflRuN7IXpS44lIzzhLej7fNd9+UL5724Jl3rQfcFjXd+dNVX40J6JnrgYnYQ0d0TC6012477aTHrvvuvPfu++8dZSNNM9BUY3VK25iiyCGV/EVWNtAcI7300qhUySDYY6+I80BxE8304B+TDUqyZG/+IJDAd1M504Qf/jQoXXL++ZfQ7NI71zTj/vvxz3/+IanYRkygtz/3uaokrvDf/LbnEm5Io4Dug19KrqfA81VCfSh5RzUg6D7jqWQb8qvg+UwhQJOEI3ocnF4zxtcSWRxChOZTBDRKUg79pVB6HnzJNkoBw+wdwn7+HXngDaVRDoVM4xa32JhFZjGKUazHINWgIAxDJJIbQoMbCikHLWDBRVjQoogT6UYmIEFGSGSiGwq5hSJ6OJJ3cLAZB0TILbrYxWFQpBVlLOMoGJKKF1awhCFp3/5yqJBo0LGLYpJIJfJYxlkwZBubUKCoRhIOG05PGuFoSDlicUguOtIg14DFKU4BizgK5BKMJGMl0MgQaEgRe4eYIUnCMY1mRKMaWHTIMDrJxVsYRBulCIUwQ1EKbRgkFKkkYyseEoxNQOIQl5DlT7rBSy5KkCCyGOYwS5aLZJLRlBCaIy8/WZBgapOYB0FlMve4s2pUExbXJMg5h3mQbnrzFzv+m0U1S5aPa8xTmOAcYzIn2aFmvBOc0/hnKOI5kGd4ExKJvM8mq8kLhCT0nwwdiCm8uUoI/aKasWClQS46z4wK5BoPRVB3QlnNZiSEpOc0qUBi8VCZkkWcnZwFGA8CU23atBvqTCU7a6ONd9o0Hz0d5lHtmcyjJuWjvPSlERXqVGQmU6Wc2SIvwUmQpArTqQ5NZiiEU007LsSrC2UIHpMpHF7kdKcvpSpDgJrKIxGVk4g0JkPQ6lSBTGORZaxEX4GiDXHeQq97lWtDEkrGtBLoaRDx5z+5ipBuiNR3CgUeRcypzVJodiLZPCc/P7sQYHYWsaQNiyhJSdnUuva1sI0QrWxnS9va2va2uM2tbmsSEAAh+QQJBAD5ACwAAAAAeAB4AIcAAAABAQECAgIDAwMEBAQEBAQEBAQEBAQEBAQEBAQFBQUFBQUGBgYICAgMDAwPDw8SEhIVFRUXFxcYGBgZGRkZGRkZGRkZGRkaGhoaGhoaGhobGxscHBweHh4hISEjIyMmJiYoKCgqKiosLCwuLi4uLi4uLi4uLi4uLi4uLi4vLy8vLy8vLy8vLy8vLy8wMDAyMjI0NDQ4ODg7Ozs+Pj5BQUFCQkJCQkJDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NERERERERERERFRUVHR0dKSkpOTk5SUlJVVVVYWFhZWVlZWVlZWVlZWVlZWVlZWVlaWlpaWlpaWlpaWlpaWlpaWlpaWlpaWlpbW1tcXFxdXV1fX19iYmJlZWVnZ2dqampra2tsbGxtbW1tbW1ubm5ubm5ubm5ubm5ubm5ubm5vb29wcHBxcXFycnJ0dHR1dXV2dnZ3d3d5eXl8fHx+fn6AgICBgYGCgoKDg4ODg4ODg4ODg4OEhISFhYWIiIiMjIyPj4+Tk5OVlZWXl5eZmZmZmZmampqbm5ubm5ucnJydnZ2enp6fn5+hoaGioqKkpKSnp6epqamrq6usrKytra2urq6urq6urq6vr6+vr6+vr6+vr6+wsLCxsbGysrK0tLS1tbW3t7e7u7u9vb2/v7/BwcHCwsLDw8PExMTGxsbJycnMzMzNzc3Q0NDR0dHS0tLT09PV1dXW1tbX19fY2NjY2NjZ2dnZ2dnZ2dna2tra2tra2tra2tra2trb29vb29vb29vb29vb29vc3Nzc3Nzc3Nzd3d3e3t7f39/f39/h4eHj4+Pl5eXn5+fp6enq6urs7Ozt7e3u7u7u7u7u7u7v7+/v7+/v7+/w8PDx8fHx8fHy8vLz8/P09PT19fX39/f4+Pj5+fn6+vr7+/v7+/v7+/v7+/v8/Pz8/Pz9/f39/f39/f3+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7///////////////////////////////////////////////8I/gDzCRxIsKDBgwgTKlzIsKHDhxAjSpxIsaLFixgzatzIsaPHjyBDihxJsqTJkyhTqlzJsqXLlzBjypxJs6ZNhrPSDBmSZtbNnwKVzWBBlMUMZUBvyilatE9Sm0OZGn1aU2pRqiGtWYM4yypRnw+1acO68FWQDBmMvHKYyiuLVA6Fsfnxg40wsgdfiUCLVsRahm29wmUorAhdukXu4iWohS9fGVsXBrY6WKG2K4cPy1lM0LHjzZLdVk7YJ3NmzgPPekZ7KrTghatMH2aDWiCa1WiNuKa8cK7sH05rv8KN9pHCyVJHGwT1m67i2kWIQ06InKlygpeb064t8BTxDMEP/lYven3gouY/nnO/jVtEMoTjiZbPtwx9eO75rIUgrgW+aIRyNEfEWPgN1Md3rRkU31sHxdbcIgUWJANxQRzUlVdgFcRFc1ZEWNAn3xlnkFsHMdfcKh4WFB1uMhwUFVMzHGSFdikWlEyIBi0l1X0CmfjbMkmtUkQEMWgxykNyEFeEQULBiFRBvskWyEOwCALHFn4gU9IqERzgpZc7oMiQfixaqBNPGRI0o2wDNoSMHlLEGecWWo5UxJd4HqAFNQwRUuZERPwGCkPcCCLnoVLw6BE1eeYZQR0MrfgZRYHIBppCkWyBKKLcjNRoox9oopA1qqFVRGQSabPhYVwQCB8a/ptuStINnza6wzEKPVJEEYRgJAkbbAyaUDNwxoooHiQdA0Gtja7B50vcNGLspls0s+UHzDoKYUujaDrtoXDUWRI1amSbZxHPosSNH98iykinKY1Cq7leLpkSHu3KiQcsLi2CLb1/oPRJvlKUcSRM1NCxbLb2mtRHu1tEAq9Mx9zJbMMlPTxtH9beNEoMtW5r0ijGwsHvU/7meYNK+B5q8GKL3ADBB2qkexI3jJSxBR4H1+jzz0AHLfTQRHNkzjhIJ6000uYkpYwvUEctNdRPcoQON9ZQo/XWXHdNjTXcoCPTM43AgcbZaKetNhpwNPJMRuZk7fXcXlvT9EvKmL32/t5rw1F1RdvQLXjX28B0CN+Iq30IRnIPPjg2MOmdeOJ0YISN445D/hIdk09e+UWBYy544S8d3jnii18Ut+hz2w1T3qfv7XdG6HTTuOjWdCN2TM9QIvnpcFDydkdHL2383T89PfXyfxft/PPQRy/99DNhowwxxzizO0rdgAJIH42wshg2x+RivvnNl9SIHuyzD4j4T3WDzPn056K5Say0r78eh4hb0zjLqF/9gHQSSOxvf5BAVUzQ8QxiCHCAKDHgAfXXB1J0Iybke6AAbUYSVEzwgO9zSTeUoUEBEhAl6/vg/hrhP5OgwxklFCAztneSbkhQhfoDxQVN4o3yxfB8/sS430pY0Qcc6g8QzCjJOBz4Q/NpDybdM2L7+qBAkJCwicoYh0KY4QpXnLAiruhEJ3IxqhQasREkaeIxdogQc6zCFHA0xSqQF5FvSIIQeCSEJL6hkFr8QYojQUcMiTE8hbgijnEsBkVOkcc8doIhpCiiCtkIkgA+cIYMUQYi44gKiiyikXl0BUO6wYkPQoIk3mDi+ZThjYaYAxWbhGN5rIEKUIACFVUUiCNAicdF8JEhzDAj+/qQRFQugxjIYAYlF1KMWMJRlAXhRicwQU1MdGJiA+kEL/GYIDdxwhB9gEQxf+INZ8JxnANRRTWr2QqD1GKbeMxG0A7pzPJMc53W/jzILrf5yJ89w5ymQOdA8FnNg7wTni2MUCrMKaaCWIOg1MxlPu64TUf4LBkAFeJAnAFRTDjjIMuAJyFUkaJXmjMWCOEoRD9aInj60kO5MCcqWnkQlRKUpQbJhkh7xh1sAPQ9Ke0oTg2iCpEOFTX0jGUq6FgQm+LzqAT5xj552c/abAOgAm2qUPtoVO7E1JnQTIhT1wnVgmhzmzxdzBudqVGDjLWaZSVISPnJHXMqciFvpWZcCcLIbXInFkplak23uhCp8lJYqNkGLDlJOrwSFq+fzOMi9kqVbdDTFY117Eod4oyzdoKyZDGHYEfVUYkm5Bu/pJ5AOqpai9xznVVtKq1E1InPdsp2ItKELTZvCxFa2hKXvA2ucIdL3OIa97jITa5yl8vc5qo2IAAh+QQJBAD7ACwAAAAAeAB4AIcAAAABAQECAgIICAgKCgoLCwsMDAwMDAwMDAwMDAwNDQ0NDQ0NDQ0ODg4PDw8RERETExMVFRUXFxcaGhodHR0fHx8gICAgICAhISEhISEhISEhISEhISEhISEiIiIiIiIiIiIiIiIiIiIjIyMkJCQlJSUmJiYoKCgsLCwvLy8xMTEzMzM0NDQ1NTU2NjY2NjY2NjY2NjY2NjY2NjY2NjY3Nzc3Nzc3Nzc3Nzc4ODg5OTk8PDxAQEBDQ0NISEhKSkpLS0tMTExMTExMTExMTExMTExMTExMTExNTU1NTU1NTU1NTU1NTU1NTU1NTU1OTk5OTk5PT09SUlJVVVVYWFhbW1teXl5gYGBgYGBhYWFhYWFhYWFhYWFiYmJiYmJiYmJiYmJjY2NjY2NkZGRmZmZoaGhra2tubm5vb29ycnJzc3N0dHR0dHR1dXV2dnZ2dnZ2dnZ3d3d3d3d3d3d3d3d4eHh6enp9fX2AgICEhISIiIiJiYmLi4uMjIyNjY2Ojo6Pj4+Pj4+RkZGSkpKTk5OVlZWXl5eZmZmcnJyenp6fn5+goKChoaGhoaGhoaGhoaGioqKioqKioqKioqKjo6OkpKSmpqaoqKiqqqqsrKyurq6vr6+xsbGzs7O2tra3t7e5ubm9vb2/v7/Dw8PFxcXHx8fIyMjJycnKysrKysrLy8vLy8vMzMzMzMzNzc3Nzc3Ozs7Ozs7Ozs7Pz8/Q0NDR0dHR0dHS0tLT09PU1NTV1dXW1tbW1tbX19fX19fX19fY2NjZ2dna2trb29vd3d3e3t7f39/g4ODh4eHh4eHh4eHi4uLi4uLj4+Pl5eXo6Ojr6+vt7e3v7+/w8PDy8vLz8/P09PT19fX29vb29vb39/f39/f39/f39/f39/f39/f4+Pj4+Pj4+Pj4+Pj5+fn5+fn6+vr7+/v7+/v8/Pz8/Pz8/Pz9/f39/f39/f3+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7///////////////////////////////////8I/gD3CRxIsKDBgwgTKlzIsKHDhxAjSpxIsaLFixgzatzIsaPHjyBDihxJsqTJkyhTqlzJsqXLlzBjypxJs6ZNhrrK8OBRRtfNnwKbqQBBFISKZkBvtilaNE9SmymYElXxtKbUolVDSpMGUddVoj4fUqOWdaGtHQsW/LDlsNRXEKUcBitz40aZYGUP2qKQNi0Ftgzdfo3LMFiPunV74M1LkErfvii4LhR8lbBCalEQI27DmODjx28Cv7WcMI9mzZ0H6vjcd9Tk0QtfnUZcJrXAMqzT/ng9eCHd2Tec2raVO20lhZSlkjbYCXjdxbZ/FI+cMDnT5QQxO69tW+Co4gv0/lSHjRCR8xvQu+POTeEYQutFsQt0dl54d4HS+Oam8p68wTbO9UDWfQPpAZ5rBsFHlHyyOYcIgQWhUNwOB3n1VVgFVeFcFBAW1Al4xxn01kHNOfdKhwVJlxsKB0UlVQoHZQYcdygOdAyI/11l30AlAudMUvOYI0455rTz0BvF7VZQMy4SlQJSBf022x8P3SIIGlTkQUxJ84jTzZdfljNPQ/mtWGEZO+zQU4zACdgQMXYsIaecVGw5kjlg5tmNOQ0VYuZEh83WCUPWCDLnoUvsCJKeeoqDDkMqgkbRH7NxtpAlVCCKqDUjMcqoOEYmJM1qff0gmUTUaIhYFQO+N4am/pqSVI6njIqpUCU//FAIRpeUUcagCT0TJ6yI2kFSl7Qy+ihM1iBCrKZUPMOll8nmKY46LoWS6bOHnmGnSehUqyefKlmTB7eIIsJpSu3MKu6X5KI0LLpL2HGLS+pQKy62J3FC7xJihCITOvrSGm9J53JLhSXryhRktQeTlDCxeUh7U7u08mtSKMSece9T+epZjkrzyhkwY+qUI46jKzUrBhV2CFzjzDTXbPPNOOfckZAr9+zzyhHXlAwwRBdtNNHJeKRONM4w4/TTUEfNjDPRaPwSNImY8cXWXHft9RdmJAJNRuY0LfXZUjsTtErJaP3121+bkfRF0KBtd9Rjv0QI/tx8e00IRmbfffePL7ndd9+hXRS44GgT7tIbhx+euEV1M2533i7tHTnff19UtuVnqw1T25u/LXdG6kizOOPOSGO1S9BcYvjmZlyC+UY8//zz2jMNffTvc+ss/PDEF2/88TVFI4wtuTTzeknZdKIHHoe0wlg0ubyivfbCqHTIHOCDr4f1T1Xjy/bovxINSq2E7/4cgnxbUznEpJ++/CQ58v77kpwakzrOsIX97ocS/e3PfXgIRTZigr0B2s9iJhnFAfc3PpdUQxgOtB/+SvK9Cb7vEBskiTqakUH7HeN5JMmGAT3ovk4s0CTZyF4Jt0eL9bWkFXhgofv04DiRlEOA/jPUnvNgEj0dhg8P/gMJBoMojJElxBmnOIV7LvIKTGACQweRRgd1eAiSBDEX1VAIOkjxiTJ+ghTLkog4KOGHNvqBEuJQSC70YMSRqKOEtOghQk5hRjP6giKicKMbMcGQUOTQgy8MSf0GeEKGHKOPZpSZRAohSDeeaCHZwMQEHZFCWqRPGIkUYyggWUZRZFEUmtCEKJIoEERUso2FiCNDnLFF8OFBjyDJBjFo4YtjhNEhviBlGU9hEGtcQhLIlMQlGjYQTLyyjaZ0CDEwIQg8OAKXNMmGMMuIS1IkM5mrMEguntnGVs2Mj8KMZkGO+U1lHsSVzyQkzZ6xzU9gs53J/jzIOMk5DJqJYpukyCI+kcnKfUiCnA+q0TDqacOCPGOgkoAgQZpBTj/IJzXoGKUwY4GQhw5UogThBDlj2aFbbFOBHYUoSAdCjYqCAkLRqGc/U/rR6lT0dqlBJylFkUaDeBSfKx2IOOD5Snnahhr1xOZAftrOoA5kn8/EaV5MKkxiKoSp33RqM8n5UtuQUZgNpSlQF0LReHZnm39cCFaTqdWBBPKZ3YnFTnsq1qYyZKiv5ER3qKHRMobCnMFSaUOgQUk3FkKqeaEGOk8B2MDWdLDO9AMmENsZdNB1IdKAaEETsjLkEQSinrUIO795idBWxJvtDKdpJ2JM0jJztRCRGwYqVblZ2Nr2trjNrW53y9ve+va3wA2ucHUWEAAh+QQJBAD8ACwAAAAAeAB4AIcAAAACAgIFBQUICAgKCgoMDAwODg4SEhITExMUFBQUFBQUFBQUFBQUFBQVFRUVFRUVFRUVFRUWFhYWFhYXFxcYGBgaGhocHBweHh4gICAjIyMlJSUnJycpKSkqKioqKioqKioqKioqKioqKioqKiorKysrKysrKysrKysrKysrKysrKyssLCwuLi4wMDAzMzM3Nzc6Ojo9PT0+Pj4/Pz8/Pz8/Pz8/Pz8/Pz8/Pz8/Pz8/Pz8/Pz8/Pz8/Pz9AQEBAQEBAQEBAQEBAQEBBQUFCQkJDQ0NERERGRkZISEhLS0tNTU1QUFBSUlJSUlJTU1NTU1NUVFRUVFRUVFRUVFRUVFRUVFRVVVVVVVVVVVVWVlZXV1dZWVlbW1tdXV1gYGBkZGRnZ2dpaWlqampqampqampra2tra2tra2tra2tra2tra2tsbGxtbW1tbW1vb29xcXF0dHR3d3d6enp8fHx9fX1+fn5/f39/f3+AgICBgYGCgoKDg4OFhYWGhoaIiIiKioqMjIyOjo6RkZGSkpKTk5OUlJSUlJSUlJSUlJSVlZWVlZWVlZWVlZWWlpaXl5eZmZmbm5udnZ2goKCgoKCioqKjo6OlpaWnp6epqamrq6usrKyvr6+ysrK3t7e6urq8vLy+vr6+vr6/v7+/v7+/v7/AwMDAwMDAwMDBwcHBwcHCwsLCwsLDw8PDw8PExMTExMTFxcXFxcXGxsbIyMjJycnKysrNzc3Pz8/R0dHT09PT09PU1NTU1NTU1NTU1NTU1NTU1NTV1dXV1dXV1dXV1dXW1tbX19fa2tre3t7i4uLl5eXn5+fp6enq6urq6urq6urq6urr6+vr6+vr6+vr6+vs7Ozt7e3u7u7u7u7v7+/w8PDx8fHy8vLz8/P19fX19fX19fX29vb29vb29vb39/f4+Pj4+Pj5+fn5+fn6+vr6+vr7+/v8/Pz8/Pz9/f3+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7+/v7///////////////////////8I/gD5CRxIsKDBgwgTKlzIsKHDhxAjSpxIsaLFixgzatzIsaPHjyBDihxJsqTJkyhTqlzJsqXLlzBjypxJs6ZNhru+vHjxZdfNnwKVbYBAFMIGZUBvsilalE5SmxqYEt3wtKbUolVn7rpK1OdDbtyyfoTFFQIsh8e+oEDx5ZhYjmS5nmV4LMbatTHcvs0Y9+pchdyQ3L3rZi/fsn8Tzhk82DDGvlITH7TF+O4XxxchM5VsUG1lFHMwW9RclDNBTp/X6hU9kTRR0wIDp77MmqJrswkZpUaxunbE27CX7Q7tuzVihG5SwwhbXCLwybsZNZ+4lavXgk5SI5lOsexB1Klt/nGfGFWqhoOCP9MeH3GpVKcFwX9eltRdt2vavK37qKw8UQ1IFeRZZX88hMsfYCxBBzIluXMNNRBCuI07Hu3ixU5eXEdQeowt1xAycAQhoohLMDhSNxGmSI039aQEw2ecMOTNHyPWGAR8IdWjoorXgIPSH5UVttAkS9hoozcj7bhjNumYxE12dznBHEKucGGkkSRto+SO27xjUiVffBFjQsyEeKWNcJD0zoNbqvhNiy95g8iZRi7BTIPZtMnjOS55UiSdNYJhYkn1fKOnit3AiZI3dABqYyFIprSOlodC2I1KZjoaBBy4uHROnpWWg5ImmgbBhScx1QMOm21eelKj/oAuMUmkMr2DYqsowXomHXfetI42W/J5kidngtHpU5+quA2mNp661znbXJPNmyp5UwgXS8CBKnvcduvtt+CGK25B5YBj7rnomisqUMkQ4+678LqbjEfrLHNMvPjGe8wy+8UEDSNfYCHwwAQXjMUXjECTUTn35uswvMes61IyARtsscFfzHuRMg93/G6ALgFy8cgFA4JRwx4/PGhLFZNMchoYIZNyxyuzRIbLLpOBEcczOwxySyLjPLLJFzHcM74Rw0Sx0BZnnNE6zaA88zHN9AsTNJO0LPQXkyjcUbnphi3xTcn8YvbZaJut8bhst+3223DHDVIzucBCSzLsqDTO/iZ2xDEILXs1Q8sphBOei0qDpKG44nYA/tQ2txQu+SnNoETL4pin8UfNM5Xzy+ST/4ISJJlnHok1NLGjDCyghz566ZnH4ck4MQneOuj0nSQK7KU37tI2udwOuugpJc575oNwThI7yQgP+jF5pzQO6cdnvgntJnkzuPOFw1J5S7TEUT3mdvwcUjmsc0843jDtPf7icaA+UvDq5zK2QcoQrnxEtFBCyeEJsYbxxjcIkqiPFstKyDpAoYkGagIUVotIOSCRhwrmARL3K0gu6vC+kbDDebAw30FO4UAHAlAinrCgBSnBEE+I73jYC8nnWgc9hiCjhA7sBEX+oEILOk4h/uOoBO8gQRJvpK9wuaCVQtbRCRw2cFsFoYYnLGEJT1DjIIPoYQX/kMGDKGOAiouDCD/ijV/A4hbHSGBDcuHEBp7CIN2QBCPmyAhJuIoglNBiBaFow0r8IQ6QGONMwNHGBoowFHSkoysMggs9VlAb3CJhG/k4EDkmso5YdCQLx7OMQmpijJek40Ea6cjeFMcThQTFQagRyjle0SAU1GMBp0MMT3qtIMtoJSNyV5BkODIPbywOEwspC4TkspW8LEgmHMnF4tiikJzw0UGOGcpkEkQbvxwTa6DhSWIkhJqXtCZBTvHLXolGkk70RARxqUtxDqQcWdTjJjGjDU8KUiDgpEykOwdCSj2a0zDPbGMwv9nOheRRj9o0DAPbeEtjFlQhvpSnaAp5QoIis4WOFI0s0rnOaT5UIfDUYiZEow1OlJATkGRIPum4z4Iwg4cW/MM/DaMNSZ4ipSr96EKYcVBKzBQz6+ioQljZylc6pBxdZJsu5UYRSyZSEkydCCIvucioRiSOT72jVR8ixUpUwopbDatYx0rWspr1rGhNq1rXyta2iiUgADsAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA";
            }
            return IconsWrapper;
        }());
        HPTRIM.IconsWrapper = IconsWrapper;
        HPTRIM.Icons = new IconsWrapper();
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var Utils;
        (function (Utils) {
            var UrlHelper = (function () {
                function UrlHelper() {
                }
                UrlHelper.processUrlQuery = function (trimClient) {
                    var query = $['url'](window.location.href).param();
                    var searchString = query.q;
                    var objectTypeName = (query.t ? query.t : "record");
                    var action = query.action;
                    var uri = query.uri;
                    var language = query.lang;
                    var callback = false;
                    var app = window['root'];
                    if (app.name == "TrimAPP") {
                        var trimApp = window['root'];
                    }
                    if (uri) {
                        searchString = "uri:" + uri;
                    }
                    switch (action) {
                        case "update": {
                            if (trimApp) {
                                var returnCallback = function (message, result) {
                                    trimApp.trimGlobalSearchPanel.search("uri:" + result.Uri);
                                };
                                var gotoDashboardOnCancel = true;
                                var updateHandler = HP.HPTRIM.App.ActionHandlers.ModifyRecordDetailsHandler.getModifyRecordHandler(trimApp, null, gotoDashboardOnCancel);
                                updateHandler(uri, null, returnCallback);
                                return;
                            }
                            break;
                        }
                        case "preview": {
                            callback = true;
                            break;
                        }
                        case "create": {
                            var recordType = new HPTRIM.TrimBaseObject(HPTRIM.BaseObjectTypes.RecordType, uri, uri);
                            var commandPanel = app.trimBodyPanel.createRecordPanel.commandPanel;
                            commandPanel.rtyField.setValue(new HPTRIM.TrimBaseObject(HPTRIM.BaseObjectTypes.RecordType, uri, uri));
                            commandPanel.recordTypeSelectedCallback(app.trimBodyPanel.createRecordPanel.commandPanel.rtyField, recordType);
                            app.trimBodyPanel.activatePanel(app.trimBodyPanel.createRecordPanel);
                            app.trimBodyPanel.createRecordPanel.visible(true);
                            app.trimBodyPanel.createRecordPanel.dataEntryPanel.cancel = function (dataEntryForm) {
                                app.trimBodyPanel.createRecordPanel.visible(false);
                                app.trimBodyPanel.createRecordPanel.dataEntryPanel.form(null);
                                if (app.trimBodyPanel.createRecordPanel.commandPanel.rtyField) {
                                    app.trimBodyPanel.createRecordPanel.commandPanel.rtyField.clear();
                                    app.trimBodyPanel.createRecordPanel.commandPanel.rtyField.setRawValue('all');
                                }
                                app.trimBodyPanel.activatePanel(app.trimBodyPanel.dashBoardPanel);
                            };
                        }
                    }
                    var objectType = Utils.TrimHelper.toBaseObjectType(objectTypeName);
                    if (objectTypeName) {
                        if ((objectTypeName.toLowerCase() == 'workflow') || (objectTypeName.toLowerCase() == 'activity')) {
                            if (!Utils.TrimHelper.isActiveFeature('workflow')) {
                                return;
                            }
                            var activitySearchHandler = HP.HPTRIM.App.ActionHandlers.ShowActivitiesHandler.getSearchHandler(app);
                            activitySearchHandler(objectType, searchString);
                            return;
                        }
                    }
                    if (searchString) {
                        if (trimClient.isSupportedObjectType(objectTypeName)) {
                            var searchHandler = HP.HPTRIM.App.ActionHandlers.SearchHandler.getHandler(app);
                            var objectType = Utils.TrimHelper.toBaseObjectType(objectTypeName);
                            searchHandler(searchString, uri, objectType, "", "", "", false, callback);
                        }
                    }
                };
                return UrlHelper;
            }());
            Utils.UrlHelper = UrlHelper;
        })(Utils = HPTRIM.Utils || (HPTRIM.Utils = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var Utils;
        (function (Utils) {
            var String = (function () {
                function String() {
                }
                String.format = function (stringToFormat, param) {
                    var str = HP.HPTRIM.Framework.Components.Shared.String.format(stringToFormat, param);
                    return str;
                };
                String.formatDate = function (dateObject, dateFormat) {
                    if (dateObject.StringValue) {
                        return dateObject.StringValue;
                    }
                    else {
                        var rawDateString = dateObject.DateTime;
                        var dateAsMoment = moment(rawDateString);
                        var date = dateAsMoment.format(DateHelper.getDateFormat(dateFormat).dateOnlyFormat);
                        return date.toString();
                    }
                };
                String.formatDateTime = function (dateObject, dateFormat) {
                    if (dateObject.StringValue) {
                        return dateObject.StringValue;
                    }
                    else {
                        var rawDateString = dateObject.DateTime;
                        var dateAsMoment = moment(rawDateString);
                        var date = dateAsMoment.format(DateHelper.getDateFormat(dateFormat).dateTimeFormat);
                        return date.toString();
                    }
                };
                String.toArray = function (value, separator) {
                    var noSpace = value.replace(/\ /g, '');
                    var array = noSpace.split(separator);
                    return array;
                };
                String.copyToClipboard = function (value) {
                    var tempInputEle = document.createElement("input");
                    document.body.appendChild(tempInputEle);
                    tempInputEle.setAttribute('value', value);
                    tempInputEle.select();
                    document.execCommand("copy");
                    document.body.removeChild(tempInputEle);
                };
                return String;
            }());
            Utils.String = String;
            var EnumHelper = (function () {
                function EnumHelper() {
                }
                EnumHelper.toString = function (enumType, key) {
                    var str = enumType[key];
                    return str;
                };
                EnumHelper.toValue = function (enumType, key) {
                    var val = enumType[key];
                    return val;
                };
                return EnumHelper;
            }());
            Utils.EnumHelper = EnumHelper;
            var DateHelper = (function () {
                function DateHelper() {
                }
                DateHelper.getDateFromServiceAPI = function (rawDate) {
                    if (!rawDate) {
                        return undefined;
                    }
                    if (rawDate.IsClear) {
                        return undefined;
                    }
                    return new Date(rawDate.DateTime);
                };
                DateHelper.getDateFormat = function (dateFormat) {
                    var strSimpleDateFormat = "DD{0}MM{0}YYYY";
                    var strDateTimeFormat = "DD{0}MM{0}YYYY hh:mm:ss A";
                    if (dateFormat.mmddyyyy) {
                        strSimpleDateFormat = "MM{0}DD{0}YYYY";
                        strDateTimeFormat = "MM{0}DD{0}YYYY hh:mm:ss A";
                    }
                    else if (dateFormat.yyyymmdd) {
                        strSimpleDateFormat = "YYYY{0}MM{0}DD";
                        strDateTimeFormat = "YYYY{0}MM{0}DD hh:mm:ss A";
                    }
                    var dateOnlyFormat = HP.HPTRIM.Utils.TrimHelper.format(strSimpleDateFormat, [dateFormat.dateSeparator]);
                    var dateTimeFormat = HP.HPTRIM.Utils.TrimHelper.format(strDateTimeFormat, [dateFormat.dateSeparator]);
                    return { dateOnlyFormat: dateOnlyFormat, dateTimeFormat: dateTimeFormat };
                };
                DateHelper.getCurrentUserTimeStamp = function () {
                    var currentDate = new Date();
                    var currentDateFormat = currentDate.toString();
                    var momentDate = moment(currentDate);
                    return momentDate.format('LLLL') + ' (GMT' + momentDate.format("Z") + ') ';
                };
                DateHelper.getDateAtTimeLocaleString = function (rawDateString) {
                    return rawDateString.toLocaleDateString() + ' at ' + rawDateString.toLocaleTimeString();
                    ;
                };
                return DateHelper;
            }());
            Utils.DateHelper = DateHelper;
            var File = (function () {
                function File() {
                }
                File.isMSG = function (fileName) {
                    var extension = fileName.split('.').pop();
                    return (extension.toUpperCase() === "MSG") ? true : false;
                };
                return File;
            }());
            Utils.File = File;
            var Mixins = (function () {
                function Mixins() {
                }
                Mixins.applyMixins = function (derivedCtor, baseCtors) {
                    baseCtors.forEach(function (baseCtor) {
                        Object.getOwnPropertyNames(baseCtor.prototype).forEach(function (name) {
                            if (!derivedCtor.prototype[name]) {
                                derivedCtor.prototype[name] = baseCtor.prototype[name];
                            }
                        });
                    });
                };
                return Mixins;
            }());
            Utils.Mixins = Mixins;
        })(Utils = HPTRIM.Utils || (HPTRIM.Utils = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var ActionManager = HP.HPTRIM.Framework.Components.ActionManager;
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var Utils;
        (function (Utils) {
            var TrimHelper = (function () {
                function TrimHelper() {
                }
                TrimHelper.pluckUrisFromItemsArray = function (items) {
                    var fetchedObjects = _.pluck(items, 'Fields');
                    var fetchedObjectUris = _.pluck(fetchedObjects, 'Uri');
                    var stringUris = fetchedObjectUris.map((window).String);
                    return stringUris;
                };
                TrimHelper.fadeToggle = function (ele) {
                    if (ele.nodeType === 1) {
                        $(ele).hide().fadeToggle({ duration: 1000 });
                    }
                };
                TrimHelper.copyToClipboard = function (elementId) {
                    $(elementId).focus().select();
                    if (document.execCommand) {
                        document.execCommand('copy');
                    }
                    return true;
                };
                TrimHelper.linkRecordToActivityDocument = function (trimClient, recordUri, activityUri, activityDocumentUri, onSuccess) {
                    var ChildDocument = {
                        'Uri': activityUri,
                        'ChildDocuments': [{
                                ActivityDocumentRecord: recordUri,
                                'Uri': activityDocumentUri
                            }]
                    };
                    var saveRequest = new HPTRIM.TrimObjectSave(trimClient, HPTRIM.BaseObjectTypes.Activity, activityUri);
                    saveRequest.doRequestEx(ChildDocument).done(function (response) {
                        onSuccess();
                    }).fail(function (error) {
                        var message = HP.HPTRIM.Messages.web_couldNotSaveActivity;
                        if (error.ResponseStatus.Message) {
                            message = error.ResponseStatus.Message;
                        }
                    });
                };
                TrimHelper.getBaseUrl = function (includeVirtualDir) {
                    var purl = $['url'](window.location.href);
                    var protocol = purl.attr("protocol");
                    var hostName = purl.attr("host");
                    var virtualDir = purl.attr("directory");
                    var port = purl.attr("port");
                    if (port != "") {
                        port = ":" + port;
                    }
                    if (includeVirtualDir === false) {
                        virtualDir = "";
                    }
                    var basePath = HP.HPTRIM.Framework.Components.Shared.String.format("{0}://{1}{2}{3}", [protocol, hostName, port, virtualDir]);
                    return basePath;
                };
                TrimHelper.toBaseObjectType = function (stringType) {
                    if (!stringType) {
                        return HP.HPTRIM.BaseObjectTypes.Record;
                    }
                    var returnVal = null;
                    var allBobTypes = _.keys(HP.HPTRIM.BaseObjectTypes);
                    var keyValue = _.find(allBobTypes, function (bobType) {
                        return bobType.toLowerCase() == stringType.toLowerCase();
                    });
                    if (keyValue) {
                        returnVal = HP.HPTRIM.BaseObjectTypes[keyValue];
                    }
                    return returnVal;
                };
                TrimHelper.toChildObjectType = function (stringType) {
                    var returnVal = null;
                    if (stringType) {
                        var allChildTypes = _.keys(HP.HPTRIM.ChildObjectTypes);
                        var keyValue = _.find(allChildTypes, function (childType) {
                            return childType.toLowerCase() == stringType.toLowerCase();
                        });
                        if (keyValue) {
                            returnVal = HP.HPTRIM.ChildObjectTypes[keyValue];
                        }
                    }
                    return returnVal;
                };
                TrimHelper.getDefaultRequiredProperties = function (objectType) {
                    var propertiesArray = [];
                    switch (objectType) {
                        case HPTRIM.BaseObjectTypes.WorkflowTemplate: {
                            propertiesArray = ["WorkflowTemplateName", "name", "Icon", "initrecordbehavior"];
                            break;
                        }
                        case HPTRIM.BaseObjectTypes.UserLabel: {
                            propertiesArray = ["UserLabelName", "Icon"];
                            break;
                        }
                        case HPTRIM.BaseObjectTypes.Schedule: {
                            propertiesArray = ["ScheduleTitle", "HasChildSchedules", "Icon"];
                            break;
                        }
                        case HPTRIM.BaseObjectTypes.SavedSearch: {
                            propertiesArray = ["SavedSearchName", "Icon", "FullName", "Name", "SearchDefinition"];
                            break;
                        }
                        case HPTRIM.BaseObjectTypes.RecordType: {
                            propertiesArray = ["Icon"];
                            break;
                        }
                        case HPTRIM.BaseObjectTypes.Record: {
                            propertiesArray = ["RecordNumber", "IsContainer", "RecordRecordType", "RecordTitle"];
                            break;
                        }
                        case HPTRIM.BaseObjectTypes.Location: {
                            propertiesArray = ["LocationSortName", "AllMembers", "Icon"];
                            break;
                        }
                        case HPTRIM.BaseObjectTypes.Keyword: {
                            propertiesArray = ["KeywordName", "Icon"];
                            break;
                        }
                        case HPTRIM.BaseObjectTypes.Classification: {
                            propertiesArray = ["ChildPattern", "ClassificationName", "Title", "RecordLastNumber", "Icon"];
                            break;
                        }
                        case HPTRIM.BaseObjectTypes.ActionDef: {
                            propertiesArray = ["ActionDefActionName", "ActionDefAssignee", "Icon"];
                            break;
                        }
                        case HPTRIM.BaseObjectTypes.LookupItem: {
                            propertiesArray = ["LookupItemParentSet", "LookupItemParentItem", "LookupItemHasChildItems", "LookupItemFullDescription", "LookupItemAbbreviation", "LookupItemName", "Icon"];
                            break;
                        }
                        default: {
                            propertiesArray = [objectType.nameProperty];
                        }
                    }
                    return propertiesArray;
                };
                TrimHelper.getDisplayProperty = function (objectType) {
                    var displayProperty = "";
                    switch (objectType) {
                        case HPTRIM.BaseObjectTypes.ActionDef:
                            displayProperty = "ActionDefActionName";
                            break;
                        case HPTRIM.BaseObjectTypes.Classification:
                            displayProperty = "ClassificationName";
                            break;
                        case HPTRIM.BaseObjectTypes.Keyword:
                            displayProperty = "KeywordName";
                            break;
                        case HPTRIM.BaseObjectTypes.Location:
                            displayProperty = "LocationSortName";
                            break;
                        case HPTRIM.BaseObjectTypes.Record:
                            displayProperty = "RecordNumber";
                            break;
                        case HPTRIM.BaseObjectTypes.SavedSearch:
                            displayProperty = "SavedSearchName";
                            break;
                        case HPTRIM.BaseObjectTypes.Schedule:
                            displayProperty = "ScheduleTitle";
                            break;
                        case HPTRIM.BaseObjectTypes.UserLabel:
                            displayProperty = "UserLabelName";
                            break;
                        case HPTRIM.BaseObjectTypes.WorkflowTemplate:
                            displayProperty = "WorkflowTemplateName";
                            break;
                        case HPTRIM.BaseObjectTypes.LookupItem:
                            displayProperty = "LookupItemFullDescription";
                    }
                    return displayProperty;
                };
                TrimHelper.getSearchPreviewPropertyNames = function (objectType) {
                    var properties = [];
                    switch (objectType) {
                        case HPTRIM.BaseObjectTypes.Record:
                            properties = ['RecordRecordType', 'RecordTitle', 'RecordNumber'];
                            break;
                        case HPTRIM.BaseObjectTypes.ActionDef:
                            properties = ["ActionDefActionName"];
                            break;
                        case HPTRIM.BaseObjectTypes.Classification:
                            properties = ["ClassificationName"];
                            break;
                        case HPTRIM.BaseObjectTypes.Keyword:
                            properties = ["KeywordName"];
                            break;
                        case HPTRIM.BaseObjectTypes.Location:
                            properties = ["LocationSortName"];
                            break;
                        case HPTRIM.BaseObjectTypes.SavedSearch:
                            properties = ["SavedSearchName"];
                            break;
                        case HPTRIM.BaseObjectTypes.Schedule:
                            properties = ["ScheduleTitle"];
                            break;
                        case HPTRIM.BaseObjectTypes.UserLabel:
                            properties = ["UserLabelName"];
                            break;
                        case HPTRIM.BaseObjectTypes.WorkflowTemplate:
                            properties = ["WorkflowTemplateName"];
                            break;
                        default:
                            properties = [];
                            break;
                    }
                    properties.push('icon');
                    properties.push('nameString');
                    return properties;
                };
                TrimHelper.getKwikSelectPropertyNames = function (objectType) {
                    var properties = [];
                    switch (objectType) {
                        case HPTRIM.BaseObjectTypes.Record:
                            properties = ['RecordRecordType', 'RecordTitle', 'RecordNumber', 'PossiblyHasSubordinates', 'IsContainer'];
                            break;
                        case HPTRIM.BaseObjectTypes.ActionDef:
                            properties = ["ActionDefActionName"];
                            break;
                        case HPTRIM.BaseObjectTypes.Classification:
                            properties = ["ClassificationName"];
                            break;
                        case HPTRIM.BaseObjectTypes.Keyword:
                            properties = ["KeywordName"];
                            break;
                        case HPTRIM.BaseObjectTypes.Location:
                            properties = ["LocationSortName"];
                            break;
                        case HPTRIM.BaseObjectTypes.SavedSearch:
                            properties = ["SavedSearchName"];
                            break;
                        case HPTRIM.BaseObjectTypes.Schedule:
                            properties = ["ScheduleTitle"];
                            break;
                        case HPTRIM.BaseObjectTypes.UserLabel:
                            properties = ["UserLabelName", "PossiblyHasSubordinates"];
                            break;
                        case HPTRIM.BaseObjectTypes.WorkflowTemplate:
                            properties = ["WorkflowTemplateName"];
                            break;
                        case HPTRIM.BaseObjectTypes.LookupItem:
                            properties = ["LookupItemParentSet", "LookupItemParentItem", "LookupItemHasChildItems", "LookupItemFullDescription", "LookupItemAbbreviation", "LookupItemName", "PossiblyHasSubordinates"];
                            break;
                        default:
                            properties = [];
                            break;
                    }
                    properties.push('icon');
                    properties.push('nameString');
                    return properties;
                };
                TrimHelper.loadObject = function (trimClient, objectToLoad, callback, failCallback, additionalProperties) {
                    var propertiesArray = TrimHelper.getDefaultRequiredProperties(objectToLoad.baseObjectType);
                    var objectRequest = new HPTRIM.TrimBaseObjectRequest(trimClient, objectToLoad, propertiesArray.join(','));
                    objectRequest.doRequest().done(function (result) {
                        if (result && result.Results && result.Results[0]) {
                            var rawTrimObject = result.Results[0];
                            var trimObject = HPTRIM.TrimBaseObject.make(rawTrimObject);
                            if (trimObject.displayValue == undefined || trimObject.displayValue == "") {
                                if (objectToLoad.baseObjectType.NamePropertyId && rawTrimObject[objectToLoad.baseObjectType.NamePropertyId]) {
                                    var displayProperty = TrimHelper.getDisplayProperty(objectToLoad.baseObjectType);
                                    if (!displayProperty) {
                                        displayProperty = objectToLoad.baseObjectType.NamePropertyId;
                                    }
                                    var displayValue = rawTrimObject[displayProperty];
                                    if (displayValue.Value) {
                                        trimObject.displayValue = displayValue.Value;
                                    }
                                    else {
                                        trimObject.displayValue = displayValue;
                                    }
                                }
                                else {
                                    trimObject.displayValue = trimObject.Uri;
                                }
                            }
                            if (objectToLoad.baseObjectType == HPTRIM.BaseObjectTypes.Record) {
                                if (rawTrimObject.RecordRecordType && rawTrimObject.RecordRecordType.Icon) {
                                    trimObject.hasIcon = true;
                                    trimObject.iconId = rawTrimObject.RecordRecordType.Icon.Id;
                                }
                            }
                            else {
                                if (rawTrimObject.Icon) {
                                    trimObject.hasIcon = true;
                                    trimObject.iconId = rawTrimObject.Icon.Id;
                                }
                            }
                            callback(trimObject);
                        }
                    }).fail(function (error) {
                        if (failCallback) {
                            failCallback(error);
                        }
                    });
                };
                TrimHelper.format = function (input, substitutionArray) {
                    return HP.HPTRIM.Framework.Components.Shared.String.format(input, substitutionArray);
                };
                TrimHelper.arraySwap = function (inputArray, sourceIndex, destIndex) {
                    var temp = inputArray[sourceIndex];
                    inputArray[sourceIndex] = inputArray[destIndex];
                    inputArray[destIndex] = temp;
                };
                TrimHelper.isActiveFeature = function (feature) {
                    var indexFound = -1;
                    var trimApp = window['root'];
                    var activeFeatures = trimApp.trimClient.database.activeFeatures();
                    var stringActiveFeatures = activeFeatures.join(',');
                    var lowerCaseStringActiveFeatures = stringActiveFeatures.toLowerCase();
                    var featureLowerCase = feature.toLowerCase();
                    indexFound = lowerCaseStringActiveFeatures.indexOf(featureLowerCase);
                    return indexFound > -1;
                };
                TrimHelper.getDateStringFromDatePickerEvent = function (e, format) {
                    var newDate = e.date, dateString = "";
                    if (newDate.format) {
                        dateString = newDate.format(format);
                    }
                    return dateString;
                };
                TrimHelper.makeTasks = function (taskList) {
                    var actions = [];
                    _.each(taskList, function (tsk) {
                        var action = new ActionManager.ActionBase(tsk);
                        actions.push(action);
                    });
                    return actions;
                };
                TrimHelper.getAntiForegryToken = function () {
                    var requestVerificationToken = {};
                    if (HPRMWebConfig.requireAntiForgeryToken === true) {
                        requestVerificationToken = {
                            "__RequestVerificationToken": HPRMWebConfig.antiForgeryToken
                        };
                    }
                    return requestVerificationToken;
                };
                TrimHelper.getSavedSearchIconName = function (savedSearchTypeName, suffix) {
                    var returnValue = "";
                    if (suffix == undefined || suffix == "") {
                        suffix = "_24";
                    }
                    var savedSearchDictionary = [HPTRIM.BaseObjectTypes.Activity.name,
                        HPTRIM.BaseObjectTypes.Location.name,
                        HPTRIM.BaseObjectTypes.Record.name,
                        HPTRIM.BaseObjectTypes.Request.name,
                        HPTRIM.BaseObjectTypes.SavedSearch.name,
                        HPTRIM.BaseObjectTypes.TodoItem.name,
                        HPTRIM.BaseObjectTypes.Workflow.name,
                        HPTRIM.BaseObjectTypes.CheckinStyle.name,
                    ];
                    if (_.contains(savedSearchDictionary, savedSearchTypeName)) {
                        returnValue = ("savedsearch_" + savedSearchTypeName).toLowerCase();
                    }
                    else {
                        returnValue = "savesearch";
                    }
                    return returnValue + suffix;
                };
                TrimHelper.getHighlightedContent = function (currentHTML, searchKeyWords) {
                    if (!currentHTML) {
                        return "";
                    }
                    if (!searchKeyWords) {
                        return currentHTML;
                    }
                    var arrMyText = searchKeyWords.split(",");
                    var myInnerHTML = "";
                    for (var i = 0; i < arrMyText.length; i++) {
                        myInnerHTML = arrMyText[i] ? currentHTML.replace(new RegExp('(' + arrMyText[i] + ')', 'gi'), '<mark>' + arrMyText[i] + '</mark>') : currentHTML;
                        currentHTML = myInnerHTML;
                    }
                    return currentHTML;
                };
                TrimHelper.makeGetIconFunction = function () {
                    return function (item) {
                        var iconClass = "";
                        var recTypeIconID = "";
                        var recExtension = "";
                        if (item.Fields) {
                            if (item.Fields.RecordRecordType) {
                                recTypeIconID = item.Fields.RecordRecordType.Icon.Id.toLowerCase() + '_x24 media-object';
                            }
                            if (item.Fields.RecordExtension) {
                                recExtension = item.Fields.RecordExtension;
                            }
                        }
                        else {
                            var rawItem = item;
                            recTypeIconID = rawItem.RecordRecordType.Icon.Id.toLowerCase() + '_x24 media-object';
                            recExtension = rawItem.RecordExtension.Value;
                        }
                        try {
                            if (recExtension) {
                                var tryAgain = false;
                                var extension = recExtension.toLowerCase();
                                switch (extension) {
                                    case 'exif':
                                    case 'tiff':
                                    case 'tif':
                                    case 'gif':
                                    case 'bmp':
                                    case 'png':
                                    case 'jpg':
                                    case 'jpeg': {
                                        iconClass = 'document-image_24 media-object';
                                        break;
                                    }
                                    default: {
                                        tryAgain = true;
                                        break;
                                    }
                                }
                                if (tryAgain) {
                                    var threeLetterExtension = extension.substring(0, 3);
                                    switch (threeLetterExtension) {
                                        case 'one':
                                            iconClass = 'document-note_24 media-object';
                                            break;
                                        case 'doc':
                                        case 'dot':
                                            iconClass = 'document-word_24 media-object';
                                            break;
                                        case 'ppt':
                                        case 'pot':
                                        case 'pps':
                                            iconClass = 'document-powerpoint_24 media-object';
                                            break;
                                        case 'xls':
                                        case 'xlt':
                                        case 'xla':
                                        case 'xlw':
                                        case 'xlm':
                                            iconClass = 'document-excel_24 media-object';
                                            break;
                                        case 'eml':
                                        case 'vmb':
                                        case 'msg':
                                            iconClass = 'document-outlook_24 media-object';
                                            break;
                                        case 'zip':
                                        case 'rar':
                                        case '7zp':
                                            iconClass = 'document-zip_24 media-object';
                                            break;
                                        case 'txt':
                                        case 'log':
                                            iconClass = 'document-txt_24 media-object';
                                            break;
                                        case 'rtf':
                                        case 'pdf':
                                            iconClass = 'document-' + threeLetterExtension + '_24 media-object';
                                            break;
                                        default: {
                                            iconClass = 'document-electronic_24 media-object';
                                        }
                                    }
                                }
                            }
                            else {
                                iconClass = item.Fields.RecordRecordType.Icon.Id.toLowerCase() + '_x24 media-object';
                            }
                        }
                        catch (ex) {
                        }
                        return iconClass;
                    };
                };
                TrimHelper.makePropertyOrFieldDisplayItem = function (propertyOrFieldDef, trimObject, trimClient) {
                    var propertyId = propertyOrFieldDef.Id;
                    var caption = propertyOrFieldDef.Caption;
                    var displayValue = "";
                    var isBasicProperty = true;
                    var isSupportedObject = false;
                    var uri = "";
                    var objectType = "";
                    var isHyperlink = false;
                    var url = "";
                    var isEmailAddress = false;
                    var isGps = false;
                    var gpsValue = "";
                    var rawPropertyOrFieldValue = {};
                    if (propertyOrFieldDef.IsAProperty) {
                        if (_.has(trimObject, propertyId)) {
                            rawPropertyOrFieldValue = trimObject[propertyId];
                        }
                    }
                    else if (trimObject.Fields) {
                        if (_.has(trimObject.Fields, propertyId)) {
                            rawPropertyOrFieldValue = trimObject.Fields[propertyId];
                        }
                    }
                    if (propertyOrFieldDef.PropertyId == "Uri") {
                        displayValue = rawPropertyOrFieldValue;
                    }
                    else {
                        displayValue = !_.isEmpty(rawPropertyOrFieldValue.StringValue) ? rawPropertyOrFieldValue.StringValue : rawPropertyOrFieldValue.Value;
                        if (displayValue === undefined) {
                            displayValue = "";
                        }
                    }
                    uri = rawPropertyOrFieldValue.Uri;
                    objectType = rawPropertyOrFieldValue.TrimType;
                    if (propertyOrFieldDef.PFFormat == "Geography") {
                        isGps = true;
                        isBasicProperty = false;
                        if (rawPropertyOrFieldValue != undefined) {
                            gpsValue = rawPropertyOrFieldValue.Value;
                            if (gpsValue) {
                                displayValue = gpsValue;
                            }
                        }
                    }
                    if (propertyOrFieldDef.IsEmailAddress == true) {
                        isEmailAddress = true;
                        isBasicProperty = false;
                        if (displayValue) {
                            url = "mailto:" + displayValue;
                        }
                    }
                    if (propertyOrFieldDef.PFFormat == "Datetime") {
                        if (propertyOrFieldDef.StringValue) {
                            displayValue = propertyOrFieldDef.StringValue;
                        }
                        else if (propertyOrFieldDef.DateTime) {
                            displayValue = new Date(propertyOrFieldDef.DateTime).toString();
                        }
                    }
                    if (propertyOrFieldDef.IsHyperlink == true || propertyOrFieldDef.Id == "LocationWebPage") {
                        isHyperlink = true;
                        isBasicProperty = false;
                        if (displayValue) {
                            url = displayValue;
                        }
                    }
                    if (uri && objectType) {
                        try {
                            if (trimClient.isSupportedObjectType(objectType)) {
                                isSupportedObject = true;
                                isBasicProperty = false;
                                var basePath = HP.HPTRIM.Utils.TrimHelper.getBaseUrl();
                                var queryStringValue = "uri:" + uri;
                                var query = HP.HPTRIM.Framework.Components.Shared.String.format("q={0}", [queryStringValue]);
                                var objectTypePart = HP.HPTRIM.Framework.Components.Shared.String.format("t={0}", [objectType]);
                                url = HP.HPTRIM.Framework.Components.Shared.String.format("{0}?{1}&{2}", [basePath, query, objectTypePart]);
                            }
                        }
                        catch (ex) {
                            displayValue = propertyOrFieldDef.NameString;
                        }
                    }
                    var prop = {
                        RawValue: rawPropertyOrFieldValue.Value,
                        Caption: caption,
                        isSimpleValue: isBasicProperty,
                        displayValue: displayValue,
                        isLink: isHyperlink,
                        url: url,
                        isSupportedObject: isSupportedObject,
                        Uri: uri,
                        objectType: objectType,
                        isGps: isGps,
                        gpsValue: gpsValue,
                        isEmailAddress: isEmailAddress,
                    };
                    return prop;
                };
                ;
                TrimHelper.fileName2IconCls = function (fileName) {
                    var extension = fileName.split('.').pop();
                    return HP.HPTRIM.Utils.TrimHelper.extension2IconCls(extension);
                };
                TrimHelper.extension2IconCls = function (extension) {
                    var iconClass = "";
                    if (extension) {
                        var tryAgain = false;
                        var extension = extension.toLowerCase();
                        switch (extension) {
                            case 'exif':
                            case 'tiff':
                            case 'tif':
                            case 'gif':
                            case 'bmp':
                            case 'png':
                            case 'jpg':
                            case 'jpeg': {
                                iconClass = 'document-image_24 media-object';
                                break;
                            }
                            default: {
                                tryAgain = true;
                                break;
                            }
                        }
                        if (tryAgain) {
                            var threeLetterExtension = extension.substring(0, 3);
                            switch (threeLetterExtension) {
                                case 'one':
                                    iconClass = 'document-note_24 media-object';
                                    break;
                                case 'doc':
                                case 'dot':
                                    iconClass = 'document-word_24 media-object';
                                    break;
                                case 'ppt':
                                case 'pot':
                                case 'pps':
                                    iconClass = 'document-powerpoint_24 media-object';
                                    break;
                                case 'xls':
                                case 'xlt':
                                case 'xla':
                                case 'xlw':
                                case 'xlm':
                                    iconClass = 'document-excel_24 media-object';
                                    break;
                                case 'eml':
                                case 'vmb':
                                case 'msg':
                                    iconClass = 'document-outlook_24 media-object';
                                    break;
                                case 'zip':
                                case 'rar':
                                case '7zp':
                                    iconClass = 'document-zip_24 media-object';
                                    break;
                                case 'txt':
                                case 'log':
                                    iconClass = 'document-txt_24 media-object';
                                    break;
                                case 'rtf':
                                case 'pdf':
                                    iconClass = 'document-' + threeLetterExtension + '_24 media-object';
                                    break;
                                default: {
                                    iconClass = 'document-electronic_24 media-object';
                                }
                            }
                        }
                        return iconClass;
                    }
                };
                return TrimHelper;
            }());
            Utils.TrimHelper = TrimHelper;
            var DomHelper = (function () {
                function DomHelper() {
                }
                DomHelper.isElementInView = function (el) {
                    if (typeof jQuery === "function" && el instanceof jQuery) {
                        el = el[0];
                    }
                    if (!el) {
                        return false;
                    }
                    var rect = el.getBoundingClientRect();
                    return (rect.top >= 0 &&
                        rect.left >= 0 &&
                        rect.bottom <= (window.innerHeight || document.documentElement.clientHeight) &&
                        rect.right <= (window.innerWidth || document.documentElement.clientWidth));
                };
                DomHelper.isIE = function () {
                    var ua = window.navigator.userAgent;
                    var ie = ua.search(/(MSIE|Trident|Edge)/);
                    return ie > -1;
                };
                DomHelper.isIEBeforeEdge = function () {
                    var isIEBrowser = window['ActiveXObject'] !== undefined ? true : false;
                    return isIEBrowser;
                };
                return DomHelper;
            }());
            Utils.DomHelper = DomHelper;
        })(Utils = HPTRIM.Utils || (HPTRIM.Utils = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var Utils;
        (function (Utils) {
            var KeyboardMap = (function () {
                function KeyboardMap() {
                }
                KeyboardMap.Setup = function () {
                    $(window).keydown(function (e) {
                        if (e.altKey && e.ctrlKey) {
                            var id = HP.HPTRIM.Utils.KeyboardMap.getPanelId(e).toUpperCase();
                            if (id === "NONE") {
                                return;
                            }
                            if (id === "HELP") {
                                var ele = $("#show-help-btn");
                                ele.click();
                            }
                            var panelId = "#NAV_" + id;
                            var ele = $(panelId);
                            if (ele) {
                                ele.click();
                            }
                            e.preventDefault();
                            $('HPRM-deluxe-media-object').parent().click();
                        }
                    });
                };
                KeyboardMap.getPanelId = function (e) {
                    var keyboadCode = {
                        HOME: 72,
                        HELP: 80,
                        REQUEST: 81,
                        RECORDS: 82,
                        SEARCH: 83,
                        WORKFLOW: 87,
                        CREATERECORD: 67,
                        INITIATEWORKFLOW: 73,
                        LOCATION: 76,
                        USERLABEL: 85,
                        SAVEDSEARCH: 90,
                        TODOITEM: 84,
                        CHECKINSTYLE: 89,
                        RECORDACTION: 79
                    };
                    switch (e.keyCode) {
                        case keyboadCode.HOME:
                            return "HOME";
                        case keyboadCode.RECORDS:
                            return "RECORDS";
                        case keyboadCode.SEARCH:
                            return "SEARCH";
                        case keyboadCode.REQUEST:
                            return "REQUEST";
                        case keyboadCode.WORKFLOW:
                            return "WORKFLOW";
                        case keyboadCode.HELP:
                            return "HELP";
                        case keyboadCode.CREATERECORD:
                            return "CREATERECORD";
                        case keyboadCode.INITIATEWORKFLOW:
                            return "INITIATEWORKFLOW";
                        case keyboadCode.LOCATION:
                            return "LOCATION";
                        case keyboadCode.SAVEDSEARCH:
                            return "SAVEDSEARCH";
                        case keyboadCode.TODOITEM:
                            return "TODOITEM";
                        case keyboadCode.USERLABEL:
                            return "USERLABEL";
                        case keyboadCode.CHECKINSTYLE:
                            return "CHECKINSTYLE";
                        case keyboadCode.RECORDACTION:
                            return "RECORDACTION";
                        default:
                            return "NONE";
                    }
                };
                return KeyboardMap;
            }());
            Utils.KeyboardMap = KeyboardMap;
        })(Utils = HPTRIM.Utils || (HPTRIM.Utils = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var Utils;
        (function (Utils) {
            var Form = (function () {
                function Form() {
                }
                Form.makeItemPicker = function (trimClient, searchClause, disableMultiSelects) {
                    var itemPicker = undefined;
                    var title = searchClause.Caption;
                    var objectType = Utils.TrimHelper.toBaseObjectType(searchClause.ObjectTypeParameter);
                    if (objectType) {
                        title = searchClause.Caption + " (" + objectType.Name + ")";
                    }
                    if (disableMultiSelects == undefined) {
                        disableMultiSelects = true;
                    }
                    itemPicker = HP.HPTRIM.Form.TrimObjectDecorator.makeTrimItemPicker(trimClient, searchClause.ObjectTypeParameter, title, searchClause.Name, false, !disableMultiSelects);
                    itemPicker.submitPropertyName = searchClause.Name;
                    if (itemPicker.isHidden) {
                        itemPicker.showTextField = true;
                        itemPicker.label(searchClause.Caption);
                    }
                    return itemPicker;
                };
                Form.initialiseCheckBox = function (backingObservable, caption) {
                    var checkBoxPageItem = {
                        Caption: caption,
                        Format: "Boolean",
                        Name: "",
                        Value: backingObservable,
                    };
                    return new HP.HPTRIM.Form.BooleanDecorator(checkBoxPageItem);
                };
                Form.initialiseDotCheckBox = function (backingObservable, caption) {
                    var checkBoxPageItem = {
                        Caption: caption,
                        Format: "Boolean",
                        Name: "",
                        Value: backingObservable,
                    };
                    var checkbox = new HP.HPTRIM.Form.DotCheckBox(checkBoxPageItem);
                    return checkbox;
                };
                Form.initialiseTickCheckBox = function (backingObservable, caption) {
                    var checkBoxPageItem = {
                        Caption: caption,
                        Format: "Boolean",
                        Name: "",
                        Value: backingObservable,
                    };
                    var checkbox = new HP.HPTRIM.Form.TickCheckBox(checkBoxPageItem);
                    return checkbox;
                };
                Form.makeCheckboxesLikeRadio = function (checkBoxList) {
                    var switchOffCheckboxes = function (checkBoxList, oneToSkip) {
                        _.each(checkBoxList, function (checkBox) {
                            if (checkBox != oneToSkip) {
                                checkBox.Value(false);
                            }
                        });
                    };
                    _.each(checkBoxList, function (currentCheckBox) {
                        currentCheckBox.Value.subscribe(function (newValue) {
                            if (newValue) {
                                switchOffCheckboxes(checkBoxList, currentCheckBox);
                            }
                            else {
                                if (!_.find(checkBoxList, function (checkBox) {
                                    return checkBox.Value();
                                })) {
                                    currentCheckBox.Value(true);
                                }
                                ;
                            }
                        });
                    });
                };
                Form.resetThesaurusOverlayPanel = function () {
                    ko.postbox.publish("KeywordOverlayReset");
                };
                Form.selectRange = function (elementId, start, end) {
                    var e = document.getElementById(elementId);
                    if (!e) {
                        return;
                    }
                    else if (e.setSelectionRange) {
                        e.focus();
                        e.setSelectionRange(start, end);
                    }
                    else if (e.createTextRange) {
                        var range = e.createTextRange();
                        range.collapse(true);
                        range.moveEnd('character', end);
                        range.moveStart('character', start);
                        range.select();
                    }
                    else if (e.selectionStart) {
                        e.selectionStart = start;
                        e.selectionEnd = end;
                    }
                };
                return Form;
            }());
            Utils.Form = Form;
        })(Utils = HPTRIM.Utils || (HPTRIM.Utils = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var Utils;
        (function (Utils) {
            var UIConstants = (function () {
                function UIConstants() {
                }
                UIConstants.PRIMARY_BUTTON_CLASS = 'btn btn-flat btn-primary';
                UIConstants.DEFAULT_BUTTON_CLASS = 'btn btn-flat btn-secondary';
                UIConstants.COMMENTS_COLUMN_SIZER = 90;
                UIConstants.COMMENTS_ROW_Displayed = 15;
                UIConstants.CSS_CLASS_SAVED_SEARCH_FORM = 'as-spa-saved-search-form';
                UIConstants.CSS_CLASS_OVERLAY_CONTENT_ADDITIONAL = 'as-spa-overlay-content-additional';
                return UIConstants;
            }());
            Utils.UIConstants = UIConstants;
        })(Utils = HPTRIM.Utils || (HPTRIM.Utils = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var Utils;
        (function (Utils) {
            var Wkt = (function () {
                function Wkt(wktString) {
                    this.parameters = [];
                    var typeRegExp = /^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/;
                    var matches = typeRegExp.exec(wktString);
                    var type = '';
                    var pointString = '';
                    if (matches) {
                        type = matches[1].toLocaleLowerCase();
                        pointString = matches[2];
                    }
                    if (type == "point") {
                        var point = this.createGpsPoint(pointString);
                        this.parameters.push(point);
                    }
                    if (type == "linestring" || type == "polygon") {
                        this.processMultipleGpsPoints(pointString);
                    }
                    this.type = type;
                }
                Wkt.prototype.getGpsPointsArray = function () {
                    return this.parameters;
                };
                Wkt.prototype.processMultipleGpsPoints = function (pointString) {
                    var pointStringWithoutBrace = this.removeBraces(pointString);
                    var points = pointStringWithoutBrace.split(',');
                    for (var i = 0; i < points.length; i++) {
                        var xyString = points[i];
                        var point = this.createGpsPoint(xyString);
                        this.parameters.push(point);
                    }
                };
                Wkt.prototype.createGpsPoint = function (gpsPointString) {
                    var parts = gpsPointString.split(' ');
                    var point = {
                        x: parts[0],
                        y: parts[1]
                    };
                    return point;
                };
                Wkt.prototype.removeBraces = function (stringWithBraces) {
                    return stringWithBraces.replace('(', '').replace(')', '');
                };
                return Wkt;
            }());
            Utils.Wkt = Wkt;
        })(Utils = HPTRIM.Utils || (HPTRIM.Utils = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var Utils;
        (function (Utils) {
            var ServiceAPIUtils = (function () {
                function ServiceAPIUtils() {
                }
                ServiceAPIUtils.isWarning = function (rawResult) {
                    var rawStatusObject = rawResult.ResponseStatus;
                    var rawErrorArray = rawStatusObject ? rawStatusObject.Errors : [];
                    var fatalError = _.reduce(rawErrorArray, function (memo, rawError) {
                        return (rawError.Meta.Bad === "True" || memo);
                    }, false);
                    return (rawStatusObject.Errors && rawStatusObject.Errors.length > 0 && !fatalError);
                };
                ServiceAPIUtils.hasFatalError = function (rawResult) {
                    var rawStatusObject = rawResult.ResponseStatus;
                    var rawErrorArray = rawStatusObject ? rawStatusObject.Errors : [];
                    var fatalError = _.reduce(rawErrorArray, function (memo, rawError) {
                        return (rawError.Meta.Bad === "True" || memo);
                    }, false);
                    return (fatalError);
                };
                ServiceAPIUtils.getWarningMessageArray = function (rawResult) {
                    if (rawResult.ResponseStatus) {
                        return _.map(rawResult.ResponseStatus.Errors, function (rawError) {
                            return rawError.Message;
                        });
                    }
                    return [];
                };
                return ServiceAPIUtils;
            }());
            Utils.ServiceAPIUtils = ServiceAPIUtils;
        })(Utils = HPTRIM.Utils || (HPTRIM.Utils = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var UserOptions = (function () {
            function UserOptions() {
                this.monthBeforeDay = ko.observable(null);
                this.preferredLanguage = ko.observable(null);
                this.dateSeparator = ko.observable(null);
                this.yearFirst = ko.observable(null);
                this.friendlyDateFormat = ko.observable(null);
                this.dateOnlyFormat = ko.observable(null);
                this.ddmmyyyy = false;
                this.mmddyyyy = false;
                this.yyyymmdd = false;
                this.startupOptions = ko.observable(null);
                this.webclientOptions = ko.observable(null);
                this.startupOptionDefs = ko.observableArray([]);
                this.listPageSize = 0;
                this.bypassViewerFileTypes = ko.observableArray([]);
                this.onstreamViewerFileTypes = ko.observableArray([]);
            }
            return UserOptions;
        }());
        HPTRIM.UserOptions = UserOptions;
        var Config = (function () {
            function Config() {
            }
            Config.serviceApiUrl = HPTRIM.TrimClient.getServiceAPIUrl();
            Config.searchAhead = HPRMWebConfig.searchAhead;
            Config.useADFS = HPRMWebConfig.useADFS;
            return Config;
        }());
        HPTRIM.Config = Config;
        var Database = (function () {
            function Database(id, name, workgroupServerName, currentUser) {
                this.currentLoggedInUser = ko.observable(null);
                this.id = ko.observable('');
                this.name = ko.observable('');
                this.workgroupServerName = ko.observable('');
                this.userType = ko.observable('');
                this.googleGISKeySet = ko.observable(false);
                this.currentUserPermissions = ko.observable({});
                this.licensedFeatures = ko.observableArray([]);
                this.activeFeatures = ko.observableArray([]);
                this.id(id);
                this.name(name);
                this.currentLoggedInUser(currentUser);
                this.workgroupServerName(workgroupServerName);
            }
            Database.prototype.getCurrentUser = function () {
                return this.currentLoggedInUser();
            };
            Database.prototype.getWorkgroupServerName = function () {
                return this.workgroupServerName();
            };
            return Database;
        }());
        HPTRIM.Database = Database;
        var TrimBaseObject = (function () {
            function TrimBaseObject(bobType, uri, displayValue, displayValueExtra, iconId) {
                this.hasIcon = false;
                this.iconId = "";
                this.baseObjectType = bobType;
                this.Uri = uri;
                this.displayValue = displayValue ? displayValue : "";
                this.displayValueExtra = displayValueExtra;
                this.children = ko.observable({});
                if (iconId) {
                    this.iconId = iconId;
                    this.hasIcon = true;
                }
                this.configureFunctions();
            }
            TrimBaseObject.makeEmpty = function () {
                var emptyValue = {
                    TrimType: "",
                    Uri: "-1",
                    NameString: "",
                    Type: ""
                };
                var object = TrimBaseObject.make(emptyValue);
                return object;
            };
            TrimBaseObject.make = function (value) {
                var bobType = HPTRIM.BaseObjectTypes.Record;
                if (value.TrimType) {
                    bobType = HPTRIM.BaseObjectTypes[value.TrimType];
                }
                var nameString = "";
                if (value.NameString) {
                    nameString = value.NameString;
                }
                if (bobType == HPTRIM.BaseObjectTypes.Location) {
                    if (value['LocationSurnameNoPrefix']) {
                        nameString = value['LocationSurnameNoPrefix'].Value;
                    }
                    if (value['LocationSortName']) {
                        nameString = value['LocationSortName'].Value;
                    }
                    if (value['LocationFormattedName']) {
                        nameString = value['LocationFormattedName'].Value;
                    }
                }
                if (bobType == HPTRIM.BaseObjectTypes.Record) {
                    if (value['RecordNumber']) {
                        nameString = value['RecordNumber'].Value;
                    }
                }
                if (_.isString(value)) {
                    nameString = value;
                }
                var trimValue = new TrimBaseObject(bobType, value.Uri, nameString);
                if (value.NameString &&
                    value.NameString.Value) {
                    trimValue.displayValueExtra = value.NameString.Value;
                }
                else {
                    trimValue.displayValueExtra = trimValue.displayValue;
                }
                if (value.Icon) {
                    trimValue.hasIcon = true;
                    trimValue.iconId = value.Icon.Id;
                }
                return trimValue;
            };
            TrimBaseObject.prototype.configureFunctions = function () {
                this.hasChildren = function () { };
                this.getChildren = function () { };
                this.onItemClick = function () { };
            };
            return TrimBaseObject;
        }());
        HPTRIM.TrimBaseObject = TrimBaseObject;
        var TrimChildObject = (function () {
            function TrimChildObject(childObjectType, uri, displayValue) {
                this.hasIcon = false;
                this.iconId = "";
                this.childObjectType = childObjectType;
                this.Uri = uri;
                this.displayValue = displayValue ? displayValue : "";
            }
            TrimChildObject.makeEmpty = function () {
                var emptyValue = {
                    TrimType: "",
                    Uri: "-1",
                    NameString: "",
                    Type: ""
                };
                return emptyValue;
            };
            return TrimChildObject;
        }());
        HPTRIM.TrimChildObject = TrimChildObject;
        var PropertyOrFieldHelper = (function () {
            function PropertyOrFieldHelper() {
            }
            PropertyOrFieldHelper.toString = function (propertyValue) {
                var stringValue = propertyValue;
                if (propertyValue) {
                    if (propertyValue.DateTime || _.has(propertyValue, 'IsClear')) {
                        if (propertyValue.IsClear === true) {
                            return "";
                        }
                        var date = new Date(propertyValue.DateTime);
                        if (_.has(propertyValue, "IsTimeClear")) {
                            if (propertyValue.IsTimeClear) {
                                stringValue = date.toDateString();
                            }
                            else {
                                stringValue = date.toDateString() + " " + date.toLocaleTimeString();
                            }
                        }
                        else {
                            stringValue = date.toDateString() + " " + date.toLocaleTimeString();
                        }
                        return stringValue;
                    }
                    if (propertyValue.TrimType) {
                        var trimBaseObject = TrimBaseObject.make(propertyValue);
                        stringValue = trimBaseObject.displayValue;
                        return stringValue;
                    }
                    if (_.isObject(propertyValue)) {
                        if ("Value" in propertyValue) {
                            stringValue = propertyValue.Value;
                            return stringValue;
                        }
                    }
                }
                return stringValue;
            };
            return PropertyOrFieldHelper;
        }());
        HPTRIM.PropertyOrFieldHelper = PropertyOrFieldHelper;
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var PropertyValueType = (function () {
            function PropertyValueType() {
            }
            PropertyValueType.Both = {
                propertyValueName: "both"
            };
            PropertyValueType.Value = {
                propertyValueName: "value"
            };
            PropertyValueType.String = {
                propertyValueName: "string"
            };
            return PropertyValueType;
        }());
        HPTRIM.PropertyValueType = PropertyValueType;
        var TrimMainObjectSearch = (function () {
            function TrimMainObjectSearch(trimClient, baseObjectType, recordSetId) {
                this.trimClient = trimClient;
                this._data = {};
                this._recordSetId = "";
                this._trimClient = trimClient;
                this._trimType = baseObjectType;
                this._fromItemIndex = -1;
                this._itemsToLoad = -1;
                this._recordSetId = recordSetId;
            }
            TrimMainObjectSearch.prototype.setSearchString = function (searchString) {
                searchString = "" + searchString;
                searchString = searchString.replace('+', HPRMWebConfig.recursiveSymbol);
                this._data['q'] = searchString;
            };
            TrimMainObjectSearch.prototype.setPropertyValueType = function (propertyValueType) {
                this._data['PropertyValue'] = propertyValueType.propertyValueName;
            };
            TrimMainObjectSearch.prototype.includePropertyDefs = function (includeDefs) {
                this._data['IncludePropertyDefs'] = includeDefs;
            };
            TrimMainObjectSearch.prototype.setIncludeRawPropertiesFor = function (includeProperties) {
                this._data['IncludeRawPropertiesFor'] = includeProperties.name;
            };
            TrimMainObjectSearch.prototype.setIncludeStringPropertiesFor = function (includeProperties) {
                this._data['IncludeStringPropertiesFor'] = includeProperties.name;
            };
            TrimMainObjectSearch.prototype.setExcludeCount = function (ExcludeCount) {
                this._data['ExcludeCount'] = ExcludeCount;
            };
            TrimMainObjectSearch.prototype.setCountResults = function (CountResults) {
                this._data['CountResults'] = CountResults;
            };
            TrimMainObjectSearch.prototype.setPageSize = function (pageSize) {
                this._data['pageSize'] = pageSize;
            };
            TrimMainObjectSearch.prototype.setStringDisplayType = function (stringDisplayType) {
                this._data['stringDisplayType'] = stringDisplayType.toString();
            };
            TrimMainObjectSearch.prototype.setPropertySets = function (propertySets) {
                this._data['propertySets'] = propertySets.join();
            };
            TrimMainObjectSearch.prototype.setPropertiesByString = function (properties) {
                this._data['properties'] = properties;
            };
            TrimMainObjectSearch.prototype.setProperties = function (properties) {
                this._data['properties'] = properties.join();
            };
            TrimMainObjectSearch.prototype.setDescendantProperties = function (properties) {
                this._data['descendantProperties'] = properties.join();
            };
            TrimMainObjectSearch.prototype.setSelectedCommandIds = function (selectedCommandIds) {
                this._data['cid_SelectedIds'] = selectedCommandIds.join();
            };
            TrimMainObjectSearch.prototype.setSortby = function (sortBy) {
                this._data['sortBy'] = sortBy;
            };
            TrimMainObjectSearch.prototype.setPuropose = function (purpose) {
                this._data['purpose'] = purpose;
            };
            TrimMainObjectSearch.prototype.setFilterby = function (flag) {
                if (flag)
                    this._data['ApplyDefaults'] = true;
                else
                    this._data['ApplyDefaults'] = false;
            };
            TrimMainObjectSearch.prototype.setFilter = function (filter) {
                this._data['filter'] = filter;
            };
            TrimMainObjectSearch.prototype.setSearchOptions = function (searchOptions) {
                this._data['Options'] = searchOptions;
            };
            TrimMainObjectSearch.prototype.getStartItemIndex = function () {
                if (this._data['start'] == 0) {
                    return 0;
                }
                return this._data['start'] - 1;
            };
            TrimMainObjectSearch.prototype.setItemsToLoad = function (fromItemIndex, itemsToLoad) {
                if (fromItemIndex != undefined && itemsToLoad != undefined && fromItemIndex > -1 && itemsToLoad > 0) {
                    this._fromItemIndex = fromItemIndex;
                    this._itemsToLoad = itemsToLoad;
                }
            };
            TrimMainObjectSearch.prototype.page = function (page) {
                if (page) {
                    this._data['start'] = (page * this._data['pageSize']) + 1;
                }
                else {
                    this._data['start'] = 1;
                }
                this._data['page'] = page || 0;
                if (this._fromItemIndex > -1 && this._itemsToLoad > 0) {
                    this._data['pageSize'] = this._itemsToLoad;
                    this._data['start'] = this._fromItemIndex + 1;
                }
                return this._trimClient.doGet(this._trimType.path, this._data, null, null, this._recordSetId);
            };
            return TrimMainObjectSearch;
        }());
        HPTRIM.TrimMainObjectSearch = TrimMainObjectSearch;
        var TrimObjectSave = (function () {
            function TrimObjectSave(trimClient, objecType, uri) {
                this._data = {};
                this._uri = -1;
                this._trimClient = trimClient;
                this._uri = uri;
                this._objectType = objecType;
                this._data.stringDisplayType = 'ViewPane';
            }
            TrimObjectSave.prototype.setStringDisplayType = function (stringDisplayType) {
                this._data.stringDisplayType = stringDisplayType;
            };
            TrimObjectSave.prototype.doRequestEx = function (data) {
                var path = this._objectType.path;
                if (this._uri > -1) {
                    data['Uri'] = this._uri.toString();
                    data['PropertyValue'] = 'Both';
                }
                return this._trimClient.doPost(path, data);
            };
            return TrimObjectSave;
        }());
        HPTRIM.TrimObjectSave = TrimObjectSave;
        var TrimBaseObjectRequest = (function () {
            function TrimBaseObjectRequest(trimClient, trimBaseObject, properties, additionalData) {
                this._data = {};
                this._trimClient = trimClient;
                this._trimBaseObject = trimBaseObject;
                if (additionalData) {
                    $.extend(this._data, additionalData);
                }
                this._data['properties'] = properties;
                this._data['PropertyValue'] = 'Both';
            }
            TrimBaseObjectRequest.prototype.addProperty = function (property) {
                if (this._data['properties']) {
                    this._data['properties'] = this._data['properties'] + ',' + property;
                }
                else {
                    this._data['properties'] = property;
                }
            };
            TrimBaseObjectRequest.prototype.setProperties = function (properties) {
                this._data['properties'] = properties.join();
            };
            TrimBaseObjectRequest.prototype.setPropertySets = function (propertySets) {
                this._data['propertySets'] = propertySets.join();
            };
            TrimBaseObjectRequest.prototype.setStringDisplayType = function (stringDisplayType) {
                this._data['stringDisplayType'] = stringDisplayType.name;
            };
            TrimBaseObjectRequest.prototype.doRequest = function () {
                var path = "";
                if (this._trimBaseObject.baseObjectType == undefined) {
                    path = this._trimBaseObject['TrimType'] + "/" + this._trimBaseObject.Uri;
                }
                else {
                    path = this._trimBaseObject.baseObjectType.path + "/" + this._trimBaseObject.Uri;
                }
                return this._trimClient.doGet(path, this._data);
            };
            return TrimBaseObjectRequest;
        }());
        HPTRIM.TrimBaseObjectRequest = TrimBaseObjectRequest;
        var DeleteRequest = (function () {
            function DeleteRequest(trimClient, trimBaseObject) {
                this._trimClient = trimClient;
                this._trimBaseObject = trimBaseObject;
            }
            DeleteRequest.prototype.doRequest = function () {
                var path = this._trimBaseObject.baseObjectType.path + "/" + this._trimBaseObject.Uri + "/Delete";
                return this._trimClient.doPostForDelete(path);
            };
            return DeleteRequest;
        }());
        HPTRIM.DeleteRequest = DeleteRequest;
        var TrimObjectInformationRequest = (function () {
            function TrimObjectInformationRequest(trimClient, uri, bobType, properties) {
                this._data = {};
                this._trimClient = trimClient;
                this._bobType = bobType;
                this._uri = uri;
                if (properties) {
                    this._data.properties = properties;
                }
            }
            TrimObjectInformationRequest.prototype.addProperty = function (property) {
                if (this._data.properties) {
                    this._data.properties = this._data.properties + ',' + property;
                }
                else {
                    this._data.properties = property;
                }
            };
            TrimObjectInformationRequest.prototype.includePropertiesDef = function () {
                this._data.IncludePropertyDefs = true;
            };
            TrimObjectInformationRequest.prototype.setStringDisplayType = function (stringDisplayType) {
                this._data.stringDisplayType = stringDisplayType;
            };
            TrimObjectInformationRequest.prototype.includeBothStringValueAndRawValue = function () {
                this._data.PropertyValue = "Both";
            };
            TrimObjectInformationRequest.prototype.addRequiredCommandIds = function (commandIds) {
                this._data.cid_SelectedIds = commandIds;
            };
            TrimObjectInformationRequest.prototype.addRequiredpropertySets = function (propertySets) {
                this._data.propertySets = propertySets;
            };
            TrimObjectInformationRequest.prototype.doRequest = function () {
                var path = this._bobType.path + "/" + this._uri;
                return this._trimClient.doGet(path, this._data);
            };
            return TrimObjectInformationRequest;
        }());
        HPTRIM.TrimObjectInformationRequest = TrimObjectInformationRequest;
        var TrimRecordInformationRequest = (function (_super) {
            __extends(TrimRecordInformationRequest, _super);
            function TrimRecordInformationRequest(trimClient, uri, properties) {
                _super.call(this, trimClient, uri, HPTRIM.BaseObjectTypes.Record, properties);
            }
            TrimRecordInformationRequest.prototype.doRequest = function () {
                var path = HPTRIM.BaseObjectTypes.Record.path + "/" + this._uri;
                return this._trimClient.doGet(path, this._data);
            };
            return TrimRecordInformationRequest;
        }(TrimObjectInformationRequest));
        HPTRIM.TrimRecordInformationRequest = TrimRecordInformationRequest;
        var TrimRecordInformationFormSearchRequest = (function () {
            function TrimRecordInformationFormSearchRequest(trimClient, bobType, data) {
                this._trimClient = trimClient;
                this._bobType = bobType;
                this._data = data;
                this._path = this._bobType.path;
            }
            TrimRecordInformationFormSearchRequest.prototype.setStringDisplayType = function (stringDisplayType) {
                this._path += "?stringDisplayType=" + stringDisplayType + "&";
            };
            TrimRecordInformationFormSearchRequest.prototype.includeBothStringValueAndRawValue = function () {
                this._path += "PropertyValue=Both&";
            };
            TrimRecordInformationFormSearchRequest.prototype.includePropertyDefs = function () {
                this._path += "IncludePropertyDefs=true";
            };
            TrimRecordInformationFormSearchRequest.prototype.doRequest = function () {
                return this._trimClient.doPostForFormSearch(this._path, this._data);
            };
            return TrimRecordInformationFormSearchRequest;
        }());
        HPTRIM.TrimRecordInformationFormSearchRequest = TrimRecordInformationFormSearchRequest;
        var TrimLocationSearchFormRequest = (function () {
            function TrimLocationSearchFormRequest(trimClient, uri, objectType) {
                this._data = {};
                this._trimClient = trimClient;
                this._uri = uri;
                this._objectType = objectType;
            }
            TrimLocationSearchFormRequest.prototype.doRequest = function () {
                var path = "Database";
                this._data["properties"] = 'DefinitionForm';
                this._data['format'] = 'json';
                this._data['q'] = 'all';
                return this._trimClient.doGet(path, this._data);
            };
            return TrimLocationSearchFormRequest;
        }());
        HPTRIM.TrimLocationSearchFormRequest = TrimLocationSearchFormRequest;
        var TrimRecordDefaultRevisionRequest = (function () {
            function TrimRecordDefaultRevisionRequest(trimClient, uri) {
                this._data = {};
                this._rendtrimClient = trimClient;
                this._uri = uri;
            }
            TrimRecordDefaultRevisionRequest.prototype.doRequest = function (deferred) {
                var basePath = HPTRIM.BaseObjectTypes.Record.path + "/" + this._uri + "/File/";
                var path = HPTRIM.BaseObjectTypes.Record.path + "/" + this._uri + "/File/HTML";
                this._data['format'] = 'json';
                return this._rendtrimClient.doGetForExternalResource(path, this._data, basePath, deferred);
            };
            return TrimRecordDefaultRevisionRequest;
        }());
        HPTRIM.TrimRecordDefaultRevisionRequest = TrimRecordDefaultRevisionRequest;
        var TrimRecordRenditionRequest = (function () {
            function TrimRecordRenditionRequest(trimClient, uri) {
                this._data = {};
                this._rendtrimClient = trimClient;
                this._uri = uri;
            }
            TrimRecordRenditionRequest.prototype.doRequest = function (deferred) {
                var basePath = HPTRIM.BaseObjectTypes.Record.path + "/" + this._uri + "/File/";
                var path = HPTRIM.BaseObjectTypes.Record.path + "/" + this._uri + "/File/HTML";
                this._data['format'] = 'json';
                return this._rendtrimClient.doGetForExternalResource(path, this._data, basePath, deferred);
            };
            return TrimRecordRenditionRequest;
        }());
        HPTRIM.TrimRecordRenditionRequest = TrimRecordRenditionRequest;
        var TrimRecordChildRenditionRequest = (function () {
            function TrimRecordChildRenditionRequest(trimClient, uri, childUri) {
                this._data = {};
                this._rendtrimClient = trimClient;
                this._uri = uri;
                this._childUri = childUri;
            }
            TrimRecordChildRenditionRequest.prototype.doRequest = function (deferred) {
                var basePath = HPTRIM.BaseObjectTypes.Record.path + "/" + this._uri + "/ChildHtml/RecordRendition/" + this._childUri + "/";
                var path = HPTRIM.BaseObjectTypes.Record.path + "/" + this._uri + "/ChildHtml/RecordRendition/" + this._childUri;
                this._data['format'] = 'json';
                return this._rendtrimClient.doGetForExternalResource(path, this._data, basePath, deferred);
            };
            return TrimRecordChildRenditionRequest;
        }());
        HPTRIM.TrimRecordChildRenditionRequest = TrimRecordChildRenditionRequest;
        var TrimRecordRevisionRequest = (function () {
            function TrimRecordRevisionRequest(trimClient, uri, revUri) {
                this._data = {};
                this._trimClient = trimClient;
                this._recUri = uri;
                this._revisionUri = revUri;
            }
            TrimRecordRevisionRequest.prototype.doRequest = function (deferred) {
                var basePath = HPTRIM.BaseObjectTypes.Record.path + "/" + this._recUri + "/ChildHtml/";
                var path = HPTRIM.BaseObjectTypes.Record.path + "/" + this._recUri + "/ChildHtml/RecordRevision/" + this._revisionUri;
                this._data['format'] = 'json';
                return this._trimClient.doGetForExternalResource(path, this._data, basePath, deferred);
            };
            return TrimRecordRevisionRequest;
        }());
        HPTRIM.TrimRecordRevisionRequest = TrimRecordRevisionRequest;
        var TrimRecordRevisionPromoteRequest = (function () {
            function TrimRecordRevisionPromoteRequest(trimClient, uri, revisionUri) {
                this._data = {};
                this._trimClient = trimClient;
                this._data['format'] = 'json';
                this._data['properties'] = 'ChildRevisions';
                this._data["Uri"] = uri;
                this._data["PromoteRevision"] = {
                    PromoteRevisionRevisionUri: revisionUri,
                };
            }
            TrimRecordRevisionPromoteRequest.prototype.doRequest = function () {
                var path = HPTRIM.BaseObjectTypes.Record.path;
                return this._trimClient.doPost(path, this._data);
            };
            return TrimRecordRevisionPromoteRequest;
        }());
        HPTRIM.TrimRecordRevisionPromoteRequest = TrimRecordRevisionPromoteRequest;
        var TrimRecordRevisionPreserveRequest = (function () {
            function TrimRecordRevisionPreserveRequest(trimClient, uri, revisionUri, preserve) {
                this._data = {};
                this._trimClient = trimClient;
                this._data['format'] = 'json';
                this._data['properties'] = 'ChildRevisions';
                this._data["Uri"] = uri;
                this._data["PropertyValue"] = 'Both';
                this._data["stringDisplayType"] = 'TreeColumn';
                this._data["ChildRevisions"] = {
                    Uri: revisionUri,
                    RecordRevisionPreserve: preserve
                };
            }
            TrimRecordRevisionPreserveRequest.prototype.doRequest = function () {
                var path = HPTRIM.BaseObjectTypes.Record.path;
                return this._trimClient.doPost(path, this._data);
            };
            return TrimRecordRevisionPreserveRequest;
        }());
        HPTRIM.TrimRecordRevisionPreserveRequest = TrimRecordRevisionPreserveRequest;
        var TrimRecordRevisionDeleteRequest = (function () {
            function TrimRecordRevisionDeleteRequest(trimClient, uri, revisionUri) {
                this._data = {};
                this._trimClient = trimClient;
                this._data['format'] = 'json';
                this._data['properties'] = 'ChildRevisions';
                this._data["Uri"] = uri;
                this._data["ChildRevisions"] = [
                    {
                        Uri: revisionUri,
                        Delete: true
                    }
                ];
            }
            TrimRecordRevisionDeleteRequest.prototype.doRequest = function () {
                var path = HPTRIM.BaseObjectTypes.Record.path;
                return this._trimClient.doPost(path, this._data);
            };
            return TrimRecordRevisionDeleteRequest;
        }());
        HPTRIM.TrimRecordRevisionDeleteRequest = TrimRecordRevisionDeleteRequest;
        var AddToFavoritesRequest = (function () {
            function AddToFavoritesRequest(trimClient, uri, type) {
                this._data = {};
                this._trimClient = trimClient;
                this._type = type;
                this._data["ServiceActions"] = ["SetUserLabel"];
                this._data["Uri"] = uri;
            }
            AddToFavoritesRequest.prototype.doRequest = function () {
                var path = this._type.path;
                return this._trimClient.doPost(path, this._data);
            };
            return AddToFavoritesRequest;
        }());
        HPTRIM.AddToFavoritesRequest = AddToFavoritesRequest;
        var ActivtiyUncompleteRequest = (function () {
            function ActivtiyUncompleteRequest(trimClient, uri, reason, properties, data) {
                this._data = {};
                this._trimClient = trimClient;
                if (data) {
                    this._data = data;
                }
                if (properties) {
                    this._data["properties"] = properties;
                }
                else {
                    this._data["properties"] = 'ActivityState, ActivityIsComplete, ActivityIsReadyToStart, ActivityReadyForCompletion, ActivityAssignedTo';
                }
                this._data["ServiceActions"] = ["UncompleteActivity"];
                this._data["UncompleteActivityReason"] = reason;
                this._data["Uri"] = uri;
            }
            ActivtiyUncompleteRequest.prototype.doRequest = function () {
                var path = HPTRIM.BaseObjectTypes.Activity.path;
                return this._trimClient.doPost(path, this._data);
            };
            return ActivtiyUncompleteRequest;
        }());
        HPTRIM.ActivtiyUncompleteRequest = ActivtiyUncompleteRequest;
        var ActivtiyRollbackRequest = (function () {
            function ActivtiyRollbackRequest(trimClient, uri, activityIdToRollbackTo, reason, properties, data) {
                this._data = {};
                this._trimClient = trimClient;
                if (data) {
                    this._data = data;
                }
                if (properties) {
                    this._data["properties"] = properties;
                }
                else {
                    this._data["properties"] = 'ActivityState, ActivityIsComplete, ActivityIsReadyToStart, ActivityReadyForCompletion, ActivityAssignedTo';
                }
                this._data["ServiceActions"] = ["RollbackActivity"];
                this._data["RollbackActivityactivityIdToRollbackTo"] = activityIdToRollbackTo;
                this._data["RollbackActivityreasonForRollback"] = reason;
                this._data["Uri"] = uri;
            }
            ActivtiyRollbackRequest.prototype.doRequest = function () {
                var path = HPTRIM.BaseObjectTypes.Activity.path;
                return this._trimClient.doPost(path, this._data);
            };
            return ActivtiyRollbackRequest;
        }());
        HPTRIM.ActivtiyRollbackRequest = ActivtiyRollbackRequest;
        var MainObjectUpdateTaskRequest = (function () {
            function MainObjectUpdateTaskRequest(trimClient, baseObjectType, task, uri, requiredCommandIds, failOnWarnings, parameterList, infoObject) {
                var _this = this;
                this._data = {};
                this._trimClient = trimClient;
                this._task = task;
                this._type = baseObjectType;
                if (task.nameProperty) {
                    this._task.updatedProperties.push(task.nameProperty.property);
                    this._task.updatedProperties = _.uniq(this._task.updatedProperties);
                }
                this._data['FailOnWarnings'] = failOnWarnings;
                this._data['properties'] = this._task.updatedProperties.join(',');
                if (this._task.messageProperty) {
                    if (this._data['properties'] && this._data['properties'].length > 0) {
                        this._data['properties'] = this._data['properties'] + ',';
                    }
                    this._data['properties'] = this._data['properties'] + this._task.messageProperty;
                }
                if (requiredCommandIds) {
                    var enabledCommandIdsProperty = 'EnabledCommandIds';
                    if (this._data['properties'].length > 0) {
                        this._data['properties'] = this._data['properties'] + ',';
                    }
                    this._data['properties'] = this._data['properties'] + 'EnabledCommandIds';
                    this._data['cid_SelectedIds'] = requiredCommandIds;
                }
                if (this._task.serviceAction) {
                    if (this._task.id == "RemoveFromUserLabels") {
                        var methodsToCall = [];
                        _.each(parameterList, function (parameter) {
                            var methodToCall = {};
                            methodToCall.__type = _this._task.serviceActionFullType;
                            if (parameter.value && parameter.value.Uri != undefined) {
                                methodToCall[parameter.name] = parameter.value.Uri;
                            }
                            else {
                                methodToCall[parameter.name] = parameter.value;
                            }
                            methodsToCall.push(methodToCall);
                        });
                        this._data["ActionsToCall"] = methodsToCall;
                    }
                    else {
                        var methodToCall = {};
                        methodToCall.__type = this._task.serviceActionFullType;
                        _.each(parameterList, function (parameter) {
                            if (parameter.value && parameter.value.Uri != undefined) {
                                methodToCall[parameter.name] = parameter.value.Uri;
                            }
                            else {
                                methodToCall[parameter.name] = parameter.value;
                            }
                        });
                        _.each(this._task.serviceActionValueParameters, function (valueParameter) {
                            if (valueParameter.value) {
                                methodToCall[valueParameter.parameterName] = valueParameter.value;
                            }
                            else if (valueParameter.objectPropertyName && infoObject) {
                                var newValue = "";
                                var rawValue = infoObject[valueParameter.objectPropertyName];
                                if (valueParameter.type == "object") {
                                    if (rawValue && rawValue.Uri) {
                                        newValue = rawValue.Uri;
                                    }
                                }
                                else if (rawValue.Value) {
                                    newValue = rawValue.Value;
                                }
                                else {
                                    newValue = rawValue;
                                }
                                methodToCall[valueParameter.parameterName] = newValue;
                            }
                        });
                        this._data["ActionsToCall"] = [methodToCall];
                    }
                }
                else {
                    _.each(parameterList, function (parameter) {
                        if (parameter.value && parameter.value.Uri != undefined) {
                            _this._data[parameter.name] = parameter.value.Uri;
                        }
                        else {
                            _this._data[parameter.name] = parameter.value;
                        }
                    });
                    if (this._task.serviceActionValueParameters) {
                        _.each(this._task.serviceActionValueParameters, function (valueParameter) {
                            if (valueParameter.value) {
                                _this._data[valueParameter.parameterName] = valueParameter.value;
                            }
                        });
                    }
                }
                if (this._task.requireCustomForm) {
                    if (this._task.childCollectionToUpdate && this._task.childCollectionToUpdate.length > 0) {
                        var methodToCall = {};
                        _.each(parameterList, function (parameter) {
                            if (parameter.value && parameter.value.Uri != undefined) {
                                methodToCall[parameter.name] = parameter.value.Uri;
                            }
                            else {
                                methodToCall[parameter.name] = parameter.value;
                            }
                        });
                        this._data[this._task.childCollectionToUpdate] = [methodToCall];
                    }
                }
                if (uri) {
                    this._data["Uri"] = uri;
                }
                this._data["PropertyValue"] = "Both";
            }
            MainObjectUpdateTaskRequest.prototype.setQuery = function (query, filter) {
                this._data['q'] = query;
                this._data['filter'] = filter;
            };
            MainObjectUpdateTaskRequest.prototype.addData = function (data) {
                $.extend(this._data, data);
            };
            MainObjectUpdateTaskRequest.prototype.doRequest = function () {
                var path = this._type.path;
                return this._trimClient.doPost(path, this._data);
            };
            return MainObjectUpdateTaskRequest;
        }());
        HPTRIM.MainObjectUpdateTaskRequest = MainObjectUpdateTaskRequest;
        var RecordNewRequest = (function () {
            function RecordNewRequest(trimClient, uri, recordNewType, properties, data) {
                this._data = {};
                this._trimClient = trimClient;
                if (data) {
                    this._data = data;
                }
                this._data["RecordNewType"] = recordNewType;
                if (properties) {
                    this._data["properties"] = properties;
                }
                this._data["Uri"] = uri;
            }
            RecordNewRequest.prototype.doRequest = function () {
                var path = HPTRIM.BaseObjectTypes.Record.path;
                return this._trimClient.doPost(path, this._data);
            };
            return RecordNewRequest;
        }());
        HPTRIM.RecordNewRequest = RecordNewRequest;
        var CheckOutRequest = (function () {
            function CheckOutRequest(trimClient, uri, data) {
                this._data = {};
                this._trimClient = trimClient;
                this._data = data;
                this._data["ServiceActions"] = ["Checkout"];
                this._data["PropertyValue"] = "Both";
                this._data["Properties"] = "isCheckedOut,RecordCheckedOutTo,EnabledCommandIds";
                this._data["Uri"] = uri;
            }
            CheckOutRequest.prototype.doRequest = function () {
                var path = HPTRIM.BaseObjectTypes.Record.path;
                var downloadLink = HPTRIM.BaseObjectTypes.Record.path + "/" + this._data["Uri"] + "/File/Document";
                return this._trimClient.doPostWithDownloadLink(path, this._data, downloadLink);
            };
            return CheckOutRequest;
        }());
        HPTRIM.CheckOutRequest = CheckOutRequest;
        var CheckInRequest = (function () {
            function CheckInRequest(trimClient, uri, data, discardChanges, comments) {
                this._data = {};
                this._trimClient = trimClient;
                this._data = data;
                this._data["Uri"] = uri;
                this._data["PropertyValue"] = "Both";
                this._data["Properties"] = "isCheckedOut,RecordCheckedOutTo,RecordExtension,RecordRevisionCount,EnabledCommandIds";
                if (discardChanges) {
                    this._data["UndoCheckout"] = { UndoCheckoutComments: comments };
                }
                else {
                    this._data.comments = comments;
                }
            }
            CheckInRequest.prototype.doRequest = function () {
                var path = HPTRIM.BaseObjectTypes.Record.path;
                return this._trimClient.doPost(path, this._data);
            };
            return CheckInRequest;
        }());
        HPTRIM.CheckInRequest = CheckInRequest;
        var WebdavEditRequest = (function () {
            function WebdavEditRequest(trimClient, uri) {
                this._data = {};
                this._trimClient = trimClient;
                this._data["Uri"] = uri;
            }
            WebdavEditRequest.prototype.doRequest = function () {
                return this._trimClient.doGet(WebdavEditRequest.webdavEditPath, this._data);
            };
            WebdavEditRequest.webdavEditPath = "webdav/edit";
            return WebdavEditRequest;
        }());
        HPTRIM.WebdavEditRequest = WebdavEditRequest;
        var WebdavPreviewRequest = (function () {
            function WebdavPreviewRequest(trimClient, uri) {
                this._data = {};
                this._trimClient = trimClient;
                this._data["Uri"] = uri;
            }
            WebdavPreviewRequest.prototype.doRequest = function () {
                return this._trimClient.doGet(WebdavPreviewRequest.webdavPreviewPath, this._data);
            };
            WebdavPreviewRequest.webdavPreviewPath = "webdav/preview";
            return WebdavPreviewRequest;
        }());
        HPTRIM.WebdavPreviewRequest = WebdavPreviewRequest;
        var WebdavCommitRequest = (function () {
            function WebdavCommitRequest(trimClient, uri, keepCheckedOut, newRevision, comments) {
                this._data = {};
                this._trimClient = trimClient;
                this._data["Uri"] = uri;
                this._data["keepCheckedOut"] = keepCheckedOut;
                this._data["newRevision"] = newRevision;
                this._data["comments"] = comments;
            }
            WebdavCommitRequest.prototype.doRequest = function () {
                return this._trimClient.doGet(WebdavCommitRequest.webdavCommitPath, this._data);
            };
            WebdavCommitRequest.webdavCommitPath = "webdav/commit";
            return WebdavCommitRequest;
        }());
        HPTRIM.WebdavCommitRequest = WebdavCommitRequest;
        var WebdavDiscardRequest = (function () {
            function WebdavDiscardRequest(trimClient, uri, keepCheckedOut, comments) {
                this._data = {};
                this._trimClient = trimClient;
                this._data["Uri"] = uri;
                this._data["keepCheckedOut"] = false;
                this._data["comments"] = comments;
            }
            WebdavDiscardRequest.prototype.doRequest = function () {
                return this._trimClient.doGet(WebdavDiscardRequest.webdavDiscardPath, this._data);
            };
            WebdavDiscardRequest.webdavDiscardPath = "webdav/discard";
            return WebdavDiscardRequest;
        }());
        HPTRIM.WebdavDiscardRequest = WebdavDiscardRequest;
        (function (WOPIAction) {
            WOPIAction[WOPIAction["edit"] = 0] = "edit";
            WOPIAction[WOPIAction["view"] = 1] = "view";
            WOPIAction[WOPIAction["convert"] = 2] = "convert";
        })(HPTRIM.WOPIAction || (HPTRIM.WOPIAction = {}));
        var WOPIAction = HPTRIM.WOPIAction;
        var WOPILinkRequest = (function () {
            function WOPILinkRequest(trimClient, uri, action) {
                this._data = {};
                this._trimClient = trimClient;
                this._data["uri"] = uri;
                this._data["action"] = WOPIAction[action];
                this._data["checkOut"] = (action == WOPIAction.edit || action == WOPIAction.convert);
            }
            WOPILinkRequest.prototype.doRequest = function () {
                return this._trimClient.doGet(WOPILinkRequest.requestPath, this._data);
            };
            WOPILinkRequest.requestPath = function () {
                var path = "";
                if (window['WOPIConfig']) {
                    path = WOPIConfig.servicePrefix + "/getLink";
                }
                return path;
            }();
            return WOPILinkRequest;
        }());
        HPTRIM.WOPILinkRequest = WOPILinkRequest;
        var WOPICommitRequest = (function () {
            function WOPICommitRequest(trimClient, uri, keepCheckedOut, newRevision, comments) {
                this._data = {};
                this._trimClient = trimClient;
                this._data["Uri"] = uri;
                this._data["keepCheckedOut"] = keepCheckedOut;
                this._data["newRevision"] = newRevision;
                this._data["comments"] = comments;
            }
            WOPICommitRequest.prototype.doRequest = function () {
                return this._trimClient.doGet(WOPICommitRequest.requestPath, this._data);
            };
            WOPICommitRequest.requestPath = function () {
                var path = "";
                if (window['WOPIConfig']) {
                    path = WOPIConfig.servicePrefix + "/commit";
                }
                return path;
            }();
            return WOPICommitRequest;
        }());
        HPTRIM.WOPICommitRequest = WOPICommitRequest;
        var WOPIDiscardRequest = (function () {
            function WOPIDiscardRequest(trimClient, uri, keepCheckedOut, comments) {
                this._data = {};
                this._trimClient = trimClient;
                this._data["Uri"] = uri;
                this._data["keepCheckedOut"] = false;
                this._data["comments"] = comments;
            }
            WOPIDiscardRequest.prototype.doRequest = function () {
                return this._trimClient.doGet(WOPIDiscardRequest.discardPath, this._data);
            };
            WOPIDiscardRequest.discardPath = function () {
                var path = "";
                if (window['WOPIConfig']) {
                    path = WOPIConfig.servicePrefix + "/discard";
                }
                return path;
            }();
            return WOPIDiscardRequest;
        }());
        HPTRIM.WOPIDiscardRequest = WOPIDiscardRequest;
        var RemoveFromFavoritesRequest = (function () {
            function RemoveFromFavoritesRequest(trimClient, uri, type) {
                this._data = {};
                this._trimClient = trimClient;
                this._uri = uri;
                this._type = type;
                this._data["ServiceActions"] = ["RemoveUserLabel"];
                this._data["Uri"] = this._uri;
            }
            RemoveFromFavoritesRequest.prototype.doRequest = function () {
                var path = this._type.path;
                return this._trimClient.doPost(path, this._data);
            };
            return RemoveFromFavoritesRequest;
        }());
        HPTRIM.RemoveFromFavoritesRequest = RemoveFromFavoritesRequest;
        var ReturnRequest = (function () {
            function ReturnRequest(trimClient, uri, data) {
                this._data = { "service-action": "SetAssignee" };
                this._trimClient = trimClient;
                this._uri = uri;
                this._data = data;
                this._data["ServiceActions"] = "SetAssignee";
                this._data['SetAssigneeAssigneeType'] = 'AtHome';
                this._data["Uri"] = this._uri;
            }
            ReturnRequest.prototype.doRequest = function () {
                var path = HPTRIM.BaseObjectTypes.Record.path;
                return this._trimClient.doPost(path, this._data);
            };
            return ReturnRequest;
        }());
        HPTRIM.ReturnRequest = ReturnRequest;
        var RecRequestRequest = (function () {
            function RecRequestRequest(trimClient, data) {
                this._data = {};
                this._trimClient = trimClient;
                this._data = data;
            }
            RecRequestRequest.prototype.doRequest = function () {
                var path = HPTRIM.BaseObjectTypes.Request.path + "/";
                return this._trimClient.doPost(path, this._data);
            };
            return RecRequestRequest;
        }());
        HPTRIM.RecRequestRequest = RecRequestRequest;
        var SaveSearchRequest = (function () {
            function SaveSearchRequest(trimClient, data) {
                this._data = {};
                this._trimClient = trimClient;
                this._data = data;
            }
            SaveSearchRequest.prototype.doRequest = function () {
                var path = HPTRIM.BaseObjectTypes.SavedSearch.path + "/";
                return this._trimClient.doPost(path, this._data);
            };
            return SaveSearchRequest;
        }());
        HPTRIM.SaveSearchRequest = SaveSearchRequest;
        var TrimMainObjectTreeNodesRequest = (function () {
            function TrimMainObjectTreeNodesRequest(trimClient, bobType) {
                this.isLoadingDone = false;
                this.bobType = bobType;
                this.trimClient = trimClient;
                this.sortBy = '';
                this.filter = '';
                this.hasSelectedItems = false;
                this.recordUri = "";
            }
            TrimMainObjectTreeNodesRequest.prototype.getRootNodesSearch = function () {
                return "";
            };
            TrimMainObjectTreeNodesRequest.prototype.getRootNodesSearchforRecord = function () {
                return "";
            };
            TrimMainObjectTreeNodesRequest.prototype.getChildrenSearch = function (uri) {
                return "";
            };
            TrimMainObjectTreeNodesRequest.prototype.filteringItems = function (newResults) {
                return newResults;
            };
            ;
            TrimMainObjectTreeNodesRequest.prototype.getNameValue = function (trimObject) {
                return "";
            };
            TrimMainObjectTreeNodesRequest.prototype.getNumberValue = function (trimObject) {
                return "";
            };
            TrimMainObjectTreeNodesRequest.prototype.getPropertyList = function () {
                return "";
            };
            TrimMainObjectTreeNodesRequest.prototype.getIsLoadingDone = function () {
                return this.isLoadingDone;
            };
            TrimMainObjectTreeNodesRequest.prototype.getNodes = function (uri, gtreeTable) {
                var _this = this;
                var parentNode = null;
                if (gtreeTable) {
                    parentNode = gtreeTable.getNodeById(uri);
                }
                var level = 0;
                if (uri && ((uri.toString()).indexOf('$') != -1)) {
                    var parts = uri.split('$');
                    uri = parts[0];
                    level = parseInt(parts[1]);
                }
                var bobTypeName = this.bobType.name;
                var noBobFound = HP.HPTRIM.Messages.bob_noObjectsFound;
                var pageSize = 10000;
                var iUri = parseInt(uri);
                var searchFor = iUri > 0 ? this.getChildrenSearch(uri) : this.getRootNodesSearch();
                var stuckOn = this.getRootNodesSearchforRecord() ? this.getRootNodesSearchforRecord() : "";
                var propertyList = this.getPropertyList();
                var path = '';
                if (this.sortBy.length > 0) {
                    path = bobTypeName + "?q=" + stuckOn + searchFor + "&pageSize=" + pageSize + "&ApplyDefaults=false&properties=" + propertyList + "&sortBy=" + this.sortBy;
                }
                else {
                    path = bobTypeName + "?q=" + stuckOn + searchFor + "&pageSize=" + pageSize + "&ApplyDefaults=false&properties=" + propertyList;
                }
                if (this.filter.length > 0 && !this.hasSelectedItems) {
                    path = path + ",node&filter=" + this.filter + "*&format=json";
                }
                else {
                    path = path + ",uri&format=json";
                }
                var remoteSourceUrl = this.trimClient.getUrl(path);
                var noObjectFound = HPTRIM.Utils.String.format(noBobFound, [bobTypeName]);
                var convertToTreeInterface = function (results, level) {
                    if (results.length == 0) {
                        var newObject = {
                            id: "-1",
                            level: level,
                            name: noObjectFound,
                            uri: "-1"
                        };
                        return [newObject];
                    }
                    var newResults = [];
                    _.each(results, function (result) {
                        var newObject = {
                            id: result.Uri + "$" + level,
                            level: level,
                            name: _this.getNameValue(result),
                            Idnumber: _this.getNumberValue(result),
                            uri: result.Uri,
                            type: result.Icon.Id.toLowerCase(),
                            parent: parentNode,
                            sourceObject: result
                        };
                        newResults.push(newObject);
                    });
                    newResults = _this.filteringItems(newResults);
                    return newResults;
                };
                var customConverter = function (response) {
                    level = iUri == 0 ? 0 : level + 1;
                    var obj = JSON.parse(response);
                    obj.Results = convertToTreeInterface(obj.Results, level);
                    return obj;
                };
                this.isLoadingDone = false;
                var me = this;
                return {
                    type: 'GET',
                    url: remoteSourceUrl,
                    dataType: 'json',
                    error: function (XMLHttpRequest) {
                        var errorMsg = HP.HPTRIM.Messages.web_unableToConnectToWebServices;
                        if (XMLHttpRequest.ResponseStatus && XMLHttpRequest.ResponseStatus.Message) {
                            errorMsg = XMLHttpRequest.ResponseStatus.Message;
                        }
                        if (XMLHttpRequest.responseJSON && XMLHttpRequest.responseJSON.ResponseStatus && XMLHttpRequest.responseJSON.ResponseStatus.Message) {
                            errorMsg = XMLHttpRequest.responseJSON.ResponseStatus.Message;
                        }
                        ko.postbox.publish(HPTRIM.App.TRIMApp.NOTIFICATION_ERROR_TOPIC, errorMsg);
                    },
                    success: function (data) {
                        me.isLoadingDone = true;
                    },
                    converters: {
                        "text json": customConverter
                    }
                };
            };
            return TrimMainObjectTreeNodesRequest;
        }());
        HPTRIM.TrimMainObjectTreeNodesRequest = TrimMainObjectTreeNodesRequest;
        var ClassificationTreeNodesRequest = (function (_super) {
            __extends(ClassificationTreeNodesRequest, _super);
            function ClassificationTreeNodesRequest(trimClient) {
                _super.call(this, trimClient, HPTRIM.BaseObjectTypes.Classification);
                this.rootSearchString = "top";
            }
            ClassificationTreeNodesRequest.prototype.setRootSearchString = function (rootSearchValue) {
                this.rootSearchString = rootSearchValue;
            };
            ClassificationTreeNodesRequest.prototype.getRootNodesSearch = function () {
                return this.rootSearchString;
            };
            ClassificationTreeNodesRequest.prototype.getChildrenSearch = function (uri) {
                return "parent:" + uri;
            };
            ClassificationTreeNodesRequest.prototype.getNameValue = function (trimObject) {
                return trimObject['ClassificationName'].Value;
            };
            ClassificationTreeNodesRequest.prototype.getNumberValue = function (trimObject) {
                return trimObject['ClassificationIdNumber'].Value;
            };
            ClassificationTreeNodesRequest.prototype.getPropertyList = function () {
                return ["ClassificationIdNumber", "recordpattern", "icon", "name", "title", 'IsInFavorites', 'retentionSchedule', 'homeLocation', 'ownerLocation'].join(",");
            };
            return ClassificationTreeNodesRequest;
        }(TrimMainObjectTreeNodesRequest));
        HPTRIM.ClassificationTreeNodesRequest = ClassificationTreeNodesRequest;
        var UserLabelTreeNodesRequest = (function (_super) {
            __extends(UserLabelTreeNodesRequest, _super);
            function UserLabelTreeNodesRequest(trimClient) {
                _super.call(this, trimClient, HPTRIM.BaseObjectTypes.UserLabel);
            }
            UserLabelTreeNodesRequest.prototype.getRootNodesSearch = function () {
                return "top";
            };
            UserLabelTreeNodesRequest.prototype.getRootNodesSearchforRecord = function () {
                if ((this.recordUri).toString().length > 0)
                    return "not stuckOn:record:" + this.recordUri + " and ";
                else
                    "";
            };
            UserLabelTreeNodesRequest.prototype.getChildrenSearch = function (uri) {
                return "parent:" + uri;
            };
            UserLabelTreeNodesRequest.prototype.getNameValue = function (trimObject) {
                return trimObject['UserLabelName'].Value;
            };
            UserLabelTreeNodesRequest.prototype.getPropertyList = function () {
                return ["icon", "name"].join(",");
            };
            return UserLabelTreeNodesRequest;
        }(TrimMainObjectTreeNodesRequest));
        HPTRIM.UserLabelTreeNodesRequest = UserLabelTreeNodesRequest;
        var KeywordTreeNodesRequest = (function (_super) {
            __extends(KeywordTreeNodesRequest, _super);
            function KeywordTreeNodesRequest(trimClient) {
                _super.call(this, trimClient, HPTRIM.BaseObjectTypes.Keyword);
            }
            KeywordTreeNodesRequest.prototype.getRootNodesSearch = function () {
                return "primary&purpose=2";
            };
            KeywordTreeNodesRequest.prototype.getChildrenSearch = function (uri) {
                return "narrower:" + uri;
            };
            KeywordTreeNodesRequest.prototype.getNameValue = function (trimObject) {
                return trimObject['KeywordName'].Value;
            };
            KeywordTreeNodesRequest.prototype.getPropertyList = function () {
                return ["icon", "name", "KeywordIsPrompt", "KeywordIsAPrimaryTerm", "KeywordNotes"].join(",");
            };
            return KeywordTreeNodesRequest;
        }(TrimMainObjectTreeNodesRequest));
        HPTRIM.KeywordTreeNodesRequest = KeywordTreeNodesRequest;
        var JurisdictionTreeNodesRequest = (function (_super) {
            __extends(JurisdictionTreeNodesRequest, _super);
            function JurisdictionTreeNodesRequest(trimClient) {
                _super.call(this, trimClient, HPTRIM.BaseObjectTypes.Jurisdiction);
            }
            JurisdictionTreeNodesRequest.prototype.getRootNodesSearch = function () {
                return "all " + HPTRIM.Messages.core_and + " active";
            };
            JurisdictionTreeNodesRequest.prototype.getChildrenSearch = function (uri) {
                return "members:" + uri + " " + HPTRIM.Messages.core_and + " active";
            };
            JurisdictionTreeNodesRequest.prototype.getNameValue = function (trimObject) {
                return trimObject['JurisdictionName'].Value;
            };
            JurisdictionTreeNodesRequest.prototype.getPropertyList = function () {
                return ["icon", "name", "JurisdictionDescription", "JurisdictionJurisdictionType", "JurisdictionMembers"].join(",");
            };
            return JurisdictionTreeNodesRequest;
        }(TrimMainObjectTreeNodesRequest));
        HPTRIM.JurisdictionTreeNodesRequest = JurisdictionTreeNodesRequest;
        var LookupSetTreeNodesRequest = (function (_super) {
            __extends(LookupSetTreeNodesRequest, _super);
            function LookupSetTreeNodesRequest(trimClient) {
                _super.call(this, trimClient, HPTRIM.BaseObjectTypes.LookupSet);
            }
            LookupSetTreeNodesRequest.prototype.getRootNodesSearch = function () {
                return "all";
            };
            LookupSetTreeNodesRequest.prototype.getChildrenSearch = function (uri) {
                return "set:" + uri;
            };
            LookupSetTreeNodesRequest.prototype.getNameValue = function (trimObject) {
                return trimObject['LookupSetName'].Value;
            };
            LookupSetTreeNodesRequest.prototype.getPropertyList = function () {
                return ["icon", "name", "LookupSetNotes", "LookupSetItemsHaveHierarchy", "LookupSetOnlySelectLowestLevel"].join(",");
            };
            return LookupSetTreeNodesRequest;
        }(TrimMainObjectTreeNodesRequest));
        HPTRIM.LookupSetTreeNodesRequest = LookupSetTreeNodesRequest;
        var LookupItemTreeNodesRequest = (function (_super) {
            __extends(LookupItemTreeNodesRequest, _super);
            function LookupItemTreeNodesRequest(trimClient, parentSetUri, hasShortValue, hasLongValue, displayStyle) {
                _super.call(this, trimClient, HPTRIM.BaseObjectTypes.LookupItem);
                this.rootSearchString = "set:";
                this.hasShortValue = false;
                this.hasLongValue = true;
                this.lookupSetDisplayStyle = HPTRIM.LookupItemFieldStyle.ShortThenLongValue;
                this.hideTheseItems = [];
                this.uriFilterStr = '';
                this.filterStr = '';
                this.rootSearchString = this.rootSearchString + parentSetUri;
                this.lookupSetUri = parentSetUri;
                if (hasShortValue != undefined) {
                    this.hasShortValue = hasShortValue;
                }
                if (hasLongValue != undefined) {
                    this.hasLongValue = hasLongValue;
                }
                if (displayStyle != undefined) {
                    this.lookupSetDisplayStyle = displayStyle;
                }
            }
            LookupItemTreeNodesRequest.prototype.getIsLoadingDone = function () {
                return _super.prototype.getIsLoadingDone.call(this);
            };
            LookupItemTreeNodesRequest.prototype.setHiddenItems = function (hiddenItems) {
                this.hideTheseItems = hiddenItems;
            };
            LookupItemTreeNodesRequest.prototype.setFilterString = function (filterStr) {
                this.uriFilterStr = filterStr;
            };
            LookupItemTreeNodesRequest.prototype.setRootSearchString = function (rootSearchValue) {
                this.rootSearchString = rootSearchValue;
            };
            LookupItemTreeNodesRequest.prototype.getRootSearchString = function () {
                return this.rootSearchString;
            };
            LookupItemTreeNodesRequest.prototype.getRootNodesSearch = function () {
                var retStr = "set:" + this.lookupSetUri + " " + HPTRIM.Messages.core_and + " usable";
                if (this.uriFilterStr.length > 0) {
                    retStr = retStr + " and uri:" + this.uriFilterStr;
                }
                this.setSortBy(this.lookupSetDisplayStyle);
                this.filter = this.getRootSearchString();
                return retStr;
            };
            LookupItemTreeNodesRequest.prototype.getChildrenSearch = function (uri) {
                var retStr = "parent:" + uri;
                if (this.uriFilterStr.length > 0) {
                    retStr = retStr + " and uri:" + this.uriFilterStr;
                }
                this.setSortBy(this.lookupSetDisplayStyle);
                return retStr;
            };
            LookupItemTreeNodesRequest.prototype.setSortBy = function (displayStyle) {
                this.sortBy = "";
                if (displayStyle.toString() == HPTRIM.LookupItemFieldStyle[HPTRIM.LookupItemFieldStyle.ShortThenLongValue] || displayStyle == HPTRIM.LookupItemFieldStyle.ShortThenLongValue) {
                    this.sortBy = "abbreviation, name";
                }
                else {
                    if (displayStyle.toString() == HPTRIM.LookupItemFieldStyle[HPTRIM.LookupItemFieldStyle.ShortValueOnly] || displayStyle == HPTRIM.LookupItemFieldStyle.ShortValueOnly) {
                        this.sortBy = "abbreviation";
                    }
                    else {
                        this.sortBy = "name";
                    }
                }
            };
            LookupItemTreeNodesRequest.prototype.getNameValue = function (trimObject) {
                if (this.hasShortValue && this.hasLongValue) {
                    if (this.lookupSetDisplayStyle.toString() == HPTRIM.LookupItemFieldStyle[HPTRIM.LookupItemFieldStyle.ShortThenLongValue] || this.lookupSetDisplayStyle == HPTRIM.LookupItemFieldStyle.ShortThenLongValue) {
                        if (trimObject['LookupItemAbbreviation'].Value.length > 0) {
                            return trimObject['LookupItemAbbreviation'].Value + ': ' + trimObject['LookupItemName'].Value;
                        }
                        else {
                            return trimObject['LookupItemName'].Value;
                        }
                    }
                    else {
                        if (this.lookupSetDisplayStyle.toString() == HPTRIM.LookupItemFieldStyle[HPTRIM.LookupItemFieldStyle.ShortValueOnly] || this.lookupSetDisplayStyle == HPTRIM.LookupItemFieldStyle.ShortValueOnly) {
                            return trimObject['LookupItemAbbreviation'].Value;
                        }
                        else {
                            return trimObject['LookupItemName'].Value;
                        }
                    }
                }
                else {
                    if (this.hasLongValue && !this.hasShortValue) {
                        return trimObject['LookupItemName'].Value;
                    }
                }
                return trimObject['LookupItemAbbreviation'].Value;
            };
            LookupItemTreeNodesRequest.prototype.getPropertyList = function () {
                return ["icon", "name", "LookupItemParentSet", "LookupItemParentItem", "LookupItemHasChildItems", "LookupItemFullDescription", "LookupItemAbbreviation", "LookupItemName"].join(",");
            };
            LookupItemTreeNodesRequest.prototype.filteringItems = function (newResults) {
                var retResults = newResults;
                if (this.hideTheseItems.length > 0 && retResults.length > 0) {
                    for (var i = retResults.length - 1; i > -1; i--) {
                        var itFullDesp = retResults[i].sourceObject.LookupItemFullDescription.Value;
                        if (this.hideTheseItems.indexOf(itFullDesp) > -1) {
                            retResults.splice(i, 1);
                        }
                    }
                }
                return retResults;
            };
            ;
            return LookupItemTreeNodesRequest;
        }(TrimMainObjectTreeNodesRequest));
        HPTRIM.LookupItemTreeNodesRequest = LookupItemTreeNodesRequest;
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var KnockoutBinding;
        (function (KnockoutBinding) {
            var DOM_ELEMENT_CHUNK_SIZE = 10;
            var AsyncUpdateInfo = (function () {
                function AsyncUpdateInfo(observeMe, element) {
                    var me = this;
                    me.domElement = element;
                    me.observed = observeMe;
                    me.origValue = ko.unwrap(observeMe);
                    me.docFrag = document.createRange().createContextualFragment(me.origValue);
                }
                return AsyncUpdateInfo;
            }());
            function insertNodes(bindInfo) {
                var obsValue = ko.unwrap(bindInfo.observed);
                if (obsValue != bindInfo.origValue) {
                    return;
                }
                var docFrag = bindInfo.docFrag;
                var element = bindInfo.domElement;
                var chunkCount = 0;
                while (docFrag.hasChildNodes() && chunkCount < DOM_ELEMENT_CHUNK_SIZE) {
                    element.appendChild(docFrag.firstChild);
                    chunkCount++;
                }
                if (docFrag.hasChildNodes()) {
                    var timerFunc = function () {
                        insertNodes(bindInfo);
                    };
                    setTimeout(timerFunc, 1);
                }
            }
            var lastHtmlAsyncBindingValue = "";
            ko.bindingHandlers.htmlAsync = {
                init: function () {
                    return { controlDescendantBindings: true };
                },
                update: function (element, valueAccessor, allBindings, doNotUse, bindingContext) {
                    ko.utils.emptyDomNode(element);
                    try {
                        var bindInfo = new AsyncUpdateInfo(valueAccessor(), element);
                        var shouldUpdate = lastHtmlAsyncBindingValue != valueAccessor()._latestValue;
                        lastHtmlAsyncBindingValue = valueAccessor()._latestValue;
                        if (shouldUpdate) {
                            insertNodes(bindInfo);
                        }
                    }
                    catch (ex) {
                        element.innerHTML = ko.unwrap(valueAccessor());
                    }
                }
            };
            ko.bindingHandlers.htmlElement = {
                init: function (element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {
                    var value = valueAccessor();
                    value(element);
                }
            };
            var bindings = ko.bindingHandlers;
            bindings.enterKey = {
                init: function (element, valueAccessor, allBindings, viewModel) {
                    ko.utils.registerEventHandler(element, "keydown", function (event) {
                        if (event.keyCode === 13) {
                            event.preventDefault();
                        }
                    });
                    ko.utils.registerEventHandler(element, "keyup", function (event) {
                        var bubble = true;
                        if (event.keyCode === 13) {
                            var funcToCall = valueAccessor();
                            var returnVal = funcToCall.call(viewModel);
                            if (returnVal === false) {
                                bubble = false;
                            }
                            event.preventDefault();
                        }
                        return bubble;
                    });
                }
            };
            bindings.escapeKey = {
                init: function (element, valueAccessor, allBindings, viewModel) {
                    ko.utils.registerEventHandler(element, "keydown", function (event) {
                        if (event.keyCode === 27) {
                            event.preventDefault();
                        }
                    });
                    ko.utils.registerEventHandler(element, "keyup", function (event) {
                        if (event.keyCode === 27) {
                            var funcToCall = valueAccessor();
                            funcToCall.call(viewModel);
                            event.preventDefault();
                        }
                        return true;
                    });
                }
            };
            ko.bindingHandlers.hprm_field = {
                init: function (element, valueAccessor) {
                    var value = valueAccessor();
                    var unwrapped = ko.utils.unwrapObservable(value);
                    return ko.bindingHandlers['template'].init(element, function () {
                        return { name: unwrapped.template, data: unwrapped };
                    }, null, null, null);
                },
                update: function (element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {
                    var value = valueAccessor();
                    var unwrapped = ko.utils.unwrapObservable(value);
                    return ko.bindingHandlers['template'].update(element, function () {
                        return { name: unwrapped.template, data: unwrapped };
                    }, allBindingsAccessor, viewModel, bindingContext);
                }
            };
            ko.virtualElements.allowedBindings['hprm_field'] = true;
            ko.bindingHandlers.chosen = {
                init: function (element, valueAccessor) {
                    ko.bindingHandlers.options.init(element, valueAccessor, null, null, null);
                    $(element).chosen({
                        width: '95%',
                        disable_search: true,
                        inherit_select_classes: true,
                        placeholder_text_multiple: ' '
                    });
                },
                update: function (element, valueAccessor, allBindings) {
                    ko.bindingHandlers.options.update(element, valueAccessor, allBindings, null, null);
                    $(element).trigger('chosen:updated');
                }
            };
            var extender = ko.extenders;
            extender.required = function (target, overrideMessage) {
                target.hasError = ko.observable();
                target.validationMessage = ko.observable();
                function validate(newValue) {
                    target.hasError(newValue ? false : true);
                    target.validationMessage(newValue ? "" : overrideMessage || HP.HPTRIM.Messages.web_thisFieldRequired);
                }
                validate(target());
                target.subscribe(validate);
                return target;
            };
        })(KnockoutBinding = HPTRIM.KnockoutBinding || (HPTRIM.KnockoutBinding = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var BaseObjectTypes = (function () {
            function BaseObjectTypes() {
            }
            BaseObjectTypes.ActionDef = { name: 'ActionDef', path: 'ActionDef', nameProperty: 'ActionDefActionName' };
            BaseObjectTypes.Activity = { name: 'Activity', path: 'Activity', nameProperty: 'ActivityName' };
            BaseObjectTypes.AgendaItem = { name: 'AgendaItem', path: 'AgendaItem', nameProperty: 'AgendaItemNumber' };
            BaseObjectTypes.AgendaItemType = { name: 'AgendaItemType', path: 'AgendaItemType', nameProperty: 'AgendaItemTypeName' };
            BaseObjectTypes.Alert = { name: 'Alert', path: 'Alert', nameProperty: 'AlertTitle' };
            BaseObjectTypes.ArchiveEvent = { name: 'ArchiveEvent', path: 'ArchiveEvent', nameProperty: 'ArchiveEventTitle' };
            BaseObjectTypes.AutoPartRule = { name: 'AutoPartRule', path: 'AutoPartRule', nameProperty: 'AutoPartRuleAprName' };
            BaseObjectTypes.Census = { name: 'Census', path: 'Census', nameProperty: 'CensusName' };
            BaseObjectTypes.CheckinPlace = { name: 'CheckinPlace', path: 'CheckinPlace', nameProperty: 'CheckinPlaceName' };
            BaseObjectTypes.CheckinStyle = { name: 'CheckinStyle', path: 'CheckinStyle', nameProperty: 'CheckinStyleName' };
            BaseObjectTypes.Classification = { name: 'Classification', path: 'Classification', nameProperty: 'ClassificationIdNumber' };
            BaseObjectTypes.Communication = { name: 'Communication', path: 'Communication', nameProperty: 'CommunicationDescription' };
            BaseObjectTypes.Consignment = { name: 'Consignment', path: 'Consignment', nameProperty: 'ConsignmentNumber' };
            BaseObjectTypes.ConsignmentApprover = { name: 'ConsignmentApprover', path: 'ConsignmentApprover', nameProperty: 'ConsignmentApproverDescription' };
            BaseObjectTypes.ConsignmentIssue = { name: 'ConsignmentIssue', path: 'ConsignmentIssue', nameProperty: 'ConsignmentIssueRecord' };
            BaseObjectTypes.ConsignmentRejection = { name: 'ConsignmentRejection', path: 'ConsignmentRejection', nameProperty: 'ConsignmentRejectionDescription' };
            BaseObjectTypes.DocumentQueue = { name: 'DocumentQueue', path: 'DocumentQueue', nameProperty: 'DocumentQueueName' };
            BaseObjectTypes.ElectronicStore = { name: 'ElectronicStore', path: 'ElectronicStore', nameProperty: 'ElectronicStoreName' };
            BaseObjectTypes.ExternalWorkflow = { name: 'ExternalWorkflow', path: 'ExternalWorkflow', nameProperty: 'ExternalWorkflowSlipId' };
            BaseObjectTypes.ExternalWorkflowTask = { name: 'ExternalWorkflowTask', path: 'ExternalWorkflowTask', nameProperty: 'ExternalWorkflowTaskDescription' };
            BaseObjectTypes.ExternalWorkflowType = { name: 'ExternalWorkflowType', path: 'ExternalWorkflowType', nameProperty: 'ExternalWorkflowTypeName' };
            BaseObjectTypes.FieldDefinition = { name: 'FieldDefinition', path: 'FieldDefinition', nameProperty: 'FieldDefinitionName' };
            BaseObjectTypes.History = { name: 'History', path: 'History', nameProperty: 'HistoryEventDescription' };
            BaseObjectTypes.Hold = { name: 'Hold', path: 'Hold', nameProperty: 'HoldName' };
            BaseObjectTypes.HtmlLayout = { name: 'HtmlLayout', path: 'HtmlLayout', nameProperty: 'HtmlLayoutName' };
            BaseObjectTypes.Jurisdiction = { name: 'Jurisdiction', path: 'Jurisdiction', nameProperty: 'JurisdictionName' };
            BaseObjectTypes.Keyword = { name: 'Keyword', path: 'Keyword', nameProperty: 'KeywordName' };
            BaseObjectTypes.Location = { name: 'Location', path: 'Location', nameProperty: 'LocationSortName' };
            BaseObjectTypes.LookupItem = { name: 'LookupItem', path: 'LookupItem', nameProperty: 'LookupItemFullDescription' };
            BaseObjectTypes.LookupSet = { name: 'LookupSet', path: 'LookupSet', nameProperty: 'LookupSetName' };
            BaseObjectTypes.MailTemplate = { name: 'MailTemplate', path: 'MailTemplate', nameProperty: 'MailTemplateName' };
            BaseObjectTypes.Meeting = { name: 'Meeting', path: 'Meeting', nameProperty: 'MeetingName' };
            BaseObjectTypes.MeetingType = { name: 'MeetingType', path: 'MeetingType', nameProperty: 'MeetingTypeName' };
            BaseObjectTypes.MetadataRule = { name: 'MetadataRule', path: 'MetadataRule', nameProperty: 'MetadataRuleMessage' };
            BaseObjectTypes.MinuteItem = { name: 'MinuteItem', path: 'MinuteItem', nameProperty: 'MinuteItemDescription' };
            BaseObjectTypes.MinuteItemType = { name: 'MinuteItemType', path: 'MinuteItemType', nameProperty: 'MinuteItemTypeName' };
            BaseObjectTypes.Notification = { name: 'Notification', path: 'Notification', nameProperty: 'NotificationDescription' };
            BaseObjectTypes.OfflineRecord = { name: 'OfflineRecord', path: 'OfflineRecord', nameProperty: 'OfflineRecordTitle' };
            BaseObjectTypes.Origin = { name: 'Origin', path: 'Origin', nameProperty: 'OriginName' };
            BaseObjectTypes.OriginHistory = { name: 'OriginHistory', path: 'OriginHistory', nameProperty: 'OriginHistoryName' };
            BaseObjectTypes.Record = { name: 'Record', path: 'Record', nameProperty: 'RecordNumber' };
            BaseObjectTypes.RecordAction = { name: 'RecordAction', path: 'RecordAction', nameProperty: 'RecordActionActionName' };
            BaseObjectTypes.RecordType = { name: 'RecordType', path: 'RecordType', nameProperty: 'RecordTypeName' };
            BaseObjectTypes.Report = { name: 'Report', path: 'Report', nameProperty: 'ReportName' };
            BaseObjectTypes.ReportBitmap = { name: 'ReportBitmap', path: 'ReportBitmap', nameProperty: 'ReportBitmapName' };
            BaseObjectTypes.Request = { name: 'Request', path: 'Request', nameProperty: 'RequestRecord' };
            BaseObjectTypes.SavedSearch = { name: 'SavedSearch', path: 'SavedSearch', nameProperty: 'SavedSearchFullName' };
            BaseObjectTypes.Schedule = { name: 'Schedule', path: 'Schedule', nameProperty: 'ScheduleName' };
            BaseObjectTypes.ScheduledTask = { name: 'ScheduledTask', path: 'ScheduledTask', nameProperty: 'ScheduledTaskDescription' };
            BaseObjectTypes.SearchForm = { name: 'SearchForm', path: 'SearchForm', nameProperty: 'SearchFormName' };
            BaseObjectTypes.SecurityCaveat = { name: 'SecurityCaveat', path: 'SecurityCaveat', nameProperty: 'SecurityCaveatName' };
            BaseObjectTypes.SecurityGuide = { name: 'SecurityGuide', path: 'SecurityGuide', nameProperty: 'SecurityGuideEntryReference' };
            BaseObjectTypes.SecurityLevel = { name: 'SecurityLevel', path: 'SecurityLevel', nameProperty: 'SecurityLevelName' };
            BaseObjectTypes.SharePointItem = { name: 'SharePointItem', path: 'SharePointItem', nameProperty: 'SharePointItemUniqueId' };
            BaseObjectTypes.Space = { name: 'Space', path: 'Space', nameProperty: 'SpaceNumber' };
            BaseObjectTypes.StopWord = { name: 'StopWord', path: 'StopWord', nameProperty: 'StopWordName' };
            BaseObjectTypes.TodoItem = { name: 'TodoItem', path: 'TodoItem', nameProperty: 'TodoItemDescription' };
            BaseObjectTypes.UserLabel = { name: 'UserLabel', path: 'UserLabel', nameProperty: 'UserLabelFullName' };
            BaseObjectTypes.Word = { name: 'Word', path: 'Word', nameProperty: 'WordName' };
            BaseObjectTypes.Workflow = { name: 'Workflow', path: 'Workflow', nameProperty: 'WorkflowName' };
            BaseObjectTypes.WorkflowTemplate = { name: 'WorkflowTemplate', path: 'WorkflowTemplate', nameProperty: 'WorkflowTemplateName' };
            BaseObjectTypes.WorkingCopy = { name: 'WorkingCopy', path: 'WorkingCopy', nameProperty: 'WorkingCopyTitle' };
            BaseObjectTypes.ZipCode = { name: 'ZipCode', path: 'ZipCode', nameProperty: 'ZipCodeName' };
            return BaseObjectTypes;
        }());
        HPTRIM.BaseObjectTypes = BaseObjectTypes;
        var ChildObjectTypes = (function () {
            function ChildObjectTypes() {
            }
            ChildObjectTypes.ActionDefStep = { name: 'ActionDefStep', path: 'ActionDefStep', nameProperty: 'ActionDefStepActionName' };
            ChildObjectTypes.AgendaItemAttachment = { name: 'AgendaItemAttachment', path: 'AgendaItemAttachment', nameProperty: 'AgendaItemAttachmentDescription' };
            ChildObjectTypes.AgendaItemTypeAttachment = { name: 'AgendaItemTypeAttachment', path: 'AgendaItemTypeAttachment', nameProperty: 'AgendaItemTypeAttachmentDescription' };
            ChildObjectTypes.AlertSubscriber = { name: 'AlertSubscriber', path: 'AlertSubscriber', nameProperty: 'AlertSubscriberDescription' };
            ChildObjectTypes.ArchiveEventOccurrence = { name: 'ArchiveEventOccurrence', path: 'ArchiveEventOccurrence', nameProperty: 'ArchiveEventOccurrenceOccurrenceDate' };
            ChildObjectTypes.CommunicationDetail = { name: 'CommunicationDetail', path: 'CommunicationDetail', nameProperty: 'CommunicationDetailLocationName' };
            ChildObjectTypes.JurisdictionMember = { name: 'JurisdictionMember', path: 'JurisdictionMember', nameProperty: 'JurisdictionMemberJurisdiction' };
            ChildObjectTypes.LocationAddress = { name: 'LocationAddress', path: 'LocationAddress', nameProperty: 'LocationAddressAddressLines' };
            ChildObjectTypes.LocationEAddress = { name: 'LocationEAddress', path: 'LocationEAddress', nameProperty: 'LocationEAddressName' };
            ChildObjectTypes.MeetingTypeUsualParticipant = { name: 'MeetingTypeUsualParticipant', path: 'MeetingTypeUsualParticipant', nameProperty: 'MeetingTypeUsualParticipantInvitee' };
            ChildObjectTypes.MinuteItemActionArising = { name: 'MinuteItemActionArising', path: 'MinuteItemActionArising', nameProperty: 'MinuteItemActionArisingTitle' };
            ChildObjectTypes.MeetingDocument = { name: 'MeetingDocument', path: 'MeetingDocument', nameProperty: 'MeetingDocumentName' };
            ChildObjectTypes.MeetingInvitation = { name: 'MeetingInvitation', path: 'MeetingInvitation', nameProperty: 'MeetingInvitationInvitee' };
            ChildObjectTypes.ClassificationOnlyRecordType = { name: 'ClassificationOnlyRecordType', path: 'ClassificationOnlyRecordType', nameProperty: 'ClassificationOnlyRecordTypeRecordType' };
            ChildObjectTypes.ClassificationSapBusinessObject = { name: 'ClassificationSapBusinessObject', path: 'ClassificationSapBusinessObject', nameProperty: 'ClassificationSapBusinessObjectBusinessObject' };
            ChildObjectTypes.RecordClientMatterParty = { name: 'RecordClientMatterParty', path: 'RecordClientMatterParty', nameProperty: 'RecordClientMatterPartyParty' };
            ChildObjectTypes.RecordClientMatterRole = { name: 'RecordClientMatterRole', path: 'RecordClientMatterRole', nameProperty: 'RecordClientMatterRoleRoleLocation' };
            ChildObjectTypes.RecordHold = { name: 'RecordHold', path: 'RecordHold', nameProperty: 'RecordHoldCase' };
            ChildObjectTypes.RecordJurisdiction = { name: 'RecordJurisdiction', path: 'RecordJurisdiction', nameProperty: 'RecordJurisdictionJurisdiction' };
            ChildObjectTypes.RecordKeyword = { name: 'RecordKeyword', path: 'RecordKeyword', nameProperty: 'RecordKeywordDescription' };
            ChildObjectTypes.RecordLinkedDocument = { name: 'RecordLinkedDocument', path: 'RecordLinkedDocument', nameProperty: 'RecordLinkedDocumentDocumentName' };
            ChildObjectTypes.RecordLocation = { name: 'RecordLocation', path: 'RecordLocation', nameProperty: 'RecordLocationName' };
            ChildObjectTypes.RecordRelationship = { name: 'RecordRelationship', path: 'RecordRelationship', nameProperty: 'RecordRelationshipRelatedRecord' };
            ChildObjectTypes.RecordRendition = { name: 'RecordRendition', path: 'RecordRendition', nameProperty: 'RecordRenditionDescription' };
            ChildObjectTypes.RecordRevision = { name: 'RecordRevision', path: 'RecordRevision', nameProperty: 'RecordRevisionDescription' };
            ChildObjectTypes.RecordSapComponent = { name: 'RecordSapComponent', path: 'RecordSapComponent', nameProperty: 'RecordSapComponentComponentId' };
            ChildObjectTypes.RecordTypeAutoSubFolder = { name: 'RecordTypeAutoSubFolder', path: 'RecordTypeAutoSubFolder', nameProperty: 'RecordTypeAutoSubFolderTitle' };
            ChildObjectTypes.ScheduleTrigger = { name: 'ScheduleTrigger', path: 'ScheduleTrigger', nameProperty: 'ScheduleTriggerDescription' };
            ChildObjectTypes.TodoItemItemReference = { name: 'TodoItemItemReference', path: 'TodoItemItemReference', nameProperty: 'TodoItemItemReferenceDetails' };
            ChildObjectTypes.ScheduledTaskHistory = { name: 'ScheduledTaskHistory', path: 'ScheduledTaskHistory', nameProperty: 'ScheduledTaskHistoryActionedBy' };
            ChildObjectTypes.ActivityAuthorization = { name: 'ActivityAuthorization', path: 'ActivityAuthorization', nameProperty: 'ActivityAuthorizationAuthorizedBy' };
            ChildObjectTypes.ActivityDocument = { name: 'ActivityDocument', path: 'ActivityDocument', nameProperty: 'ActivityDocumentTitle' };
            ChildObjectTypes.ActivityEmailRecipient = { name: 'ActivityEmailRecipient', path: 'ActivityEmailRecipient', nameProperty: 'ActivityEmailRecipientCcTo' };
            ChildObjectTypes.ActivityEscalation = { name: 'ActivityEscalation', path: 'ActivityEscalation', nameProperty: 'ActivityEscalationDescription' };
            ChildObjectTypes.ActivityResult = { name: 'ActivityResult', path: 'ActivityResult', nameProperty: 'ActivityResultName' };
            ChildObjectTypes.ActivityStartCondition = { name: 'ActivityStartCondition', path: 'ActivityStartCondition', nameProperty: 'ActivityStartConditionDescription' };
            ChildObjectTypes.WorkflowDocument = { name: 'WorkflowDocument', path: 'WorkflowDocument', nameProperty: 'WorkflowDocumentTitle' };
            ChildObjectTypes.WorkflowTemplateDocument = { name: 'WorkflowTemplateDocument', path: 'WorkflowTemplateDocument', nameProperty: 'WorkflowTemplateDocumentTitle' };
            return ChildObjectTypes;
        }());
        HPTRIM.ChildObjectTypes = ChildObjectTypes;
        (function (AccessControlSettings) {
            AccessControlSettings[AccessControlSettings["Public"] = 0] = "Public";
            AccessControlSettings[AccessControlSettings["Inherited"] = 1] = "Inherited";
            AccessControlSettings[AccessControlSettings["Private"] = 2] = "Private";
            AccessControlSettings[AccessControlSettings["PrivateOrContainer"] = 3] = "PrivateOrContainer";
        })(HPTRIM.AccessControlSettings || (HPTRIM.AccessControlSettings = {}));
        var AccessControlSettings = HPTRIM.AccessControlSettings;
        (function (AccessReferenceStyle) {
            AccessReferenceStyle[AccessReferenceStyle["RefOnly"] = 0] = "RefOnly";
            AccessReferenceStyle[AccessReferenceStyle["NoRefCopy"] = 1] = "NoRefCopy";
            AccessReferenceStyle[AccessReferenceStyle["RefCopy"] = 2] = "RefCopy";
            AccessReferenceStyle[AccessReferenceStyle["RefContainer"] = 3] = "RefContainer";
            AccessReferenceStyle[AccessReferenceStyle["NoRefContainer"] = 4] = "NoRefContainer";
            AccessReferenceStyle[AccessReferenceStyle["NoRefNoCopy"] = 5] = "NoRefNoCopy";
            AccessReferenceStyle[AccessReferenceStyle["RefOwner"] = 6] = "RefOwner";
            AccessReferenceStyle[AccessReferenceStyle["NoRefOwner"] = 7] = "NoRefOwner";
        })(HPTRIM.AccessReferenceStyle || (HPTRIM.AccessReferenceStyle = {}));
        var AccessReferenceStyle = HPTRIM.AccessReferenceStyle;
        (function (AclMenuItems) {
            AclMenuItems[AclMenuItems["Me"] = 0] = "Me";
            AclMenuItems[AclMenuItems["MyPosn"] = 1] = "MyPosn";
            AclMenuItems[AclMenuItems["MyUnit"] = 2] = "MyUnit";
            AclMenuItems[AclMenuItems["MyTeam"] = 3] = "MyTeam";
            AclMenuItems[AclMenuItems["MyStaff"] = 4] = "MyStaff";
            AclMenuItems[AclMenuItems["MyDelegates"] = 5] = "MyDelegates";
            AclMenuItems[AclMenuItems["MyProjects"] = 6] = "MyProjects";
            AclMenuItems[AclMenuItems["MyWorkgroups"] = 7] = "MyWorkgroups";
            AclMenuItems[AclMenuItems["MyCommittees"] = 8] = "MyCommittees";
        })(HPTRIM.AclMenuItems || (HPTRIM.AclMenuItems = {}));
        var AclMenuItems = HPTRIM.AclMenuItems;
        (function (ActionPurpose) {
            ActionPurpose[ActionPurpose["AssignToRecord"] = 0] = "AssignToRecord";
            ActionPurpose[ActionPurpose["AttachStep"] = 1] = "AttachStep";
        })(HPTRIM.ActionPurpose || (HPTRIM.ActionPurpose = {}));
        var ActionPurpose = HPTRIM.ActionPurpose;
        (function (ActivityAccess) {
            ActivityAccess[ActivityAccess["Update"] = 0] = "Update";
            ActivityAccess[ActivityAccess["ModifyAccess"] = 1] = "ModifyAccess";
            ActivityAccess[ActivityAccess["Delete"] = 2] = "Delete";
        })(HPTRIM.ActivityAccess || (HPTRIM.ActivityAccess = {}));
        var ActivityAccess = HPTRIM.ActivityAccess;
        (function (ActivityDocumentAction) {
            ActivityDocumentAction[ActivityDocumentAction["Reference"] = 0] = "Reference";
            ActivityDocumentAction[ActivityDocumentAction["Create"] = 1] = "Create";
            ActivityDocumentAction[ActivityDocumentAction["Review"] = 2] = "Review";
        })(HPTRIM.ActivityDocumentAction || (HPTRIM.ActivityDocumentAction = {}));
        var ActivityDocumentAction = HPTRIM.ActivityDocumentAction;
        (function (ActivityDocumentOrigin) {
            ActivityDocumentOrigin[ActivityDocumentOrigin["Reference"] = 0] = "Reference";
            ActivityDocumentOrigin[ActivityDocumentOrigin["InitiatingRecord"] = 1] = "InitiatingRecord";
            ActivityDocumentOrigin[ActivityDocumentOrigin["ThisActivity"] = 2] = "ThisActivity";
            ActivityDocumentOrigin[ActivityDocumentOrigin["PrecedingActivity"] = 3] = "PrecedingActivity";
        })(HPTRIM.ActivityDocumentOrigin || (HPTRIM.ActivityDocumentOrigin = {}));
        var ActivityDocumentOrigin = HPTRIM.ActivityDocumentOrigin;
        (function (ActivityDocumentStatus) {
            ActivityDocumentStatus[ActivityDocumentStatus["Unlinked"] = 0] = "Unlinked";
            ActivityDocumentStatus[ActivityDocumentStatus["Linked"] = 1] = "Linked";
        })(HPTRIM.ActivityDocumentStatus || (HPTRIM.ActivityDocumentStatus = {}));
        var ActivityDocumentStatus = HPTRIM.ActivityDocumentStatus;
        (function (ActivityDocumentUsage) {
            ActivityDocumentUsage[ActivityDocumentUsage["Reference"] = 0] = "Reference";
            ActivityDocumentUsage[ActivityDocumentUsage["Working"] = 1] = "Working";
            ActivityDocumentUsage[ActivityDocumentUsage["Review"] = 2] = "Review";
        })(HPTRIM.ActivityDocumentUsage || (HPTRIM.ActivityDocumentUsage = {}));
        var ActivityDocumentUsage = HPTRIM.ActivityDocumentUsage;
        (function (ActivityPurposes) {
            ActivityPurposes[ActivityPurposes["BrowseTemplate"] = 0] = "BrowseTemplate";
        })(HPTRIM.ActivityPurposes || (HPTRIM.ActivityPurposes = {}));
        var ActivityPurposes = HPTRIM.ActivityPurposes;
        (function (ActivityStates) {
            ActivityStates[ActivityStates["NotReadyToStart"] = 0] = "NotReadyToStart";
            ActivityStates[ActivityStates["ReadyToStart"] = 1] = "ReadyToStart";
            ActivityStates[ActivityStates["Started"] = 2] = "Started";
            ActivityStates[ActivityStates["Suspended"] = 3] = "Suspended";
            ActivityStates[ActivityStates["ReadyToResume"] = 4] = "ReadyToResume";
            ActivityStates[ActivityStates["PendingAuthorization"] = 5] = "PendingAuthorization";
            ActivityStates[ActivityStates["CompleteAndAuthorized"] = 6] = "CompleteAndAuthorized";
            ActivityStates[ActivityStates["Skipped"] = 7] = "Skipped";
        })(HPTRIM.ActivityStates || (HPTRIM.ActivityStates = {}));
        var ActivityStates = HPTRIM.ActivityStates;
        (function (AddressHistoryOption) {
            AddressHistoryOption[AddressHistoryOption["Off"] = 0] = "Off";
            AddressHistoryOption[AddressHistoryOption["On"] = 1] = "On";
            AddressHistoryOption[AddressHistoryOption["AlwaysOn"] = 2] = "AlwaysOn";
        })(HPTRIM.AddressHistoryOption || (HPTRIM.AddressHistoryOption = {}));
        var AddressHistoryOption = HPTRIM.AddressHistoryOption;
        (function (AddressTypes) {
            AddressTypes[AddressTypes["Street"] = 0] = "Street";
            AddressTypes[AddressTypes["Postal"] = 1] = "Postal";
            AddressTypes[AddressTypes["Custom1"] = 2] = "Custom1";
            AddressTypes[AddressTypes["Custom2"] = 3] = "Custom2";
            AddressTypes[AddressTypes["Custom3"] = 4] = "Custom3";
            AddressTypes[AddressTypes["Custom4"] = 5] = "Custom4";
            AddressTypes[AddressTypes["Custom5"] = 6] = "Custom5";
        })(HPTRIM.AddressTypes || (HPTRIM.AddressTypes = {}));
        var AddressTypes = HPTRIM.AddressTypes;
        (function (AgendaItemAccess) {
            AgendaItemAccess[AgendaItemAccess["EditSubmission"] = 0] = "EditSubmission";
        })(HPTRIM.AgendaItemAccess || (HPTRIM.AgendaItemAccess = {}));
        var AgendaItemAccess = HPTRIM.AgendaItemAccess;
        (function (AgendaPrintStyles) {
            AgendaPrintStyles[AgendaPrintStyles["NotPrinted"] = 0] = "NotPrinted";
            AgendaPrintStyles[AgendaPrintStyles["InlinePrint"] = 1] = "InlinePrint";
            AgendaPrintStyles[AgendaPrintStyles["AppendixPrint"] = 2] = "AppendixPrint";
        })(HPTRIM.AgendaPrintStyles || (HPTRIM.AgendaPrintStyles = {}));
        var AgendaPrintStyles = HPTRIM.AgendaPrintStyles;
        (function (AlertConditionTypes) {
            AlertConditionTypes[AlertConditionTypes["None"] = 0] = "None";
            AlertConditionTypes[AlertConditionTypes["Container"] = 1] = "Container";
            AlertConditionTypes[AlertConditionTypes["RecordType"] = 2] = "RecordType";
            AlertConditionTypes[AlertConditionTypes["Classification"] = 3] = "Classification";
            AlertConditionTypes[AlertConditionTypes["Keyword"] = 4] = "Keyword";
            AlertConditionTypes[AlertConditionTypes["TitleOrNotes"] = 5] = "TitleOrNotes";
        })(HPTRIM.AlertConditionTypes || (HPTRIM.AlertConditionTypes = {}));
        var AlertConditionTypes = HPTRIM.AlertConditionTypes;
        (function (AlertType) {
            AlertType[AlertType["ItemCreated"] = 0] = "ItemCreated";
            AlertType[AlertType["ItemModified"] = 1] = "ItemModified";
            AlertType[AlertType["ItemRemoved"] = 2] = "ItemRemoved";
            AlertType[AlertType["ContentsAdded"] = 3] = "ContentsAdded";
            AlertType[AlertType["ContentsRemoved"] = 4] = "ContentsRemoved";
            AlertType[AlertType["DocumentAction"] = 5] = "DocumentAction";
        })(HPTRIM.AlertType || (HPTRIM.AlertType = {}));
        var AlertType = HPTRIM.AlertType;
        (function (AprDateTypes) {
            AprDateTypes[AprDateTypes["None"] = 0] = "None";
            AprDateTypes[AprDateTypes["DateCreated"] = 1] = "DateCreated";
            AprDateTypes[AprDateTypes["DatePublished"] = 2] = "DatePublished";
            AprDateTypes[AprDateTypes["DateRegistered"] = 3] = "DateRegistered";
            AprDateTypes[AprDateTypes["DateInactive"] = 4] = "DateInactive";
            AprDateTypes[AprDateTypes["DateModified"] = 5] = "DateModified";
            AprDateTypes[AprDateTypes["DateFinalized"] = 6] = "DateFinalized";
            AprDateTypes[AprDateTypes["UserDefined"] = 7] = "UserDefined";
            AprDateTypes[AprDateTypes["FixedDate"] = 8] = "FixedDate";
        })(HPTRIM.AprDateTypes || (HPTRIM.AprDateTypes = {}));
        var AprDateTypes = HPTRIM.AprDateTypes;
        (function (AprType) {
            AprType[AprType["Close"] = 0] = "Close";
            AprType[AprType["CloseAndCreate"] = 1] = "CloseAndCreate";
        })(HPTRIM.AprType || (HPTRIM.AprType = {}));
        var AprType = HPTRIM.AprType;
        (function (AsynchTaskStatus) {
            AsynchTaskStatus[AsynchTaskStatus["Ready"] = 0] = "Ready";
            AsynchTaskStatus[AsynchTaskStatus["Running"] = 1] = "Running";
            AsynchTaskStatus[AsynchTaskStatus["Succeeded"] = 2] = "Succeeded";
            AsynchTaskStatus[AsynchTaskStatus["Failed"] = 3] = "Failed";
            AsynchTaskStatus[AsynchTaskStatus["Canceled"] = 4] = "Canceled";
        })(HPTRIM.AsynchTaskStatus || (HPTRIM.AsynchTaskStatus = {}));
        var AsynchTaskStatus = HPTRIM.AsynchTaskStatus;
        (function (AttendanceType) {
            AttendanceType[AttendanceType["Present"] = 0] = "Present";
            AttendanceType[AttendanceType["Apology"] = 1] = "Apology";
            AttendanceType[AttendanceType["NotPresent"] = 2] = "NotPresent";
            AttendanceType[AttendanceType["Proxy"] = 3] = "Proxy";
            AttendanceType[AttendanceType["Custom1"] = 4] = "Custom1";
            AttendanceType[AttendanceType["Custom2"] = 5] = "Custom2";
            AttendanceType[AttendanceType["Custom3"] = 6] = "Custom3";
        })(HPTRIM.AttendanceType || (HPTRIM.AttendanceType = {}));
        var AttendanceType = HPTRIM.AttendanceType;
        (function (AuthenticationMethod) {
            AuthenticationMethod[AuthenticationMethod["Kerberos"] = 0] = "Kerberos";
            AuthenticationMethod[AuthenticationMethod["Ntlm"] = 1] = "Ntlm";
            AuthenticationMethod[AuthenticationMethod["Negotiate"] = 2] = "Negotiate";
            AuthenticationMethod[AuthenticationMethod["Novell"] = 3] = "Novell";
            AuthenticationMethod[AuthenticationMethod["None"] = 4] = "None";
            AuthenticationMethod[AuthenticationMethod["Adfs"] = 5] = "Adfs";
            AuthenticationMethod[AuthenticationMethod["GoogleApps"] = 6] = "GoogleApps";
        })(HPTRIM.AuthenticationMethod || (HPTRIM.AuthenticationMethod = {}));
        var AuthenticationMethod = HPTRIM.AuthenticationMethod;
        (function (AuthorizationMethods) {
            AuthorizationMethods[AuthorizationMethods["Simple"] = 0] = "Simple";
            AuthorizationMethods[AuthorizationMethods["Challenge"] = 1] = "Challenge";
            AuthorizationMethods[AuthorizationMethods["Docusign"] = 2] = "Docusign";
        })(HPTRIM.AuthorizationMethods || (HPTRIM.AuthorizationMethods = {}));
        var AuthorizationMethods = HPTRIM.AuthorizationMethods;
        (function (AutoProfilingTitleOptions) {
            AutoProfilingTitleOptions[AutoProfilingTitleOptions["FromContent"] = 0] = "FromContent";
            AutoProfilingTitleOptions[AutoProfilingTitleOptions["FromFileName"] = 1] = "FromFileName";
            AutoProfilingTitleOptions[AutoProfilingTitleOptions["None"] = 2] = "None";
        })(HPTRIM.AutoProfilingTitleOptions || (HPTRIM.AutoProfilingTitleOptions = {}));
        var AutoProfilingTitleOptions = HPTRIM.AutoProfilingTitleOptions;
        (function (AutoRenderSelectOption) {
            AutoRenderSelectOption[AutoRenderSelectOption["RecordsOlderThan"] = 0] = "RecordsOlderThan";
            AutoRenderSelectOption[AutoRenderSelectOption["RecordsFinalized"] = 1] = "RecordsFinalized";
            AutoRenderSelectOption[AutoRenderSelectOption["RecordsArchived"] = 2] = "RecordsArchived";
            AutoRenderSelectOption[AutoRenderSelectOption["RecordsDueForArchiving"] = 3] = "RecordsDueForArchiving";
            AutoRenderSelectOption[AutoRenderSelectOption["RecordsWithConsignment"] = 4] = "RecordsWithConsignment";
            AutoRenderSelectOption[AutoRenderSelectOption["RecordsLargerThan"] = 5] = "RecordsLargerThan";
        })(HPTRIM.AutoRenderSelectOption || (HPTRIM.AutoRenderSelectOption = {}));
        var AutoRenderSelectOption = HPTRIM.AutoRenderSelectOption;
        (function (AutoRenditionStatus) {
            AutoRenditionStatus[AutoRenditionStatus["None"] = 0] = "None";
            AutoRenditionStatus[AutoRenditionStatus["Longevity"] = 1] = "Longevity";
            AutoRenditionStatus[AutoRenditionStatus["Redactable"] = 2] = "Redactable";
            AutoRenditionStatus[AutoRenditionStatus["LongevityAndRedactable"] = 3] = "LongevityAndRedactable";
        })(HPTRIM.AutoRenditionStatus || (HPTRIM.AutoRenditionStatus = {}));
        var AutoRenditionStatus = HPTRIM.AutoRenditionStatus;
        (function (BarcodeError) {
            BarcodeError[BarcodeError["BarcodeOk"] = 0] = "BarcodeOk";
            BarcodeError[BarcodeError["InvalidLabelType"] = 1] = "InvalidLabelType";
            BarcodeError[BarcodeError["InvalidControlLabel"] = 2] = "InvalidControlLabel";
            BarcodeError[BarcodeError["InvalidUri"] = 3] = "InvalidUri";
            BarcodeError[BarcodeError["NotInThisDatabase"] = 4] = "NotInThisDatabase";
        })(HPTRIM.BarcodeError || (HPTRIM.BarcodeError = {}));
        var BarcodeError = HPTRIM.BarcodeError;
        (function (BarcodeLabelType) {
            BarcodeLabelType[BarcodeLabelType["UnknownLbl"] = 0] = "UnknownLbl";
            BarcodeLabelType[BarcodeLabelType["DateOrTimeLbl"] = 1] = "DateOrTimeLbl";
            BarcodeLabelType[BarcodeLabelType["RecordLbl"] = 2] = "RecordLbl";
            BarcodeLabelType[BarcodeLabelType["LocationLbl"] = 3] = "LocationLbl";
            BarcodeLabelType[BarcodeLabelType["ArchiveLbl"] = 4] = "ArchiveLbl";
            BarcodeLabelType[BarcodeLabelType["ActionLbl"] = 5] = "ActionLbl";
            BarcodeLabelType[BarcodeLabelType["SpaceLbl"] = 6] = "SpaceLbl";
            BarcodeLabelType[BarcodeLabelType["ControlLbl"] = 7] = "ControlLbl";
        })(HPTRIM.BarcodeLabelType || (HPTRIM.BarcodeLabelType = {}));
        var BarcodeLabelType = HPTRIM.BarcodeLabelType;
        (function (BarcodePrintOption) {
            BarcodePrintOption[BarcodePrintOption["Internal"] = 0] = "Internal";
            BarcodePrintOption[BarcodePrintOption["InternalClear"] = 1] = "InternalClear";
            BarcodePrintOption[BarcodePrintOption["External"] = 2] = "External";
        })(HPTRIM.BarcodePrintOption || (HPTRIM.BarcodePrintOption = {}));
        var BarcodePrintOption = HPTRIM.BarcodePrintOption;
        (function (BulkLoaderCopyMode) {
            BulkLoaderCopyMode[BulkLoaderCopyMode["WorkgroupServer"] = 0] = "WorkgroupServer";
            BulkLoaderCopyMode[BulkLoaderCopyMode["WindowsCopy"] = 1] = "WindowsCopy";
            BulkLoaderCopyMode[BulkLoaderCopyMode["WindowsMove"] = 2] = "WindowsMove";
        })(HPTRIM.BulkLoaderCopyMode || (HPTRIM.BulkLoaderCopyMode = {}));
        var BulkLoaderCopyMode = HPTRIM.BulkLoaderCopyMode;
        (function (CensusRecords) {
            CensusRecords[CensusRecords["All"] = 0] = "All";
            CensusRecords[CensusRecords["Missing"] = 1] = "Missing";
            CensusRecords[CensusRecords["Relocated"] = 2] = "Relocated";
        })(HPTRIM.CensusRecords || (HPTRIM.CensusRecords = {}));
        var CensusRecords = HPTRIM.CensusRecords;
        (function (CheckinPlaceTypes) {
            CheckinPlaceTypes[CheckinPlaceTypes["MailForServerProcessing"] = 0] = "MailForServerProcessing";
            CheckinPlaceTypes[CheckinPlaceTypes["DocsForServerProcessing"] = 1] = "DocsForServerProcessing";
            CheckinPlaceTypes[CheckinPlaceTypes["MailForClientProcessing"] = 2] = "MailForClientProcessing";
            CheckinPlaceTypes[CheckinPlaceTypes["SocialMediaForServerProcessing"] = 3] = "SocialMediaForServerProcessing";
        })(HPTRIM.CheckinPlaceTypes || (HPTRIM.CheckinPlaceTypes = {}));
        var CheckinPlaceTypes = HPTRIM.CheckinPlaceTypes;
        (function (CheckinToolPurposes) {
            CheckinToolPurposes[CheckinToolPurposes["UserCheckin"] = 0] = "UserCheckin";
            CheckinToolPurposes[CheckinToolPurposes["ServerCheckin"] = 1] = "ServerCheckin";
            CheckinToolPurposes[CheckinToolPurposes["PersonalMaintenance"] = 2] = "PersonalMaintenance";
            CheckinToolPurposes[CheckinToolPurposes["GroupMaintenance"] = 3] = "GroupMaintenance";
        })(HPTRIM.CheckinToolPurposes || (HPTRIM.CheckinToolPurposes = {}));
        var CheckinToolPurposes = HPTRIM.CheckinToolPurposes;
        (function (CheckOutStyles) {
            CheckOutStyles[CheckOutStyles["NotCheckedOut"] = 0] = "NotCheckedOut";
            CheckOutStyles[CheckOutStyles["ToTopDrawer"] = 1] = "ToTopDrawer";
            CheckOutStyles[CheckOutStyles["ToPath"] = 2] = "ToPath";
            CheckOutStyles[CheckOutStyles["Pending"] = 3] = "Pending";
            CheckOutStyles[CheckOutStyles["ToWorkingCopy"] = 4] = "ToWorkingCopy";
        })(HPTRIM.CheckOutStyles || (HPTRIM.CheckOutStyles = {}));
        var CheckOutStyles = HPTRIM.CheckOutStyles;
        (function (ClassificationPurpose) {
            ClassificationPurpose[ClassificationPurpose["ForRecordCreation"] = 0] = "ForRecordCreation";
            ClassificationPurpose[ClassificationPurpose["RecordSelection"] = 1] = "RecordSelection";
            ClassificationPurpose[ClassificationPurpose["RecordTypeStart"] = 2] = "RecordTypeStart";
            ClassificationPurpose[ClassificationPurpose["Maintain"] = 3] = "Maintain";
            ClassificationPurpose[ClassificationPurpose["Unspecified"] = 4] = "Unspecified";
            ClassificationPurpose[ClassificationPurpose["FindContainerFor"] = 5] = "FindContainerFor";
            ClassificationPurpose[ClassificationPurpose["AttachDocument"] = 6] = "AttachDocument";
            ClassificationPurpose[ClassificationPurpose["EditDocument"] = 7] = "EditDocument";
            ClassificationPurpose[ClassificationPurpose["BrowseRecords"] = 8] = "BrowseRecords";
            ClassificationPurpose[ClassificationPurpose["ViewDocument"] = 9] = "ViewDocument";
            ClassificationPurpose[ClassificationPurpose["AttachRendition"] = 10] = "AttachRendition";
            ClassificationPurpose[ClassificationPurpose["RelocateRecord"] = 11] = "RelocateRecord";
            ClassificationPurpose[ClassificationPurpose["DefaultContainer"] = 12] = "DefaultContainer";
            ClassificationPurpose[ClassificationPurpose["FindAlternateContainerFor"] = 13] = "FindAlternateContainerFor";
            ClassificationPurpose[ClassificationPurpose["GpsSearch"] = 14] = "GpsSearch";
        })(HPTRIM.ClassificationPurpose || (HPTRIM.ClassificationPurpose = {}));
        var ClassificationPurpose = HPTRIM.ClassificationPurpose;
        (function (ClientAuthenticationMechanism) {
            ClientAuthenticationMechanism[ClientAuthenticationMechanism["IntegratedWindows"] = 0] = "IntegratedWindows";
            ClientAuthenticationMechanism[ClientAuthenticationMechanism["ExplicitWindows"] = 1] = "ExplicitWindows";
            ClientAuthenticationMechanism[ClientAuthenticationMechanism["Adfs"] = 2] = "Adfs";
            ClientAuthenticationMechanism[ClientAuthenticationMechanism["GoogleApps"] = 3] = "GoogleApps";
        })(HPTRIM.ClientAuthenticationMechanism || (HPTRIM.ClientAuthenticationMechanism = {}));
        var ClientAuthenticationMechanism = HPTRIM.ClientAuthenticationMechanism;
        (function (ClientMatterInterestTypes) {
            ClientMatterInterestTypes[ClientMatterInterestTypes["For"] = 0] = "For";
            ClientMatterInterestTypes[ClientMatterInterestTypes["Against"] = 1] = "Against";
            ClientMatterInterestTypes[ClientMatterInterestTypes["Neutral"] = 2] = "Neutral";
        })(HPTRIM.ClientMatterInterestTypes || (HPTRIM.ClientMatterInterestTypes = {}));
        var ClientMatterInterestTypes = HPTRIM.ClientMatterInterestTypes;
        (function (ClientServerProtocol) {
            ClientServerProtocol[ClientServerProtocol["Tcp"] = 0] = "Tcp";
            ClientServerProtocol[ClientServerProtocol["Local"] = 1] = "Local";
            ClientServerProtocol[ClientServerProtocol["Https"] = 2] = "Https";
            ClientServerProtocol[ClientServerProtocol["Http"] = 3] = "Http";
        })(HPTRIM.ClientServerProtocol || (HPTRIM.ClientServerProtocol = {}));
        var ClientServerProtocol = HPTRIM.ClientServerProtocol;
        (function (ColumnIndexType) {
            ColumnIndexType[ColumnIndexType["NotAnIndex"] = 0] = "NotAnIndex";
            ColumnIndexType[ColumnIndexType["DuplicatesAllowed"] = 1] = "DuplicatesAllowed";
            ColumnIndexType[ColumnIndexType["Unique"] = 2] = "Unique";
            ColumnIndexType[ColumnIndexType["Primary"] = 3] = "Primary";
            ColumnIndexType[ColumnIndexType["Upper"] = 4] = "Upper";
            ColumnIndexType[ColumnIndexType["UniqueUpper"] = 5] = "UniqueUpper";
        })(HPTRIM.ColumnIndexType || (HPTRIM.ColumnIndexType = {}));
        var ColumnIndexType = HPTRIM.ColumnIndexType;
        (function (CommandRefreshTypes) {
            CommandRefreshTypes[CommandRefreshTypes["None"] = 0] = "None";
            CommandRefreshTypes[CommandRefreshTypes["Current"] = 1] = "Current";
            CommandRefreshTypes[CommandRefreshTypes["Add"] = 2] = "Add";
            CommandRefreshTypes[CommandRefreshTypes["ChildList"] = 3] = "ChildList";
            CommandRefreshTypes[CommandRefreshTypes["ChildListCurrent"] = 4] = "ChildListCurrent";
            CommandRefreshTypes[CommandRefreshTypes["Parent"] = 5] = "Parent";
            CommandRefreshTypes[CommandRefreshTypes["AllBobs"] = 6] = "AllBobs";
            CommandRefreshTypes[CommandRefreshTypes["All"] = 7] = "All";
            CommandRefreshTypes[CommandRefreshTypes["Delete"] = 8] = "Delete";
            CommandRefreshTypes[CommandRefreshTypes["CurrentAndKids"] = 9] = "CurrentAndKids";
            CommandRefreshTypes[CommandRefreshTypes["CurrentAndParent"] = 10] = "CurrentAndParent";
            CommandRefreshTypes[CommandRefreshTypes["Up"] = 11] = "Up";
            CommandRefreshTypes[CommandRefreshTypes["Down"] = 12] = "Down";
            CommandRefreshTypes[CommandRefreshTypes["Append"] = 13] = "Append";
            CommandRefreshTypes[CommandRefreshTypes["AddChild"] = 14] = "AddChild";
            CommandRefreshTypes[CommandRefreshTypes["AddChildCurrent"] = 15] = "AddChildCurrent";
            CommandRefreshTypes[CommandRefreshTypes["AddChildCurrentParent"] = 16] = "AddChildCurrentParent";
        })(HPTRIM.CommandRefreshTypes || (HPTRIM.CommandRefreshTypes = {}));
        var CommandRefreshTypes = HPTRIM.CommandRefreshTypes;
        (function (CommunicationDirection) {
            CommunicationDirection[CommunicationDirection["Incoming"] = 0] = "Incoming";
            CommunicationDirection[CommunicationDirection["Outgoing"] = 1] = "Outgoing";
            CommunicationDirection[CommunicationDirection["Internal"] = 2] = "Internal";
        })(HPTRIM.CommunicationDirection || (HPTRIM.CommunicationDirection = {}));
        var CommunicationDirection = HPTRIM.CommunicationDirection;
        (function (CommunicationMedium) {
            CommunicationMedium[CommunicationMedium["Post"] = 0] = "Post";
            CommunicationMedium[CommunicationMedium["Fax"] = 1] = "Fax";
            CommunicationMedium[CommunicationMedium["Email"] = 2] = "Email";
            CommunicationMedium[CommunicationMedium["Courier"] = 3] = "Courier";
            CommunicationMedium[CommunicationMedium["Custom1"] = 4] = "Custom1";
            CommunicationMedium[CommunicationMedium["Custom2"] = 5] = "Custom2";
            CommunicationMedium[CommunicationMedium["Custom3"] = 6] = "Custom3";
            CommunicationMedium[CommunicationMedium["Custom4"] = 7] = "Custom4";
        })(HPTRIM.CommunicationMedium || (HPTRIM.CommunicationMedium = {}));
        var CommunicationMedium = HPTRIM.CommunicationMedium;
        (function (CommunicatorType) {
            CommunicatorType[CommunicatorType["Sender"] = 0] = "Sender";
            CommunicatorType[CommunicatorType["Recipient"] = 1] = "Recipient";
            CommunicatorType[CommunicatorType["Custom1"] = 2] = "Custom1";
            CommunicatorType[CommunicatorType["Custom2"] = 3] = "Custom2";
            CommunicatorType[CommunicatorType["Custom3"] = 4] = "Custom3";
            CommunicatorType[CommunicatorType["Custom4"] = 5] = "Custom4";
        })(HPTRIM.CommunicatorType || (HPTRIM.CommunicatorType = {}));
        var CommunicatorType = HPTRIM.CommunicatorType;
        (function (ConsignmentDisposalType) {
            ConsignmentDisposalType[ConsignmentDisposalType["Archive"] = 0] = "Archive";
            ConsignmentDisposalType[ConsignmentDisposalType["Transfer"] = 1] = "Transfer";
            ConsignmentDisposalType[ConsignmentDisposalType["Destroy"] = 2] = "Destroy";
        })(HPTRIM.ConsignmentDisposalType || (HPTRIM.ConsignmentDisposalType = {}));
        var ConsignmentDisposalType = HPTRIM.ConsignmentDisposalType;
        (function (ConsignmentItemApprovalStatus) {
            ConsignmentItemApprovalStatus[ConsignmentItemApprovalStatus["Pending"] = 0] = "Pending";
            ConsignmentItemApprovalStatus[ConsignmentItemApprovalStatus["Approved"] = 1] = "Approved";
            ConsignmentItemApprovalStatus[ConsignmentItemApprovalStatus["Rejected"] = 2] = "Rejected";
        })(HPTRIM.ConsignmentItemApprovalStatus || (HPTRIM.ConsignmentItemApprovalStatus = {}));
        var ConsignmentItemApprovalStatus = HPTRIM.ConsignmentItemApprovalStatus;
        (function (ConsignmentItemIssueType) {
            ConsignmentItemIssueType[ConsignmentItemIssueType["ResolveByArchivist"] = 0] = "ResolveByArchivist";
            ConsignmentItemIssueType[ConsignmentItemIssueType["IssueSevere"] = 1] = "IssueSevere";
            ConsignmentItemIssueType[ConsignmentItemIssueType["MoreInfoNeeded"] = 2] = "MoreInfoNeeded";
            ConsignmentItemIssueType[ConsignmentItemIssueType["IssueWarning"] = 3] = "IssueWarning";
        })(HPTRIM.ConsignmentItemIssueType || (HPTRIM.ConsignmentItemIssueType = {}));
        var ConsignmentItemIssueType = HPTRIM.ConsignmentItemIssueType;
        (function (ConsignmentPickListFormat) {
            ConsignmentPickListFormat[ConsignmentPickListFormat["TabDelimited"] = 0] = "TabDelimited";
            ConsignmentPickListFormat[ConsignmentPickListFormat["Xml"] = 1] = "Xml";
            ConsignmentPickListFormat[ConsignmentPickListFormat["Html"] = 2] = "Html";
        })(HPTRIM.ConsignmentPickListFormat || (HPTRIM.ConsignmentPickListFormat = {}));
        var ConsignmentPickListFormat = HPTRIM.ConsignmentPickListFormat;
        (function (ConsignmentState) {
            ConsignmentState[ConsignmentState["PendingReview"] = 0] = "PendingReview";
            ConsignmentState[ConsignmentState["PendingReviewWithIssues"] = 1] = "PendingReviewWithIssues";
            ConsignmentState[ConsignmentState["PendingReviewCompletion"] = 2] = "PendingReviewCompletion";
            ConsignmentState[ConsignmentState["PendingApproval"] = 3] = "PendingApproval";
            ConsignmentState[ConsignmentState["Rejected"] = 4] = "Rejected";
            ConsignmentState[ConsignmentState["PendingApprovalRejections"] = 5] = "PendingApprovalRejections";
            ConsignmentState[ConsignmentState["ApprovedWithRejections"] = 6] = "ApprovedWithRejections";
            ConsignmentState[ConsignmentState["PendingDisposal"] = 7] = "PendingDisposal";
            ConsignmentState[ConsignmentState["PendingDisposalWithIssues"] = 8] = "PendingDisposalWithIssues";
            ConsignmentState[ConsignmentState["DisposalWaitingAcknowledgement"] = 9] = "DisposalWaitingAcknowledgement";
            ConsignmentState[ConsignmentState["DisposalCompleteWithIssues"] = 10] = "DisposalCompleteWithIssues";
            ConsignmentState[ConsignmentState["DisposalComplete"] = 11] = "DisposalComplete";
        })(HPTRIM.ConsignmentState || (HPTRIM.ConsignmentState = {}));
        var ConsignmentState = HPTRIM.ConsignmentState;
        (function (ContactType) {
            ContactType[ContactType["Author"] = 0] = "Author";
            ContactType[ContactType["Addressee"] = 1] = "Addressee";
            ContactType[ContactType["Representative"] = 2] = "Representative";
            ContactType[ContactType["Other"] = 3] = "Other";
            ContactType[ContactType["Client"] = 4] = "Client";
            ContactType[ContactType["Custom1"] = 5] = "Custom1";
            ContactType[ContactType["Custom2"] = 6] = "Custom2";
            ContactType[ContactType["Custom3"] = 7] = "Custom3";
            ContactType[ContactType["Custom4"] = 8] = "Custom4";
            ContactType[ContactType["Custom5"] = 9] = "Custom5";
            ContactType[ContactType["Custom6"] = 10] = "Custom6";
            ContactType[ContactType["Custom7"] = 11] = "Custom7";
            ContactType[ContactType["Custom8"] = 12] = "Custom8";
            ContactType[ContactType["Custom9"] = 13] = "Custom9";
            ContactType[ContactType["Custom10"] = 14] = "Custom10";
            ContactType[ContactType["Cc"] = 15] = "Cc";
            ContactType[ContactType["Bcc"] = 16] = "Bcc";
        })(HPTRIM.ContactType || (HPTRIM.ContactType = {}));
        var ContactType = HPTRIM.ContactType;
        (function (ContainerSecurityHandling) {
            ContainerSecurityHandling[ContainerSecurityHandling["Ignore"] = 0] = "Ignore";
            ContainerSecurityHandling[ContainerSecurityHandling["Warn"] = 1] = "Warn";
            ContainerSecurityHandling[ContainerSecurityHandling["WarnAndUpgrade"] = 2] = "WarnAndUpgrade";
            ContainerSecurityHandling[ContainerSecurityHandling["Upgrade"] = 3] = "Upgrade";
            ContainerSecurityHandling[ContainerSecurityHandling["Prevent"] = 4] = "Prevent";
            ContainerSecurityHandling[ContainerSecurityHandling["WarnAndUpgradeDoc"] = 5] = "WarnAndUpgradeDoc";
            ContainerSecurityHandling[ContainerSecurityHandling["UpgradeDoc"] = 6] = "UpgradeDoc";
        })(HPTRIM.ContainerSecurityHandling || (HPTRIM.ContainerSecurityHandling = {}));
        var ContainerSecurityHandling = HPTRIM.ContainerSecurityHandling;
        (function (ContainmentRule) {
            ContainmentRule[ContainmentRule["ByLevel"] = 0] = "ByLevel";
            ContainmentRule[ContainmentRule["ByLevelInclusive"] = 1] = "ByLevelInclusive";
            ContainmentRule[ContainmentRule["ByBehavior"] = 2] = "ByBehavior";
            ContainmentRule[ContainmentRule["ByList"] = 3] = "ByList";
            ContainmentRule[ContainmentRule["Prevented"] = 4] = "Prevented";
        })(HPTRIM.ContainmentRule || (HPTRIM.ContainmentRule = {}));
        var ContainmentRule = HPTRIM.ContainmentRule;
        (function (ContentEngineType) {
            ContentEngineType[ContentEngineType["None"] = 0] = "None";
            ContentEngineType[ContentEngineType["Idol"] = 1] = "Idol";
            ContentEngineType[ContentEngineType["Elasticsearch"] = 2] = "Elasticsearch";
        })(HPTRIM.ContentEngineType || (HPTRIM.ContentEngineType = {}));
        var ContentEngineType = HPTRIM.ContentEngineType;
        (function (ControlLabelType) {
            ControlLabelType[ControlLabelType["Unknown"] = 0] = "Unknown";
            ControlLabelType[ControlLabelType["Location"] = 1] = "Location";
            ControlLabelType[ControlLabelType["Authority"] = 2] = "Authority";
            ControlLabelType[ControlLabelType["PutInContainer"] = 3] = "PutInContainer";
            ControlLabelType[ControlLabelType["EncloseInContainer"] = 4] = "EncloseInContainer";
            ControlLabelType[ControlLabelType["ActionSignoff"] = 5] = "ActionSignoff";
            ControlLabelType[ControlLabelType["ActionReassign"] = 6] = "ActionReassign";
            ControlLabelType[ControlLabelType["ActionCurrentSignoff"] = 7] = "ActionCurrentSignoff";
            ControlLabelType[ControlLabelType["ActionCurrentReassign"] = 8] = "ActionCurrentReassign";
            ControlLabelType[ControlLabelType["AddToWorkTray"] = 9] = "AddToWorkTray";
            ControlLabelType[ControlLabelType["Inactive"] = 10] = "Inactive";
            ControlLabelType[ControlLabelType["Archive"] = 11] = "Archive";
            ControlLabelType[ControlLabelType["Destroy"] = 12] = "Destroy";
            ControlLabelType[ControlLabelType["HomeLoc"] = 13] = "HomeLoc";
            ControlLabelType[ControlLabelType["MoveToHome"] = 14] = "MoveToHome";
            ControlLabelType[ControlLabelType["EndTransmission"] = 15] = "EndTransmission";
        })(HPTRIM.ControlLabelType || (HPTRIM.ControlLabelType = {}));
        var ControlLabelType = HPTRIM.ControlLabelType;
        (function (CurrLocDef) {
            CurrLocDef[CurrLocDef["LoginUser"] = 0] = "LoginUser";
            CurrLocDef[CurrLocDef["LoginUserPosn"] = 1] = "LoginUserPosn";
            CurrLocDef[CurrLocDef["LoginUserOrg"] = 2] = "LoginUserOrg";
        })(HPTRIM.CurrLocDef || (HPTRIM.CurrLocDef = {}));
        var CurrLocDef = HPTRIM.CurrLocDef;
        (function (CuspDateDisplayType) {
            CuspDateDisplayType[CuspDateDisplayType["StartOfDay"] = 0] = "StartOfDay";
            CuspDateDisplayType[CuspDateDisplayType["EndOfDay"] = 1] = "EndOfDay";
        })(HPTRIM.CuspDateDisplayType || (HPTRIM.CuspDateDisplayType = {}));
        var CuspDateDisplayType = HPTRIM.CuspDateDisplayType;
        (function (DatabaseLockType) {
            DatabaseLockType[DatabaseLockType["WordIndexing"] = 0] = "WordIndexing";
            DatabaseLockType[DatabaseLockType["ContentIndexing"] = 1] = "ContentIndexing";
            DatabaseLockType[DatabaseLockType["EventStatistics"] = 2] = "EventStatistics";
            DatabaseLockType[DatabaseLockType["ScheduleTriggers"] = 3] = "ScheduleTriggers";
            DatabaseLockType[DatabaseLockType["StoreClaimUpdates"] = 4] = "StoreClaimUpdates";
            DatabaseLockType[DatabaseLockType["RecordCreationStatistics"] = 5] = "RecordCreationStatistics";
            DatabaseLockType[DatabaseLockType["OriginContainerAllocation"] = 6] = "OriginContainerAllocation";
            DatabaseLockType[DatabaseLockType["GetNextUriStrict"] = 7] = "GetNextUriStrict";
        })(HPTRIM.DatabaseLockType || (HPTRIM.DatabaseLockType = {}));
        var DatabaseLockType = HPTRIM.DatabaseLockType;
        (function (DatabaseTypes) {
            DatabaseTypes[DatabaseTypes["Unknown"] = 0] = "Unknown";
            DatabaseTypes[DatabaseTypes["Oracle"] = 1] = "Oracle";
            DatabaseTypes[DatabaseTypes["SqlServer"] = 2] = "SqlServer";
            DatabaseTypes[DatabaseTypes["Postgres"] = 3] = "Postgres";
        })(HPTRIM.DatabaseTypes || (HPTRIM.DatabaseTypes = {}));
        var DatabaseTypes = HPTRIM.DatabaseTypes;
        (function (DataEntryPageType) {
            DataEntryPageType[DataEntryPageType["Normal"] = 0] = "Normal";
            DataEntryPageType[DataEntryPageType["Notes"] = 1] = "Notes";
            DataEntryPageType[DataEntryPageType["Access"] = 2] = "Access";
            DataEntryPageType[DataEntryPageType["RecordActions"] = 3] = "RecordActions";
            DataEntryPageType[DataEntryPageType["AddCommunication"] = 4] = "AddCommunication";
            DataEntryPageType[DataEntryPageType["AdditionalFields"] = 5] = "AdditionalFields";
            DataEntryPageType[DataEntryPageType["LocationAddress"] = 6] = "LocationAddress";
            DataEntryPageType[DataEntryPageType["LocationRelationships"] = 7] = "LocationRelationships";
            DataEntryPageType[DataEntryPageType["LocationProfile"] = 8] = "LocationProfile";
            DataEntryPageType[DataEntryPageType["ChildList"] = 9] = "ChildList";
            DataEntryPageType[DataEntryPageType["ActiveDates"] = 10] = "ActiveDates";
            DataEntryPageType[DataEntryPageType["CopiedAccess"] = 11] = "CopiedAccess";
            DataEntryPageType[DataEntryPageType["DocumentReview"] = 12] = "DocumentReview";
        })(HPTRIM.DataEntryPageType || (HPTRIM.DataEntryPageType = {}));
        var DataEntryPageType = HPTRIM.DataEntryPageType;
        (function (DateInterval) {
            DateInterval[DateInterval["Days"] = 0] = "Days";
            DateInterval[DateInterval["Weeks"] = 1] = "Weeks";
            DateInterval[DateInterval["Months"] = 2] = "Months";
            DateInterval[DateInterval["Years"] = 3] = "Years";
        })(HPTRIM.DateInterval || (HPTRIM.DateInterval = {}));
        var DateInterval = HPTRIM.DateInterval;
        (function (DateIntervalSing) {
            DateIntervalSing[DateIntervalSing["Day"] = 0] = "Day";
            DateIntervalSing[DateIntervalSing["Week"] = 1] = "Week";
            DateIntervalSing[DateIntervalSing["Month"] = 2] = "Month";
            DateIntervalSing[DateIntervalSing["Year"] = 3] = "Year";
        })(HPTRIM.DateIntervalSing || (HPTRIM.DateIntervalSing = {}));
        var DateIntervalSing = HPTRIM.DateIntervalSing;
        (function (DateSearchType) {
            DateSearchType[DateSearchType["Date"] = 0] = "Date";
            DateSearchType[DateSearchType["FloatingSingle"] = 1] = "FloatingSingle";
            DateSearchType[DateSearchType["FloatingPlural"] = 2] = "FloatingPlural";
            DateSearchType[DateSearchType["SoFarToDate"] = 3] = "SoFarToDate";
            DateSearchType[DateSearchType["MonthAndOrYear"] = 4] = "MonthAndOrYear";
            DateSearchType[DateSearchType["FinancialYear"] = 5] = "FinancialYear";
            DateSearchType[DateSearchType["String"] = 6] = "String";
        })(HPTRIM.DateSearchType || (HPTRIM.DateSearchType = {}));
        var DateSearchType = HPTRIM.DateSearchType;
        (function (DayOfTheWeek) {
            DayOfTheWeek[DayOfTheWeek["Monday"] = 0] = "Monday";
            DayOfTheWeek[DayOfTheWeek["Tuesday"] = 1] = "Tuesday";
            DayOfTheWeek[DayOfTheWeek["Wednesday"] = 2] = "Wednesday";
            DayOfTheWeek[DayOfTheWeek["Thursday"] = 3] = "Thursday";
            DayOfTheWeek[DayOfTheWeek["Friday"] = 4] = "Friday";
            DayOfTheWeek[DayOfTheWeek["Saturday"] = 5] = "Saturday";
            DayOfTheWeek[DayOfTheWeek["Sunday"] = 6] = "Sunday";
        })(HPTRIM.DayOfTheWeek || (HPTRIM.DayOfTheWeek = {}));
        var DayOfTheWeek = HPTRIM.DayOfTheWeek;
        (function (DblClickContainerStyle) {
            DblClickContainerStyle[DblClickContainerStyle["NavContents"] = 0] = "NavContents";
            DblClickContainerStyle[DblClickContainerStyle["Properties"] = 1] = "Properties";
            DblClickContainerStyle[DblClickContainerStyle["UseSystemOption"] = 2] = "UseSystemOption";
            DblClickContainerStyle[DblClickContainerStyle["NavAllContents"] = 3] = "NavAllContents";
        })(HPTRIM.DblClickContainerStyle || (HPTRIM.DblClickContainerStyle = {}));
        var DblClickContainerStyle = HPTRIM.DblClickContainerStyle;
        (function (DblClickStyle) {
            DblClickStyle[DblClickStyle["Edit"] = 0] = "Edit";
            DblClickStyle[DblClickStyle["View"] = 1] = "View";
            DblClickStyle[DblClickStyle["Properties"] = 2] = "Properties";
            DblClickStyle[DblClickStyle["UseSystemOption"] = 3] = "UseSystemOption";
        })(HPTRIM.DblClickStyle || (HPTRIM.DblClickStyle = {}));
        var DblClickStyle = HPTRIM.DblClickStyle;
        (function (DeclassifyType) {
            DeclassifyType[DeclassifyType["AfterDate"] = 0] = "AfterDate";
            DeclassifyType[DeclassifyType["AfterEvent"] = 1] = "AfterEvent";
            DeclassifyType[DeclassifyType["Exempt"] = 2] = "Exempt";
        })(HPTRIM.DeclassifyType || (HPTRIM.DeclassifyType = {}));
        var DeclassifyType = HPTRIM.DeclassifyType;
        (function (DesktopStartStates) {
            DesktopStartStates[DesktopStartStates["Default"] = 0] = "Default";
            DesktopStartStates[DesktopStartStates["Search"] = 1] = "Search";
            DesktopStartStates[DesktopStartStates["Offline"] = 2] = "Offline";
            DesktopStartStates[DesktopStartStates["RecentDocs"] = 3] = "RecentDocs";
            DesktopStartStates[DesktopStartStates["ClassBrowser"] = 4] = "ClassBrowser";
            DesktopStartStates[DesktopStartStates["FavRecords"] = 5] = "FavRecords";
            DesktopStartStates[DesktopStartStates["Worktray"] = 6] = "Worktray";
            DesktopStartStates[DesktopStartStates["Containers"] = 7] = "Containers";
            DesktopStartStates[DesktopStartStates["Due"] = 8] = "Due";
            DesktopStartStates[DesktopStartStates["In"] = 9] = "In";
            DesktopStartStates[DesktopStartStates["DueOrIn"] = 10] = "DueOrIn";
            DesktopStartStates[DesktopStartStates["ForReferences"] = 11] = "ForReferences";
            DesktopStartStates[DesktopStartStates["Templates"] = 12] = "Templates";
            DesktopStartStates[DesktopStartStates["ContentBlocks"] = 13] = "ContentBlocks";
            DesktopStartStates[DesktopStartStates["Explorer"] = 14] = "Explorer";
        })(HPTRIM.DesktopStartStates || (HPTRIM.DesktopStartStates = {}));
        var DesktopStartStates = HPTRIM.DesktopStartStates;
        (function (DisposalScheduleStatus) {
            DisposalScheduleStatus[DisposalScheduleStatus["Pending"] = 0] = "Pending";
            DisposalScheduleStatus[DisposalScheduleStatus["AlreadyDisposed"] = 1] = "AlreadyDisposed";
            DisposalScheduleStatus[DisposalScheduleStatus["Unspecified"] = 2] = "Unspecified";
            DisposalScheduleStatus[DisposalScheduleStatus["WaitingUntilInactive"] = 3] = "WaitingUntilInactive";
            DisposalScheduleStatus[DisposalScheduleStatus["NoRelevantTriggers"] = 4] = "NoRelevantTriggers";
            DisposalScheduleStatus[DisposalScheduleStatus["WaitingOnTriggerDate"] = 5] = "WaitingOnTriggerDate";
            DisposalScheduleStatus[DisposalScheduleStatus["Scheduled"] = 6] = "Scheduled";
            DisposalScheduleStatus[DisposalScheduleStatus["SetWithoutSchedule"] = 7] = "SetWithoutSchedule";
        })(HPTRIM.DisposalScheduleStatus || (HPTRIM.DisposalScheduleStatus = {}));
        var DisposalScheduleStatus = HPTRIM.DisposalScheduleStatus;
        (function (DisposalType) {
            DisposalType[DisposalType["None"] = 0] = "None";
            DisposalType[DisposalType["Archived"] = 1] = "Archived";
            DisposalType[DisposalType["Transferred"] = 2] = "Transferred";
            DisposalType[DisposalType["Destroyed"] = 3] = "Destroyed";
        })(HPTRIM.DisposalType || (HPTRIM.DisposalType = {}));
        var DisposalType = HPTRIM.DisposalType;
        (function (DocumentLinkType) {
            DocumentLinkType[DocumentLinkType["External"] = 0] = "External";
            DocumentLinkType[DocumentLinkType["Record"] = 1] = "Record";
            DocumentLinkType[DocumentLinkType["StoreId"] = 2] = "StoreId";
        })(HPTRIM.DocumentLinkType || (HPTRIM.DocumentLinkType = {}));
        var DocumentLinkType = HPTRIM.DocumentLinkType;
        (function (DocumentReviewStates) {
            DocumentReviewStates[DocumentReviewStates["None"] = 0] = "None";
            DocumentReviewStates[DocumentReviewStates["Editing"] = 1] = "Editing";
            DocumentReviewStates[DocumentReviewStates["Reviewing"] = 2] = "Reviewing";
            DocumentReviewStates[DocumentReviewStates["Authorizing"] = 3] = "Authorizing";
            DocumentReviewStates[DocumentReviewStates["Finalizing"] = 4] = "Finalizing";
            DocumentReviewStates[DocumentReviewStates["Complete"] = 5] = "Complete";
        })(HPTRIM.DocumentReviewStates || (HPTRIM.DocumentReviewStates = {}));
        var DocumentReviewStates = HPTRIM.DocumentReviewStates;
        (function (DocumentSecurityHandling) {
            DocumentSecurityHandling[DocumentSecurityHandling["Ignore"] = 0] = "Ignore";
            DocumentSecurityHandling[DocumentSecurityHandling["Warn"] = 1] = "Warn";
            DocumentSecurityHandling[DocumentSecurityHandling["Prevent"] = 2] = "Prevent";
            DocumentSecurityHandling[DocumentSecurityHandling["WarnAndUpgradeDoc"] = 3] = "WarnAndUpgradeDoc";
            DocumentSecurityHandling[DocumentSecurityHandling["UpgradeDoc"] = 4] = "UpgradeDoc";
        })(HPTRIM.DocumentSecurityHandling || (HPTRIM.DocumentSecurityHandling = {}));
        var DocumentSecurityHandling = HPTRIM.DocumentSecurityHandling;
        (function (DocumentSelectionType) {
            DocumentSelectionType[DocumentSelectionType["None"] = 0] = "None";
            DocumentSelectionType[DocumentSelectionType["Record"] = 1] = "Record";
            DocumentSelectionType[DocumentSelectionType["OfflineRecord"] = 2] = "OfflineRecord";
            DocumentSelectionType[DocumentSelectionType["Local"] = 3] = "Local";
        })(HPTRIM.DocumentSelectionType || (HPTRIM.DocumentSelectionType = {}));
        var DocumentSelectionType = HPTRIM.DocumentSelectionType;
        (function (DocumentStoreIntegrityCheckCounter) {
            DocumentStoreIntegrityCheckCounter[DocumentStoreIntegrityCheckCounter["DocumentsInStore"] = 0] = "DocumentsInStore";
            DocumentStoreIntegrityCheckCounter[DocumentStoreIntegrityCheckCounter["DocumentsProcessed"] = 1] = "DocumentsProcessed";
            DocumentStoreIntegrityCheckCounter[DocumentStoreIntegrityCheckCounter["AlreadyMissingDocuments"] = 2] = "AlreadyMissingDocuments";
            DocumentStoreIntegrityCheckCounter[DocumentStoreIntegrityCheckCounter["MissingDocuments"] = 3] = "MissingDocuments";
            DocumentStoreIntegrityCheckCounter[DocumentStoreIntegrityCheckCounter["CorruptedDocuments"] = 4] = "CorruptedDocuments";
            DocumentStoreIntegrityCheckCounter[DocumentStoreIntegrityCheckCounter["DocumentsWithNoError"] = 5] = "DocumentsWithNoError";
            DocumentStoreIntegrityCheckCounter[DocumentStoreIntegrityCheckCounter["MissingDocumentsFixedByRestoringBackup"] = 6] = "MissingDocumentsFixedByRestoringBackup";
            DocumentStoreIntegrityCheckCounter[DocumentStoreIntegrityCheckCounter["MissingDocumentsFixedByFlaggingAsMissing"] = 7] = "MissingDocumentsFixedByFlaggingAsMissing";
            DocumentStoreIntegrityCheckCounter[DocumentStoreIntegrityCheckCounter["CorruptedDocumentsFixedByRestoringBackup"] = 8] = "CorruptedDocumentsFixedByRestoringBackup";
            DocumentStoreIntegrityCheckCounter[DocumentStoreIntegrityCheckCounter["CorruptedDocumentsFixed"] = 9] = "CorruptedDocumentsFixed";
            DocumentStoreIntegrityCheckCounter[DocumentStoreIntegrityCheckCounter["DocumentsWithBlankHashCorrected"] = 10] = "DocumentsWithBlankHashCorrected";
            DocumentStoreIntegrityCheckCounter[DocumentStoreIntegrityCheckCounter["DocumentsDuplicated"] = 11] = "DocumentsDuplicated";
            DocumentStoreIntegrityCheckCounter[DocumentStoreIntegrityCheckCounter["CorruptedReferenceCount"] = 12] = "CorruptedReferenceCount";
            DocumentStoreIntegrityCheckCounter[DocumentStoreIntegrityCheckCounter["CorruptedReferenceCountFixed"] = 13] = "CorruptedReferenceCountFixed";
        })(HPTRIM.DocumentStoreIntegrityCheckCounter || (HPTRIM.DocumentStoreIntegrityCheckCounter = {}));
        var DocumentStoreIntegrityCheckCounter = HPTRIM.DocumentStoreIntegrityCheckCounter;
        (function (DocumentUpdateStyles) {
            DocumentUpdateStyles[DocumentUpdateStyles["NoAction"] = 0] = "NoAction";
            DocumentUpdateStyles[DocumentUpdateStyles["Delete"] = 1] = "Delete";
            DocumentUpdateStyles[DocumentUpdateStyles["KeepCheckedOut"] = 2] = "KeepCheckedOut";
            DocumentUpdateStyles[DocumentUpdateStyles["NotApplicable"] = 3] = "NotApplicable";
        })(HPTRIM.DocumentUpdateStyles || (HPTRIM.DocumentUpdateStyles = {}));
        var DocumentUpdateStyles = HPTRIM.DocumentUpdateStyles;
        (function (DuplicateEmailOptions) {
            DuplicateEmailOptions[DuplicateEmailOptions["CreateDuplicate"] = 0] = "CreateDuplicate";
            DuplicateEmailOptions[DuplicateEmailOptions["SetAlternateContainer"] = 1] = "SetAlternateContainer";
            DuplicateEmailOptions[DuplicateEmailOptions["Cancel"] = 2] = "Cancel";
        })(HPTRIM.DuplicateEmailOptions || (HPTRIM.DuplicateEmailOptions = {}));
        var DuplicateEmailOptions = HPTRIM.DuplicateEmailOptions;
        (function (EAddressType) {
            EAddressType[EAddressType["Mail"] = 0] = "Mail";
            EAddressType[EAddressType["Url"] = 1] = "Url";
            EAddressType[EAddressType["Rdn"] = 2] = "Rdn";
            EAddressType[EAddressType["Image"] = 3] = "Image";
            EAddressType[EAddressType["Signature"] = 4] = "Signature";
            EAddressType[EAddressType["Other"] = 5] = "Other";
        })(HPTRIM.EAddressType || (HPTRIM.EAddressType = {}));
        var EAddressType = HPTRIM.EAddressType;
        (function (EditNotesStyle) {
            EditNotesStyle[EditNotesStyle["ReadOnly"] = 0] = "ReadOnly";
            EditNotesStyle[EditNotesStyle["ExtendOnly"] = 1] = "ExtendOnly";
            EditNotesStyle[EditNotesStyle["FullEdit"] = 2] = "FullEdit";
        })(HPTRIM.EditNotesStyle || (HPTRIM.EditNotesStyle = {}));
        var EditNotesStyle = HPTRIM.EditNotesStyle;
        (function (EmailSecurityMode) {
            EmailSecurityMode[EmailSecurityMode["Disabled"] = 0] = "Disabled";
            EmailSecurityMode[EmailSecurityMode["LevelOnlyPrefix"] = 1] = "LevelOnlyPrefix";
            EmailSecurityMode[EmailSecurityMode["LevelAndCaveatsPrefix"] = 2] = "LevelAndCaveatsPrefix";
            EmailSecurityMode[EmailSecurityMode["LevelOnlySuffix"] = 3] = "LevelOnlySuffix";
            EmailSecurityMode[EmailSecurityMode["LevelAndCaveatsSuffix"] = 4] = "LevelAndCaveatsSuffix";
        })(HPTRIM.EmailSecurityMode || (HPTRIM.EmailSecurityMode = {}));
        var EmailSecurityMode = HPTRIM.EmailSecurityMode;
        (function (EmailUpdateStyles) {
            EmailUpdateStyles[EmailUpdateStyles["NoAction"] = 0] = "NoAction";
            EmailUpdateStyles[EmailUpdateStyles["Delete"] = 1] = "Delete";
            EmailUpdateStyles[EmailUpdateStyles["UpdateMail"] = 2] = "UpdateMail";
            EmailUpdateStyles[EmailUpdateStyles["NotApplicable"] = 3] = "NotApplicable";
        })(HPTRIM.EmailUpdateStyles || (HPTRIM.EmailUpdateStyles = {}));
        var EmailUpdateStyles = HPTRIM.EmailUpdateStyles;
        (function (EncryptionAlgorithm) {
            EncryptionAlgorithm[EncryptionAlgorithm["None"] = 0] = "None";
            EncryptionAlgorithm[EncryptionAlgorithm["RC4"] = 1] = "RC4";
            EncryptionAlgorithm[EncryptionAlgorithm["AES256"] = 2] = "AES256";
        })(HPTRIM.EncryptionAlgorithm || (HPTRIM.EncryptionAlgorithm = {}));
        var EncryptionAlgorithm = HPTRIM.EncryptionAlgorithm;
        (function (Environments) {
            Environments[Environments["Unknown"] = 0] = "Unknown";
            Environments[Environments["Trim"] = 1] = "Trim";
            Environments[Environments["BulkLoader"] = 2] = "BulkLoader";
            Environments[Environments["Odma"] = 3] = "Odma";
            Environments[Environments["OtherAuthoringApp"] = 4] = "OtherAuthoringApp";
            Environments[Environments["Outlook"] = 5] = "Outlook";
            Environments[Environments["OtherMailApp"] = 6] = "OtherMailApp";
            Environments[Environments["TrimDesktop"] = 7] = "TrimDesktop";
            Environments[Environments["LotusNotes"] = 8] = "LotusNotes";
            Environments[Environments["EnterpriseStudio"] = 9] = "EnterpriseStudio";
            Environments[Environments["OfficeNET"] = 10] = "OfficeNET";
            Environments[Environments["WebServer"] = 11] = "WebServer";
            Environments[Environments["SharePointIntegration"] = 12] = "SharePointIntegration";
        })(HPTRIM.Environments || (HPTRIM.Environments = {}));
        var Environments = HPTRIM.Environments;
        (function (EsoActionType) {
            EsoActionType[EsoActionType["MoveToStore"] = 0] = "MoveToStore";
            EsoActionType[EsoActionType["MoveToTier2"] = 1] = "MoveToTier2";
            EsoActionType[EsoActionType["MoveToTier3"] = 2] = "MoveToTier3";
        })(HPTRIM.EsoActionType || (HPTRIM.EsoActionType = {}));
        var EsoActionType = HPTRIM.EsoActionType;
        (function (EsoDateType) {
            EsoDateType[EsoDateType["DateClosed"] = 0] = "DateClosed";
            EsoDateType[EsoDateType["DateInactive"] = 1] = "DateInactive";
            EsoDateType[EsoDateType["DateLastAction"] = 2] = "DateLastAction";
            EsoDateType[EsoDateType["DateFinalized"] = 3] = "DateFinalized";
            EsoDateType[EsoDateType["DatePublished"] = 4] = "DatePublished";
            EsoDateType[EsoDateType["DateUpdated"] = 5] = "DateUpdated";
            EsoDateType[EsoDateType["DateModified"] = 6] = "DateModified";
            EsoDateType[EsoDateType["DateLastAccessed"] = 7] = "DateLastAccessed";
        })(HPTRIM.EsoDateType || (HPTRIM.EsoDateType = {}));
        var EsoDateType = HPTRIM.EsoDateType;
        (function (EstoreTypes) {
            EstoreTypes[EstoreTypes["FsDirectory"] = 0] = "FsDirectory";
            EstoreTypes[EstoreTypes["External"] = 1] = "External";
            EstoreTypes[EstoreTypes["Mip"] = 2] = "Mip";
            EstoreTypes[EstoreTypes["Centera"] = 3] = "Centera";
            EstoreTypes[EstoreTypes["Icas"] = 4] = "Icas";
            EstoreTypes[EstoreTypes["Amazon"] = 5] = "Amazon";
            EstoreTypes[EstoreTypes["Azure"] = 6] = "Azure";
            EstoreTypes[EstoreTypes["Isilon"] = 7] = "Isilon";
        })(HPTRIM.EstoreTypes || (HPTRIM.EstoreTypes = {}));
        var EstoreTypes = HPTRIM.EstoreTypes;
        (function (EventProcessorStatus) {
            EventProcessorStatus[EventProcessorStatus["Ignored"] = 0] = "Ignored";
            EventProcessorStatus[EventProcessorStatus["Processing"] = 1] = "Processing";
            EventProcessorStatus[EventProcessorStatus["Suspended"] = 2] = "Suspended";
        })(HPTRIM.EventProcessorStatus || (HPTRIM.EventProcessorStatus = {}));
        var EventProcessorStatus = HPTRIM.EventProcessorStatus;
        (function (EventProcessType) {
            EventProcessType[EventProcessType["ContentIndex"] = 0] = "ContentIndex";
            EventProcessType[EventProcessType["AuditLog"] = 1] = "AuditLog";
            EventProcessType[EventProcessType["SystemMonitor"] = 2] = "SystemMonitor";
            EventProcessType[EventProcessType["MailNotification"] = 3] = "MailNotification";
            EventProcessType[EventProcessType["ScheduleTriggers"] = 4] = "ScheduleTriggers";
            EventProcessType[EventProcessType["UserDefined"] = 5] = "UserDefined";
            EventProcessType[EventProcessType["WordIndexing"] = 6] = "WordIndexing";
            EventProcessType[EventProcessType["AutoPartCreator"] = 7] = "AutoPartCreator";
            EventProcessType[EventProcessType["Subscriptions"] = 8] = "Subscriptions";
            EventProcessType[EventProcessType["Sharepoint"] = 9] = "Sharepoint";
            EventProcessType[EventProcessType["EventStatistics"] = 10] = "EventStatistics";
            EventProcessType[EventProcessType["StoreEventHandler"] = 11] = "StoreEventHandler";
            EventProcessType[EventProcessType["AutoClassify"] = 12] = "AutoClassify";
            EventProcessType[EventProcessType["InactiveRecords"] = 13] = "InactiveRecords";
            EventProcessType[EventProcessType["LdapSync"] = 14] = "LdapSync";
            EventProcessType[EventProcessType["RenderPDF"] = 15] = "RenderPDF";
            EventProcessType[EventProcessType["RenderPDFAuto"] = 16] = "RenderPDFAuto";
            EventProcessType[EventProcessType["RenderOCR"] = 17] = "RenderOCR";
            EventProcessType[EventProcessType["RenderSignedCopy"] = 18] = "RenderSignedCopy";
            EventProcessType[EventProcessType["RecordRecycle"] = 19] = "RecordRecycle";
        })(HPTRIM.EventProcessType || (HPTRIM.EventProcessType = {}));
        var EventProcessType = HPTRIM.EventProcessType;
        (function (Events) {
            Events[Events["ObjectAdded"] = 0] = "ObjectAdded";
            Events[Events["ObjectModified"] = 1] = "ObjectModified";
            Events[Events["ObjectRemoved"] = 2] = "ObjectRemoved";
            Events[Events["SecurityChanged"] = 3] = "SecurityChanged";
            Events[Events["AccessControlChanged"] = 4] = "AccessControlChanged";
            Events[Events["ConsignmentIssueResolved"] = 5] = "ConsignmentIssueResolved";
            Events[Events["ConsignmentApprovalComplete"] = 6] = "ConsignmentApprovalComplete";
            Events[Events["ConsignmentRecordRejected"] = 7] = "ConsignmentRecordRejected";
            Events[Events["ConsignmentReadyForApproval"] = 8] = "ConsignmentReadyForApproval";
            Events[Events["ConsignmentDisposed"] = 9] = "ConsignmentDisposed";
            Events[Events["ConsignmentRecordExcluded"] = 10] = "ConsignmentRecordExcluded";
            Events[Events["SignatureCreated"] = 11] = "SignatureCreated";
            Events[Events["SignatureAttached"] = 12] = "SignatureAttached";
            Events[Events["SignatureVerified"] = 13] = "SignatureVerified";
            Events[Events["SignatureFailVerify"] = 14] = "SignatureFailVerify";
            Events[Events["ConsignmentRejected"] = 15] = "ConsignmentRejected";
            Events[Events["ActivityCompleted"] = 16] = "ActivityCompleted";
            Events[Events["ActivityAssigned"] = 17] = "ActivityAssigned";
            Events[Events["ActivityReassigned"] = 18] = "ActivityReassigned";
            Events[Events["ActivityUndone"] = 19] = "ActivityUndone";
            Events[Events["ActivityCurrent"] = 20] = "ActivityCurrent";
            Events[Events["TriggersChanged"] = 21] = "TriggersChanged";
            Events[Events["RecalcDispEvents"] = 22] = "RecalcDispEvents";
            Events[Events["BreachDetected"] = 23] = "BreachDetected";
            Events[Events["EstoreNearingCapacity"] = 24] = "EstoreNearingCapacity";
            Events[Events["EstoreFull"] = 25] = "EstoreFull";
            Events[Events["UserLogon"] = 26] = "UserLogon";
            Events[Events["UserLogoff"] = 27] = "UserLogoff";
            Events[Events["UserLogonFailed"] = 28] = "UserLogonFailed";
            Events[Events["ActionCompleted"] = 29] = "ActionCompleted";
            Events[Events["ActionAssigned"] = 30] = "ActionAssigned";
            Events[Events["ActionReassigned"] = 31] = "ActionReassigned";
            Events[Events["ActionUndone"] = 32] = "ActionUndone";
            Events[Events["ActionCurrent"] = 33] = "ActionCurrent";
            Events[Events["UserLogonImpersonation"] = 34] = "UserLogonImpersonation";
            Events[Events["UserLogonImpersonationFailed"] = 35] = "UserLogonImpersonationFailed";
            Events[Events["RecordIdChanged"] = 36] = "RecordIdChanged";
            Events[Events["ContainerChanged"] = 37] = "ContainerChanged";
            Events[Events["CurLocChanged"] = 38] = "CurLocChanged";
            Events[Events["RecNotesChanged"] = 39] = "RecNotesChanged";
            Events[Events["CreateDateChanged"] = 40] = "CreateDateChanged";
            Events[Events["TitleChanged"] = 41] = "TitleChanged";
            Events[Events["RecSchChanged"] = 42] = "RecSchChanged";
            Events[Events["HomeChanged"] = 43] = "HomeChanged";
            Events[Events["OwnerChanged"] = 44] = "OwnerChanged";
            Events[Events["ContactAdded"] = 45] = "ContactAdded";
            Events[Events["ContactRemoved"] = 46] = "ContactRemoved";
            Events[Events["DispositionChanged"] = 47] = "DispositionChanged";
            Events[Events["ScheduleReviewed"] = 48] = "ScheduleReviewed";
            Events[Events["MadeVital"] = 49] = "MadeVital";
            Events[Events["MadeNotVital"] = 50] = "MadeNotVital";
            Events[Events["HoldAdded"] = 51] = "HoldAdded";
            Events[Events["HoldRemoved"] = 52] = "HoldRemoved";
            Events[Events["ExternalEvent"] = 53] = "ExternalEvent";
            Events[Events["RecordExported"] = 54] = "RecordExported";
            Events[Events["AuditSettingsChanged"] = 55] = "AuditSettingsChanged";
            Events[Events["ClassificationChanged"] = 56] = "ClassificationChanged";
            Events[Events["Finalized"] = 57] = "Finalized";
            Events[Events["Unfinalized"] = 58] = "Unfinalized";
            Events[Events["CloseDateChanged"] = 59] = "CloseDateChanged";
            Events[Events["UdfChanged"] = 60] = "UdfChanged";
            Events[Events["ClassificationApproved"] = 61] = "ClassificationApproved";
            Events[Events["RecordRelationshipAdded"] = 62] = "RecordRelationshipAdded";
            Events[Events["RecordRelationshipRemoved"] = 63] = "RecordRelationshipRemoved";
            Events[Events["CsDeclassifyChanged"] = 64] = "CsDeclassifyChanged";
            Events[Events["CsDowngradeChanged"] = 65] = "CsDowngradeChanged";
            Events[Events["ContentIndexAdd"] = 66] = "ContentIndexAdd";
            Events[Events["ContentIndexRemove"] = 67] = "ContentIndexRemove";
            Events[Events["FileTypesModified"] = 68] = "FileTypesModified";
            Events[Events["ReindexWords"] = 69] = "ReindexWords";
            Events[Events["ReindexExtra"] = 70] = "ReindexExtra";
            Events[Events["ReindexField"] = 71] = "ReindexField";
            Events[Events["RegDateChanged"] = 72] = "RegDateChanged";
            Events[Events["DueDateChanged"] = 73] = "DueDateChanged";
            Events[Events["DatePublishedChanged"] = 74] = "DatePublishedChanged";
            Events[Events["DateInactiveChanged"] = 75] = "DateInactiveChanged";
            Events[Events["DateLastActionChanged"] = 76] = "DateLastActionChanged";
            Events[Events["DateDestructionChanged"] = 77] = "DateDestructionChanged";
            Events[Events["DateRetentionChanged"] = 78] = "DateRetentionChanged";
            Events[Events["AgendaNowReady"] = 79] = "AgendaNowReady";
            Events[Events["MinutesNowReady"] = 80] = "MinutesNowReady";
            Events[Events["ActivitySkipped"] = 81] = "ActivitySkipped";
            Events[Events["RecordSuperseded"] = 82] = "RecordSuperseded";
            Events[Events["ActivityNeedsAuthorization"] = 83] = "ActivityNeedsAuthorization";
            Events[Events["AgendaItemApproved"] = 84] = "AgendaItemApproved";
            Events[Events["AgendaItemRescheduled"] = 85] = "AgendaItemRescheduled";
            Events[Events["TodoItemReassigned"] = 86] = "TodoItemReassigned";
            Events[Events["TodoItemCompleted"] = 87] = "TodoItemCompleted";
            Events[Events["ContentAdded"] = 88] = "ContentAdded";
            Events[Events["ContentRemoved"] = 89] = "ContentRemoved";
            Events[Events["SharePointLinkRemoved"] = 90] = "SharePointLinkRemoved";
            Events[Events["AutoPartCheck"] = 91] = "AutoPartCheck";
            Events[Events["IdolMetadataSchemaChanged"] = 92] = "IdolMetadataSchemaChanged";
            Events[Events["IdolMetadataChanged"] = 93] = "IdolMetadataChanged";
            Events[Events["IdolMetadataContainerSecurityChanged"] = 94] = "IdolMetadataContainerSecurityChanged";
            Events[Events["IdolMetadataUserHierarchyChanged"] = 95] = "IdolMetadataUserHierarchyChanged";
            Events[Events["DataCleanup"] = 96] = "DataCleanup";
            Events[Events["RecordWebPublished"] = 97] = "RecordWebPublished";
            Events[Events["DocViewed"] = 98] = "DocViewed";
            Events[Events["DocCheckedOut"] = 99] = "DocCheckedOut";
            Events[Events["DocExtracted"] = 100] = "DocExtracted";
            Events[Events["DocReplaced"] = 101] = "DocReplaced";
            Events[Events["DocNewVersion"] = 102] = "DocNewVersion";
            Events[Events["DocUndoCheckout"] = 103] = "DocUndoCheckout";
            Events[Events["DocRemoved"] = 104] = "DocRemoved";
            Events[Events["DocAttached"] = 105] = "DocAttached";
            Events[Events["DocPublished"] = 106] = "DocPublished";
            Events[Events["DocPrinted"] = 107] = "DocPrinted";
            Events[Events["DocExportedToXML"] = 108] = "DocExportedToXML";
            Events[Events["DocRenditionAdded"] = 109] = "DocRenditionAdded";
            Events[Events["DocRenditionExtracted"] = 110] = "DocRenditionExtracted";
            Events[Events["DocRenditionPrinted"] = 111] = "DocRenditionPrinted";
            Events[Events["DocRenditionViewed"] = 112] = "DocRenditionViewed";
            Events[Events["DocRevisionExtracted"] = 113] = "DocRevisionExtracted";
            Events[Events["DocRevisionPrinted"] = 114] = "DocRevisionPrinted";
            Events[Events["DocRevisionViewed"] = 115] = "DocRevisionViewed";
            Events[Events["DocRevisionRemoved"] = 116] = "DocRevisionRemoved";
            Events[Events["DocLinkExtracted"] = 117] = "DocLinkExtracted";
            Events[Events["DocLinkPrinted"] = 118] = "DocLinkPrinted";
            Events[Events["DocLinkViewed"] = 119] = "DocLinkViewed";
            Events[Events["DocMailed"] = 120] = "DocMailed";
            Events[Events["DocMailedLink"] = 121] = "DocMailedLink";
            Events[Events["DocAnnotated"] = 122] = "DocAnnotated";
            Events[Events["DocNotAnnotated"] = 123] = "DocNotAnnotated";
            Events[Events["DocRedacted"] = 124] = "DocRedacted";
            Events[Events["CopiedAccessControlChanged"] = 125] = "CopiedAccessControlChanged";
            Events[Events["StorageTransferred"] = 126] = "StorageTransferred";
            Events[Events["StorageTransferredInPlace"] = 127] = "StorageTransferredInPlace";
            Events[Events["DocRenditionRemoved"] = 128] = "DocRenditionRemoved";
            Events[Events["CurLocAssigned"] = 129] = "CurLocAssigned";
            Events[Events["HomeAssigned"] = 130] = "HomeAssigned";
            Events[Events["OwnerAssigned"] = 131] = "OwnerAssigned";
            Events[Events["AccessExclusionsChanged"] = 132] = "AccessExclusionsChanged";
            Events[Events["HoldDatesChanged"] = 133] = "HoldDatesChanged";
            Events[Events["NewInstantOnUser"] = 134] = "NewInstantOnUser";
            Events[Events["RecordCopied"] = 135] = "RecordCopied";
            Events[Events["CaveatRemoved"] = 136] = "CaveatRemoved";
            Events[Events["SpiViewed"] = 137] = "SpiViewed";
            Events[Events["SpiEdited"] = 138] = "SpiEdited";
            Events[Events["SpiManaged"] = 139] = "SpiManaged";
            Events[Events["SpiRelocated"] = 140] = "SpiRelocated";
            Events[Events["SpiExposed"] = 141] = "SpiExposed";
            Events[Events["DocumentReadyForDrafting"] = 142] = "DocumentReadyForDrafting";
            Events[Events["DocumentReadyForReview"] = 143] = "DocumentReadyForReview";
            Events[Events["DocumentReadyForAuthorization"] = 144] = "DocumentReadyForAuthorization";
            Events[Events["DocumentReviewCommentsUpdated"] = 145] = "DocumentReviewCommentsUpdated";
            Events[Events["DocumentReviewComplete"] = 146] = "DocumentReviewComplete";
            Events[Events["DocumentAuthorizationComplete"] = 147] = "DocumentAuthorizationComplete";
            Events[Events["SignedRenditionPromoted"] = 148] = "SignedRenditionPromoted";
            Events[Events["DocusignFailed"] = 149] = "DocusignFailed";
            Events[Events["DataConversionCompleted"] = 150] = "DataConversionCompleted";
            Events[Events["ScheduleReplaced"] = 151] = "ScheduleReplaced";
            Events[Events["DirSyncConfigChanged"] = 152] = "DirSyncConfigChanged";
            Events[Events["HighPriorityRequestAdded"] = 153] = "HighPriorityRequestAdded";
            Events[Events["StorageExpiryDateExtended"] = 154] = "StorageExpiryDateExtended";
            Events[Events["UpdateStorageMetadata"] = 155] = "UpdateStorageMetadata";
            Events[Events["BulkLoaderRunComplete"] = 156] = "BulkLoaderRunComplete";
            Events[Events["ConsignmentRecordRejectionCancelled"] = 157] = "ConsignmentRecordRejectionCancelled";
            Events[Events["ConsignmentApprovalReset"] = 158] = "ConsignmentApprovalReset";
            Events[Events["ConsignmentApproved"] = 159] = "ConsignmentApproved";
            Events[Events["AddStoreMetadata"] = 160] = "AddStoreMetadata";
            Events[Events["DocumentHashVerified"] = 161] = "DocumentHashVerified";
            Events[Events["DocumentHashCheckFailed"] = 162] = "DocumentHashCheckFailed";
            Events[Events["DocumentHashAdded"] = 163] = "DocumentHashAdded";
            Events[Events["DocumentHashRecalculated"] = 164] = "DocumentHashRecalculated";
            Events[Events["LabelAdded"] = 165] = "LabelAdded";
            Events[Events["LabelRemoved"] = 166] = "LabelRemoved";
            Events[Events["ActivityEscalated"] = 167] = "ActivityEscalated";
            Events[Events["ActivitySuspended"] = 168] = "ActivitySuspended";
            Events[Events["SearchExecuted"] = 169] = "SearchExecuted";
            Events[Events["ConsignmentApproverReassigned"] = 170] = "ConsignmentApproverReassigned";
            Events[Events["FolderShared"] = 171] = "FolderShared";
            Events[Events["DocumentShared"] = 172] = "DocumentShared";
            Events[Events["NewArchiveEventOccurrence"] = 173] = "NewArchiveEventOccurrence";
            Events[Events["GlobalSettingsChanged"] = 174] = "GlobalSettingsChanged";
            Events[Events["TimerElapsed"] = 175] = "TimerElapsed";
            Events[Events["LoginDeactivated"] = 176] = "LoginDeactivated";
            Events[Events["LocationRelationshipAdded"] = 177] = "LocationRelationshipAdded";
            Events[Events["LocationRelationshipRemoved"] = 178] = "LocationRelationshipRemoved";
            Events[Events["RecordRecycled"] = 179] = "RecordRecycled";
            Events[Events["RecordRestored"] = 180] = "RecordRestored";
            Events[Events["ActionRemoved"] = 181] = "ActionRemoved";
            Events[Events["PermissionsChanged"] = 182] = "PermissionsChanged";
            Events[Events["BypassACLAdded"] = 183] = "BypassACLAdded";
        })(HPTRIM.Events || (HPTRIM.Events = {}));
        var Events = HPTRIM.Events;
        (function (Excel11FileTypes) {
            Excel11FileTypes[Excel11FileTypes["Excel2003_xls"] = 0] = "Excel2003_xls";
            Excel11FileTypes[Excel11FileTypes["Excel2003Tmpl_xlt"] = 1] = "Excel2003Tmpl_xlt";
        })(HPTRIM.Excel11FileTypes || (HPTRIM.Excel11FileTypes = {}));
        var Excel11FileTypes = HPTRIM.Excel11FileTypes;
        (function (ExcelFileTypes) {
            ExcelFileTypes[ExcelFileTypes["Excel_xlsx"] = 0] = "Excel_xlsx";
            ExcelFileTypes[ExcelFileTypes["ExcelMe_xlsm"] = 1] = "ExcelMe_xlsm";
            ExcelFileTypes[ExcelFileTypes["ExcelBinary_xlsb"] = 2] = "ExcelBinary_xlsb";
            ExcelFileTypes[ExcelFileTypes["Excel97_xls"] = 3] = "Excel97_xls";
            ExcelFileTypes[ExcelFileTypes["ExcelTmpl_xltx"] = 4] = "ExcelTmpl_xltx";
            ExcelFileTypes[ExcelFileTypes["ExcelTmplMe_xltm"] = 5] = "ExcelTmplMe_xltm";
            ExcelFileTypes[ExcelFileTypes["Excel97Tmpl_xlt"] = 6] = "Excel97Tmpl_xlt";
            ExcelFileTypes[ExcelFileTypes["ExcelCSV_csv"] = 7] = "ExcelCSV_csv";
            ExcelFileTypes[ExcelFileTypes["ExcelCSVMac_csv"] = 8] = "ExcelCSVMac_csv";
            ExcelFileTypes[ExcelFileTypes["ExcelCSVDOS_csv"] = 9] = "ExcelCSVDOS_csv";
            ExcelFileTypes[ExcelFileTypes["ExcelODS_ods"] = 10] = "ExcelODS_ods";
        })(HPTRIM.ExcelFileTypes || (HPTRIM.ExcelFileTypes = {}));
        var ExcelFileTypes = HPTRIM.ExcelFileTypes;
        (function (ExcelOpenFileTypes) {
            ExcelOpenFileTypes[ExcelOpenFileTypes["AllRecords"] = 0] = "AllRecords";
            ExcelOpenFileTypes[ExcelOpenFileTypes["AllFiles"] = 1] = "AllFiles";
            ExcelOpenFileTypes[ExcelOpenFileTypes["AllExcelFiles"] = 2] = "AllExcelFiles";
            ExcelOpenFileTypes[ExcelOpenFileTypes["ExcelFiles"] = 3] = "ExcelFiles";
            ExcelOpenFileTypes[ExcelOpenFileTypes["Excel97Files"] = 4] = "Excel97Files";
            ExcelOpenFileTypes[ExcelOpenFileTypes["AllexcelTmpl"] = 5] = "AllexcelTmpl";
            ExcelOpenFileTypes[ExcelOpenFileTypes["ExcelMacroTmpls"] = 6] = "ExcelMacroTmpls";
            ExcelOpenFileTypes[ExcelOpenFileTypes["Excel97Tmpls"] = 7] = "Excel97Tmpls";
            ExcelOpenFileTypes[ExcelOpenFileTypes["Other"] = 8] = "Other";
        })(HPTRIM.ExcelOpenFileTypes || (HPTRIM.ExcelOpenFileTypes = {}));
        var ExcelOpenFileTypes = HPTRIM.ExcelOpenFileTypes;
        (function (ExternalWorkflowTypePurposes) {
            ExternalWorkflowTypePurposes[ExternalWorkflowTypePurposes["Start"] = 0] = "Start";
            ExternalWorkflowTypePurposes[ExternalWorkflowTypePurposes["Initiate"] = 1] = "Initiate";
            ExternalWorkflowTypePurposes[ExternalWorkflowTypePurposes["Search"] = 2] = "Search";
            ExternalWorkflowTypePurposes[ExternalWorkflowTypePurposes["Maintain"] = 3] = "Maintain";
        })(HPTRIM.ExternalWorkflowTypePurposes || (HPTRIM.ExternalWorkflowTypePurposes = {}));
        var ExternalWorkflowTypePurposes = HPTRIM.ExternalWorkflowTypePurposes;
        (function (FavoriteType) {
            FavoriteType[FavoriteType["Favorites"] = 0] = "Favorites";
            FavoriteType[FavoriteType["Worktray"] = 1] = "Worktray";
            FavoriteType[FavoriteType["Documents"] = 2] = "Documents";
            FavoriteType[FavoriteType["Containers"] = 3] = "Containers";
            FavoriteType[FavoriteType["Templates"] = 4] = "Templates";
            FavoriteType[FavoriteType["ContentBlocks"] = 5] = "ContentBlocks";
        })(HPTRIM.FavoriteType || (HPTRIM.FavoriteType = {}));
        var FavoriteType = HPTRIM.FavoriteType;
        (function (FeatureState) {
            FeatureState[FeatureState["Active"] = 0] = "Active";
            FeatureState[FeatureState["Inactive"] = 1] = "Inactive";
            FeatureState[FeatureState["NeedsUpgrade"] = 2] = "NeedsUpgrade";
            FeatureState[FeatureState["Unlicensed"] = 3] = "Unlicensed";
        })(HPTRIM.FeatureState || (HPTRIM.FeatureState = {}));
        var FeatureState = HPTRIM.FeatureState;
        (function (FieldAccess) {
            FieldAccess[FieldAccess["ViewValue"] = 0] = "ViewValue";
            FieldAccess[FieldAccess["ModifyValue"] = 1] = "ModifyValue";
        })(HPTRIM.FieldAccess || (HPTRIM.FieldAccess = {}));
        var FieldAccess = HPTRIM.FieldAccess;
        (function (FieldPurposeType) {
            FieldPurposeType[FieldPurposeType["UseItem"] = 0] = "UseItem";
            FieldPurposeType[FieldPurposeType["SearchByItem"] = 1] = "SearchByItem";
            FieldPurposeType[FieldPurposeType["MaintainItem"] = 2] = "MaintainItem";
            FieldPurposeType[FieldPurposeType["ScheduleTriggerDate"] = 3] = "ScheduleTriggerDate";
        })(HPTRIM.FieldPurposeType || (HPTRIM.FieldPurposeType = {}));
        var FieldPurposeType = HPTRIM.FieldPurposeType;
        (function (FileSizeUnits) {
            FileSizeUnits[FileSizeUnits["Bytes"] = 0] = "Bytes";
            FileSizeUnits[FileSizeUnits["Kilobytes"] = 1] = "Kilobytes";
            FileSizeUnits[FileSizeUnits["Megabytes"] = 2] = "Megabytes";
            FileSizeUnits[FileSizeUnits["Gigabytes"] = 3] = "Gigabytes";
            FileSizeUnits[FileSizeUnits["Terabytes"] = 4] = "Terabytes";
        })(HPTRIM.FileSizeUnits || (HPTRIM.FileSizeUnits = {}));
        var FileSizeUnits = HPTRIM.FileSizeUnits;
        (function (FinalizedFilter) {
            FinalizedFilter[FinalizedFilter["Both"] = 0] = "Both";
            FinalizedFilter[FinalizedFilter["FinalizedOnly"] = 1] = "FinalizedOnly";
            FinalizedFilter[FinalizedFilter["UnfinalizedOnly"] = 2] = "UnfinalizedOnly";
        })(HPTRIM.FinalizedFilter || (HPTRIM.FinalizedFilter = {}));
        var FinalizedFilter = HPTRIM.FinalizedFilter;
        (function (FlowControl) {
            FlowControl[FlowControl["None"] = 0] = "None";
            FlowControl[FlowControl["XonXoff"] = 1] = "XonXoff";
            FlowControl[FlowControl["RTS"] = 2] = "RTS";
            FlowControl[FlowControl["RTSXon"] = 3] = "RTSXon";
        })(HPTRIM.FlowControl || (HPTRIM.FlowControl = {}));
        var FlowControl = HPTRIM.FlowControl;
        (function (FontStyle) {
            FontStyle[FontStyle["Regular"] = 0] = "Regular";
            FontStyle[FontStyle["Italic"] = 1] = "Italic";
            FontStyle[FontStyle["Bold"] = 2] = "Bold";
            FontStyle[FontStyle["BoldItalic"] = 3] = "BoldItalic";
        })(HPTRIM.FontStyle || (HPTRIM.FontStyle = {}));
        var FontStyle = HPTRIM.FontStyle;
        (function (FrameAppearance) {
            FrameAppearance[FrameAppearance["Standard"] = 0] = "Standard";
        })(HPTRIM.FrameAppearance || (HPTRIM.FrameAppearance = {}));
        var FrameAppearance = HPTRIM.FrameAppearance;
        (function (Gender) {
            Gender[Gender["Unknown"] = 0] = "Unknown";
            Gender[Gender["Male"] = 1] = "Male";
            Gender[Gender["Female"] = 2] = "Female";
            Gender[Gender["Custom1"] = 3] = "Custom1";
            Gender[Gender["Custom2"] = 4] = "Custom2";
            Gender[Gender["Custom3"] = 5] = "Custom3";
            Gender[Gender["Custom4"] = 6] = "Custom4";
            Gender[Gender["Custom5"] = 7] = "Custom5";
            Gender[Gender["Custom6"] = 8] = "Custom6";
            Gender[Gender["Unspecified"] = 9] = "Unspecified";
        })(HPTRIM.Gender || (HPTRIM.Gender = {}));
        var Gender = HPTRIM.Gender;
        (function (GenderSalutation) {
            GenderSalutation[GenderSalutation["Unknown"] = 0] = "Unknown";
            GenderSalutation[GenderSalutation["Male"] = 1] = "Male";
            GenderSalutation[GenderSalutation["Female"] = 2] = "Female";
            GenderSalutation[GenderSalutation["Custom1"] = 3] = "Custom1";
            GenderSalutation[GenderSalutation["Custom2"] = 4] = "Custom2";
            GenderSalutation[GenderSalutation["Custom3"] = 5] = "Custom3";
            GenderSalutation[GenderSalutation["Custom4"] = 6] = "Custom4";
            GenderSalutation[GenderSalutation["Custom5"] = 7] = "Custom5";
            GenderSalutation[GenderSalutation["Custom6"] = 8] = "Custom6";
            GenderSalutation[GenderSalutation["Unspecified"] = 9] = "Unspecified";
        })(HPTRIM.GenderSalutation || (HPTRIM.GenderSalutation = {}));
        var GenderSalutation = HPTRIM.GenderSalutation;
        (function (GeneralAccess) {
            GeneralAccess[GeneralAccess["Use"] = 0] = "Use";
            GeneralAccess[GeneralAccess["Update"] = 1] = "Update";
            GeneralAccess[GeneralAccess["ModifyAccess"] = 2] = "ModifyAccess";
            GeneralAccess[GeneralAccess["Delete"] = 3] = "Delete";
        })(HPTRIM.GeneralAccess || (HPTRIM.GeneralAccess = {}));
        var GeneralAccess = HPTRIM.GeneralAccess;
        (function (GeneralExceptionHandling) {
            GeneralExceptionHandling[GeneralExceptionHandling["Ignore"] = 0] = "Ignore";
            GeneralExceptionHandling[GeneralExceptionHandling["Warn"] = 1] = "Warn";
            GeneralExceptionHandling[GeneralExceptionHandling["Prevent"] = 2] = "Prevent";
        })(HPTRIM.GeneralExceptionHandling || (HPTRIM.GeneralExceptionHandling = {}));
        var GeneralExceptionHandling = HPTRIM.GeneralExceptionHandling;
        (function (GenericPermissions) {
            GenericPermissions[GenericPermissions["Create"] = 0] = "Create";
            GenericPermissions[GenericPermissions["View"] = 1] = "View";
            GenericPermissions[GenericPermissions["Modify"] = 2] = "Modify";
            GenericPermissions[GenericPermissions["Delete"] = 3] = "Delete";
        })(HPTRIM.GenericPermissions || (HPTRIM.GenericPermissions = {}));
        var GenericPermissions = HPTRIM.GenericPermissions;
        (function (GenericPurposes) {
            GenericPurposes[GenericPurposes["UseItem"] = 0] = "UseItem";
            GenericPurposes[GenericPurposes["SearchByItem"] = 1] = "SearchByItem";
            GenericPurposes[GenericPurposes["MaintainItem"] = 2] = "MaintainItem";
        })(HPTRIM.GenericPurposes || (HPTRIM.GenericPurposes = {}));
        var GenericPurposes = HPTRIM.GenericPurposes;
        (function (GeographyDistanceUnit) {
            GeographyDistanceUnit[GeographyDistanceUnit["Metres"] = 0] = "Metres";
            GeographyDistanceUnit[GeographyDistanceUnit["Kilometres"] = 1] = "Kilometres";
            GeographyDistanceUnit[GeographyDistanceUnit["Yard"] = 2] = "Yard";
            GeographyDistanceUnit[GeographyDistanceUnit["Miles"] = 3] = "Miles";
        })(HPTRIM.GeographyDistanceUnit || (HPTRIM.GeographyDistanceUnit = {}));
        var GeographyDistanceUnit = HPTRIM.GeographyDistanceUnit;
        (function (GeographySearchType) {
            GeographySearchType[GeographySearchType["NearCoordinate"] = 0] = "NearCoordinate";
            GeographySearchType[GeographySearchType["NearRecord"] = 1] = "NearRecord";
            GeographySearchType[GeographySearchType["NearLocation"] = 2] = "NearLocation";
        })(HPTRIM.GeographySearchType || (HPTRIM.GeographySearchType = {}));
        var GeographySearchType = HPTRIM.GeographySearchType;
        (function (HashingAlgorithms) {
            HashingAlgorithms[HashingAlgorithms["Sha"] = 0] = "Sha";
            HashingAlgorithms[HashingAlgorithms["Md5"] = 1] = "Md5";
        })(HPTRIM.HashingAlgorithms || (HPTRIM.HashingAlgorithms = {}));
        var HashingAlgorithms = HPTRIM.HashingAlgorithms;
        (function (HistoryPurposes) {
            HistoryPurposes[HistoryPurposes["BrowseHistory"] = 0] = "BrowseHistory";
            HistoryPurposes[HistoryPurposes["BrowseForObject"] = 1] = "BrowseForObject";
            HistoryPurposes[HistoryPurposes["BrowseRecordSearchHistory"] = 2] = "BrowseRecordSearchHistory";
            HistoryPurposes[HistoryPurposes["BrowseRecordHistory"] = 3] = "BrowseRecordHistory";
        })(HPTRIM.HistoryPurposes || (HPTRIM.HistoryPurposes = {}));
        var HistoryPurposes = HPTRIM.HistoryPurposes;
        (function (IconDisplayMode) {
            IconDisplayMode[IconDisplayMode["Text"] = 0] = "Text";
            IconDisplayMode[IconDisplayMode["Icon"] = 1] = "Icon";
            IconDisplayMode[IconDisplayMode["IconAndText"] = 2] = "IconAndText";
        })(HPTRIM.IconDisplayMode || (HPTRIM.IconDisplayMode = {}));
        var IconDisplayMode = HPTRIM.IconDisplayMode;
        (function (IconUsage) {
            IconUsage[IconUsage["ColumnHeading"] = 0] = "ColumnHeading";
            IconUsage[IconUsage["FieldPicker"] = 1] = "FieldPicker";
            IconUsage[IconUsage["PropertyCaption"] = 2] = "PropertyCaption";
            IconUsage[IconUsage["ValueDisplay"] = 3] = "ValueDisplay";
        })(HPTRIM.IconUsage || (HPTRIM.IconUsage = {}));
        var IconUsage = HPTRIM.IconUsage;
        (function (IdolIndexStatus) {
            IdolIndexStatus[IdolIndexStatus["NotIndexed"] = 0] = "NotIndexed";
            IdolIndexStatus[IdolIndexStatus["InProgress"] = 1] = "InProgress";
            IdolIndexStatus[IdolIndexStatus["Complete"] = 2] = "Complete";
        })(HPTRIM.IdolIndexStatus || (HPTRIM.IdolIndexStatus = {}));
        var IdolIndexStatus = HPTRIM.IdolIndexStatus;
        (function (IdolIndexType) {
            IdolIndexType[IdolIndexType["Metadata"] = 0] = "Metadata";
            IdolIndexType[IdolIndexType["Content"] = 1] = "Content";
            IdolIndexType[IdolIndexType["Both"] = 2] = "Both";
        })(HPTRIM.IdolIndexType || (HPTRIM.IdolIndexType = {}));
        var IdolIndexType = HPTRIM.IdolIndexType;
        (function (IdolSearchStyles) {
            IdolSearchStyles[IdolSearchStyles["ContentOnly"] = 0] = "ContentOnly";
            IdolSearchStyles[IdolSearchStyles["WordIndexes"] = 1] = "WordIndexes";
            IdolSearchStyles[IdolSearchStyles["AllIndexes"] = 2] = "AllIndexes";
        })(HPTRIM.IdolSearchStyles || (HPTRIM.IdolSearchStyles = {}));
        var IdolSearchStyles = HPTRIM.IdolSearchStyles;
        (function (InitiatingRecordBehavior) {
            InitiatingRecordBehavior[InitiatingRecordBehavior["Working"] = 0] = "Working";
            InitiatingRecordBehavior[InitiatingRecordBehavior["Reference"] = 1] = "Reference";
            InitiatingRecordBehavior[InitiatingRecordBehavior["Container"] = 2] = "Container";
            InitiatingRecordBehavior[InitiatingRecordBehavior["Ignore"] = 3] = "Ignore";
        })(HPTRIM.InitiatingRecordBehavior || (HPTRIM.InitiatingRecordBehavior = {}));
        var InitiatingRecordBehavior = HPTRIM.InitiatingRecordBehavior;
        (function (InvitationType) {
            InvitationType[InvitationType["Invited"] = 0] = "Invited";
            InvitationType[InvitationType["Chair"] = 1] = "Chair";
            InvitationType[InvitationType["Secretary"] = 2] = "Secretary";
            InvitationType[InvitationType["Required"] = 3] = "Required";
            InvitationType[InvitationType["Optional"] = 4] = "Optional";
            InvitationType[InvitationType["Custom1"] = 5] = "Custom1";
            InvitationType[InvitationType["Custom2"] = 6] = "Custom2";
            InvitationType[InvitationType["Custom3"] = 7] = "Custom3";
        })(HPTRIM.InvitationType || (HPTRIM.InvitationType = {}));
        var InvitationType = HPTRIM.InvitationType;
        (function (IpConnectionType) {
            IpConnectionType[IpConnectionType["LocalNamedPipe"] = 0] = "LocalNamedPipe";
            IpConnectionType[IpConnectionType["SingleHop"] = 1] = "SingleHop";
            IpConnectionType[IpConnectionType["DoubleHop"] = 2] = "DoubleHop";
            IpConnectionType[IpConnectionType["SdkUnspecified"] = 3] = "SdkUnspecified";
            IpConnectionType[IpConnectionType["SdkWebUnspecified"] = 4] = "SdkWebUnspecified";
        })(HPTRIM.IpConnectionType || (HPTRIM.IpConnectionType = {}));
        var IpConnectionType = HPTRIM.IpConnectionType;
        (function (JurisdictionPurposes) {
            JurisdictionPurposes[JurisdictionPurposes["Maintain"] = 0] = "Maintain";
            JurisdictionPurposes[JurisdictionPurposes["AttachToRecord"] = 1] = "AttachToRecord";
            JurisdictionPurposes[JurisdictionPurposes["LocationDefault"] = 2] = "LocationDefault";
            JurisdictionPurposes[JurisdictionPurposes["RecordTypeDefault"] = 3] = "RecordTypeDefault";
            JurisdictionPurposes[JurisdictionPurposes["ClassificationDefault"] = 4] = "ClassificationDefault";
            JurisdictionPurposes[JurisdictionPurposes["ScheduleTrigger"] = 5] = "ScheduleTrigger";
            JurisdictionPurposes[JurisdictionPurposes["ScheduleKeepForeverList"] = 6] = "ScheduleKeepForeverList";
            JurisdictionPurposes[JurisdictionPurposes["AddChildJurisdiction"] = 7] = "AddChildJurisdiction";
        })(HPTRIM.JurisdictionPurposes || (HPTRIM.JurisdictionPurposes = {}));
        var JurisdictionPurposes = HPTRIM.JurisdictionPurposes;
        (function (JurisdictionTypes) {
            JurisdictionTypes[JurisdictionTypes["Single"] = 0] = "Single";
            JurisdictionTypes[JurisdictionTypes["Group"] = 1] = "Group";
            JurisdictionTypes[JurisdictionTypes["Federation"] = 2] = "Federation";
        })(HPTRIM.JurisdictionTypes || (HPTRIM.JurisdictionTypes = {}));
        var JurisdictionTypes = HPTRIM.JurisdictionTypes;
        (function (KeywordAttachMethod) {
            KeywordAttachMethod[KeywordAttachMethod["ByTitling"] = 0] = "ByTitling";
            KeywordAttachMethod[KeywordAttachMethod["ByAttach"] = 1] = "ByAttach";
        })(HPTRIM.KeywordAttachMethod || (HPTRIM.KeywordAttachMethod = {}));
        var KeywordAttachMethod = HPTRIM.KeywordAttachMethod;
        (function (KeywordPurposes) {
            KeywordPurposes[KeywordPurposes["Attach"] = 0] = "Attach";
            KeywordPurposes[KeywordPurposes["AttachTitle"] = 1] = "AttachTitle";
            KeywordPurposes[KeywordPurposes["Remove"] = 2] = "Remove";
            KeywordPurposes[KeywordPurposes["Relate"] = 3] = "Relate";
            KeywordPurposes[KeywordPurposes["Find"] = 4] = "Find";
            KeywordPurposes[KeywordPurposes["Maintain"] = 5] = "Maintain";
        })(HPTRIM.KeywordPurposes || (HPTRIM.KeywordPurposes = {}));
        var KeywordPurposes = HPTRIM.KeywordPurposes;
        (function (KeywordRelationship) {
            KeywordRelationship[KeywordRelationship["RelatedTo"] = 0] = "RelatedTo";
            KeywordRelationship[KeywordRelationship["Use"] = 1] = "Use";
            KeywordRelationship[KeywordRelationship["UsedFor"] = 2] = "UsedFor";
            KeywordRelationship[KeywordRelationship["Narrower"] = 3] = "Narrower";
            KeywordRelationship[KeywordRelationship["Broader"] = 4] = "Broader";
        })(HPTRIM.KeywordRelationship || (HPTRIM.KeywordRelationship = {}));
        var KeywordRelationship = HPTRIM.KeywordRelationship;
        (function (LabelAccess) {
            LabelAccess[LabelAccess["View"] = 0] = "View";
            LabelAccess[LabelAccess["Attach"] = 1] = "Attach";
            LabelAccess[LabelAccess["Detach"] = 2] = "Detach";
            LabelAccess[LabelAccess["Update"] = 3] = "Update";
            LabelAccess[LabelAccess["ModifyAccess"] = 4] = "ModifyAccess";
            LabelAccess[LabelAccess["Delete"] = 5] = "Delete";
        })(HPTRIM.LabelAccess || (HPTRIM.LabelAccess = {}));
        var LabelAccess = HPTRIM.LabelAccess;
        (function (LabelPositionChange) {
            LabelPositionChange[LabelPositionChange["MoveUp"] = 0] = "MoveUp";
            LabelPositionChange[LabelPositionChange["MoveDown"] = 1] = "MoveDown";
            LabelPositionChange[LabelPositionChange["MoveToTop"] = 2] = "MoveToTop";
            LabelPositionChange[LabelPositionChange["MoveToBottom"] = 3] = "MoveToBottom";
        })(HPTRIM.LabelPositionChange || (HPTRIM.LabelPositionChange = {}));
        var LabelPositionChange = HPTRIM.LabelPositionChange;
        (function (LabelPurposes) {
            LabelPurposes[LabelPurposes["Attach"] = 0] = "Attach";
            LabelPurposes[LabelPurposes["Remove"] = 1] = "Remove";
            LabelPurposes[LabelPurposes["Find"] = 2] = "Find";
            LabelPurposes[LabelPurposes["Maintain"] = 3] = "Maintain";
        })(HPTRIM.LabelPurposes || (HPTRIM.LabelPurposes = {}));
        var LabelPurposes = HPTRIM.LabelPurposes;
        (function (Language) {
            Language[Language["Default"] = 0] = "Default";
            Language[Language["English"] = 1] = "English";
            Language[Language["Dutch"] = 2] = "Dutch";
            Language[Language["French"] = 3] = "French";
            Language[Language["EnglishUS"] = 4] = "EnglishUS";
            Language[Language["German"] = 5] = "German";
            Language[Language["Spanish"] = 6] = "Spanish";
            Language[Language["Italian"] = 7] = "Italian";
            Language[Language["PortugueseBz"] = 8] = "PortugueseBz";
            Language[Language["Russian"] = 9] = "Russian";
            Language[Language["Chinese"] = 10] = "Chinese";
            Language[Language["Vietnamese"] = 11] = "Vietnamese";
            Language[Language["Swedish"] = 12] = "Swedish";
        })(HPTRIM.Language || (HPTRIM.Language = {}));
        var Language = HPTRIM.Language;
        (function (LayoutPurpose) {
            LayoutPurpose[LayoutPurpose["Maintain"] = 0] = "Maintain";
            LayoutPurpose[LayoutPurpose["Publish"] = 1] = "Publish";
        })(HPTRIM.LayoutPurpose || (HPTRIM.LayoutPurpose = {}));
        var LayoutPurpose = HPTRIM.LayoutPurpose;
        (function (LdapAuthMethod) {
            LdapAuthMethod[LdapAuthMethod["Anonymous"] = 0] = "Anonymous";
            LdapAuthMethod[LdapAuthMethod["Basic"] = 1] = "Basic";
            LdapAuthMethod[LdapAuthMethod["Ntlm"] = 2] = "Ntlm";
        })(HPTRIM.LdapAuthMethod || (HPTRIM.LdapAuthMethod = {}));
        var LdapAuthMethod = HPTRIM.LdapAuthMethod;
        (function (LdapMatchingType) {
            LdapMatchingType[LdapMatchingType["Exact"] = 0] = "Exact";
            LdapMatchingType[LdapMatchingType["Substring"] = 1] = "Substring";
            LdapMatchingType[LdapMatchingType["WildCard"] = 2] = "WildCard";
            LdapMatchingType[LdapMatchingType["Regex"] = 3] = "Regex";
        })(HPTRIM.LdapMatchingType || (HPTRIM.LdapMatchingType = {}));
        var LdapMatchingType = HPTRIM.LdapMatchingType;
        (function (LdapSearchScope) {
            LdapSearchScope[LdapSearchScope["Base"] = 0] = "Base";
            LdapSearchScope[LdapSearchScope["OneLevel"] = 1] = "OneLevel";
            LdapSearchScope[LdapSearchScope["SubTree"] = 2] = "SubTree";
        })(HPTRIM.LdapSearchScope || (HPTRIM.LdapSearchScope = {}));
        var LdapSearchScope = HPTRIM.LdapSearchScope;
        (function (LicenseTypes) {
            LicenseTypes[LicenseTypes["StorageOptimization"] = 0] = "StorageOptimization";
            LicenseTypes[LicenseTypes["SpaceManagement"] = 1] = "SpaceManagement";
            LicenseTypes[LicenseTypes["Jurisdictions"] = 2] = "Jurisdictions";
            LicenseTypes[LicenseTypes["Ocr"] = 3] = "Ocr";
            LicenseTypes[LicenseTypes["AutoClassification"] = 4] = "AutoClassification";
            LicenseTypes[LicenseTypes["AdvancedDisposal"] = 5] = "AdvancedDisposal";
            LicenseTypes[LicenseTypes["ExternalWarehousing"] = 6] = "ExternalWarehousing";
            LicenseTypes[LicenseTypes["Rendering"] = 7] = "Rendering";
            LicenseTypes[LicenseTypes["SAP"] = 8] = "SAP";
            LicenseTypes[LicenseTypes["PolicyCenter"] = 9] = "PolicyCenter";
        })(HPTRIM.LicenseTypes || (HPTRIM.LicenseTypes = {}));
        var LicenseTypes = HPTRIM.LicenseTypes;
        (function (LocationAccess) {
            LocationAccess[LocationAccess["Use"] = 0] = "Use";
            LocationAccess[LocationAccess["Update"] = 1] = "Update";
            LocationAccess[LocationAccess["ModifyAccess"] = 2] = "ModifyAccess";
            LocationAccess[LocationAccess["Delete"] = 3] = "Delete";
            LocationAccess[LocationAccess["ManageGroupItems"] = 4] = "ManageGroupItems";
            LocationAccess[LocationAccess["View"] = 5] = "View";
        })(HPTRIM.LocationAccess || (HPTRIM.LocationAccess = {}));
        var LocationAccess = HPTRIM.LocationAccess;
        (function (LocationDefault) {
            LocationDefault[LocationDefault["Current"] = 0] = "Current";
            LocationDefault[LocationDefault["CurrentOrg"] = 1] = "CurrentOrg";
        })(HPTRIM.LocationDefault || (HPTRIM.LocationDefault = {}));
        var LocationDefault = HPTRIM.LocationDefault;
        (function (LocationFieldType) {
            LocationFieldType[LocationFieldType["InternalOrExternal"] = 0] = "InternalOrExternal";
            LocationFieldType[LocationFieldType["InternalOnly"] = 1] = "InternalOnly";
            LocationFieldType[LocationFieldType["ExternalOnly"] = 2] = "ExternalOnly";
        })(HPTRIM.LocationFieldType || (HPTRIM.LocationFieldType = {}));
        var LocationFieldType = HPTRIM.LocationFieldType;
        (function (LocationGrouping) {
            LocationGrouping[LocationGrouping["None"] = 0] = "None";
            LocationGrouping[LocationGrouping["Creator"] = 1] = "Creator";
            LocationGrouping[LocationGrouping["Owner"] = 2] = "Owner";
            LocationGrouping[LocationGrouping["Home"] = 3] = "Home";
            LocationGrouping[LocationGrouping["Assignee"] = 4] = "Assignee";
        })(HPTRIM.LocationGrouping || (HPTRIM.LocationGrouping = {}));
        var LocationGrouping = HPTRIM.LocationGrouping;
        (function (LocationMatchType) {
            LocationMatchType[LocationMatchType["UniqueMatch"] = 0] = "UniqueMatch";
            LocationMatchType[LocationMatchType["AnyMatch"] = 1] = "AnyMatch";
            LocationMatchType[LocationMatchType["NeverMatch"] = 2] = "NeverMatch";
            LocationMatchType[LocationMatchType["MustMatch"] = 3] = "MustMatch";
        })(HPTRIM.LocationMatchType || (HPTRIM.LocationMatchType = {}));
        var LocationMatchType = HPTRIM.LocationMatchType;
        (function (LocationPurpose) {
            LocationPurpose[LocationPurpose["Current"] = 0] = "Current";
            LocationPurpose[LocationPurpose["Contact"] = 1] = "Contact";
            LocationPurpose[LocationPurpose["Home"] = 2] = "Home";
            LocationPurpose[LocationPurpose["Owner"] = 3] = "Owner";
            LocationPurpose[LocationPurpose["Requester"] = 4] = "Requester";
            LocationPurpose[LocationPurpose["SearchOwner"] = 5] = "SearchOwner";
            LocationPurpose[LocationPurpose["WorkflowAssignee"] = 6] = "WorkflowAssignee";
            LocationPurpose[LocationPurpose["WorkflowSupervisor"] = 7] = "WorkflowSupervisor";
            LocationPurpose[LocationPurpose["WorkflowStatsGroup"] = 8] = "WorkflowStatsGroup";
            LocationPurpose[LocationPurpose["MailRecipient"] = 9] = "MailRecipient";
            LocationPurpose[LocationPurpose["MailRecipientSupervisor"] = 10] = "MailRecipientSupervisor";
            LocationPurpose[LocationPurpose["ReplacementFor"] = 11] = "ReplacementFor";
            LocationPurpose[LocationPurpose["AddToMemberOf"] = 12] = "AddToMemberOf";
            LocationPurpose[LocationPurpose["AddToBossedBy"] = 13] = "AddToBossedBy";
            LocationPurpose[LocationPurpose["AddToOtherOf"] = 14] = "AddToOtherOf";
            LocationPurpose[LocationPurpose["AddToHasMembers"] = 15] = "AddToHasMembers";
            LocationPurpose[LocationPurpose["AddToBossOf"] = 16] = "AddToBossOf";
            LocationPurpose[LocationPurpose["AddToHasOthers"] = 17] = "AddToHasOthers";
            LocationPurpose[LocationPurpose["ProfileProvider"] = 18] = "ProfileProvider";
            LocationPurpose[LocationPurpose["AccessControl"] = 19] = "AccessControl";
            LocationPurpose[LocationPurpose["AddressProvider"] = 20] = "AddressProvider";
            LocationPurpose[LocationPurpose["MaintainLocations"] = 21] = "MaintainLocations";
            LocationPurpose[LocationPurpose["NoPurpose"] = 22] = "NoPurpose";
            LocationPurpose[LocationPurpose["LocationDirectory"] = 23] = "LocationDirectory";
            LocationPurpose[LocationPurpose["MaintainStaff"] = 24] = "MaintainStaff";
            LocationPurpose[LocationPurpose["MaintainExternal"] = 25] = "MaintainExternal";
            LocationPurpose[LocationPurpose["MaintainInternal"] = 26] = "MaintainInternal";
            LocationPurpose[LocationPurpose["MaintainContacts"] = 27] = "MaintainContacts";
            LocationPurpose[LocationPurpose["MaintainOrganizations"] = 28] = "MaintainOrganizations";
            LocationPurpose[LocationPurpose["MaintainUnits"] = 29] = "MaintainUnits";
            LocationPurpose[LocationPurpose["MaintainPositions"] = 30] = "MaintainPositions";
            LocationPurpose[LocationPurpose["MaintainGroups"] = 31] = "MaintainGroups";
            LocationPurpose[LocationPurpose["MaintainUnknown"] = 32] = "MaintainUnknown";
            LocationPurpose[LocationPurpose["AddToDelegateOf"] = 33] = "AddToDelegateOf";
            LocationPurpose[LocationPurpose["AddToHasDelegates"] = 34] = "AddToHasDelegates";
            LocationPurpose[LocationPurpose["MaintainCommittees"] = 35] = "MaintainCommittees";
            LocationPurpose[LocationPurpose["MaintainProjectTeams"] = 36] = "MaintainProjectTeams";
            LocationPurpose[LocationPurpose["Communicator"] = 37] = "Communicator";
            LocationPurpose[LocationPurpose["MaintainVenues"] = 38] = "MaintainVenues";
            LocationPurpose[LocationPurpose["MaintainWorkgroups"] = 39] = "MaintainWorkgroups";
            LocationPurpose[LocationPurpose["ApproveAgendaItems"] = 40] = "ApproveAgendaItems";
            LocationPurpose[LocationPurpose["MeetingVenue"] = 41] = "MeetingVenue";
            LocationPurpose[LocationPurpose["TodoAssignee"] = 42] = "TodoAssignee";
            LocationPurpose[LocationPurpose["ApproveClassification"] = 43] = "ApproveClassification";
            LocationPurpose[LocationPurpose["AddToAdministeredBy"] = 44] = "AddToAdministeredBy";
            LocationPurpose[LocationPurpose["AddToAdministratorOf"] = 45] = "AddToAdministratorOf";
            LocationPurpose[LocationPurpose["AddCaveatTo"] = 46] = "AddCaveatTo";
            LocationPurpose[LocationPurpose["RemoveCaveatFrom"] = 47] = "RemoveCaveatFrom";
            LocationPurpose[LocationPurpose["MaintainStorageProviders"] = 48] = "MaintainStorageProviders";
            LocationPurpose[LocationPurpose["SetDefaultSearchForm"] = 49] = "SetDefaultSearchForm";
            LocationPurpose[LocationPurpose["ArchiveTransfer"] = 50] = "ArchiveTransfer";
            LocationPurpose[LocationPurpose["AlertSubscriber"] = 51] = "AlertSubscriber";
            LocationPurpose[LocationPurpose["EmailLinkOwner"] = 52] = "EmailLinkOwner";
            LocationPurpose[LocationPurpose["ConsignmentArchivist"] = 53] = "ConsignmentArchivist";
            LocationPurpose[LocationPurpose["GpsSearch"] = 54] = "GpsSearch";
            LocationPurpose[LocationPurpose["Editor"] = 55] = "Editor";
            LocationPurpose[LocationPurpose["Reviewer"] = 56] = "Reviewer";
            LocationPurpose[LocationPurpose["Authorizer"] = 57] = "Authorizer";
            LocationPurpose[LocationPurpose["UserFieldValue"] = 58] = "UserFieldValue";
            LocationPurpose[LocationPurpose["SearchUserFieldValue"] = 59] = "SearchUserFieldValue";
            LocationPurpose[LocationPurpose["ConsignmentApprover"] = 60] = "ConsignmentApprover";
        })(HPTRIM.LocationPurpose || (HPTRIM.LocationPurpose = {}));
        var LocationPurpose = HPTRIM.LocationPurpose;
        (function (LocationType) {
            LocationType[LocationType["Unknown"] = 0] = "Unknown";
            LocationType[LocationType["Organization"] = 1] = "Organization";
            LocationType[LocationType["Group"] = 2] = "Group";
            LocationType[LocationType["Position"] = 3] = "Position";
            LocationType[LocationType["Person"] = 4] = "Person";
            LocationType[LocationType["ProjectTeam"] = 5] = "ProjectTeam";
            LocationType[LocationType["Committee"] = 6] = "Committee";
            LocationType[LocationType["Venue"] = 7] = "Venue";
            LocationType[LocationType["Workgroup"] = 8] = "Workgroup";
            LocationType[LocationType["StorageProvider"] = 9] = "StorageProvider";
        })(HPTRIM.LocationType || (HPTRIM.LocationType = {}));
        var LocationType = HPTRIM.LocationType;
        (function (LockdownStyles) {
            LockdownStyles[LockdownStyles["Normal"] = 0] = "Normal";
            LockdownStyles[LockdownStyles["SessionLock"] = 1] = "SessionLock";
            LockdownStyles[LockdownStyles["TotalLock"] = 2] = "TotalLock";
        })(HPTRIM.LockdownStyles || (HPTRIM.LockdownStyles = {}));
        var LockdownStyles = HPTRIM.LockdownStyles;
        (function (LocRelationshipType) {
            LocRelationshipType[LocRelationshipType["MemberOf"] = 0] = "MemberOf";
            LocRelationshipType[LocRelationshipType["BossedBy"] = 1] = "BossedBy";
            LocRelationshipType[LocRelationshipType["OtherOf"] = 2] = "OtherOf";
            LocRelationshipType[LocRelationshipType["HasMembers"] = 3] = "HasMembers";
            LocRelationshipType[LocRelationshipType["BossOf"] = 4] = "BossOf";
            LocRelationshipType[LocRelationshipType["HasOthers"] = 5] = "HasOthers";
            LocRelationshipType[LocRelationshipType["DelegateOf"] = 6] = "DelegateOf";
            LocRelationshipType[LocRelationshipType["HasDelegates"] = 7] = "HasDelegates";
            LocRelationshipType[LocRelationshipType["AdministratorOf"] = 8] = "AdministratorOf";
            LocRelationshipType[LocRelationshipType["AdministeredBy"] = 9] = "AdministeredBy";
        })(HPTRIM.LocRelationshipType || (HPTRIM.LocRelationshipType = {}));
        var LocRelationshipType = HPTRIM.LocRelationshipType;
        (function (LoggingCategories) {
            LoggingCategories[LoggingCategories["ActivityLogUser"] = 0] = "ActivityLogUser";
            LoggingCategories[LoggingCategories["ActivityLogDB"] = 1] = "ActivityLogDB";
            LoggingCategories[LoggingCategories["WgsCalls"] = 2] = "WgsCalls";
            LoggingCategories[LoggingCategories["RecordConstructors"] = 3] = "RecordConstructors";
            LoggingCategories[LoggingCategories["RecordSearchGetNext"] = 4] = "RecordSearchGetNext";
            LoggingCategories[LoggingCategories["RecordTreeBox"] = 5] = "RecordTreeBox";
            LoggingCategories[LoggingCategories["AutoProfiling"] = 6] = "AutoProfiling";
            LoggingCategories[LoggingCategories["Watcher"] = 7] = "Watcher";
            LoggingCategories[LoggingCategories["TagAndTask"] = 8] = "TagAndTask";
            LoggingCategories[LoggingCategories["MapiCalls"] = 9] = "MapiCalls";
            LoggingCategories[LoggingCategories["RCF"] = 10] = "RCF";
        })(HPTRIM.LoggingCategories || (HPTRIM.LoggingCategories = {}));
        var LoggingCategories = HPTRIM.LoggingCategories;
        (function (LogLevels) {
            LogLevels[LogLevels["Off"] = 0] = "Off";
            LogLevels[LogLevels["On"] = 1] = "On";
            LogLevels[LogLevels["Verbose"] = 2] = "Verbose";
        })(HPTRIM.LogLevels || (HPTRIM.LogLevels = {}));
        var LogLevels = HPTRIM.LogLevels;
        (function (LookupItemFieldStyle) {
            LookupItemFieldStyle[LookupItemFieldStyle["LongValueOnly"] = 0] = "LongValueOnly";
            LookupItemFieldStyle[LookupItemFieldStyle["ShortValueOnly"] = 1] = "ShortValueOnly";
            LookupItemFieldStyle[LookupItemFieldStyle["ShortThenLongValue"] = 2] = "ShortThenLongValue";
        })(HPTRIM.LookupItemFieldStyle || (HPTRIM.LookupItemFieldStyle = {}));
        var LookupItemFieldStyle = HPTRIM.LookupItemFieldStyle;
        (function (LookupItemPurposeType) {
            LookupItemPurposeType[LookupItemPurposeType["UseItem"] = 0] = "UseItem";
            LookupItemPurposeType[LookupItemPurposeType["SearchByItem"] = 1] = "SearchByItem";
            LookupItemPurposeType[LookupItemPurposeType["MaintainItem"] = 2] = "MaintainItem";
            LookupItemPurposeType[LookupItemPurposeType["ForFieldValue"] = 3] = "ForFieldValue";
        })(HPTRIM.LookupItemPurposeType || (HPTRIM.LookupItemPurposeType = {}));
        var LookupItemPurposeType = HPTRIM.LookupItemPurposeType;
        (function (LookupSetType) {
            LookupSetType[LookupSetType["Standard"] = 0] = "Standard";
            LookupSetType[LookupSetType["NenHonorific"] = 1] = "NenHonorific";
            LookupSetType[LookupSetType["CmPartyType"] = 2] = "CmPartyType";
            LookupSetType[LookupSetType["CmRoleType"] = 3] = "CmRoleType";
        })(HPTRIM.LookupSetType || (HPTRIM.LookupSetType = {}));
        var LookupSetType = HPTRIM.LookupSetType;
        (function (MailEventType) {
            MailEventType[MailEventType["All"] = 0] = "All";
            MailEventType[MailEventType["ActionAssigned"] = 1] = "ActionAssigned";
            MailEventType[MailEventType["ActionReassigned"] = 2] = "ActionReassigned";
            MailEventType[MailEventType["ActionUndone"] = 3] = "ActionUndone";
            MailEventType[MailEventType["ActionCurrent"] = 4] = "ActionCurrent";
            MailEventType[MailEventType["ActionOverdue"] = 5] = "ActionOverdue";
            MailEventType[MailEventType["ActionCompleted"] = 6] = "ActionCompleted";
            MailEventType[MailEventType["ActivityAssigned"] = 7] = "ActivityAssigned";
            MailEventType[MailEventType["ActivityReassigned"] = 8] = "ActivityReassigned";
            MailEventType[MailEventType["ActivityUndone"] = 9] = "ActivityUndone";
            MailEventType[MailEventType["ActivityCurrent"] = 10] = "ActivityCurrent";
            MailEventType[MailEventType["ActivityOverdue"] = 11] = "ActivityOverdue";
            MailEventType[MailEventType["ActivityCompleted"] = 12] = "ActivityCompleted";
            MailEventType[MailEventType["ActivitySkipped"] = 13] = "ActivitySkipped";
            MailEventType[MailEventType["ActivityEscalated"] = 14] = "ActivityEscalated";
            MailEventType[MailEventType["ActivityReadyForAuthorization"] = 15] = "ActivityReadyForAuthorization";
            MailEventType[MailEventType["EstoreNearCapacity"] = 16] = "EstoreNearCapacity";
            MailEventType[MailEventType["EstoreFull"] = 17] = "EstoreFull";
            MailEventType[MailEventType["RecordSecurityBreach"] = 18] = "RecordSecurityBreach";
            MailEventType[MailEventType["RecordSuperseded"] = 19] = "RecordSuperseded";
            MailEventType[MailEventType["ScheduledTaskReady"] = 20] = "ScheduledTaskReady";
            MailEventType[MailEventType["AlertRaised"] = 21] = "AlertRaised";
            MailEventType[MailEventType["TodoItemAssigned"] = 22] = "TodoItemAssigned";
            MailEventType[MailEventType["TodoItemOverdue"] = 23] = "TodoItemOverdue";
            MailEventType[MailEventType["TodoItemStillOverdue"] = 24] = "TodoItemStillOverdue";
            MailEventType[MailEventType["AgendaDistribution"] = 25] = "AgendaDistribution";
            MailEventType[MailEventType["MinutesDistribution"] = 26] = "MinutesDistribution";
            MailEventType[MailEventType["ActivityNeedsAssignee"] = 27] = "ActivityNeedsAssignee";
            MailEventType[MailEventType["DeleteAlertRaised"] = 28] = "DeleteAlertRaised";
            MailEventType[MailEventType["ActionReminder"] = 29] = "ActionReminder";
            MailEventType[MailEventType["ActivityReminder"] = 30] = "ActivityReminder";
            MailEventType[MailEventType["NewRequestAdded"] = 31] = "NewRequestAdded";
            MailEventType[MailEventType["RecordReturnOverdue"] = 32] = "RecordReturnOverdue";
            MailEventType[MailEventType["RecordReceiptAcknowledge"] = 33] = "RecordReceiptAcknowledge";
            MailEventType[MailEventType["RecordAssigned"] = 34] = "RecordAssigned";
            MailEventType[MailEventType["ActionStartReminder"] = 35] = "ActionStartReminder";
            MailEventType[MailEventType["LicenseInBreach"] = 36] = "LicenseInBreach";
            MailEventType[MailEventType["LicenseWarning"] = 37] = "LicenseWarning";
            MailEventType[MailEventType["NewUserAutomaticallyRegistered"] = 38] = "NewUserAutomaticallyRegistered";
            MailEventType[MailEventType["ReadyForDrafting"] = 39] = "ReadyForDrafting";
            MailEventType[MailEventType["DraftOverdue"] = 40] = "DraftOverdue";
            MailEventType[MailEventType["ReadyForReview"] = 41] = "ReadyForReview";
            MailEventType[MailEventType["ReviewerAddedComments"] = 42] = "ReviewerAddedComments";
            MailEventType[MailEventType["ReviewOverdue"] = 43] = "ReviewOverdue";
            MailEventType[MailEventType["ReviewComplete"] = 44] = "ReviewComplete";
            MailEventType[MailEventType["ReadyForAuthorization"] = 45] = "ReadyForAuthorization";
            MailEventType[MailEventType["AuthorizerAddedComments"] = 46] = "AuthorizerAddedComments";
            MailEventType[MailEventType["AuthorizationOverdue"] = 47] = "AuthorizationOverdue";
            MailEventType[MailEventType["AuthorizationComplete"] = 48] = "AuthorizationComplete";
            MailEventType[MailEventType["EditorAddedReply"] = 49] = "EditorAddedReply";
            MailEventType[MailEventType["DocusignFailed"] = 50] = "DocusignFailed";
            MailEventType[MailEventType["RequestDigest"] = 51] = "RequestDigest";
            MailEventType[MailEventType["ConsignmentReadyForApproval"] = 52] = "ConsignmentReadyForApproval";
            MailEventType[MailEventType["ConsignmentApprovalReminder"] = 53] = "ConsignmentApprovalReminder";
            MailEventType[MailEventType["ConsignmentApproved"] = 54] = "ConsignmentApproved";
            MailEventType[MailEventType["ConsignmentApproverActivity"] = 55] = "ConsignmentApproverActivity";
            MailEventType[MailEventType["ConsignmentRecordActivity"] = 56] = "ConsignmentRecordActivity";
        })(HPTRIM.MailEventType || (HPTRIM.MailEventType = {}));
        var MailEventType = HPTRIM.MailEventType;
        (function (MailFolderTypes) {
            MailFolderTypes[MailFolderTypes["NormalFolder"] = 0] = "NormalFolder";
            MailFolderTypes[MailFolderTypes["SentItems"] = 1] = "SentItems";
            MailFolderTypes[MailFolderTypes["ConversationHistory"] = 2] = "ConversationHistory";
            MailFolderTypes[MailFolderTypes["Calendar"] = 3] = "Calendar";
        })(HPTRIM.MailFolderTypes || (HPTRIM.MailFolderTypes = {}));
        var MailFolderTypes = HPTRIM.MailFolderTypes;
        (function (MailFormat) {
            MailFormat[MailFormat["Msg"] = 0] = "Msg";
            MailFormat[MailFormat["Eml"] = 1] = "Eml";
        })(HPTRIM.MailFormat || (HPTRIM.MailFormat = {}));
        var MailFormat = HPTRIM.MailFormat;
        (function (MailPersistence) {
            MailPersistence[MailPersistence["Delete"] = 0] = "Delete";
            MailPersistence[MailPersistence["MoveToTrash"] = 1] = "MoveToTrash";
            MailPersistence[MailPersistence["Retain"] = 2] = "Retain";
        })(HPTRIM.MailPersistence || (HPTRIM.MailPersistence = {}));
        var MailPersistence = HPTRIM.MailPersistence;
        (function (MailRecipientType) {
            MailRecipientType[MailRecipientType["To"] = 0] = "To";
            MailRecipientType[MailRecipientType["Cc"] = 1] = "Cc";
            MailRecipientType[MailRecipientType["Bcc"] = 2] = "Bcc";
        })(HPTRIM.MailRecipientType || (HPTRIM.MailRecipientType = {}));
        var MailRecipientType = HPTRIM.MailRecipientType;
        (function (MediaTypes) {
            MediaTypes[MediaTypes["Unknown"] = 0] = "Unknown";
            MediaTypes[MediaTypes["Paper"] = 1] = "Paper";
            MediaTypes[MediaTypes["Electronic"] = 2] = "Electronic";
            MediaTypes[MediaTypes["OpticalDisk"] = 3] = "OpticalDisk";
            MediaTypes[MediaTypes["Drawings"] = 4] = "Drawings";
            MediaTypes[MediaTypes["MagneticStorage"] = 5] = "MagneticStorage";
            MediaTypes[MediaTypes["Memory"] = 6] = "Memory";
            MediaTypes[MediaTypes["Microfilm"] = 7] = "Microfilm";
            MediaTypes[MediaTypes["Film"] = 8] = "Film";
            MediaTypes[MediaTypes["Video"] = 9] = "Video";
            MediaTypes[MediaTypes["Custom1"] = 10] = "Custom1";
            MediaTypes[MediaTypes["Custom2"] = 11] = "Custom2";
            MediaTypes[MediaTypes["Custom3"] = 12] = "Custom3";
            MediaTypes[MediaTypes["Custom4"] = 13] = "Custom4";
            MediaTypes[MediaTypes["Custom5"] = 14] = "Custom5";
            MediaTypes[MediaTypes["Custom6"] = 15] = "Custom6";
            MediaTypes[MediaTypes["Custom7"] = 16] = "Custom7";
            MediaTypes[MediaTypes["Custom8"] = 17] = "Custom8";
            MediaTypes[MediaTypes["Custom9"] = 18] = "Custom9";
            MediaTypes[MediaTypes["Custom10"] = 19] = "Custom10";
        })(HPTRIM.MediaTypes || (HPTRIM.MediaTypes = {}));
        var MediaTypes = HPTRIM.MediaTypes;
        (function (MeetingAccess) {
            MeetingAccess[MeetingAccess["View"] = 0] = "View";
            MeetingAccess[MeetingAccess["AddAgendaItem"] = 1] = "AddAgendaItem";
            MeetingAccess[MeetingAccess["EditMinutes"] = 2] = "EditMinutes";
            MeetingAccess[MeetingAccess["Modify"] = 3] = "Modify";
            MeetingAccess[MeetingAccess["ModifyAccess"] = 4] = "ModifyAccess";
            MeetingAccess[MeetingAccess["Delete"] = 5] = "Delete";
        })(HPTRIM.MeetingAccess || (HPTRIM.MeetingAccess = {}));
        var MeetingAccess = HPTRIM.MeetingAccess;
        (function (MeetingDocumentType) {
            MeetingDocumentType[MeetingDocumentType["Custom6"] = 0] = "Custom6";
            MeetingDocumentType[MeetingDocumentType["Custom7"] = 1] = "Custom7";
            MeetingDocumentType[MeetingDocumentType["Submission"] = 2] = "Submission";
            MeetingDocumentType[MeetingDocumentType["Custom4"] = 3] = "Custom4";
            MeetingDocumentType[MeetingDocumentType["Custom5"] = 4] = "Custom5";
            MeetingDocumentType[MeetingDocumentType["Custom1"] = 5] = "Custom1";
            MeetingDocumentType[MeetingDocumentType["Custom2"] = 6] = "Custom2";
            MeetingDocumentType[MeetingDocumentType["Custom3"] = 7] = "Custom3";
        })(HPTRIM.MeetingDocumentType || (HPTRIM.MeetingDocumentType = {}));
        var MeetingDocumentType = HPTRIM.MeetingDocumentType;
        (function (MeetingPurpose) {
            MeetingPurpose[MeetingPurpose["AddAgendaItem"] = 0] = "AddAgendaItem";
        })(HPTRIM.MeetingPurpose || (HPTRIM.MeetingPurpose = {}));
        var MeetingPurpose = HPTRIM.MeetingPurpose;
        (function (MigrationType) {
            MigrationType[MigrationType["Full"] = 0] = "Full";
            MigrationType[MigrationType["Basic"] = 1] = "Basic";
            MigrationType[MigrationType["BasicWithLocation"] = 2] = "BasicWithLocation";
        })(HPTRIM.MigrationType || (HPTRIM.MigrationType = {}));
        var MigrationType = HPTRIM.MigrationType;
        (function (Months) {
            Months[Months["January"] = 0] = "January";
            Months[Months["February"] = 1] = "February";
            Months[Months["March"] = 2] = "March";
            Months[Months["April"] = 3] = "April";
            Months[Months["May"] = 4] = "May";
            Months[Months["June"] = 5] = "June";
            Months[Months["July"] = 6] = "July";
            Months[Months["August"] = 7] = "August";
            Months[Months["September"] = 8] = "September";
            Months[Months["October"] = 9] = "October";
            Months[Months["November"] = 10] = "November";
            Months[Months["December"] = 11] = "December";
        })(HPTRIM.Months || (HPTRIM.Months = {}));
        var Months = HPTRIM.Months;
        (function (MotionOutcome) {
            MotionOutcome[MotionOutcome["NotApplicable"] = 0] = "NotApplicable";
            MotionOutcome[MotionOutcome["Carried"] = 1] = "Carried";
            MotionOutcome[MotionOutcome["CarriedUnanimous"] = 2] = "CarriedUnanimous";
            MotionOutcome[MotionOutcome["CarriedOnHands"] = 3] = "CarriedOnHands";
            MotionOutcome[MotionOutcome["CarriedOnVoices"] = 4] = "CarriedOnVoices";
            MotionOutcome[MotionOutcome["Lost"] = 5] = "Lost";
            MotionOutcome[MotionOutcome["LostUnanimous"] = 6] = "LostUnanimous";
            MotionOutcome[MotionOutcome["LostOnHands"] = 7] = "LostOnHands";
            MotionOutcome[MotionOutcome["LostOnVoices"] = 8] = "LostOnVoices";
            MotionOutcome[MotionOutcome["HeldOver"] = 9] = "HeldOver";
            MotionOutcome[MotionOutcome["OtherOutcome1"] = 10] = "OtherOutcome1";
            MotionOutcome[MotionOutcome["OtherOutcome2"] = 11] = "OtherOutcome2";
            MotionOutcome[MotionOutcome["OtherOutcome3"] = 12] = "OtherOutcome3";
            MotionOutcome[MotionOutcome["NotDecided"] = 13] = "NotDecided";
        })(HPTRIM.MotionOutcome || (HPTRIM.MotionOutcome = {}));
        var MotionOutcome = HPTRIM.MotionOutcome;
        (function (NativeMailStyles) {
            NativeMailStyles[NativeMailStyles["None"] = 0] = "None";
            NativeMailStyles[NativeMailStyles["Simple"] = 1] = "Simple";
            NativeMailStyles[NativeMailStyles["Advanced"] = 2] = "Advanced";
        })(HPTRIM.NativeMailStyles || (HPTRIM.NativeMailStyles = {}));
        var NativeMailStyles = HPTRIM.NativeMailStyles;
        (function (NbrTypes) {
            NbrTypes[NbrTypes["Unknown"] = 0] = "Unknown";
            NbrTypes[NbrTypes["RecordType"] = 1] = "RecordType";
            NbrTypes[NbrTypes["PlanChild"] = 2] = "PlanChild";
            NbrTypes[NbrTypes["PlanRecord"] = 3] = "PlanRecord";
            NbrTypes[NbrTypes["TopPlan"] = 4] = "TopPlan";
            NbrTypes[NbrTypes["RecordContainer"] = 5] = "RecordContainer";
            NbrTypes[NbrTypes["WorkflowJobs"] = 6] = "WorkflowJobs";
            NbrTypes[NbrTypes["AgendaItems"] = 7] = "AgendaItems";
        })(HPTRIM.NbrTypes || (HPTRIM.NbrTypes = {}));
        var NbrTypes = HPTRIM.NbrTypes;
        (function (NotesInsertStyles) {
            NotesInsertStyles[NotesInsertStyles["Wherever"] = 0] = "Wherever";
            NotesInsertStyles[NotesInsertStyles["AtStart"] = 1] = "AtStart";
            NotesInsertStyles[NotesInsertStyles["AtBottom"] = 2] = "AtBottom";
        })(HPTRIM.NotesInsertStyles || (HPTRIM.NotesInsertStyles = {}));
        var NotesInsertStyles = HPTRIM.NotesInsertStyles;
        (function (NotesUpdateType) {
            NotesUpdateType[NotesUpdateType["Overwrite"] = 0] = "Overwrite";
            NotesUpdateType[NotesUpdateType["AppendOnly"] = 1] = "AppendOnly";
            NotesUpdateType[NotesUpdateType["AppendWithNewLine"] = 2] = "AppendWithNewLine";
            NotesUpdateType[NotesUpdateType["AppendWithUserStamp"] = 3] = "AppendWithUserStamp";
            NotesUpdateType[NotesUpdateType["PrependOnly"] = 4] = "PrependOnly";
            NotesUpdateType[NotesUpdateType["PrependWithNewLine"] = 5] = "PrependWithNewLine";
            NotesUpdateType[NotesUpdateType["PrependWithUserStamp"] = 6] = "PrependWithUserStamp";
        })(HPTRIM.NotesUpdateType || (HPTRIM.NotesUpdateType = {}));
        var NotesUpdateType = HPTRIM.NotesUpdateType;
        (function (NotificationType) {
            NotificationType[NotificationType["BobAdded"] = 0] = "BobAdded";
            NotificationType[NotificationType["BobModified"] = 1] = "BobModified";
            NotificationType[NotificationType["BobRemoved"] = 2] = "BobRemoved";
            NotificationType[NotificationType["SysMessage"] = 3] = "SysMessage";
            NotificationType[NotificationType["UserMessage"] = 4] = "UserMessage";
            NotificationType[NotificationType["LocInverseRelationshipMod"] = 5] = "LocInverseRelationshipMod";
            NotificationType[NotificationType["FormModified"] = 6] = "FormModified";
            NotificationType[NotificationType["UserPreferencesModified"] = 7] = "UserPreferencesModified";
            NotificationType[NotificationType["LabelItemsModified"] = 8] = "LabelItemsModified";
            NotificationType[NotificationType["FieldRecordUsageModified"] = 9] = "FieldRecordUsageModified";
            NotificationType[NotificationType["AuditSettingsModified"] = 10] = "AuditSettingsModified";
            NotificationType[NotificationType["CaveatRemoved"] = 11] = "CaveatRemoved";
            NotificationType[NotificationType["DeepAclRetest"] = 12] = "DeepAclRetest";
            NotificationType[NotificationType["LocIncludedInAclGroup"] = 13] = "LocIncludedInAclGroup";
            NotificationType[NotificationType["RequestNotification"] = 14] = "RequestNotification";
        })(HPTRIM.NotificationType || (HPTRIM.NotificationType = {}));
        var NotificationType = HPTRIM.NotificationType;
        (function (NumberingMethods) {
            NumberingMethods[NumberingMethods["Unknown"] = 0] = "Unknown";
            NumberingMethods[NumberingMethods["ByContainer"] = 1] = "ByContainer";
            NumberingMethods[NumberingMethods["ByPattern"] = 2] = "ByPattern";
            NumberingMethods[NumberingMethods["ByRecType"] = 3] = "ByRecType";
            NumberingMethods[NumberingMethods["ByClientMatter"] = 4] = "ByClientMatter";
        })(HPTRIM.NumberingMethods || (HPTRIM.NumberingMethods = {}));
        var NumberingMethods = HPTRIM.NumberingMethods;
        (function (OauthImplementationType) {
            OauthImplementationType[OauthImplementationType["None"] = 0] = "None";
            OauthImplementationType[OauthImplementationType["Adfs"] = 1] = "Adfs";
            OauthImplementationType[OauthImplementationType["Google"] = 2] = "Google";
        })(HPTRIM.OauthImplementationType || (HPTRIM.OauthImplementationType = {}));
        var OauthImplementationType = HPTRIM.OauthImplementationType;
        (function (ObjectCapabilities) {
            ObjectCapabilities[ObjectCapabilities["OnlineAudit"] = 0] = "OnlineAudit";
            ObjectCapabilities[ObjectCapabilities["OfflineAuditCreate"] = 1] = "OfflineAuditCreate";
            ObjectCapabilities[ObjectCapabilities["OfflineAuditModify"] = 2] = "OfflineAuditModify";
            ObjectCapabilities[ObjectCapabilities["OfflineAuditDelete"] = 3] = "OfflineAuditDelete";
        })(HPTRIM.ObjectCapabilities || (HPTRIM.ObjectCapabilities = {}));
        var ObjectCapabilities = HPTRIM.ObjectCapabilities;
        (function (ObjectURLformats) {
            ObjectURLformats[ObjectURLformats["WebClient"] = 0] = "WebClient";
            ObjectURLformats[ObjectURLformats["WebDrawer"] = 1] = "WebDrawer";
            ObjectURLformats[ObjectURLformats["None"] = 2] = "None";
            ObjectURLformats[ObjectURLformats["External"] = 3] = "External";
        })(HPTRIM.ObjectURLformats || (HPTRIM.ObjectURLformats = {}));
        var ObjectURLformats = HPTRIM.ObjectURLformats;
        (function (OccurrenceTypes) {
            OccurrenceTypes[OccurrenceTypes["OneOff"] = 0] = "OneOff";
            OccurrenceTypes[OccurrenceTypes["Adhoc"] = 1] = "Adhoc";
            OccurrenceTypes[OccurrenceTypes["Scheduled"] = 2] = "Scheduled";
        })(HPTRIM.OccurrenceTypes || (HPTRIM.OccurrenceTypes = {}));
        var OccurrenceTypes = HPTRIM.OccurrenceTypes;
        (function (OfficeIntegrationMenuCaptions) {
            OfficeIntegrationMenuCaptions[OfficeIntegrationMenuCaptions["New"] = 0] = "New";
            OfficeIntegrationMenuCaptions[OfficeIntegrationMenuCaptions["Open"] = 1] = "Open";
            OfficeIntegrationMenuCaptions[OfficeIntegrationMenuCaptions["CheckIn"] = 2] = "CheckIn";
            OfficeIntegrationMenuCaptions[OfficeIntegrationMenuCaptions["CheckInAs"] = 3] = "CheckInAs";
            OfficeIntegrationMenuCaptions[OfficeIntegrationMenuCaptions["MakeFinal"] = 4] = "MakeFinal";
            OfficeIntegrationMenuCaptions[OfficeIntegrationMenuCaptions["CheckInOnClose"] = 5] = "CheckInOnClose";
            OfficeIntegrationMenuCaptions[OfficeIntegrationMenuCaptions["RecordProperties"] = 6] = "RecordProperties";
            OfficeIntegrationMenuCaptions[OfficeIntegrationMenuCaptions["Picture"] = 7] = "Picture";
            OfficeIntegrationMenuCaptions[OfficeIntegrationMenuCaptions["TextFromFile"] = 8] = "TextFromFile";
            OfficeIntegrationMenuCaptions[OfficeIntegrationMenuCaptions["Object"] = 9] = "Object";
            OfficeIntegrationMenuCaptions[OfficeIntegrationMenuCaptions["CheckInWithStyle"] = 10] = "CheckInWithStyle";
            OfficeIntegrationMenuCaptions[OfficeIntegrationMenuCaptions["OpenRecord"] = 11] = "OpenRecord";
            OfficeIntegrationMenuCaptions[OfficeIntegrationMenuCaptions["OpenContainer"] = 12] = "OpenContainer";
            OfficeIntegrationMenuCaptions[OfficeIntegrationMenuCaptions["Classification"] = 13] = "Classification";
            OfficeIntegrationMenuCaptions[OfficeIntegrationMenuCaptions["CheckInAttachments"] = 14] = "CheckInAttachments";
            OfficeIntegrationMenuCaptions[OfficeIntegrationMenuCaptions["CheckInStyles"] = 15] = "CheckInStyles";
            OfficeIntegrationMenuCaptions[OfficeIntegrationMenuCaptions["OpenLog"] = 16] = "OpenLog";
            OfficeIntegrationMenuCaptions[OfficeIntegrationMenuCaptions["Container"] = 17] = "Container";
        })(HPTRIM.OfficeIntegrationMenuCaptions || (HPTRIM.OfficeIntegrationMenuCaptions = {}));
        var OfficeIntegrationMenuCaptions = HPTRIM.OfficeIntegrationMenuCaptions;
        (function (OfflineRecordPurpose) {
            OfflineRecordPurpose[OfflineRecordPurpose["AttachToRecord"] = 0] = "AttachToRecord";
            OfflineRecordPurpose[OfflineRecordPurpose["SelectFolder"] = 1] = "SelectFolder";
            OfflineRecordPurpose[OfflineRecordPurpose["CleanupEmptyFolder"] = 2] = "CleanupEmptyFolder";
            OfflineRecordPurpose[OfflineRecordPurpose["Manage"] = 3] = "Manage";
        })(HPTRIM.OfflineRecordPurpose || (HPTRIM.OfflineRecordPurpose = {}));
        var OfflineRecordPurpose = HPTRIM.OfflineRecordPurpose;
        (function (OfflineStatus) {
            OfflineStatus[OfflineStatus["Draft"] = 0] = "Draft";
            OfflineStatus[OfflineStatus["Original"] = 1] = "Original";
            OfflineStatus[OfflineStatus["Modified"] = 2] = "Modified";
            OfflineStatus[OfflineStatus["Reference"] = 3] = "Reference";
            OfflineStatus[OfflineStatus["Container"] = 4] = "Container";
            OfflineStatus[OfflineStatus["Linked"] = 5] = "Linked";
            OfflineStatus[OfflineStatus["Invalid"] = 6] = "Invalid";
        })(HPTRIM.OfflineStatus || (HPTRIM.OfflineStatus = {}));
        var OfflineStatus = HPTRIM.OfflineStatus;
        (function (OldVersionPurgeOptions) {
            OldVersionPurgeOptions[OldVersionPurgeOptions["Purge"] = 0] = "Purge";
            OldVersionPurgeOptions[OldVersionPurgeOptions["Keep"] = 1] = "Keep";
            OldVersionPurgeOptions[OldVersionPurgeOptions["Confirm"] = 2] = "Confirm";
        })(HPTRIM.OldVersionPurgeOptions || (HPTRIM.OldVersionPurgeOptions = {}));
        var OldVersionPurgeOptions = HPTRIM.OldVersionPurgeOptions;
        (function (OpenDocumentStatus) {
            OpenDocumentStatus[OpenDocumentStatus["NotQueued"] = 0] = "NotQueued";
            OpenDocumentStatus[OpenDocumentStatus["Open"] = 1] = "Open";
            OpenDocumentStatus[OpenDocumentStatus["ClosedNeedsConfirm"] = 2] = "ClosedNeedsConfirm";
            OpenDocumentStatus[OpenDocumentStatus["ClosedPending"] = 3] = "ClosedPending";
        })(HPTRIM.OpenDocumentStatus || (HPTRIM.OpenDocumentStatus = {}));
        var OpenDocumentStatus = HPTRIM.OpenDocumentStatus;
        (function (OriginType) {
            OriginType[OriginType["TextFile"] = 0] = "TextFile";
            OriginType[OriginType["WindowsFolder"] = 1] = "WindowsFolder";
            OriginType[OriginType["ExchangeMailbox"] = 2] = "ExchangeMailbox";
            OriginType[OriginType["NotesMailbox"] = 3] = "NotesMailbox";
            OriginType[OriginType["GroupwiseMailbox"] = 4] = "GroupwiseMailbox";
            OriginType[OriginType["SharePoint"] = 5] = "SharePoint";
            OriginType[OriginType["XmlFile"] = 6] = "XmlFile";
            OriginType[OriginType["ControlPoint"] = 7] = "ControlPoint";
            OriginType[OriginType["EmailCapture"] = 8] = "EmailCapture";
            OriginType[OriginType["Generic"] = 9] = "Generic";
            OriginType[OriginType["Custom1"] = 10] = "Custom1";
            OriginType[OriginType["Custom2"] = 11] = "Custom2";
            OriginType[OriginType["Custom3"] = 12] = "Custom3";
            OriginType[OriginType["Custom4"] = 13] = "Custom4";
            OriginType[OriginType["Custom5"] = 14] = "Custom5";
            OriginType[OriginType["Custom6"] = 15] = "Custom6";
            OriginType[OriginType["Custom7"] = 16] = "Custom7";
            OriginType[OriginType["Custom8"] = 17] = "Custom8";
        })(HPTRIM.OriginType || (HPTRIM.OriginType = {}));
        var OriginType = HPTRIM.OriginType;
        (function (OutlineNumberType) {
            OutlineNumberType[OutlineNumberType["StandardDecimal"] = 0] = "StandardDecimal";
            OutlineNumberType[OutlineNumberType["StandardRoman"] = 1] = "StandardRoman";
            OutlineNumberType[OutlineNumberType["DecimalThenRoman"] = 2] = "DecimalThenRoman";
            OutlineNumberType[OutlineNumberType["DecimalAlphaRoman"] = 3] = "DecimalAlphaRoman";
        })(HPTRIM.OutlineNumberType || (HPTRIM.OutlineNumberType = {}));
        var OutlineNumberType = HPTRIM.OutlineNumberType;
        (function (OutputPathTypes) {
            OutputPathTypes[OutputPathTypes["ExtractDocument"] = 0] = "ExtractDocument";
            OutputPathTypes[OutputPathTypes["Reference"] = 1] = "Reference";
            OutputPathTypes[OutputPathTypes["Folder"] = 2] = "Folder";
        })(HPTRIM.OutputPathTypes || (HPTRIM.OutputPathTypes = {}));
        var OutputPathTypes = HPTRIM.OutputPathTypes;
        (function (PathTypes) {
            PathTypes[PathTypes["UserSpecified"] = 0] = "UserSpecified";
            PathTypes[PathTypes["ProgramFiles"] = 1] = "ProgramFiles";
            PathTypes[PathTypes["TrimBinaries"] = 2] = "TrimBinaries";
            PathTypes[PathTypes["Windows"] = 3] = "Windows";
            PathTypes[PathTypes["WindowsSystem"] = 4] = "WindowsSystem";
        })(HPTRIM.PathTypes || (HPTRIM.PathTypes = {}));
        var PathTypes = HPTRIM.PathTypes;
        (function (PendingEventReviewFilter) {
            PendingEventReviewFilter[PendingEventReviewFilter["IgnoreReviewDate"] = 0] = "IgnoreReviewDate";
            PendingEventReviewFilter[PendingEventReviewFilter["NotForReview"] = 1] = "NotForReview";
            PendingEventReviewFilter[PendingEventReviewFilter["WithReview"] = 2] = "WithReview";
            PendingEventReviewFilter[PendingEventReviewFilter["WithReviewCurrent"] = 3] = "WithReviewCurrent";
        })(HPTRIM.PendingEventReviewFilter || (HPTRIM.PendingEventReviewFilter = {}));
        var PendingEventReviewFilter = HPTRIM.PendingEventReviewFilter;
        (function (PluginPageType) {
            PluginPageType[PluginPageType["NoPage"] = 0] = "NoPage";
            PluginPageType[PluginPageType["AddAtEnd"] = 1] = "AddAtEnd";
            PluginPageType[PluginPageType["AddAtStart"] = 2] = "AddAtStart";
            PluginPageType[PluginPageType["Replace"] = 3] = "Replace";
        })(HPTRIM.PluginPageType || (HPTRIM.PluginPageType = {}));
        var PluginPageType = HPTRIM.PluginPageType;
        (function (Powerpoint11FileTypes) {
            Powerpoint11FileTypes[Powerpoint11FileTypes["Ppt2003_ppt"] = 0] = "Ppt2003_ppt";
            Powerpoint11FileTypes[Powerpoint11FileTypes["Ppt2003Tmpl_pot"] = 1] = "Ppt2003Tmpl_pot";
            Powerpoint11FileTypes[Powerpoint11FileTypes["Ppt2003Show_pps"] = 2] = "Ppt2003Show_pps";
        })(HPTRIM.Powerpoint11FileTypes || (HPTRIM.Powerpoint11FileTypes = {}));
        var Powerpoint11FileTypes = HPTRIM.Powerpoint11FileTypes;
        (function (PowerpointFileTypes) {
            PowerpointFileTypes[PowerpointFileTypes["Ppt_pptx"] = 0] = "Ppt_pptx";
            PowerpointFileTypes[PowerpointFileTypes["PptMe_pptm"] = 1] = "PptMe_pptm";
            PowerpointFileTypes[PowerpointFileTypes["Ppt97_ppt"] = 2] = "Ppt97_ppt";
            PowerpointFileTypes[PowerpointFileTypes["PptTemp_potx"] = 3] = "PptTemp_potx";
            PowerpointFileTypes[PowerpointFileTypes["PptTmplMe_potm"] = 4] = "PptTmplMe_potm";
            PowerpointFileTypes[PowerpointFileTypes["Ppt97Tmpl_pot"] = 5] = "Ppt97Tmpl_pot";
            PowerpointFileTypes[PowerpointFileTypes["PptShow_ppsx"] = 6] = "PptShow_ppsx";
            PowerpointFileTypes[PowerpointFileTypes["PptShowMe_ppsm"] = 7] = "PptShowMe_ppsm";
            PowerpointFileTypes[PowerpointFileTypes["Ppt97Show_pps"] = 8] = "Ppt97Show_pps";
            PowerpointFileTypes[PowerpointFileTypes["PptOpenDocument_odp"] = 9] = "PptOpenDocument_odp";
        })(HPTRIM.PowerpointFileTypes || (HPTRIM.PowerpointFileTypes = {}));
        var PowerpointFileTypes = HPTRIM.PowerpointFileTypes;
        (function (PowerpointOpenFileTypes) {
            PowerpointOpenFileTypes[PowerpointOpenFileTypes["AllRecords"] = 0] = "AllRecords";
            PowerpointOpenFileTypes[PowerpointOpenFileTypes["AllFiles"] = 1] = "AllFiles";
            PowerpointOpenFileTypes[PowerpointOpenFileTypes["AllpptFiles"] = 2] = "AllpptFiles";
            PowerpointOpenFileTypes[PowerpointOpenFileTypes["PptFiles"] = 3] = "PptFiles";
            PowerpointOpenFileTypes[PowerpointOpenFileTypes["Ppt97Files"] = 4] = "Ppt97Files";
            PowerpointOpenFileTypes[PowerpointOpenFileTypes["AllpptTmpl"] = 5] = "AllpptTmpl";
            PowerpointOpenFileTypes[PowerpointOpenFileTypes["PptMacroTmpls"] = 6] = "PptMacroTmpls";
            PowerpointOpenFileTypes[PowerpointOpenFileTypes["Ppt97Tmpls"] = 7] = "Ppt97Tmpls";
            PowerpointOpenFileTypes[PowerpointOpenFileTypes["Otherppt"] = 8] = "Otherppt";
        })(HPTRIM.PowerpointOpenFileTypes || (HPTRIM.PowerpointOpenFileTypes = {}));
        var PowerpointOpenFileTypes = HPTRIM.PowerpointOpenFileTypes;
        (function (PrefetchStyles) {
            PrefetchStyles[PrefetchStyles["Never"] = 0] = "Never";
            PrefetchStyles[PrefetchStyles["Basic"] = 1] = "Basic";
            PrefetchStyles[PrefetchStyles["Complete"] = 2] = "Complete";
        })(HPTRIM.PrefetchStyles || (HPTRIM.PrefetchStyles = {}));
        var PrefetchStyles = HPTRIM.PrefetchStyles;
        (function (PrimaryRecordStatisticsGrouping) {
            PrimaryRecordStatisticsGrouping[PrimaryRecordStatisticsGrouping["None"] = 0] = "None";
            PrimaryRecordStatisticsGrouping[PrimaryRecordStatisticsGrouping["RecordType"] = 1] = "RecordType";
            PrimaryRecordStatisticsGrouping[PrimaryRecordStatisticsGrouping["Classification"] = 2] = "Classification";
            PrimaryRecordStatisticsGrouping[PrimaryRecordStatisticsGrouping["RetentionSchedule"] = 3] = "RetentionSchedule";
            PrimaryRecordStatisticsGrouping[PrimaryRecordStatisticsGrouping["Jurisdiction"] = 4] = "Jurisdiction";
        })(HPTRIM.PrimaryRecordStatisticsGrouping || (HPTRIM.PrimaryRecordStatisticsGrouping = {}));
        var PrimaryRecordStatisticsGrouping = HPTRIM.PrimaryRecordStatisticsGrouping;
        (function (Priority) {
            Priority[Priority["VeryHigh"] = 0] = "VeryHigh";
            Priority[Priority["High"] = 1] = "High";
            Priority[Priority["Medium"] = 2] = "Medium";
            Priority[Priority["Low"] = 3] = "Low";
            Priority[Priority["VeryLow"] = 4] = "VeryLow";
        })(HPTRIM.Priority || (HPTRIM.Priority = {}));
        var Priority = HPTRIM.Priority;
        (function (ProductFeatures) {
            ProductFeatures[ProductFeatures["Workflow"] = 0] = "Workflow";
            ProductFeatures[ProductFeatures["Keywords"] = 1] = "Keywords";
            ProductFeatures[ProductFeatures["SpaceManagement"] = 2] = "SpaceManagement";
            ProductFeatures[ProductFeatures["PhysicalRecords"] = 3] = "PhysicalRecords";
            ProductFeatures[ProductFeatures["Classifications"] = 4] = "Classifications";
            ProductFeatures[ProductFeatures["Retention"] = 5] = "Retention";
            ProductFeatures[ProductFeatures["Communications"] = 6] = "Communications";
            ProductFeatures[ProductFeatures["Meetings"] = 7] = "Meetings";
            ProductFeatures[ProductFeatures["Rendering"] = 8] = "Rendering";
            ProductFeatures[ProductFeatures["AnnotateRedact"] = 9] = "AnnotateRedact";
            ProductFeatures[ProductFeatures["Jurisdictions"] = 10] = "Jurisdictions";
            ProductFeatures[ProductFeatures["Sharepoint"] = 11] = "Sharepoint";
            ProductFeatures[ProductFeatures["ContentIndexing"] = 12] = "ContentIndexing";
            ProductFeatures[ProductFeatures["ClassifiedSecurity"] = 13] = "ClassifiedSecurity";
            ProductFeatures[ProductFeatures["Labels"] = 14] = "Labels";
            ProductFeatures[ProductFeatures["Actions"] = 15] = "Actions";
            ProductFeatures[ProductFeatures["TodoItems"] = 16] = "TodoItems";
            ProductFeatures[ProductFeatures["Requests"] = 17] = "Requests";
            ProductFeatures[ProductFeatures["Origins"] = 18] = "Origins";
            ProductFeatures[ProductFeatures["Holds"] = 19] = "Holds";
            ProductFeatures[ProductFeatures["Series"] = 20] = "Series";
            ProductFeatures[ProductFeatures["TemplatesAndContentBlocks"] = 21] = "TemplatesAndContentBlocks";
            ProductFeatures[ProductFeatures["EmbeddedLinks"] = 22] = "EmbeddedLinks";
            ProductFeatures[ProductFeatures["WebAndXMLPublishing"] = 23] = "WebAndXMLPublishing";
            ProductFeatures[ProductFeatures["DocumentQueues"] = 24] = "DocumentQueues";
            ProductFeatures[ProductFeatures["VitalRecords"] = 25] = "VitalRecords";
            ProductFeatures[ProductFeatures["Alerts"] = 26] = "Alerts";
            ProductFeatures[ProductFeatures["Parts"] = 27] = "Parts";
            ProductFeatures[ProductFeatures["Versions"] = 28] = "Versions";
            ProductFeatures[ProductFeatures["ReportsAndStatistics"] = 29] = "ReportsAndStatistics";
            ProductFeatures[ProductFeatures["SAPintegration"] = 30] = "SAPintegration";
            ProductFeatures[ProductFeatures["VeoRendering"] = 31] = "VeoRendering";
            ProductFeatures[ProductFeatures["ExternalStores"] = 32] = "ExternalStores";
            ProductFeatures[ProductFeatures["ManageInPlace"] = 33] = "ManageInPlace";
            ProductFeatures[ProductFeatures["AdvancedRequests"] = 34] = "AdvancedRequests";
            ProductFeatures[ProductFeatures["DocumentHashing"] = 35] = "DocumentHashing";
            ProductFeatures[ProductFeatures["CenteraStorage"] = 36] = "CenteraStorage";
            ProductFeatures[ProductFeatures["WebClient"] = 37] = "WebClient";
            ProductFeatures[ProductFeatures["SharePointZF"] = 38] = "SharePointZF";
            ProductFeatures[ProductFeatures["ClientMatter"] = 39] = "ClientMatter";
            ProductFeatures[ProductFeatures["AdvancedDisposal"] = 40] = "AdvancedDisposal";
            ProductFeatures[ProductFeatures["AutoClassification"] = 41] = "AutoClassification";
            ProductFeatures[ProductFeatures["TieredStorage"] = 42] = "TieredStorage";
            ProductFeatures[ProductFeatures["StoreEncryption"] = 43] = "StoreEncryption";
            ProductFeatures[ProductFeatures["Srms"] = 44] = "Srms";
            ProductFeatures[ProductFeatures["IcasStorage"] = 45] = "IcasStorage";
            ProductFeatures[ProductFeatures["PhysicalInactiveRecordsManagement"] = 46] = "PhysicalInactiveRecordsManagement";
            ProductFeatures[ProductFeatures["ElectronicInactiveRecordsManagement"] = 47] = "ElectronicInactiveRecordsManagement";
            ProductFeatures[ProductFeatures["GeoLocations"] = 48] = "GeoLocations";
            ProductFeatures[ProductFeatures["CheckinStyles"] = 49] = "CheckinStyles";
            ProductFeatures[ProductFeatures["DocumentReview"] = 50] = "DocumentReview";
            ProductFeatures[ProductFeatures["PolicyCentre"] = 51] = "PolicyCentre";
            ProductFeatures[ProductFeatures["EmailCapture"] = 52] = "EmailCapture";
            ProductFeatures[ProductFeatures["Ldap"] = 53] = "Ldap";
            ProductFeatures[ProductFeatures["AccessExclusions"] = 54] = "AccessExclusions";
            ProductFeatures[ProductFeatures["ExtendedMetadataValidation"] = 55] = "ExtendedMetadataValidation";
            ProductFeatures[ProductFeatures["AmazonStorage"] = 56] = "AmazonStorage";
            ProductFeatures[ProductFeatures["AzureStorage"] = 57] = "AzureStorage";
            ProductFeatures[ProductFeatures["SecCompliance"] = 58] = "SecCompliance";
            ProductFeatures[ProductFeatures["EventBasedArchiving"] = 59] = "EventBasedArchiving";
            ProductFeatures[ProductFeatures["ExternalSharing"] = 60] = "ExternalSharing";
            ProductFeatures[ProductFeatures["ExternalWorkflow"] = 61] = "ExternalWorkflow";
            ProductFeatures[ProductFeatures["ExternalFolderSynchronization"] = 62] = "ExternalFolderSynchronization";
            ProductFeatures[ProductFeatures["UserDashBoard"] = 63] = "UserDashBoard";
            ProductFeatures[ProductFeatures["RecycleBin"] = 64] = "RecycleBin";
        })(HPTRIM.ProductFeatures || (HPTRIM.ProductFeatures = {}));
        var ProductFeatures = HPTRIM.ProductFeatures;
        (function (ProductString) {
            ProductString[ProductString["Trim"] = 0] = "Trim";
            ProductString[ProductString["Desktop"] = 1] = "Desktop";
            ProductString[ProductString["WebDrawer"] = 2] = "WebDrawer";
            ProductString[ProductString["CompanyName"] = 3] = "CompanyName";
            ProductString[ProductString["QueueProcessor"] = 4] = "QueueProcessor";
            ProductString[ProductString["Workgroup"] = 5] = "Workgroup";
            ProductString[ProductString["EventProcessor"] = 6] = "EventProcessor";
            ProductString[ProductString["ImportTool"] = 7] = "ImportTool";
            ProductString[ProductString["OutlookAddin"] = 8] = "OutlookAddin";
            ProductString[ProductString["OfflineRecords"] = 9] = "OfflineRecords";
            ProductString[ProductString["EmailViewer"] = 10] = "EmailViewer";
            ProductString[ProductString["WebSiteTitle"] = 11] = "WebSiteTitle";
            ProductString[ProductString["WebSiteURL"] = 12] = "WebSiteURL";
            ProductString[ProductString["Render"] = 13] = "Render";
            ProductString[ProductString["EnterpriseStudio"] = 14] = "EnterpriseStudio";
            ProductString[ProductString["DropZone"] = 15] = "DropZone";
            ProductString[ProductString["WebClient"] = 16] = "WebClient";
            ProductString[ProductString["WebService"] = 17] = "WebService";
            ProductString[ProductString["SharePoint"] = 18] = "SharePoint";
            ProductString[ProductString["Ldap"] = 19] = "Ldap";
            ProductString[ProductString["Sap"] = 20] = "Sap";
            ProductString[ProductString["Kofax"] = 21] = "Kofax";
            ProductString[ProductString["AuditLogViewer"] = 22] = "AuditLogViewer";
            ProductString[ProductString["PolicyCentreImport"] = 23] = "PolicyCentreImport";
            ProductString[ProductString["ObjectiveConnect"] = 24] = "ObjectiveConnect";
            ProductString[ProductString["ObjectivePerform"] = 25] = "ObjectivePerform";
        })(HPTRIM.ProductString || (HPTRIM.ProductString = {}));
        var ProductString = HPTRIM.ProductString;
        (function (Project11FileTypes) {
            Project11FileTypes[Project11FileTypes["Project2003_mpp"] = 0] = "Project2003_mpp";
            Project11FileTypes[Project11FileTypes["ProjectTmpl2003_mpt"] = 1] = "ProjectTmpl2003_mpt";
        })(HPTRIM.Project11FileTypes || (HPTRIM.Project11FileTypes = {}));
        var Project11FileTypes = HPTRIM.Project11FileTypes;
        (function (ProjectFileTypes) {
            ProjectFileTypes[ProjectFileTypes["Project_mpp"] = 0] = "Project_mpp";
            ProjectFileTypes[ProjectFileTypes["Project2007_mpp"] = 1] = "Project2007_mpp";
            ProjectFileTypes[ProjectFileTypes["Project2000_mpp"] = 2] = "Project2000_mpp";
            ProjectFileTypes[ProjectFileTypes["ProjectTmpl_mpt"] = 3] = "ProjectTmpl_mpt";
        })(HPTRIM.ProjectFileTypes || (HPTRIM.ProjectFileTypes = {}));
        var ProjectFileTypes = HPTRIM.ProjectFileTypes;
        (function (ProjectOpenFileTypes) {
            ProjectOpenFileTypes[ProjectOpenFileTypes["AllRecords"] = 0] = "AllRecords";
            ProjectOpenFileTypes[ProjectOpenFileTypes["AllFiles"] = 1] = "AllFiles";
            ProjectOpenFileTypes[ProjectOpenFileTypes["AllprjFiles"] = 2] = "AllprjFiles";
            ProjectOpenFileTypes[ProjectOpenFileTypes["PrjFiles"] = 3] = "PrjFiles";
            ProjectOpenFileTypes[ProjectOpenFileTypes["AllprjTmpl"] = 4] = "AllprjTmpl";
            ProjectOpenFileTypes[ProjectOpenFileTypes["Otherprj"] = 5] = "Otherprj";
        })(HPTRIM.ProjectOpenFileTypes || (HPTRIM.ProjectOpenFileTypes = {}));
        var ProjectOpenFileTypes = HPTRIM.ProjectOpenFileTypes;
        (function (PropertiesStringType) {
            PropertiesStringType[PropertiesStringType["AsTreeRow"] = 0] = "AsTreeRow";
            PropertiesStringType[PropertiesStringType["AsViewPane"] = 1] = "AsViewPane";
            PropertiesStringType[PropertiesStringType["AsDefault"] = 2] = "AsDefault";
        })(HPTRIM.PropertiesStringType || (HPTRIM.PropertiesStringType = {}));
        var PropertiesStringType = HPTRIM.PropertiesStringType;
        (function (PropertyFormats) {
            PropertyFormats[PropertyFormats["String"] = 0] = "String";
            PropertyFormats[PropertyFormats["Number"] = 1] = "Number";
            PropertyFormats[PropertyFormats["Boolean"] = 2] = "Boolean";
            PropertyFormats[PropertyFormats["Date"] = 3] = "Date";
            PropertyFormats[PropertyFormats["Datetime"] = 4] = "Datetime";
            PropertyFormats[PropertyFormats["Decimal"] = 5] = "Decimal";
            PropertyFormats[PropertyFormats["Currency"] = 6] = "Currency";
            PropertyFormats[PropertyFormats["Enum"] = 7] = "Enum";
            PropertyFormats[PropertyFormats["Object"] = 8] = "Object";
            PropertyFormats[PropertyFormats["BigNumber"] = 9] = "BigNumber";
            PropertyFormats[PropertyFormats["Geography"] = 10] = "Geography";
        })(HPTRIM.PropertyFormats || (HPTRIM.PropertyFormats = {}));
        var PropertyFormats = HPTRIM.PropertyFormats;
        (function (PropertyOrFieldFormat) {
            PropertyOrFieldFormat[PropertyOrFieldFormat["String"] = 0] = "String";
            PropertyOrFieldFormat[PropertyOrFieldFormat["Number"] = 1] = "Number";
            PropertyOrFieldFormat[PropertyOrFieldFormat["Boolean"] = 2] = "Boolean";
            PropertyOrFieldFormat[PropertyOrFieldFormat["Date"] = 3] = "Date";
            PropertyOrFieldFormat[PropertyOrFieldFormat["Datetime"] = 4] = "Datetime";
            PropertyOrFieldFormat[PropertyOrFieldFormat["Decimal"] = 5] = "Decimal";
            PropertyOrFieldFormat[PropertyOrFieldFormat["Text"] = 6] = "Text";
            PropertyOrFieldFormat[PropertyOrFieldFormat["Currency"] = 7] = "Currency";
            PropertyOrFieldFormat[PropertyOrFieldFormat["Enum"] = 8] = "Enum";
            PropertyOrFieldFormat[PropertyOrFieldFormat["Object"] = 9] = "Object";
            PropertyOrFieldFormat[PropertyOrFieldFormat["BigNumber"] = 10] = "BigNumber";
            PropertyOrFieldFormat[PropertyOrFieldFormat["Xml"] = 11] = "Xml";
            PropertyOrFieldFormat[PropertyOrFieldFormat["Geography"] = 12] = "Geography";
        })(HPTRIM.PropertyOrFieldFormat || (HPTRIM.PropertyOrFieldFormat = {}));
        var PropertyOrFieldFormat = HPTRIM.PropertyOrFieldFormat;
        (function (PropertySortMode) {
            PropertySortMode[PropertySortMode["None"] = 0] = "None";
            PropertySortMode[PropertySortMode["AlphaNoCase"] = 1] = "AlphaNoCase";
            PropertySortMode[PropertySortMode["AlphaCase"] = 2] = "AlphaCase";
            PropertySortMode[PropertySortMode["Numeric"] = 3] = "Numeric";
            PropertySortMode[PropertySortMode["Icon"] = 4] = "Icon";
            PropertySortMode[PropertySortMode["OwnerEvent"] = 5] = "OwnerEvent";
            PropertySortMode[PropertySortMode["Date"] = 6] = "Date";
            PropertySortMode[PropertySortMode["Time"] = 7] = "Time";
            PropertySortMode[PropertySortMode["DateTime"] = 8] = "DateTime";
            PropertySortMode[PropertySortMode["FileSize"] = 9] = "FileSize";
            PropertySortMode[PropertySortMode["AlphaNoCaseEnhanced"] = 10] = "AlphaNoCaseEnhanced";
            PropertySortMode[PropertySortMode["AlphaCaseEnhanced"] = 11] = "AlphaCaseEnhanced";
            PropertySortMode[PropertySortMode["Currency"] = 12] = "Currency";
            PropertySortMode[PropertySortMode["Url"] = 13] = "Url";
            PropertySortMode[PropertySortMode["Email"] = 14] = "Email";
            PropertySortMode[PropertySortMode["Decimal"] = 15] = "Decimal";
        })(HPTRIM.PropertySortMode || (HPTRIM.PropertySortMode = {}));
        var PropertySortMode = HPTRIM.PropertySortMode;
        (function (PsoActionType) {
            PsoActionType[PsoActionType["PutInBox"] = 0] = "PutInBox";
            PsoActionType[PsoActionType["MoveToNewHome"] = 1] = "MoveToNewHome";
        })(HPTRIM.PsoActionType || (HPTRIM.PsoActionType = {}));
        var PsoActionType = HPTRIM.PsoActionType;
        (function (PsoDateType) {
            PsoDateType[PsoDateType["DateClosed"] = 0] = "DateClosed";
            PsoDateType[PsoDateType["DateInactive"] = 1] = "DateInactive";
            PsoDateType[PsoDateType["DateLastAction"] = 2] = "DateLastAction";
            PsoDateType[PsoDateType["DateFinalized"] = 3] = "DateFinalized";
            PsoDateType[PsoDateType["DatePublished"] = 4] = "DatePublished";
            PsoDateType[PsoDateType["DateUpdated"] = 5] = "DateUpdated";
        })(HPTRIM.PsoDateType || (HPTRIM.PsoDateType = {}));
        var PsoDateType = HPTRIM.PsoDateType;
        (function (QueueCapability) {
            QueueCapability[QueueCapability["Lock"] = 0] = "Lock";
            QueueCapability[QueueCapability["Filter"] = 1] = "Filter";
            QueueCapability[QueueCapability["SubFolder"] = 2] = "SubFolder";
            QueueCapability[QueueCapability["CheckOut"] = 3] = "CheckOut";
            QueueCapability[QueueCapability["Rendition"] = 4] = "Rendition";
        })(HPTRIM.QueueCapability || (HPTRIM.QueueCapability = {}));
        var QueueCapability = HPTRIM.QueueCapability;
        (function (QueueItemAttributes) {
            QueueItemAttributes[QueueItemAttributes["ShortName"] = 0] = "ShortName";
            QueueItemAttributes[QueueItemAttributes["Type"] = 1] = "Type";
            QueueItemAttributes[QueueItemAttributes["Size"] = 2] = "Size";
            QueueItemAttributes[QueueItemAttributes["Date"] = 3] = "Date";
            QueueItemAttributes[QueueItemAttributes["FullName"] = 4] = "FullName";
            QueueItemAttributes[QueueItemAttributes["Status"] = 5] = "Status";
            QueueItemAttributes[QueueItemAttributes["RecordUri"] = 6] = "RecordUri";
            QueueItemAttributes[QueueItemAttributes["RecordId"] = 7] = "RecordId";
            QueueItemAttributes[QueueItemAttributes["RecordTitle"] = 8] = "RecordTitle";
            QueueItemAttributes[QueueItemAttributes["ExtendedStatus"] = 9] = "ExtendedStatus";
        })(HPTRIM.QueueItemAttributes || (HPTRIM.QueueItemAttributes = {}));
        var QueueItemAttributes = HPTRIM.QueueItemAttributes;
        (function (QueueTypes) {
            QueueTypes[QueueTypes["WinFolder"] = 0] = "WinFolder";
            QueueTypes[QueueTypes["NotesFolder"] = 1] = "NotesFolder";
            QueueTypes[QueueTypes["MapiFolder"] = 2] = "MapiFolder";
        })(HPTRIM.QueueTypes || (HPTRIM.QueueTypes = {}));
        var QueueTypes = HPTRIM.QueueTypes;
        (function (QueueUsageType) {
            QueueUsageType[QueueUsageType["Unspecified"] = 0] = "Unspecified";
            QueueUsageType[QueueUsageType["Process"] = 1] = "Process";
            QueueUsageType[QueueUsageType["Maintain"] = 2] = "Maintain";
            QueueUsageType[QueueUsageType["CheckoutTo"] = 3] = "CheckoutTo";
            QueueUsageType[QueueUsageType["AutoProcess"] = 4] = "AutoProcess";
        })(HPTRIM.QueueUsageType || (HPTRIM.QueueUsageType = {}));
        var QueueUsageType = HPTRIM.QueueUsageType;
        (function (RecLocSubTypes) {
            RecLocSubTypes[RecLocSubTypes["AtLocation"] = 0] = "AtLocation";
            RecLocSubTypes[RecLocSubTypes["AtHome"] = 1] = "AtHome";
            RecLocSubTypes[RecLocSubTypes["InContainer"] = 2] = "InContainer";
            RecLocSubTypes[RecLocSubTypes["InSpace"] = 3] = "InSpace";
            RecLocSubTypes[RecLocSubTypes["Unknown"] = 4] = "Unknown";
        })(HPTRIM.RecLocSubTypes || (HPTRIM.RecLocSubTypes = {}));
        var RecLocSubTypes = HPTRIM.RecLocSubTypes;
        (function (RecordAccess) {
            RecordAccess[RecordAccess["ViewDocument"] = 0] = "ViewDocument";
            RecordAccess[RecordAccess["ViewRecord"] = 1] = "ViewRecord";
            RecordAccess[RecordAccess["UpdateDocument"] = 2] = "UpdateDocument";
            RecordAccess[RecordAccess["UpdateMetadata"] = 3] = "UpdateMetadata";
            RecordAccess[RecordAccess["ModifyAccess"] = 4] = "ModifyAccess";
            RecordAccess[RecordAccess["DestroyRecord"] = 5] = "DestroyRecord";
            RecordAccess[RecordAccess["AddContents"] = 6] = "AddContents";
        })(HPTRIM.RecordAccess || (HPTRIM.RecordAccess = {}));
        var RecordAccess = HPTRIM.RecordAccess;
        (function (RecordBehaviour) {
            RecordBehaviour[RecordBehaviour["Document"] = 0] = "Document";
            RecordBehaviour[RecordBehaviour["Folder"] = 1] = "Folder";
            RecordBehaviour[RecordBehaviour["Series"] = 2] = "Series";
            RecordBehaviour[RecordBehaviour["Box"] = 3] = "Box";
            RecordBehaviour[RecordBehaviour["Custom1"] = 4] = "Custom1";
            RecordBehaviour[RecordBehaviour["Custom2"] = 5] = "Custom2";
            RecordBehaviour[RecordBehaviour["Custom3"] = 6] = "Custom3";
            RecordBehaviour[RecordBehaviour["Custom4"] = 7] = "Custom4";
            RecordBehaviour[RecordBehaviour["Custom5"] = 8] = "Custom5";
            RecordBehaviour[RecordBehaviour["Custom6"] = 9] = "Custom6";
            RecordBehaviour[RecordBehaviour["Custom7"] = 10] = "Custom7";
            RecordBehaviour[RecordBehaviour["Custom8"] = 11] = "Custom8";
            RecordBehaviour[RecordBehaviour["Custom9"] = 12] = "Custom9";
            RecordBehaviour[RecordBehaviour["Custom10"] = 13] = "Custom10";
            RecordBehaviour[RecordBehaviour["PaperFolder"] = 14] = "PaperFolder";
            RecordBehaviour[RecordBehaviour["Template"] = 15] = "Template";
            RecordBehaviour[RecordBehaviour["ContentBlock"] = 16] = "ContentBlock";
            RecordBehaviour[RecordBehaviour["SharepointSite"] = 17] = "SharepointSite";
            RecordBehaviour[RecordBehaviour["SharepointList"] = 18] = "SharepointList";
            RecordBehaviour[RecordBehaviour["Client"] = 19] = "Client";
            RecordBehaviour[RecordBehaviour["Matter"] = 20] = "Matter";
            RecordBehaviour[RecordBehaviour["SapDocument"] = 21] = "SapDocument";
            RecordBehaviour[RecordBehaviour["SdmFolder"] = 22] = "SdmFolder";
            RecordBehaviour[RecordBehaviour["SdmDocument"] = 23] = "SdmDocument";
        })(HPTRIM.RecordBehaviour || (HPTRIM.RecordBehaviour = {}));
        var RecordBehaviour = HPTRIM.RecordBehaviour;
        (function (RecordClass) {
            RecordClass[RecordClass["Vital"] = 0] = "Vital";
            RecordClass[RecordClass["Corporate"] = 1] = "Corporate";
            RecordClass[RecordClass["WorkGroup"] = 2] = "WorkGroup";
            RecordClass[RecordClass["Personal"] = 3] = "Personal";
            RecordClass[RecordClass["Reference"] = 4] = "Reference";
            RecordClass[RecordClass["Temporary"] = 5] = "Temporary";
        })(HPTRIM.RecordClass || (HPTRIM.RecordClass = {}));
        var RecordClass = HPTRIM.RecordClass;
        (function (RecordDeclassifyTypes) {
            RecordDeclassifyTypes[RecordDeclassifyTypes["OnDate"] = 0] = "OnDate";
            RecordDeclassifyTypes[RecordDeclassifyTypes["YearsAfter"] = 1] = "YearsAfter";
            RecordDeclassifyTypes[RecordDeclassifyTypes["Event"] = 2] = "Event";
            RecordDeclassifyTypes[RecordDeclassifyTypes["Exempt"] = 3] = "Exempt";
        })(HPTRIM.RecordDeclassifyTypes || (HPTRIM.RecordDeclassifyTypes = {}));
        var RecordDeclassifyTypes = HPTRIM.RecordDeclassifyTypes;
        (function (RecordDisp) {
            RecordDisp[RecordDisp["Active"] = 0] = "Active";
            RecordDisp[RecordDisp["Inactive"] = 1] = "Inactive";
            RecordDisp[RecordDisp["Archived"] = 2] = "Archived";
            RecordDisp[RecordDisp["Destroyed"] = 3] = "Destroyed";
            RecordDisp[RecordDisp["Transferred"] = 4] = "Transferred";
        })(HPTRIM.RecordDisp || (HPTRIM.RecordDisp = {}));
        var RecordDisp = HPTRIM.RecordDisp;
        (function (RecordLocationType) {
            RecordLocationType[RecordLocationType["Current"] = 0] = "Current";
            RecordLocationType[RecordLocationType["Home"] = 1] = "Home";
            RecordLocationType[RecordLocationType["Owner"] = 2] = "Owner";
            RecordLocationType[RecordLocationType["Creator"] = 3] = "Creator";
            RecordLocationType[RecordLocationType["Contact"] = 4] = "Contact";
            RecordLocationType[RecordLocationType["Editor"] = 5] = "Editor";
            RecordLocationType[RecordLocationType["Reviewer"] = 6] = "Reviewer";
            RecordLocationType[RecordLocationType["Authorizer"] = 7] = "Authorizer";
        })(HPTRIM.RecordLocationType || (HPTRIM.RecordLocationType = {}));
        var RecordLocationType = HPTRIM.RecordLocationType;
        (function (RecordPurposes) {
            RecordPurposes[RecordPurposes["Any"] = 0] = "Any";
            RecordPurposes[RecordPurposes["FindContainerFor"] = 1] = "FindContainerFor";
            RecordPurposes[RecordPurposes["AttachDocument"] = 2] = "AttachDocument";
            RecordPurposes[RecordPurposes["FindSeries"] = 3] = "FindSeries";
            RecordPurposes[RecordPurposes["EditDocument"] = 4] = "EditDocument";
            RecordPurposes[RecordPurposes["RelateTo"] = 5] = "RelateTo";
            RecordPurposes[RecordPurposes["BrowsingWithinClass"] = 6] = "BrowsingWithinClass";
            RecordPurposes[RecordPurposes["ViewDocument"] = 7] = "ViewDocument";
            RecordPurposes[RecordPurposes["AttachRendition"] = 8] = "AttachRendition";
            RecordPurposes[RecordPurposes["DefaultContainer"] = 9] = "DefaultContainer";
            RecordPurposes[RecordPurposes["SelectClient"] = 10] = "SelectClient";
            RecordPurposes[RecordPurposes["SelectMatter"] = 11] = "SelectMatter";
            RecordPurposes[RecordPurposes["BrowseClientMatter"] = 12] = "BrowseClientMatter";
            RecordPurposes[RecordPurposes["FindAltContainerFor"] = 13] = "FindAltContainerFor";
            RecordPurposes[RecordPurposes["GpsSearch"] = 14] = "GpsSearch";
            RecordPurposes[RecordPurposes["FindTemplate"] = 15] = "FindTemplate";
            RecordPurposes[RecordPurposes["ConsignmentReview"] = 16] = "ConsignmentReview";
            RecordPurposes[RecordPurposes["ConsignmentApprove"] = 17] = "ConsignmentApprove";
            RecordPurposes[RecordPurposes["UserFieldValue"] = 18] = "UserFieldValue";
            RecordPurposes[RecordPurposes["ShowRecycleBin"] = 19] = "ShowRecycleBin";
        })(HPTRIM.RecordPurposes || (HPTRIM.RecordPurposes = {}));
        var RecordPurposes = HPTRIM.RecordPurposes;
        (function (RecordRelationshipType) {
            RecordRelationshipType[RecordRelationshipType["IsRelatedTo"] = 0] = "IsRelatedTo";
            RecordRelationshipType[RecordRelationshipType["IsTempCopy"] = 1] = "IsTempCopy";
            RecordRelationshipType[RecordRelationshipType["IsRootPart"] = 2] = "IsRootPart";
            RecordRelationshipType[RecordRelationshipType["DoesSupersede"] = 3] = "DoesSupersede";
            RecordRelationshipType[RecordRelationshipType["IsInSeries"] = 4] = "IsInSeries";
            RecordRelationshipType[RecordRelationshipType["IsAttachmentOf"] = 5] = "IsAttachmentOf";
            RecordRelationshipType[RecordRelationshipType["IsVersion"] = 6] = "IsVersion";
            RecordRelationshipType[RecordRelationshipType["IsAltIn"] = 7] = "IsAltIn";
            RecordRelationshipType[RecordRelationshipType["Custom1"] = 8] = "Custom1";
            RecordRelationshipType[RecordRelationshipType["Custom2"] = 9] = "Custom2";
            RecordRelationshipType[RecordRelationshipType["Custom3"] = 10] = "Custom3";
            RecordRelationshipType[RecordRelationshipType["Custom4"] = 11] = "Custom4";
            RecordRelationshipType[RecordRelationshipType["Custom5"] = 12] = "Custom5";
            RecordRelationshipType[RecordRelationshipType["Custom6"] = 13] = "Custom6";
            RecordRelationshipType[RecordRelationshipType["Custom7"] = 14] = "Custom7";
            RecordRelationshipType[RecordRelationshipType["Custom8"] = 15] = "Custom8";
            RecordRelationshipType[RecordRelationshipType["Custom9"] = 16] = "Custom9";
            RecordRelationshipType[RecordRelationshipType["Custom10"] = 17] = "Custom10";
            RecordRelationshipType[RecordRelationshipType["RedactionOf"] = 18] = "RedactionOf";
            RecordRelationshipType[RecordRelationshipType["DerivedFrom"] = 19] = "DerivedFrom";
            RecordRelationshipType[RecordRelationshipType["ContainsClause"] = 20] = "ContainsClause";
            RecordRelationshipType[RecordRelationshipType["InSharepointSite"] = 21] = "InSharepointSite";
            RecordRelationshipType[RecordRelationshipType["IsReplyTo"] = 22] = "IsReplyTo";
        })(HPTRIM.RecordRelationshipType || (HPTRIM.RecordRelationshipType = {}));
        var RecordRelationshipType = HPTRIM.RecordRelationshipType;
        (function (RecordSortFields) {
            RecordSortFields[RecordSortFields["None"] = 0] = "None";
            RecordSortFields[RecordSortFields["Number"] = 1] = "Number";
            RecordSortFields[RecordSortFields["FreeTitle"] = 2] = "FreeTitle";
            RecordSortFields[RecordSortFields["ExternalId"] = 3] = "ExternalId";
            RecordSortFields[RecordSortFields["DateRegistered"] = 4] = "DateRegistered";
            RecordSortFields[RecordSortFields["DateCreated"] = 5] = "DateCreated";
            RecordSortFields[RecordSortFields["DateDue"] = 6] = "DateDue";
            RecordSortFields[RecordSortFields["DateClosed"] = 7] = "DateClosed";
            RecordSortFields[RecordSortFields["Priority"] = 8] = "Priority";
            RecordSortFields[RecordSortFields["Consignment"] = 9] = "Consignment";
            RecordSortFields[RecordSortFields["DateInactive"] = 10] = "DateInactive";
            RecordSortFields[RecordSortFields["DateLastAction"] = 11] = "DateLastAction";
            RecordSortFields[RecordSortFields["RecordType"] = 12] = "RecordType";
            RecordSortFields[RecordSortFields["StructuredTitle"] = 13] = "StructuredTitle";
            RecordSortFields[RecordSortFields["DateFinalized"] = 14] = "DateFinalized";
            RecordSortFields[RecordSortFields["DatePublished"] = 15] = "DatePublished";
            RecordSortFields[RecordSortFields["DateUpdated"] = 16] = "DateUpdated";
            RecordSortFields[RecordSortFields["MediaType"] = 17] = "MediaType";
        })(HPTRIM.RecordSortFields || (HPTRIM.RecordSortFields = {}));
        var RecordSortFields = HPTRIM.RecordSortFields;
        (function (RecordTypeFilter) {
            RecordTypeFilter[RecordTypeFilter["All"] = 0] = "All";
            RecordTypeFilter[RecordTypeFilter["Electronic"] = 1] = "Electronic";
            RecordTypeFilter[RecordTypeFilter["AllForCreate"] = 2] = "AllForCreate";
            RecordTypeFilter[RecordTypeFilter["ElectronicForCreate"] = 3] = "ElectronicForCreate";
            RecordTypeFilter[RecordTypeFilter["AllForCreateNoManual"] = 4] = "AllForCreateNoManual";
            RecordTypeFilter[RecordTypeFilter["ElectronicForCreateNoManual"] = 5] = "ElectronicForCreateNoManual";
            RecordTypeFilter[RecordTypeFilter["SuitableForNumberingBy"] = 6] = "SuitableForNumberingBy";
            RecordTypeFilter[RecordTypeFilter["ForRecordSearch"] = 7] = "ForRecordSearch";
            RecordTypeFilter[RecordTypeFilter["OdmaCreateDirect"] = 8] = "OdmaCreateDirect";
            RecordTypeFilter[RecordTypeFilter["FolderToCreate"] = 9] = "FolderToCreate";
            RecordTypeFilter[RecordTypeFilter["FolderToCreateElectronic"] = 10] = "FolderToCreateElectronic";
            RecordTypeFilter[RecordTypeFilter["RecordWithinClassification"] = 11] = "RecordWithinClassification";
            RecordTypeFilter[RecordTypeFilter["RecordWithinClassificationElectronic"] = 12] = "RecordWithinClassificationElectronic";
            RecordTypeFilter[RecordTypeFilter["SimpleWebCreate"] = 13] = "SimpleWebCreate";
            RecordTypeFilter[RecordTypeFilter["ClientCreate"] = 14] = "ClientCreate";
            RecordTypeFilter[RecordTypeFilter["MatterCreate"] = 15] = "MatterCreate";
            RecordTypeFilter[RecordTypeFilter["MatterItemCreate"] = 16] = "MatterItemCreate";
            RecordTypeFilter[RecordTypeFilter["MatterItemCreateElectronic"] = 17] = "MatterItemCreateElectronic";
            RecordTypeFilter[RecordTypeFilter["SharePointListItemRecordCreate"] = 18] = "SharePointListItemRecordCreate";
            RecordTypeFilter[RecordTypeFilter["AutoSubfolderCreation"] = 19] = "AutoSubfolderCreation";
            RecordTypeFilter[RecordTypeFilter["AutoClassificationSubFolder"] = 20] = "AutoClassificationSubFolder";
            RecordTypeFilter[RecordTypeFilter["SdmFolder"] = 21] = "SdmFolder";
            RecordTypeFilter[RecordTypeFilter["SdmDocument"] = 22] = "SdmDocument";
        })(HPTRIM.RecordTypeFilter || (HPTRIM.RecordTypeFilter = {}));
        var RecordTypeFilter = HPTRIM.RecordTypeFilter;
        (function (RecycleReasons) {
            RecycleReasons[RecycleReasons["NotRecycled"] = 0] = "NotRecycled";
            RecycleReasons[RecycleReasons["Duplicate"] = 1] = "Duplicate";
            RecycleReasons[RecycleReasons["WorkingPaper"] = 2] = "WorkingPaper";
            RecycleReasons[RecycleReasons["Draft"] = 3] = "Draft";
            RecycleReasons[RecycleReasons["Reference"] = 4] = "Reference";
            RecycleReasons[RecycleReasons["External"] = 5] = "External";
            RecycleReasons[RecycleReasons["Personal"] = 6] = "Personal";
            RecycleReasons[RecycleReasons["Custom1"] = 7] = "Custom1";
            RecycleReasons[RecycleReasons["Custom2"] = 8] = "Custom2";
            RecycleReasons[RecycleReasons["Custom3"] = 9] = "Custom3";
            RecycleReasons[RecycleReasons["Custom4"] = 10] = "Custom4";
            RecycleReasons[RecycleReasons["Custom5"] = 11] = "Custom5";
        })(HPTRIM.RecycleReasons || (HPTRIM.RecycleReasons = {}));
        var RecycleReasons = HPTRIM.RecycleReasons;
        (function (ReferenceFileApplication) {
            ReferenceFileApplication[ReferenceFileApplication["Trim"] = 0] = "Trim";
            ReferenceFileApplication[ReferenceFileApplication["Desktop"] = 1] = "Desktop";
            ReferenceFileApplication[ReferenceFileApplication["Dropzone"] = 2] = "Dropzone";
        })(HPTRIM.ReferenceFileApplication || (HPTRIM.ReferenceFileApplication = {}));
        var ReferenceFileApplication = HPTRIM.ReferenceFileApplication;
        (function (RenditionType) {
            RenditionType[RenditionType["Dsignature"] = 0] = "Dsignature";
            RenditionType[RenditionType["Ocr"] = 1] = "Ocr";
            RenditionType[RenditionType["Annotation"] = 2] = "Annotation";
            RenditionType[RenditionType["Mif"] = 3] = "Mif";
            RenditionType[RenditionType["Multimedia"] = 4] = "Multimedia";
            RenditionType[RenditionType["NativeMail"] = 5] = "NativeMail";
            RenditionType[RenditionType["Other1"] = 6] = "Other1";
            RenditionType[RenditionType["Other2"] = 7] = "Other2";
            RenditionType[RenditionType["Other3"] = 8] = "Other3";
            RenditionType[RenditionType["Other4"] = 9] = "Other4";
            RenditionType[RenditionType["Other5"] = 10] = "Other5";
            RenditionType[RenditionType["Other6"] = 11] = "Other6";
            RenditionType[RenditionType["Redaction"] = 12] = "Redaction";
            RenditionType[RenditionType["Longevity"] = 13] = "Longevity";
            RenditionType[RenditionType["Redactable"] = 14] = "Redactable";
            RenditionType[RenditionType["SinglePageView"] = 15] = "SinglePageView";
            RenditionType[RenditionType["HtmlRepresentation"] = 16] = "HtmlRepresentation";
            RenditionType[RenditionType["Thumbnail"] = 17] = "Thumbnail";
            RenditionType[RenditionType["SignedCopy"] = 18] = "SignedCopy";
            RenditionType[RenditionType["Original"] = 19] = "Original";
        })(HPTRIM.RenditionType || (HPTRIM.RenditionType = {}));
        var RenditionType = HPTRIM.RenditionType;
        (function (ReporterFonts) {
            ReporterFonts[ReporterFonts["Text"] = 0] = "Text";
            ReporterFonts[ReporterFonts["SubText"] = 1] = "SubText";
            ReporterFonts[ReporterFonts["BigText"] = 2] = "BigText";
            ReporterFonts[ReporterFonts["Title"] = 3] = "Title";
            ReporterFonts[ReporterFonts["SubTitle"] = 4] = "SubTitle";
            ReporterFonts[ReporterFonts["BigTitle"] = 5] = "BigTitle";
            ReporterFonts[ReporterFonts["Caption"] = 6] = "Caption";
            ReporterFonts[ReporterFonts["Number"] = 7] = "Number";
            ReporterFonts[ReporterFonts["Custom1"] = 8] = "Custom1";
            ReporterFonts[ReporterFonts["Custom2"] = 9] = "Custom2";
            ReporterFonts[ReporterFonts["Custom3"] = 10] = "Custom3";
            ReporterFonts[ReporterFonts["Custom4"] = 11] = "Custom4";
            ReporterFonts[ReporterFonts["Custom5"] = 12] = "Custom5";
            ReporterFonts[ReporterFonts["Custom6"] = 13] = "Custom6";
            ReporterFonts[ReporterFonts["Custom7"] = 14] = "Custom7";
            ReporterFonts[ReporterFonts["Custom8"] = 15] = "Custom8";
        })(HPTRIM.ReporterFonts || (HPTRIM.ReporterFonts = {}));
        var ReporterFonts = HPTRIM.ReporterFonts;
        (function (RequestPriority) {
            RequestPriority[RequestPriority["High"] = 0] = "High";
            RequestPriority[RequestPriority["Medium"] = 1] = "Medium";
            RequestPriority[RequestPriority["Low"] = 2] = "Low";
        })(HPTRIM.RequestPriority || (HPTRIM.RequestPriority = {}));
        var RequestPriority = HPTRIM.RequestPriority;
        (function (RequestPurposes) {
            RequestPurposes[RequestPurposes["Maintain"] = 0] = "Maintain";
            RequestPurposes[RequestPurposes["DeleteRecordRequest"] = 1] = "DeleteRecordRequest";
        })(HPTRIM.RequestPurposes || (HPTRIM.RequestPurposes = {}));
        var RequestPurposes = HPTRIM.RequestPurposes;
        (function (RequestStatus) {
            RequestStatus[RequestStatus["NewAwaitingApproval"] = 0] = "NewAwaitingApproval";
            RequestStatus[RequestStatus["New"] = 1] = "New";
            RequestStatus[RequestStatus["AddedToVendor"] = 2] = "AddedToVendor";
            RequestStatus[RequestStatus["PickupReady"] = 3] = "PickupReady";
            RequestStatus[RequestStatus["SentOrder"] = 4] = "SentOrder";
            RequestStatus[RequestStatus["OnPicklist"] = 5] = "OnPicklist";
            RequestStatus[RequestStatus["AtDeliveryLocation"] = 6] = "AtDeliveryLocation";
            RequestStatus[RequestStatus["FinalTransit"] = 7] = "FinalTransit";
            RequestStatus[RequestStatus["Complete"] = 8] = "Complete";
            RequestStatus[RequestStatus["Denied"] = 9] = "Denied";
            RequestStatus[RequestStatus["AcknowlodgeReceipt"] = 10] = "AcknowlodgeReceipt";
            RequestStatus[RequestStatus["Cancelled"] = 11] = "Cancelled";
        })(HPTRIM.RequestStatus || (HPTRIM.RequestStatus = {}));
        var RequestStatus = HPTRIM.RequestStatus;
        (function (RequestTypes) {
            RequestTypes[RequestTypes["RetrieveTemporary"] = 0] = "RetrieveTemporary";
            RequestTypes[RequestTypes["RetrieveRecurring"] = 1] = "RetrieveRecurring";
            RequestTypes[RequestTypes["RetrievePermanent"] = 2] = "RetrievePermanent";
            RequestTypes[RequestTypes["PickupNew"] = 3] = "PickupNew";
            RequestTypes[RequestTypes["PickupReturn"] = 4] = "PickupReturn";
        })(HPTRIM.RequestTypes || (HPTRIM.RequestTypes = {}));
        var RequestTypes = HPTRIM.RequestTypes;
        (function (ResultPostProcessingMethod) {
            ResultPostProcessingMethod[ResultPostProcessingMethod["None"] = 0] = "None";
            ResultPostProcessingMethod[ResultPostProcessingMethod["LatestPart"] = 1] = "LatestPart";
            ResultPostProcessingMethod[ResultPostProcessingMethod["LatestVersion"] = 2] = "LatestVersion";
        })(HPTRIM.ResultPostProcessingMethod || (HPTRIM.ResultPostProcessingMethod = {}));
        var ResultPostProcessingMethod = HPTRIM.ResultPostProcessingMethod;
        (function (RetainOptions) {
            RetainOptions[RetainOptions["CanBeDestroyed"] = 0] = "CanBeDestroyed";
            RetainOptions[RetainOptions["KeepForever"] = 1] = "KeepForever";
            RetainOptions[RetainOptions["KeepForeverInSomeJurisdictions"] = 2] = "KeepForeverInSomeJurisdictions";
        })(HPTRIM.RetainOptions || (HPTRIM.RetainOptions = {}));
        var RetainOptions = HPTRIM.RetainOptions;
        (function (RevRecRelationship) {
            RevRecRelationship[RevRecRelationship["RisRelatedTo"] = 0] = "RisRelatedTo";
            RevRecRelationship[RevRecRelationship["RisTempCopy"] = 1] = "RisTempCopy";
            RevRecRelationship[RevRecRelationship["RisRootPart"] = 2] = "RisRootPart";
            RevRecRelationship[RevRecRelationship["RdoesSupersede"] = 3] = "RdoesSupersede";
            RevRecRelationship[RevRecRelationship["RisInSeries"] = 4] = "RisInSeries";
            RevRecRelationship[RevRecRelationship["RisAttachmentOf"] = 5] = "RisAttachmentOf";
            RevRecRelationship[RevRecRelationship["RisVersion"] = 6] = "RisVersion";
            RevRecRelationship[RevRecRelationship["RisAltIn"] = 7] = "RisAltIn";
            RevRecRelationship[RevRecRelationship["Rcustom1"] = 8] = "Rcustom1";
            RevRecRelationship[RevRecRelationship["Rcustom2"] = 9] = "Rcustom2";
            RevRecRelationship[RevRecRelationship["Rcustom3"] = 10] = "Rcustom3";
            RevRecRelationship[RevRecRelationship["Rcustom4"] = 11] = "Rcustom4";
            RevRecRelationship[RevRecRelationship["Rcustom5"] = 12] = "Rcustom5";
            RevRecRelationship[RevRecRelationship["Rcustom6"] = 13] = "Rcustom6";
            RevRecRelationship[RevRecRelationship["Rcustom7"] = 14] = "Rcustom7";
            RevRecRelationship[RevRecRelationship["Rcustom8"] = 15] = "Rcustom8";
            RevRecRelationship[RevRecRelationship["Rcustom9"] = 16] = "Rcustom9";
            RevRecRelationship[RevRecRelationship["Rcustom10"] = 17] = "Rcustom10";
            RevRecRelationship[RevRecRelationship["RRedactionOf"] = 18] = "RRedactionOf";
            RevRecRelationship[RevRecRelationship["RDerivedFrom"] = 19] = "RDerivedFrom";
            RevRecRelationship[RevRecRelationship["ClauseWithin"] = 20] = "ClauseWithin";
            RevRecRelationship[RevRecRelationship["RinSharepointSite"] = 21] = "RinSharepointSite";
            RevRecRelationship[RevRecRelationship["RisReplyTo"] = 22] = "RisReplyTo";
        })(HPTRIM.RevRecRelationship || (HPTRIM.RevRecRelationship = {}));
        var RevRecRelationship = HPTRIM.RevRecRelationship;
        (function (RmGrammarItem) {
            RmGrammarItem[RmGrammarItem["Part"] = 0] = "Part";
            RmGrammarItem[RmGrammarItem["Parts"] = 1] = "Parts";
        })(HPTRIM.RmGrammarItem || (HPTRIM.RmGrammarItem = {}));
        var RmGrammarItem = HPTRIM.RmGrammarItem;
        (function (RmTerminologyType) {
            RmTerminologyType[RmTerminologyType["TrimClassic"] = 0] = "TrimClassic";
            RmTerminologyType[RmTerminologyType["Us"] = 1] = "Us";
        })(HPTRIM.RmTerminologyType || (HPTRIM.RmTerminologyType = {}));
        var RmTerminologyType = HPTRIM.RmTerminologyType;
        (function (SchedulePurposes) {
            SchedulePurposes[SchedulePurposes["UseItem"] = 0] = "UseItem";
            SchedulePurposes[SchedulePurposes["SearchByItem"] = 1] = "SearchByItem";
            SchedulePurposes[SchedulePurposes["MaintainItem"] = 2] = "MaintainItem";
            SchedulePurposes[SchedulePurposes["ReplaceReferences"] = 3] = "ReplaceReferences";
        })(HPTRIM.SchedulePurposes || (HPTRIM.SchedulePurposes = {}));
        var SchedulePurposes = HPTRIM.SchedulePurposes;
        (function (SearchClauseGroup) {
            SearchClauseGroup[SearchClauseGroup["Name"] = 0] = "Name";
            SearchClauseGroup[SearchClauseGroup["Type"] = 1] = "Type";
            SearchClauseGroup[SearchClauseGroup["Text"] = 2] = "Text";
            SearchClauseGroup[SearchClauseGroup["Linked"] = 3] = "Linked";
            SearchClauseGroup[SearchClauseGroup["Tray"] = 4] = "Tray";
            SearchClauseGroup[SearchClauseGroup["Reference"] = 5] = "Reference";
            SearchClauseGroup[SearchClauseGroup["Document"] = 6] = "Document";
            SearchClauseGroup[SearchClauseGroup["Date"] = 7] = "Date";
            SearchClauseGroup[SearchClauseGroup["Field"] = 8] = "Field";
            SearchClauseGroup[SearchClauseGroup["Retention"] = 9] = "Retention";
            SearchClauseGroup[SearchClauseGroup["Location"] = 10] = "Location";
            SearchClauseGroup[SearchClauseGroup["Process"] = 11] = "Process";
            SearchClauseGroup[SearchClauseGroup["Rm"] = 12] = "Rm";
            SearchClauseGroup[SearchClauseGroup["Security"] = 13] = "Security";
            SearchClauseGroup[SearchClauseGroup["SharePoint"] = 14] = "SharePoint";
            SearchClauseGroup[SearchClauseGroup["Other"] = 15] = "Other";
            SearchClauseGroup[SearchClauseGroup["Favorite"] = 16] = "Favorite";
            SearchClauseGroup[SearchClauseGroup["Recent"] = 17] = "Recent";
            SearchClauseGroup[SearchClauseGroup["ClientMatter"] = 18] = "ClientMatter";
        })(HPTRIM.SearchClauseGroup || (HPTRIM.SearchClauseGroup = {}));
        var SearchClauseGroup = HPTRIM.SearchClauseGroup;
        (function (SearchContactType) {
            SearchContactType[SearchContactType["Author"] = 0] = "Author";
            SearchContactType[SearchContactType["Addressee"] = 1] = "Addressee";
            SearchContactType[SearchContactType["Representative"] = 2] = "Representative";
            SearchContactType[SearchContactType["Other"] = 3] = "Other";
            SearchContactType[SearchContactType["Client"] = 4] = "Client";
            SearchContactType[SearchContactType["Any"] = 5] = "Any";
            SearchContactType[SearchContactType["Custom1"] = 6] = "Custom1";
            SearchContactType[SearchContactType["Custom2"] = 7] = "Custom2";
            SearchContactType[SearchContactType["Custom3"] = 8] = "Custom3";
            SearchContactType[SearchContactType["Custom4"] = 9] = "Custom4";
            SearchContactType[SearchContactType["Custom5"] = 10] = "Custom5";
            SearchContactType[SearchContactType["Custom6"] = 11] = "Custom6";
            SearchContactType[SearchContactType["Custom7"] = 12] = "Custom7";
            SearchContactType[SearchContactType["Custom8"] = 13] = "Custom8";
            SearchContactType[SearchContactType["Custom9"] = 14] = "Custom9";
            SearchContactType[SearchContactType["Custom10"] = 15] = "Custom10";
            SearchContactType[SearchContactType["Cc"] = 16] = "Cc";
            SearchContactType[SearchContactType["Bcc"] = 17] = "Bcc";
        })(HPTRIM.SearchContactType || (HPTRIM.SearchContactType = {}));
        var SearchContactType = HPTRIM.SearchContactType;
        (function (SearchEditor) {
            SearchEditor[SearchEditor["String"] = 0] = "String";
            SearchEditor[SearchEditor["Profile"] = 1] = "Profile";
            SearchEditor[SearchEditor["Boolean"] = 2] = "Boolean";
        })(HPTRIM.SearchEditor || (HPTRIM.SearchEditor = {}));
        var SearchEditor = HPTRIM.SearchEditor;
        (function (SearchFilterTypes) {
            SearchFilterTypes[SearchFilterTypes["All"] = 0] = "All";
            SearchFilterTypes[SearchFilterTypes["RecordType"] = 1] = "RecordType";
            SearchFilterTypes[SearchFilterTypes["Class"] = 2] = "Class";
            SearchFilterTypes[SearchFilterTypes["Disposition"] = 3] = "Disposition";
            SearchFilterTypes[SearchFilterTypes["Finalized"] = 4] = "Finalized";
            SearchFilterTypes[SearchFilterTypes["FileType"] = 5] = "FileType";
            SearchFilterTypes[SearchFilterTypes["DateRegistered"] = 6] = "DateRegistered";
            SearchFilterTypes[SearchFilterTypes["Subselect"] = 7] = "Subselect";
        })(HPTRIM.SearchFilterTypes || (HPTRIM.SearchFilterTypes = {}));
        var SearchFilterTypes = HPTRIM.SearchFilterTypes;
        (function (SearchGrammarItem) {
            SearchGrammarItem[SearchGrammarItem["And"] = 0] = "And";
            SearchGrammarItem[SearchGrammarItem["Or"] = 1] = "Or";
            SearchGrammarItem[SearchGrammarItem["Not"] = 2] = "Not";
            SearchGrammarItem[SearchGrammarItem["To"] = 3] = "To";
            SearchGrammarItem[SearchGrammarItem["Fiscal"] = 4] = "Fiscal";
            SearchGrammarItem[SearchGrammarItem["Fy"] = 5] = "Fy";
            SearchGrammarItem[SearchGrammarItem["ToDate"] = 6] = "ToDate";
            SearchGrammarItem[SearchGrammarItem["Case"] = 7] = "Case";
            SearchGrammarItem[SearchGrammarItem["Whole"] = 8] = "Whole";
            SearchGrammarItem[SearchGrammarItem["Me"] = 9] = "Me";
            SearchGrammarItem[SearchGrammarItem["MyPosition"] = 10] = "MyPosition";
            SearchGrammarItem[SearchGrammarItem["MyUnit"] = 11] = "MyUnit";
            SearchGrammarItem[SearchGrammarItem["MyOrganization"] = 12] = "MyOrganization";
            SearchGrammarItem[SearchGrammarItem["Blank"] = 13] = "Blank";
            SearchGrammarItem[SearchGrammarItem["Of"] = 14] = "Of";
            SearchGrammarItem[SearchGrammarItem["Part"] = 15] = "Part";
            SearchGrammarItem[SearchGrammarItem["Parts"] = 16] = "Parts";
            SearchGrammarItem[SearchGrammarItem["Within"] = 17] = "Within";
            SearchGrammarItem[SearchGrammarItem["Null"] = 18] = "Null";
        })(HPTRIM.SearchGrammarItem || (HPTRIM.SearchGrammarItem = {}));
        var SearchGrammarItem = HPTRIM.SearchGrammarItem;
        (function (SearchLocationType) {
            SearchLocationType[SearchLocationType["Current"] = 0] = "Current";
            SearchLocationType[SearchLocationType["Home"] = 1] = "Home";
            SearchLocationType[SearchLocationType["Owner"] = 2] = "Owner";
            SearchLocationType[SearchLocationType["Creator"] = 3] = "Creator";
            SearchLocationType[SearchLocationType["CheckedOutTo"] = 4] = "CheckedOutTo";
        })(HPTRIM.SearchLocationType || (HPTRIM.SearchLocationType = {}));
        var SearchLocationType = HPTRIM.SearchLocationType;
        (function (SearchParameterFormats) {
            SearchParameterFormats[SearchParameterFormats["Word"] = 0] = "Word";
            SearchParameterFormats[SearchParameterFormats["SimpleText"] = 1] = "SimpleText";
            SearchParameterFormats[SearchParameterFormats["ChildList"] = 2] = "ChildList";
            SearchParameterFormats[SearchParameterFormats["Freetext"] = 3] = "Freetext";
            SearchParameterFormats[SearchParameterFormats["String"] = 4] = "String";
            SearchParameterFormats[SearchParameterFormats["Boolean"] = 5] = "Boolean";
            SearchParameterFormats[SearchParameterFormats["DateRange"] = 6] = "DateRange";
            SearchParameterFormats[SearchParameterFormats["Number"] = 7] = "Number";
            SearchParameterFormats[SearchParameterFormats["BigNumber"] = 8] = "BigNumber";
            SearchParameterFormats[SearchParameterFormats["Decimal"] = 9] = "Decimal";
            SearchParameterFormats[SearchParameterFormats["Currency"] = 10] = "Currency";
            SearchParameterFormats[SearchParameterFormats["Enum"] = 11] = "Enum";
            SearchParameterFormats[SearchParameterFormats["Object"] = 12] = "Object";
            SearchParameterFormats[SearchParameterFormats["ObjectAndEnum"] = 13] = "ObjectAndEnum";
            SearchParameterFormats[SearchParameterFormats["ObjectAndType"] = 14] = "ObjectAndType";
            SearchParameterFormats[SearchParameterFormats["Uri"] = 15] = "Uri";
            SearchParameterFormats[SearchParameterFormats["Batch"] = 16] = "Batch";
            SearchParameterFormats[SearchParameterFormats["Geography"] = 17] = "Geography";
        })(HPTRIM.SearchParameterFormats || (HPTRIM.SearchParameterFormats = {}));
        var SearchParameterFormats = HPTRIM.SearchParameterFormats;
        (function (SearchPurposes) {
            SearchPurposes[SearchPurposes["Execute"] = 0] = "Execute";
            SearchPurposes[SearchPurposes["Subselect"] = 1] = "Subselect";
            SearchPurposes[SearchPurposes["Maintain"] = 2] = "Maintain";
            SearchPurposes[SearchPurposes["SelectParent"] = 3] = "SelectParent";
        })(HPTRIM.SearchPurposes || (HPTRIM.SearchPurposes = {}));
        var SearchPurposes = HPTRIM.SearchPurposes;
        (function (SearchStartPoint) {
            SearchStartPoint[SearchStartPoint["Default"] = 0] = "Default";
            SearchStartPoint[SearchStartPoint["All"] = 1] = "All";
            SearchStartPoint[SearchStartPoint["Favorites"] = 2] = "Favorites";
            SearchStartPoint[SearchStartPoint["Search"] = 3] = "Search";
        })(HPTRIM.SearchStartPoint || (HPTRIM.SearchStartPoint = {}));
        var SearchStartPoint = HPTRIM.SearchStartPoint;
        (function (SearchTimePeriodPlural) {
            SearchTimePeriodPlural[SearchTimePeriodPlural["Seconds"] = 0] = "Seconds";
            SearchTimePeriodPlural[SearchTimePeriodPlural["Minutes"] = 1] = "Minutes";
            SearchTimePeriodPlural[SearchTimePeriodPlural["Hours"] = 2] = "Hours";
            SearchTimePeriodPlural[SearchTimePeriodPlural["Days"] = 3] = "Days";
            SearchTimePeriodPlural[SearchTimePeriodPlural["Weeks"] = 4] = "Weeks";
            SearchTimePeriodPlural[SearchTimePeriodPlural["Months"] = 5] = "Months";
            SearchTimePeriodPlural[SearchTimePeriodPlural["Quarters"] = 6] = "Quarters";
            SearchTimePeriodPlural[SearchTimePeriodPlural["Years"] = 7] = "Years";
        })(HPTRIM.SearchTimePeriodPlural || (HPTRIM.SearchTimePeriodPlural = {}));
        var SearchTimePeriodPlural = HPTRIM.SearchTimePeriodPlural;
        (function (SearchTimePeriodSingular) {
            SearchTimePeriodSingular[SearchTimePeriodSingular["Second"] = 0] = "Second";
            SearchTimePeriodSingular[SearchTimePeriodSingular["Minute"] = 1] = "Minute";
            SearchTimePeriodSingular[SearchTimePeriodSingular["Hour"] = 2] = "Hour";
            SearchTimePeriodSingular[SearchTimePeriodSingular["Day"] = 3] = "Day";
            SearchTimePeriodSingular[SearchTimePeriodSingular["Week"] = 4] = "Week";
            SearchTimePeriodSingular[SearchTimePeriodSingular["Month"] = 5] = "Month";
            SearchTimePeriodSingular[SearchTimePeriodSingular["Quarter"] = 6] = "Quarter";
            SearchTimePeriodSingular[SearchTimePeriodSingular["Year"] = 7] = "Year";
        })(HPTRIM.SearchTimePeriodSingular || (HPTRIM.SearchTimePeriodSingular = {}));
        var SearchTimePeriodSingular = HPTRIM.SearchTimePeriodSingular;
        (function (SearchTimeTense) {
            SearchTimeTense[SearchTimeTense["Past"] = 0] = "Past";
            SearchTimeTense[SearchTimeTense["Present"] = 1] = "Present";
            SearchTimeTense[SearchTimeTense["Future"] = 2] = "Future";
        })(HPTRIM.SearchTimeTense || (HPTRIM.SearchTimeTense = {}));
        var SearchTimeTense = HPTRIM.SearchTimeTense;
        (function (SecurityUpdateTypes) {
            SecurityUpdateTypes[SecurityUpdateTypes["Upgraded"] = 0] = "Upgraded";
            SecurityUpdateTypes[SecurityUpdateTypes["Downgraded"] = 1] = "Downgraded";
            SecurityUpdateTypes[SecurityUpdateTypes["Declassified"] = 2] = "Declassified";
            SecurityUpdateTypes[SecurityUpdateTypes["None"] = 3] = "None";
        })(HPTRIM.SecurityUpdateTypes || (HPTRIM.SecurityUpdateTypes = {}));
        var SecurityUpdateTypes = HPTRIM.SecurityUpdateTypes;
        (function (ServerMessageTypes) {
            ServerMessageTypes[ServerMessageTypes["Adhoc"] = 0] = "Adhoc";
            ServerMessageTypes[ServerMessageTypes["EstoreError"] = 1] = "EstoreError";
            ServerMessageTypes[ServerMessageTypes["DbAvailable"] = 2] = "DbAvailable";
            ServerMessageTypes[ServerMessageTypes["DbNoNewConnections"] = 3] = "DbNoNewConnections";
            ServerMessageTypes[ServerMessageTypes["DbUnavailable"] = 4] = "DbUnavailable";
            ServerMessageTypes[ServerMessageTypes["LicenseBreached"] = 5] = "LicenseBreached";
        })(HPTRIM.ServerMessageTypes || (HPTRIM.ServerMessageTypes = {}));
        var ServerMessageTypes = HPTRIM.ServerMessageTypes;
        (function (SetAuthorOptions) {
            SetAuthorOptions[SetAuthorOptions["NoDefault"] = 0] = "NoDefault";
            SetAuthorOptions[SetAuthorOptions["CurrentUser"] = 1] = "CurrentUser";
            SetAuthorOptions[SetAuthorOptions["CurrentUserUnit"] = 2] = "CurrentUserUnit";
            SetAuthorOptions[SetAuthorOptions["SpecifiedUser"] = 3] = "SpecifiedUser";
        })(HPTRIM.SetAuthorOptions || (HPTRIM.SetAuthorOptions = {}));
        var SetAuthorOptions = HPTRIM.SetAuthorOptions;
        (function (SkinStyle) {
            SkinStyle[SkinStyle["Off"] = 0] = "Off";
            SkinStyle[SkinStyle["On"] = 1] = "On";
            SkinStyle[SkinStyle["CustomColour"] = 2] = "CustomColour";
        })(HPTRIM.SkinStyle || (HPTRIM.SkinStyle = {}));
        var SkinStyle = HPTRIM.SkinStyle;
        (function (SnapAddressType) {
            SnapAddressType[SnapAddressType["Street"] = 0] = "Street";
            SnapAddressType[SnapAddressType["Postal"] = 1] = "Postal";
            SnapAddressType[SnapAddressType["Email"] = 2] = "Email";
            SnapAddressType[SnapAddressType["Fax"] = 3] = "Fax";
        })(HPTRIM.SnapAddressType || (HPTRIM.SnapAddressType = {}));
        var SnapAddressType = HPTRIM.SnapAddressType;
        (function (SpaceAllocation) {
            SpaceAllocation[SpaceAllocation["Simple"] = 0] = "Simple";
            SpaceAllocation[SpaceAllocation["ToBay"] = 1] = "ToBay";
            SpaceAllocation[SpaceAllocation["ToUnused"] = 2] = "ToUnused";
            SpaceAllocation[SpaceAllocation["Contiguous"] = 3] = "Contiguous";
        })(HPTRIM.SpaceAllocation || (HPTRIM.SpaceAllocation = {}));
        var SpaceAllocation = HPTRIM.SpaceAllocation;
        (function (SpaceLevel) {
            SpaceLevel[SpaceLevel["Warehouse"] = 0] = "Warehouse";
            SpaceLevel[SpaceLevel["Floor"] = 1] = "Floor";
            SpaceLevel[SpaceLevel["Area"] = 2] = "Area";
            SpaceLevel[SpaceLevel["Bay"] = 3] = "Bay";
            SpaceLevel[SpaceLevel["Row"] = 4] = "Row";
            SpaceLevel[SpaceLevel["Shelf"] = 5] = "Shelf";
            SpaceLevel[SpaceLevel["Slot"] = 6] = "Slot";
        })(HPTRIM.SpaceLevel || (HPTRIM.SpaceLevel = {}));
        var SpaceLevel = HPTRIM.SpaceLevel;
        (function (SpacePurposes) {
            SpacePurposes[SpacePurposes["RecordHome"] = 0] = "RecordHome";
            SpacePurposes[SpacePurposes["RecordHomeStrict"] = 1] = "RecordHomeStrict";
            SpacePurposes[SpacePurposes["SearchHome"] = 2] = "SearchHome";
        })(HPTRIM.SpacePurposes || (HPTRIM.SpacePurposes = {}));
        var SpacePurposes = HPTRIM.SpacePurposes;
        (function (SpaceRecordsSelection) {
            SpaceRecordsSelection[SpaceRecordsSelection["InSpace"] = 0] = "InSpace";
            SpaceRecordsSelection[SpaceRecordsSelection["InBay"] = 1] = "InBay";
            SpaceRecordsSelection[SpaceRecordsSelection["InSpaceRecursive"] = 2] = "InSpaceRecursive";
            SpaceRecordsSelection[SpaceRecordsSelection["InBayRecursive"] = 3] = "InBayRecursive";
            SpaceRecordsSelection[SpaceRecordsSelection["InEitherRecursive"] = 4] = "InEitherRecursive";
        })(HPTRIM.SpaceRecordsSelection || (HPTRIM.SpaceRecordsSelection = {}));
        var SpaceRecordsSelection = HPTRIM.SpaceRecordsSelection;
        (function (SpecialDates) {
            SpecialDates[SpecialDates["NotSpecial"] = 0] = "NotSpecial";
            SpecialDates[SpecialDates["Yesterday"] = 1] = "Yesterday";
            SpecialDates[SpecialDates["Today"] = 2] = "Today";
            SpecialDates[SpecialDates["Tomorrow"] = 3] = "Tomorrow";
            SpecialDates[SpecialDates["LastWeek"] = 4] = "LastWeek";
            SpecialDates[SpecialDates["ThisWeek"] = 5] = "ThisWeek";
            SpecialDates[SpecialDates["NextWeek"] = 6] = "NextWeek";
            SpecialDates[SpecialDates["LastMonth"] = 7] = "LastMonth";
            SpecialDates[SpecialDates["ThisMonth"] = 8] = "ThisMonth";
            SpecialDates[SpecialDates["NextMonth"] = 9] = "NextMonth";
            SpecialDates[SpecialDates["ThisYear"] = 10] = "ThisYear";
            SpecialDates[SpecialDates["YearToDate"] = 11] = "YearToDate";
            SpecialDates[SpecialDates["Last7Days"] = 12] = "Last7Days";
            SpecialDates[SpecialDates["Next7Days"] = 13] = "Next7Days";
            SpecialDates[SpecialDates["Last14Days"] = 14] = "Last14Days";
            SpecialDates[SpecialDates["Next14Days"] = 15] = "Next14Days";
            SpecialDates[SpecialDates["LastYear"] = 16] = "LastYear";
            SpecialDates[SpecialDates["NextYear"] = 17] = "NextYear";
            SpecialDates[SpecialDates["LastWorkingDay"] = 18] = "LastWorkingDay";
            SpecialDates[SpecialDates["NextWorkingDay"] = 19] = "NextWorkingDay";
            SpecialDates[SpecialDates["Last30Days"] = 20] = "Last30Days";
            SpecialDates[SpecialDates["Next30Days"] = 21] = "Next30Days";
            SpecialDates[SpecialDates["Last6Months"] = 22] = "Last6Months";
            SpecialDates[SpecialDates["Next6Months"] = 23] = "Next6Months";
            SpecialDates[SpecialDates["Last12Months"] = 24] = "Last12Months";
            SpecialDates[SpecialDates["Next12Months"] = 25] = "Next12Months";
            SpecialDates[SpecialDates["Now"] = 26] = "Now";
        })(HPTRIM.SpecialDates || (HPTRIM.SpecialDates = {}));
        var SpecialDates = HPTRIM.SpecialDates;
        (function (SpElementType) {
            SpElementType[SpElementType["None"] = 0] = "None";
            SpElementType[SpElementType["Site"] = 1] = "Site";
            SpElementType[SpElementType["List"] = 2] = "List";
            SpElementType[SpElementType["ListItem"] = 3] = "ListItem";
        })(HPTRIM.SpElementType || (HPTRIM.SpElementType = {}));
        var SpElementType = HPTRIM.SpElementType;
        (function (SpListItemOriginator) {
            SpListItemOriginator[SpListItemOriginator["ThisList"] = 0] = "ThisList";
            SpListItemOriginator[SpListItemOriginator["Other"] = 1] = "Other";
        })(HPTRIM.SpListItemOriginator || (HPTRIM.SpListItemOriginator = {}));
        var SpListItemOriginator = HPTRIM.SpListItemOriginator;
        (function (SpManagedItemStatus) {
            SpManagedItemStatus[SpManagedItemStatus["Exposed"] = 0] = "Exposed";
            SpManagedItemStatus[SpManagedItemStatus["Relocated"] = 1] = "Relocated";
        })(HPTRIM.SpManagedItemStatus || (HPTRIM.SpManagedItemStatus = {}));
        var SpManagedItemStatus = HPTRIM.SpManagedItemStatus;
        (function (SqlErrorTypes) {
            SqlErrorTypes[SqlErrorTypes["Unspecified"] = 0] = "Unspecified";
            SqlErrorTypes[SqlErrorTypes["Deadlock"] = 1] = "Deadlock";
            SqlErrorTypes[SqlErrorTypes["ReferentialViolation"] = 2] = "ReferentialViolation";
            SqlErrorTypes[SqlErrorTypes["UniqueConstraintError"] = 3] = "UniqueConstraintError";
            SqlErrorTypes[SqlErrorTypes["QueryTooComplex"] = 4] = "QueryTooComplex";
            SqlErrorTypes[SqlErrorTypes["Timeout"] = 5] = "Timeout";
            SqlErrorTypes[SqlErrorTypes["AdoTimeout"] = 6] = "AdoTimeout";
            SqlErrorTypes[SqlErrorTypes["FailOver"] = 7] = "FailOver";
        })(HPTRIM.SqlErrorTypes || (HPTRIM.SqlErrorTypes = {}));
        var SqlErrorTypes = HPTRIM.SqlErrorTypes;
        (function (SslMode) {
            SslMode[SslMode["Allow"] = 0] = "Allow";
            SslMode[SslMode["Disable"] = 1] = "Disable";
            SslMode[SslMode["Prefer"] = 2] = "Prefer";
            SslMode[SslMode["Require"] = 3] = "Require";
            SslMode[SslMode["VerifyCA"] = 4] = "VerifyCA";
            SslMode[SslMode["VerifyFull"] = 5] = "VerifyFull";
        })(HPTRIM.SslMode || (HPTRIM.SslMode = {}));
        var SslMode = HPTRIM.SslMode;
        (function (StartupPaneType) {
            StartupPaneType[StartupPaneType["Empty"] = 0] = "Empty";
            StartupPaneType[StartupPaneType["NewItem"] = 1] = "NewItem";
            StartupPaneType[StartupPaneType["Find"] = 2] = "Find";
            StartupPaneType[StartupPaneType["InTray"] = 3] = "InTray";
            StartupPaneType[StartupPaneType["DueTray"] = 4] = "DueTray";
            StartupPaneType[StartupPaneType["InDueTray"] = 5] = "InDueTray";
            StartupPaneType[StartupPaneType["ActivityDue"] = 6] = "ActivityDue";
            StartupPaneType[StartupPaneType["WorkTray"] = 7] = "WorkTray";
            StartupPaneType[StartupPaneType["FavoriteRecords"] = 8] = "FavoriteRecords";
            StartupPaneType[StartupPaneType["RecentContainers"] = 9] = "RecentContainers";
            StartupPaneType[StartupPaneType["RecentDocuments"] = 10] = "RecentDocuments";
            StartupPaneType[StartupPaneType["FavoriteWorkflows"] = 11] = "FavoriteWorkflows";
            StartupPaneType[StartupPaneType["ClassificationBrowser"] = 12] = "ClassificationBrowser";
            StartupPaneType[StartupPaneType["OfflineRecords"] = 13] = "OfflineRecords";
            StartupPaneType[StartupPaneType["Requests"] = 14] = "Requests";
            StartupPaneType[StartupPaneType["FavoriteClassifications"] = 15] = "FavoriteClassifications";
            StartupPaneType[StartupPaneType["DocumentsCheckedOut"] = 16] = "DocumentsCheckedOut";
            StartupPaneType[StartupPaneType["TodoItems"] = 17] = "TodoItems";
            StartupPaneType[StartupPaneType["FavoriteSearches"] = 18] = "FavoriteSearches";
            StartupPaneType[StartupPaneType["FavoriteLocations"] = 19] = "FavoriteLocations";
            StartupPaneType[StartupPaneType["CheckinStyles"] = 20] = "CheckinStyles";
            StartupPaneType[StartupPaneType["ClientMatterHierarchy"] = 21] = "ClientMatterHierarchy";
            StartupPaneType[StartupPaneType["UserLabels"] = 22] = "UserLabels";
            StartupPaneType[StartupPaneType["Dashboard"] = 23] = "Dashboard";
            StartupPaneType[StartupPaneType["Explorer"] = 24] = "Explorer";
        })(HPTRIM.StartupPaneType || (HPTRIM.StartupPaneType = {}));
        var StartupPaneType = HPTRIM.StartupPaneType;
        (function (StatGroupByType) {
            StatGroupByType[StatGroupByType["None"] = 0] = "None";
            StatGroupByType[StatGroupByType["DateCreated"] = 1] = "DateCreated";
            StatGroupByType[StatGroupByType["DateClosed"] = 2] = "DateClosed";
            StatGroupByType[StatGroupByType["DateDue"] = 3] = "DateDue";
            StatGroupByType[StatGroupByType["DateFinalized"] = 4] = "DateFinalized";
            StatGroupByType[StatGroupByType["DateInactive"] = 5] = "DateInactive";
            StatGroupByType[StatGroupByType["DateModified"] = 6] = "DateModified";
            StatGroupByType[StatGroupByType["DatePublished"] = 7] = "DatePublished";
            StatGroupByType[StatGroupByType["DateReg"] = 8] = "DateReg";
            StatGroupByType[StatGroupByType["DateDisposalDue"] = 9] = "DateDisposalDue";
            StatGroupByType[StatGroupByType["RecType"] = 10] = "RecType";
            StatGroupByType[StatGroupByType["Security"] = 11] = "Security";
            StatGroupByType[StatGroupByType["Application"] = 12] = "Application";
            StatGroupByType[StatGroupByType["CurrentLoc"] = 13] = "CurrentLoc";
            StatGroupByType[StatGroupByType["HomeLoc"] = 14] = "HomeLoc";
            StatGroupByType[StatGroupByType["OwnerLoc"] = 15] = "OwnerLoc";
            StatGroupByType[StatGroupByType["CreatorLoc"] = 16] = "CreatorLoc";
            StatGroupByType[StatGroupByType["AuthorLoc"] = 17] = "AuthorLoc";
            StatGroupByType[StatGroupByType["ClientLoc"] = 18] = "ClientLoc";
            StatGroupByType[StatGroupByType["Schedule"] = 19] = "Schedule";
            StatGroupByType[StatGroupByType["Classification"] = 20] = "Classification";
            StatGroupByType[StatGroupByType["ViewerLoc"] = 21] = "ViewerLoc";
            StatGroupByType[StatGroupByType["ReviewDecision"] = 22] = "ReviewDecision";
            StatGroupByType[StatGroupByType["ArchiveEvent"] = 23] = "ArchiveEvent";
            StatGroupByType[StatGroupByType["PendingEvent"] = 24] = "PendingEvent";
        })(HPTRIM.StatGroupByType || (HPTRIM.StatGroupByType = {}));
        var StatGroupByType = HPTRIM.StatGroupByType;
        (function (StatisticalDateRangeTypes) {
            StatisticalDateRangeTypes[StatisticalDateRangeTypes["Registered"] = 0] = "Registered";
            StatisticalDateRangeTypes[StatisticalDateRangeTypes["Created"] = 1] = "Created";
        })(HPTRIM.StatisticalDateRangeTypes || (HPTRIM.StatisticalDateRangeTypes = {}));
        var StatisticalDateRangeTypes = HPTRIM.StatisticalDateRangeTypes;
        (function (StatisticsOutputType) {
            StatisticsOutputType[StatisticsOutputType["Csv"] = 0] = "Csv";
            StatisticsOutputType[StatisticsOutputType["Html"] = 1] = "Html";
        })(HPTRIM.StatisticsOutputType || (HPTRIM.StatisticsOutputType = {}));
        var StatisticsOutputType = HPTRIM.StatisticsOutputType;
        (function (StatTypes) {
            StatTypes[StatTypes["RecsCreated"] = 0] = "RecsCreated";
            StatTypes[StatTypes["RecsOpened"] = 1] = "RecsOpened";
            StatTypes[StatTypes["RecsClosed"] = 2] = "RecsClosed";
            StatTypes[StatTypes["RecsFinalised"] = 3] = "RecsFinalised";
            StatTypes[StatTypes["RecsByDateInactive"] = 4] = "RecsByDateInactive";
            StatTypes[StatTypes["RecsByPublish"] = 5] = "RecsByPublish";
            StatTypes[StatTypes["RecsByModified"] = 6] = "RecsByModified";
            StatTypes[StatTypes["RecsByViewed"] = 7] = "RecsByViewed";
            StatTypes[StatTypes["RecsByPendingArchive"] = 8] = "RecsByPendingArchive";
            StatTypes[StatTypes["RecsByLastDate"] = 9] = "RecsByLastDate";
            StatTypes[StatTypes["RecsByDueDate"] = 10] = "RecsByDueDate";
            StatTypes[StatTypes["RecsByDestructionDate"] = 11] = "RecsByDestructionDate";
            StatTypes[StatTypes["RecsByReviewDate"] = 12] = "RecsByReviewDate";
            StatTypes[StatTypes["RecsByDispChangeDate"] = 13] = "RecsByDispChangeDate";
        })(HPTRIM.StatTypes || (HPTRIM.StatTypes = {}));
        var StatTypes = HPTRIM.StatTypes;
        (function (StorePurposes) {
            StorePurposes[StorePurposes["Default"] = 0] = "Default";
            StorePurposes[StorePurposes["Replacement"] = 1] = "Replacement";
            StorePurposes[StorePurposes["Maintain"] = 2] = "Maintain";
        })(HPTRIM.StorePurposes || (HPTRIM.StorePurposes = {}));
        var StorePurposes = HPTRIM.StorePurposes;
        (function (StoreStatus) {
            StoreStatus[StoreStatus["Available"] = 0] = "Available";
            StoreStatus[StoreStatus["ClosedForAdd"] = 1] = "ClosedForAdd";
            StoreStatus[StoreStatus["ReadOnly"] = 2] = "ReadOnly";
        })(HPTRIM.StoreStatus || (HPTRIM.StoreStatus = {}));
        var StoreStatus = HPTRIM.StoreStatus;
        (function (StringDisplayAlignment) {
            StringDisplayAlignment[StringDisplayAlignment["Left"] = 0] = "Left";
            StringDisplayAlignment[StringDisplayAlignment["Centre"] = 1] = "Centre";
            StringDisplayAlignment[StringDisplayAlignment["Right"] = 2] = "Right";
        })(HPTRIM.StringDisplayAlignment || (HPTRIM.StringDisplayAlignment = {}));
        var StringDisplayAlignment = HPTRIM.StringDisplayAlignment;
        (function (StringDisplayType) {
            StringDisplayType[StringDisplayType["Default"] = 0] = "Default";
            StringDisplayType[StringDisplayType["ViewPane"] = 1] = "ViewPane";
            StringDisplayType[StringDisplayType["TreeColumn"] = 2] = "TreeColumn";
            StringDisplayType[StringDisplayType["Reporter"] = 3] = "Reporter";
            StringDisplayType[StringDisplayType["DataEntry"] = 4] = "DataEntry";
            StringDisplayType[StringDisplayType["ErrorMessage"] = 5] = "ErrorMessage";
            StringDisplayType[StringDisplayType["Export"] = 6] = "Export";
            StringDisplayType[StringDisplayType["Merge"] = 7] = "Merge";
            StringDisplayType[StringDisplayType["WebService"] = 8] = "WebService";
            StringDisplayType[StringDisplayType["WebPublish"] = 9] = "WebPublish";
        })(HPTRIM.StringDisplayType || (HPTRIM.StringDisplayType = {}));
        var StringDisplayType = HPTRIM.StringDisplayType;
        (function (StringVerificationTypes) {
            StringVerificationTypes[StringVerificationTypes["Simple"] = 0] = "Simple";
            StringVerificationTypes[StringVerificationTypes["LookupSet"] = 1] = "LookupSet";
            StringVerificationTypes[StringVerificationTypes["Mask"] = 2] = "Mask";
            StringVerificationTypes[StringVerificationTypes["AddIn"] = 3] = "AddIn";
            StringVerificationTypes[StringVerificationTypes["Url"] = 4] = "Url";
            StringVerificationTypes[StringVerificationTypes["Email"] = 5] = "Email";
        })(HPTRIM.StringVerificationTypes || (HPTRIM.StringVerificationTypes = {}));
        var StringVerificationTypes = HPTRIM.StringVerificationTypes;
        (function (TabBarStyle) {
            TabBarStyle[TabBarStyle["Off"] = 0] = "Off";
            TabBarStyle[TabBarStyle["Top"] = 1] = "Top";
            TabBarStyle[TabBarStyle["Bottom"] = 2] = "Bottom";
            TabBarStyle[TabBarStyle["TopMenu"] = 3] = "TopMenu";
            TabBarStyle[TabBarStyle["BottomMenu"] = 4] = "BottomMenu";
        })(HPTRIM.TabBarStyle || (HPTRIM.TabBarStyle = {}));
        var TabBarStyle = HPTRIM.TabBarStyle;
        (function (TaskStatus) {
            TaskStatus[TaskStatus["Due"] = 0] = "Due";
            TaskStatus[TaskStatus["Overdue"] = 1] = "Overdue";
            TaskStatus[TaskStatus["Complete"] = 2] = "Complete";
        })(HPTRIM.TaskStatus || (HPTRIM.TaskStatus = {}));
        var TaskStatus = HPTRIM.TaskStatus;
        (function (TieredStorageType) {
            TieredStorageType[TieredStorageType["Unknown"] = 0] = "Unknown";
            TieredStorageType[TieredStorageType["Tier1"] = 1] = "Tier1";
            TieredStorageType[TieredStorageType["Tier2"] = 2] = "Tier2";
            TieredStorageType[TieredStorageType["Tier3"] = 3] = "Tier3";
            TieredStorageType[TieredStorageType["CustomA"] = 4] = "CustomA";
            TieredStorageType[TieredStorageType["CustomB"] = 5] = "CustomB";
        })(HPTRIM.TieredStorageType || (HPTRIM.TieredStorageType = {}));
        var TieredStorageType = HPTRIM.TieredStorageType;
        (function (TimeInterval) {
            TimeInterval[TimeInterval["Seconds"] = 0] = "Seconds";
            TimeInterval[TimeInterval["Minutes"] = 1] = "Minutes";
            TimeInterval[TimeInterval["Hours"] = 2] = "Hours";
            TimeInterval[TimeInterval["Days"] = 3] = "Days";
            TimeInterval[TimeInterval["Weeks"] = 4] = "Weeks";
            TimeInterval[TimeInterval["Months"] = 5] = "Months";
        })(HPTRIM.TimeInterval || (HPTRIM.TimeInterval = {}));
        var TimeInterval = HPTRIM.TimeInterval;
        (function (TitlingMethods) {
            TitlingMethods[TitlingMethods["FreeText"] = 0] = "FreeText";
            TitlingMethods[TitlingMethods["Classification"] = 1] = "Classification";
            TitlingMethods[TitlingMethods["Keyword_ISO"] = 2] = "Keyword_ISO";
            TitlingMethods[TitlingMethods["Keyword_Descriptor"] = 3] = "Keyword_Descriptor";
            TitlingMethods[TitlingMethods["Contact"] = 4] = "Contact";
            TitlingMethods[TitlingMethods["ClientMatter"] = 5] = "ClientMatter";
        })(HPTRIM.TitlingMethods || (HPTRIM.TitlingMethods = {}));
        var TitlingMethods = HPTRIM.TitlingMethods;
        (function (TodoItemAccess) {
            TodoItemAccess[TodoItemAccess["View"] = 0] = "View";
            TodoItemAccess[TodoItemAccess["Update"] = 1] = "Update";
            TodoItemAccess[TodoItemAccess["ModifyAccess"] = 2] = "ModifyAccess";
            TodoItemAccess[TodoItemAccess["Delete"] = 3] = "Delete";
        })(HPTRIM.TodoItemAccess || (HPTRIM.TodoItemAccess = {}));
        var TodoItemAccess = HPTRIM.TodoItemAccess;
        (function (TodoReferenceType) {
            TodoReferenceType[TodoReferenceType["Fyi"] = 0] = "Fyi";
            TodoReferenceType[TodoReferenceType["Also"] = 1] = "Also";
            TodoReferenceType[TodoReferenceType["Update"] = 2] = "Update";
            TodoReferenceType[TodoReferenceType["RefTypeOther1"] = 3] = "RefTypeOther1";
            TodoReferenceType[TodoReferenceType["RefTypeOther2"] = 4] = "RefTypeOther2";
            TodoReferenceType[TodoReferenceType["RefTypeOther3"] = 5] = "RefTypeOther3";
            TodoReferenceType[TodoReferenceType["RefTypeOther4"] = 6] = "RefTypeOther4";
            TodoReferenceType[TodoReferenceType["RefTypeOther5"] = 7] = "RefTypeOther5";
        })(HPTRIM.TodoReferenceType || (HPTRIM.TodoReferenceType = {}));
        var TodoReferenceType = HPTRIM.TodoReferenceType;
        (function (TrayType) {
            TrayType[TrayType["Favorites"] = 0] = "Favorites";
            TrayType[TrayType["Worktray"] = 1] = "Worktray";
            TrayType[TrayType["Documents"] = 2] = "Documents";
            TrayType[TrayType["Containers"] = 3] = "Containers";
            TrayType[TrayType["Due"] = 4] = "Due";
            TrayType[TrayType["In"] = 5] = "In";
            TrayType[TrayType["DueOrIn"] = 6] = "DueOrIn";
            TrayType[TrayType["Templates"] = 7] = "Templates";
            TrayType[TrayType["ContentBlocks"] = 8] = "ContentBlocks";
            TrayType[TrayType["ActivitiesDue"] = 9] = "ActivitiesDue";
        })(HPTRIM.TrayType || (HPTRIM.TrayType = {}));
        var TrayType = HPTRIM.TrayType;
        (function (TriggerDelayTypes) {
            TriggerDelayTypes[TriggerDelayTypes["YearsAndMonths"] = 0] = "YearsAndMonths";
            TriggerDelayTypes[TriggerDelayTypes["Days"] = 1] = "Days";
            TriggerDelayTypes[TriggerDelayTypes["NoDelay"] = 2] = "NoDelay";
        })(HPTRIM.TriggerDelayTypes || (HPTRIM.TriggerDelayTypes = {}));
        var TriggerDelayTypes = HPTRIM.TriggerDelayTypes;
        (function (TriggerRounding) {
            TriggerRounding[TriggerRounding["NoRounding"] = 0] = "NoRounding";
            TriggerRounding[TriggerRounding["EndOfMonth"] = 1] = "EndOfMonth";
            TriggerRounding[TriggerRounding["EndOfCalendarYear"] = 2] = "EndOfCalendarYear";
            TriggerRounding[TriggerRounding["EndOfFiscalYear"] = 3] = "EndOfFiscalYear";
            TriggerRounding[TriggerRounding["EndOfQuarter"] = 4] = "EndOfQuarter";
            TriggerRounding[TriggerRounding["EndOfHalfYear"] = 5] = "EndOfHalfYear";
            TriggerRounding[TriggerRounding["EndOfJanuary"] = 6] = "EndOfJanuary";
            TriggerRounding[TriggerRounding["EndOfFebruary"] = 7] = "EndOfFebruary";
            TriggerRounding[TriggerRounding["EndOfMarch"] = 8] = "EndOfMarch";
            TriggerRounding[TriggerRounding["EndOfApril"] = 9] = "EndOfApril";
            TriggerRounding[TriggerRounding["EndOfMay"] = 10] = "EndOfMay";
            TriggerRounding[TriggerRounding["EndOfJune"] = 11] = "EndOfJune";
            TriggerRounding[TriggerRounding["EndOfJuly"] = 12] = "EndOfJuly";
            TriggerRounding[TriggerRounding["EndOfAugust"] = 13] = "EndOfAugust";
            TriggerRounding[TriggerRounding["EndOfSeptember"] = 14] = "EndOfSeptember";
            TriggerRounding[TriggerRounding["EndOfOctober"] = 15] = "EndOfOctober";
            TriggerRounding[TriggerRounding["EndOfNovember"] = 16] = "EndOfNovember";
            TriggerRounding[TriggerRounding["EndOfDecember"] = 17] = "EndOfDecember";
        })(HPTRIM.TriggerRounding || (HPTRIM.TriggerRounding = {}));
        var TriggerRounding = HPTRIM.TriggerRounding;
        (function (TriggerTypes) {
            TriggerTypes[TriggerTypes["DateCreated"] = 0] = "DateCreated";
            TriggerTypes[TriggerTypes["DateClosed"] = 1] = "DateClosed";
            TriggerTypes[TriggerTypes["DateRegistered"] = 2] = "DateRegistered";
            TriggerTypes[TriggerTypes["FixedDate"] = 3] = "FixedDate";
            TriggerTypes[TriggerTypes["DateLastAction"] = 4] = "DateLastAction";
            TriggerTypes[TriggerTypes["DateArchived"] = 5] = "DateArchived";
            TriggerTypes[TriggerTypes["DateInactive"] = 6] = "DateInactive";
            TriggerTypes[TriggerTypes["UserDefined"] = 7] = "UserDefined";
            TriggerTypes[TriggerTypes["DateModified"] = 8] = "DateModified";
            TriggerTypes[TriggerTypes["RootDateCreated"] = 9] = "RootDateCreated";
            TriggerTypes[TriggerTypes["ContentDateFinalized"] = 10] = "ContentDateFinalized";
            TriggerTypes[TriggerTypes["DateFinalized"] = 11] = "DateFinalized";
            TriggerTypes[TriggerTypes["LastPartDateClosed"] = 12] = "LastPartDateClosed";
            TriggerTypes[TriggerTypes["LastPartDateCreated"] = 13] = "LastPartDateCreated";
            TriggerTypes[TriggerTypes["ContentDateCreated"] = 14] = "ContentDateCreated";
            TriggerTypes[TriggerTypes["ContentDateModified"] = 15] = "ContentDateModified";
            TriggerTypes[TriggerTypes["ContentDateClosed"] = 16] = "ContentDateClosed";
            TriggerTypes[TriggerTypes["ContentDateLastAction"] = 17] = "ContentDateLastAction";
            TriggerTypes[TriggerTypes["DateMatterClosed"] = 18] = "DateMatterClosed";
            TriggerTypes[TriggerTypes["SapArchiveDate"] = 19] = "SapArchiveDate";
            TriggerTypes[TriggerTypes["SapModifiedDate"] = 20] = "SapModifiedDate";
            TriggerTypes[TriggerTypes["DateSuperseded"] = 21] = "DateSuperseded";
            TriggerTypes[TriggerTypes["DateReceived"] = 22] = "DateReceived";
            TriggerTypes[TriggerTypes["ArchivingEvent"] = 23] = "ArchivingEvent";
        })(HPTRIM.TriggerTypes || (HPTRIM.TriggerTypes = {}));
        var TriggerTypes = HPTRIM.TriggerTypes;
        (function (TrimPathType) {
            TrimPathType[TrimPathType["Calendar"] = 0] = "Calendar";
            TrimPathType[TrimPathType["Captions"] = 1] = "Captions";
            TrimPathType[TrimPathType["UserDictionaries"] = 2] = "UserDictionaries";
            TrimPathType[TrimPathType["SomewhereForTempFiles"] = 3] = "SomewhereForTempFiles";
            TrimPathType[TrimPathType["Favorites"] = 4] = "Favorites";
            TrimPathType[TrimPathType["ClientDocumentCache"] = 5] = "ClientDocumentCache";
            TrimPathType[TrimPathType["WorkgroupDocumentCache"] = 6] = "WorkgroupDocumentCache";
            TrimPathType[TrimPathType["RollingLogPath"] = 7] = "RollingLogPath";
            TrimPathType[TrimPathType["AuditLog"] = 8] = "AuditLog";
            TrimPathType[TrimPathType["QueueProcessingLogs"] = 9] = "QueueProcessingLogs";
            TrimPathType[TrimPathType["ThreadDataQueues"] = 10] = "ThreadDataQueues";
            TrimPathType[TrimPathType["ServerLogs"] = 11] = "ServerLogs";
            TrimPathType[TrimPathType["TopDrawerDB"] = 12] = "TopDrawerDB";
            TrimPathType[TrimPathType["UserButtonBitmaps"] = 13] = "UserButtonBitmaps";
            TrimPathType[TrimPathType["TopDrawerDocuments"] = 14] = "TopDrawerDocuments";
            TrimPathType[TrimPathType["AppDataRootDir"] = 15] = "AppDataRootDir";
            TrimPathType[TrimPathType["OutlookLogPath"] = 16] = "OutlookLogPath";
            TrimPathType[TrimPathType["AsynchTransferToWGSPath"] = 17] = "AsynchTransferToWGSPath";
            TrimPathType[TrimPathType["WorkgroupConfigPath"] = 18] = "WorkgroupConfigPath";
            TrimPathType[TrimPathType["TrimBinaries"] = 19] = "TrimBinaries";
            TrimPathType[TrimPathType["WorkgroupStreamingFolder"] = 20] = "WorkgroupStreamingFolder";
            TrimPathType[TrimPathType["WorkgroupPendingFolder"] = 21] = "WorkgroupPendingFolder";
            TrimPathType[TrimPathType["UserConfigFiles"] = 22] = "UserConfigFiles";
            TrimPathType[TrimPathType["SystemDictionaries"] = 23] = "SystemDictionaries";
            TrimPathType[TrimPathType["StoreSubfolderMonitoring"] = 24] = "StoreSubfolderMonitoring";
            TrimPathType[TrimPathType["RenderConfigPath"] = 25] = "RenderConfigPath";
            TrimPathType[TrimPathType["WorkgroupPendingFailures"] = 26] = "WorkgroupPendingFailures";
            TrimPathType[TrimPathType["WorkgroupPendingQuarantine"] = 27] = "WorkgroupPendingQuarantine";
            TrimPathType[TrimPathType["ClientDownloadCache"] = 28] = "ClientDownloadCache";
            TrimPathType[TrimPathType["WorkgroupPendingInfo"] = 29] = "WorkgroupPendingInfo";
            TrimPathType[TrimPathType["GisInterfaceFile"] = 30] = "GisInterfaceFile";
            TrimPathType[TrimPathType["OfficeIntegrationStagingPath"] = 31] = "OfficeIntegrationStagingPath";
        })(HPTRIM.TrimPathType || (HPTRIM.TrimPathType = {}));
        var TrimPathType = HPTRIM.TrimPathType;
        (function (UnregisteredUsers) {
            UnregisteredUsers[UnregisteredUsers["DenyAccess"] = 0] = "DenyAccess";
            UnregisteredUsers[UnregisteredUsers["LoginAsGuest"] = 1] = "LoginAsGuest";
            UnregisteredUsers[UnregisteredUsers["CreateNewUser"] = 2] = "CreateNewUser";
        })(HPTRIM.UnregisteredUsers || (HPTRIM.UnregisteredUsers = {}));
        var UnregisteredUsers = HPTRIM.UnregisteredUsers;
        (function (UserDashboardItem) {
            UserDashboardItem[UserDashboardItem["RecordsAssigned"] = 0] = "RecordsAssigned";
            UserDashboardItem[UserDashboardItem["RecordsToBeReturned"] = 1] = "RecordsToBeReturned";
            UserDashboardItem[UserDashboardItem["RecordsRequested"] = 2] = "RecordsRequested";
            UserDashboardItem[UserDashboardItem["DocumentsCheckedOut"] = 3] = "DocumentsCheckedOut";
            UserDashboardItem[UserDashboardItem["DocumentsToEdit"] = 4] = "DocumentsToEdit";
            UserDashboardItem[UserDashboardItem["DocumentsToReview"] = 5] = "DocumentsToReview";
            UserDashboardItem[UserDashboardItem["DocumentsToAuthorise"] = 6] = "DocumentsToAuthorise";
            UserDashboardItem[UserDashboardItem["RecordActions"] = 7] = "RecordActions";
            UserDashboardItem[UserDashboardItem["Activities"] = 8] = "Activities";
            UserDashboardItem[UserDashboardItem["TodoItems"] = 9] = "TodoItems";
            UserDashboardItem[UserDashboardItem["ClassificationsToApprove"] = 10] = "ClassificationsToApprove";
            UserDashboardItem[UserDashboardItem["ConsignmentsToReview"] = 11] = "ConsignmentsToReview";
            UserDashboardItem[UserDashboardItem["ConsignmentsToApprove"] = 12] = "ConsignmentsToApprove";
            UserDashboardItem[UserDashboardItem["ConsignmentsToDispose"] = 13] = "ConsignmentsToDispose";
            UserDashboardItem[UserDashboardItem["ExternalWorkflows"] = 14] = "ExternalWorkflows";
        })(HPTRIM.UserDashboardItem || (HPTRIM.UserDashboardItem = {}));
        var UserDashboardItem = HPTRIM.UserDashboardItem;
        (function (UserFieldFormats) {
            UserFieldFormats[UserFieldFormats["String"] = 0] = "String";
            UserFieldFormats[UserFieldFormats["Number"] = 1] = "Number";
            UserFieldFormats[UserFieldFormats["Boolean"] = 2] = "Boolean";
            UserFieldFormats[UserFieldFormats["Date"] = 3] = "Date";
            UserFieldFormats[UserFieldFormats["Datetime"] = 4] = "Datetime";
            UserFieldFormats[UserFieldFormats["Decimal"] = 5] = "Decimal";
            UserFieldFormats[UserFieldFormats["Text"] = 6] = "Text";
            UserFieldFormats[UserFieldFormats["Currency"] = 7] = "Currency";
            UserFieldFormats[UserFieldFormats["Object"] = 8] = "Object";
            UserFieldFormats[UserFieldFormats["BigNumber"] = 9] = "BigNumber";
            UserFieldFormats[UserFieldFormats["Xml"] = 10] = "Xml";
            UserFieldFormats[UserFieldFormats["Geography"] = 11] = "Geography";
        })(HPTRIM.UserFieldFormats || (HPTRIM.UserFieldFormats = {}));
        var UserFieldFormats = HPTRIM.UserFieldFormats;
        (function (UserLabelType) {
            UserLabelType[UserLabelType["Tag"] = 0] = "Tag";
            UserLabelType[UserLabelType["Favorites"] = 1] = "Favorites";
            UserLabelType[UserLabelType["Worktray"] = 2] = "Worktray";
            UserLabelType[UserLabelType["Documents"] = 3] = "Documents";
            UserLabelType[UserLabelType["Containers"] = 4] = "Containers";
            UserLabelType[UserLabelType["Templates"] = 5] = "Templates";
            UserLabelType[UserLabelType["ContentBlocks"] = 6] = "ContentBlocks";
        })(HPTRIM.UserLabelType || (HPTRIM.UserLabelType = {}));
        var UserLabelType = HPTRIM.UserLabelType;
        (function (UserLicenseTypes) {
            UserLicenseTypes[UserLicenseTypes["Administrator"] = 0] = "Administrator";
            UserLicenseTypes[UserLicenseTypes["RecordsCoordinator"] = 1] = "RecordsCoordinator";
            UserLicenseTypes[UserLicenseTypes["KnowledgeWorker"] = 2] = "KnowledgeWorker";
            UserLicenseTypes[UserLicenseTypes["Contributor"] = 3] = "Contributor";
            UserLicenseTypes[UserLicenseTypes["InquiryUser"] = 4] = "InquiryUser";
            UserLicenseTypes[UserLicenseTypes["NoAccess"] = 5] = "NoAccess";
        })(HPTRIM.UserLicenseTypes || (HPTRIM.UserLicenseTypes = {}));
        var UserLicenseTypes = HPTRIM.UserLicenseTypes;
        (function (UserTypes) {
            UserTypes[UserTypes["Administrator"] = 0] = "Administrator";
            UserTypes[UserTypes["RecordsManager"] = 1] = "RecordsManager";
            UserTypes[UserTypes["RecordsWorker"] = 2] = "RecordsWorker";
            UserTypes[UserTypes["EndUser"] = 3] = "EndUser";
            UserTypes[UserTypes["Contributor"] = 4] = "Contributor";
            UserTypes[UserTypes["EnquiryUser"] = 5] = "EnquiryUser";
            UserTypes[UserTypes["Custom1"] = 6] = "Custom1";
            UserTypes[UserTypes["Custom2"] = 7] = "Custom2";
            UserTypes[UserTypes["Custom3"] = 8] = "Custom3";
            UserTypes[UserTypes["Custom4"] = 9] = "Custom4";
            UserTypes[UserTypes["Custom5"] = 10] = "Custom5";
            UserTypes[UserTypes["Custom6"] = 11] = "Custom6";
            UserTypes[UserTypes["Custom7"] = 12] = "Custom7";
            UserTypes[UserTypes["Custom8"] = 13] = "Custom8";
            UserTypes[UserTypes["Custom9"] = 14] = "Custom9";
            UserTypes[UserTypes["Custom10"] = 15] = "Custom10";
        })(HPTRIM.UserTypes || (HPTRIM.UserTypes = {}));
        var UserTypes = HPTRIM.UserTypes;
        (function (UseStoreType) {
            UseStoreType[UseStoreType["NoStore"] = 0] = "NoStore";
            UseStoreType[UseStoreType["UseStore"] = 1] = "UseStore";
            UseStoreType[UseStoreType["UseDefault"] = 2] = "UseDefault";
        })(HPTRIM.UseStoreType || (HPTRIM.UseStoreType = {}));
        var UseStoreType = HPTRIM.UseStoreType;
        (function (ViewPaneStyle) {
            ViewPaneStyle[ViewPaneStyle["Bottom"] = 0] = "Bottom";
            ViewPaneStyle[ViewPaneStyle["Right"] = 1] = "Right";
        })(HPTRIM.ViewPaneStyle || (HPTRIM.ViewPaneStyle = {}));
        var ViewPaneStyle = HPTRIM.ViewPaneStyle;
        (function (WebServiceCacheSettings) {
            WebServiceCacheSettings[WebServiceCacheSettings["None"] = 0] = "None";
            WebServiceCacheSettings[WebServiceCacheSettings["Common"] = 1] = "Common";
            WebServiceCacheSettings[WebServiceCacheSettings["AllButRecords"] = 2] = "AllButRecords";
            WebServiceCacheSettings[WebServiceCacheSettings["All"] = 3] = "All";
        })(HPTRIM.WebServiceCacheSettings || (HPTRIM.WebServiceCacheSettings = {}));
        var WebServiceCacheSettings = HPTRIM.WebServiceCacheSettings;
        (function (WgsCacheType) {
            WgsCacheType[WgsCacheType["NoCaching"] = 0] = "NoCaching";
            WgsCacheType[WgsCacheType["RetentiveOnly"] = 1] = "RetentiveOnly";
            WgsCacheType[WgsCacheType["PreEmptive"] = 2] = "PreEmptive";
            WgsCacheType[WgsCacheType["FullMirror"] = 3] = "FullMirror";
        })(HPTRIM.WgsCacheType || (HPTRIM.WgsCacheType = {}));
        var WgsCacheType = HPTRIM.WgsCacheType;
        (function (WindowsFrameType) {
            WindowsFrameType[WindowsFrameType["Mdi"] = 0] = "Mdi";
            WindowsFrameType[WindowsFrameType["Sdi"] = 1] = "Sdi";
            WindowsFrameType[WindowsFrameType["SdiSelect"] = 2] = "SdiSelect";
            WindowsFrameType[WindowsFrameType["SdiBrowse"] = 3] = "SdiBrowse";
            WindowsFrameType[WindowsFrameType["DropZone"] = 4] = "DropZone";
            WindowsFrameType[WindowsFrameType["Tes"] = 5] = "Tes";
            WindowsFrameType[WindowsFrameType["Mbx"] = 6] = "Mbx";
            WindowsFrameType[WindowsFrameType["Reporter"] = 7] = "Reporter";
            WindowsFrameType[WindowsFrameType["Preview"] = 8] = "Preview";
            WindowsFrameType[WindowsFrameType["Queue"] = 9] = "Queue";
            WindowsFrameType[WindowsFrameType["Viewer"] = 10] = "Viewer";
            WindowsFrameType[WindowsFrameType["Workflow"] = 11] = "Workflow";
            WindowsFrameType[WindowsFrameType["WorkflowTemplate"] = 12] = "WorkflowTemplate";
            WindowsFrameType[WindowsFrameType["Redact"] = 13] = "Redact";
        })(HPTRIM.WindowsFrameType || (HPTRIM.WindowsFrameType = {}));
        var WindowsFrameType = HPTRIM.WindowsFrameType;
        (function (Word11FileTypes) {
            Word11FileTypes[Word11FileTypes["Word2003_doc"] = 0] = "Word2003_doc";
            Word11FileTypes[Word11FileTypes["Word2003Tmpl_dot"] = 1] = "Word2003Tmpl_dot";
        })(HPTRIM.Word11FileTypes || (HPTRIM.Word11FileTypes = {}));
        var Word11FileTypes = HPTRIM.Word11FileTypes;
        (function (WordFileTypes) {
            WordFileTypes[WordFileTypes["Word_docx"] = 0] = "Word_docx";
            WordFileTypes[WordFileTypes["WordMe_docm"] = 1] = "WordMe_docm";
            WordFileTypes[WordFileTypes["Word97_doc"] = 2] = "Word97_doc";
            WordFileTypes[WordFileTypes["WordTmpl_dotx"] = 3] = "WordTmpl_dotx";
            WordFileTypes[WordFileTypes["WordTmplMe_dotm"] = 4] = "WordTmplMe_dotm";
            WordFileTypes[WordFileTypes["Word97Tmpl_dot"] = 5] = "Word97Tmpl_dot";
            WordFileTypes[WordFileTypes["WordRTF_rtf"] = 6] = "WordRTF_rtf";
            WordFileTypes[WordFileTypes["WordODT_odt"] = 7] = "WordODT_odt";
            WordFileTypes[WordFileTypes["WordPlainText_txt"] = 8] = "WordPlainText_txt";
        })(HPTRIM.WordFileTypes || (HPTRIM.WordFileTypes = {}));
        var WordFileTypes = HPTRIM.WordFileTypes;
        (function (WordListPurpose) {
            WordListPurpose[WordListPurpose["AccessTitleWord"] = 0] = "AccessTitleWord";
            WordListPurpose[WordListPurpose["AccessNoteWord"] = 1] = "AccessNoteWord";
            WordListPurpose[WordListPurpose["AccessTitleOrNoteWord"] = 2] = "AccessTitleOrNoteWord";
            WordListPurpose[WordListPurpose["AccessClassificationWord"] = 3] = "AccessClassificationWord";
            WordListPurpose[WordListPurpose["AccessScheduleWord"] = 4] = "AccessScheduleWord";
            WordListPurpose[WordListPurpose["AccessThesaurusWord"] = 5] = "AccessThesaurusWord";
            WordListPurpose[WordListPurpose["AccessLocAddressWord"] = 6] = "AccessLocAddressWord";
            WordListPurpose[WordListPurpose["AccessCommAddressWord"] = 7] = "AccessCommAddressWord";
            WordListPurpose[WordListPurpose["AccessUserFieldWord"] = 8] = "AccessUserFieldWord";
            WordListPurpose[WordListPurpose["AccessArchiveEventWord"] = 9] = "AccessArchiveEventWord";
            WordListPurpose[WordListPurpose["AccessWorkflowWord"] = 10] = "AccessWorkflowWord";
            WordListPurpose[WordListPurpose["AccessActivityWord"] = 11] = "AccessActivityWord";
        })(HPTRIM.WordListPurpose || (HPTRIM.WordListPurpose = {}));
        var WordListPurpose = HPTRIM.WordListPurpose;
        (function (WordOpenFileTypes) {
            WordOpenFileTypes[WordOpenFileTypes["AllRecords"] = 0] = "AllRecords";
            WordOpenFileTypes[WordOpenFileTypes["AllFiles"] = 1] = "AllFiles";
            WordOpenFileTypes[WordOpenFileTypes["AllWordDocuments"] = 2] = "AllWordDocuments";
            WordOpenFileTypes[WordOpenFileTypes["WordDocuments"] = 3] = "WordDocuments";
            WordOpenFileTypes[WordOpenFileTypes["Word97Documents"] = 4] = "Word97Documents";
            WordOpenFileTypes[WordOpenFileTypes["AllWordTmpl"] = 5] = "AllWordTmpl";
            WordOpenFileTypes[WordOpenFileTypes["WordMacroTmpls"] = 6] = "WordMacroTmpls";
            WordOpenFileTypes[WordOpenFileTypes["Word97Tmpls"] = 7] = "Word97Tmpls";
            WordOpenFileTypes[WordOpenFileTypes["Other"] = 8] = "Other";
        })(HPTRIM.WordOpenFileTypes || (HPTRIM.WordOpenFileTypes = {}));
        var WordOpenFileTypes = HPTRIM.WordOpenFileTypes;
        (function (WordProcessorMergeFormats) {
            WordProcessorMergeFormats[WordProcessorMergeFormats["Word"] = 0] = "Word";
            WordProcessorMergeFormats[WordProcessorMergeFormats["TabDelimited"] = 1] = "TabDelimited";
            WordProcessorMergeFormats[WordProcessorMergeFormats["UserDefined"] = 2] = "UserDefined";
        })(HPTRIM.WordProcessorMergeFormats || (HPTRIM.WordProcessorMergeFormats = {}));
        var WordProcessorMergeFormats = HPTRIM.WordProcessorMergeFormats;
        (function (WordTypes) {
            WordTypes[WordTypes["TitleWord"] = 0] = "TitleWord";
            WordTypes[WordTypes["NoteWord"] = 1] = "NoteWord";
            WordTypes[WordTypes["AnyWord"] = 2] = "AnyWord";
            WordTypes[WordTypes["ClassificationWord"] = 3] = "ClassificationWord";
            WordTypes[WordTypes["ScheduleWord"] = 4] = "ScheduleWord";
            WordTypes[WordTypes["ThesaurusWord"] = 5] = "ThesaurusWord";
            WordTypes[WordTypes["LocAddressWord"] = 6] = "LocAddressWord";
            WordTypes[WordTypes["CommAddressWord"] = 7] = "CommAddressWord";
            WordTypes[WordTypes["ArchiveEventWord"] = 8] = "ArchiveEventWord";
            WordTypes[WordTypes["WorkflowWord"] = 9] = "WorkflowWord";
            WordTypes[WordTypes["ActivityWord"] = 10] = "ActivityWord";
        })(HPTRIM.WordTypes || (HPTRIM.WordTypes = {}));
        var WordTypes = HPTRIM.WordTypes;
        (function (WorkflowAccess) {
            WorkflowAccess[WorkflowAccess["View"] = 0] = "View";
            WorkflowAccess[WorkflowAccess["Update"] = 1] = "Update";
            WorkflowAccess[WorkflowAccess["CompleteActivities"] = 2] = "CompleteActivities";
            WorkflowAccess[WorkflowAccess["ModifyAccess"] = 3] = "ModifyAccess";
            WorkflowAccess[WorkflowAccess["Delete"] = 4] = "Delete";
        })(HPTRIM.WorkflowAccess || (HPTRIM.WorkflowAccess = {}));
        var WorkflowAccess = HPTRIM.WorkflowAccess;
        (function (WorkflowDocumentPlaceholderType) {
            WorkflowDocumentPlaceholderType[WorkflowDocumentPlaceholderType["Reference"] = 0] = "Reference";
            WorkflowDocumentPlaceholderType[WorkflowDocumentPlaceholderType["InitiatingRecord"] = 1] = "InitiatingRecord";
            WorkflowDocumentPlaceholderType[WorkflowDocumentPlaceholderType["WorkingDocument"] = 2] = "WorkingDocument";
        })(HPTRIM.WorkflowDocumentPlaceholderType || (HPTRIM.WorkflowDocumentPlaceholderType = {}));
        var WorkflowDocumentPlaceholderType = HPTRIM.WorkflowDocumentPlaceholderType;
        (function (WorkflowLockOperation) {
            WorkflowLockOperation[WorkflowLockOperation["Lock"] = 0] = "Lock";
            WorkflowLockOperation[WorkflowLockOperation["Unlock"] = 1] = "Unlock";
            WorkflowLockOperation[WorkflowLockOperation["Status"] = 2] = "Status";
        })(HPTRIM.WorkflowLockOperation || (HPTRIM.WorkflowLockOperation = {}));
        var WorkflowLockOperation = HPTRIM.WorkflowLockOperation;
        (function (XmlDocumentExportType) {
            XmlDocumentExportType[XmlDocumentExportType["Ignore"] = 0] = "Ignore";
            XmlDocumentExportType[XmlDocumentExportType["Link"] = 1] = "Link";
            XmlDocumentExportType[XmlDocumentExportType["Embed"] = 2] = "Embed";
        })(HPTRIM.XmlDocumentExportType || (HPTRIM.XmlDocumentExportType = {}));
        var XmlDocumentExportType = HPTRIM.XmlDocumentExportType;
        (function (XmlSchemaTypes) {
            XmlSchemaTypes[XmlSchemaTypes["Excluded"] = 0] = "Excluded";
            XmlSchemaTypes[XmlSchemaTypes["Normal"] = 1] = "Normal";
            XmlSchemaTypes[XmlSchemaTypes["Mandatory"] = 2] = "Mandatory";
            XmlSchemaTypes[XmlSchemaTypes["Display"] = 3] = "Display";
        })(HPTRIM.XmlSchemaTypes || (HPTRIM.XmlSchemaTypes = {}));
        var XmlSchemaTypes = HPTRIM.XmlSchemaTypes;
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var Setup;
        (function (Setup) {
            var Property = (function () {
                function Property(caption, value) {
                    this.caption = ko.observable("");
                    this.value = ko.observable("");
                    this.caption(caption);
                    this.value(value);
                }
                return Property;
            }());
            Setup.Property = Property;
            var TrimProperty = (function (_super) {
                __extends(TrimProperty, _super);
                function TrimProperty(id, caption, value) {
                    _super.call(this, caption, value);
                    this.id = id;
                }
                return TrimProperty;
            }(Property));
            Setup.TrimProperty = TrimProperty;
            var SetupInfo = (function () {
                function SetupInfo() {
                    this.properties = ko.observable([]);
                    this.defaultValue = HP.HPTRIM.Messages.web_loading;
                    this.trimClient = new HPTRIM.TrimClient();
                    this.configureWebConfigProperties();
                    this.configureDatabaseProperties();
                    this.configureVersionProperty();
                }
                SetupInfo.prototype.configureWebConfigProperties = function () {
                    var phoenixVersionDllVersion = new Property("Content Manager Software Version", HPRMWebConfig.softwareVersion);
                    var webConfigProperties = [phoenixVersionDllVersion];
                    this.properties(webConfigProperties);
                };
                SetupInfo.prototype.configureDatabaseProperties = function () {
                    for (var p in DatabaseProperties) {
                        this.properties().push(DatabaseProperties[p]);
                    }
                    this.fetchDatabaseProperties();
                };
                SetupInfo.prototype.configureLocalEnvironmentProperties = function () {
                };
                SetupInfo.prototype.configureVersionProperty = function () {
                    this.properties().push(Version['SoftwareVersion']);
                    var postString = "&format=json";
                    var promise = this.trimClient.doGet("Version", postString);
                    promise.done(function (response) {
                        var version = response.SoftwareVersion;
                        Version['SoftwareVersion'].value(version);
                    })
                        .fail(function (err, xhr) {
                        var theIgnoredError = err['ResponseStatus']['Message'];
                        alert(theIgnoredError);
                    });
                };
                SetupInfo.prototype.fetchDatabaseProperties = function () {
                    var me = this;
                    var postStringArray = [];
                    for (var p in DatabaseProperties) {
                        postStringArray.push(p);
                    }
                    var postString = "properties=" + postStringArray.join(',');
                    postString += "&format=json";
                    var promise = this.trimClient.doGet("Database", postString);
                    promise.done(function (response) {
                        var db = response.Results[0];
                        for (var prop in DatabaseProperties) {
                            if (typeof db[prop].Value != "undefined") {
                                DatabaseProperties[prop].value(db[prop].Value);
                            }
                            else if (db[prop].LocationFormattedName && db[prop].LocationFormattedName.Value) {
                                DatabaseProperties[prop].value(db[prop].LocationFormattedName.Value);
                            }
                            else if (db[prop].Uri) {
                                DatabaseProperties[prop].value(db[prop].Uri);
                            }
                            else {
                                DatabaseProperties[prop].value(db[prop]);
                            }
                        }
                    })
                        .fail(function (err, xhr) {
                        var theIgnoredError = err['ResponseStatus']['Message'];
                        alert(theIgnoredError);
                    });
                };
                return SetupInfo;
            }());
            Setup.SetupInfo = SetupInfo;
            var Constants = (function () {
                function Constants() {
                }
                Constants.Loading = HP.HPTRIM.Messages.web_loading + '...';
                return Constants;
            }());
            Setup.Constants = Constants;
            var DatabaseProperties = (function () {
                function DatabaseProperties() {
                }
                DatabaseProperties.DatabaseId = new TrimProperty("DatabaseId", "Database ID", Constants.Loading);
                DatabaseProperties.DatabaseName = new TrimProperty("DatabaseName", "Database Name ", Constants.Loading);
                DatabaseProperties.DatabaseWorkgroupServerName = new TrimProperty("DatabaseWorkgroupServerName", "Workgroup Server Name	 ", Constants.Loading);
                DatabaseProperties.DatabaseWorkgroupServerPort = new TrimProperty("DatabaseWorkgroupServerPort", "Workgroup Server Port	 ", Constants.Loading);
                DatabaseProperties.DatabaseSchemaVersion = new TrimProperty("DatabaseSchemaVersion", "DatabaseSchemaVersion ", Constants.Loading);
                DatabaseProperties.DatabaseClassifiedSecurity = new TrimProperty("DatabaseClassifiedSecurity", "DOD 5015.2 Classified Security ", Constants.Loading);
                DatabaseProperties.DatabaseFDA21CFR11compliant = new TrimProperty("DatabaseClassifiedSecurity", "Enforce FDA 21 CFR 11 Compliance	 ", Constants.Loading);
                DatabaseProperties.DatabaseCurrentUser = new TrimProperty("CurrentUser", "Current User", Constants.Loading);
                return DatabaseProperties;
            }());
            Setup.DatabaseProperties = DatabaseProperties;
            var Version = (function () {
                function Version() {
                }
                Version.SoftwareVersion = new TrimProperty("Version", "ServiceAPI Software Version", Constants.Loading);
                return Version;
            }());
            Setup.Version = Version;
        })(Setup = HPTRIM.Setup || (HPTRIM.Setup = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var Form;
        (function (Form) {
            var PageDecorator = (function () {
                function PageDecorator() {
                    this.id = "";
                    this.visible = ko.observable(true);
                    this.NotRefresh = false;
                    this.HideChevron = false;
                }
                PageDecorator.prototype.init = function () {
                    if (this.pageIndex == 0) {
                        $('#' + this.id).addClass("in");
                        this.onClick();
                    }
                    else {
                        if (this.NotRefresh) {
                            $('#' + this.id).addClass("in");
                            this.onClick();
                        }
                    }
                };
                PageDecorator.prototype.onClick = function () {
                    var ele = $('#' + this.id + "_caret");
                    if (ele) {
                        ele.toggleClass("hp-chevron-down hp-chevron-left");
                    }
                };
                PageDecorator.prototype.forceShow = function () {
                    var ele = $('#' + this.id + "_caret");
                    if (ele) {
                        ele.addClass("hp-chevron-down");
                    }
                    var formPart = $('#' + this.id);
                    if (formPart) {
                        formPart.addClass("in");
                    }
                };
                return PageDecorator;
            }());
            Form.PageDecorator = PageDecorator;
        })(Form = HPTRIM.Form || (HPTRIM.Form = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var Form;
        (function (Form) {
            var ClientMatterPartiesPageDecorator = (function (_super) {
                __extends(ClientMatterPartiesPageDecorator, _super);
                function ClientMatterPartiesPageDecorator(trimClient, uri) {
                    _super.call(this);
                    this.forObjectUri = -1;
                    this.pagePropertyName = "ChildClientMatterParties";
                    this.trimClient = trimClient;
                    var clientMatterPartiesField = new HP.HPTRIM.Field.ClientMatterPartiesField(this.trimClient, uri);
                    if (uri) {
                        this.forObjectUri = uri;
                    }
                    $.extend(this, clientMatterPartiesField);
                }
                ClientMatterPartiesPageDecorator.prototype.getValue = function () {
                    return this.clientMatterPartiesField.getValue();
                };
                ClientMatterPartiesPageDecorator.prototype.getPagePropertyName = function () {
                    return this.pagePropertyName;
                };
                return ClientMatterPartiesPageDecorator;
            }(Form.PageDecorator));
            Form.ClientMatterPartiesPageDecorator = ClientMatterPartiesPageDecorator;
        })(Form = HPTRIM.Form || (HPTRIM.Form = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var Form;
        (function (Form) {
            var ClientMatterRolesPageDecorator = (function (_super) {
                __extends(ClientMatterRolesPageDecorator, _super);
                function ClientMatterRolesPageDecorator(trimClient, uri) {
                    _super.call(this);
                    this.forObjectUri = 0;
                    this.pagePropertyName = "ChildClientMatterRoles";
                    this.trimClient = trimClient;
                    var clientMatterRolesField = new HP.HPTRIM.Field.ClientMatterRolesField(this.trimClient, uri);
                    if (uri) {
                        this.forObjectUri = uri;
                    }
                    $.extend(this, clientMatterRolesField);
                }
                ClientMatterRolesPageDecorator.prototype.getValue = function () {
                    return "ClientMatterRoles Page Decorator";
                };
                ClientMatterRolesPageDecorator.prototype.getPagePropertyName = function () {
                    return this.pagePropertyName;
                };
                return ClientMatterRolesPageDecorator;
            }(Form.PageDecorator));
            Form.ClientMatterRolesPageDecorator = ClientMatterRolesPageDecorator;
        })(Form = HPTRIM.Form || (HPTRIM.Form = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var Form;
        (function (Form) {
            var KeywordPageDecorator = (function (_super) {
                __extends(KeywordPageDecorator, _super);
                function KeywordPageDecorator(trimClient, uri) {
                    _super.call(this);
                    this.forObjectUri = 0;
                    this.pagePropertyName = "ChildKeywords";
                    this.trimClient = trimClient;
                    var keywords = new HP.HPTRIM.Field.KeywordsPageField(this.trimClient, uri);
                    if (uri) {
                        this.forObjectUri = uri;
                    }
                    $.extend(this, keywords);
                }
                KeywordPageDecorator.prototype.getValue = function () {
                    return "ChildKeywords";
                };
                KeywordPageDecorator.prototype.getPagePropertyName = function () {
                    return this.pagePropertyName;
                };
                return KeywordPageDecorator;
            }(Form.PageDecorator));
            Form.KeywordPageDecorator = KeywordPageDecorator;
        })(Form = HPTRIM.Form || (HPTRIM.Form = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var Form;
        (function (Form) {
            (function (FieldMandaoryOption) {
                FieldMandaoryOption[FieldMandaoryOption["None"] = 0] = "None";
                FieldMandaoryOption[FieldMandaoryOption["WarningOnly"] = 1] = "WarningOnly";
                FieldMandaoryOption[FieldMandaoryOption["Partially"] = 2] = "Partially";
                FieldMandaoryOption[FieldMandaoryOption["Mandatory"] = 3] = "Mandatory";
            })(Form.FieldMandaoryOption || (Form.FieldMandaoryOption = {}));
            var FieldMandaoryOption = Form.FieldMandaoryOption;
            var FieldDecorator = (function () {
                function FieldDecorator(pageItem) {
                    var _this = this;
                    this.Id = _.uniqueId('field');
                    this.Caption = "";
                    this.addFromLookupSet = false;
                    this.isNegated = false;
                    this.enable = ko.observable(true);
                    this.hasRecursive = ko.observable(false);
                    this.enterCallback = function (Value) { };
                    this.mandatoryOption = FieldMandaoryOption.None;
                    this.decoratorVisible = ko.observable(true);
                    this.fieldDisabled = ko.observable(false);
                    this.htmlElement = ko.observable(null);
                    this.error = ko.observable("");
                    this.tipText = ko.observable("");
                    this.submitPropertyName = "";
                    this.focusCallback = function () { };
                    if (pageItem) {
                        if (pageItem.Name) {
                            this.Id = pageItem.Name;
                        }
                        this.viewModel = pageItem;
                        if (pageItem.Caption) {
                            this.Caption = pageItem.Caption;
                        }
                        this.mandatoryOption = FieldMandaoryOption.None;
                        if (pageItem.Format == "Datetime") {
                            if (pageItem.Mandatory == true) {
                                if (pageItem.MandatoryTime == true) {
                                    this.mandatoryOption = FieldMandaoryOption.Mandatory;
                                }
                                else {
                                    this.mandatoryOption = FieldMandaoryOption.Partially;
                                }
                            }
                            else if (pageItem.WarnWhenBlank == true) {
                                this.mandatoryOption = FieldMandaoryOption.WarningOnly;
                            }
                        }
                        else if (pageItem.Mandatory == true) {
                            this.mandatoryOption = FieldMandaoryOption.Mandatory;
                        }
                        else if (pageItem.WarnWhenBlank == true) {
                            this.mandatoryOption = FieldMandaoryOption.WarningOnly;
                        }
                    }
                    else {
                        this.viewModel = {};
                    }
                    this.maxiValue = Number.MAX_VALUE;
                    this.miniValue = Number.MIN_VALUE;
                    this.maxiLength = Number.MAX_VALUE;
                    this.defaultValue = undefined;
                    if (pageItem != undefined && pageItem != null) {
                        this.ParentForm = pageItem.ParentForm;
                    }
                    this.setMaxValue = function (maxValue) {
                        if (maxValue == undefined) {
                            _this.maxiValue = Number.MAX_VALUE;
                        }
                        else {
                            _this.maxiValue = maxValue;
                        }
                    };
                    this.setMinValue = function (minValue) {
                        if (minValue == undefined) {
                            _this.miniValue = Number.MIN_VALUE;
                        }
                        else {
                            _this.miniValue = minValue;
                        }
                    };
                    this.setMaxLength = function (maxLength) {
                        if (maxLength == undefined) {
                            _this.maxiLength = Number.MAX_VALUE;
                        }
                        else {
                            _this.maxiLength = maxLength;
                        }
                    };
                    this.setDefaultValue = function (defaultValue) {
                        if (defaultValue != undefined) {
                            _this.defaultValue = defaultValue;
                        }
                    };
                    this.setMandatoryOption = function (mandatoryOptionValue) {
                        _this.mandatoryOption = mandatoryOptionValue;
                    };
                    this.getMaxValue = function () { return Number(_this.maxiValue); };
                    this.getMinValue = function () { return Number(_this.miniValue); };
                    this.getMaxLength = function () { return Number(_this.maxiLength); };
                    this.getDefaultValue = function () { return Number(_this.defaultValue); };
                    this.getMandatoryOption = function () { return _this.mandatoryOption; };
                    this.Value = ko.observable(null);
                    $.extend(this, pageItem);
                    this.tipText(this.Caption.toString());
                }
                FieldDecorator.prototype.setError = function (errString) {
                    if (errString != undefined && errString.trim().length > 0) {
                        this.error(errString.trim());
                        if (this.viewModel != undefined && this.viewModel.error != undefined) {
                            this.viewModel.error(errString.trim());
                        }
                    }
                    else {
                        this.error('');
                        if (this.viewModel != undefined && this.viewModel.error != undefined) {
                            this.viewModel.error('');
                        }
                    }
                };
                FieldDecorator.prototype.getValue = function () {
                };
                FieldDecorator.prototype.setValue = function (newValue) {
                    this.Value(newValue);
                };
                FieldDecorator.prototype.getValueForSearchForm = function () {
                    return this.getValueEx();
                };
                FieldDecorator.prototype.getValueEx = function () {
                    if (this.Value()) {
                        return this.Value();
                    }
                    if (this.Format == "Number" || this.Format == "Decimal" || this.Format == "Currency" || this.Format == "BigNumber") {
                        return 0;
                    }
                    if (this.Format == "Text" || this.Format == "String") {
                        return '';
                    }
                    return null;
                };
                FieldDecorator.prototype.getCurrencyValueEx = function () {
                    if (this.Value()) {
                        return Number(this.Value().replace(/,/g, ""));
                    }
                };
                FieldDecorator.prototype.fieldIsEmpty = function () {
                    var v = this.getValueEx();
                    if (v == null || v == undefined) {
                        return true;
                    }
                    return v.toString().length < 1;
                };
                FieldDecorator.prototype.reset = function () {
                    if (this.Value) {
                        this.Value(null);
                    }
                };
                FieldDecorator.prototype.setEnabled = function (enable) {
                    this["Readonly"] = !enable;
                    this.fieldDisabled(!enable);
                };
                FieldDecorator.prototype.enabled = function (enable) {
                    this.enable(enable);
                    this.fieldDisabled(!enable);
                    this["Readonly"] = !enable;
                };
                FieldDecorator.prototype.hide = function (toHide) {
                    this.decoratorVisible(!toHide);
                };
                FieldDecorator.prototype.isDisable = function () {
                    var isDisable = false;
                    if (this.Name == "RecordAccessControl" || this.Name == "LocationAccessControl") {
                        return false;
                    }
                    if (_.has(this, "Readonly")) {
                        isDisable = this["Readonly"];
                    }
                    return isDisable;
                };
                FieldDecorator.prototype.isValid = function () {
                    return true;
                };
                FieldDecorator.prototype.onblur = function (context, event) {
                    if (context != null && context != undefined) {
                        if (context.Value() != undefined && (context.Value().length > 0 || context.Value() > 0 || context.Readonly == true)) {
                            this.setError('');
                            return;
                        }
                        var fieldMandaoryOption = this.getMandatoryOption();
                        if (fieldMandaoryOption == FieldMandaoryOption.None) {
                            this.setError('');
                            return;
                        }
                        switch (fieldMandaoryOption) {
                            case FieldMandaoryOption.Mandatory:
                                var msg = HP.HPTRIM.Messages.web_mandatoryFieldNeedsValue;
                                msg = msg.replace("{0}", this.Caption);
                                this.setError(msg);
                                return;
                            case FieldMandaoryOption.Partially:
                                this.setError('partial');
                                return;
                            case FieldMandaoryOption.WarningOnly:
                                return;
                        }
                        this.setError('');
                    }
                };
                FieldDecorator.prototype.showInlineMsg = function (targetId, errorMsg) {
                    var msg;
                    var msgcontent;
                    var targetdiv = document.getElementById(targetId);
                    if (!document.getElementById(targetId + 'InputError')) {
                        msg = document.createElement('div');
                        msg.id = targetId + 'InputError';
                        msgcontent = document.createElement('div');
                        msgcontent.id = targetId + 'InputErrorContent';
                        targetdiv.parentNode.appendChild(msg);
                        msg.appendChild(msgcontent);
                        msgcontent.innerHTML = errorMsg;
                        var virtualPath = HPRMWebConfig.virtualDirectory;
                        virtualPath = virtualPath.substr(1);
                        var msgCssText = "display:block; position:absolute; z-index:200; background:url(" + virtualPath + "images/msg_arrow.gif) left center no-repeat; padding-left:7px";
                        msg.style.cssText = msgCssText;
                        msgcontent.style.cssText = "display:block; background:#f3e6e6; border:2px solid #924949; border-left:none; padding:5px; min-width:150px; max-width:250px";
                    }
                    else {
                        msg = document.getElementById(targetId + 'InputError');
                        msgcontent = document.getElementById(targetId + 'InputErrorContent');
                    }
                    if (targetdiv.parentNode.parentElement.clientWidth < (targetdiv.offsetWidth + msg.offsetWidth)) {
                        msg.style.cssText = "display:block; position:absolute; z-index:200; background:url(" + virtualPath + "images/msg_uparrow.gif) left center no-repeat; padding-left:7px";
                    }
                    else {
                        msg.style.top = targetdiv.offsetTop + 'px';
                        msg.style.left = targetdiv.offsetLeft + targetdiv.offsetWidth + 2 + 'px';
                    }
                    targetdiv.focus();
                };
                FieldDecorator.prototype.removeInlineMsg = function (targetId) {
                    var inlineMsgEle = document.getElementById(targetId + 'InputError');
                    if (inlineMsgEle != null) {
                        inlineMsgEle.parentNode.removeChild(inlineMsgEle);
                    }
                };
                FieldDecorator.prototype.leftPosition = function (target) {
                    var left = 0;
                    if (target.offsetParent) {
                        while (1) {
                            left += target.offsetLeft;
                            if (!target.offsetParent) {
                                break;
                            }
                            target = target.offsetParent;
                        }
                    }
                    else if (target.x) {
                        left += target.x;
                    }
                    return left;
                };
                FieldDecorator.prototype.topPosition = function (target) {
                    var top = 0;
                    if (target.offsetParent) {
                        while (1) {
                            top += target.offsetTop;
                            if (!target.offsetParent) {
                                break;
                            }
                            target = target.offsetParent;
                        }
                    }
                    else if (target.y) {
                        top += target.y;
                    }
                    return top;
                };
                return FieldDecorator;
            }());
            Form.FieldDecorator = FieldDecorator;
        })(Form = HPTRIM.Form || (HPTRIM.Form = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var Form;
        (function (Form) {
            var FieldNameOnlyDecorator = (function (_super) {
                __extends(FieldNameOnlyDecorator, _super);
                function FieldNameOnlyDecorator(trimClient, pageItem, isForm) {
                    _super.call(this);
                    this.template = "templates/Widgets/AdditionalFieldSelector";
                }
                FieldNameOnlyDecorator.prototype.focus = function () {
                    var _this = this;
                    setTimeout(function () {
                        var htmlEle = _this.htmlElement();
                        if (htmlEle) {
                            htmlEle.focus();
                        }
                        else {
                            htmlEle = document.getElementById(_this.Id);
                            if (htmlEle) {
                                htmlEle.focus();
                            }
                        }
                    }, 500);
                };
                return FieldNameOnlyDecorator;
            }(Form.FieldDecorator));
            Form.FieldNameOnlyDecorator = FieldNameOnlyDecorator;
            ;
            var AdditionalFieldDecorator = (function (_super) {
                __extends(AdditionalFieldDecorator, _super);
                function AdditionalFieldDecorator(trimClient, pageItem, isForm) {
                    _super.call(this, pageItem);
                    if ((pageItem.Format == "Object" || pageItem.Format == "String" || pageItem.Format == "Text") && pageItem.LookupValues && pageItem.LookupValues.length > 0) {
                        pageItem.ObjectType = "LookupItem";
                        if (pageItem.Format == "String") {
                            if (!pageItem.Mandatory) {
                                this.insertEmptyValueForLoookupSet(pageItem);
                            }
                        }
                        var decorator = Form.DecoratorFactory.determineDecoratorByFormat(trimClient, pageItem, isForm);
                        decorator.addFromLookupSet = true;
                        return decorator;
                    }
                    if (pageItem.Format != 'Text' && pageItem.LookupValues && pageItem.LookupValues.length > 0) {
                        var me = this;
                        if (pageItem.Format == "String") {
                            if (!pageItem.Mandatory) {
                                this.insertEmptyValueForLoookupSet(pageItem);
                            }
                        }
                        var comboBox = new HP.HPTRIM.Field.AditionalFieldComboBox(trimClient, pageItem.LookupValues, pageItem.LookupSetUri, pageItem.Value(), false);
                        if (pageItem.Format == "Text") {
                            var defaultValues = [];
                            var value = pageItem.Value();
                            if (value) {
                                defaultValues = value.split(";");
                                _.each(defaultValues, function (item) {
                                    item.trim();
                                });
                            }
                            comboBox = new HP.HPTRIM.Form.StringDecorator(pageItem);
                        }
                        this.getValueForSearchForm = function () {
                            if (me.viewModel) {
                                if (me.viewModel.getValueEx) {
                                    return me.viewModel.getValueEx();
                                }
                            }
                            return comboBox.getValue();
                        };
                        this.viewModel = comboBox;
                        $.extend(this.viewModel, pageItem);
                        this.template = "templates/Field/AdditionalField-LookupSet";
                        return;
                    }
                    var decorator = Form.DecoratorFactory.determineDecoratorByFormat(trimClient, pageItem, isForm);
                    if (pageItem.ObjectType == HPTRIM.BaseObjectTypes.Location.name) {
                        var locDecorator = decorator;
                        locDecorator.setPurpose(21);
                    }
                    if (pageItem.Format == "String") {
                        trimClient.getAdditionaFields(function (additionalFields) {
                            var udf = _.find(additionalFields, function (additionalField) {
                                return (additionalField.Name == pageItem.Name);
                            });
                            if (udf != undefined) {
                                if (!isNaN(udf.maxLength)) {
                                    decorator.setMaxLength(udf.maxLength);
                                }
                            }
                        });
                    }
                    if (pageItem.Format == "Number" || pageItem.Format == "Decimal" || pageItem.Format == "Currency" || pageItem.Format == "BigNumber") {
                        trimClient.getAdditionaFields(function (additionalFields) {
                            var udf = _.find(additionalFields, function (additionalField) {
                                return (additionalField.Name == pageItem.Name);
                            });
                            if (udf != undefined) {
                                if (!isNaN(udf.maxValue)) {
                                    if (udf.maxValue != undefined && udf.maxValue != 0) {
                                        decorator.setMaxValue(udf.maxValue);
                                    }
                                }
                                if (!isNaN(udf.minValue)) {
                                    if (udf.minValue != undefined) {
                                        decorator.setMinValue(udf.minValue);
                                    }
                                }
                            }
                        });
                    }
                    if (pageItem.Format == 'Text' && pageItem.LookupValues && pageItem.LookupValues.length > 0) {
                        decorator.addFromLookupSet = true;
                    }
                    return decorator;
                }
                AdditionalFieldDecorator.prototype.insertEmptyValueForLoookupSet = function (pageItem) {
                    var emptyValue = "";
                    if (pageItem.LookupValues.length > 0 && pageItem.LookupValues[0] !== emptyValue) {
                        pageItem.LookupValues.unshift("");
                    }
                };
                AdditionalFieldDecorator.prototype.getValueEx = function () {
                    if (this.viewModel) {
                        if (this.viewModel.getValueEx) {
                            return this.viewModel.getValueEx();
                        }
                    }
                    else {
                        _super.prototype.getValueEx.call(this);
                    }
                };
                return AdditionalFieldDecorator;
            }(Form.FieldDecorator));
            Form.AdditionalFieldDecorator = AdditionalFieldDecorator;
        })(Form = HPTRIM.Form || (HPTRIM.Form = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var Form;
        (function (Form) {
            var BooleanDecorator = (function (_super) {
                __extends(BooleanDecorator, _super);
                function BooleanDecorator(pageItem) {
                    _super.call(this, pageItem);
                    this.template = "templates/Field/CheckBox";
                }
                BooleanDecorator.prototype.getValueEx = function () {
                    return ((this.Value() || this.Value() == false) ? this.Value().toString() : "");
                };
                return BooleanDecorator;
            }(Form.FieldDecorator));
            Form.BooleanDecorator = BooleanDecorator;
            var InvisibleBooleanDecorator = (function (_super) {
                __extends(InvisibleBooleanDecorator, _super);
                function InvisibleBooleanDecorator(pageItem) {
                    _super.call(this, pageItem);
                    this.template = "templates/Field/CheckBoxHidden";
                }
                InvisibleBooleanDecorator.prototype.getValueEx = function () {
                    return true;
                };
                return InvisibleBooleanDecorator;
            }(BooleanDecorator));
            Form.InvisibleBooleanDecorator = InvisibleBooleanDecorator;
            var TickCheckBox = (function (_super) {
                __extends(TickCheckBox, _super);
                function TickCheckBox(pageItem) {
                    _super.call(this, pageItem);
                    this.onClick = function (currentCheckBox, evt) { return true; };
                    this.template = "templates/Field/CheckBoxTick";
                }
                return TickCheckBox;
            }(BooleanDecorator));
            Form.TickCheckBox = TickCheckBox;
            var DotCheckBox = (function (_super) {
                __extends(DotCheckBox, _super);
                function DotCheckBox(pageItem, fieldDecorators) {
                    _super.call(this, pageItem);
                    this.parentFieldDecorators = [];
                    this.template = "templates/Field/CheckBoxDot";
                    this.parentFieldDecorators = fieldDecorators;
                }
                DotCheckBox.prototype.onClick = function (currentCheckBox, evt) {
                    var _this = this;
                    if (this.Value() == true) {
                        if (this.parentFieldDecorators != undefined && this.parentFieldDecorators.length > 1) {
                            _.each(this.parentFieldDecorators, function (fieldDecorator) {
                                if (fieldDecorator.submitPropertyName !== _this.submitPropertyName) {
                                    fieldDecorator.Value(false);
                                }
                            });
                        }
                    }
                    return true;
                };
                return DotCheckBox;
            }(BooleanDecorator));
            Form.DotCheckBox = DotCheckBox;
        })(Form = HPTRIM.Form || (HPTRIM.Form = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var Form;
        (function (Form) {
            var CurrencyDecorator = (function (_super) {
                __extends(CurrencyDecorator, _super);
                function CurrencyDecorator(pageItem) {
                    _super.call(this, pageItem);
                    this.max = 999999999999998.99999999;
                    this.min = -999999999999998.99999999;
                    this.template = "templates/Field/Currency";
                    this.setMinValue(this.min);
                    this.setMaxValue(this.max);
                    this.configViewModel(pageItem);
                }
                CurrencyDecorator.prototype.configViewModel = function (pageItem) {
                    var _this = this;
                    setTimeout(function () {
                        var value = _this.Value();
                        if (value != undefined && isNaN(value) == false) {
                            var x = Number(value).toFixed(pageItem.CurrencyDecimalDigits);
                            var parts = x.toString().split(".");
                            parts[0] = parts[0].replace(/\B(?=(\d{3})+(?!\d))/g, ",");
                            _this.Value(parts.join("."));
                        }
                    }, 400);
                };
                CurrencyDecorator.prototype.onkeypress = function (context, event) {
                    if (context != null && context != undefined) {
                        if (this.Value()) {
                            var $this = this.Value().replace(/,/g, "");
                        }
                        if ((event.which < 48 || event.which > 57) && (event.which != 44) && (event.which != 46)) {
                            event.preventDefault();
                            return false;
                        }
                        else {
                            return true;
                        }
                    }
                };
                CurrencyDecorator.prototype.onblur = function (context, event) {
                    if (context != null && context != undefined) {
                        if (this.Value()) {
                            var value = parseFloat(this.Value());
                            if (this.getMaxValue() != undefined) {
                                this.max = this.getMaxValue();
                            }
                            if (this.getMinValue() != undefined) {
                                this.min = this.getMinValue();
                            }
                            if (value > this.max || value < this.min) {
                                var msg = HP.HPTRIM.Messages.edi_numberOutOfRange;
                                if (this.max == 999999999999998.99999999 || this.max == Number.MAX_VALUE) {
                                    msg = HP.HPTRIM.Messages.web_valueMustNotLessThan;
                                    msg = msg.replace("{0}", this.min.toPrecision());
                                }
                                else {
                                    if (this.min == -999999999999998.99999999 || this.max == Number.MIN_VALUE) {
                                        msg = HP.HPTRIM.Messages.web_valueMustNotLargerThan;
                                        msg = msg.replace("{0}", this.max.toPrecision());
                                    }
                                    else {
                                        msg = msg.replace("{0}", value.toString());
                                        msg = msg.replace("{1}", this.min.toPrecision());
                                        msg = msg.replace("{2}", this.max.toPrecision());
                                    }
                                }
                                this.error(msg);
                                return false;
                            }
                        }
                        _super.prototype.onblur.call(this, context, event);
                    }
                };
                return CurrencyDecorator;
            }(Form.FieldDecorator));
            Form.CurrencyDecorator = CurrencyDecorator;
        })(Form = HPTRIM.Form || (HPTRIM.Form = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var Form;
        (function (Form) {
            var CurrencyRangeDecorator = (function (_super) {
                __extends(CurrencyRangeDecorator, _super);
                function CurrencyRangeDecorator(pageItem) {
                    var _this = this;
                    _super.call(this, pageItem);
                    this.Value = ko.observable("");
                    this.ValueTo = ko.observable("");
                    this.ValueFrom = ko.observable("");
                    this.numberString = ko.observable("");
                    $.extend(this, pageItem);
                    this.template = "templates/Field/NumberRange";
                    this.ValueFrom.subscribe(function (newValue) {
                        _this.Value(_this.getValueEx());
                    });
                    this.ValueTo.subscribe(function (newValue) {
                        _this.Value(_this.getValueEx());
                    });
                    this.numberString.subscribe(function (newValue) {
                        _this.Value(_this.getValueEx());
                    });
                }
                CurrencyRangeDecorator.prototype.setValue = function (newValue) {
                    var me = this;
                    var theParts = newValue.split(' to ');
                    if (theParts[0]) {
                        this.ValueFrom(theParts[0]);
                    }
                    if (theParts[1]) {
                        this.ValueTo(theParts[1]);
                    }
                };
                CurrencyRangeDecorator.prototype.getValueEx = function () {
                    if (this.ValueFrom() && this.ValueTo()) {
                        if (+this.ValueFrom() > +this.ValueTo()) {
                            return this.ValueTo() + ' to ' + this.ValueFrom();
                        }
                        else {
                            return this.ValueFrom() + ' to ' + this.ValueTo();
                        }
                    }
                    else if (!this.ValueFrom() && this.ValueTo()) {
                        return this.ValueTo();
                    }
                    else if (this.ValueFrom() && !this.ValueTo()) {
                        return this.ValueFrom();
                    }
                    else {
                        return null;
                    }
                };
                CurrencyRangeDecorator.prototype.numberFieldReader = function (numberField) {
                    if (!numberField()) {
                        return null;
                    }
                    var value = parseFloat(numberField());
                    var max = 999999999999998.99999999;
                    var min = -999999999999998.99999999;
                    if (this.getMaxValue() != undefined) {
                        max = this.getMaxValue();
                    }
                    if (this.getMinValue() != undefined) {
                        min = this.getMinValue();
                    }
                    if (value > max || value < min) {
                        var msg = HP.HPTRIM.Messages.edi_numberOutOfRange;
                        msg = msg.replace("{0}", value.toString());
                        msg = msg.replace("{1}", min.toPrecision());
                        msg = msg.replace("{2}", max.toPrecision());
                        this.error(msg);
                        return null;
                    }
                    this.error("");
                    return value;
                };
                CurrencyRangeDecorator.prototype.doAfterRender = function (reinitialise) {
                };
                CurrencyRangeDecorator.prototype.onblur = function (context, event) {
                    if (context != null && context != undefined) {
                        if (this.Value()) {
                            var value = parseFloat(this.Value());
                            var max = 999999999999998.99999999;
                            var min = -999999999999998.99999999;
                            if (this.getMaxValue() != undefined) {
                                max = this.getMaxValue();
                            }
                            if (this.getMinValue() != undefined) {
                                min = this.getMinValue();
                            }
                            if (value > max || value < min) {
                                var msg = HP.HPTRIM.Messages.edi_numberOutOfRange;
                                msg = msg.replace("{0}", value.toString());
                                msg = msg.replace("{1}", min.toPrecision());
                                msg = msg.replace("{2}", max.toPrecision());
                                this.setError(msg);
                                return;
                            }
                        }
                        _super.prototype.onblur.call(this, context, event);
                    }
                };
                return CurrencyRangeDecorator;
            }(Form.FieldDecorator));
            Form.CurrencyRangeDecorator = CurrencyRangeDecorator;
        })(Form = HPTRIM.Form || (HPTRIM.Form = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var Form;
        (function (Form) {
            var DateDecorator = (function (_super) {
                __extends(DateDecorator, _super);
                function DateDecorator(pageItem, dateFormat) {
                    _super.call(this, pageItem);
                    this.initDatePicker = false;
                    this.dateTimeFormatPlaceHolder = "";
                    this.dateOnly = false;
                    this.options = {};
                    this.dateFormat = dateFormat;
                    if (pageItem.Format && pageItem.Format.toLowerCase() == "date") {
                        this.dateOnly = true;
                    }
                    var me = this;
                    var isDateTime = this['Format'] == "Datetime";
                    this.dateTimeFormatPlaceHolder = HP.HPTRIM.Form.DateDecorator.initDateTimeFormatPlaceHolder(dateFormat, isDateTime);
                    if (!me.dateFormat.dateSeparator) {
                        me.dateFormat.dateSeparator = '/';
                    }
                    var dateSep = me.dateFormat.dateSeparator;
                    this.configureDateFormat();
                    this.computedValue = ko.computed({
                        read: me.readDate,
                        write: me.writeDate,
                        owner: me
                    });
                    $.extend(this, pageItem);
                    this.template = "templates/Field/Date";
                }
                DateDecorator.initDateTimeFormatPlaceHolder = function (dateFormat, isDateTime) {
                    var dateSep = dateFormat.dateSeparator;
                    var dateTimeFormatPlaceHolder = "";
                    var util = HP.HPTRIM.Utils.TrimHelper;
                    if (dateFormat.yyyymmdd) {
                        dateTimeFormatPlaceHolder = util.format("YYYY{0}MM{0}DD", [dateSep]);
                    }
                    else if (dateFormat.ddmmyyyy) {
                        dateTimeFormatPlaceHolder = util.format("DD{0}MM{0}YYYY", [dateSep]);
                    }
                    else {
                        dateTimeFormatPlaceHolder = util.format("MM{0}DD{0}YYYY", [dateSep]);
                    }
                    if (this['Format'] == "Datetime" || isDateTime) {
                        dateTimeFormatPlaceHolder = util.format("{0} hh:mm:ss", [dateTimeFormatPlaceHolder]);
                    }
                    return dateTimeFormatPlaceHolder;
                };
                DateDecorator.makeBootstrapDate = function (elementId, options, dateFormat) {
                    var parseInputDate = function (input) {
                        var re = moment(input, dateFormat);
                        if (re.isValid()) {
                            if (re.year() == 0 &&
                                re.month() == 0) {
                                re = moment.invalid();
                            }
                            if (re.hour() == 0 &&
                                re.minute() == 0 &&
                                re.second() == 0) {
                                re = moment.invalid();
                            }
                            if (typeof input === 'string') {
                                if (input.indexOf(':') > 0) {
                                    re = moment.invalid();
                                }
                            }
                        }
                        return re;
                    };
                    var widgetParent = $(document.body);
                    var pickerOptions = {
                        showClear: true,
                        showClose: true,
                        allowInputToggle: false,
                        focusOnShow: true,
                        showTodayButton: true,
                        useCurrent: false,
                        format: dateFormat,
                        keepInvalid: true,
                        parseInputDate: parseInputDate,
                        widgetParent: widgetParent,
                    };
                    $.extend(pickerOptions, options);
                    var picker = $(elementId).datetimepicker(pickerOptions);
                    return picker;
                };
                DateDecorator.prototype.isClear = function () {
                    if (this.computedValue()) {
                        return false;
                    }
                    return true;
                };
                DateDecorator.prototype.isValid = function () {
                    var isValid = true;
                    var moDateTime = moment(this.computedValue(), this.dateFormat.friendlyDateFormat, true);
                    var moDate = moment(this.computedValue(), this.dateFormat.dateOnlyFormat, true);
                    isValid = moDateTime.isValid() || moDate.isValid();
                    return isValid;
                };
                DateDecorator.prototype.isValidDateTime = function () {
                    var isValid = true;
                    var value = this.Value();
                    if (value && value.DateTime) {
                        try {
                            this.validateTimeDate(value.DateTime);
                        }
                        catch (e) {
                            this.error(e);
                            return;
                        }
                    }
                    return isValid;
                };
                DateDecorator.prototype.getTimeValue = function () {
                    var value = this.Value();
                    if (value && value.DateTime) {
                        var moDateTime = moment(value.DateTime, this.dateFormat.friendlyDateFormat, true);
                        var moDate = moment(value.DateTime, this.dateFormat.dateOnlyFormat, true);
                        if (moDateTime.isValid()) {
                            return moDateTime.toDate().getTime();
                        }
                        else if (moDate.isValid()) {
                            return moDate.toDate().getTime();
                        }
                    }
                    return false;
                };
                DateDecorator.prototype.mandatoryTimeSupplied = function () {
                    var isValid = true;
                    if (this.computedValue()) {
                        if (this.MandatoryTime) {
                            var parts = this.computedValue().trim().split(' ');
                            if (parts.length != 2 && parts.length != 3) {
                                isValid = false;
                            }
                        }
                    }
                    return isValid;
                };
                DateDecorator.prototype.getDisplayValue = function () {
                    return this.computedValue();
                };
                DateDecorator.prototype.getValueEx = function () {
                    if (this.computedValue() == "") {
                        return "";
                    }
                    var value = this.Value();
                    if (value && value.__type) {
                        var returnValue = moment(value.DateTime).toISOString();
                        return returnValue;
                    }
                    var trimDateTime = this.Value();
                    var dateOnlyFormat = this.dateOnlyFormat;
                    var dateTimeFormat = this.dateTimeFormat;
                    var returnValue = "";
                    var parts = trimDateTime.DateTime.trim().split(' ');
                    var inputIsDateOnly = true;
                    if (parts.length == 2 || parts.length == 3) {
                        inputIsDateOnly = false;
                    }
                    var getIsoDateTime = function (mo) {
                        var padLeft = function (val) {
                            var re = "" + val;
                            if (val < 10) {
                                re = "0" + "" + val;
                            }
                            return re;
                        };
                        var month = mo.month() + 1;
                        return mo.year() + "-" + padLeft(month) + "-" + padLeft(mo.date()) + "T" + padLeft(mo.hour()) + ":" + padLeft(mo.minute()) + ":" + padLeft(mo.second());
                    };
                    if (inputIsDateOnly) {
                        if (this.Format == "Datetime" && this.MandatoryTime == true) {
                            returnValue = getIsoDateTime(moment(trimDateTime.DateTime, dateTimeFormat));
                        }
                        else {
                            var dateMoment = moment.utc(trimDateTime.DateTime, dateOnlyFormat);
                            returnValue = dateMoment.toISOString();
                            if (returnValue.indexOf('T') > 0) {
                                returnValue = returnValue.substring(0, returnValue.indexOf('T'));
                            }
                        }
                    }
                    else {
                        returnValue = getIsoDateTime(moment(trimDateTime.DateTime, dateTimeFormat));
                    }
                    return returnValue;
                };
                DateDecorator.prototype.getValueForSearchForm = function () {
                    return this.readDate();
                };
                DateDecorator.prototype.toShortDate = function (date) {
                    var day = date.getDate(), month = date.getMonth() + 1, year = date.getFullYear();
                    var separator = this.dateFormat.dateSeparator;
                    var rc = "";
                    if (this.dateFormat.monthBeforeDay === true) {
                        rc = month + separator + day + separator + year;
                    }
                    else {
                        rc = day + separator + month + separator + year;
                    }
                    return rc;
                };
                DateDecorator.prototype.reset = function () {
                    this.Value({
                        IsTimeClear: true,
                        DateTime: Date.now,
                        IsClear: true,
                    });
                    this.initDatePicker = false;
                };
                DateDecorator.prototype.setByDate = function (dateTime) {
                    this.setByDateTime(dateTime, true);
                };
                DateDecorator.prototype.setOptions = function (options) {
                    $.extend(this.options, options);
                };
                DateDecorator.prototype.setByDateTime = function (dateTime, onlyUseDate) {
                    var me = this;
                    var dateSep = me.dateFormat.dateSeparator;
                    var dateAsMoment = moment(dateTime);
                    if (!dateAsMoment) {
                        var trimDateTime = me.Value();
                        var msg = HP.HPTRIM.Messages.core_badDateValue;
                        msg = msg.replace("{0}", trimDateTime.DateTime);
                        me.error(msg);
                    }
                    var dateValue = dateAsMoment.format((this.dateTimeFormat));
                    if (onlyUseDate) {
                        dateValue = dateAsMoment.format(this.dateOnlyFormat);
                    }
                    if (me['MandatoryTime'] == true) {
                        dateValue = dateAsMoment.format(this.dateTimeFormat);
                    }
                    var value = dateValue;
                    me.Value({
                        IsTimeClear: onlyUseDate,
                        DateTime: value,
                        IsClear: false,
                    });
                };
                DateDecorator.prototype.getFormattedDate = function (trimDateTime) {
                    var returnValue = "";
                    var mob = moment(trimDateTime.DateTime);
                    var dateOnlyFormat = this.dateOnlyFormat;
                    var dateTimeFormat = this.dateTimeFormat;
                    if (trimDateTime.IsTimeClear) {
                        var dateOnly = mob.format(dateOnlyFormat);
                        returnValue = dateOnly;
                        return returnValue;
                    }
                    else {
                        returnValue = mob.format(dateTimeFormat);
                        return returnValue;
                    }
                };
                DateDecorator.prototype.configureDateFormat = function () {
                    var format = HPTRIM.Utils.DateHelper.getDateFormat(this.dateFormat);
                    this.dateOnlyFormat = format.dateOnlyFormat;
                    this.dateTimeFormat = format.dateTimeFormat;
                };
                DateDecorator.prototype.validateDate = function (input) {
                    var regex = null;
                    if (this.dateFormat.yyyymmdd) {
                        regex = /^(([1-9]|[20-9]){4})[-\/.]([1-9]|0[1-9]|1[012])[- \/.](0[0-9]|[0-9]|[12][0-9]|3[01])/;
                    }
                    else if (this.dateFormat.ddmmyyyy) {
                        regex = /^(0[0-9]|[0-9]|[12][0-9]|3[01])[\/.-]([1-9]|0[1-9]|1[012])[\/.-](([1-9]|[20-9]){4})/;
                    }
                    else {
                        regex = /^([1-9]|0[1-9]|1[012])[\/.-](0[1-9]|[1-9]|[12][0-9]|3[01])[\/.-](([1-9]|[20-9]){4})/;
                    }
                    if (!regex.test(input)) {
                        var invalidFormat = HP.HPTRIM.Utils.String.format(HP.HPTRIM.Messages.web_dp_invalidText, [input, this.dateFormat.dateOnlyFormat]);
                        ;
                        throw invalidFormat;
                    }
                };
                DateDecorator.prototype.validateTimeDate = function (input) {
                    var regex = null;
                    input = input.trim();
                    if (this.dateFormat.yyyymmdd) {
                        regex = /^(([1-9]|[20-9]){4})[-\/.]([1-9]|0[1-9]|1[012])[- \/.](0[0-9]|[0-9]|[12][0-9]|3[01])((\s(0[0-9]|1[0-2]):(0[0-9]|[1-59]\d):(0[0-9]|[1-59]\d)\s(AM|am|PM|pm))|(\s(0[0-9]|1[0-9]|2[0-3]):(0[0-9]|[1-59]\d):(0[0-9]|[1-59]\d)))?$/;
                    }
                    else if (this.dateFormat.ddmmyyyy) {
                        regex = /^(0[0-9]|[0-9]|[12][0-9]|3[01])[\/.-]([1-9]|0[1-9]|1[012])[\/.-](([1-9]|[20-9]){4})((\s(0[0-9]|1[0-2]):(0[0-9]|[1-59]\d):(0[0-9]|[1-59]\d)\s(AM|am|PM|pm))|(\s(0[0-9]|1[0-9]|2[0-3]):(0[0-9]|[1-59]\d):(0[0-9]|[1-59]\d)))?$/;
                    }
                    else {
                        regex = /^([1-9]|0[1-9]|1[012])[\/.-](0[1-9]|[1-9]|[12][0-9]|3[01])[\/.-](([1-9]|[20-9]){4})((\s(0[0-9]|1[0-2]):(0[0-9]|[1-59]\d):(0[0-9]|[1-59]\d)\s(AM|am|PM|pm))|(\s(0[0-9]|1[0-9]|2[0-3]):(0[0-9]|[1-59]\d):(0[0-9]|[1-59]\d)))?$/;
                    }
                    if (!regex.test(input)) {
                        var invalidFormat = HP.HPTRIM.Utils.String.format(HP.HPTRIM.Messages.web_dp_invalidText, [input, this.dateFormat.friendlyDateFormat]);
                        throw invalidFormat;
                    }
                };
                DateDecorator.prototype.writeDate = function (value) {
                    this.setError("");
                    if (value.trim() == "") {
                        this.Value({
                            IsClear: true,
                            DateTime: ""
                        });
                        return;
                    }
                    try {
                        this.validateDate(value);
                    }
                    catch (e) {
                        this.error(e);
                        return;
                    }
                    this.Value({
                        IsClear: false,
                        DateTime: value
                    });
                };
                DateDecorator.prototype.readDate = function () {
                    var me = this;
                    var trimDateTime = me.Value();
                    var dateSep = this.dateFormat.dateSeparator;
                    if (trimDateTime == undefined ||
                        trimDateTime == "") {
                        return "";
                    }
                    if (trimDateTime && trimDateTime.IsClear) {
                        return "";
                    }
                    trimDateTime = me.Value();
                    if (trimDateTime['__type']) {
                        if (trimDateTime.StringValue) {
                            return trimDateTime.StringValue;
                        }
                        else {
                            return me.getFormattedDate(trimDateTime);
                        }
                    }
                    var format = this.dateOnlyFormat;
                    var parts = trimDateTime.DateTime.trim().split(' ');
                    if (parts.length == 2 || parts.length == 3) {
                        format = this.dateTimeFormat;
                    }
                    var mob = moment(trimDateTime.DateTime, format);
                    if (!mob.isValid()) {
                        this.error(HP.HPTRIM.Messages.sdk_invalidDateTime);
                        return trimDateTime.DateTime;
                    }
                    var hour = mob.hour(), minute = mob.minute(), second = mob.seconds();
                    if (hour > 0 || minute > 0 || second > 0) {
                        format = this.dateTimeFormat;
                    }
                    var returnValue = mob.format(format);
                    if (returnValue.indexOf(dateSep + '00') > 2) {
                        returnValue = returnValue.replace(dateSep + '00', dateSep + '20');
                        var parts2 = returnValue.trim().split(' ');
                        this.writeDate(parts2[0]);
                    }
                    return returnValue;
                };
                DateDecorator.prototype.reinitaliseDatePicker = function () {
                    this.initDatePicker = false;
                    this.doAfterRender();
                };
                DateDecorator.prototype.doAfterRender = function (reinitialise) {
                    var _this = this;
                    var me = this;
                    var picker = null;
                    var app = window['root'];
                    if (app) {
                        if (app.name == "CreateRecordAPP") {
                            return;
                        }
                    }
                    if (reinitialise) {
                        this.initDatePicker = false;
                    }
                    if (this.initDatePicker) {
                        return;
                    }
                    var timeoutFunction = setTimeout(function () {
                        var format = me.dateTimeFormat;
                        if (true === _this.dateOnly) {
                            format = me.dateOnlyFormat;
                        }
                        var elementId = '#' + me.Id + '_container';
                        var picker = DateDecorator.makeBootstrapDate(elementId, _this.options, format);
                        var updateModel = function (e) {
                            var dateString = HPTRIM.Utils.TrimHelper.getDateStringFromDatePickerEvent(e, format);
                            _this.writeDate(dateString);
                        };
                        picker.bind('dp.change', updateModel);
                    }, 500);
                    this.initDatePicker = true;
                };
                DateDecorator.prototype.onblur = function (context, event) {
                    if (context != null && context != undefined) {
                        this.doAfterRender();
                        if (this.error().length > 0) {
                            return;
                        }
                        var msg = '';
                        var fieldMandaoryOption = this.getMandatoryOption();
                        if (fieldMandaoryOption == Form.FieldMandaoryOption.None) {
                            this.setError('');
                            return;
                        }
                        if (this.Format == 'Date') {
                            if (fieldMandaoryOption == Form.FieldMandaoryOption.Mandatory) {
                                var moDate = moment(this.computedValue(), this.dateFormat.friendlyDateFormat);
                                if (!moDate.isValid()) {
                                    msg = HP.HPTRIM.Messages.web_dateValueMustBeSet;
                                    msg = msg.replace("{0}", this.Caption);
                                    this.setError(msg);
                                    return;
                                }
                            }
                        }
                        else {
                            if (fieldMandaoryOption == Form.FieldMandaoryOption.Mandatory) {
                                var moDateTime = moment(this.computedValue(), this.dateFormat.friendlyDateFormat);
                                if (!moDateTime.isValid() || !this.mandatoryTimeSupplied()) {
                                    msg = HP.HPTRIM.Messages.web_datetAndTimeValueMustBeSet;
                                    msg = msg.replace("{0}", this.Caption);
                                    this.setError(msg);
                                    return;
                                }
                            }
                            else {
                                var moDate = moment(this.computedValue(), this.dateFormat.dateOnlyFormat);
                                if (!moDate.isValid()) {
                                    msg = HP.HPTRIM.Messages.web_dateValueMustBeSet;
                                    msg = msg.replace("{0}", this.Caption);
                                    this.setError(msg);
                                    return;
                                }
                            }
                        }
                        this.setError('');
                        return;
                    }
                };
                return DateDecorator;
            }(Form.FieldDecorator));
            Form.DateDecorator = DateDecorator;
        })(Form = HPTRIM.Form || (HPTRIM.Form = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var Form;
        (function (Form) {
            var DateRangeDecorator = (function (_super) {
                __extends(DateRangeDecorator, _super);
                function DateRangeDecorator(trimClient, pageItem, dateFormat) {
                    var _this = this;
                    _super.call(this, pageItem);
                    this.dateTimeFormatPlaceHolder = "";
                    this.ValueTo = ko.observable(null);
                    this.ValueFrom = ko.observable(null);
                    this.dateOnly = false;
                    this.initDatePicker = false;
                    this.dateMethod = { value: 0, text: HP.HPTRIM.Messages.web_searchDateRange };
                    this.stringMethod = { value: 2, text: HP.HPTRIM.Messages.web_searchDateStringFormat };
                    this.inputMethods = ko.observableArray([this.dateMethod, this.stringMethod]);
                    this.selectedMethod = ko.observable(this.dateMethod);
                    this.selectedMethodValue = ko.observable(this.dateMethod.value);
                    this.dateString = ko.observable("");
                    this.tenseValues = ko.observableArray([]);
                    this.selectedTense = ko.observable(null);
                    this.selectedTenseValue = ko.observable("");
                    this.showingSingular = ko.observable(true);
                    this.periodCount = ko.observable("1");
                    this.periodPluralValues = ko.observableArray([]);
                    this.selectedPeriodPlural = ko.observable(null);
                    this.selectedPeriodPluralValue = ko.observable("");
                    this.periodSingularValues = ko.observableArray([]);
                    this.selectedPeriodSingular = ko.observable(null);
                    this.selectedPeriodSingularValue = ko.observable("");
                    this.dateFormat = dateFormat;
                    if (pageItem.Format && pageItem.Format.toLowerCase() == "date") {
                        this.dateOnly = true;
                    }
                    var isDateTime = this['Format'] == "Datetime";
                    this.dateTimeFormatPlaceHolder = HP.HPTRIM.Form.DateDecorator.initDateTimeFormatPlaceHolder(dateFormat, isDateTime);
                    this.configureDates();
                    this.configureDateFormat();
                    $.extend(this, pageItem);
                    this.template = "templates/Field/DateRange";
                    var me = this;
                    trimClient.getAndProcessEnumDefinition("SearchTimeTense", function (result) {
                        me.tenseValues(result);
                        me.selectedTense(result[0]);
                        me.selectedTenseValue(result[0].Name);
                    });
                    trimClient.getAndProcessEnumDefinition("SearchTimePeriodSingular", function (result) {
                        var weekEnumValue = _.find(result, function (currentResult) {
                            return currentResult.Name == "Week";
                        });
                        if (weekEnumValue) {
                            me.selectedPeriodSingular(weekEnumValue);
                            me.selectedPeriodSingularValue(weekEnumValue.Name);
                        }
                        me.periodSingularValues(result);
                    });
                    trimClient.getAndProcessEnumDefinition("SearchTimePeriodPlural", function (result) {
                        var weeksEnumValue = _.find(result, function (currentResult) {
                            return currentResult.Name == "Weeks";
                        });
                        if (weeksEnumValue) {
                            me.selectedPeriodPlural(weeksEnumValue);
                            me.selectedPeriodPluralValue(weeksEnumValue.Name);
                        }
                        me.periodPluralValues(result);
                    });
                    this.ValueFrom.subscribe(function (newValue) {
                        _this.Value(_this.getValueEx());
                    });
                    this.ValueTo.subscribe(function (newValue) {
                        _this.Value(_this.getValueEx());
                    });
                    this.dateString.subscribe(function (newValue) {
                        _this.Value(_this.getValueEx());
                    });
                    this.selectedMethod.subscribe(function (newValue) {
                        _this.Value(_this.getValueEx());
                    });
                    this.selectedTenseValue.subscribe(function (newValue) {
                        _this.Value(_this.getValueEx());
                    });
                    this.selectedPeriodPluralValue.subscribe(function (newValue) {
                        _this.Value(_this.getValueEx());
                    });
                    this.selectedPeriodSingularValue.subscribe(function (newValue) {
                        _this.Value(_this.getValueEx());
                    });
                    this.periodCount.subscribe(function (newValue) {
                        var periodCount = 0;
                        if (newValue) {
                            periodCount = +newValue;
                        }
                        if (periodCount && periodCount == 1) {
                        }
                        else {
                        }
                        _this.Value(_this.getValueEx());
                    });
                }
                DateRangeDecorator.prototype.configureDateFormat = function () {
                    var format = HPTRIM.Utils.DateHelper.getDateFormat(this.dateFormat);
                    this.dateTimeFormat = format.dateOnlyFormat;
                };
                DateRangeDecorator.prototype.configureDates = function () {
                    this.computedValueFrom = ko.computed({
                        read: this.readDateFrom,
                        write: this.writeFrom,
                        owner: this
                    });
                    this.computedValueTo = ko.computed({
                        read: this.readDateTo,
                        write: this.writeTo,
                        owner: this
                    });
                };
                DateRangeDecorator.prototype.setValue = function (newValue) {
                    var me = this;
                    this.dateString(newValue);
                    this.selectedMethod(this.stringMethod);
                    this.selectedMethodValue(this.stringMethod.value);
                    var isDate = function (newValue) {
                        if (newValue) {
                            return moment(newValue, me.dateFormat.dateOnlyFormat, true).isValid();
                        }
                        return false;
                    };
                    var dateParts = newValue.split(' - ');
                    if (dateParts.length > 0) {
                        if (isDate(dateParts[0])) {
                            this.selectedMethod(this.dateMethod);
                            this.selectedMethodValue(this.dateMethod.value);
                            this.writeFrom(dateParts[0]);
                            if (dateParts[1] && isDate(dateParts[1])) {
                                this.writeTo(dateParts[1]);
                            }
                            return;
                        }
                    }
                };
                DateRangeDecorator.prototype.getValueEx = function () {
                    var value = this.dateString();
                    if (this.selectedMethodValue() == this.dateMethod.value) {
                        var fromDate = this.computedValueFrom(), toDate = this.computedValueTo();
                        if (fromDate && toDate) {
                            value = fromDate + " - " + toDate;
                        }
                        else {
                            value = fromDate;
                        }
                    }
                    return value;
                };
                DateRangeDecorator.prototype.writeFrom = function (value) {
                    var me = this;
                    me.error("");
                    if (value.trim() == "") {
                        me.Value({
                            IsClear: true,
                            DateTime: ""
                        });
                        me.ValueFrom(null);
                        return;
                    }
                    me.ValueFrom({
                        IsClear: false,
                        DateTime: value
                    });
                };
                DateRangeDecorator.prototype.readDateFrom = function () {
                    return this.dateFieldReader(this.ValueFrom);
                };
                DateRangeDecorator.prototype.readDateTo = function () {
                    return this.dateFieldReader(this.ValueTo);
                };
                DateRangeDecorator.prototype.dateFieldReader = function (dateField) {
                    if (!dateField()) {
                        return null;
                    }
                    var trimDateTime = dateField();
                    if (trimDateTime == undefined) {
                        return "";
                    }
                    if (trimDateTime && trimDateTime.IsClear) {
                        return "";
                    }
                    if (trimDateTime.DateTime) {
                        return trimDateTime.DateTime;
                    }
                    return trimDateTime;
                };
                DateRangeDecorator.prototype.writeTo = function (value) {
                    var me = this;
                    me.error("");
                    if (value.trim() == "") {
                        me.Value({
                            IsClear: true,
                            DateTime: ""
                        });
                        me.ValueTo(null);
                        return;
                    }
                    me.ValueTo({
                        IsClear: false,
                        DateTime: value
                    });
                };
                DateRangeDecorator.prototype.doAfterRender = function (reinitialise) {
                    var _this = this;
                    var me = this;
                    var picker = null;
                    var app = window['root'];
                    if (app) {
                        if (app.name == "CreateRecordAPP") {
                            return;
                        }
                    }
                    if (reinitialise) {
                        this.initDatePicker = false;
                    }
                    if (this.initDatePicker) {
                        return;
                    }
                    var timeoutFunction = setTimeout(function () {
                        var dateTimeFormat = me.dateTimeFormat, fromId = '#' + me.Id + '_from_container', toId = '#' + me.Id + '_to_container', pickerFrom = HP.HPTRIM.Form.DateDecorator.makeBootstrapDate(fromId, {}, dateTimeFormat), pickerTo = HP.HPTRIM.Form.DateDecorator.makeBootstrapDate(toId, {}, dateTimeFormat);
                        var updateModelFrom = function (e) {
                            var dateString = HPTRIM.Utils.TrimHelper.getDateStringFromDatePickerEvent(e, _this.dateTimeFormat);
                            _this.computedValueFrom(dateString);
                        };
                        var updateModelTo = function (e) {
                            var dateString = HPTRIM.Utils.TrimHelper.getDateStringFromDatePickerEvent(e, _this.dateTimeFormat);
                            _this.computedValueTo(dateString);
                        };
                        pickerFrom.bind('dp.change', updateModelFrom);
                        pickerTo.bind('dp.change', updateModelTo);
                    }, 500);
                    this.initDatePicker = true;
                };
                DateRangeDecorator.prototype.periodCountOnblur = function (context, event) {
                    if (this.periodCount()) {
                        var periodCountAsNum = parseInt(this.periodCount(), 10);
                        if (isNaN(periodCountAsNum) || (periodCountAsNum + "") != this.periodCount()) {
                            var msg = HP.HPTRIM.Messages.edi_badLong;
                            msg = msg.replace("{0}", this.periodCount().toString());
                            this.setError(msg);
                            return;
                        }
                        var max = 30;
                        var min = 0;
                        if (periodCountAsNum > max || periodCountAsNum < min) {
                            var msg = HP.HPTRIM.Messages.edi_numberOutOfRange;
                            msg = msg.replace("{0}", periodCountAsNum.toString());
                            msg = msg.replace("{1}", min.toString());
                            msg = msg.replace("{2}", max.toString());
                            this.setError(msg);
                            return;
                        }
                    }
                    this.setError('');
                };
                return DateRangeDecorator;
            }(Form.FieldDecorator));
            Form.DateRangeDecorator = DateRangeDecorator;
        })(Form = HPTRIM.Form || (HPTRIM.Form = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var Form;
        (function (Form) {
            var EnumDecorator = (function (_super) {
                __extends(EnumDecorator, _super);
                function EnumDecorator(trimClient, pageItem) {
                    _super.call(this, pageItem);
                    if (pageItem.Format !== "Enum") {
                        throw "EnumDecorator : Only pageItem.Format == Enum should be here";
                    }
                    if (pageItem.EnumItems) {
                        var comboBox;
                        if (pageItem.EnumName == "Priority") {
                            comboBox = new HP.HPTRIM.Field.PriorityComboBox(trimClient);
                            comboBox.Caption = pageItem.Caption;
                        }
                        else {
                            comboBox = new HP.HPTRIM.Field.TrimEnumComboBox(trimClient, pageItem.EnumItems);
                            comboBox.enumName = pageItem.EnumName;
                            comboBox.Caption = pageItem.Caption;
                        }
                        this.template = comboBox.template;
                        $.extend(this, comboBox);
                        if (pageItem.Value()) {
                            var selectedValue = _.find(pageItem.EnumItems, function (enumItem) {
                                if (!enumItem.Name) {
                                    enumItem.Name = enumItem.Caption;
                                    return false;
                                }
                                return enumItem.Name.toLowerCase() == pageItem.Value().toLowerCase();
                            });
                            if (selectedValue) {
                                this.Value(selectedValue.Name);
                            }
                        }
                    }
                }
                EnumDecorator.prototype.reset = function () {
                    if (this.Value) {
                        this.Value(null);
                    }
                    var me = this;
                    var comboBox = this;
                    comboBox.getData(function () { });
                };
                EnumDecorator.prototype.onblur = function (context, event) {
                    if (context != null && context != undefined) {
                        _super.prototype.onblur.call(this, context, event);
                    }
                };
                return EnumDecorator;
            }(Form.FieldDecorator));
            Form.EnumDecorator = EnumDecorator;
        })(Form = HPTRIM.Form || (HPTRIM.Form = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var Form;
        (function (Form) {
            var AclSearchField = (function (_super) {
                __extends(AclSearchField, _super);
                function AclSearchField(trimClient, searchClause) {
                    var _this = this;
                    _super.call(this);
                    this.searchByLocation = HP.HPTRIM.Utils.Form.makeItemPicker(trimClient, searchClause);
                    this.aclComboBox = this.makeAclField(searchClause.BaseObjectTypes, trimClient);
                    this.aclComboBox.Caption = searchClause.Caption;
                    this.template = "AclSearchFieldTemplate";
                    this.Value = ko.computed({
                        read: function () {
                            return _this.getValueEx();
                        },
                        write: function (value) {
                            if (value == "" || !value) {
                                return;
                            }
                            var parts = value.split(',');
                            var access = parts[0].replace(/^"(.*)"$/, '$1'), locUri = parts[1];
                            _this.aclComboBox.Value(access);
                            _this.searchByLocation.setValue(HPTRIM.TrimBaseObject.make({
                                TrimType: "Location",
                                Uri: locUri,
                                NameString: locUri,
                                Type: ""
                            }));
                        }
                    });
                }
                AclSearchField.prototype.makeAclField = function (forBobType, trimClient) {
                    var field;
                    var bobTypeAsString = forBobType.Name;
                    switch (bobTypeAsString) {
                        case "record":
                            {
                                field = new HP.HPTRIM.Field.RecordAccessComboBox(trimClient);
                            }
                            break;
                        case "workflow":
                            {
                                field = new HP.HPTRIM.Field.WorkflowAccessComboBox(trimClient);
                            }
                            break;
                        default:
                            {
                                field = new HP.HPTRIM.Field.GeneralAccessComboBox(trimClient);
                            }
                    }
                    return field;
                };
                AclSearchField.prototype.getValueEx = function () {
                    var returnString = "";
                    var acl = this.aclComboBox.getValue();
                    var loc = this.searchByLocation.getValue();
                    var locUri = undefined;
                    if (loc) {
                        locUri = loc.Uri;
                    }
                    returnString = '"' + acl + '"' + "," + locUri;
                    return returnString;
                };
                AclSearchField.prototype.setValue = function (newValue) {
                    this.Value(newValue);
                };
                return AclSearchField;
            }(Form.FieldDecorator));
            Form.AclSearchField = AclSearchField;
        })(Form = HPTRIM.Form || (HPTRIM.Form = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var Form;
        (function (Form) {
            var LineDecorator = (function (_super) {
                __extends(LineDecorator, _super);
                function LineDecorator() {
                    _super.call(this);
                    this.template = "templates/Field/Line";
                }
                return LineDecorator;
            }(Form.FieldDecorator));
            Form.LineDecorator = LineDecorator;
            var ThinLineDecorator = (function (_super) {
                __extends(ThinLineDecorator, _super);
                function ThinLineDecorator() {
                    _super.call(this);
                    this.template = "templates/Field/ThinLine";
                }
                return ThinLineDecorator;
            }(Form.FieldDecorator));
            Form.ThinLineDecorator = ThinLineDecorator;
        })(Form = HPTRIM.Form || (HPTRIM.Form = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var Form;
        (function (Form) {
            var NumberDecorator = (function (_super) {
                __extends(NumberDecorator, _super);
                function NumberDecorator(pageItem) {
                    _super.call(this, pageItem);
                    this.template = "templates/Field/Number";
                }
                NumberDecorator.prototype.onkeydown = function () {
                    var event = arguments[1];
                    return true;
                };
                NumberDecorator.prototype.onblur = function (context, event) {
                    if (context != null && context != undefined) {
                        if (this.Value()) {
                            var val = parseFloat(this.Value());
                            if (isNaN(val) || val != this.Value()) {
                                var msg = HP.HPTRIM.Messages.edi_badLong;
                                msg = msg.replace("{0}", this.Value().toString());
                                this.setError(msg);
                                return;
                            }
                            var max = (Math.pow(2, 32) / 2) - 1;
                            var min = -Math.pow(2, 32) / 2;
                            if (this.getMaxValue() != undefined) {
                                max = this.getMaxValue();
                            }
                            if (this.getMinValue() != undefined) {
                                min = this.getMinValue();
                            }
                            if (val > max || val < min) {
                                var msg = HP.HPTRIM.Messages.edi_numberOutOfRange;
                                if (max == (Math.pow(2, 32) / 2) - 1 || max == Number.MAX_VALUE) {
                                    msg = HP.HPTRIM.Messages.web_valueMustNotLessThan;
                                    msg = msg.replace("{0}", min.toPrecision());
                                }
                                else {
                                    if (min == -Math.pow(2, 32) / 2 || max == Number.MIN_VALUE) {
                                        msg = HP.HPTRIM.Messages.web_valueMustNotLargerThan;
                                        msg = msg.replace("{0}", max.toPrecision());
                                    }
                                    else {
                                        msg = msg.replace("{0}", val.toString());
                                        msg = msg.replace("{1}", min.toPrecision());
                                        msg = msg.replace("{2}", max.toPrecision());
                                    }
                                }
                                this.error(msg);
                                return false;
                            }
                        }
                        _super.prototype.onblur.call(this, context, event);
                    }
                };
                return NumberDecorator;
            }(Form.FieldDecorator));
            Form.NumberDecorator = NumberDecorator;
        })(Form = HPTRIM.Form || (HPTRIM.Form = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var Form;
        (function (Form) {
            var NumberRangeDecorator = (function (_super) {
                __extends(NumberRangeDecorator, _super);
                function NumberRangeDecorator(pageItem) {
                    var _this = this;
                    _super.call(this, pageItem);
                    this.Value = ko.observable("");
                    this.ValueTo = ko.observable("");
                    this.ValueFrom = ko.observable("");
                    this.numberString = ko.observable("");
                    $.extend(this, pageItem);
                    this.template = "templates/Field/NumberRange";
                    this.ValueFrom.subscribe(function (newValue) {
                        _this.Value(_this.getValueEx());
                    });
                    this.ValueTo.subscribe(function (newValue) {
                        _this.Value(_this.getValueEx());
                    });
                    this.numberString.subscribe(function (newValue) {
                        _this.Value(_this.getValueEx());
                    });
                }
                NumberRangeDecorator.prototype.setValue = function (newValue) {
                    var me = this;
                    var theParts = newValue.split(' to ');
                    if (theParts[0]) {
                        this.ValueFrom(theParts[0]);
                    }
                    if (theParts[1]) {
                        this.ValueTo(theParts[1]);
                    }
                };
                NumberRangeDecorator.prototype.getValueEx = function () {
                    if (this.ValueFrom() && this.ValueTo()) {
                        if (+this.ValueFrom() > +this.ValueTo()) {
                            return this.ValueTo() + ' to ' + this.ValueFrom();
                        }
                        else {
                            return this.ValueFrom() + ' to ' + this.ValueTo();
                        }
                    }
                    else if (!this.ValueFrom() && this.ValueTo()) {
                        return this.ValueTo();
                    }
                    else if (this.ValueFrom() && !this.ValueTo()) {
                        return this.ValueFrom();
                    }
                    else {
                        return null;
                    }
                };
                NumberRangeDecorator.prototype.numberFieldReader = function (numberField) {
                    if (!numberField()) {
                        return null;
                    }
                    var value = parseFloat(numberField());
                    if (isNaN(value) || value != +this.Value()) {
                        var msg = HP.HPTRIM.Messages.edi_badLong;
                        msg = msg.replace("{0}", this.Value().toString());
                        this.error(msg);
                        return;
                    }
                    var max = (Math.pow(2, 32) / 2) - 1;
                    var min = -Math.pow(2, 32) / 2;
                    if (this.getMaxValue() != undefined) {
                        max = this.getMaxValue();
                    }
                    if (this.getMinValue() != undefined) {
                        min = this.getMinValue();
                    }
                    if (value > max || value < min) {
                        var msg = HP.HPTRIM.Messages.edi_numberOutOfRange;
                        msg = msg.replace("{0}", value.toString());
                        msg = msg.replace("{1}", min.toPrecision());
                        msg = msg.replace("{2}", max.toPrecision());
                        this.error(msg);
                        return null;
                    }
                    this.error("");
                    return value;
                };
                NumberRangeDecorator.prototype.doAfterRender = function (reinitialise) {
                };
                NumberRangeDecorator.prototype.onblur = function (context, event) {
                    if (context != null && context != undefined) {
                        if (this.Value()) {
                            var val = parseFloat(this.Value());
                            if (isNaN(val) || val != +this.Value()) {
                                var msg = HP.HPTRIM.Messages.edi_badLong;
                                msg = msg.replace("{0}", this.Value().toString());
                                this.setError(msg);
                                return;
                            }
                            var max = (Math.pow(2, 32) / 2) - 1;
                            var min = -Math.pow(2, 32) / 2;
                            if (this.getMaxValue() != undefined) {
                                max = this.getMaxValue();
                            }
                            if (this.getMinValue() != undefined) {
                                min = this.getMinValue();
                            }
                            if (val > max || val < min) {
                                var msg = HP.HPTRIM.Messages.edi_numberOutOfRange;
                                msg = msg.replace("{0}", val.toString());
                                msg = msg.replace("{1}", min.toString());
                                msg = msg.replace("{2}", max.toString());
                                this.setError(msg);
                                return;
                            }
                        }
                        _super.prototype.onblur.call(this, context, event);
                    }
                };
                return NumberRangeDecorator;
            }(Form.FieldDecorator));
            Form.NumberRangeDecorator = NumberRangeDecorator;
        })(Form = HPTRIM.Form || (HPTRIM.Form = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var Form;
        (function (Form) {
            var BigNumberDecorator = (function (_super) {
                __extends(BigNumberDecorator, _super);
                function BigNumberDecorator(pageItem) {
                    _super.call(this, pageItem);
                    this.template = "templates/Field/Number";
                }
                BigNumberDecorator.prototype.onkeydown = function () {
                    var event = arguments[1];
                    return true;
                };
                BigNumberDecorator.prototype.isValid = function () {
                    if (this.Value()) {
                        var value = parseFloat(this.Value());
                        if (isNaN(value) || value != this.Value()) {
                            var msg = HP.HPTRIM.Messages.edi_badLong;
                            msg = msg.replace("{0}", this.Value().toString());
                            this.error(msg);
                            return false;
                        }
                        var max = (Math.pow(2, 64) / 2) - 1;
                        var min = -Math.pow(2, 64) / 2;
                        if (this.getMaxValue() != undefined) {
                            max = this.getMaxValue();
                        }
                        if (this.getMinValue() != undefined) {
                            min = this.getMinValue();
                        }
                        if (value > max || value < min) {
                            var msg = HP.HPTRIM.Messages.edi_numberOutOfRange;
                            if (max == (Math.pow(2, 64) / 2) - 1 || max == Number.MAX_VALUE) {
                                msg = HP.HPTRIM.Messages.web_valueMustNotLessThan;
                                msg = msg.replace("{0}", min.toPrecision());
                            }
                            else {
                                if (min == -Math.pow(2, 64) / 2 || max == Number.MIN_VALUE) {
                                    msg = HP.HPTRIM.Messages.web_valueMustNotLargerThan;
                                    msg = msg.replace("{0}", max.toPrecision());
                                }
                                else {
                                    msg = msg.replace("{0}", value.toString());
                                    msg = msg.replace("{1}", min.toPrecision());
                                    msg = msg.replace("{2}", max.toPrecision());
                                }
                            }
                            this.error(msg);
                            return false;
                        }
                    }
                    return true;
                };
                BigNumberDecorator.prototype.onblur = function (context, event) {
                    if (context != null && context != undefined) {
                        if (this.Value()) {
                            var value = parseFloat(this.Value());
                            if (isNaN(value) || value != this.Value()) {
                                var msg = HP.HPTRIM.Messages.edi_badLong;
                                msg = msg.replace("{0}", this.Value().toString());
                                this.setError(msg);
                                return;
                            }
                            var max = (Math.pow(2, 64) / 2) - 1;
                            var min = -Math.pow(2, 64) / 2;
                            if (this.getMaxValue() != undefined) {
                                max = this.getMaxValue();
                            }
                            if (this.getMinValue() != undefined) {
                                min = this.getMinValue();
                            }
                            if (value > max || value < min) {
                                var msg = HP.HPTRIM.Messages.edi_numberOutOfRange;
                                msg = msg.replace("{0}", value.toString());
                                msg = msg.replace("{1}", min.toPrecision());
                                msg = msg.replace("{2}", max.toPrecision());
                                this.setError(msg);
                                return;
                            }
                        }
                        _super.prototype.onblur.call(this, context, event);
                    }
                };
                return BigNumberDecorator;
            }(Form.FieldDecorator));
            Form.BigNumberDecorator = BigNumberDecorator;
        })(Form = HPTRIM.Form || (HPTRIM.Form = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var Form;
        (function (Form) {
            var BigNumberRangeDecorator = (function (_super) {
                __extends(BigNumberRangeDecorator, _super);
                function BigNumberRangeDecorator(pageItem) {
                    var _this = this;
                    _super.call(this, pageItem);
                    this.Value = ko.observable("");
                    this.ValueTo = ko.observable("");
                    this.ValueFrom = ko.observable("");
                    this.numberString = ko.observable("");
                    $.extend(this, pageItem);
                    this.template = "templates/Field/NumberRange";
                    this.ValueFrom.subscribe(function (newValue) {
                        _this.Value(_this.getValueEx());
                    });
                    this.ValueTo.subscribe(function (newValue) {
                        _this.Value(_this.getValueEx());
                    });
                    this.numberString.subscribe(function (newValue) {
                        _this.Value(_this.getValueEx());
                    });
                }
                BigNumberRangeDecorator.prototype.setValue = function (newValue) {
                    var me = this;
                    var theParts = newValue.split(' to ');
                    if (theParts[0]) {
                        this.ValueFrom(theParts[0]);
                    }
                    if (theParts[1]) {
                        this.ValueTo(theParts[1]);
                    }
                };
                BigNumberRangeDecorator.prototype.getValueEx = function () {
                    if (this.ValueFrom() && this.ValueTo()) {
                        if (+this.ValueFrom() > +this.ValueTo()) {
                            return this.ValueTo() + ' to ' + this.ValueFrom();
                        }
                        else {
                            return this.ValueFrom() + ' to ' + this.ValueTo();
                        }
                    }
                    else if (!this.ValueFrom() && this.ValueTo()) {
                        return this.ValueTo();
                    }
                    else if (this.ValueFrom() && !this.ValueTo()) {
                        return this.ValueFrom();
                    }
                    else {
                        return null;
                    }
                };
                BigNumberRangeDecorator.prototype.numberFieldReader = function (numberField) {
                    if (!numberField()) {
                        return null;
                    }
                    var value = parseFloat(numberField());
                    if (isNaN(value) || value != +this.Value()) {
                        var msg = HP.HPTRIM.Messages.edi_badLong;
                        msg = msg.replace("{0}", this.Value().toString());
                        this.error(msg);
                        return;
                    }
                    var max = (Math.pow(2, 64) / 2) - 1;
                    var min = -Math.pow(2, 64) / 2;
                    if (this.getMaxValue() != undefined) {
                        max = this.getMaxValue();
                    }
                    if (this.getMinValue() != undefined) {
                        min = this.getMinValue();
                    }
                    if (value > max || value < min) {
                        var msg = HP.HPTRIM.Messages.edi_numberOutOfRange;
                        msg = msg.replace("{0}", value.toString());
                        msg = msg.replace("{1}", min.toPrecision());
                        msg = msg.replace("{2}", max.toPrecision());
                        this.error(msg);
                        return null;
                    }
                    this.error("");
                    return value;
                };
                BigNumberRangeDecorator.prototype.doAfterRender = function (reinitialise) {
                };
                BigNumberRangeDecorator.prototype.onblur = function (context, event) {
                    if (context != null && context != undefined) {
                        if (this.Value()) {
                            var val = parseFloat(this.Value());
                            if (isNaN(val) || val != +this.Value()) {
                                var msg = HP.HPTRIM.Messages.edi_badLong;
                                msg = msg.replace("{0}", this.Value().toString());
                                this.setError(msg);
                                return;
                            }
                            var max = (Math.pow(2, 64) / 2) - 1;
                            var min = -Math.pow(2, 64) / 2;
                            if (this.getMaxValue() != undefined) {
                                max = this.getMaxValue();
                            }
                            if (this.getMinValue() != undefined) {
                                min = this.getMinValue();
                            }
                            if (val > max || val < min) {
                                var msg = HP.HPTRIM.Messages.edi_numberOutOfRange;
                                msg = msg.replace("{0}", val.toString());
                                msg = msg.replace("{1}", min.toString());
                                msg = msg.replace("{2}", max.toString());
                                this.setError(msg);
                                return;
                            }
                        }
                        _super.prototype.onblur.call(this, context, event);
                    }
                };
                return BigNumberRangeDecorator;
            }(Form.FieldDecorator));
            Form.BigNumberRangeDecorator = BigNumberRangeDecorator;
        })(Form = HPTRIM.Form || (HPTRIM.Form = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var Form;
        (function (Form) {
            var DecimalDecorator = (function (_super) {
                __extends(DecimalDecorator, _super);
                function DecimalDecorator(pageItem) {
                    _super.call(this, pageItem);
                    this.template = "templates/Field/Number";
                }
                DecimalDecorator.prototype.onkeydown = function () {
                    var event = arguments[1];
                    return true;
                };
                DecimalDecorator.prototype.onblur = function (context, event) {
                    if (context != null && context != undefined) {
                        if (this.Value()) {
                            var value = parseFloat(this.Value());
                            if (isNaN(value) || value != this.Value()) {
                                var msg = HP.HPTRIM.Messages.edi_badLong;
                                msg = msg.replace("{0}", this.Value().toString());
                                this.setError(msg);
                                return;
                            }
                            var max = 999999999999998.99999999;
                            var min = -999999999999998.99999999;
                            if (this.getMaxValue() != undefined) {
                                max = this.getMaxValue();
                            }
                            if (this.getMinValue() != undefined) {
                                min = this.getMinValue();
                            }
                            if (value > max || value < min) {
                                var msg = HP.HPTRIM.Messages.edi_numberOutOfRange;
                                if (max == 999999999999998.99999999 || max == Number.MAX_VALUE) {
                                    msg = HP.HPTRIM.Messages.web_valueMustNotLessThan;
                                    msg = msg.replace("{0}", min.toPrecision());
                                }
                                else {
                                    if (min == -999999999999998.99999999 || max == Number.MIN_VALUE) {
                                        msg = HP.HPTRIM.Messages.web_valueMustNotLargerThan;
                                        msg = msg.replace("{0}", max.toPrecision());
                                    }
                                    else {
                                        msg = msg.replace("{0}", value.toString());
                                        msg = msg.replace("{1}", min.toPrecision());
                                        msg = msg.replace("{2}", max.toPrecision());
                                    }
                                }
                                this.error(msg);
                                return false;
                            }
                        }
                        _super.prototype.onblur.call(this, context, event);
                    }
                };
                return DecimalDecorator;
            }(Form.FieldDecorator));
            Form.DecimalDecorator = DecimalDecorator;
        })(Form = HPTRIM.Form || (HPTRIM.Form = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var Form;
        (function (Form) {
            var RecordAccessControlDecorator = (function (_super) {
                __extends(RecordAccessControlDecorator, _super);
                function RecordAccessControlDecorator(pageItem) {
                    _super.call(this, pageItem);
                    var acl = pageItem.CustomValue;
                    var recAcl = new HP.HPTRIM.Field.RecordAccessControl(acl);
                    $.extend(pageItem, recAcl);
                    $.extend(this, pageItem);
                }
                return RecordAccessControlDecorator;
            }(Form.FieldDecorator));
            Form.RecordAccessControlDecorator = RecordAccessControlDecorator;
        })(Form = HPTRIM.Form || (HPTRIM.Form = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var Form;
        (function (Form) {
            "use strict";
            var RecordSecurityDecorator = (function (_super) {
                __extends(RecordSecurityDecorator, _super);
                function RecordSecurityDecorator(trimClient, pageItem) {
                    _super.call(this, pageItem);
                    var securityProfile = new HP.HPTRIM.Field.RecordSecurityProfile(trimClient, pageItem);
                    $.extend(pageItem, securityProfile);
                    $.extend(this, pageItem);
                }
                RecordSecurityDecorator.prototype.afterRender = function () {
                };
                return RecordSecurityDecorator;
            }(Form.FieldDecorator));
            Form.RecordSecurityDecorator = RecordSecurityDecorator;
        })(Form = HPTRIM.Form || (HPTRIM.Form = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var Form;
        (function (Form) {
            var StringDecorator = (function (_super) {
                __extends(StringDecorator, _super);
                function StringDecorator(pageItem, template, trimClient) {
                    _super.call(this, pageItem);
                    this.onKeyUp = function (field) { };
                    this.columns = 50;
                    this.rowsDisplayed = 8;
                    this.items = ko.observable([]);
                    this.selectedLookupItems = ko.observable([]);
                    this.isLookupPickerVisible = ko.observable(false);
                    this.hasIcon = ko.observable(false);
                    this.selectedItems = ko.observableArray();
                    this.multiSelect = true;
                    var me = this;
                    this.trimClient = trimClient;
                    this.lookupSetUri = "";
                    this.multiSelect = true;
                    if (pageItem.Icon) {
                        this.hasIcon(true);
                    }
                    if (pageItem.LookupValues != undefined && pageItem.LookupValues != null) {
                        if (pageItem.LookupSetUri == undefined) {
                            pageItem.LookupSetUri = pageItem.Id;
                        }
                        this.items(pageItem.LookupValues);
                        this.refreshSelectedLookupItems();
                    }
                    if (me.trimClient != undefined && me.lookupSetUri != "") {
                        var returnSet = {};
                        me.trimClient.getAndLoadLookupSet(me.lookupSetUri, function (returnSet) { });
                    }
                    if (pageItem.CharacterLimit >= StringDecorator.TEXT_AREA_SIZE) {
                        this.template = "templates/Field/TextArea";
                    }
                    else {
                        this.template = "templates/Field/TextBox";
                    }
                    if (template) {
                        this.template = template;
                    }
                    ko.postbox.subscribe("ItemStateChanged", function () {
                        this.refreshDisplayString();
                    });
                }
                StringDecorator.prototype.getValueEx = function () {
                    var rc = null;
                    if (rc == null && this.Value) {
                        rc = this.Value();
                        if (rc) {
                            rc = rc.replace(/^\s+|\s+$/g, '');
                        }
                    }
                    return rc;
                };
                StringDecorator.prototype.refreshSelectedLookupItems = function () {
                    var me = this;
                    this.selectedLookupItems([]);
                    var allLookupItems = [];
                    var allSelectedItem = [];
                    var currText = '';
                    var cV = this.getValueEx();
                    if (cV) {
                        currText = cV.toString();
                    }
                    _.each(me.items(), function (item) {
                        var oneItem = {
                            Name: item,
                            IsSelected: false,
                        };
                        if (currText.indexOf(item) > -1) {
                            oneItem.IsSelected = true;
                            allSelectedItem.push(oneItem);
                        }
                        allLookupItems.push(oneItem);
                    });
                    this.items(allLookupItems);
                    this.selectedLookupItems(allSelectedItem);
                };
                StringDecorator.prototype.getSelectedItems = function () {
                    return this.selectedLookupItems();
                };
                StringDecorator.prototype.onEnter = function () {
                    this.enterCallback(this.Value());
                };
                StringDecorator.prototype.setAddFromLookupSet = function (useLookupSet) {
                    this.addFromLookupSet = useLookupSet;
                };
                StringDecorator.prototype.getAddFromLookupSet = function () {
                    return this.addFromLookupSet;
                };
                StringDecorator.prototype.refreshDisplayString = function () {
                    return;
                };
                StringDecorator.prototype.onblur = function (context, event) {
                    if (context != null && context != undefined) {
                        if (this.getMaxLength() != undefined && context.Value() != undefined) {
                            if (context.Value().length > this.getMaxLength()) {
                                var msg = HP.HPTRIM.Messages.web_fieldMaximumLengthIs;
                                msg = msg.replace("{0}", this.getMaxLength().toString());
                                this.setError(msg);
                                var titleEle = document.getElementById(context.Id);
                                $(titleEle).prop("selectionStart", 255);
                                $(titleEle).prop("selectionEnd", context.Value().length);
                                titleEle.focus();
                                return;
                            }
                            this.setError("");
                        }
                        _super.prototype.onblur.call(this, context, event);
                    }
                };
                StringDecorator.prototype.showLookupItemPanel = function () {
                    root.multipleLookupItemPanel.setCallingControl(this, true, true);
                    root.showOverlay(root.multipleLookupItemPanel);
                };
                StringDecorator.prototype.toggle = function (item, event) {
                    this.isLookupPickerVisible() ? this.isLookupPickerVisible(false) : this.isLookupPickerVisible(true);
                    var cDiv = event.currentTarget.children;
                    for (var i = 0; i < cDiv.length; i++) {
                        var div = cDiv[i];
                        var classNameStr = div.className;
                        if (classNameStr.indexOf('caret-midgrey-open') > -1 || classNameStr.indexOf('caret-midgrey-close') > -1) {
                            if (classNameStr.indexOf('caret-midgrey-open') > -1) {
                                classNameStr = classNameStr.replace('caret-midgrey-open', 'caret-midgrey-close');
                            }
                            else {
                                classNameStr = classNameStr.replace('caret-midgrey-close', 'caret-midgrey-open');
                            }
                            div.className = classNameStr;
                            return;
                        }
                    }
                };
                StringDecorator.prototype.autoHeight = function () {
                    $('.text-container').on('keyup', 'textarea', function (e) {
                        $(this).css('height', 'auto');
                        $(this).height(this.scrollHeight);
                    });
                    $('.text-container').on('focus', 'textarea', function (e) {
                        $(this).css('height', 'auto');
                        $(this).height(this.scrollHeight);
                    });
                    $('textarea').on('focus', 'textarea', function (e) {
                        $(this).css('height', 'auto');
                        $(this).height(this.scrollHeight);
                    });
                };
                StringDecorator.prototype.click = function (parentField, item, event) {
                    var currText = parentField.getValueEx().toString();
                    setTimeout(function () {
                        if (item.IsSelected) {
                            item.IsSelected = false;
                            currText = currText.replace(item.Name, '');
                        }
                        else {
                            item.IsSelected = true;
                            currText = currText + '; ' + item.Name;
                        }
                        parentField.setValue(currText);
                        ko.postbox.publish("ItemStateChanged");
                    }, 100);
                };
                StringDecorator.TEXT_AREA_SIZE = 250;
                return StringDecorator;
            }(Form.FieldDecorator));
            Form.StringDecorator = StringDecorator;
        })(Form = HPTRIM.Form || (HPTRIM.Form = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var Form;
        (function (Form) {
            var PlainTextDecorator = (function (_super) {
                __extends(PlainTextDecorator, _super);
                function PlainTextDecorator(pageItem) {
                    _super.call(this, pageItem);
                    this.template = "templates/Field/PlainText";
                }
                return PlainTextDecorator;
            }(Form.FieldDecorator));
            Form.PlainTextDecorator = PlainTextDecorator;
        })(Form = HPTRIM.Form || (HPTRIM.Form = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var Form;
        (function (Form) {
            var GeographyDecorator = (function (_super) {
                __extends(GeographyDecorator, _super);
                function GeographyDecorator(trimClient, pageItem) {
                    _super.call(this, pageItem);
                    this.onKeyUp = function (field) { };
                    this.trimClient = trimClient;
                    this.template = "templates/Field/Geography";
                }
                GeographyDecorator.prototype.getValueEx = function () {
                    var rc = null;
                    if (rc == null && this.Value) {
                        rc = this.Value();
                        if (rc) {
                            rc = rc.replace(/^\s+|\s+$/g, '');
                        }
                    }
                    return rc;
                };
                GeographyDecorator.prototype.showMap = function () {
                    $(window).data('activeGpsFieldId', this.Id);
                    if (this.trimClient.getDatabase().googleGISKeySet()) {
                        if (this.isDisable() || this.fieldDisabled()) {
                            $(window).data('activeGpsFieldId', undefined);
                            $(window).data('showMapReadOnly', true);
                        }
                        $('#GISModal').modal('show');
                    }
                    else {
                        ko.postbox.publish(HP.HPTRIM.App.TRIMApp.NOTIFICATION_ERROR_TOPIC, HPTRIM.Messages.web_GPSErrorNoKey);
                    }
                };
                GeographyDecorator.prototype.onEnter = function () {
                    this.enterCallback(this.Value());
                };
                GeographyDecorator.prototype.onblur = function (context, event) {
                    if (context != null && context != undefined) {
                        _super.prototype.onblur.call(this, context, event);
                    }
                };
                return GeographyDecorator;
            }(Form.FieldDecorator));
            Form.GeographyDecorator = GeographyDecorator;
        })(Form = HPTRIM.Form || (HPTRIM.Form = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var Form;
        (function (Form) {
            var GeographyRangeDecorator = (function (_super) {
                __extends(GeographyRangeDecorator, _super);
                function GeographyRangeDecorator(trimClient, pageItem) {
                    _super.call(this, pageItem);
                    this.onKeyUp = function (field) { };
                    this.rangeUnitItems = ko.observable([
                        { Caption: HPTRIM.Messages.web_GPSKilometres, Value: 'Kilometres' },
                        { Caption: HPTRIM.Messages.web_GPSMetres, Value: 'Metres' },
                        { Caption: HPTRIM.Messages.web_GPSMiles, Value: 'Miles' },
                        { Caption: HPTRIM.Messages.web_GPSYards, Value: 'Yards' },
                    ]);
                    this.optionsText = "Caption";
                    this.optionsValue = "Value";
                    this.methodItems = ko.observable([
                        { Caption: HPTRIM.Messages.web_GPSLocation, Value: GeographyRangeDecorator.GIS_METHOD },
                        { Caption: HPTRIM.Messages.web_record, Value: GeographyRangeDecorator.RECORD_METHOD },
                        { Caption: HPTRIM.Messages.web_location, Value: GeographyRangeDecorator.LOCATION_METHOD }]);
                    this.showError = function (message) { };
                    var me = this;
                    this.rangeGPSId = "GEOGRPAPHY_RANGE_" + this.Id;
                    this.template = "templates/Field/GeographyRange";
                    this.GPSValue = ko.observable("");
                    this.selectedRangeUnitValue = ko.observable();
                    this.selectedMethod = ko.observable(GeographyRangeDecorator.GIS_METHOD);
                    this.rangeValue = ko.observable("5");
                    this.GPSValue.subscribe(function (newValue) {
                        me.Value(me.getValueEx());
                    });
                    this.trimClient = trimClient;
                    this.locationPicker = new HPTRIM.Field.LocationPicker(trimClient, HPTRIM.Messages.web_location);
                    this.recordPicker = new HPTRIM.Field.RecordPicker(trimClient, HPTRIM.Messages.web_record);
                    this.locationPicker.value.subscribe(function (newValue) {
                        me.Value(me.getValueEx());
                    });
                    this.recordPicker.value.subscribe(function (newValue) {
                        me.Value(me.getValueEx());
                    });
                    this.selectedMethod.subscribe(function (newValue) {
                        me.Value(me.getValueEx());
                    });
                    this.selectedRangeUnitValue.subscribe(function (newValue) {
                        me.Value(me.getValueEx());
                    });
                    this.rangeValue.subscribe(function (newVlaue) {
                        me.Value(me.getValueEx());
                    });
                }
                GeographyRangeDecorator.prototype.onRangeKeyDown = function () {
                    var event = arguments[1];
                    return true;
                };
                GeographyRangeDecorator.prototype.onRangeBlur = function (context, event) {
                    if (context != null && context != undefined) {
                        if (this.Value()) {
                            var val = parseFloat(this.Value());
                            if (isNaN(val) || val != this.Value()) {
                                var msg = HP.HPTRIM.Messages.edi_badLong;
                                msg = msg.replace("{0}", this.Value().toString());
                                this.setError(msg);
                                return;
                            }
                            var max = (Math.pow(2, 32) / 2) - 1;
                            var min = 0;
                            if (this.getMaxValue() != undefined) {
                                max = this.getMaxValue();
                            }
                            if (this.getMinValue() != undefined) {
                                min = this.getMinValue();
                            }
                            if (val > max || val < min) {
                                var msg = HP.HPTRIM.Messages.edi_numberOutOfRange;
                                msg = msg.replace("{0}", val.toString());
                                msg = msg.replace("{1}", min.toString());
                                msg = msg.replace("{2}", max.toString());
                                this.setError(msg);
                                return;
                            }
                        }
                        _super.prototype.onblur.call(this, context, event);
                    }
                };
                GeographyRangeDecorator.prototype.reset = function () {
                    if (this.Value) {
                        this.Value(null);
                    }
                };
                GeographyRangeDecorator.prototype.setValue = function (value) {
                    if (!value) {
                        return;
                    }
                    var gpsParts = _.filter(value.split(' '), function (token) {
                        if (token) {
                            return true;
                        }
                    });
                    if (gpsParts.length < 5) {
                        return;
                    }
                    var withinToken = gpsParts[0];
                    if (withinToken.toLowerCase() != HPTRIM.Messages.web_GPSWithin.toLowerCase()) {
                        return;
                    }
                    var rangeToken = gpsParts[1];
                    var rangeUnitToken = gpsParts[2];
                    var ofToken = gpsParts[3];
                    if (ofToken.toLowerCase() != HPTRIM.Messages.web_GPSof.toLowerCase()) {
                        return;
                    }
                    var actualValue = gpsParts.slice(4).join(' ');
                    if (!actualValue) {
                        return;
                    }
                    this.rangeValue(rangeToken);
                    var rangeUnitItem = _.find(this.rangeUnitItems(), function (rangeUnit) {
                        return (rangeUnit.Caption.toLowerCase() == rangeUnitToken.toLowerCase());
                    });
                    this.selectedRangeUnitValue(rangeUnitItem.Value);
                    if (actualValue.slice(0, "Record".length).toLowerCase() == "record") {
                        this.selectedMethod(GeographyRangeDecorator.RECORD_METHOD);
                        var recordTokens = actualValue.split(' ');
                        if (recordTokens.length >= 2) {
                            var recordUri = recordTokens.slice(1).join(" ");
                            this.recordPicker.setAndLoadValue(recordUri);
                        }
                    }
                    else if (actualValue.slice(0, "Location".length).toLowerCase() == "location") {
                        this.selectedMethod(GeographyRangeDecorator.LOCATION_METHOD);
                        var locationTokens = actualValue.split(' ');
                        if (locationTokens.length >= 2) {
                            var locationUri = locationTokens.slice(1).join(" ");
                            this.locationPicker.setAndLoadValue(locationUri);
                        }
                    }
                    else {
                        this.selectedMethod(GeographyRangeDecorator.GIS_METHOD);
                        this.GPSValue(actualValue);
                    }
                };
                GeographyRangeDecorator.prototype.getValue = function () {
                    return this.GPSValue();
                };
                GeographyRangeDecorator.prototype.getValueEx = function () {
                    var rangeValue = "Within " + this.rangeValue() + " " + this.selectedRangeUnitValue() + " of ";
                    if (this.selectedMethod() == GeographyRangeDecorator.GIS_METHOD) {
                        var gpsValue = this.GPSValue();
                        if (gpsValue) {
                            gpsValue = gpsValue.replace(/^\s+|\s+$/g, '');
                            rangeValue = rangeValue + " " + gpsValue;
                        }
                    }
                    else if (this.selectedMethod() == GeographyRangeDecorator.RECORD_METHOD) {
                        rangeValue = rangeValue + "record " + (this.recordPicker.getValue() ? this.recordPicker.getValue().Uri : "null");
                    }
                    else if (this.selectedMethod() == GeographyRangeDecorator.LOCATION_METHOD) {
                        rangeValue = rangeValue + "location " + (this.locationPicker.getValue() ? this.locationPicker.getValue().Uri : "null");
                    }
                    return rangeValue;
                };
                GeographyRangeDecorator.prototype.showMap = function () {
                    $(window).data('activeGpsFieldId', this.rangeGPSId);
                    if (this.trimClient.getDatabase().googleGISKeySet()) {
                        $('#GISModal').modal('show');
                    }
                    else {
                        ko.postbox.publish(HP.HPTRIM.App.TRIMApp.NOTIFICATION_ERROR_TOPIC, HPTRIM.Messages.web_GPSErrorNoKey);
                    }
                };
                GeographyRangeDecorator.prototype.onEnter = function () {
                    this.enterCallback(this.Value());
                };
                GeographyRangeDecorator.prototype.onblur = function (context, event) {
                    if (context != null && context != undefined) {
                        _super.prototype.onblur.call(this, context, event);
                    }
                };
                GeographyRangeDecorator.GIS_METHOD = "GIS";
                GeographyRangeDecorator.LOCATION_METHOD = "LOCATION";
                GeographyRangeDecorator.RECORD_METHOD = "RECORD";
                return GeographyRangeDecorator;
            }(Form.FieldDecorator));
            Form.GeographyRangeDecorator = GeographyRangeDecorator;
        })(Form = HPTRIM.Form || (HPTRIM.Form = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var Form;
        (function (Form) {
            var TrimObjectDecorator = (function (_super) {
                __extends(TrimObjectDecorator, _super);
                function TrimObjectDecorator(trimClient, pageItem) {
                    _super.call(this, pageItem);
                    this.trimClient = trimClient;
                    this.configureViewModel(pageItem);
                    _.extend(this, pageItem);
                    if (this.template.toLowerCase() != "templates/Field/MultiTreeItemPicker".toLowerCase()) {
                        this.template = "templates/Field/ItemPicker";
                    }
                }
                TrimObjectDecorator.makeTrimItemPicker = function (trimClient, objectType, caption, name, isMandatory, multiSelect) {
                    var itemPicker = null;
                    switch (objectType) {
                        case "Schedule":
                            {
                                itemPicker = new HP.HPTRIM.Field.SchedulePicker(trimClient, caption, isMandatory);
                            }
                            break;
                        case "Keyword":
                            {
                                itemPicker = new HP.HPTRIM.Field.KeywordPicker(trimClient, caption, isMandatory);
                            }
                            break;
                        case "WorkflowTemplate":
                            {
                                itemPicker = new HP.HPTRIM.Field.WorkflowTemplate(trimClient, caption, isMandatory);
                                var kwikSelectItemPickerPlugin = new HP.HPTRIM.Field.Plugin.KwikSelectItemPickerPlugin(trimClient);
                                itemPicker.addPlugin(kwikSelectItemPickerPlugin);
                            }
                            break;
                        case "Classification":
                            {
                                itemPicker = new HP.HPTRIM.Field.ClassificationPicker(trimClient, caption, isMandatory, true);
                            }
                            break;
                        case "LookupItem":
                            {
                                if (multiSelect == true) {
                                    itemPicker = new HP.HPTRIM.Field.MultiLookupItemPicker(trimClient, caption, isMandatory, true);
                                }
                                else {
                                    itemPicker = new HP.HPTRIM.Field.LookupItemPicker(trimClient, caption, isMandatory, true);
                                }
                                var kwikSelectItemPickerPlugin = new HP.HPTRIM.Field.Plugin.KwikSelectItemPickerPlugin(trimClient);
                                itemPicker.addPlugin(kwikSelectItemPickerPlugin);
                            }
                            break;
                        case "UserLabel":
                            {
                                itemPicker = new HP.HPTRIM.Field.UserLabelPicker(trimClient, caption, isMandatory, null, false);
                            }
                            break;
                        case "Record":
                            {
                                if (name === 'RecordContainer') {
                                    itemPicker = new HP.HPTRIM.Field.ContainerPicker(trimClient, caption, isMandatory, true);
                                    var kwikSelectItemPickerPlugin = new HP.HPTRIM.Field.Plugin.KwikSelectItemPickerPlugin(trimClient);
                                    itemPicker.addPlugin(kwikSelectItemPickerPlugin);
                                }
                                else {
                                    itemPicker = new HP.HPTRIM.Field.RecordPicker(trimClient, caption, isMandatory, true);
                                }
                                if (name == "RecordClientRecord") {
                                    itemPicker.filterClause("type:[behaviour:21]");
                                }
                                if (name == "RecordMatterRecord") {
                                    itemPicker.filterClause("type:[behaviour:22]");
                                }
                            }
                            break;
                        case "RecordType":
                            {
                                var resultExpansionOverlay = true;
                                itemPicker = new HP.HPTRIM.Field.RecordTypePicker(trimClient, caption, isMandatory, resultExpansionOverlay);
                            }
                            break;
                        case "SavedSearch":
                            {
                                itemPicker = new HP.HPTRIM.Field.SavedSearchPicker(trimClient, caption);
                            }
                            break;
                        case "Location":
                            {
                                itemPicker = new HP.HPTRIM.Field.LocationPicker(trimClient, caption, isMandatory);
                            }
                            break;
                        case "UserLabel":
                            {
                                itemPicker = new HP.HPTRIM.Field.UserLabelPicker(trimClient, caption);
                            }
                            break;
                        case "ActionDef":
                            {
                                itemPicker = new HP.HPTRIM.Field.ActionDefPicker(trimClient, caption);
                            }
                            break;
                        case "Consignment":
                            {
                                itemPicker = new HP.HPTRIM.Field.ActionDefPicker(trimClient, caption);
                            }
                            break;
                        case "ElectronicStore":
                            {
                                var option = { baseObjectType: HP.HPTRIM.BaseObjectTypes.ElectronicStore, label: "Select Electronic Store" };
                                itemPicker = new HP.HPTRIM.Field.TrimItemPicker(trimClient, option);
                            }
                            break;
                        case "OfflineRecord":
                            {
                                var option = { baseObjectType: HP.HPTRIM.BaseObjectTypes.OfflineRecord, label: "Select Offline Record" };
                                itemPicker = new HP.HPTRIM.Field.TrimItemPicker(trimClient, option);
                            }
                            break;
                        case "Hold":
                            {
                                var option = { baseObjectType: HP.HPTRIM.BaseObjectTypes.Hold, label: "Select Hold" };
                                itemPicker = new HP.HPTRIM.Field.TrimItemPicker(trimClient, option);
                            }
                            break;
                        case "Jurisdiction":
                            {
                                if (multiSelect === false) {
                                    var option = { baseObjectType: HP.HPTRIM.BaseObjectTypes.Jurisdiction, label: "Select Jurisdiction" };
                                    itemPicker = new HP.HPTRIM.Field.JurisdictionPicker(trimClient, caption);
                                }
                                else {
                                    itemPicker = new HP.HPTRIM.Field.MultiJurisdictionPicker(trimClient, caption, isMandatory);
                                    if (name == 'LocationDefaultJurisdiction') {
                                        itemPicker.multiSelect = false;
                                    }
                                }
                            }
                            break;
                        case "Space":
                            {
                                var option = { baseObjectType: HP.HPTRIM.BaseObjectTypes.Space, label: "Select Space" };
                                itemPicker = new HP.HPTRIM.Field.TrimItemPicker(trimClient, option);
                            }
                            break;
                        case "Activity":
                            {
                                var option = { baseObjectType: HP.HPTRIM.BaseObjectTypes.Activity, label: "Select Activity" };
                                itemPicker = new HP.HPTRIM.Field.TrimItemPicker(trimClient, option);
                            }
                            break;
                        case "RecordAction":
                            {
                                var option = { baseObjectType: HP.HPTRIM.BaseObjectTypes.RecordAction, label: "Select Record Action" };
                                itemPicker = new HP.HPTRIM.Field.TrimItemPicker(trimClient, option);
                            }
                            break;
                        case "TodoItem":
                            {
                                var option = { baseObjectType: HP.HPTRIM.BaseObjectTypes.TodoItem, label: "Select TodoItem" };
                                itemPicker = new HP.HPTRIM.Field.TrimItemPicker(trimClient, option);
                            }
                            break;
                        case "Workflow":
                            {
                                var option = { baseObjectType: HP.HPTRIM.BaseObjectTypes.Workflow, label: "Select Workflow" };
                                itemPicker = new HP.HPTRIM.Field.TrimItemPicker(trimClient, option);
                            }
                            break;
                        case "SecurityLevel":
                            {
                                var option = { baseObjectType: HP.HPTRIM.BaseObjectTypes.SecurityLevel, label: "Select Security Level" };
                                itemPicker = new HP.HPTRIM.Field.TrimItemPicker(trimClient, option);
                            }
                            break;
                        case "SecurityCaveat":
                            {
                                var option = { baseObjectType: HP.HPTRIM.BaseObjectTypes.SecurityCaveat, label: "Select Security Caveat" };
                                itemPicker = new HP.HPTRIM.Field.TrimItemPicker(trimClient, option);
                            }
                            break;
                        case "AutoPartRule":
                            {
                                var option = { baseObjectType: HP.HPTRIM.BaseObjectTypes.AutoPartRule, label: "Select Auto Part Rule" };
                                itemPicker = new HP.HPTRIM.Field.TrimItemPicker(trimClient, option);
                            }
                            break;
                        case "Communication":
                            {
                                var option = { baseObjectType: HP.HPTRIM.BaseObjectTypes.Communication, label: "Select Communication" };
                                itemPicker = new HP.HPTRIM.Field.TrimItemPicker(trimClient, option);
                            }
                            break;
                        case "History":
                            {
                                var option = { baseObjectType: HP.HPTRIM.BaseObjectTypes.History, label: "Select History" };
                                itemPicker = new HP.HPTRIM.Field.TrimItemPicker(trimClient, option);
                            }
                            break;
                        case "Origin":
                            {
                                var option = { baseObjectType: HP.HPTRIM.BaseObjectTypes.Origin, label: "Select Origin" };
                                itemPicker = new HP.HPTRIM.Field.TrimItemPicker(trimClient, option);
                            }
                            break;
                        case "Request":
                            {
                                var option = { baseObjectType: HP.HPTRIM.BaseObjectTypes.Request, label: "Select Request" };
                                itemPicker = new HP.HPTRIM.Field.TrimItemPicker(trimClient, option);
                            }
                            break;
                        default:
                            {
                                var baseObjectType = HPTRIM.Utils.TrimHelper.toBaseObjectType(objectType);
                                if (!baseObjectType) {
                                    baseObjectType = HPTRIM.BaseObjectTypes.Record;
                                }
                                var option = { baseObjectType: baseObjectType, label: objectType, isHidden: true };
                                itemPicker = new HP.HPTRIM.Field.TrimItemPicker(trimClient, option);
                            }
                    }
                    return itemPicker;
                };
                TrimObjectDecorator.prototype.configureViewModel = function (pageItem) {
                    var _this = this;
                    var objType = this.viewModel.ObjectType;
                    if (objType == undefined) {
                        objType = pageItem.ObjectType;
                    }
                    var multiSelect = false;
                    if ((pageItem.Format == 'Text' && pageItem.ObjectType == "LookupItem") || pageItem.ObjectType == "Jurisdiction") {
                        multiSelect = true;
                    }
                    var itemPicker = HP.HPTRIM.Form.TrimObjectDecorator.makeTrimItemPicker(this.trimClient, objType, pageItem.Caption, pageItem.Name, pageItem.Mandatory, multiSelect);
                    if (pageItem.LookupSetUri)
                        itemPicker.setCustomUri(pageItem.LookupSetUri);
                    itemPicker.fieldObject = this;
                    var defaultValue = null;
                    var pageItemValue = pageItem.Value();
                    if (pageItem.Format == 'Text' && pageItem.ObjectType == "LookupItem") {
                        var lookItemPropertyValue = {
                            TrimType: pageItem.ObjectType,
                            Uri: "",
                            NameString: pageItem.Value(),
                            Type: ""
                        };
                        pageItemValue = lookItemPropertyValue;
                    }
                    if (pageItemValue) {
                        defaultValue = HP.HPTRIM.TrimBaseObject.make(pageItemValue);
                        itemPicker.setDefaultValue(defaultValue);
                        itemPicker.toggleEdit();
                        if (pageItemValue.RecordTitle) {
                            itemPicker.toolTip(pageItemValue.RecordTitle.Value);
                        }
                    }
                    setTimeout(function () {
                        if (_.has(pageItem, "Readonly")) {
                            itemPicker.enable(!pageItem.Readonly);
                        }
                    }, 200);
                    if (pageItem['Type']) {
                        if (pageItem['Type'] == "Field") {
                            if (pageItem.ObjectType == "Location") {
                                var fieldUri = pageItem.Uri;
                                this.trimClient.doGet("FieldDefinition/" + fieldUri + "?properties=ValidLocationTypes,LocationRestriction").done(function (response) {
                                    var obj = response.Results[0];
                                    var validLocTypes = obj.ValidLocationTypes;
                                    var locRestrictions = obj.FieldDefinitionLocationRestriction;
                                    if (locRestrictions && locRestrictions.Value) {
                                        locRestrictions = locRestrictions.Value;
                                    }
                                    pageItem['validLocTypes'] = validLocTypes;
                                    pageItem['locRestrictions'] = locRestrictions;
                                    var filterString = "type:" + validLocTypes.join(',');
                                    if (locRestrictions == "InternalOnly") {
                                        filterString = filterString + " and internal";
                                    }
                                    else if (locRestrictions == "ExternalOnly") {
                                        filterString = filterString + " and not internal";
                                    }
                                    pageItem['filterClause'](filterString);
                                });
                            }
                            if (pageItem.ObjectType == "LookupItem" && (pageItem.Format == "String" || pageItem.Format == "Text" || pageItem.Format == "Object")) {
                                if (pageItem.Format == 'Text') {
                                    var multiItem = pageItem;
                                    if (multiItem.getValueEx) {
                                        var defaultLookupItem = { displayValue: multiItem.getValueEx(), baseObjectType: HPTRIM.BaseObjectTypes.LookupItem };
                                        itemPicker.setValue(defaultLookupItem);
                                    }
                                }
                                else {
                                    var baseItem = {};
                                    this.trimClient.getAndLoadLookupSet(itemPicker.customUri, function (returnSet) {
                                        baseItem.lookupSetObject = returnSet;
                                        baseItem.LookupValues = returnSet.LookupItemFullNames.slice();
                                        baseItem.LookupSetUri = itemPicker.customUri;
                                        baseItem.lookupSetUri = itemPicker.customUri;
                                        var i = baseItem.lookupSetObject.LookupItemFullNames.indexOf(pageItem.Value());
                                        if (i > -1) {
                                            var lcUri = baseItem.lookupSetObject.LookupItemUris[i];
                                            var search = new HPTRIM.TrimMainObjectSearch(_this.trimClient, HPTRIM.BaseObjectTypes.LookupItem);
                                            search.setProperties(["icon", "name", "NameString", "LookupItemParentSet", "LookupItemParentItem", "LookupItemHasChildItems", "LookupItemFullDescription", "LookupItemAbbreviation", "LookupItemName", "RecordLastNumber"]);
                                            search.setSearchString("uri:" + lcUri.toString());
                                            search.page().done(function (result) {
                                                var locObj = new HPTRIM.TrimBaseObject(HPTRIM.BaseObjectTypes.LookupItem, result.Results[0].Uri, result.Results[0].NameString, result.Results[0].NameString, result.Results[0].Icon.Id);
                                                itemPicker.setValue(locObj);
                                                itemPicker.isEditing(false);
                                            }).fail(function (errorResponse) {
                                                itemPicker.setValue(null);
                                            });
                                        }
                                    });
                                }
                            }
                        }
                    }
                    $.extend(pageItem, itemPicker);
                };
                TrimObjectDecorator.prototype.isValid = function () {
                    var me = this;
                    var meAsItemPicker = this;
                    if (meAsItemPicker.getRawValue()) {
                        if (this.getValue()) {
                            return true;
                        }
                        return false;
                    }
                    return true;
                };
                TrimObjectDecorator.prototype.getValueEx = function () {
                    var rc = null;
                    if (this.getValue) {
                        rc = this.getValue();
                    }
                    return rc;
                };
                TrimObjectDecorator.prototype.onblur = function (context, event) {
                    if (context != null && context != undefined) {
                        _super.prototype.onblur.call(this, context, event);
                    }
                };
                return TrimObjectDecorator;
            }(Form.FieldDecorator));
            Form.TrimObjectDecorator = TrimObjectDecorator;
        })(Form = HPTRIM.Form || (HPTRIM.Form = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var Form;
        (function (Form) {
            var NotesPageDecorator = (function (_super) {
                __extends(NotesPageDecorator, _super);
                function NotesPageDecorator(trimClient, uri, baseObjectType) {
                    _super.call(this);
                    this.forObjectUri = 0;
                    this.templateName = '/templates/Form/NotesPage';
                    this.originalNotes = ko.observable("");
                    this.newNotesValue = ko.observable(undefined);
                    this.clickToDisplayVisible = ko.observable(true);
                    this.pagePropertyName = "Notes";
                    this.bobType = baseObjectType;
                    this.trimClient = trimClient;
                    if (uri) {
                        this.forObjectUri = uri;
                    }
                    if (baseObjectType.NotesPropertyId) {
                        this.pagePropertyName = baseObjectType.NotesPropertyId;
                    }
                }
                NotesPageDecorator.prototype.loadNotes = function () {
                    this.clickToDisplayVisible(false);
                    var bobType = this.bobType;
                    var me = this;
                    var request = new HPTRIM.TrimObjectInformationRequest(me.trimClient, this.forObjectUri, bobType, "Notes").doRequest().done(function (data) {
                        var key = bobType.Id + "Notes";
                        var notes = data.Results[0][key].Value;
                        me.originalNotes(notes);
                    });
                };
                NotesPageDecorator.prototype.getValue = function () {
                    var value = $.trim(this.newNotesValue());
                    if (value === "") {
                        this.newNotesValue(undefined);
                    }
                    return { Value: this.newNotesValue() };
                };
                NotesPageDecorator.prototype.getPagePropertyName = function () {
                    return this.pagePropertyName;
                };
                return NotesPageDecorator;
            }(Form.PageDecorator));
            Form.NotesPageDecorator = NotesPageDecorator;
        })(Form = HPTRIM.Form || (HPTRIM.Form = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var Form;
        (function (Form) {
            var ThesaurusTitleDecorator = (function (_super) {
                __extends(ThesaurusTitleDecorator, _super);
                function ThesaurusTitleDecorator(trimClient, pageItem) {
                    _super.call(this, pageItem);
                    this.keywords = [];
                    this.selectKeywordTooltip = "";
                    this.template = "templates/Field/ThesaurusTitle";
                    this.selectKeywordTooltip = HPTRIM.Utils.String.format(HP.HPTRIM.Messages.web_selectTitle, [HPTRIM.BaseObjectTypes.Keyword.Caption]);
                }
                return ThesaurusTitleDecorator;
            }(Form.FieldDecorator));
            Form.ThesaurusTitleDecorator = ThesaurusTitleDecorator;
        })(Form = HPTRIM.Form || (HPTRIM.Form = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var Form;
        (function (Form) {
            var WordDecorator = (function (_super) {
                __extends(WordDecorator, _super);
                function WordDecorator(pageItem) {
                    _super.call(this, pageItem);
                    this.template = "templates/Field/TextBox";
                }
                return WordDecorator;
            }(Form.FieldDecorator));
            Form.WordDecorator = WordDecorator;
        })(Form = HPTRIM.Form || (HPTRIM.Form = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var Form;
        (function (Form) {
            var SelectPickerEnumDecorator = (function (_super) {
                __extends(SelectPickerEnumDecorator, _super);
                function SelectPickerEnumDecorator(trimClient, pageItem) {
                    _super.call(this, pageItem);
                    if (pageItem.Format !== "Enum") {
                        throw "EnumDecorator : Only pageItem.Format == Enum should be here";
                    }
                    if (pageItem.EnumItems) {
                        var selectpickerBox;
                        selectpickerBox = new HP.HPTRIM.Field.SelectPickerDropdown(trimClient, pageItem.EnumItems);
                        selectpickerBox.enumName = pageItem.EnumName;
                        selectpickerBox.Caption = pageItem.Caption;
                        selectpickerBox.getData();
                        this.template = selectpickerBox.template;
                        $.extend(this, selectpickerBox);
                        if (pageItem.Value()) {
                            var selectedValue = _.find(pageItem.EnumItems, function (enumItem) {
                                if (!enumItem.Name) {
                                    enumItem.Name = enumItem.Caption;
                                    return false;
                                }
                                return enumItem.Name.toLowerCase() == pageItem.Value().toLowerCase();
                            });
                            if (selectedValue) {
                                this.Value(selectedValue.Name);
                            }
                        }
                    }
                }
                return SelectPickerEnumDecorator;
            }(Form.FieldDecorator));
            Form.SelectPickerEnumDecorator = SelectPickerEnumDecorator;
        })(Form = HPTRIM.Form || (HPTRIM.Form = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var Form;
        (function (Form) {
            var FileUploadDecorator = (function (_super) {
                __extends(FileUploadDecorator, _super);
                function FileUploadDecorator(trimClient, pageItem) {
                    var _this = this;
                    _super.call(this, pageItem);
                    this.uploadPending = false;
                    this.trimClient = trimClient;
                    this.template = "templates/Field/FileUpload";
                    this.oldFileName = "";
                    this.droppedFielIsEmailType = false;
                    var postTo = HPRMWebConfig.virtualDirectory + "Api/FileUpload/PostFormData";
                    var postToQueryString = "?locUri=" + this.trimClient.getDatabase().getCurrentUser().Uri;
                    var completeUrl = postTo + postToQueryString;
                    this.completeUrl = postTo + postToQueryString;
                    this.fileUploadProvider = function () {
                        if (_this.uploadPending) {
                            _this.uploadPending = false;
                            return _this.fileUploader;
                        }
                        var trimFileUploadComponent = new HP.HPTRIM.App.Widgets.TrimFileUploadComponent({ url: _this.completeUrl, autoUpload: true, trimClient: _this.trimClient });
                        trimFileUploadComponent.templateName('templates/Widgets/TRIMFileUpload');
                        return trimFileUploadComponent;
                    };
                    this.configureFileUploader();
                    var superAfterRender = this.afterRender;
                    this.afterRender = function () {
                        if (_this.fileUploader) {
                            _this.fileUploader.templateConfiguration.afterRender();
                        }
                    };
                }
                FileUploadDecorator.prototype.reinitaliseFileUpload = function () {
                    if (this.fileUploader) {
                        this.fileUploader.templateConfiguration.afterRender();
                    }
                };
                FileUploadDecorator.prototype.configureFileUploader = function () {
                    var _this = this;
                    var me = this;
                    var fup = null;
                    if (_.isFunction(this.fileUploadProvider)) {
                        fup = this.fileUploadProvider();
                    }
                    else {
                        return;
                    }
                    if (fup) {
                        this.fileUploader = fup;
                    }
                    else {
                        return;
                    }
                    this.fileUploader.clearForm();
                    this.fileUploader.uploadedFiles([]);
                    this.fileUploader.files([]);
                    this.fileUploader.templateConfiguration.afterRender();
                    this.oldFileName = "";
                    this.fileUploader.files.subscribe(function (oldValue) {
                        if (!oldValue) {
                            return;
                        }
                        if (oldValue.length > 0) {
                            me.oldFileName = oldValue[0].name;
                            if (me.oldFileName.lastIndexOf('.') != -1) {
                                me.oldFileName = me.oldFileName.substr(0, me.oldFileName.lastIndexOf('.'));
                            }
                        }
                    }, me, "beforeChange");
                    this.fileUploader.files.subscribe(function (newValue) {
                        if (!newValue) {
                            _this.Value("");
                            return;
                        }
                        if (newValue.length > 0) {
                            var dropFileName = newValue[0].name;
                            dropFileName = dropFileName.toLocaleLowerCase();
                            var dropFileExtension = dropFileName.split('.').pop();
                            _this.droppedFielIsEmailType = false;
                            if (dropFileExtension == "msg" ||
                                dropFileExtension == "vmbx" ||
                                dropFileExtension == "mbx" ||
                                dropFileExtension == "eml") {
                                _this.droppedFielIsEmailType = true;
                            }
                            _this.Value(_this.fileUploader);
                        }
                        else {
                            _this.Value("");
                        }
                    });
                    this.reinitaliseFileUpload();
                };
                return FileUploadDecorator;
            }(Form.FieldDecorator));
            Form.FileUploadDecorator = FileUploadDecorator;
        })(Form = HPTRIM.Form || (HPTRIM.Form = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var Form;
        (function (Form) {
            var Alert = (function () {
                function Alert(header, message) {
                    this.template = "Alert-Template";
                    this.isError = ko.observable(true);
                    this.isWarning = ko.observable(false);
                    this.header = ko.observable("");
                    this.message = ko.observable("");
                    this.onOk = function () { };
                    if (header) {
                        this.header(header);
                    }
                    if (message) {
                        this.message(message);
                    }
                    this.isVisible = ko.computed({
                        read: function () {
                            if (this.header() == "" && this.message() == "") {
                                return false;
                            }
                            return true;
                        },
                        owner: this
                    });
                }
                Alert.prototype.onCancel = function () {
                    this.clear();
                };
                Alert.prototype.clear = function () {
                    this.header("");
                    this.message("");
                };
                Alert.prototype.setAlert = function (header, message) {
                    this.header(header);
                    this.message(message);
                };
                return Alert;
            }());
            Form.Alert = Alert;
        })(Form = HPTRIM.Form || (HPTRIM.Form = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var Form;
        (function (Form) {
            var ShowOverlayMixin = (function () {
                function ShowOverlayMixin() {
                }
                ShowOverlayMixin.prototype.showThesaurusModal = function () {
                    var thesaurusTitle = this;
                    var handler = HP.HPTRIM.App.ActionHandlers.ShowThesaurus.getHandler(ShowOverlayMixin.s_app);
                    handler(thesaurusTitle);
                };
                return ShowOverlayMixin;
            }());
            Form.ShowOverlayMixin = ShowOverlayMixin;
            var DataEntryForm = (function (_super) {
                __extends(DataEntryForm, _super);
                function DataEntryForm(trimClient, rawFormDefinition, editingObjectUri, trimObjectType, hideReadOnlyFields, extraData, requiredCommandIds, requiredProperties) {
                    _super.call(this, "templates/Form/Form", true);
                    this.formHeader = "";
                    this.titlePlaceHolder = "";
                    this.submitEnabled = ko.observable(true);
                    this.preSetKeyValues = {};
                    this.processing = ko.observable(false);
                    this.postingResultSuccess = ko.observable(null);
                    this.postingResultFailure = ko.observable(null);
                    this.excludedFields = {
                        "RecordFilePath": true,
                        'CheckinStyleGpsLocation': true,
                        'SearchFormDefinition': true
                    };
                    this.manualNumberingCompletedHandler = function () { };
                    this.handleWarnings = false;
                    this.updateMode = false;
                    this.requiredCommandIds = [];
                    this.extraRequiredProperties = [];
                    var me = this;
                    this.trimClient = trimClient;
                    this.requiredCommandIds = requiredCommandIds;
                    this.extraRequiredProperties = requiredProperties;
                    this.editingObjectUri = editingObjectUri || -1;
                    this.trimObjectType = trimObjectType;
                    this.submitEnabled(true);
                    this.extraFormData = extraData;
                    this.hideReadOnlyFields = false;
                    if (hideReadOnlyFields) {
                        this.hideReadOnlyFields = true;
                    }
                    this.formDefinition = ko.observable(null);
                    this.containErrorFields = ko.computed(function () {
                        return false;
                    });
                    rawFormDefinition.Pages = _.filter(rawFormDefinition.Pages, function (page) {
                        var isPageSupported = !(_.contains(DataEntryForm.NOT_SUPPORT_PAGE_TYPES, page.Type));
                        if (page.ChildType == "RecordClientMatterParty" ||
                            page.ChildType == "RecordClientMatterRole" ||
                            page.ChildType == "RecordKeyword") {
                            isPageSupported = true;
                        }
                        if (isPageSupported == true) {
                            return true;
                        }
                        var isChildPageSupported = !(_.contains(DataEntryForm.NOT_SUPPORT_CHILD_PAGE_TYPES, page.ChildType));
                        return isChildPageSupported;
                    });
                    _.each(rawFormDefinition.Pages, function (page) {
                        var pageItems = page.PageItems;
                        page.PageItems = _.filter(pageItems, function (pageItem) {
                            return pageItem.Caption && pageItem.Type != "Line";
                        });
                    });
                    rawFormDefinition.Pages = _.filter(rawFormDefinition.Pages, function (page) {
                        if (page.ChildType == "RecordClientMatterParty" ||
                            page.ChildType == "RecordClientMatterRole" ||
                            page.ChildType == "RecordKeyword") {
                            return true;
                        }
                        if (page.Type == "Notes") {
                            return true;
                        }
                        return page.PageItems.length != 0;
                    });
                    var pageCount = 0;
                    var mapPageItems = function (data) {
                        var pageItem = data;
                        if (pageItem.ErrorMessage) {
                            var decoratedPageErrorItem = Form.DecoratorFactory.makeErrorItem(trimClient, pageItem);
                            return decoratedPageErrorItem;
                        }
                        if (pageItem.Readonly === true && me.hideReadOnlyFields === true) {
                            return null;
                        }
                        if (pageItem.Value || pageItem.Value == false) {
                            pageItem.defaultValue = pageItem.Value;
                        }
                        if (me.excludedFields[pageItem.Name]) {
                            return null;
                        }
                        var decoratedPageItem = Form.DecoratorFactory.make(trimClient, pageItem);
                        me.pageItemHandler(decoratedPageItem, me);
                        return decoratedPageItem;
                    };
                    var processItems = function (rawPageItems, pageObjectArray) {
                        _.forEach(rawPageItems, function (rawPageItem) {
                            if (rawPageItem.Name == "LocationGpsLocation") {
                                rawPageItem.Readonly = false;
                            }
                            var pageItem = mapPageItems(rawPageItem);
                            if (pageItem) {
                                if (pageItem.ParentForm) {
                                    var parentId = pageItem.ParentForm.id;
                                    pageItem.Id = parentId + "_" + pageItem.Id;
                                }
                                pageObjectArray.push(pageItem);
                            }
                        });
                        pageObjectArray = _.compact(pageObjectArray);
                    };
                    var mapPages = function (rawPage) {
                        var pageType = rawPage.Type;
                        var pageObject = {};
                        $.extend(pageObject, rawPage);
                        pageObject.PageItems = [];
                        pageObject.SecondaryPageItems = [];
                        if (pageType == "Notes") {
                            pageObject = Form.DecoratorFactory.makeNotesPage(me.trimClient, rawPage, me.editingObjectUri, me.trimObjectType);
                        }
                        else if (pageType == "ChildList" && rawPage.ChildType == "RecordClientMatterParty") {
                            pageObject = Form.DecoratorFactory.makeClientMatterPartiesPage(me.trimClient, rawPage, me.editingObjectUri);
                        }
                        else if (pageType == "ChildList" && rawPage.ChildType == "RecordClientMatterRole") {
                            pageObject = Form.DecoratorFactory.makeClientMatterRolesPage(me.trimClient, rawPage, me.editingObjectUri);
                        }
                        else if (pageType == "ChildList" && rawPage.ChildType == "RecordKeyword") {
                            pageObject = Form.DecoratorFactory.makeKeywordPage(me.trimClient, rawPage, me.editingObjectUri);
                        }
                        else if (pageType == "LocationAddress") {
                            processItems(rawPage.PageItems, pageObject.PageItems);
                            pageObject = Form.DecoratorFactory.makeLocationAddressPage(me.trimClient, rawPage, pageObject, me.editingObjectUri, extraData);
                        }
                        else {
                            if (rawPage.PageItems) {
                                processItems(rawPage.PageItems, pageObject.PageItems);
                                me.configureEnablingPageItems(pageObject.PageItems);
                            }
                        }
                        $.extend(pageObject, new Form.PageDecorator());
                        pageObject.id = "DateEntryPage" + _.uniqueId();
                        pageObject.pageIndex = pageCount++;
                        return pageObject;
                    };
                    var mapRawFormDefintion = function (rawFormDefinition) {
                        var returnObject = {};
                        $.extend(returnObject, rawFormDefinition);
                        if (rawFormDefinition.Pages) {
                            returnObject.Pages = [];
                            _.forEach(rawFormDefinition.Pages, function (page) {
                                returnObject.Pages.push(mapPages(page));
                            });
                        }
                        return returnObject;
                    };
                    var mappedFormDef = mapRawFormDefintion(rawFormDefinition);
                    this.formDefinition(mappedFormDef);
                    this.templateConfiguration.afterRender = function (elements) {
                        me.afterRender();
                    };
                }
                DataEntryForm.prototype.configureEnablingPageItems = function (pageItems) {
                    var enablingPageItem = "EnablingPageItem";
                    var enablingPageItemValue = "EnablingPageItemValue";
                    var passivePageItems = _.indexBy(pageItems, enablingPageItem);
                    _.each(passivePageItems, function (context) {
                        if (context.enable) {
                            setTimeout(function () {
                                if (ko.isObservable(context.enable)) {
                                    context.enable(false);
                                }
                            }, 100);
                        }
                    });
                    var keys = _.keys(passivePageItems);
                    var enablingControls = _.indexBy(pageItems, function (pageItem) {
                        if (_.contains(keys, pageItem.Name)) {
                            (pageItem).Value.subscribe(function (newValue) {
                                var field = passivePageItems[pageItem.Name];
                                if (!field) {
                                    return;
                                }
                                var normalizeValue = function (fieldToNormalize) {
                                    var value = fieldToNormalize['EnablingPageItemValue'];
                                    if (value == "True")
                                        return true;
                                    if (value == "False")
                                        return false;
                                    return fieldToNormalize['EnablingPageItemValue'];
                                };
                                var normalizedValue = normalizeValue(field);
                                if (newValue == normalizedValue) {
                                    field.enabled(true);
                                }
                                else {
                                    field.enabled(false);
                                }
                            });
                            return pageItem.Name;
                        }
                        else {
                            return;
                        }
                    });
                };
                DataEntryForm.prototype.pageItemHandler = function (pageItem, parentForm) {
                    pageItem.ParentForm = parentForm;
                };
                DataEntryForm.prototype.afterRender = function () {
                    this.focusViewModel();
                };
                DataEntryForm.prototype.focusViewModel = function () {
                    var me = this;
                    setTimeout(function () {
                        var lcPageItem = _(me.formDefinition().Pages).pluck('PageItems');
                        var firstPageItem;
                        if (lcPageItem[0] && lcPageItem) {
                            firstPageItem = _.first(lcPageItem[0]);
                        }
                        if (firstPageItem != undefined) {
                            $('#' + firstPageItem.Id).focus();
                        }
                    }, 1000);
                };
                DataEntryForm.prototype.getField = function (propId, propType) {
                    var me = this;
                    var found = null;
                    var trimClient = me.trimClient;
                    _.each(me.formDefinition().Pages, function (page) {
                        _.each(page.PageItems, function (pageItem) {
                            propType = (propType === null || typeof propType === 'undefined') ? 'Id' : propType;
                            if (pageItem[propType] == propId) {
                                found = pageItem;
                                return;
                            }
                        });
                    });
                    return found;
                };
                DataEntryForm.prototype.clear = function () {
                    var me = this;
                    var trimClient = me.trimClient;
                    _.each(me.formDefinition().Pages, function (page) {
                        _.each(page.PageItems, function (pageItem) {
                            if (pageItem.reset) {
                                pageItem.reset();
                            }
                        });
                    });
                };
                DataEntryForm.prototype.loadDefaultValues = function () {
                    var me = this;
                    var trimClient = me.trimClient;
                    _.each(me.formDefinition().Pages, function (page) {
                        _.each(page.PageItems, function (pageItem) {
                            if (pageItem.defaultValue) {
                                pageItem.Value(pageItem.defaultValue);
                            }
                        });
                    });
                };
                DataEntryForm.prototype.submit = function () {
                    this.submitEnabled(false);
                    var fieldsValues = this.getFieldsValue();
                    this.dispatchForm(fieldsValues);
                };
                DataEntryForm.prototype.dispatchForm = function (data) {
                    var _this = this;
                    var me = this;
                    me.prevData = data;
                    this.processing(true);
                    var dispatcher = new HP.HPTRIM.TrimObjectSave(me.trimClient, this.trimObjectType, this.editingObjectUri);
                    dispatcher.doRequestEx(data).done(function (response) {
                        if (_this.trimClient.isManualNumberedRecord) {
                            _this.submitEnabled(false);
                        }
                        else {
                            _this.submitEnabled(true);
                        }
                        var errs = response.ResponseStatus.Errors;
                        if (me.handleWarnings && errs != null && errs.length > 0) {
                            DataEntryForm.doBadDispatch(me, response);
                        }
                        else {
                            if (_this.trimClient.isManualNumberedRecord && !_this.updateMode) {
                                _this.setPropertiesForPostRequest(data, response);
                            }
                            else {
                                DataEntryForm.doGoodDispatch(me, response);
                            }
                        }
                    }).fail(function (failure) {
                        _this.submitEnabled(true);
                        DataEntryForm.doBadDispatch(me, failure);
                    });
                };
                DataEntryForm.prototype.setPropertiesForPostRequest = function (data, recordResponse) {
                    var fieldsValues = { Fields: {} };
                    if (data["RecordRecordType"] != undefined && data["RecordRecordType"].Uri != undefined) {
                        fieldsValues["Uri"] = data["RecordRecordType"].Uri;
                    }
                    if (data["RecordRecordType"] != undefined && data['RecordRecordType'].jsonObject["RecordTypeName"].Value != undefined) {
                        fieldsValues["RecordTypeName"] = data['RecordRecordType'].jsonObject["RecordTypeName"].Value;
                    }
                    if (data["RecordRecordType"] != undefined && data['RecordLongNumber'] != undefined) {
                        fieldsValues["RecordTypeLastNumber"] = data['RecordLongNumber'];
                    }
                    if (data["RecordRecordType"] != undefined && data["RecordRecordType"] != undefined) {
                        fieldsValues['RecordRecordType'] = data["RecordRecordType"];
                    }
                    this.recordTypePostRequest(fieldsValues, recordResponse);
                };
                DataEntryForm.prototype.recordTypePostRequest = function (data, recordResponse) {
                    var _this = this;
                    var me = this;
                    me.prevData = data;
                    var manualNumberingForm = new HP.HPTRIM.App.Panels.Plugins.ManualNumberingForm(this.trimClient);
                    this.processing(true);
                    var recordTypeBaseObject = data.RecordRecordType["baseObjectType"];
                    var dispatcher = new HP.HPTRIM.TrimObjectSave(me.trimClient, recordTypeBaseObject, this.editingObjectUri);
                    if (data['RecordRecordType']) {
                        delete data['RecordRecordType'];
                    }
                    dispatcher.doRequestEx(data).done(function (response) {
                        if (_this.trimClient.isManualNumberedRecord) {
                            _this.submitEnabled(false);
                        }
                        else {
                            _this.submitEnabled(true);
                        }
                        var errs = response.ResponseStatus.Errors;
                        if (me.handleWarnings && errs != null && errs.length > 0) {
                            DataEntryForm.doBadDispatch(me, response);
                        }
                        else {
                            me.manualNumberingCompletedHandler();
                            DataEntryForm.doGoodDispatch(me, recordResponse);
                        }
                    }).fail(function (failure) {
                        _this.submitEnabled(true);
                        DataEntryForm.doBadDispatch(me, failure);
                    });
                };
                DataEntryForm.redispatchWithoutWarnings = function (form) {
                    if (form.prevData) {
                        form.prevData['FailOnWarnings'] = false;
                        form.dispatchForm(form.prevData);
                    }
                };
                DataEntryForm.doGoodDispatch = function (form, response) {
                    form.processing(false);
                    if (form.trimClient.isManualNumberedRecord) {
                        form.submitEnabled(false);
                    }
                    else {
                        form.submitEnabled(true);
                    }
                    form.postingResultSuccess(response);
                    form.postingResultFailure(null);
                    if (form.afterSaveHandler) {
                        form.afterSaveHandler(response);
                    }
                };
                DataEntryForm.doBadDispatch = function (form, failure) {
                    form.processing(false);
                    form.submitEnabled(true);
                    form.postingResultFailure(failure);
                    form.postingResultSuccess(null);
                    if (form.errorHandler) {
                        form.errorHandler(failure);
                    }
                };
                DataEntryForm.prototype.setError = function (message) {
                    if (this.errorHandler) {
                        this.errorHandler(message);
                    }
                };
                DataEntryForm.prototype.getFieldsValueForObjectType = function (keyValue, includePreSetValues) {
                    return keyValue;
                };
                DataEntryForm.getLocationAddresses = function (page, keyValue) {
                    var childAddresses = [];
                    if (page.StreetAddress) {
                        if (page.StreetAddress[1].Value() || page.StreetAddress[2].Value() || page.StreetAddress[3].Value() || page.StreetAddress[4].Value() || page.StreetAddress[5].Value() || page.StreetAddress[6].Value() || page.StreetUri) {
                            var childAddress = {
                                LocationAddressAddressType: page.StreetAddress[0].Value(),
                                LocationAddressAddressLines: page.StreetAddress[1].Value(),
                                LocationAddressCity: page.StreetAddress[2].Value(),
                                LocationAddressState: page.StreetAddress[3].Value(),
                                LocationAddressPostcode: page.StreetAddress[4].Value(),
                                LocationAddressRegion: page.StreetAddress[5].Value(),
                                LocationAddressCountry: page.StreetAddress[6].Value(),
                                Uri: page.StreetUri,
                            };
                            childAddresses.push(childAddress);
                        }
                    }
                    if (page.MailAddress) {
                        if (page.MailAddress[1].Value() || page.MailAddress[2].Value() || page.MailAddress[3].Value() || page.MailAddress[4].Value() || page.MailAddress[5].Value() || page.MailAddress[6].Value() || page.MailUri) {
                            var childAddress = {
                                LocationAddressAddressType: page.MailAddress[0].Value(),
                                LocationAddressAddressLines: page.MailAddress[1].Value(),
                                LocationAddressCity: page.MailAddress[2].Value(),
                                LocationAddressState: page.MailAddress[3].Value(),
                                LocationAddressPostcode: page.MailAddress[4].Value(),
                                LocationAddressRegion: page.MailAddress[5].Value(),
                                LocationAddressCountry: page.MailAddress[6].Value(),
                                Uri: page.MailUri,
                            };
                            childAddresses.push(childAddress);
                        }
                    }
                    if (childAddresses.length > 0) {
                        keyValue['ChildAddresses'] = childAddresses;
                        keyValue['LocationFormattedAddress'] = "";
                    }
                };
                DataEntryForm.prototype.getFieldsValue = function (includePreSetValues) {
                    var keyValue = { Fields: {} };
                    var pages = this.formDefinition().Pages;
                    var childLocations = [];
                    keyValue = this.getFieldsValueForObjectType(keyValue, includePreSetValues);
                    _.each(pages, function (page) {
                        if (page.getPagePropertyName) {
                            var key = page.getPagePropertyName();
                            var pageValue = page.getValue();
                            if (pageValue) {
                                if (page.Type == "Notes") {
                                    if (pageValue.Value !== undefined) {
                                        keyValue[key] = pageValue;
                                        var noteUpdateType = HP.HPTRIM.Utils.EnumHelper.toString(HP.HPTRIM.NotesUpdateType, HP.HPTRIM.NotesUpdateType.AppendWithUserStamp);
                                        keyValue['NotesUpdateType'] = noteUpdateType;
                                    }
                                }
                                else {
                                    keyValue[key] = pageValue;
                                }
                            }
                            if (key == "ChildKeywords") {
                                var getNewKeywordAttachment = true;
                                keyValue['ActionsToCall'] = page.getValue(getNewKeywordAttachment);
                                if (page.Mandatory && (keyValue['ActionsToCall'] == null))
                                    keyValue['ThesaurusNotPresent'] = true;
                            }
                            return;
                        }
                        if (page.Type == "LocationAddress") {
                            DataEntryForm.getLocationAddresses(page, keyValue);
                            return;
                        }
                        _.each(page.PageItems, function (pageItem) {
                            if (pageItem.isDisable()) {
                                return;
                            }
                            if (pageItem.Name) {
                                if (pageItem.Format == "Currency") {
                                    var value = pageItem.getCurrencyValueEx();
                                }
                                else {
                                    var value = pageItem.getValueEx();
                                }
                                if (pageItem.Name == "RecordAccessControl" ||
                                    pageItem.Name == "LocationAccessControl") {
                                    if (pageItem['Readonly'] !== true) {
                                        keyValue["AccessControlList"] = value;
                                    }
                                    return;
                                }
                                if (pageItem.Name == "RecordSecurity") {
                                    keyValue["SecurityProfile"] = value;
                                    return;
                                }
                                if (pageItem.Name == "CheckinStyleSecurity") {
                                    keyValue["CheckinStyleSecurity"] = value;
                                    return;
                                }
                                if (pageItem.Name.indexOf('Notes') > -1) {
                                    keyValue[pageItem.Name] = { "Value": value };
                                    return;
                                }
                                var name = pageItem.Name;
                                if (pageItem.Name.indexOf('LocationAddress') > -1) {
                                    pageItem.Name = pageItem.Name + '[0]';
                                }
                                if (pageItem['Type'] == "Field" && pageItem.Uri) {
                                    if (pageItem.viewModel && pageItem.viewModel.lookupSetUri > 0 && _.isArray(value)) {
                                        value = value[0];
                                    }
                                    var lcPageItem = pageItem;
                                    if (lcPageItem.LookupValues && lcPageItem.LookupValues.length > 0 && (lcPageItem.Format == "String")) {
                                        value = lcPageItem.getRawValue();
                                    }
                                    if (_.isObject(value)) {
                                        if (value.Uri == -1 || value.Uri == 0 || value.Uri === undefined)
                                            return;
                                    }
                                    if (pageItem['Mandatory'] === true) {
                                        if (value === "" || !value) {
                                            pageItem.error(HP.HPTRIM.Framework.Components.Shared.String.format(HP.HPTRIM.Messages.core_fieldBlank, [pageItem['Caption']]));
                                        }
                                        else {
                                            pageItem.error('');
                                        }
                                    }
                                    if (pageItem.error().length > 0) {
                                        keyValue["Fields"]["Error"] = pageItem.error();
                                    }
                                    keyValue["Fields"][pageItem.Name] = { "Value": value };
                                }
                                else {
                                    if (_.isObject(value)) {
                                        if (value.Uri == -1 || value.Uri == 0 || value.Uri === undefined)
                                            return;
                                    }
                                    if (value == null) {
                                        if (pageItem.Format == "Number") {
                                            return;
                                        }
                                        keyValue[pageItem.Name] = value;
                                        return;
                                    }
                                    if (value.Uri) {
                                        keyValue[pageItem.Name] = value.Uri;
                                    }
                                    else {
                                        keyValue[pageItem.Name] = value;
                                    }
                                }
                            }
                        });
                    });
                    if (_.isEmpty(keyValue["Fields"])) {
                        delete keyValue["Fields"];
                    }
                    if (keyValue["ChildAddresses"] && keyValue["ChildAddresses"].length > 0) {
                        if (this.extraFormData) {
                            delete this.extraFormData['ChildAddresses'];
                        }
                    }
                    if (childLocations.length > 0) {
                        keyValue["ChildLocations"] = childLocations;
                    }
                    if (this.extraFormData) {
                        $.extend(keyValue, this.extraFormData);
                    }
                    if (includePreSetValues != undefined && includePreSetValues == true) {
                        _.each(this.preSetKeyValues, function (preSetKeyValue) {
                            keyValue[preSetKeyValue.Name] = preSetKeyValue.Value ? preSetKeyValue.Value : preSetKeyValue;
                        });
                    }
                    var extraPropertiesToRequest = [];
                    if (this.extraRequiredProperties) {
                        extraPropertiesToRequest = extraPropertiesToRequest.concat(this.extraRequiredProperties);
                    }
                    if (this.requiredCommandIds) {
                        if (!_.contains(extraPropertiesToRequest, "EnabledCommandIds")) {
                            extraPropertiesToRequest.push("EnabledCommandIds");
                        }
                        keyValue['cid_SelectedIds'] = this.requiredCommandIds.join(',');
                    }
                    keyValue['FailOnWarnings'] = this.handleWarnings;
                    keyValue['properties'] = extraPropertiesToRequest.join(',');
                    return keyValue;
                };
                DataEntryForm.prototype.validate = function () {
                    this.errorMessages = [];
                    return this.checkForMandatoryFields();
                };
                DataEntryForm.prototype.checkForMandatoryFields = function () {
                    var mandatoryFieldsGood = true;
                    var me = this;
                    var firstName;
                    var lastName;
                    _.each(me.formDefinition().Pages, function (page) {
                        _.each(page.PageItems, function (pageItem) {
                            if (pageItem.Name == "LocationGivenNames") {
                                firstName = pageItem.getValueEx();
                            }
                            if (pageItem.Name == "LocationSurnameNoPrefix") {
                                lastName = pageItem.getValueEx();
                            }
                            if (pageItem.Mandatory) {
                                if (pageItem.Name == "LocationSortName") {
                                    if (firstName != undefined) {
                                        var fullName = lastName + ', ' + firstName;
                                        pageItem.Value(fullName);
                                    }
                                    else if (lastName != undefined) {
                                        pageItem.Value(lastName);
                                    }
                                }
                                if (!pageItem.getValueEx()) {
                                    var errMessage = HPTRIM.Utils.String.format(HPTRIM.Messages.web_mandatoryFieldNeedsValue, [pageItem.Caption]);
                                    me.errorMessages.push(errMessage);
                                    mandatoryFieldsGood = false;
                                }
                            }
                        });
                    });
                    return mandatoryFieldsGood;
                };
                DataEntryForm.prototype.getErrorList = function () {
                    var errorMessage = "";
                    errorMessage = this.errorMessages.join("</br>");
                    return errorMessage;
                };
                DataEntryForm.NOT_SUPPORT_PAGE_TYPES = ["LocationRelationships", "LocationProfile", "ActiveDates", "ChildList"];
                DataEntryForm.NOT_SUPPORT_CHILD_PAGE_TYPES = ["LocationEAddress", "RecordRelationship", "RecordJurisdiction", "RecordLocation", "Unknown"];
                return DataEntryForm;
            }(HP.HPTRIM.Framework.Components.Layouts.Panel));
            Form.DataEntryForm = DataEntryForm;
        })(Form = HPTRIM.Form || (HPTRIM.Form = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var Form;
        (function (Form) {
            var RecordDataEntryForm = (function (_super) {
                __extends(RecordDataEntryForm, _super);
                function RecordDataEntryForm(trimClient, fileUploadProvider, formDefinition, recordType, editingObjectUri, defaultClassification, documentTitle, documentDefaultContainer) {
                    var _this = this;
                    _super.call(this, trimClient, formDefinition, editingObjectUri, HPTRIM.BaseObjectTypes.Record);
                    this.manualNumberingRequired = false;
                    this.manualNumberEnteredHasError = false;
                    this.allFieldsValidated = false;
                    this.warningGivenBefore = false;
                    this.enclosedInsideContainer = false;
                    this.myName = 'RecordDataEntryForm';
                    this.warningHandler = function (title, errors, continueCallback, warningBody) { continueCallback(); };
                    this.manualNumberingHandler = function () { };
                    this.scheduleUpdatedByUser = false;
                    this.trimClient = trimClient;
                    this.fileUploadProvider = fileUploadProvider;
                    if (typeof (recordType) == 'object') {
                        if (recordType != null && recordType.jsonObject["RecordTypeNumberPattern"] != undefined) {
                            this.recordNumberPattern = recordType.jsonObject["RecordTypeNumberPattern"];
                        }
                        if (recordType != null && recordType.jsonObject["RecordTypeLastNumber"] != undefined) {
                            this.recordLastNumber = recordType.jsonObject["RecordTypeLastNumber"];
                        }
                        if (recordType != null && recordType.jsonObject["Uri"] != undefined) {
                            this.recordUri = recordType.jsonObject["Uri"];
                        }
                    }
                    var notSupportedPages = ["Jurisdiction", "RecordKeywords", "RecordContacts", "AddCommunication", "Access", "RecordRelationships", "RecordActions", "RecordKeywords"];
                    this.oldFileName = "";
                    this.titleString = ko.observable("");
                    this.dateCreated = ko.observable("");
                    this.keepCheckedOut = ko.observable(false);
                    this.fileDropped = ko.observable(false);
                    this.fileNameToDisplay = ko.observable("");
                    this.fileNameOnServer = ko.observable("");
                    this.showFilePreSpecData = ko.observable(false);
                    this.forCreatingSupercopyUri = ko.observable("");
                    this.showFileUploader = ko.observable(true);
                    this.warningGivenBefore = false;
                    this.dateFieldArray = [];
                    var processedForm = {};
                    this.currentUserHasRightToChangeDateCreated = trimClient.getDatabase().currentUserPermissions().RecordAdminRestricted;
                    this.droppedFielIsEmailType = false;
                    var length = 0;
                    if (formDefinition != undefined) {
                        if (formDefinition.Pages != undefined) {
                            length = formDefinition.Pages.length;
                        }
                    }
                    var me = this;
                    while (length--) {
                        var page = formDefinition.Pages[length];
                        if (_.contains(notSupportedPages, page.Type)) {
                            formDefinition.Pages.splice(length, 1);
                        }
                        _.each(page.PageItems, function (pageItem) {
                            if (pageItem.Format && (pageItem.Format == "Date" || pageItem.Format == "Datetime")) {
                                me.dateFieldArray.push(pageItem);
                            }
                        });
                    }
                    if (formDefinition === undefined) {
                        throw HP.HPTRIM.Messages.web_dataFormEntryBlankError;
                    }
                    this.manualNumberingFormOverlay = new HP.HPTRIM.App.Panels.Plugins.ManualNumberingForm(this.trimClient);
                    this.recordDataEntryPanel = new HP.HPTRIM.App.Panels.RecordDataEntryForm.RecordDataEntryPanel(this.trimClient, this.fileUploadProvider);
                    if (this.recordNumberPattern) {
                        var numberPattern = this.recordNumberPattern["Value"].toUpperCase();
                        if (numberPattern.search('Z') >= 0 ||
                            numberPattern.search('N') >= 0 ||
                            numberPattern.search('X') >= 0 ||
                            numberPattern.search('A') >= 0 ||
                            numberPattern.search('B') >= 0) {
                            this.manualNumberingRequired = true;
                            this.trimClient.isManualNumberedRecord = true;
                        }
                    }
                    this.forRecordType = recordType;
                    this.is_editing = false;
                    this.defaultClassification = defaultClassification;
                    this.documentTitle = documentTitle;
                    this.documentDefaultContainer = documentDefaultContainer;
                    this.showFileUploader(true);
                    if (editingObjectUri) {
                        this.showFileUploader(false);
                        this.is_editing = true;
                    }
                    if (!editingObjectUri) {
                        this.configureFileUploader();
                        var superAfterRender = this.afterRender;
                        this.afterRender = function () {
                            if (_this.fileUploader) {
                                _this.fileUploader.templateConfiguration.afterRender();
                                _super.prototype.afterRender.call(_this);
                            }
                        };
                    }
                    this.notesUpdateType = { NotesUpdateType: "AppendWithUserStamp" };
                    this.errorMessages = [];
                    this.templateName("templates/Form/RecordDataEntryForm");
                    this.containerBeingSet = ko.observable(false);
                    this.containerBeingSet.subscribe(function (newValue) {
                        _this.refreshEnClosedField();
                    });
                    if (this.assigneeField) {
                        this.assigneeField.value.subscribe(function (newValue) {
                            if (_this.ownerField) {
                                if (newValue != undefined) {
                                    if (newValue.baseObjectType.id == 'Location' && _this.assigneeField.value() != null && _this.trimClient.defaultOwner.Value == 'CurrentOrg') {
                                        var assigneeField = _this.assigneeField.value();
                                        var path = "Location/" + assigneeField.Uri;
                                        var vLocalNewOwnerValue = _this.ownerField.value();
                                        var requestObject = {};
                                        requestObject.properties = "Icon,NameString,LocationUnit";
                                        requestObject.format = "json";
                                        _this.trimClient.doGet(path, requestObject).done(function (data) {
                                            if (data.Results[0].LocationUnit) {
                                                if (data.Results[0].LocationUnit.LocationFormattedName.Value != "") {
                                                    vLocalNewOwnerValue.Uri = data.Results[0].LocationUnit.Uri;
                                                    vLocalNewOwnerValue.iconId = data.Results[0].LocationUnit.Icon.Id;
                                                    vLocalNewOwnerValue.displayValue = data.Results[0].LocationUnit.LocationFormattedName.Value;
                                                }
                                                me.ownerField.setValue(vLocalNewOwnerValue);
                                            }
                                            else {
                                                me.ownerField.setValue(newValue);
                                            }
                                        }).fail(function (err) {
                                            me.errorHandler(err);
                                        });
                                    }
                                    else if (_this.assigneeField.value() != null && _this.trimClient.defaultOwner.Value == 'Current') {
                                        me.ownerField.setValue(newValue);
                                    }
                                }
                            }
                            _this.assigneeField.on({
                                'afterItemClicked': function (field, value) {
                                    if (me.containerField && me.containerBeingSet()) {
                                        me.enclosedField.Value(true);
                                    }
                                }
                            });
                        });
                    }
                    this.configureEnclosedRule();
                    this.configureHomeAndContainerRule();
                    this.configureEnclosedAndAssigneeRule();
                    this.configureDefaultRetentionFromClassification();
                    this.setDefaultClassification();
                    this.configureClassificationRule();
                    if (editingObjectUri) {
                        this.formHeader = HP.HPTRIM.Messages.web_recordNumberCaption + ': ' + formDefinition.RecordNumber;
                    }
                    else {
                        this.formHeader = "";
                    }
                    me.handleWarnings = true;
                    this.submitEnabled.subscribe(function (value) {
                        if (value == false) {
                            $('#saveBtn').addClass('disabled');
                        }
                        else {
                            $('#saveBtn').removeClass('disabled');
                        }
                    });
                    if (this.documentTitle != undefined) {
                        this.freeTextTitle.Value(this.documentTitle);
                    }
                    if (this.containerField != undefined && this.documentDefaultContainer != undefined) {
                        this.containerField.setRawValue(this.documentDefaultContainer.RecordNumber.Value);
                        this.containerField.doSearch();
                    }
                }
                RecordDataEntryForm.prototype.pageItemHandler = function (pageItem, parentForm) {
                    var me = this;
                    pageItem.ParentForm = parentForm;
                    if (pageItem.Format == "Object" && pageItem.ObjectType == "Location") {
                        var createNewLocationPlugin = new HP.HPTRIM.Field.Plugin.CreatingLocationPickerPlugin(this.trimClient);
                        pageItem['addPlugin'].call(pageItem, createNewLocationPlugin);
                    }
                    if (pageItem.Name === "RecordAccessControl") {
                        this.accessControlField = pageItem;
                    }
                    if (pageItem.Name === "RecordIsEnclosed") {
                        this.enclosedField = pageItem;
                        this.enclosedField['enable'] = ko.observable(false);
                    }
                    if (pageItem.Name === "RecordContainer") {
                        this.containerField = pageItem;
                    }
                    if (pageItem.Name === "RecordHomeLocation") {
                        this.homeField = pageItem;
                    }
                    if (pageItem.Name === "RecordOwnerLocation") {
                        this.ownerField = pageItem;
                    }
                    if (pageItem.Name === "RecordAssignee") {
                        this.assigneeField = pageItem;
                    }
                    if (pageItem.Name === "RecordAuthor") {
                        this.authorField = pageItem;
                    }
                    if (pageItem.Name == "RecordClient") {
                        if (this.freeTextTitle == undefined) {
                            this.titleDecorator = pageItem;
                        }
                    }
                    if (pageItem.Name == "RecordJurisdictions") {
                        this.jurisdictionField = pageItem;
                    }
                    if (pageItem.Name == "RecordTitle" || pageItem.Name == "RecordTypedTitle") {
                        this.recordTitleDecorator = pageItem;
                        this.recordTitleDecorator.setMaxLength(255);
                    }
                    if (pageItem.Name == "RecordTypedTitle") {
                        this.freeTextTitle = pageItem;
                    }
                    if (pageItem.Name == "RecordDateCreated") {
                        this.dateCreatedField = pageItem;
                    }
                    if (pageItem.Name == "freeTextTitle") {
                        this.freeTextTitleField = pageItem;
                    }
                    if (pageItem.Name == "RecordClassification") {
                        this.classificationField = pageItem;
                    }
                    if (pageItem.Name == "RecordRetentionSchedule") {
                        this.retentionScheduleField = pageItem;
                    }
                    this.enclosedInsideContainer = false;
                };
                RecordDataEntryForm.prototype.checkOptionalWarning = function () {
                    var me = this;
                    var firstWarningField = null;
                    var pages = me.formDefinition().Pages;
                    var warningList = [];
                    _.each(pages, function (page) {
                        _.each(page.PageItems, function (pageItem) {
                            if (pageItem.getMandatoryOption() == HP.HPTRIM.Form.FieldMandaoryOption.WarningOnly) {
                                var fieldValue = pageItem.getValueEx();
                                if (fieldValue == null || fieldValue == 0 || fieldValue == '' || fieldValue.displayValue == null || fieldValue.displayValue == '') {
                                    if (warningList.length < 1) {
                                        firstWarningField = pageItem;
                                    }
                                    warningList.push(pageItem.Caption);
                                }
                            }
                        });
                    });
                    if (warningList.length > 0) {
                        var title = HPTRIM.Messages.web_warning;
                        var warningBody = HPTRIM.Messages.web_formFieldsBlank;
                        var callback = function () {
                            me.submitEnabled(true);
                            var ele = document.getElementById(firstWarningField.Id);
                            if (ele != undefined) {
                                ele.focus();
                            }
                            else {
                                ele = document.getElementById(firstWarningField.Name + "_btn");
                                if (ele != undefined) {
                                    ele.focus();
                                }
                            }
                        };
                        me.warningHandler(title, warningList, callback, warningBody);
                    }
                    else {
                        me.continueSubmit();
                    }
                };
                RecordDataEntryForm.prototype.fieldErrorCheck = function () {
                    var me = this;
                    if (!me.allFieldsValidated) {
                        me.allFieldsValidated = true;
                        var firstErrorField = null;
                        var pages = me.formDefinition().Pages;
                        var allErrors = '';
                        _.each(pages, function (page) {
                            _.each(page.PageItems, function (pageItem) {
                                if (!me.enclosedInsideContainer || (pageItem.Id != "RecordHomeLocation" && pageItem.Id != "RecordAssignee")) {
                                    if (pageItem.error().length > 0) {
                                        if (firstErrorField == null) {
                                            firstErrorField = pageItem;
                                        }
                                        allErrors += pageItem.error();
                                    }
                                }
                            });
                        });
                        if (allErrors.trim().length > 0) {
                            var ele = document.getElementById(firstErrorField.Id);
                            if (ele != undefined) {
                                ele.focus();
                            }
                            else {
                                ele = document.getElementById(firstErrorField.Name + "_btn");
                                if (ele != undefined) {
                                    ele.focus();
                                }
                            }
                            return false;
                        }
                    }
                    return true;
                };
                RecordDataEntryForm.prototype.submit = function () {
                    var me = this;
                    this.refreshEnclosedInsideContainer();
                    if (this.submitEnabled() == true) {
                        this.submitEnabled(false);
                        if (!this.fieldErrorCheck()) {
                            this.submitEnabled(true);
                            return;
                        }
                        if (this.is_editing || this.warningGivenBefore) {
                            if (this.validate() === false) {
                                var warningMessage = me.getErrorList();
                                var title = HPTRIM.Messages.web_warning;
                                this.warningHandler(title, [warningMessage], function () {
                                    me.continueSubmit();
                                });
                            }
                            else {
                                this.continueSubmit();
                            }
                        }
                        else {
                            this.warningGivenBefore = true;
                            this.checkOptionalWarning();
                        }
                    }
                };
                RecordDataEntryForm.prototype.continueSubmit = function () {
                    var me = this;
                    var fieldsValues = me.getFieldsValue(true);
                    if (me.manualNumberingRequired) {
                        me.submitEnabled(false);
                    }
                    if (me.enclosedInsideContainer) {
                        delete fieldsValues.RecordHomeLocation;
                        delete fieldsValues.RecordAssignee;
                        if (fieldsValues.RecordOwnerLocation) {
                            delete fieldsValues.RecordOwnerLocation;
                        }
                    }
                    if (fieldsValues["RecordGpsLocation"] == "") {
                        if (fieldsValues["RecordFilePath"] != "") {
                            delete fieldsValues["RecordGpsLocation"];
                        }
                    }
                    if (fieldsValues["ThesaurusNotPresent"]) {
                        me.setError("Attached Thesaurus Term can not be left blank");
                        me.submitEnabled(true);
                        return;
                    }
                    if (me.forRecordType) {
                        fieldsValues['RecordRecordType'] = me.forRecordType;
                    }
                    if (me.fileNameOnServer() && me.fileNameToDisplay()) {
                        fieldsValues['fromFileName'] = me.fileNameToDisplay();
                        fieldsValues['RecordFilePath'] = me.fileNameOnServer();
                    }
                    if (me.fileUploader !== undefined && me.fileUploader.uploadedFiles() !== null && me.fileUploader.uploadedFiles().length != undefined && me.fileUploader.uploadedFiles().length > 0) {
                        var fileName = me.fileUploader.uploadedFiles()[0].UploadedFileName;
                        fieldsValues['fromFileName'] = fileName;
                        fieldsValues['RecordFilePath'] = fileName;
                    }
                    if (_.has(fieldsValues, "Notes")) {
                        if (fieldsValues["Notes"]) {
                            if (fieldsValues["Notes"].Value) {
                                fieldsValues["RecordNotes"] = fieldsValues["Notes"];
                                $.extend(fieldsValues, me.notesUpdateType);
                            }
                        }
                        delete fieldsValues["Notes"];
                    }
                    fieldsValues['properties'] = "RecordNumber, RecordTitle";
                    if (me.forCreatingSupercopyUri() != "") {
                        fieldsValues['CopyDocumentFromRecord'] = me.forCreatingSupercopyUri();
                        delete fieldsValues['RecordDateCreated'];
                    }
                    if (me.keepCheckedOut()) {
                        fieldsValues['keepBookedOut'] = true;
                    }
                    if (me.defaultClassification != undefined && me.classificationField == undefined) {
                        fieldsValues['RecordClassification'] = me.defaultClassification;
                    }
                    if (!me.dateCreatedField) {
                        if (me.droppedFielIsEmailType !== true) {
                            fieldsValues['RecordDateCreated'] = me.dateCreatedFromDocument;
                        }
                    }
                    if (me.manualNumberingRequired) {
                        if (me.recordLongNumber != undefined) {
                            fieldsValues["RecordLongNumber"] = me.recordLongNumber;
                        }
                        else {
                            fieldsValues["RecordLongNumber"] = me.recordLastNumber;
                        }
                        fieldsValues["FailOnWarnings"] = "true";
                    }
                    _super.prototype.dispatchForm.call(this, fieldsValues);
                };
                RecordDataEntryForm.prototype.configureFileUploader = function () {
                    var _this = this;
                    var me = this;
                    var fup = null;
                    if (_.isFunction(this.fileUploadProvider)) {
                        fup = this.fileUploadProvider();
                    }
                    else {
                        return;
                    }
                    if (fup) {
                        this.fileUploader = fup;
                    }
                    else {
                        return;
                    }
                    this.fileUploader.clearForm();
                    this.fileUploader.uploadedFiles([]);
                    this.fileUploader.files([]);
                    this.oldFileName = "";
                    this.fileUploader.files.subscribe(function (oldValue) {
                        if (!oldValue) {
                            return;
                        }
                        if (oldValue.length > 0) {
                            me.oldFileName = oldValue[0].name;
                            if (me.oldFileName.lastIndexOf('.') != -1) {
                                me.oldFileName = me.oldFileName.substr(0, me.oldFileName.lastIndexOf('.'));
                            }
                        }
                    }, me, "beforeChange");
                    this.fileUploader.files.subscribe(function (newValue) {
                        if (!newValue) {
                            return;
                        }
                        if (newValue.length > 0) {
                            var dropFileName = newValue[0].name;
                            dropFileName = dropFileName.toLocaleLowerCase();
                            var dropFileExtension = dropFileName.split('.').pop();
                            _this.droppedFielIsEmailType = false;
                            if (dropFileExtension == "msg" ||
                                dropFileExtension == "vmbx" ||
                                dropFileExtension == "mbx" ||
                                dropFileExtension == "eml") {
                                _this.droppedFielIsEmailType = true;
                            }
                        }
                        if (newValue[0]) {
                            if (newValue[0].lastModifiedDate) {
                                var dateLastModified = moment(newValue[0].lastModifiedDate);
                                me.dateCreatedFromDocument = dateLastModified.toISOString();
                            }
                        }
                        if (me.dateCreatedField) {
                            if (newValue.length > 0) {
                                if (newValue[0].lastModifiedDate) {
                                    me.dateCreatedField.setByDateTime(newValue[0].lastModifiedDate);
                                }
                            }
                            else {
                                var dt = new Date();
                                me.dateCreatedField.setByDateTime(dt);
                            }
                            if (!me.currentUserHasRightToChangeDateCreated && me.droppedFielIsEmailType) {
                                me.dateCreatedField.enabled(false);
                                me.dateCreatedField.hide(true);
                            }
                            else {
                                me.dateCreatedField.enabled(true);
                                me.dateCreatedField.hide(false);
                            }
                        }
                        var titleVal;
                        var isIEBrowser = window['ActiveXObject'] !== undefined ? true : false;
                        if (isIEBrowser) {
                            if (_this.freeTextTitle) {
                                titleVal = $("#" + _this.freeTextTitle.Id).val();
                            }
                        }
                        else if (_this.titleDecorator) {
                            if (_this.titleDecorator.getValueEx() != undefined) {
                                titleVal = _this.titleDecorator.getValueEx().displayValue;
                            }
                            else {
                                _this.errorMessages.push(HP.HPTRIM.Messages.web_recordTitleMustBeEntered);
                                return false;
                            }
                        }
                        else if (_this.freeTextTitle && _this.freeTextTitle.Value()) {
                            titleVal = _this.freeTextTitle.Value();
                        }
                        else if (_this.recordTitleDecorator != undefined) {
                            titleVal = _this.recordTitleDecorator.Value();
                        }
                        if (titleVal != undefined) {
                            if (titleVal.NameString != undefined) {
                                titleVal = titleVal.NameString;
                            }
                            me.titleString(titleVal);
                            if (me.titleString() == null || me.titleString() == "" || me.titleString() == me.oldFileName) {
                                if (newValue.length > 0) {
                                    var newFileName = newValue[0].name;
                                    if (newFileName.lastIndexOf('.') != -1) {
                                        newFileName = newFileName.substr(0, newFileName.lastIndexOf('.'));
                                    }
                                    me.titleString(newFileName);
                                }
                                else {
                                    me.titleString("");
                                }
                                if (me.titleDecorator) {
                                    me.titleDecorator.Value(me.titleString());
                                }
                                else if (me.freeTextTitle) {
                                    me.freeTextTitle.Value(me.titleString());
                                }
                                else if (me.recordTitleDecorator != undefined) {
                                    me.recordTitleDecorator.Value(me.titleString());
                                }
                            }
                        }
                        else {
                        }
                    });
                    if (HPRMWebConfig.delayUploadedFileTransferTime > 0) {
                        this.fileUploader.onPostXhrLoad = function () {
                            _this.submitEnabled(false);
                            var strFileScanInProgress = HP.HPTRIM.Messages.web_fileScanningInProgress;
                            _this.fileUploader.statusMessage();
                            var uploadedFile = _this.fileUploader.uploadedFiles()[0];
                            var fullFilePath = uploadedFile.FullUploadedFileName;
                            var fileName = uploadedFile.OriginalFileName;
                            setTimeout(function () {
                                HP.HPTRIM.MessageService.WebHub.s_service.server.checkFileExist(fullFilePath).done(function (exist) {
                                    _this.submitEnabled(true);
                                    if (exist) {
                                        var strFileScanCompleted = HP.HPTRIM.Messages.web_fileScanningCompleted;
                                        _this.fileUploader.statusMessage();
                                    }
                                    else {
                                        var message = HP.HPTRIM.Messages.web_fileNotFound;
                                        var fileNotFound = HP.HPTRIM.Utils.String.format(message, [fileName]);
                                        _this.fileUploader.statusMessage(fileNotFound);
                                    }
                                });
                            }, HPRMWebConfig.delayUploadedFileTransferTime);
                        };
                    }
                };
                RecordDataEntryForm.prototype.refreshEnclosedInsideContainer = function () {
                    var me = this;
                    if (me.enclosedField) {
                        if (me.containerField) {
                            if (me.enclosedField['Value']() == true) {
                                var rVal = me.containerField.getRawValue();
                                if (rVal != null && rVal.trim().length > 0) {
                                    me.enclosedInsideContainer = true;
                                    return;
                                }
                            }
                        }
                    }
                    me.enclosedInsideContainer = false;
                };
                RecordDataEntryForm.prototype.refreshEnClosedField = function () {
                    var me = this;
                    if (me.enclosedField != undefined) {
                        if (me.containerBeingSet()) {
                            var enclo = me.enclosedField;
                            me.enclosedField.Value(enclo.defaultValue);
                            me.enclosedField['fieldDisabled'](false);
                        }
                        else {
                            me.enclosedField.Value(false);
                            me.enclosedField['fieldDisabled'](true);
                            me.enclosedField['tipText'](HP.HPTRIM.Messages.web_whyEnclosedFieldisIsDisabled);
                        }
                    }
                };
                RecordDataEntryForm.prototype.configureEnclosedRule = function () {
                    var me = this;
                    if (me.enclosedField) {
                        if (me.containerField) {
                            me.containerField.fieldObject.ParentForm = me;
                            var rVal = me.containerField.getRawValue();
                            if (rVal != null && rVal.trim().length > 0) {
                                me.containerBeingSet(true);
                            }
                            else {
                                me.containerBeingSet(false);
                            }
                        }
                        else {
                            var search = new HPTRIM.TrimMainObjectSearch(this.trimClient, HPTRIM.BaseObjectTypes.Record);
                            search.setProperties(["RecordContainer"]);
                            search.setSearchString("uri:" + me.editingObjectUri);
                            search.page().done(function (result) {
                                if (result.Results.length > 0) {
                                    if (result.Results[0].RecordContainer != undefined) {
                                        me.containerBeingSet(true);
                                    }
                                    else {
                                        me.containerBeingSet(false);
                                    }
                                }
                            }).fail(function (result) {
                                me.containerBeingSet(false);
                            });
                        }
                    }
                    me.refreshEnClosedField();
                    me.refreshEnclosedInsideContainer();
                };
                RecordDataEntryForm.prototype.configureHomeAndContainerRule = function () {
                    var me = this;
                    if (this.containerField) {
                        this.containerField.on({
                            keypress: function () {
                                if (me.containerField.getRawValue().trim() == "") {
                                    if (me.homeField) {
                                        me.homeField.enable(true);
                                        me.homeField.setRawValue("");
                                    }
                                    if (me.enclosedField) {
                                        me.enclosedField['enable'](false);
                                    }
                                }
                                else {
                                    if (me.homeField) {
                                        me.homeField.enable(false);
                                        me.homeField.isEditing(false);
                                        me.homeField.setValue(null);
                                    }
                                    if (me.enclosedField) {
                                        me.enclosedField['enable'](true);
                                    }
                                }
                            },
                            afterItemClicked: function (context, item) {
                                if (me.homeField) {
                                    me.homeField.setRawValue(HP.HPTRIM.Messages.web_incontainerColon + " <" + item.displayValue + ">");
                                    me.homeField.enable(false);
                                    me.homeField.isEditing(false);
                                }
                            }
                        });
                        if (me.homeField) {
                            if (me.containerField.getRawValue() !== "") {
                                setTimeout(function () {
                                    me.homeField.enable(false);
                                    me.homeField.isEditing(false);
                                    me.homeField.setRawValue(HP.HPTRIM.Messages.web_incontainerColon + " <" + me.containerField.getRawValue() + ">");
                                }, 400);
                            }
                        }
                    }
                    me.refreshEnclosedInsideContainer();
                };
                RecordDataEntryForm.prototype.configureDefaultRetentionFromClassification = function () {
                    var me = this;
                    if (this.retentionScheduleField && this.classificationField) {
                        this.retentionScheduleField.value.subscribe(function (value) {
                            me.scheduleUpdatedByUser = true;
                        });
                        this.classificationField.value.subscribe(function (value) {
                            if (value && value["RetentionSchedule"]) {
                                if (!me.scheduleUpdatedByUser) {
                                    var rawSchedule = value["RetentionSchedule"];
                                    var displayString = rawSchedule.Uri;
                                    if (rawSchedule.ScheduleTitle && rawSchedule.ScheduleTitle.Value) {
                                        displayString = rawSchedule.ScheduleName.Value;
                                    }
                                    var scheduleObject = new HPTRIM.TrimBaseObject(rawSchedule.TrimType, rawSchedule.Uri, displayString);
                                    me.retentionScheduleField.setValue(scheduleObject);
                                    me.scheduleUpdatedByUser = false;
                                }
                            }
                        });
                    }
                };
                RecordDataEntryForm.prototype.configureEnclosedAndAssigneeRule = function () {
                    var me = this;
                    if (this.enclosedField) {
                        this.enclosedField['Value'].subscribe(function (value) {
                            if (me.assigneeField) {
                                if (value) {
                                    if (me.containerField) {
                                        me.assigneeField.setValue(me.containerField.getValue());
                                    }
                                    me.assigneeField.enable(false);
                                }
                                else {
                                    me.assigneeField.enable(true);
                                    me.assigneeField.isEditing(true);
                                    if (me.containerField) {
                                        if (me.containerField.getValue() != undefined) {
                                            me.assigneeField.setRawValue("");
                                        }
                                    }
                                }
                                me.assigneeField.error('');
                                me.assigneeField.errorMessage('');
                            }
                            if (me.homeField) {
                                if (value) {
                                    if (me.containerField) {
                                        me.homeField.setValue(me.containerField.getValue());
                                    }
                                    me.homeField.enable(false);
                                }
                                else {
                                    me.homeField.enable(true);
                                    me.homeField.isEditing(true);
                                    if (me.containerField) {
                                        if (me.containerField.getValue() != undefined) {
                                            me.homeField.setRawValue("");
                                        }
                                    }
                                }
                                me.homeField.error('');
                                me.homeField.errorMessage('');
                            }
                        });
                    }
                    if (me.enclosedField && me.assigneeField) {
                        if (me.enclosedField['Value']() == true) {
                            setTimeout(function () {
                                me.assigneeField.enable(false);
                                me.assigneeField.isEditing(false);
                                me.assigneeField.setRawValue(HP.HPTRIM.Messages.web_incontainerColon + " <" + me.containerField.getRawValue() + ">");
                            }, 400);
                        }
                    }
                    me.refreshEnclosedInsideContainer();
                };
                RecordDataEntryForm.prototype.setDefaultClassification = function () {
                    if (this.classificationField && this.defaultClassification) {
                        this.classificationField.enable(true);
                        this.classificationField.isEditing(true);
                        this.classificationField.setValue(this.defaultClassification);
                    }
                };
                RecordDataEntryForm.prototype.configureClassificationRule = function () {
                    var me = this;
                    if (this.classificationField) {
                        this.classificationField.on({
                            afterItemClicked: function (context, item) {
                                if (me.accessControlField) {
                                    var data = item["DefaultAccessControlList"].FunctionProfiles;
                                    if (me.is_editing) {
                                        _.each(data, function (temp) {
                                            if (temp.ReferenceStyle === "RefCopy" || temp.ReferenceStyle === "RefOnly") {
                                                var aclSelector = new HP.HPTRIM.Field.AccessControlValueSelector(temp);
                                                var index = me.accessControlField.accessControlTypes().indexOf(ko.utils.arrayFirst(me.accessControlField.accessControlTypes(), function (temp2) {
                                                    return temp.Caption === temp2.Caption;
                                                }));
                                                me.accessControlField.accessControlTypes.replace(me.accessControlField.accessControlTypes()[index], aclSelector);
                                            }
                                        });
                                    }
                                    else {
                                        _.each(data, function (temp) {
                                            if (temp.ReferenceStyle === "NoRefCopy" || temp.ReferenceStyle === "RefCopy") {
                                                var aclSelector = new HP.HPTRIM.Field.AccessControlValueSelector(temp);
                                                var index = me.accessControlField.accessControlTypes().indexOf(ko.utils.arrayFirst(me.accessControlField.accessControlTypes(), function (temp2) {
                                                    return temp.Caption == temp2.Caption;
                                                }));
                                                me.accessControlField.accessControlTypes.replace(me.accessControlField.accessControlTypes()[index], aclSelector);
                                            }
                                        });
                                    }
                                }
                            }
                        });
                    }
                };
                RecordDataEntryForm.prototype.setPropertiesForRecordTypeRequest = function () {
                    var me = this;
                    var fieldsValues = { Fields: {} };
                    fieldsValues["Uri"] = this.recordUri;
                    fieldsValues["RecordTypeName"] = this.forRecordType.jsonObject["RecordTypeName"].Value;
                    fieldsValues["RecordTypeLastNumber"] = this.recordLongNumber;
                    if (me.forRecordType) {
                        fieldsValues['RecordRecordType'] = me.forRecordType;
                    }
                };
                RecordDataEntryForm.prototype.mandatoryFieldCheck = function () {
                    var me = this;
                    var mandatoryFieldCheckFailed = false;
                    var pages = me.formDefinition().Pages;
                    _.each(pages, function (page) {
                        _.each(page.PageItems, function (pageItem) {
                            if (pageItem.getMandatoryOption() == HP.HPTRIM.Form.FieldMandaoryOption.Mandatory && pageItem.Value() == "") {
                                mandatoryFieldCheckFailed = true;
                            }
                        });
                    });
                    return mandatoryFieldCheckFailed;
                };
                RecordDataEntryForm.prototype.validate = function () {
                    this.errorMessages = [];
                    var isValidationOk = true;
                    if (this.checkTitle() == false) {
                        isValidationOk = false;
                    }
                    if (this.assigneeFieldCheck() == false) {
                        isValidationOk = false;
                    }
                    if (this.datesOk() == false) {
                        isValidationOk = false;
                    }
                    return isValidationOk;
                };
                RecordDataEntryForm.prototype.datesOk = function () {
                    var datesOk = true;
                    var me = this;
                    _.each(this.formDefinition().Pages, function (page) {
                        _.each(page.PageItems, function (pageItem) {
                            if (pageItem.isDisable()) {
                                return;
                            }
                            if (pageItem.Format == "Date" || pageItem.Format == "Datetime") {
                                var dateItem = pageItem;
                                if (!dateItem.mandatoryTimeSupplied()) {
                                    me.errorMessages.push(pageItem.Caption + " " + HP.HPTRIM.Messages.web_pleaseEnterTime);
                                    datesOk = false;
                                }
                            }
                        });
                    });
                    return datesOk;
                };
                RecordDataEntryForm.prototype.assigneeFieldCheck = function () {
                    if (this.assigneeField) {
                        if (this.assigneeField.isEnabled() == false) {
                            return true;
                        }
                        if (this.assigneeField.getRawValue().trim() == "") {
                            this.errorMessages.push(HP.HPTRIM.Messages.core_fieldBlank.replace("{0}", HP.HPTRIM.Messages.web_assignee));
                            return false;
                        }
                    }
                };
                RecordDataEntryForm.prototype.setFileDropDefaultContainerFor = function () {
                    if (this.fileDropped()) {
                        var defContainer = this.trimClient.getFileDropDefaultContainer();
                        if (defContainer != null) {
                            if (this.containerField) {
                                this.containerField.setValue(defContainer);
                            }
                        }
                    }
                };
                RecordDataEntryForm.prototype.checkTitle = function () {
                    var isTitleOk = true;
                    var titleVal = "";
                    if (this.titleDecorator) {
                        if (this.titleDecorator.getValueEx() != undefined) {
                            titleVal = this.titleDecorator.getValueEx().displayValue;
                        }
                        else {
                            this.errorMessages.push(HP.HPTRIM.Messages.web_recordTitleMustBeEntered);
                            return false;
                        }
                    }
                    else if (this.freeTextTitle) {
                        titleVal = this.freeTextTitle.Value();
                    }
                    else if (this.recordTitleDecorator) {
                        titleVal = this.recordTitleDecorator.Value();
                    }
                    if (titleVal && titleVal.NameString != undefined) {
                        titleVal = titleVal.NameString;
                    }
                    if (titleVal && titleVal.length > 254) {
                        this.errorMessages.push(HP.HPTRIM.Messages.web_recordTitleMaximumLengthIs254);
                        isTitleOk = false;
                    }
                    if (titleVal && titleVal.trim().length == 0) {
                        this.errorMessages.push(HP.HPTRIM.Messages.web_recordTitleMustBeEntered);
                        isTitleOk = false;
                    }
                    var stripedOfNewLine = "";
                    if (titleVal) {
                        stripedOfNewLine = this.removeLineBreak(titleVal);
                    }
                    if (this.titleDecorator) {
                        this.titleDecorator.Value(stripedOfNewLine);
                    }
                    else if (this.freeTextTitle) {
                        this.freeTextTitle.Value(stripedOfNewLine);
                    }
                    else if (this.recordTitleDecorator) {
                        this.recordTitleDecorator.Value(stripedOfNewLine);
                    }
                    return isTitleOk;
                };
                RecordDataEntryForm.prototype.removeLineBreak = function (value) {
                    return value.replace(/(\r\n|\n|\r)/gm, "");
                };
                RecordDataEntryForm.prototype.submitCheckRecordNumber = function () {
                    var me = this;
                    me.manualNumberingHandler(me.recordDataEntryPanel);
                };
                return RecordDataEntryForm;
            }(Form.DataEntryForm));
            Form.RecordDataEntryForm = RecordDataEntryForm;
        })(Form = HPTRIM.Form || (HPTRIM.Form = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var Form;
        (function (Form) {
            var LocationDataEntryForm = (function (_super) {
                __extends(LocationDataEntryForm, _super);
                function LocationDataEntryForm(trimClient, formDefinition, locationType) {
                    _super.call(this, trimClient, formDefinition, null, HPTRIM.BaseObjectTypes.Location);
                    this.typeOfLocation = locationType.value;
                    this.titlePlaceHolder = HP.HPTRIM.Messages.core_new + ' ' + locationType.caption;
                }
                LocationDataEntryForm.prototype.getFieldsValue = function () {
                    var keyValue = this.getLocationFormValue();
                    if (this.typeOfLocation && this.typeOfLocation.value) {
                        keyValue['LocationTypeOfLocation'] = this.typeOfLocation.value;
                    }
                    else {
                        keyValue['LocationTypeOfLocation'] = this.typeOfLocation;
                    }
                    keyValue['properties'] = 'Icon';
                    return keyValue;
                };
                LocationDataEntryForm.prototype.submit = function () {
                    var me = this;
                    if (this.validate() === false) {
                        var errorMessage = this.getErrorList();
                        this.setError(errorMessage);
                        this.submitEnabled(true);
                        return;
                    }
                    var fieldsValues = this.getFieldsValue();
                    var LH = fieldsValues["LocationHonorific"];
                    var lenLimit = 0;
                    var fdName = "";
                    var path = 'PropertyDef?TrimType=Location&GetProperties=LocationHonorific';
                    me.trimClient.doGet(path, null, "json", true).done(function (result) {
                        var o = result.PropertiesAndFields;
                        lenLimit = o[0].Property.Length;
                        fdName = o[0].Caption;
                    }).fail(function (errorResponse) {
                        var errorMsg = HP.HPTRIM.Messages.web_unableToConnectToWebServices;
                        if (errorResponse.responseJSON && errorResponse.responseJSON.ResponseStatus && errorResponse.responseJSON.ResponseStatus.Message) {
                            errorMsg = errorResponse.responseJSON.ResponseStatus.Message;
                        }
                        ko.postbox.publish(HPTRIM.App.TRIMApp.NOTIFICATION_ERROR_TOPIC, errorMsg);
                    });
                    if (LH != undefined) {
                        if (lenLimit < LH.length) {
                            var msg = HP.HPTRIM.Messages.prp_propertyStringTooLong;
                            msg = msg.replace("{0}", fdName.toString());
                            msg = msg.replace("{1}", lenLimit.toString());
                            me.setError(msg);
                            this.submitEnabled(true);
                            return;
                        }
                    }
                    _super.prototype.dispatchForm.call(this, fieldsValues);
                };
                LocationDataEntryForm.prototype.getLocationFormValue = function () {
                    var keyValue = {};
                    var pages = this.formDefinition().Pages;
                    _.each(pages, function (page) {
                        if (page.Type == 'Notes') {
                            keyValue["LocationNotes"] = page.getValue();
                            return;
                        }
                        if (page.Type == "LocationAddress") {
                            Form.DataEntryForm.getLocationAddresses(page, keyValue);
                            return;
                        }
                        _.each(page.PageItems, function (pageItem) {
                            if (pageItem.Name) {
                                var value = pageItem.getValueEx();
                                var propertyName = pageItem.Name;
                                if (pageItem.Name == "LocationAccessControl") {
                                    keyValue["AccessControlList"] = value;
                                    return;
                                }
                                if (_.isObject(value)) {
                                    if (value.Uri == -1 || value.Uri == 0 || value.Uri === undefined)
                                        return;
                                }
                                keyValue[pageItem.Name] = value;
                            }
                        });
                    });
                    return keyValue;
                };
                return LocationDataEntryForm;
            }(Form.DataEntryForm));
            Form.LocationDataEntryForm = LocationDataEntryForm;
        })(Form = HPTRIM.Form || (HPTRIM.Form = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var Form;
        (function (Form) {
            var AdditionalValueEditForm = (function (_super) {
                __extends(AdditionalValueEditForm, _super);
                function AdditionalValueEditForm(trimClient, formDefinition, allDefinitions) {
                    _super.call(this, trimClient, formDefinition, null, HPTRIM.BaseObjectTypes.FieldDefinition);
                    this.allAdditionalFields = ko.observableArray([]);
                    this.allAdditionalFields(allDefinitions());
                    this.titlePlaceHolder = "Set value for additional field";
                }
                AdditionalValueEditForm.prototype.getFieldValue = function () {
                    var field = this.formDefinition().Pages[0].PageItems[0];
                    var value = field.Value();
                    if (field.Format == "Datetime" || field.Format == "Date") {
                        value = field.getValueEx();
                    }
                    return value;
                };
                AdditionalValueEditForm.prototype.getFieldName = function () {
                    return this.formDefinition().Pages[0].PageItems[0].name;
                };
                AdditionalValueEditForm.prototype.submit = function () {
                    var me = this;
                    if (me.validate() === false) {
                        var errorMessage = this.getErrorList();
                        me.setError(errorMessage);
                        me.submitEnabled(true);
                        return;
                    }
                    var fieldValue = me.getFieldValue();
                    var fieldName = me.getFieldName();
                    if (fieldValue != undefined) {
                        _.each(me.allAdditionalFields(), function (recordAdditionalField) {
                            if (recordAdditionalField.name == fieldName) {
                                recordAdditionalField.value = fieldValue;
                            }
                        });
                    }
                };
                AdditionalValueEditForm.prototype.getLocationFormValue = function () {
                    var keyValue = {};
                    var pages = this.formDefinition().Pages;
                    _.each(pages, function (page) {
                        if (page.Type == 'Notes') {
                            keyValue["LocationNotes"] = page.getValue();
                            return;
                        }
                        if (page.Type == "LocationAddress") {
                            Form.DataEntryForm.getLocationAddresses(page, keyValue);
                            return;
                        }
                        _.each(page.PageItems, function (pageItem) {
                            if (pageItem.Name) {
                                var value = pageItem.getValueEx();
                                var propertyName = pageItem.Name;
                                if (pageItem.Name == "LocationAccessControl") {
                                    keyValue["AccessControlList"] = value;
                                    return;
                                }
                                if (_.isObject(value)) {
                                    if (value.Uri == -1 || value.Uri == 0 || value.Uri === undefined)
                                        return;
                                }
                                keyValue[pageItem.Name] = value;
                            }
                        });
                    });
                    return keyValue;
                };
                return AdditionalValueEditForm;
            }(Form.DataEntryForm));
            Form.AdditionalValueEditForm = AdditionalValueEditForm;
        })(Form = HPTRIM.Form || (HPTRIM.Form = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var Form;
        (function (Form) {
            var DecoratorFactory = (function () {
                function DecoratorFactory() {
                }
                DecoratorFactory.makeNotesPage = function (trimClient, notesPage, forObjectUri, baseObjectType) {
                    var decorator = new Form.NotesPageDecorator(trimClient, forObjectUri, baseObjectType);
                    $.extend(notesPage, decorator);
                    notesPage.Id = notesPage.Type;
                    return notesPage;
                };
                DecoratorFactory.makeClientMatterPartiesPage = function (trimClient, page, forObjectUri) {
                    var decorator = new Form.ClientMatterPartiesPageDecorator(trimClient, forObjectUri);
                    $.extend(page, decorator);
                    page.Id = page.Type;
                    return page;
                };
                DecoratorFactory.makeClientMatterRolesPage = function (trimClient, page, forObjectUri) {
                    var decorator = new Form.ClientMatterRolesPageDecorator(trimClient, forObjectUri);
                    $.extend(page, decorator);
                    page.Id = page.Type;
                    return page;
                };
                DecoratorFactory.makeLocationAddressPage = function (trimClient, page, hideReadOnlyFields, forObjectUri, extraData) {
                    var pageItems = page.PageItems;
                    page.StreetAddress = pageItems.slice(0, 7);
                    page.StreetAddress[0].Readonly = true;
                    page.StreetAddress[0].Value("Street");
                    page.StreetAddress[1].Value("");
                    page.StreetAddress[2].Value("");
                    page.StreetAddress[3].Value("");
                    page.StreetAddress[4].Value("");
                    page.StreetAddress[5].Value("");
                    page.StreetAddress[6].Value("");
                    page.MailAddress = pageItems.slice(7, 14);
                    page.MailAddress[0].Readonly = true;
                    page.MailAddress[0].Value("Postal");
                    page.MailAddress[1].Value("");
                    page.MailAddress[2].Value("");
                    page.MailAddress[3].Value("");
                    page.MailAddress[4].Value("");
                    page.MailAddress[5].Value("");
                    page.MailAddress[6].Value("");
                    if (extraData && extraData.ChildAddresses) {
                        _.each(extraData.ChildAddresses, function (childAddress) {
                            if (childAddress.LocationAddressIsCurrent === true || (childAddress.LocationAddressIsCurrent && childAddress.LocationAddressIsCurrent.Value === true)) {
                                if (childAddress.LocationAddressAddressType && childAddress.LocationAddressAddressType.Value == "Street") {
                                    page.StreetAddress[1].Value(childAddress.LocationAddressAddressLines ? childAddress.LocationAddressAddressLines.Value : "");
                                    page.StreetAddress[2].Value(childAddress.LocationAddressCity ? childAddress.LocationAddressCity.Value : "");
                                    page.StreetAddress[3].Value(childAddress.LocationAddressState ? childAddress.LocationAddressState.Value : "");
                                    page.StreetAddress[4].Value(childAddress.LocationAddressPostcode ? childAddress.LocationAddressPostcode.Value : "");
                                    page.StreetAddress[5].Value(childAddress.LocationAddressRegion ? childAddress.LocationAddressRegion.Value : "");
                                    page.StreetAddress[6].Value(childAddress.LocationAddressCountry ? childAddress.LocationAddressCountry.Value : "");
                                    page.StreetUri = childAddress.Uri;
                                }
                                else if (childAddress.LocationAddressAddressType && childAddress.LocationAddressAddressType.Value == "Postal") {
                                    page.MailAddress[1].Value(childAddress.LocationAddressAddressLines ? childAddress.LocationAddressAddressLines.Value : "");
                                    page.MailAddress[2].Value(childAddress.LocationAddressCity ? childAddress.LocationAddressCity.Value : "");
                                    page.MailAddress[3].Value(childAddress.LocationAddressState ? childAddress.LocationAddressState.Value : "");
                                    page.MailAddress[4].Value(childAddress.LocationAddressPostcode ? childAddress.LocationAddressPostcode.Value : "");
                                    page.MailAddress[5].Value(childAddress.LocationAddressRegion ? childAddress.LocationAddressRegion.Value : "");
                                    page.MailAddress[6].Value(childAddress.LocationAddressCountry ? childAddress.LocationAddressCountry.Value : "");
                                    page.MailUri = childAddress.Uri;
                                }
                            }
                        });
                    }
                    page.PageItems = [];
                    page.PageItems = page.PageItems.concat(page.StreetAddress);
                    page.PageItems.push(new Form.LineDecorator());
                    page.PageItems = page.PageItems.concat(page.MailAddress);
                    return page;
                };
                DecoratorFactory.makeKeywordPage = function (trimClient, page, forObjectUri) {
                    var decorator = new HP.HPTRIM.Form.KeywordPageDecorator(trimClient, forObjectUri);
                    $.extend(page, decorator);
                    page.Id = page.Type;
                    return page;
                };
                DecoratorFactory.makeErrorItem = function (trimClient, pageItem) {
                    pageItem.Value = ko.observable(pageItem.ErrorMessage);
                    pageItem.Type = "String";
                    pageItem.Readonly = true;
                    var decorator = this.determineDecoratorByFormat(trimClient, pageItem);
                    $.extend(pageItem, decorator);
                    return pageItem;
                };
                DecoratorFactory.make = function (trimClient, pageItem, isForm) {
                    if (!ko.isObservable(pageItem.Value)) {
                        pageItem.Value = ko.observable(pageItem.Value);
                    }
                    var decorator = this.determineDecoratorByType(trimClient, pageItem, isForm);
                    if (decorator != null) {
                        return $.extend(pageItem, decorator);
                    }
                    decorator = this.determineDecoratorByFormat(trimClient, pageItem, isForm);
                    $.extend(pageItem, decorator);
                    return pageItem;
                };
                DecoratorFactory.determineDecoratorByType = function (trimClient, pageItem, isForm) {
                    var decorator = null, type = pageItem.Type;
                    switch (type) {
                        case "Line":
                            decorator = new Form.LineDecorator();
                            break;
                        case "ThinLine":
                            decorator = new Form.ThinLineDecorator();
                            break;
                        case "Field":
                            decorator = new Form.AdditionalFieldDecorator(trimClient, pageItem, isForm);
                            break;
                        case "NameOnlyField":
                            decorator = new Form.FieldNameOnlyDecorator(trimClient, pageItem, isForm);
                    }
                    return decorator;
                };
                DecoratorFactory.determineDecoratorByFormat = function (trimClient, pageItem, isForm) {
                    var format = pageItem.Format, decorator = null;
                    switch (format) {
                        case "Object":
                            {
                                decorator = new Form.TrimObjectDecorator(trimClient, pageItem);
                                decorator['resultExpansionOverlay'] = true;
                                decorator.controlContainerId = pageItem.Name;
                            }
                            break;
                        case "Datetime":
                        case "Date":
                            {
                                var dateFormat = trimClient.getDateFormat();
                                if (isForm) {
                                    decorator = new Form.DateRangeDecorator(trimClient, pageItem, dateFormat);
                                }
                                else {
                                    decorator = new Form.DateDecorator(pageItem, dateFormat);
                                }
                            }
                            break;
                        case "DateRange":
                            {
                                decorator = new Form.DateRangeDecorator(trimClient, pageItem);
                            }
                            break;
                        case "Geography":
                            {
                                decorator = new Form.GeographyDecorator(trimClient, pageItem);
                            }
                            break;
                        case "PlainText":
                            {
                                decorator = new Form.PlainTextDecorator(pageItem);
                            }
                            break;
                        case "Text":
                        case "String":
                        case "ChildList":
                        case "Uri":
                        case "Batch":
                        case "Freetext":
                            {
                                if (pageItem.Name == "RecordNotes") {
                                    pageItem.CharacterLimit = 250;
                                }
                                decorator = new Form.StringDecorator(pageItem, null, trimClient);
                                if (pageItem.Name == "RecordSecurity") {
                                    decorator = new Form.RecordSecurityDecorator(trimClient, pageItem);
                                }
                                if (pageItem.Name == "RecordGeneratedTitle") {
                                    decorator = new Form.ThesaurusTitleDecorator(trimClient, pageItem);
                                }
                                if (pageItem.Name == "RecordAccessControl" || pageItem.Name == "LocationAccessControl") {
                                    decorator = new Form.RecordAccessControlDecorator(pageItem);
                                }
                                if (pageItem.Name == "RecordJurisdictions") {
                                    pageItem.ObjectType = "Jurisdiction";
                                    decorator = new Form.TrimObjectDecorator(trimClient, pageItem);
                                    decorator.template = "templates/Field/MultiTreeItemPicker";
                                }
                                if (pageItem.Name == "CheckinStyleSecurity") {
                                    decorator = new HP.HPTRIM.Field.CheckinStyleSecurity(trimClient, pageItem);
                                    if (!decorator.Caption) {
                                        decorator.Caption = pageItem.Caption;
                                    }
                                }
                                if ((pageItem.Format == "String" || pageItem.Format == "Text") && pageItem.LookupValues && pageItem.LookupValues.length > 0) {
                                    decorator = new Form.TrimObjectDecorator(trimClient, pageItem);
                                    decorator['resultExpansionOverlay'] = true;
                                    decorator.controlContainerId = pageItem.Name;
                                }
                            }
                            break;
                        case "Boolean":
                            {
                                decorator = new Form.BooleanDecorator(pageItem);
                                decorator['enable'] = !decorator.isDisable();
                            }
                            break;
                        case "Currency":
                            {
                                pageItem.CurrencySymbol = trimClient.CurrencySymbol;
                                pageItem.CurrencyDecimalDigits = trimClient.CurrencyDecimalDigits;
                                if (isForm == true) {
                                    decorator = new HP.HPTRIM.Form.CurrencyRangeDecorator(pageItem);
                                }
                                else {
                                    decorator = new HP.HPTRIM.Form.CurrencyDecorator(pageItem);
                                }
                            }
                            break;
                        case "Number":
                            {
                                if (isForm == true) {
                                    decorator = new HP.HPTRIM.Form.NumberRangeDecorator(pageItem);
                                }
                                else {
                                    decorator = new Form.NumberDecorator(pageItem);
                                }
                            }
                            break;
                        case "BigNumber":
                            {
                                if (isForm == true) {
                                    decorator = new HP.HPTRIM.Form.BigNumberRangeDecorator(pageItem);
                                }
                                else {
                                    decorator = new Form.BigNumberDecorator(pageItem);
                                }
                            }
                            break;
                        case "Decimal":
                            {
                                if (isForm == true) {
                                    decorator = new HP.HPTRIM.Form.CurrencyRangeDecorator(pageItem);
                                }
                                else {
                                    decorator = new Form.DecimalDecorator(pageItem);
                                }
                            }
                            break;
                        case "Enum":
                            {
                                if (pageItem.EnumName == "Icons" && pageItem.Name == "UserLabelIconId") {
                                    decorator = new HP.HPTRIM.Form.SelectPickerEnumDecorator(trimClient, pageItem);
                                }
                                else {
                                    if (isForm) {
                                        if (pageItem.EnumItems) {
                                            if (pageItem.EnumItems[0].Name !== '') {
                                                pageItem.EnumItems.unshift({ Caption: '', Name: '' });
                                                pageItem.Value('');
                                            }
                                        }
                                    }
                                    decorator = new HP.HPTRIM.Form.EnumDecorator(trimClient, pageItem);
                                    if (!pageItem.EnumItems) {
                                        var comboBox = HP.HPTRIM.Field.TrimEnumComboBoxFactory.makeComboBox(trimClient, pageItem.EnumName);
                                        comboBox.enumName = pageItem.EnumName;
                                        comboBox.Caption = pageItem.Caption;
                                        decorator = $.extend(decorator, comboBox);
                                    }
                                    if (isForm) {
                                    }
                                }
                            }
                            break;
                        case "Freetext":
                        case "Word":
                            {
                                decorator = new Form.WordDecorator(pageItem);
                            }
                            break;
                        default:
                            {
                                decorator = new Form.StringDecorator(pageItem);
                            }
                    }
                    if (decorator == null) {
                        throw "Format not found :" + pageItem;
                    }
                    return decorator;
                };
                return DecoratorFactory;
            }());
            Form.DecoratorFactory = DecoratorFactory;
        })(Form = HPTRIM.Form || (HPTRIM.Form = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var Form;
        (function (Form) {
            var Search;
            (function (Search) {
                var SearchClauseDecorator = (function () {
                    function SearchClauseDecorator(searchClause) {
                        this.template = ko.observable("templates/Form/ParameterisedSearch/SearchClause");
                        searchClause.CriteriaString = ko.observable(searchClause.CriteriaString);
                        if (!this.field) {
                            this.field = new HP.HPTRIM.Form.StringDecorator({ Value: searchClause.CriteriaString, Caption: searchClause.ParameterCaption });
                        }
                    }
                    return SearchClauseDecorator;
                }());
                Search.SearchClauseDecorator = SearchClauseDecorator;
                var SearchClauseSummaryDecorator = (function () {
                    function SearchClauseSummaryDecorator(searchClause) {
                        this.template = ko.observable("templates/Form/ParameterisedSearch/SearchSummary");
                        $.extend(this, searchClause);
                    }
                    return SearchClauseSummaryDecorator;
                }());
                Search.SearchClauseSummaryDecorator = SearchClauseSummaryDecorator;
            })(Search = Form.Search || (Form.Search = {}));
        })(Form = HPTRIM.Form || (HPTRIM.Form = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var Form;
        (function (Form) {
            var Search;
            (function (Search) {
                var SearchBuilderDecoratorFactory = (function () {
                    function SearchBuilderDecoratorFactory() {
                    }
                    SearchBuilderDecoratorFactory.makeItemPicker = function (trimClient, searchClause) {
                        var itemPicker = undefined;
                        if (searchClause.ParameterFormat == "Object" && searchClause.Id !== "Acl") {
                            itemPicker = HP.HPTRIM.Utils.Form.makeItemPicker(trimClient, searchClause, true);
                        }
                        else if (searchClause.LookupSet && searchClause.Id !== "Acl") {
                            searchClause.ObjectTypeParameter = 'LookupItem';
                            var disabledMultiSelect = true;
                            if ((searchClause.ParameterFormat == 'Text')) {
                                disabledMultiSelect = false;
                            }
                            itemPicker = HP.HPTRIM.Utils.Form.makeItemPicker(trimClient, searchClause, disabledMultiSelect);
                        }
                        return itemPicker;
                    };
                    SearchBuilderDecoratorFactory.makeFieldDecorator = function (trimClient, searchClause) {
                        var currentField = undefined;
                        if (!searchClause.LookupSet) {
                            var format = searchClause.ParameterFormat;
                            if (searchClause.Id == "Uri") {
                                format = "String";
                            }
                            switch (format) {
                                case "Text":
                                case "String":
                                case "Freetext":
                                case "Word":
                                    {
                                        var dummyPageItem = {
                                            Caption: searchClause.Caption,
                                            Format: "String",
                                            Name: "",
                                            Value: ko.observable(null),
                                        };
                                        if (searchClause.ParameterFormat == "Text") {
                                            dummyPageItem.CharacterLimit = Form.StringDecorator.TEXT_AREA_SIZE;
                                        }
                                        var stringDecorator = new HP.HPTRIM.Form.StringDecorator(dummyPageItem);
                                        stringDecorator.submitPropertyName = searchClause.Name;
                                        currentField = stringDecorator;
                                    }
                                    break;
                                case "Date":
                                case "Datetime":
                                case "DateTime":
                                case "Daterange":
                                case "DateRange":
                                    {
                                        var dummyPageItem = {
                                            Caption: searchClause.Caption,
                                            Format: searchClause.ParameterFormat,
                                            Name: "",
                                            Value: ko.observable(null),
                                        };
                                        var datePicker = new HP.HPTRIM.Form.DateRangeDecorator(trimClient, dummyPageItem, trimClient.getDateFormat());
                                        datePicker.submitPropertyName = searchClause.Name;
                                        currentField = datePicker;
                                    }
                                    break;
                                case "Boolean":
                                    {
                                        var dummyPageItem = {
                                            Caption: searchClause.Caption,
                                            Format: "Boolean",
                                            Name: "",
                                            Value: ko.observable(null),
                                            enable: true
                                        };
                                        var boolPicker = new HP.HPTRIM.Form.InvisibleBooleanDecorator(dummyPageItem);
                                        boolPicker.submitPropertyName = searchClause.Name;
                                        boolPicker.Value(true);
                                        currentField = boolPicker;
                                    }
                                    break;
                                case "Enum":
                                    {
                                        var dummyPageItem = {
                                            Caption: searchClause.Caption,
                                            Format: "Enum",
                                            Name: ""
                                        };
                                        var lookupSetPicker = new HP.HPTRIM.Form.EnumDecorator(trimClient, dummyPageItem);
                                        var comboBox = HP.HPTRIM.Field.TrimEnumComboBoxFactory.makeComboBox(trimClient, searchClause.EnumTypeParameter);
                                        comboBox.enumName = searchClause.EnumTypeParameter;
                                        comboBox.Caption = searchClause.Caption;
                                        comboBox.getData();
                                        lookupSetPicker = $.extend(lookupSetPicker, comboBox);
                                        lookupSetPicker.submitPropertyName = searchClause.Name;
                                        lookupSetPicker.Caption = dummyPageItem.Caption;
                                        currentField = lookupSetPicker;
                                    }
                                    break;
                                case "Currency":
                                    {
                                        var dummyPageItem = {
                                            Caption: searchClause.Caption,
                                            Format: "Number",
                                            Name: "",
                                            Value: ko.observable(null),
                                        };
                                        var currencyDecorator = new HP.HPTRIM.Form.CurrencyRangeDecorator(dummyPageItem);
                                        currencyDecorator.submitPropertyName = searchClause.Name;
                                        currentField = currencyDecorator;
                                    }
                                    break;
                                case "Number":
                                    {
                                        var dummyPageItem = {
                                            Caption: searchClause.Caption,
                                            Format: "Number",
                                            Name: "",
                                            Value: ko.observable(null),
                                        };
                                        var numberDecorator = new HP.HPTRIM.Form.NumberRangeDecorator(dummyPageItem);
                                        numberDecorator.submitPropertyName = searchClause.Name;
                                        currentField = numberDecorator;
                                    }
                                    break;
                                case "BigNumber":
                                    {
                                        var dummyPageItem = {
                                            Caption: searchClause.Caption,
                                            Format: "Number",
                                            Name: "",
                                            Value: ko.observable(null),
                                        };
                                        var bigNumberDecorator = new HP.HPTRIM.Form.BigNumberRangeDecorator(dummyPageItem);
                                        bigNumberDecorator.submitPropertyName = searchClause.Name;
                                        currentField = bigNumberDecorator;
                                    }
                                    break;
                                case "Decimal":
                                    {
                                        var dummyPageItem = {
                                            Caption: searchClause.Caption,
                                            Format: "String",
                                            Name: "",
                                            Value: ko.observable(null),
                                        };
                                        var decimalDecorator = new HP.HPTRIM.Form.CurrencyRangeDecorator(dummyPageItem);
                                        decimalDecorator.submitPropertyName = searchClause.Name;
                                        currentField = decimalDecorator;
                                    }
                                    break;
                                case "Geography":
                                    {
                                        var dummyPageItem = {
                                            Caption: searchClause.Caption,
                                            Format: "Geography",
                                            Name: "",
                                            Value: ko.observable(null),
                                        };
                                        var geoDecorator = new HP.HPTRIM.Form.GeographyRangeDecorator(trimClient, dummyPageItem);
                                        geoDecorator.submitPropertyName = searchClause.Name;
                                        currentField = geoDecorator;
                                    }
                                    break;
                                case "Object":
                                    {
                                        if (searchClause.Id === "Acl") {
                                            var aclSearchField = new HP.HPTRIM.Form.AclSearchField(trimClient, searchClause);
                                            currentField = aclSearchField;
                                        }
                                    }
                            }
                        }
                        return currentField;
                    };
                    return SearchBuilderDecoratorFactory;
                }());
                Search.SearchBuilderDecoratorFactory = SearchBuilderDecoratorFactory;
            })(Search = Form.Search || (Form.Search = {}));
        })(Form = HPTRIM.Form || (HPTRIM.Form = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var Form;
        (function (Form) {
            var Search;
            (function (Search) {
                var DatetimeSearchClauseDecorator = (function (_super) {
                    __extends(DatetimeSearchClauseDecorator, _super);
                    function DatetimeSearchClauseDecorator(searchClause) {
                        _super.call(this, searchClause);
                        this.template = ko.observable("templates/Form/ParameterisedSearch/DatetimeSearchClause");
                        var dateFormat = {
                            monthBeforeDay: false,
                            dateSeparator: '/'
                        };
                        this.field = new HP.HPTRIM.Form.StringDecorator({ Value: searchClause.CriteriaString() });
                    }
                    return DatetimeSearchClauseDecorator;
                }(Search.SearchClauseDecorator));
                Search.DatetimeSearchClauseDecorator = DatetimeSearchClauseDecorator;
                var TrimObjectSearchClauseDecorator = (function (_super) {
                    __extends(TrimObjectSearchClauseDecorator, _super);
                    function TrimObjectSearchClauseDecorator(trimClient, searchClause) {
                        _super.call(this, searchClause);
                        var pageItem = this.convertSearchClauseToPageItem(searchClause);
                        this.field = new Form.TrimObjectDecorator(trimClient, pageItem).viewModel;
                        var itemPicker = this.field;
                        if (itemPicker.label) {
                            itemPicker.label(pageItem.Caption);
                        }
                        this.field.onValueChanged(function (tobj) {
                            if (tobj != null) {
                                searchClause.CriteriaString(tobj.Uri);
                            }
                        });
                    }
                    TrimObjectSearchClauseDecorator.prototype.convertSearchClauseToPageItem = function (searchClause) {
                        var pageItem = {};
                        pageItem.ObjectType = "";
                        if (searchClause.ClauseDefinition) {
                            pageItem.ObjectType = searchClause.ClauseDefinition.ObjectTypeParameter;
                        }
                        else {
                            pageItem.ObjectType = searchClause.ObjectTypeParameter;
                        }
                        pageItem.Caption = "";
                        var nameString = searchClause.CriteriaString(), icon = null;
                        if (searchClause.CriteriaObject) {
                            nameString = searchClause.CriteriaObject.NameString;
                            icon = searchClause.CriteriaObject.Icon;
                        }
                        pageItem.Value = ko.observable({
                            Uri: searchClause.CriteriaString(),
                            NameString: nameString,
                            Icon: icon
                        });
                        if (searchClause.ParameterCaption) {
                            pageItem.Caption = searchClause.ParameterCaption;
                        }
                        return pageItem;
                    };
                    return TrimObjectSearchClauseDecorator;
                }(Search.SearchClauseDecorator));
                Search.TrimObjectSearchClauseDecorator = TrimObjectSearchClauseDecorator;
                var EnumSearchClauseDecorator = (function (_super) {
                    __extends(EnumSearchClauseDecorator, _super);
                    function EnumSearchClauseDecorator(searchClause) {
                        _super.call(this, searchClause);
                        var testValues = [{ Caption: "Test", Value: 'test' }, { Caption: "Test2", Value: 'test2' }];
                        this.field['Value'] = ko.observable('test');
                    }
                    return EnumSearchClauseDecorator;
                }(Search.SearchClauseDecorator));
                Search.EnumSearchClauseDecorator = EnumSearchClauseDecorator;
            })(Search = Form.Search || (Form.Search = {}));
        })(Form = HPTRIM.Form || (HPTRIM.Form = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var Form;
        (function (Form) {
            var Search;
            (function (Search) {
                var SearchClauseDecoratorFactory = (function () {
                    function SearchClauseDecoratorFactory() {
                    }
                    SearchClauseDecoratorFactory.make = function (trimClient, searchStackItem) {
                        var decorator = SearchClauseDecoratorFactory.determineDecoratorByFormat(trimClient, searchStackItem);
                        return decorator;
                    };
                    SearchClauseDecoratorFactory.determineDecoratorByFormat = function (trimClient, searchStackItem) {
                        if (searchStackItem.IsFieldSearch) {
                            return $.extend(searchStackItem, new Search.SearchClauseDecorator(searchStackItem));
                        }
                        var format = "", decorator = null;
                        if (searchStackItem.ClauseDefinition) {
                            format = searchStackItem.ClauseDefinition.ParameterFormat;
                        }
                        else {
                            format = searchStackItem.ParameterFormat;
                        }
                        switch (format) {
                            case "Object":
                                {
                                    decorator = new Search.TrimObjectSearchClauseDecorator(trimClient, searchStackItem);
                                }
                                break;
                            case "Datetime":
                                {
                                    decorator = new Search.DatetimeSearchClauseDecorator(searchStackItem);
                                }
                            case "Date":
                                {
                                    decorator = new Search.DatetimeSearchClauseDecorator(searchStackItem);
                                }
                                break;
                            case "DateRange":
                                {
                                    decorator = new Search.SearchClauseDecorator(searchStackItem);
                                }
                                break;
                            case "Text":
                            case "String":
                                {
                                    decorator = new Search.SearchClauseDecorator(searchStackItem);
                                }
                                break;
                            case "Boolean":
                                {
                                    decorator = new Search.SearchClauseDecorator(searchStackItem);
                                }
                                break;
                            case "Currency":
                                {
                                    decorator = new Search.SearchClauseDecorator(searchStackItem);
                                }
                                break;
                            case "Number":
                            case "BigNumber":
                            case "Decimal":
                                {
                                    decorator = new Search.SearchClauseDecorator(searchStackItem);
                                }
                                break;
                            case "Enum":
                                {
                                    decorator = new Search.EnumSearchClauseDecorator(searchStackItem);
                                }
                                break;
                            case "Freetext":
                            case "Word":
                                {
                                    decorator = new Search.SearchClauseDecorator(searchStackItem);
                                }
                                break;
                        }
                        if (decorator == null) {
                            throw "Format not found :" + searchStackItem;
                        }
                        decorator.Readonly = false;
                        return $.extend(searchStackItem, decorator);
                    };
                    return SearchClauseDecoratorFactory;
                }());
                Search.SearchClauseDecoratorFactory = SearchClauseDecoratorFactory;
            })(Search = Form.Search || (Form.Search = {}));
        })(Form = HPTRIM.Form || (HPTRIM.Form = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var Form;
        (function (Form) {
            var Search;
            (function (Search) {
                var ParameterisedSearchForm = (function (_super) {
                    __extends(ParameterisedSearchForm, _super);
                    function ParameterisedSearchForm(trimClient, searchDefinition, objectType, searchClauses) {
                        var _this = this;
                        _super.call(this, "templates/Framework/Overlays/ParameterisedSearchFormOverlay");
                        this.searchResultsProperties = "";
                        this.cancel = function () { };
                        this.searchStack = searchDefinition.SearchStack;
                        this.sort = searchDefinition.SavedSearchSortString;
                        this.filter = searchDefinition.SavedSearchFilterString;
                        this.searchOptions = searchDefinition.SavedSearchOptions;
                        this.objectType = objectType;
                        this.objectName = objectType.Name;
                        var me = this;
                        this.trimClient = trimClient;
                        var properties = [];
                        _.each(searchDefinition.SearchResultsProperties, function (item) {
                            properties.push(item.Id);
                        });
                        me.searchResultsProperties = properties.join(',');
                        var tabIndex = 0;
                        for (var i = 0; i < this.searchStack.length; i++) {
                            var clause = this.searchStack[i];
                            var clauseDefinition = {};
                            var cachedClauseDef = {};
                            cachedClauseDef = _.find(searchClauses, function (cachedClause) {
                                return cachedClause.Id == clause.ClauseId;
                            });
                            $.extend(clauseDefinition, cachedClauseDef);
                            clause["ClauseDefinition"] = clauseDefinition;
                            if (clause.IsSearchClause && _.has(clause, "ParameterCaption")) {
                                clause = Search.SearchClauseDecoratorFactory.make(trimClient, clause);
                                clause['tabIndex'] = tabIndex++;
                            }
                        }
                        var summaryPage = {
                            isSummary: true,
                            previewString: ko.observable(""),
                            IsSearchClause: false,
                            tabIndex: tabIndex++,
                            ClauseId: 'ParameterisedSearchSummary',
                            ShortParameterCaption: "Summary"
                        };
                        var summaryPageDecorator = new Search.SearchClauseSummaryDecorator(summaryPage);
                        this.summaryPage = summaryPageDecorator;
                        this.searchStack[this.searchStack.length] = summaryPageDecorator;
                        var totalPageCount = tabIndex;
                        this.wizardNavigator = new WizardNavigator(totalPageCount);
                        this.wizardNavigator.refreshView = function () {
                            $('#parameterisedSearch li:eq(' + _this.wizardNavigator.currentPageIndex() + ') a').tab('show');
                        };
                        this.wizardNavigator.preview = function () {
                            _this.previewSearch();
                        };
                    }
                    ParameterisedSearchForm.prototype.afterRender = function () {
                        $('#parameterisedSearch li:eq(0) a').tab('show');
                    };
                    ParameterisedSearchForm.prototype.search = function () {
                        var me = this;
                        var stackSearch = this.getStackSearchPostData();
                        this.trimClient.doPost("SearchStackToLinear/" + this.objectName + "?format=json", stackSearch, 'text').done(function (response) {
                            if (me.callback) {
                                me.callback(response, "", me.objectType, me.filter, me.sort, me.searchOptions);
                            }
                            else {
                                ko.postbox.publish(ParameterisedSearchForm.PARAMETERISED_SEARCH_LINEAR_QUERY_RECEIVED, response);
                            }
                        });
                        this.close();
                    };
                    ParameterisedSearchForm.prototype.previewSearch = function () {
                        var _this = this;
                        var stackSearch = this.getStackSearchPostData();
                        this.trimClient.doPost("SearchStackToLinear/" + this.objectName + "?format=json", stackSearch, 'text').done(function (response) {
                            _this.summaryPage["previewString"](response);
                        });
                    };
                    ParameterisedSearchForm.prototype.close = function () {
                        this.cancel();
                    };
                    ParameterisedSearchForm.prototype.setPageIndex = function (currentPageIndex) {
                        this.wizardNavigator.currentPageIndex(currentPageIndex);
                    };
                    ParameterisedSearchForm.prototype.getStackSearchPostData = function () {
                        var postBody = {
                            SearchStack: []
                        };
                        var me = this;
                        var keys = _.keys(this.searchStack[0]).concat(['OperatorType']);
                        var notIncludedKeys = ["ClauseDefinition", "template", "field", "constructor"];
                        var includeTheseKeys = _.difference(keys, notIncludedKeys);
                        _.each(this.searchStack, function (item) {
                            var param = [item].concat(includeTheseKeys);
                            var clone = _.pick.apply(item, param);
                            if (clone.IsSearchClause) {
                                var criteriaString = clone.CriteriaString;
                                if (_.isFunction(clone.CriteriaString)) {
                                    criteriaString = clone.CriteriaString();
                                }
                                try {
                                    clone['CriteriaString'] = criteriaString();
                                }
                                catch (e) {
                                    clone['CriteriaString'] = criteriaString;
                                }
                                if (item['Field']) {
                                    clone.Field = item['Field'];
                                }
                            }
                            if (clone.ClauseId == "ParameterisedSearchSummary") {
                                return;
                            }
                            postBody.SearchStack.push(clone);
                        });
                        return postBody;
                    };
                    ParameterisedSearchForm.prototype.next = function () {
                        this.wizardNavigator.moveNext();
                    };
                    ParameterisedSearchForm.prototype.back = function () {
                        this.wizardNavigator.moveBack();
                    };
                    ParameterisedSearchForm.prototype.startOver = function () {
                        this.wizardNavigator.startOver();
                    };
                    ParameterisedSearchForm.hasParameterisedSearch = function (searchStack) {
                        var isParameterisedSearch = false;
                        for (var index in searchStack) {
                            var searchStackItem = searchStack[index];
                            isParameterisedSearch = _.has(searchStackItem, "ParameterCaption");
                            if (isParameterisedSearch) {
                                break;
                                ;
                            }
                        }
                        ;
                        return isParameterisedSearch;
                    };
                    ParameterisedSearchForm.PARAMETERISED_SEARCH_LINEAR_QUERY_RECEIVED = "Parameterised_Search_LinearyQuery_Received";
                    ParameterisedSearchForm.PARAMETERISED_SEARCH_TOPIC = "Parameterised_Search_Topic";
                    return ParameterisedSearchForm;
                }(HP.HPTRIM.Framework.Components.Layouts.Panel));
                Search.ParameterisedSearchForm = ParameterisedSearchForm;
                var WizardNavigator = (function () {
                    function WizardNavigator(pageCount) {
                        var _this = this;
                        this.currentPageIndex = ko.observable(0);
                        this.totalPageCount = 0;
                        this.startOverButtonVisible = ko.observable(false);
                        this.backButtonVisible = ko.observable(false);
                        this.nextButtonVisible = ko.observable(false);
                        this.searchButtonVisible = ko.observable(false);
                        this.totalPageCount = pageCount;
                        this.lastIndex = pageCount - 1;
                        if (this.totalPageCount > 1) {
                            this.nextButtonVisible(true);
                        }
                        this.currentPageIndex.subscribe(function (pageIndex) {
                            _this.backButtonVisible(pageIndex > 0 ? true : false);
                            _this.startOverButtonVisible(pageIndex == _this.lastIndex ? true : false);
                            _this.nextButtonVisible(pageIndex < _this.lastIndex ? true : false);
                            _this.searchButtonVisible(pageIndex == _this.lastIndex ? true : false);
                            if (pageIndex == _this.lastIndex) {
                                _this.preview();
                            }
                        });
                    }
                    WizardNavigator.prototype.moveNext = function () {
                        var pageIndex = this.currentPageIndex();
                        if (pageIndex < this.totalPageCount - 1) {
                            this.currentPageIndex(++pageIndex);
                        }
                        this.refreshView();
                    };
                    WizardNavigator.prototype.moveBack = function () {
                        var pageIndex = this.currentPageIndex();
                        if (pageIndex > 0) {
                            this.currentPageIndex(--pageIndex);
                        }
                        this.refreshView();
                    };
                    WizardNavigator.prototype.startOver = function () {
                        this.currentPageIndex(0);
                        this.refreshView();
                    };
                    return WizardNavigator;
                }());
                Search.WizardNavigator = WizardNavigator;
            })(Search = Form.Search || (Form.Search = {}));
        })(Form = HPTRIM.Form || (HPTRIM.Form = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var Field;
        (function (Field) {
            var ItemPickerEvents = (function () {
                function ItemPickerEvents() {
                }
                return ItemPickerEvents;
            }());
            Field.ItemPickerEvents = ItemPickerEvents;
            var HierarchyLevel = (function () {
                function HierarchyLevel(name, item) {
                    this.items = ko.observableArray([]);
                    this.name = name;
                    this.parentItem = item;
                }
                return HierarchyLevel;
            }());
            Field.HierarchyLevel = HierarchyLevel;
            var ItemHierarchy = (function () {
                function ItemHierarchy() {
                    this.levels = ko.observableArray([]);
                    this.maxDepth = ko.observable([1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 14, 14, 15]);
                    this.sublistTemplate = "templates/Field/ItemPickerSubList";
                    var root = new HierarchyLevel("", null);
                    this.levels([root]);
                }
                ItemHierarchy.prototype.root = function () {
                    return this.levels()[0].name;
                };
                ItemHierarchy.prototype.getLevels = function () {
                    return this.levels;
                };
                ItemHierarchy.rootTemplate = "templates/Field/ItemPickerRootList";
                return ItemHierarchy;
            }());
            Field.ItemHierarchy = ItemHierarchy;
            var ItemPicker = (function () {
                function ItemPicker(options) {
                    var _this = this;
                    this.itemCssClass = "itempicker-li-container";
                    this.hasFocus = ko.observable(false);
                    this.label = ko.observable("");
                    this.value = ko.observable(null);
                    this.rawValue = ko.observable("");
                    this.htmlElement = ko.observable(null);
                    this.items = ko.observableArray([]);
                    this.toolTip = ko.observable("");
                    this.hasValidValue = false;
                    this.template = "templates/Field/ItemPicker";
                    this.listTemplateName = ko.observable("templates/Field/ItemPickerRootList");
                    this.isExpanded = ko.observable(false);
                    this.errorMessage = ko.observable("");
                    this.isEditing = ko.observable(true);
                    this.supportHierarchy = false;
                    this.hasMoreResults = ko.observable(false);
                    this.isLoading = ko.observable(false);
                    this.isLoadingKnockoutSubscription = null;
                    this.m_events = new ItemPickerEvents();
                    this.enabled = ko.observable(true);
                    this.resultStyle = "position: relative; z-index: 9999";
                    this.enableClickToExpand = false;
                    this.currentIndex = -1;
                    this.error = ko.observable("");
                    this.pluginStyle = 'display: inline-block; position: relative; float: right; margin-top: -30px; z-index: 999999999999';
                    this.errorHandler = null;
                    this.isHidden = false;
                    this.showTextField = false;
                    this.multiSelect = false;
                    this.selectedItems = ko.observableArray();
                    this.additionalHandlingOnItemClick = function (isMandatory, caption) { };
                    this.itemDisplayCss = ko.observable('white-back');
                    this.submitPropertyName = "";
                    this.selectedListItem = ko.observable({});
                    this.hasRecursive = ko.observable(false);
                    this.isMultiItemPickerSearchEnabled = ko.observable(false);
                    if (options === undefined ||
                        options === null ||
                        _.isEmpty(options)) {
                        throw "ItemPicker constructor does not take in undefined, null or empty argument";
                    }
                    if (options.label) {
                        if (typeof options.label === 'string') {
                            this.label(options.label);
                        }
                        else {
                            throw "label property must be type of string";
                        }
                    }
                    else {
                        this.label(" ");
                    }
                    this.recursiveCheckbox = HPTRIM.Utils.Form.initialiseTickCheckBox(this.hasRecursive, HP.HPTRIM.Messages.web_searchRecursive);
                    if (options.multiSelect === true) {
                        this.template = "templates/Field/MultiItemPicker";
                        this.multiSelect = true;
                    }
                    this.additionalHandlingOnItemClick = function (isMandatory, caption) {
                    };
                    this.isMandatory = options.isMandatory || false;
                    this.supportHierarchy = options.supportHierarchy || false;
                    this.plugins = [];
                    this.isHidden = options.isHidden || false;
                    if (options.resultExpansionOverlay === false) {
                        this.resultStyle = "position: relative; z-index: 1";
                    }
                    if ((/msie|trident/i).test(navigator.userAgent)) {
                        this.pluginStyle = 'display: inline-block; position: relative; float: right;z-index: 999999999999; margin-top:1px;';
                    }
                    var isIpad = (navigator.userAgent.match(/iPad/i) != null || navigator.userAgent.match(/Macintosh/i));
                    if (isIpad || this.isIphone()) {
                        this.resultStyle = "position: relative; z-index: 9999;";
                        this.pluginStyle = 'display: inline-block; position: relative; float: right;z-index: 999999999999; margin-top:1px;';
                    }
                    if (options.errorHandler) {
                        this.errorHandler = options.errorHandler;
                        this.errorMessage.subscribe(function (newValue) { _this.errorHandler(newValue); });
                    }
                    this.carouselId = _.uniqueId('spa-item-picker');
                    this.controlContainerId = "item-picker-container-" + this.carouselId;
                    if (this.supportHierarchy) {
                        this.configureHierarchy();
                    }
                    this.onValueValidated = function () {
                    };
                    var me = this;
                    this.isLoadingKnockoutSubscription = this.isLoading.subscribe(function (value) {
                        var ele = _this.htmlElement();
                        if (value === true) {
                            $(ele).removeClass('dbpsearchmethod_light_x16').css('backgroundImage', HP.HPTRIM.Icons.isLoading_x24).css('backgroundRepeat', 'no-repeat');
                            ;
                        }
                        else {
                            $(ele).addClass('dbpsearchmethod_light_x16').css('backgroundImage', '').css('backgroundRepeat', '');
                            ;
                        }
                    });
                    this.fieldObject = null;
                }
                ItemPicker.prototype.enableMultiItemPickerSearch = function (value) {
                    this.isMultiItemPickerSearchEnabled(value);
                };
                ItemPicker.prototype.isIphone = function () {
                    var isIphone = (navigator.userAgent.match(/iPhone/i) != null || navigator.userAgent.match(/Macintosh/i) != null);
                    return isIphone;
                };
                ItemPicker.prototype.setupOnLostFocus = function () {
                    $(document).on('mouseup', $.proxy(this.hideItemPicker, this));
                    $(document).on('touchend', $.proxy(this.hideItemPicker, this));
                };
                ItemPicker.prototype.hideItemPicker = function (e) {
                    var target = e.target;
                    if (target.parentElement == null) {
                        return;
                    }
                    if (target.parentNode.className == "item-picker-display") {
                        this.collapseEx();
                    }
                    var firstChild = $(target).first();
                    if (firstChild.length > 0) {
                        if ($(firstChild[0].lastElementChild) &&
                            $(firstChild[0].lastElementChild).hasClass('item-picker-editing')) {
                            this.collapseEx();
                        }
                    }
                    if ($(target).closest('.control-container').length == 0) {
                        this.collapseEx();
                    }
                    else {
                        if (this.isExpanded() == true &&
                            target.type == 'text') {
                            this.collapseEx();
                        }
                    }
                };
                ItemPicker.prototype.collapseEx = function () {
                    if (this.value()) {
                        this.isEditing(false);
                    }
                    this.collapse();
                    $(document).off('mouseup', $.proxy(this.hideItemPicker, this));
                };
                ItemPicker.prototype.configureHierarchy = function () {
                    this.carousel = $("#" + this.carouselId);
                    this.hierarchy = new ItemHierarchy();
                    this.listTemplateName(ItemHierarchy.rootTemplate);
                };
                ItemPicker.prototype.shouldIgnoreTheseKeys = function (event) {
                    var ignoreTheseKeys = [
                        35, 36,
                        34, 34,
                        144, 20,
                        17, 18,
                        92
                    ];
                    if (!event) {
                        return false;
                    }
                    var keyCode = event.keyCode;
                    for (var key in ignoreTheseKeys) {
                        if (keyCode == ignoreTheseKeys[key]) {
                            return true;
                        }
                    }
                    return false;
                };
                ItemPicker.prototype.onKeyUp = function (context, event) {
                    if (!this.enabled()) {
                        return;
                    }
                    var event = event || window.event;
                    if (!event) {
                        this.valueValidated(false);
                        this.updateValueWhenUserPauseTyping();
                        if (this.isExpanded()) {
                            this.collapse();
                        }
                        this.items([]);
                        this.value(null);
                        return;
                    }
                    if (this.shouldIgnoreTheseKeys(event)) {
                        return;
                    }
                    var KEY_ESC = 27, KEY_ENTER = 13, SPACE_KEY = 32;
                    if (event.keyCode === 37 || event.keyCode == 39) {
                        if (event.preventDefault) {
                            event.preventDefault();
                            return;
                        }
                        return;
                    }
                    if (event.keyCode === 40 || event.keyCode == 38) {
                        this.handleUpDownKey(event);
                        return;
                    }
                    if (event.keyCode == KEY_ESC) {
                        this.hideItemPicker(event);
                        return;
                    }
                    if (event.keyCode == KEY_ENTER) {
                        if (event.preventDefault) {
                            event.preventDefault();
                        }
                        try {
                            var itemsSelector = "." + this.itemCssClass;
                            var itemRow = $(itemsSelector)[this.currentIndex].children[0];
                            if (itemRow) {
                                itemRow.click();
                            }
                        }
                        catch (x) {
                        }
                        return;
                    }
                    if (this.multiSelect === true
                        && event.keyCode === 8) {
                        this.removePreviousItem();
                    }
                    this.valueValidated(false);
                    this.updateValueWhenUserPauseTyping();
                    if (this.isExpanded()) {
                        this.collapse();
                    }
                    this.value(null);
                };
                ItemPicker.prototype.onblur = function (context, event) {
                    if (context) {
                        if (context.ParentForm && context.ParentForm.myName) {
                            if (context.ParentForm.myName == 'RecordDataEntryForm') {
                                var hF = context.hasFocus();
                                if (context.Id == 'RecordContainer' || context.controlContainerId == 'RecordContainer' || !hF) {
                                    var me = this;
                                    me.error('');
                                    var rValue = context.getRawValue();
                                    if (rValue != undefined && rValue != 'all' && (rValue > 0 || rValue.length > 0)) {
                                        var picked = context.getValue();
                                        if (picked == null) {
                                        }
                                    }
                                    else {
                                        if (this.isMandatory) {
                                            var msg = HP.HPTRIM.Messages.web_mandatoryFieldNeedsValue;
                                            msg = msg.replace("{0}", context.Caption);
                                            this.error(msg);
                                        }
                                    }
                                    this.errorMessage(this.error());
                                    if (context.Id == 'RecordContainer' || context.controlContainerId == 'RecordContainer') {
                                        if (me.fieldObject && me.fieldObject.ParentForm) {
                                            if (rValue != undefined && (rValue > 0 || rValue.length > 0)) {
                                                var picked = context.getValue();
                                                if (picked != null) {
                                                    me.fieldObject.ParentForm.containerBeingSet(true);
                                                    return;
                                                }
                                            }
                                            me.fieldObject.ParentForm.containerBeingSet(false);
                                        }
                                    }
                                }
                            }
                        }
                    }
                };
                ItemPicker.prototype.handleUpDownKey = function (event) {
                    if (event.keyCode == 38) {
                        this.currentIndex--;
                    }
                    if (event.keyCode == 40) {
                        this.currentIndex++;
                    }
                    if (this.currentIndex > this.items().length) {
                        this.currentIndex = this.items().length;
                    }
                    if (this.currentIndex < -1) {
                        this.currentIndex = -1;
                    }
                    var itemsSelector = '.' + this.itemCssClass;
                    $(itemsSelector).css({ 'backgroundColor': 'white' });
                    var itemRow = $(itemsSelector)[this.currentIndex];
                    if (itemRow) {
                        var alignWithTop = false;
                        itemRow.scrollIntoView(alignWithTop);
                        $(itemRow).css({ 'backgroundColor': 'rgba(1, 169, 130, 0.2)' });
                    }
                };
                ItemPicker.prototype.removePreviousItem = function () {
                    if (this.rawValue() === "") {
                        this.selectedItems.pop();
                    }
                };
                ItemPicker.prototype.getValue = function () {
                    return this.value();
                };
                ItemPicker.prototype.getValueEx = function () {
                    return this.getValue();
                };
                ItemPicker.prototype.setValue = function (value) {
                    this.value(value);
                };
                ItemPicker.prototype.onTextFieldClick = function () {
                    if (!this.enabled()) {
                        return;
                    }
                    this.setupOnLostFocus();
                };
                ItemPicker.prototype.getRawValue = function () {
                    return this.rawValue();
                };
                ItemPicker.prototype.setRawValue = function (value) {
                    this.rawValue(value);
                };
                ItemPicker.prototype.toggle = function (doSearch) {
                    if (this.isExpanded()) {
                        this.isExpanded(false);
                    }
                    else {
                        this.isExpanded(true);
                        if (doSearch) {
                            this.doSearch();
                        }
                    }
                };
                ItemPicker.prototype.expand = function () {
                    this.isExpanded(true);
                    var el = document.getElementById(this.controlContainerId);
                    if (el != undefined) {
                        if (this.isIphone()) {
                            el.scrollIntoView(true);
                        }
                    }
                };
                ItemPicker.prototype.clear = function () {
                    this.rawValue("");
                    this.value(null);
                };
                ItemPicker.prototype.collapse = function () {
                    this.isExpanded(false);
                    this.currentIndex = -1;
                    this.onblur(this, 'collapse');
                };
                ItemPicker.prototype.toggleEdit = function (context, event) {
                    if (!this.enabled()) {
                        return;
                    }
                    if (this.multiSelect === true) {
                        var e = event || window.event;
                        if (!e) {
                            return;
                        }
                        var targetElement = e.target;
                        var clsName = targetElement['className'];
                        if (clsName == "hp-icon hp-close close" ||
                            clsName == "pill-close") {
                            return;
                        }
                    }
                    this.setupOnLostFocus();
                    if (this.isEditing() &&
                        this.rawValue() != "" &&
                        this.hasValidValue) {
                        this.isEditing(false);
                    }
                    else {
                        if (this.enableClickToExpand) {
                            this.isEditing(true);
                            var inputElement = this.htmlElement();
                            if (inputElement) {
                                inputElement.focus();
                            }
                            var dosearch = false;
                            if (this.isMultiItemPickerSearchEnabled()) {
                                if (inputElement.value == "") {
                                    return;
                                }
                            }
                            this.toggle(dosearch);
                            if (this.items().length == 0 &&
                                this.value() != null) {
                                this.items([this.value()]);
                            }
                            return;
                        }
                        this.isExpanded(false);
                        this.isEditing(true);
                    }
                    $('#' + this.controlContainerId).focus();
                    this.currentIndex = -1;
                };
                ItemPicker.prototype.doSearch = function () {
                    var rawValue = this.rawValue();
                    if (rawValue === null) {
                        this.clear();
                        return;
                    }
                    if (rawValue == "") {
                        this.errorMessage("");
                        this.error("");
                        this.collapse();
                        this.clear();
                        return;
                    }
                    if (rawValue.length < 2) {
                        return;
                    }
                    this.isLoading(true);
                    this.resetHiearchy();
                    this.doSearchInternal();
                };
                ItemPicker.prototype.resetHiearchy = function () {
                    if (this.supportHierarchy) {
                        this.truncateBreadCrumbAfterThisIndex(0);
                    }
                };
                ItemPicker.prototype.on = function (options) {
                    _.extend(this.m_events, options);
                };
                ItemPicker.prototype.onValueChanged = function (func) {
                    this.value.subscribe(function (newValue) {
                        func(newValue);
                    });
                };
                ItemPicker.prototype.doSearchInternal = function () {
                };
                ItemPicker.prototype.appendAdditionalQueryParms = function (query) {
                    return query;
                };
                ItemPicker.prototype.defaultQuery = function () {
                    return HP.HPTRIM.Messages.web_All.toLowerCase();
                };
                ItemPicker.prototype.isEnabled = function () {
                    return this.enabled();
                };
                ItemPicker.prototype.enable = function (enable) {
                    this.enabled(enable);
                    var input = this.htmlElement();
                    if (input) {
                        if (enable === true) {
                            input.style.backgroundColor = "";
                        }
                        else {
                            input.style.backgroundColor = "#eaeaea";
                        }
                    }
                    var bgColor = enable ? 'white-back' : 'black-on-light-grey-back';
                    this.itemDisplayCss(bgColor);
                };
                ItemPicker.prototype.updateValueWhenUserPauseTyping = function () {
                    var that = this;
                    var waitInterval = 500;
                    clearInterval(this.typingTimer);
                    this.typingTimer = setTimeout(function () {
                        var ele = that.htmlElement();
                        if (!ele) {
                            return;
                        }
                        var value = ele.value;
                        that.setRawValue(value);
                        if (that.m_events.keypress) {
                            that.m_events.keypress();
                        }
                        that.doSearch();
                    }, waitInterval);
                };
                ItemPicker.prototype.postRecursivePlusSign = function (context, item) {
                    if (context.hasRecursive()) {
                        context.rawValue(item.displayValue + " +");
                    }
                    else {
                        context.rawValue(item.displayValue);
                    }
                };
                ItemPicker.prototype.onItemClick = function (context, item) {
                    if (!this.canSelectItem(item)) {
                        return;
                    }
                    this.postRecursivePlusSign(context, item);
                    context.value(item);
                    this.valueValidated(true, item);
                    this.collapse();
                    this.toggleEdit();
                    this.resetHiearchy();
                    this.afterItemClicked(item);
                    if (this.multiSelect === true) {
                        item.iconClass = item.iconId.toLowerCase() + '_x16 media-object';
                        var items = this.selectedItems();
                        var found = _.find(items, function (currentItem) {
                            return currentItem.Uri == item.Uri;
                        }, context);
                        if (found) {
                            this.additionalHandlingOnItemClick(this.isMandatory, context.Caption);
                            return;
                        }
                        this.selectedItems.push(item);
                        this.rawValue('');
                        this.focus();
                        this.additionalHandlingOnItemClick(this.isMandatory, context.Caption);
                    }
                    else {
                        var me1 = this;
                        if (me1.Name != undefined && me1.Name == "LocationDefaultJurisdiction") {
                            item.iconClass = item.iconId.toLowerCase() + '_x16 media-object';
                            this.selectedItems([]);
                            this.selectedItems.push(item);
                            this.rawValue('');
                            this.focus();
                            this.additionalHandlingOnItemClick(this.isMandatory, context.Caption);
                        }
                    }
                };
                ItemPicker.prototype.afterItemClicked = function (item) {
                    if (this.m_events.afterItemClicked) {
                        this.m_events.afterItemClicked(this, item);
                    }
                    if (item.displayValueExtra) {
                        this.toolTip(item.displayValueExtra);
                    }
                };
                ItemPicker.prototype.canSelectItem = function (item) {
                    return true;
                };
                ItemPicker.prototype.handleRightArrowKey = function () {
                };
                ;
                ItemPicker.prototype.handleLeftArrowKey = function () {
                };
                ;
                ItemPicker.prototype.valueValidated = function (isValid, item) {
                    this.hasValidValue = isValid;
                    this.onValueValidated(isValid, item);
                    if (isValid) {
                        this.toggle();
                    }
                };
                ItemPicker.prototype.gotoRoot = function () {
                    $("#" + this.carouselId).carousel(0);
                    while (this.hierarchy.levels().length > 1) {
                        this.hierarchy.levels.pop();
                    }
                    if (navigator.userAgent.match(/iPad/i)) {
                        this.doSearchInternal();
                    }
                };
                ItemPicker.prototype.gotoLevel = function (context, index) {
                    var iIndex = index();
                    if (iIndex == 0) {
                        this.gotoRoot();
                        return;
                    }
                    var parent = this.hierarchy.levels()[iIndex].parentItem;
                    this.selectedListItem(parent);
                    $("#" + this.carouselId).carousel(iIndex);
                    this.truncateBreadCrumbAfterThisIndex(iIndex);
                };
                ItemPicker.prototype.truncateBreadCrumbAfterThisIndex = function (iIndex) {
                    while (this.hierarchy.levels().length > iIndex + 1) {
                        this.hierarchy.levels.pop();
                    }
                };
                ItemPicker.prototype.updateBreadCrumb = function (item) {
                    var hierarchyLevel = new HierarchyLevel(item.displayValue, item);
                    this.hierarchy.levels.push(hierarchyLevel);
                };
                ItemPicker.prototype.clearBreadCrumb = function () {
                    if (this.supportHierarchy) {
                        this.hierarchy.levels([]);
                    }
                };
                ItemPicker.prototype.addPlugin = function (plugin) {
                    if (!plugin) {
                        throw "Invalid Parameter ItemPickerPlugin";
                    }
                    this.plugins.push(plugin);
                    plugin.initialize(this);
                };
                ItemPicker.prototype.deselect = function (item) {
                    if (!this.multiSelect) {
                        var me1 = this;
                        if (me1.Name == undefined || me1.Name != "LocationDefaultJurisdiction") {
                            throw "Invalid operation, multiselect must be enabled";
                        }
                    }
                    if (!this.selectedItems) {
                        throw "SelectedItems is undefined";
                    }
                    var indexOf = this.selectedItems.indexOf(item);
                    if (indexOf >= 0) {
                        this.selectedItems.remove(item);
                    }
                };
                ItemPicker.prototype.getSortValue = function () {
                    return "";
                };
                ItemPicker.prototype.focus = function () {
                };
                ItemPicker.prototype.editPill = function (item, e) {
                };
                return ItemPicker;
            }());
            Field.ItemPicker = ItemPicker;
            var TrimItemPicker = (function (_super) {
                __extends(TrimItemPicker, _super);
                function TrimItemPicker(trimClient, options) {
                    var _this = this;
                    _super.call(this, options);
                    this.filterClause = ko.observable("");
                    this.pageSize = 30;
                    this.startIndex = ko.observable(1);
                    this.appendAsterisk = false;
                    this.showEditButton = ko.observable(true);
                    this._requestId = 0;
                    this.m_currentItemContext = null;
                    this.trimClient = trimClient;
                    var me = this;
                    this.appendAsterisk = options.appendAsterisk;
                    this.baseObjectType = options.baseObjectType;
                    if (!this.displayProperty) {
                        this.displayProperty = this.baseObjectType.nameProperty;
                    }
                    var me = this;
                    this.items.subscribe(function () {
                        if (me.getRawValue() == "") {
                            return;
                        }
                        me.onItemsChanged(me, me.items);
                    });
                    this.rawValue.subscribe(function (value) {
                        _this.reject();
                        _this.isLoading(false);
                    });
                    this.editQuery = function () {
                        var query = _this.rawValue();
                        if (_this.getValue()) {
                            var baseObject = _this.getValue();
                            if (baseObject.Uri) {
                                query = "uri:" + baseObject.Uri;
                            }
                        }
                        var editSearchData = {
                            allowMultiple: true,
                            objectType: me.baseObjectType,
                            query: query,
                            searchTitle: me.label(),
                            callback: function (objectValueArray) {
                                if (objectValueArray.length > 0) {
                                    _this.setValue(objectValueArray[0]);
                                }
                            },
                        };
                        ko.postbox.publish(TrimItemPicker.SHOW_SEARCH_DIALOG_TOPIC, editSearchData);
                    };
                }
                TrimItemPicker.prototype.setCustomUri = function (customUri) {
                    this.customUri = customUri;
                };
                TrimItemPicker.prototype.setPurpose = function (purpose) {
                    this.purpose = purpose;
                };
                TrimItemPicker.prototype.getPurpose = function (purpose) {
                    this.purpose = purpose;
                };
                TrimItemPicker.prototype.reset = function () {
                    this.value(null);
                    this.rawValue(null);
                    this.isEditing(true);
                };
                TrimItemPicker.prototype.setAndLoadValue = function (uri) {
                    var me = this;
                    var rawValue = new HPTRIM.TrimBaseObject(this.baseObjectType, uri, uri);
                    this.setDefaultValue(rawValue);
                    HPTRIM.Utils.TrimHelper.loadObject(this.trimClient, rawValue, function (loadedValue) {
                        me.setDefaultValue(loadedValue);
                    });
                };
                TrimItemPicker.prototype.getCheckedOnSpacebar = function (e) {
                    if (e.keyCode == 32) {
                        this.onCheckBoxFieldClick();
                    }
                };
                TrimItemPicker.prototype.onCheckBoxFieldClick = function () {
                    var me = this;
                    if (me.hasRecursive()) {
                        me.hasRecursive(false);
                    }
                    else {
                        me.hasRecursive(true);
                    }
                    if (me.value()) {
                        me.postRecursivePlusSign(me, me.value());
                    }
                };
                TrimItemPicker.prototype.setDefaultValue = function (value) {
                    var me = this;
                    value.onItemClick = function () {
                        me.onItemClick(me, value);
                    };
                    this.setValue(value);
                    this.hasValidValue = true;
                    this.items([value]);
                };
                TrimItemPicker.prototype.EnclosedCheckbox = function () {
                    this.onblur(this.fieldObject, "");
                };
                TrimItemPicker.prototype.getValue = function () {
                    return _super.prototype.getValue.call(this);
                };
                TrimItemPicker.prototype.onKeyUp = function (context, event) {
                    _super.prototype.onKeyUp.call(this, context, event);
                    this.startIndex(1);
                    this.hasMoreResults(false);
                    this.m_currentItemContext = null;
                    return true;
                };
                TrimItemPicker.prototype.loadMore = function () {
                    this.isLoading(true);
                    var currentStartIndex = this.startIndex();
                    var nextStartIndex = currentStartIndex + this.pageSize;
                    this.startIndex(nextStartIndex);
                    this.doSearchInternal();
                };
                TrimItemPicker.prototype.setValue = function (value) {
                    _super.prototype.setValue.call(this, value);
                    if (value != null) {
                        _super.prototype.setRawValue.call(this, value.displayValue);
                    }
                };
                TrimItemPicker.prototype.getRequestData = function (contextItem, specificSearch) {
                    var displayProperty = this.getDisplayProperty();
                    var value = this.getRawValue();
                    if (specificSearch) {
                        value = specificSearch;
                    }
                    if (contextItem) {
                        value = this.getChildrenSearchString(contextItem);
                    }
                    var trimmedValue = value.trim().toLowerCase();
                    if (this.overrideValueProcessing(trimmedValue)) {
                        value = trimmedValue;
                    }
                    else {
                        if (this.appendAsterisk &&
                            trimmedValue != "all" &&
                            trimmedValue != "top" &&
                            trimmedValue.indexOf(':') == -1) {
                            value = "*" + value + "*";
                        }
                        value = this.processValue(value);
                    }
                    if (this.filterClause()) {
                        if (this.appendAsterisk &&
                            trimmedValue != "all" &&
                            trimmedValue != "top" &&
                            trimmedValue.toLowerCase() != HPTRIM.Messages.web_All.toLowerCase() &&
                            trimmedValue.indexOf(':') == -1) {
                            value = 'default:"' + value + '"';
                        }
                        value = "(" + value + ") " + HPTRIM.Messages.core_and + " (" + this.filterClause() + ")";
                    }
                    var query = value;
                    query = this.appendAdditionalQueryParms(query);
                    var properties = displayProperty;
                    properties += this.appendAdditionalProperties();
                    var requestData = {};
                    requestData['q'] = query;
                    requestData['format'] = "json";
                    requestData['start'] = this.startIndex();
                    requestData['properties'] = properties;
                    if (this.purpose || this.purpose === 0) {
                        requestData['purpose'] = this.purpose;
                    }
                    this.appendAdditionalData(requestData);
                    return requestData;
                };
                TrimItemPicker.prototype.overrideValueProcessing = function (value) {
                    var rawValue = value;
                    if (!isNaN(rawValue)) {
                        return true;
                    }
                    return false;
                };
                TrimItemPicker.prototype.processValue = function (value) {
                    return value;
                };
                TrimItemPicker.prototype.appendAsteriskForSpace = function (value) {
                    return value;
                };
                TrimItemPicker.prototype.getChildrenSearchString = function (item) {
                    return "";
                };
                TrimItemPicker.prototype.appendAdditionalData = function (data) {
                };
                TrimItemPicker.prototype.appendAdditionalQueryParms = function (query) {
                    return query;
                };
                TrimItemPicker.prototype.appendAdditionalProperties = function () {
                    var additionalPropertiesString = "";
                    if (this.additionalPropperties) {
                        additionalPropertiesString = this.additionalPropperties.join(',');
                    }
                    if (additionalPropertiesString) {
                        return "," + additionalPropertiesString;
                    }
                    else {
                        return "";
                    }
                };
                TrimItemPicker.prototype.getDisplayProperty = function () {
                    var displayProperty = this.displayProperty || this.baseObjectType.nameProperty;
                    return displayProperty;
                };
                TrimItemPicker.prototype.isSubsetOf = function (set, subset) {
                    var _loop_1 = function(i) {
                        if (!subset.some(function (x) { return x.Uri == set[i].Uri; })) {
                            return { value: false };
                        }
                    };
                    for (var i = 0; i < set.length; i++) {
                        var state_1 = _loop_1(i);
                        if (typeof state_1 === "object") return state_1.value;
                    }
                    return true;
                };
                TrimItemPicker.prototype.reject = function () {
                    if (this._currentRequestXhr && this._currentRequestXhr.state() == 'pending') {
                        this._currentRequestXhr.abort();
                    }
                };
                TrimItemPicker.prototype.doSearchInternal = function (contextItem) {
                    var self = this;
                    if (this.m_currentItemContext) {
                        if (!contextItem) {
                            contextItem = this.m_currentItemContext;
                        }
                    }
                    var displayProperty = this.getDisplayProperty();
                    var data = this.getRequestData(contextItem);
                    if (this.baseObjectType.Id == "WorkflowTemplate") {
                        data.q = data.q + " " + HP.HPTRIM.Messages.core_and + " usable";
                    }
                    this.setValue(null);
                    this.reject();
                    self._requestId++;
                    var currentRequestId = self._requestId;
                    self.isLoading(true);
                    this._currentRequestXhr = this.trimClient.doGet(this.baseObjectType.path, data)
                        .done(function (response) {
                        if (currentRequestId != self._requestId) {
                            return;
                        }
                        var results = response.Results;
                        var totalResults = response.TotalResults;
                        var _tempArrayAlreadyAdded = false;
                        var _tempArray = [];
                        for (var i = 0; i < results.length; i++) {
                            var item = results[i];
                            var displayPropertyValue = item[displayProperty].Value;
                            var foo = new HPTRIM.TrimBaseObject(self.baseObjectType, item.Uri, displayPropertyValue);
                            foo.jsonObject = item;
                            self.processReceivedItem(item, foo);
                            if (foo.jsonObject != null) {
                                _tempArray.push(foo);
                            }
                        }
                        self.hasMoreResults(response.HasMoreItems);
                        self.isLoading(false);
                        if (contextItem) {
                            if (_.isArray(contextItem.children())) {
                                if (self.isSubsetOf(contextItem.children(), _tempArray)) {
                                    contextItem.children(_tempArray);
                                }
                                else {
                                    var newList_1 = contextItem.children().concat(_tempArray);
                                    contextItem.children(newList_1);
                                }
                            }
                            else {
                                contextItem.children(_tempArray);
                                if (navigator.userAgent.match(/iPad/i)) {
                                    self.items(_tempArray);
                                }
                            }
                            self.m_currentItemContext = contextItem;
                        }
                        else {
                            if (self.items().length > 0) {
                                var newList = self.items().concat(_tempArray);
                                self.items(newList);
                            }
                            else {
                                self.items(_tempArray);
                            }
                            _tempArrayAlreadyAdded = true;
                        }
                        if (self.startIndex() > 1) {
                            if (!contextItem && !self.m_currentItemContext && !_tempArrayAlreadyAdded) {
                                var newList = self.items().concat(_tempArray);
                                self.items(newList);
                            }
                        }
                        else {
                            if (!contextItem) {
                                self.items(_tempArray);
                            }
                        }
                    })
                        .fail(function (err, xhr) {
                        var errorMessage = null;
                        try {
                            if (err.responseJSON) {
                                errorMessage = err.responseJSON.ResponseStatus.Message;
                            }
                            else if (err.status == 503) {
                                errorMessage = err.statusText;
                            }
                            else {
                                errorMessage = err.ResponseStatus.Message;
                            }
                        }
                        catch (ex) {
                        }
                        self.errorMessage(errorMessage);
                        self.error(errorMessage);
                        self.isLoading(false);
                    });
                };
                TrimItemPicker.prototype.onItemsChanged = function (context, changedItems) {
                    var items = this.items();
                    if (items.length == 0) {
                        this.errorMessage(HP.HPTRIM.Messages.web_noMatchfound);
                    }
                    else {
                        this.errorMessage("");
                    }
                    this.error(this.errorMessage());
                    items.length >= 1 ? function () { context.expand(); }() : context.collapse();
                };
                TrimItemPicker.prototype.processReceivedItem = function (item, trimObject) {
                    var self = this;
                    trimObject.onItemClick = function () {
                        self.onItemClick(self, trimObject);
                    };
                    if (!trimObject.displayValueExtra) {
                        trimObject.displayValueExtra = trimObject.displayValue;
                    }
                    if (trimObject.displayValueExtra == "") {
                        trimObject.displayValueExtra = trimObject.displayValue;
                    }
                    if (this.supportHierarchy) {
                        trimObject["updateBreadCrumb"] = function (data) {
                            self.updateBreadCrumb(data);
                        };
                    }
                };
                TrimItemPicker.prototype.truncateMiddle = function (title) {
                    if (title.length > 35) {
                        return title.substr(0, 15) + ' ... ' + title.substr(title.length - 35, title.length);
                    }
                    return title;
                };
                TrimItemPicker.prototype.onDisplayDivFocus = function () {
                    this.focus();
                    this.setupOnLostFocus();
                };
                TrimItemPicker.SHOW_SEARCH_DIALOG_TOPIC = "showSearchDialog";
                TrimItemPicker.SHOW_KWIK_SELECT_DIALOG_TOPIC = "showKwikDialog";
                return TrimItemPicker;
            }(ItemPicker));
            Field.TrimItemPicker = TrimItemPicker;
        })(Field = HPTRIM.Field || (HPTRIM.Field = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var Field;
        (function (Field) {
            var TrimChildObjectList = (function () {
                function TrimChildObjectList(trimClient, parentUri, childBaseObjectType) {
                    this.templateName = ko.observable("templates/Field/ChildObjectListField");
                    this.childObjects = ko.observableArray([]);
                    this.trimClient = trimClient;
                    this.parentUri = parentUri;
                    this.childBaseObjectType = childBaseObjectType;
                    this.trimProperties = ko.observableArray([]);
                }
                TrimChildObjectList.prototype.insertChild = function (childObject) { };
                TrimChildObjectList.prototype.load = function () {
                };
                return TrimChildObjectList;
            }());
            Field.TrimChildObjectList = TrimChildObjectList;
        })(Field = HPTRIM.Field || (HPTRIM.Field = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var Field;
        (function (Field) {
            var ClientMatterRolesField = (function (_super) {
                __extends(ClientMatterRolesField, _super);
                function ClientMatterRolesField(trimClient, forObjectUri) {
                    _super.call(this, trimClient, forObjectUri, 'ChildClientMatterRoles');
                    this.addChildObjectString = HP.HPTRIM.Messages.web_addClientMatterRole;
                    this.addChildObjectTemplateName = "AddClientMatterRoleTemplate";
                    this.forObjectUri = -1;
                    this.forObjectUri = forObjectUri;
                    this.roleLoc = new Field.LocationPicker(trimClient, HP.HPTRIM.Messages.web_location);
                    this.roleType = new HP.HPTRIM.Field.ClientMatterRoleTypeComboBox(trimClient);
                    this.roleType['Caption'] = "Role Type";
                    this.roleType['Value']("");
                    var myProperty = new HP.HPTRIM.Setup.TrimProperty('RecordClientMatterRoleRoleLocation', HP.HPTRIM.Messages.web_location, "");
                    myProperty['renderer'] = {
                        render: function (value) {
                            var iconId = "", displayValue = "";
                            if (value.hasIcon) {
                                iconId = value.iconId.toLowerCase();
                                displayValue = value.displayValue;
                            }
                            else {
                                iconId = value.Icon.Id.toLowerCase();
                                displayValue = value.LocationFormattedName.Value;
                            }
                            var returnValue = "<span style='padding-left:34px;height: 28px;  ' class='" + iconId + "_x24 media-object' > " + displayValue + "</span>";
                            return returnValue;
                        }
                    };
                    this.trimProperties([myProperty,
                        new HP.HPTRIM.Setup.TrimProperty('RecordClientMatterRoleRoleType', 'Role Type', "")
                    ]);
                    this.childObjects([]);
                    this.remove = function (childObject) {
                        childObject['Delete'] = true;
                        childObject['Visible'](false);
                    };
                    if (this.forObjectUri > -1) {
                        this.fetchValue();
                    }
                }
                ClientMatterRolesField.prototype.add = function () {
                    var loc = this.roleLoc.getValue();
                    if (!loc) {
                        this.roleLoc.errorMessage(HP.HPTRIM.Messages.core_genericFieldBlank);
                        return;
                    }
                    var newParty = new HPTRIM.TrimChildObject('RecordClientMatterRole', "0", loc.displayValue);
                    newParty['RecordClientMatterRoleRoleLocation'] = loc;
                    newParty['RecordClientMatterRoleRoleType'] = this.roleType.Value();
                    newParty['RecordClientMatterRoleRoleLocationUri'] = loc.Uri;
                    newParty['Visible'] = ko.observable(true);
                    this.insertChild(newParty);
                };
                ClientMatterRolesField.prototype.insertChild = function (childObject) {
                    this.childObjects.push(childObject);
                };
                ClientMatterRolesField.prototype.getValue = function () {
                    if (this.childObjects().length == 0) {
                        return null;
                    }
                    var returnChildObjects = [];
                    var value = this.childObjects();
                    for (var i = 0; i < value.length; i++) {
                        var currItem = value[i];
                        var childObject = {};
                        childObject['Delete'] = currItem.Delete;
                        childObject['TrimType'] = 'RecordClientMatterRole';
                        childObject['RecordClientMatterRoleRoleLocation'] = currItem.RecordClientMatterRoleRoleLocationUri;
                        childObject['RecordClientMatterRoleRoleType'] = currItem['RecordClientMatterRoleRoleType'];
                        childObject['Uri'] = currItem.Uri;
                        returnChildObjects.push(childObject);
                    }
                    return returnChildObjects;
                };
                ClientMatterRolesField.prototype.fetchValue = function () {
                    var _this = this;
                    var path = HPTRIM.BaseObjectTypes.Record.path + "/" + this.forObjectUri;
                    var requestObject = { properties: "ChildClientMatterRoles", format: "json" };
                    this.trimClient.doGet(path, requestObject).done(function (data) {
                        var cmRoles = data.Results[0].ChildClientMatterRoles;
                        var items = [];
                        _.each(cmRoles, function (role) {
                            var clientMatterParty = {
                                RecordClientMatterRoleRoleLocation: role.RecordClientMatterRoleRoleLocation,
                                RecordClientMatterRoleRoleType: role.RecordClientMatterRoleRoleType.Value,
                                RecordClientMatterRoleRoleLocationUri: role.RecordClientMatterRoleRoleLocation.Uri,
                                Uri: role.Uri,
                                Visible: ko.observable(true)
                            };
                            items.push(clientMatterParty);
                        });
                        _this.childObjects(items);
                    });
                };
                return ClientMatterRolesField;
            }(Field.TrimChildObjectList));
            Field.ClientMatterRolesField = ClientMatterRolesField;
        })(Field = HPTRIM.Field || (HPTRIM.Field = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var Field;
        (function (Field) {
            var ClientMatterPartiesField = (function (_super) {
                __extends(ClientMatterPartiesField, _super);
                function ClientMatterPartiesField(trimClient, forObjectUri) {
                    _super.call(this, trimClient, forObjectUri, 'ChildClientMatterParties');
                    this.addChildObjectString = HP.HPTRIM.Messages.web_addClientMatterParty;
                    this.addChildObjectTemplateName = "AddClientMatterPartyTemplate";
                    this.forObjectUri = -1;
                    this.forObjectUri = forObjectUri;
                    this.interestTypes = new Field.ClientMatterInterestTypes(trimClient);
                    this.interestTypes['Caption'] = "Interest Type";
                    this.interestTypes.Value("");
                    this.partyLocation = new Field.LocationPicker(trimClient, "Party Location");
                    this.partyType = new HP.HPTRIM.Field.ClientMatterPartyTypeComboBox(trimClient);
                    this.partyType['Caption'] = "Party Type";
                    this.partyType.Value("");
                    var myProperty = new HP.HPTRIM.Setup.TrimProperty('RecordClientMatterParty', 'Party', "");
                    myProperty['renderer'] = {
                        render: function (value) {
                            var iconId = "", displayValue = "";
                            if (value.hasIcon) {
                                iconId = value.iconId.toLowerCase();
                                displayValue = value.displayValue;
                            }
                            else {
                                iconId = value.Icon.Id.toLowerCase();
                                displayValue = value.LocationFormattedName.Value;
                            }
                            var returnValue = "<span style='padding-left:34px;height: 28px;  ' class='" + iconId + "_x24 media-object' > " + displayValue + "</span>";
                            return returnValue;
                        }
                    };
                    this.trimProperties([myProperty,
                        new HP.HPTRIM.Setup.TrimProperty('RecordClientMatterPartyPartyType', 'Party Type', ""),
                        new HP.HPTRIM.Setup.TrimProperty('RecordClientMatterPartyInterest', 'Interest', "")
                    ]);
                    this.childObjects([]);
                    this.remove = function (childObject) {
                        childObject['Delete'] = true;
                        childObject['Visible'](false);
                    };
                    if (this.forObjectUri > -1) {
                        this.fetchValue();
                    }
                }
                ClientMatterPartiesField.prototype.add = function () {
                    var partyLoc = this.partyLocation.getValue();
                    if (!partyLoc) {
                        this.partyLocation.errorMessage(HP.HPTRIM.Messages.core_genericFieldBlank);
                        return;
                    }
                    var party = this.partyLocation.getValue();
                    var newParty = new HPTRIM.TrimChildObject('RecordClientMatterParty', "0", party.displayValue);
                    newParty['RecordClientMatterParty'] = party;
                    newParty['RecordClientMatterPartyPartyType'] = this.partyType.Value();
                    newParty['RecordClientMatterPartyInterest'] = this.interestTypes.Value();
                    newParty['partyLocationUri'] = partyLoc.Uri;
                    newParty['Visible'] = ko.observable(true);
                    this.insertChild(newParty);
                };
                ClientMatterPartiesField.prototype.insertChild = function (childObject) {
                    this.childObjects.push(childObject);
                };
                ClientMatterPartiesField.prototype.getValue = function () {
                    if (this.childObjects().length == 0) {
                        return null;
                    }
                    var returnChildObjects = [];
                    var value = this.childObjects();
                    for (var i = 0; i < value.length; i++) {
                        var currItem = value[i];
                        var childObject = {};
                        childObject['Delete'] = currItem.Delete;
                        childObject['TrimType'] = 'RecordClientMatterParty';
                        childObject['RecordClientMatterPartyParty'] = currItem.partyLocationUri;
                        childObject['RecordClientMatterPartyPartyType'] = currItem['RecordClientMatterPartyPartyType'];
                        childObject['RecordClientMatterPartyInterest'] = currItem['RecordClientMatterPartyInterest'];
                        childObject['Uri'] = currItem.Uri;
                        returnChildObjects.push(childObject);
                    }
                    return returnChildObjects;
                };
                ClientMatterPartiesField.prototype.fetchValue = function () {
                    var _this = this;
                    var path = HPTRIM.BaseObjectTypes.Record.path + "/" + this.forObjectUri;
                    var requestObject = { properties: "ChildClientMatterParties", format: "json" };
                    this.trimClient.doGet(path, requestObject).done(function (data) {
                        var cmParties = data.Results[0].ChildClientMatterParties;
                        var items = [];
                        _.each(cmParties, function (party) {
                            var clientMatterParty = {
                                RecordClientMatterPartyInterest: party.RecordClientMatterPartyInterest.Value,
                                RecordClientMatterPartyParty: party.RecordClientMatterPartyParty.Uri,
                                RecordClientMatterParty: party.RecordClientMatterPartyParty,
                                RecordClientMatterPartyPartyType: party.RecordClientMatterPartyPartyType.Value,
                                Uri: party.Uri,
                                Visible: ko.observable(true)
                            };
                            items.push(clientMatterParty);
                        });
                        _this.childObjects(items);
                    });
                };
                return ClientMatterPartiesField;
            }(Field.TrimChildObjectList));
            Field.ClientMatterPartiesField = ClientMatterPartiesField;
        })(Field = HPTRIM.Field || (HPTRIM.Field = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var Field;
        (function (Field) {
            var RecordPicker = (function (_super) {
                __extends(RecordPicker, _super);
                function RecordPicker(trimClient, label, isMandatory, resultExpansionOverlay, errorHandler) {
                    var fieldOption = { baseObjectType: HPTRIM.BaseObjectTypes.Record, label: label, supportHierarchy: true, isMandatory: isMandatory, appendAsterisk: false, resultExpansionOverlay: resultExpansionOverlay, errorHandler: errorHandler };
                    _super.call(this, trimClient, fieldOption);
                    this.setAdditionalProperties();
                    this.displayProperty = HPTRIM.Utils.TrimHelper.getDisplayProperty(HPTRIM.BaseObjectTypes.Record);
                }
                RecordPicker.prototype.setAdditionalProperties = function () {
                    this.additionalPropperties = ["IsContainer", "RecordRecordType", "RecordTitle"];
                };
                RecordPicker.prototype.setValueFromInfoObject = function (infoObject) {
                    var trimObject = new HPTRIM.TrimBaseObject(HPTRIM.BaseObjectTypes.Record, infoObject.Uri);
                    trimObject.hasChildren = function () {
                        var hasChildren = infoObject["RecordIsContainer"].Value;
                        return hasChildren;
                    };
                    var self = this;
                    trimObject.getChildren = function () {
                        self.getChildrenFor(trimObject);
                    };
                    if (infoObject.RecordRecordType && infoObject.RecordRecordType.Icon) {
                        trimObject.hasIcon = true;
                        trimObject.iconId = infoObject.RecordRecordType.Icon.Id;
                        trimObject["iconClass"] = trimObject.iconId.toLowerCase() + '_x16 media-object';
                    }
                    if (infoObject["RecordNumber"].Value && infoObject["RecordTitle"].Value) {
                        trimObject.displayValue = infoObject["RecordNumber"].Value + ": " + infoObject["RecordTitle"].Value;
                    }
                    else if (infoObject["RecordNumber"].Value) {
                        trimObject.displayValue = infoObject["RecordNumber"].Value;
                    }
                    else {
                        trimObject.displayValue = HPTRIM.BaseObjectTypes.Record.Caption + " " + infoObject.Uri;
                    }
                    trimObject["RecordNumber"] = infoObject["RecordNumber"];
                    trimObject.displayValueExtra = trimObject.displayValue;
                    this.setValue(trimObject);
                };
                RecordPicker.prototype.processReceivedItem = function (item, trimObject) {
                    trimObject.hasChildren = function () {
                        var hasChildren = item["RecordIsContainer"].Value;
                        return hasChildren;
                    };
                    var self = this;
                    trimObject.getChildren = function () {
                        self.getChildrenFor(trimObject);
                    };
                    trimObject.hasIcon = true;
                    trimObject.iconId = item.RecordRecordType.Icon.Id;
                    trimObject.displayValueExtra = item["RecordNumber"].Value + ":" + item["RecordTitle"].Value;
                    _super.prototype.processReceivedItem.call(this, item, trimObject);
                };
                RecordPicker.prototype.getChildrenFor = function (item) {
                    this.selectedListItem(item);
                    this.doSearchInternal(item);
                };
                RecordPicker.prototype.getChildrenSearchString = function (item) {
                    return "container:" + item.Uri;
                };
                return RecordPicker;
            }(Field.TrimItemPicker));
            Field.RecordPicker = RecordPicker;
            var ContainerPicker = (function (_super) {
                __extends(ContainerPicker, _super);
                function ContainerPicker(trimClient, label, isMandatory, resultExpansionOverlay, errorHandler) {
                    _super.call(this, trimClient, label, isMandatory, resultExpansionOverlay, errorHandler);
                    this.displayProperty = HPTRIM.Utils.TrimHelper.getDisplayProperty(HPTRIM.BaseObjectTypes.Record);
                    this.appendAsterisk = true;
                    this.setAdditionalProperties();
                }
                ContainerPicker.prototype.setAdditionalProperties = function () {
                    this.additionalPropperties = ["IsContainer", "RecordNumber", "RecordTitle", "RecordRecordType"];
                };
                ContainerPicker.prototype.defaultQuery = function () {
                    return 'myContainers';
                };
                ContainerPicker.prototype.getRequestData = function (contextItem, specificSearch) {
                    var displayProperty = this.getDisplayProperty();
                    var value = this.getRawValue();
                    if (specificSearch) {
                        value = specificSearch;
                    }
                    if (contextItem) {
                        value = this.getChildrenSearchString(contextItem);
                    }
                    var trimmedValue = value.trim().toLowerCase();
                    if (this.overrideValueProcessing(trimmedValue)) {
                        value = trimmedValue;
                    }
                    else {
                        if (this.appendAsterisk &&
                            trimmedValue != "all" &&
                            trimmedValue != "top" &&
                            trimmedValue != "mycontainers" &&
                            trimmedValue.indexOf(':') == -1) {
                            value = "*" + value + "*";
                            value = this.appendAsteriskForSpace(value);
                        }
                        value = this.processValue(value);
                    }
                    if (this.filterClause()) {
                        if (this.appendAsterisk &&
                            trimmedValue != "all" &&
                            trimmedValue != "top" &&
                            trimmedValue != "mycontainers" &&
                            trimmedValue.toLowerCase() != HPTRIM.Messages.web_All.toLowerCase() &&
                            trimmedValue.indexOf(':') == -1) {
                            value = 'default:"' + value + '"';
                        }
                        value = "(" + value + ") " + HPTRIM.Messages.core_and + " (" + this.filterClause() + ")";
                    }
                    var query = value;
                    if (!contextItem) {
                        query = this.appendAdditionalQueryParms(query);
                    }
                    var properties = displayProperty;
                    properties += this.appendAdditionalProperties();
                    var requestData = {};
                    requestData['q'] = query;
                    requestData['format'] = "json";
                    requestData['start'] = this.startIndex();
                    requestData['properties'] = properties;
                    if (this.purpose || this.purpose === 0) {
                        requestData['purpose'] = this.purpose;
                    }
                    this.appendAdditionalData(requestData);
                    return requestData;
                };
                ContainerPicker.prototype.processReceivedItem = function (item, trimObject) {
                    trimObject.hasIcon = true;
                    trimObject.iconId = item.RecordRecordType.Icon.Id;
                    trimObject.displayValueExtra = item["RecordNumber"].Value + ": " + item["RecordTitle"].Value;
                    _super.prototype.processReceivedItem.call(this, item, trimObject);
                };
                ContainerPicker.prototype.setValue = function (value) {
                    _super.prototype.setValue.call(this, value);
                    if (value != null) {
                        _super.prototype.setRawValue.call(this, value.displayValue);
                    }
                };
                ContainerPicker.prototype.processValue = function (value) {
                    return _super.prototype.processValue.call(this, value);
                };
                ContainerPicker.prototype.appendAdditionalQueryParms = function (query) {
                    var clause = "type:[level>2]";
                    if (query) {
                        return query + " " + HPTRIM.Messages.core_and + " " + clause;
                    }
                    return clause;
                };
                return ContainerPicker;
            }(RecordPicker));
            Field.ContainerPicker = ContainerPicker;
        })(Field = HPTRIM.Field || (HPTRIM.Field = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var Field;
        (function (Field) {
            var LocationPicker = (function (_super) {
                __extends(LocationPicker, _super);
                function LocationPicker(trimClient, label, isMandatory, errorHandler, multiSelect) {
                    if (!label) {
                        label = "";
                    }
                    var fieldOption = { baseObjectType: HPTRIM.BaseObjectTypes.Location, label: label, supportHierarchy: true, isMandatory: isMandatory, appendAsterisk: true, errorHandler: errorHandler, multiSelect: multiSelect };
                    _super.call(this, trimClient, fieldOption);
                    this.setAdditionalProperties();
                    this.displayProperty = "LocationSortName";
                    this.displayProperty = HPTRIM.Utils.TrimHelper.getDisplayProperty(HPTRIM.BaseObjectTypes.Location);
                    this.purpose = 24;
                }
                LocationPicker.prototype.setAdditionalProperties = function () {
                    this.additionalPropperties = ["AllMembers", "Icon"];
                };
                LocationPicker.prototype.setValue = function (value) {
                    _super.prototype.setValue.call(this, value);
                    if (!this.fieldObject) {
                        if (value && value.hasIcon) {
                            this.isEditing(false);
                        }
                        else if (value && !value.hasIcon) {
                            this.isEditing(true);
                        }
                    }
                    if (value != null) {
                        var locationSortName = value["LocationSortName"];
                        if (locationSortName) {
                            if (locationSortName.Value || locationSortName.Value === "") {
                                _super.prototype.setRawValue.call(this, locationSortName.Value);
                            }
                            else {
                                _super.prototype.setRawValue.call(this, locationSortName);
                            }
                        }
                        else {
                            _super.prototype.setRawValue.call(this, value.displayValue);
                        }
                    }
                };
                LocationPicker.prototype.overrideValueProcessing = function (value) {
                    if (value.toLowerCase() == HPTRIM.Messages.bob_sbMe.toLowerCase()) {
                        return true;
                    }
                    var rawValue = value;
                    if (!isNaN(rawValue)) {
                        return true;
                    }
                    if (value.indexOf(':') != -1) {
                        return true;
                    }
                    return false;
                };
                LocationPicker.prototype.processValue = function (value) {
                    var rawValue = value;
                    if (!isNaN(rawValue)) {
                        return value;
                    }
                    if (value.indexOf(',') > 0) {
                        return '"' + value + '"';
                    }
                    return value;
                };
                LocationPicker.prototype.processReceivedItem = function (item, trimObject) {
                    trimObject.hasChildren = function () {
                        var hasChildren = item["LocationAllMembers"].Value;
                        return hasChildren;
                    };
                    var self = this;
                    trimObject.getChildren = function () {
                        self.getChildrenFor(trimObject);
                    };
                    trimObject.hasIcon = true;
                    trimObject.iconId = item["Icon"].Id;
                    _super.prototype.processReceivedItem.call(this, item, trimObject);
                };
                LocationPicker.prototype.getChildrenFor = function (item) {
                    this.selectedListItem(item);
                    this.startIndex(1);
                    this.doSearchInternal(item);
                };
                LocationPicker.prototype.getChildrenSearchString = function (item) {
                    return "members:" + item.Uri;
                };
                LocationPicker.prototype.appendAdditionalData = function (data) {
                    data['filter'] = this.getLocationActiveString();
                };
                LocationPicker.prototype.getLocationActiveString = function () {
                    var clause;
                    if (this.controlContainerId == "RecordAuthor") {
                        return clause = HP.HPTRIM.Messages.web_usable;
                    }
                    else {
                        return clause = HP.HPTRIM.Messages.bob_objectIsActive;
                    }
                };
                return LocationPicker;
            }(Field.TrimItemPicker));
            Field.LocationPicker = LocationPicker;
        })(Field = HPTRIM.Field || (HPTRIM.Field = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var Field;
        (function (Field) {
            var UserLabelPicker = (function (_super) {
                __extends(UserLabelPicker, _super);
                function UserLabelPicker(trimClient, label, isMandatory, errorHandler, multiSelect) {
                    var fieldOption = { baseObjectType: HPTRIM.BaseObjectTypes.UserLabel, label: label, supportHierarchy: true, isMandatory: isMandatory, appendAsterisk: true, errorHandler: errorHandler, multiSelect: multiSelect };
                    _super.call(this, trimClient, fieldOption);
                    if (!label) {
                        label = "";
                    }
                    this.setAdditionalProperties();
                    this.displayProperty = HPTRIM.Utils.TrimHelper.getDisplayProperty(HPTRIM.BaseObjectTypes.UserLabel);
                }
                UserLabelPicker.prototype.setAdditionalProperties = function () {
                    this.additionalPropperties = ["Icon"];
                };
                UserLabelPicker.prototype.overrideValueProcessing = function (value) {
                    return false;
                };
                UserLabelPicker.prototype.processReceivedItem = function (item, trimObject) {
                    trimObject.hasChildren = function () {
                        return true;
                    };
                    var self = this;
                    trimObject.getChildren = function () {
                        self.getChildrenFor(trimObject);
                    };
                    if (item["Icon"]) {
                        trimObject.hasIcon = true;
                        trimObject.iconId = item["Icon"].Id;
                    }
                    _super.prototype.processReceivedItem.call(this, item, trimObject);
                };
                UserLabelPicker.prototype.getChildrenFor = function (item) {
                    this.selectedListItem(item);
                    this.doSearchInternal(item);
                };
                UserLabelPicker.prototype.getChildrenSearchString = function (item) {
                    return "parent:" + item.Uri;
                };
                return UserLabelPicker;
            }(Field.TrimItemPicker));
            Field.UserLabelPicker = UserLabelPicker;
        })(Field = HPTRIM.Field || (HPTRIM.Field = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var Field;
        (function (Field) {
            var MultiLocationPicker = (function (_super) {
                __extends(MultiLocationPicker, _super);
                function MultiLocationPicker(trimClient, label, isMandatory, errorHandler) {
                    if (!label) {
                        label = "";
                    }
                    _super.call(this, trimClient, label, isMandatory, errorHandler, true);
                }
                MultiLocationPicker.prototype.getValueEx = function () {
                    return this.selectedItems();
                };
                return MultiLocationPicker;
            }(Field.LocationPicker));
            Field.MultiLocationPicker = MultiLocationPicker;
        })(Field = HPTRIM.Field || (HPTRIM.Field = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var Field;
        (function (Field) {
            var JurisdictionPicker = (function (_super) {
                __extends(JurisdictionPicker, _super);
                function JurisdictionPicker(trimClient, label, isMandatory, errorHandler, multiSelect) {
                    var _this = this;
                    if (!label) {
                        label = "";
                    }
                    var fieldOption = { baseObjectType: HPTRIM.BaseObjectTypes.Jurisdiction, label: label, supportHierarchy: true, isHidden: false, isMandatory: isMandatory, appendAsterisk: true, errorHandler: errorHandler, multiSelect: multiSelect };
                    _super.call(this, trimClient, fieldOption);
                    this.setAdditionalProperties();
                    this.displayProperty = "JurisdictionName";
                    this.displayProperty = HPTRIM.Utils.TrimHelper.getDisplayProperty(HPTRIM.BaseObjectTypes.Jurisdiction);
                    this.purpose = 24;
                    this.additionalHandlingOnItemClick = function (isMandatory, caption) {
                        _this.rawValue('');
                        _this.error('');
                        if (_this.getValueEx().length < 1) {
                            if (isMandatory) {
                                var msg = HP.HPTRIM.Messages.web_mandatoryFieldNeedsValue;
                                msg = msg.replace("{0}", caption);
                                _this.error(msg);
                            }
                        }
                        _this.errorMessage(_this.error());
                    };
                }
                JurisdictionPicker.prototype.setAdditionalProperties = function () {
                    this.additionalPropperties = ["JurisdictionMembers", "Icon"];
                };
                JurisdictionPicker.prototype.setValue = function (value) {
                    _super.prototype.setValue.call(this, value);
                };
                JurisdictionPicker.prototype.overrideValueProcessing = function (value) {
                    if (value.toLowerCase() == HPTRIM.Messages.bob_sbMe.toLowerCase()) {
                        return true;
                    }
                    var rawValue = value;
                    if (!isNaN(rawValue)) {
                        return true;
                    }
                    if (value.indexOf(':') != -1) {
                        return true;
                    }
                    return false;
                };
                JurisdictionPicker.prototype.processValue = function (value) {
                    var rawValue = value;
                    if (!isNaN(rawValue)) {
                        return value;
                    }
                    if (value.indexOf(',') > 0) {
                        return '"' + value + '"';
                    }
                    return value;
                };
                JurisdictionPicker.prototype.processReceivedItem = function (item, trimObject) {
                    var nameFound = false;
                    if (item.JurisdictionMembers.Value.length == 0) {
                        var jurisName = item.JurisdictionName.Value;
                        _.each(this.selectedItems(), function (juris) {
                            if (juris.displayValue == jurisName) {
                                nameFound = true;
                                return;
                            }
                        });
                    }
                    if (nameFound) {
                        trimObject.jsonObject = null;
                        return;
                    }
                    trimObject.hasChildren = function () {
                        var hasChildren = item["JurisdictionMembers"].Value;
                        return hasChildren;
                    };
                    var self = this;
                    trimObject.getChildren = function () {
                        self.getChildrenFor(trimObject);
                    };
                    trimObject.hasIcon = true;
                    trimObject.iconId = item["Icon"].Id;
                    _super.prototype.processReceivedItem.call(this, item, trimObject);
                };
                JurisdictionPicker.prototype.getChildrenFor = function (item) {
                    this.selectedListItem(item);
                    this.doSearchInternal(item);
                };
                JurisdictionPicker.prototype.getChildrenSearchString = function (item) {
                    return "members:" + item.Uri;
                };
                JurisdictionPicker.prototype.appendAdditionalQueryParms = function (query) {
                    var clause = "active";
                    if (query) {
                        return 'description:' + query + " " + HPTRIM.Messages.web_or + " default:" + query + " " + HPTRIM.Messages.core_and + " " + clause;
                    }
                    return clause;
                };
                JurisdictionPicker.prototype.appendAdditionalData = function (data) {
                };
                return JurisdictionPicker;
            }(Field.TrimItemPicker));
            Field.JurisdictionPicker = JurisdictionPicker;
        })(Field = HPTRIM.Field || (HPTRIM.Field = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var Field;
        (function (Field) {
            var MultiJurisdictionPicker = (function (_super) {
                __extends(MultiJurisdictionPicker, _super);
                function MultiJurisdictionPicker(trimClient, label, isMandatory, errorHandler) {
                    if (!label) {
                        label = "";
                    }
                    _super.call(this, trimClient, label, isMandatory, errorHandler, true);
                    this.template = "templates/Field/MultiTreeItemPicker";
                    this.enableMultiItemPickerSearch(true);
                }
                MultiJurisdictionPicker.prototype.getValueEx = function () {
                    var retValue = '';
                    _.each(this.selectedItems(), function (anItem) {
                        retValue = retValue + anItem.displayValue + ';';
                    });
                    if (retValue.length > 0) {
                        retValue = retValue.substr(0, retValue.length - 1);
                    }
                    return retValue;
                };
                MultiJurisdictionPicker.prototype.setValue = function (value) {
                    if (value != null) {
                        var jurisList = value.displayValue.split(";");
                        if (jurisList.length > 0) {
                            this.rawValue('');
                            this.error('');
                            var jurisObjList = [];
                            _.each(jurisList, function (juris) {
                                jurisObjList.push({ JurisdictionName: juris, displayValue: juris });
                            });
                        }
                        this.selectedItems(jurisObjList);
                        this.errorMessage(this.error());
                    }
                };
                MultiJurisdictionPicker.prototype.showJurisdictionsPanel = function () {
                    root.multipleJurisdictionPanel.setCallingControl(this);
                    root.multipleJurisdictionPanel.setSelectedItems(this.selectedItems().slice());
                    root.showOverlay(root.multipleJurisdictionPanel);
                };
                MultiJurisdictionPicker.prototype.onblur = function (context, event) {
                    if (context != undefined && context != null && context.hasFocus() == false) {
                        this.rawValue('');
                        this.error('');
                        if (this.getValueEx().length < 1) {
                            if (context.Mandatory || context.isMandatory) {
                                var msg = HP.HPTRIM.Messages.web_mandatoryFieldNeedsValue;
                                msg = msg.replace("{0}", context.Caption);
                                this.error(msg);
                            }
                        }
                        this.errorMessage(this.error());
                    }
                };
                return MultiJurisdictionPicker;
            }(Field.JurisdictionPicker));
            Field.MultiJurisdictionPicker = MultiJurisdictionPicker;
        })(Field = HPTRIM.Field || (HPTRIM.Field = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var Field;
        (function (Field) {
            var SchedulePicker = (function (_super) {
                __extends(SchedulePicker, _super);
                function SchedulePicker(trimClient, label, isMandatory, errorHandler) {
                    var fieldOption = { baseObjectType: HPTRIM.BaseObjectTypes.Schedule, label: label, supportHierarchy: true, isMandatory: isMandatory, appendAsterisk: true, errorHandler: errorHandler };
                    _super.call(this, trimClient, fieldOption);
                    this.setAdditionalProperties();
                    this.displayProperty = HPTRIM.Utils.TrimHelper.getDisplayProperty(HPTRIM.BaseObjectTypes.Schedule);
                    this.filterClause("Usable");
                }
                SchedulePicker.prototype.setAdditionalProperties = function () {
                    this.additionalPropperties = ["HasChildSchedules", "Icon"];
                };
                SchedulePicker.prototype.processReceivedItem = function (item, trimObject) {
                    trimObject.hasChildren = function () {
                        var hasChildren = item["ScheduleHasChildSchedules"].Value;
                        return hasChildren;
                    };
                    var self = this;
                    trimObject.getChildren = function () {
                        self.getChildrenFor(trimObject);
                    };
                    trimObject.hasIcon = true;
                    trimObject.iconId = item["Icon"].Id;
                    _super.prototype.processReceivedItem.call(this, item, trimObject);
                };
                SchedulePicker.prototype.processValue = function (value) {
                    if (value == "all") {
                        return value;
                    }
                    if (value.toLowerCase() == HPTRIM.Messages.web_All.toLowerCase()) {
                        return value;
                    }
                    if (value == "top") {
                        return value;
                    }
                    var rawValue = value;
                    if (_.isNumber(rawValue)) {
                        return rawValue;
                    }
                    if (_.isString(rawValue)) {
                        var rawValueAsString = rawValue;
                        if (rawValueAsString && rawValueAsString.lastIndexOf("word:", 0) === 0) {
                            return rawValueAsString;
                        }
                        if (rawValueAsString.indexOf(":") > 0) {
                            return rawValueAsString;
                        }
                        return "word:" + rawValueAsString + "";
                    }
                    return rawValue;
                };
                SchedulePicker.prototype.getChildrenFor = function (item) {
                    this.selectedListItem(item);
                    this.doSearchInternal(item);
                };
                SchedulePicker.prototype.getChildrenSearchString = function (item) {
                    return "parent:" + item.Uri;
                };
                return SchedulePicker;
            }(Field.TrimItemPicker));
            Field.SchedulePicker = SchedulePicker;
        })(Field = HPTRIM.Field || (HPTRIM.Field = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var Field;
        (function (Field) {
            var KeywordsPageField = (function (_super) {
                __extends(KeywordsPageField, _super);
                function KeywordsPageField(trimClient, forObjectUri) {
                    var _this = this;
                    _super.call(this, trimClient, forObjectUri, 'ChildKeywords');
                    this.addChildObjectString = HP.HPTRIM.Messages.web_Add + " " + HP.HPTRIM.BaseObjectTypes.Keyword.Caption;
                    this.addChildObjectTemplateName = "KeywordsPageTemplate";
                    this.forObjectUri = -1;
                    this.keywordPicker = new Field.KeywordPicker(this.trimClient, HP.HPTRIM.BaseObjectTypes.Keyword.Caption, false);
                    this.keywordPicker.afterItemClicked = function (item) {
                        _this.add(item);
                    };
                    this.forObjectUri = forObjectUri;
                    var myProperty = new HP.HPTRIM.Setup.TrimProperty('RecordKeyword', HP.HPTRIM.BaseObjectTypes.Keyword.Caption, "");
                    myProperty['renderer'] =
                        {
                            render: function (value) {
                                var iconId = "", displayValue = "";
                                if (value.hasIcon) {
                                    iconId = value.iconId.toLowerCase();
                                }
                                displayValue = value.displayValue;
                                var returnValue = "<span style='padding-left:34px;' class='" + iconId + "_x16 media-object' > " + displayValue + "</span>";
                                return returnValue;
                            }
                        };
                    this.trimProperties([
                        myProperty
                    ]);
                    this.childObjects([]);
                    this.remove = function (childObject) {
                        childObject['Delete'] = true;
                        childObject['Visible'](false);
                    };
                    if (this.forObjectUri > -1) {
                        this.fetchValue();
                    }
                }
                KeywordsPageField.prototype.add = function (item) {
                    var keyword = item;
                    if (!keyword) {
                        this.keywordPicker.error(HP.HPTRIM.Messages.web_makeValidSelection);
                        return;
                    }
                    var newKeyword = new HPTRIM.TrimChildObject('RecordKeyword', keyword.displayValue);
                    newKeyword['RecordKeyword'] = keyword;
                    newKeyword['IsNew'] = true;
                    newKeyword.Uri = keyword.Uri;
                    newKeyword['Delete'] = false;
                    newKeyword['Visible'] = ko.observable(true);
                    this.insertChild(newKeyword);
                    this.keywordPicker.clear();
                    this.keywordPicker.isEditing(true);
                };
                KeywordsPageField.prototype.insertChild = function (childObject) {
                    this.childObjects.push(childObject);
                };
                KeywordsPageField.prototype.getValue = function (getNewThesaurus) {
                    if (this.childObjects().length == 0) {
                        return null;
                    }
                    if (getNewThesaurus) {
                        var returnChildObjects = [];
                        var value = this.childObjects();
                        for (var i = 0; i < value.length; i++) {
                            var currItem = value[i];
                            if (currItem.Delete) {
                                continue;
                            }
                            if (currItem.Visible() && currItem.IsNew == true) {
                                var childObject = {};
                                childObject["__type"] = "HP.HPTRIM.ServiceModel.AttachKeyword";
                                childObject['AttachKeywordKeywordToAttach'] = currItem.Uri;
                                returnChildObjects.push(childObject);
                            }
                        }
                        return returnChildObjects;
                    }
                    else {
                        var returnChildObjects = [];
                        var value = this.childObjects();
                        for (var i = 0; i < value.length; i++) {
                            var currItem = value[i];
                            if (currItem.Delete) {
                                var childObject = {};
                                childObject['Uri'] = currItem.Uri;
                                childObject['Delete'] = true;
                                returnChildObjects.push(childObject);
                            }
                        }
                        return returnChildObjects;
                    }
                };
                KeywordsPageField.prototype.fetchValue = function () {
                    var _this = this;
                    var path = HPTRIM.BaseObjectTypes.Record.path + "/" + this.forObjectUri;
                    var requestObject = { properties: "ChildKeywords", format: "json" };
                    this.trimClient.doGet(path, requestObject).done(function (data) {
                        var keywords = data.Results[0].ChildKeywords;
                        var items = [];
                        _.each(keywords, function (item) {
                            var newKeyword = new HPTRIM.TrimChildObject('RecordKeyword', item.Uri, item.RecordKeywordDescription.Value);
                            if (item.RecordKeywordKeyword) {
                                var icon = item.RecordKeywordKeyword.Icon;
                                if (icon) {
                                    newKeyword.hasIcon = true;
                                    newKeyword.iconId = icon.Id;
                                }
                            }
                            newKeyword['RecordKeyword'] = newKeyword;
                            newKeyword['Visible'] = ko.observable(true);
                            items.push(newKeyword);
                        });
                        _this.childObjects(items);
                    });
                };
                return KeywordsPageField;
            }(Field.TrimChildObjectList));
            Field.KeywordsPageField = KeywordsPageField;
        })(Field = HPTRIM.Field || (HPTRIM.Field = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var Field;
        (function (Field) {
            var KeywordPicker = (function (_super) {
                __extends(KeywordPicker, _super);
                function KeywordPicker(trimClient, label, isMandatory, errorHandler) {
                    var fieldOption = { baseObjectType: HPTRIM.BaseObjectTypes.Keyword, label: label, supportHierarchy: true, isMandatory: isMandatory, appendAsterisk: true, errorHandler: errorHandler };
                    _super.call(this, trimClient, fieldOption);
                    this.setAdditionalProperties();
                    this.displayProperty = HPTRIM.Utils.TrimHelper.getDisplayProperty(HPTRIM.BaseObjectTypes.Keyword);
                    this.multiSelect = false;
                    this.appendAsterisk = true;
                }
                KeywordPicker.prototype.setAdditionalProperties = function () {
                    this.additionalPropperties = ["Icon"];
                };
                KeywordPicker.prototype.processReceivedItem = function (item, trimObject) {
                    trimObject.hasChildren = function () {
                        var hasChildren = true;
                        return hasChildren;
                    };
                    var self = this;
                    trimObject.getChildren = function () {
                        self.getChildrenFor(trimObject);
                    };
                    trimObject.hasIcon = true;
                    trimObject.iconId = item["Icon"].Id;
                    _super.prototype.processReceivedItem.call(this, item, trimObject);
                };
                KeywordPicker.prototype.getChildrenFor = function (item) {
                    this.selectedListItem(item);
                    this.doSearchInternal(item);
                };
                KeywordPicker.prototype.getChildrenSearchString = function (item) {
                    return "narrower:" + item.Uri;
                };
                return KeywordPicker;
            }(Field.TrimItemPicker));
            Field.KeywordPicker = KeywordPicker;
        })(Field = HPTRIM.Field || (HPTRIM.Field = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var Field;
        (function (Field) {
            var WorkflowTemplate = (function (_super) {
                __extends(WorkflowTemplate, _super);
                function WorkflowTemplate(trimClient, label, isMandatory, errorHandler) {
                    var fieldOption = { baseObjectType: HPTRIM.BaseObjectTypes.WorkflowTemplate, label: label, supportHierarchy: false, isMandatory: isMandatory, appendAsterisk: true, errorHandler: errorHandler };
                    _super.call(this, trimClient, fieldOption);
                    this.setAdditionalProperties();
                    this.displayProperty = HPTRIM.Utils.TrimHelper.getDisplayProperty(HPTRIM.BaseObjectTypes.WorkflowTemplate);
                    this.displayProperty = "WorkflowTemplateName";
                }
                WorkflowTemplate.prototype.onTextFieldClick = function () {
                    if (this.rawValue() == '') {
                        this.setRawValue('all');
                        this.doSearch();
                    }
                };
                WorkflowTemplate.prototype.setAdditionalProperties = function () {
                    this.additionalPropperties = ["name", "Icon", "initrecordbehavior"];
                };
                WorkflowTemplate.prototype.processReceivedItem = function (item, trimObject) {
                    trimObject.hasIcon = true;
                    trimObject.iconId = item["Icon"].Id;
                    trimObject['initRecordBehavior'] = item['WorkflowTemplateInitRecordBehavior'].Value;
                    _super.prototype.processReceivedItem.call(this, item, trimObject);
                };
                WorkflowTemplate.prototype.appendAdditionalData = function (data) {
                    data.sortBy = 'name';
                };
                return WorkflowTemplate;
            }(Field.TrimItemPicker));
            Field.WorkflowTemplate = WorkflowTemplate;
        })(Field = HPTRIM.Field || (HPTRIM.Field = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var Field;
        (function (Field) {
            var RecordTypePicker = (function (_super) {
                __extends(RecordTypePicker, _super);
                function RecordTypePicker(trimClient, label, isMandatory, resultExpansionOverlay) {
                    var fieldOption = { baseObjectType: HPTRIM.BaseObjectTypes.RecordType, label: label, supportHiearchy: false, isMandatory: isMandatory, appendAsterisk: true, resultExpansionOverlay: resultExpansionOverlay };
                    _super.call(this, trimClient, fieldOption);
                    this.forRecordCreation = false;
                    this.setAdditionalProperties();
                    this.disableManualRecords = false;
                }
                RecordTypePicker.prototype.setAdditionalProperties = function () {
                    this.additionalPropperties = ["icon", "RecordTypeTitlingMethod", "RecordTypeNumberPattern", "RecordTypeLastNumber"];
                };
                RecordTypePicker.prototype.appendAdditionalData = function (data) {
                    if (data.purpose) {
                        return;
                    }
                    if (this.forRecordCreation == true) {
                        data.purpose = 4;
                        this.forRecordCreation = false;
                    }
                    else {
                        if (this.disableManualRecords) {
                            data.purpose = HP.HPTRIM.RecordTypeFilter.AllForCreateNoManual;
                        }
                        else {
                            data.purpose = HP.HPTRIM.RecordTypeFilter.ForRecordSearch;
                        }
                    }
                };
                RecordTypePicker.prototype.processReceivedItem = function (item, trimObject) {
                    trimObject.hasIcon = true;
                    trimObject.iconId = item["Icon"].Id;
                    _super.prototype.processReceivedItem.call(this, item, trimObject);
                };
                return RecordTypePicker;
            }(Field.TrimItemPicker));
            Field.RecordTypePicker = RecordTypePicker;
        })(Field = HPTRIM.Field || (HPTRIM.Field = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var Field;
        (function (Field) {
            var ClassificationPicker = (function (_super) {
                __extends(ClassificationPicker, _super);
                function ClassificationPicker(trimClient, label, isMandatory, resultExpansionOverlay, errorHandler) {
                    var clsFieldOption = {
                        baseObjectType: HPTRIM.BaseObjectTypes.Classification,
                        label: label,
                        supportHierarchy: true,
                        isMandatory: isMandatory,
                        appendAsterisk: true,
                        resultExpansionOverlay: resultExpansionOverlay,
                        errorHandler: errorHandler
                    };
                    _super.call(this, trimClient, clsFieldOption);
                    this.displayProperty = HPTRIM.Utils.TrimHelper.getDisplayProperty(HPTRIM.BaseObjectTypes.Classification);
                    this.setAdditionalProperties();
                }
                ClassificationPicker.prototype.onTextFieldClick = function () {
                    if (this.rawValue() == '') {
                        this.setRawValue('top');
                        this.doSearch();
                    }
                };
                ClassificationPicker.prototype.setAdditionalProperties = function () {
                    this.additionalPropperties = ["ChildPattern", "Title", "RecordLastNumber", "Icon", "RetentionSchedule", "defaultAccessControlList"];
                };
                ClassificationPicker.prototype.getRequestData = function (contextItem, specificSearch) {
                    var displayProperty = this.getDisplayProperty();
                    var value = this.getRawValue();
                    if (specificSearch) {
                        value = specificSearch;
                    }
                    if (contextItem) {
                        value = this.getChildrenSearchString(contextItem);
                    }
                    var trimmedValue = value.trim().toLowerCase();
                    if (this.overrideValueProcessing(trimmedValue)) {
                        value = trimmedValue;
                    }
                    else {
                        if (this.appendAsterisk &&
                            trimmedValue != "all" &&
                            trimmedValue != "top" &&
                            trimmedValue.indexOf(':') == -1) {
                            value = value.replace(/ /g, '*');
                            value = "*" + value + "*";
                        }
                        value = this.processValue(value);
                    }
                    if (this.filterClause()) {
                        value = "(" + value + ") and (" + this.filterClause() + ")";
                    }
                    var query = value;
                    query = this.appendAdditionalQueryParms(query);
                    var properties = displayProperty;
                    properties += this.appendAdditionalProperties();
                    var requestData = {};
                    requestData['q'] = query;
                    requestData['format'] = "json";
                    requestData['start'] = this.startIndex();
                    requestData['properties'] = properties;
                    if (contextItem) {
                        requestData['pageSize'] = 1000;
                    }
                    this.appendAdditionalData(requestData);
                    this.isLoading(true);
                    return requestData;
                };
                ClassificationPicker.prototype.processReceivedItem = function (item, trimObject) {
                    trimObject.hasChildren = function () {
                        var hasChildren = item["ClassificationChildPattern"].Value != "";
                        return hasChildren;
                    };
                    var self = this;
                    trimObject.getChildren = function () {
                        self.getChildrenFor(trimObject);
                    };
                    trimObject["RetentionSchedule"] = item["ClassificationRetentionSchedule"];
                    trimObject["RecordLastNumber"] = item["ClassificationRecordLastNumber"].Value;
                    trimObject["Title"] = item["ClassificationTitle"].Value;
                    trimObject["DefaultAccessControlList"] = item["DefaultAccessControlList"];
                    trimObject.displayValueExtra = trimObject["Title"];
                    trimObject.hasIcon = true;
                    trimObject.iconId = item["Icon"].Id;
                    _super.prototype.processReceivedItem.call(this, item, trimObject);
                };
                ClassificationPicker.prototype.getChildrenFor = function (item) {
                    this.selectedListItem(item);
                    this.doSearchInternal(item);
                };
                ClassificationPicker.prototype.getChildrenSearchString = function (item) {
                    var rc = "";
                    if (item) {
                        rc = "parent:" + item.Uri;
                    }
                    return rc;
                };
                ClassificationPicker.prototype.appendAdditionalQueryParms = function (query) {
                    var clause = "active " + HPTRIM.Messages.core_and + " usable";
                    if (query) {
                        return query + " " + HPTRIM.Messages.core_and + " " + clause;
                    }
                    return clause;
                };
                ClassificationPicker.prototype.canSelectItem = function (item) {
                    if (item["RecordLastNumber"] == "") {
                        return false;
                    }
                    return true;
                };
                ClassificationPicker.prototype.onItemClick = function (context, item) {
                    _super.prototype.onItemClick.call(this, context, item);
                    if (this.canSelectItem(item)) {
                        context.rawValue(item['Title']);
                    }
                };
                ClassificationPicker.prototype.appendAdditionalData = function (data) {
                    data.purpose = 0;
                };
                return ClassificationPicker;
            }(Field.TrimItemPicker));
            Field.ClassificationPicker = ClassificationPicker;
        })(Field = HPTRIM.Field || (HPTRIM.Field = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var Field;
        (function (Field) {
            var LookupItemPicker = (function (_super) {
                __extends(LookupItemPicker, _super);
                function LookupItemPicker(trimClient, label, isMandatory, resultExpansionOverlay, errorHandler, multiSelect) {
                    var clsFieldOption = {
                        baseObjectType: HPTRIM.BaseObjectTypes.LookupItem,
                        label: label,
                        supportHierarchy: true,
                        isMandatory: isMandatory,
                        appendAsterisk: true,
                        resultExpansionOverlay: resultExpansionOverlay,
                        errorHandler: errorHandler,
                        multiSelect: (multiSelect != undefined) ? multiSelect : false,
                    };
                    _super.call(this, trimClient, clsFieldOption);
                    this.displayProperty = HPTRIM.Utils.TrimHelper.getDisplayProperty(HPTRIM.BaseObjectTypes.LookupItem);
                    this.setAdditionalProperties();
                    this.customUri = '';
                    this._sortOrder = 'name';
                }
                LookupItemPicker.prototype.onTextFieldClick = function () {
                    if (this.rawValue() == '') {
                        this.setRawValue('top');
                        this.doSearch();
                    }
                };
                LookupItemPicker.prototype.defaultQuery = function () {
                    return "top";
                };
                LookupItemPicker.prototype.setAdditionalProperties = function () {
                    this.additionalPropperties = ["icon", "name", "LookupItemParentSet", "LookupItemParentItem", "LookupItemHasChildItems", "LookupItemFullDescription", "LookupItemAbbreviation", "LookupItemName", "RecordLastNumber"];
                };
                LookupItemPicker.prototype.getRequestData = function (contextItem, specificSearch) {
                    var displayProperty = this.getDisplayProperty();
                    var value = this.getRawValue();
                    if (specificSearch) {
                        value = specificSearch;
                    }
                    if (contextItem) {
                        value = this.getChildrenSearchString(contextItem);
                    }
                    var trimmedValue = value.trim().toLowerCase();
                    if (this.overrideValueProcessing(trimmedValue)) {
                        value = trimmedValue;
                    }
                    else {
                        if (this.appendAsterisk &&
                            trimmedValue != "all" &&
                            trimmedValue != "top" &&
                            trimmedValue.indexOf(':') == -1) {
                            value = "name:*" + value.replace(/ /gi, '*') + "*";
                        }
                        value = this.processValue(value);
                    }
                    if (this.filterClause()) {
                        value = "(" + value + ") and (" + this.filterClause() + ")";
                    }
                    var query = value;
                    var properties = displayProperty;
                    properties += this.appendAdditionalProperties();
                    var requestData = {};
                    requestData['q'] = 'set:' + this.customUri;
                    requestData['format'] = "json";
                    requestData['start'] = this.startIndex();
                    requestData['properties'] = properties;
                    requestData['filter'] = query;
                    if (contextItem) {
                        requestData['pageSize'] = 1000;
                    }
                    this.appendAdditionalData(requestData);
                    return requestData;
                };
                LookupItemPicker.prototype.processReceivedItem = function (item, trimObject) {
                    trimObject.hasChildren = function () {
                        var hasChildren = item["LookupItemHasChildItems"].Value != "";
                        return hasChildren;
                    };
                    var self = this;
                    trimObject.getChildren = function () {
                        self.getChildrenFor(trimObject);
                    };
                    trimObject["Title"] = item["LookupItemName"].Value;
                    trimObject.displayValueExtra = trimObject["Title"];
                    trimObject.hasIcon = true;
                    trimObject.iconId = item["Icon"].Id;
                    _super.prototype.processReceivedItem.call(this, item, trimObject);
                };
                LookupItemPicker.prototype.getChildrenFor = function (item) {
                    this.selectedListItem(item);
                    this.doSearchInternal(item);
                };
                LookupItemPicker.prototype.getChildrenSearchString = function (item) {
                    var rc = "";
                    if (item) {
                        rc = "parent:" + item.Uri;
                    }
                    return rc;
                };
                LookupItemPicker.prototype.appendAdditionalQueryParms = function (query) {
                    var clause = +" " + HPTRIM.Messages.core_and + " usable";
                    if (query) {
                        return query + " " + HPTRIM.Messages.core_and + " " + clause;
                    }
                    return clause;
                };
                LookupItemPicker.prototype.canSelectItem = function (item) {
                    if (item["RecordLastNumber"] == "") {
                        return false;
                    }
                    return true;
                };
                LookupItemPicker.prototype.appendAdditionalData = function (data) {
                    data.purpose = 0;
                    data.sortBy = this.getSortValue();
                };
                LookupItemPicker.prototype.getSortValue = function () {
                    if (this._sortOrder != "")
                        return this._sortOrder;
                    return "";
                };
                return LookupItemPicker;
            }(Field.TrimItemPicker));
            Field.LookupItemPicker = LookupItemPicker;
            var MultiLookupItemPicker = (function (_super) {
                __extends(MultiLookupItemPicker, _super);
                function MultiLookupItemPicker(trimClient, label, isMandatory, resultExpansionOverlay, errorHandler) {
                    _super.call(this, trimClient, (!label) ? "" : label, isMandatory, resultExpansionOverlay, errorHandler, true);
                    this.multiObjList = ko.observableArray([]);
                    this.template = "templates/Field/MultiTreeItemPicker";
                    this.enableMultiItemPickerSearch(true);
                }
                MultiLookupItemPicker.prototype.getValueEx = function () {
                    var retValue = '';
                    _.each(this.selectedItems(), function (anItem) {
                        retValue = retValue + anItem.displayValue + ';';
                    });
                    if (retValue.length > 0) {
                        retValue = retValue.substr(0, retValue.length - 1);
                    }
                    return retValue;
                };
                MultiLookupItemPicker.prototype.setValue = function (value) {
                    var me = this;
                    _super.prototype.setValue.call(this, value);
                    if (value != null) {
                        if (value.displayValue != undefined && value.displayValue != "") {
                            var multiList = value.displayValue.split(";");
                            if (multiList.length > 0) {
                                var baseItem = {};
                                me.trimClient.getAndLoadLookupSet(me.customUri, function (returnSet) {
                                    baseItem.lookupSetObject = returnSet;
                                    baseItem.LookupValues = returnSet.LookupItemFullNames.slice();
                                    baseItem.LookupSetUri = me.customUri;
                                    me.rawValue('');
                                    me.error('');
                                    _.each(multiList, function (lookups) {
                                        var i = baseItem.lookupSetObject.LookupItemFullNames.indexOf(lookups.toString().trim());
                                        var lcUri;
                                        if (i > -1) {
                                            lcUri = baseItem.lookupSetObject.LookupItemUris[i];
                                            var locObj = new HPTRIM.TrimBaseObject(HPTRIM.BaseObjectTypes.LookupItem, lcUri, lookups.toString(), lookups.toString());
                                            me.multiObjList.push(locObj);
                                        }
                                    });
                                    me.selectedItems(me.multiObjList());
                                    me.toggleEdit();
                                    me.isEditing(false);
                                });
                            }
                        }
                    }
                };
                MultiLookupItemPicker.prototype.onblur = function (context, event) {
                    if (context != undefined && context != null && context.hasFocus() == false) {
                        this.rawValue('');
                        this.error('');
                        if (this.getValueEx().length < 1) {
                            if (context.Mandatory || context.isMandatory) {
                                var msg = HP.HPTRIM.Messages.web_mandatoryFieldNeedsValue;
                                msg = msg.replace("{0}", context.Caption);
                                this.error(msg);
                            }
                        }
                        this.errorMessage(this.error());
                    }
                };
                return MultiLookupItemPicker;
            }(LookupItemPicker));
            Field.MultiLookupItemPicker = MultiLookupItemPicker;
        })(Field = HPTRIM.Field || (HPTRIM.Field = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var Field;
        (function (Field) {
            var ComboBox = (function (_super) {
                __extends(ComboBox, _super);
                function ComboBox(items) {
                    _super.call(this);
                    this.Value = ko.observable('');
                    this.items = ko.observable([]);
                    this.cssClass = ko.observable('');
                    this.focusCallback = function () { };
                    this.template = "templates/Field/ComboBox";
                    this.optionsText = "Caption";
                    this.optionsValue = "Value";
                    this.Id = _.uniqueId('field-combo-box');
                    this.optionsAfterRender = function (optionElement, viewModel) {
                    };
                    this.items(items);
                    this.selectedValue = ko.observable('');
                    this.optionsValue = null;
                }
                ComboBox.prototype.getValue = function () {
                    return this.Value();
                };
                ComboBox.prototype.isDisable = function () {
                    var isDisable = false;
                    if (_.has(this, "Readonly")) {
                        isDisable = this["Readonly"];
                    }
                    return isDisable;
                };
                return ComboBox;
            }(HP.HPTRIM.Form.FieldDecorator));
            Field.ComboBox = ComboBox;
            var AditionalFieldComboBox = (function (_super) {
                __extends(AditionalFieldComboBox, _super);
                function AditionalFieldComboBox(trimClient, items, lookupSetUri, initialValue, multiSelect) {
                    _super.call(this);
                    this.items = ko.observable([]);
                    this.cssClass = ko.observable('');
                    this.focusCallback = function () { };
                    this.selectedItems = ko.observableArray();
                    this.template = "templates/Field/ComboBox";
                    this.optionsText = "Caption";
                    this.optionsValue = "Value";
                    this.initialValue = null;
                    this.Id = _.uniqueId('field-combo-box');
                    var me = this;
                    this.trimClient = trimClient;
                    this.multiSelect = false;
                    this.Value = ko.observable('');
                    this.items(items);
                    this.selectedValue = ko.observable('');
                    this.optionsValue = null;
                    this.SelectedIndex = -1;
                    this.CustomValue = null;
                    this.lookupSetUri = "";
                    if (multiSelect != undefined) {
                        this.multiSelect = multiSelect;
                    }
                    if (initialValue != undefined) {
                        this.initialValue = initialValue;
                    }
                    if (lookupSetUri != undefined && lookupSetUri != "") {
                        me.lookupSetUri = lookupSetUri;
                        var returnSet = {};
                        me.trimClient.getAndLoadLookupSet(lookupSetUri, function (returnSet) { me.setValueEx(returnSet); });
                    }
                }
                AditionalFieldComboBox.prototype.getValue = function () {
                    return this.Value();
                };
                AditionalFieldComboBox.prototype.getValueEx = function () {
                    if (this.Format == 'String') {
                        return this.Value();
                    }
                    else {
                        if (this.Value() == undefined || this.Value().toString().trim() < 1) {
                            return null;
                        }
                        else {
                            var retValue = this.selectedValue();
                            if (retValue == undefined || retValue == '') {
                                retValue = this.Value();
                            }
                            return retValue;
                        }
                    }
                };
                AditionalFieldComboBox.prototype.getObjectValue = function () {
                    if (this.Format == 'String') {
                        return this.Value();
                    }
                    else {
                        if (this.Value() == undefined || this.Value().toString().trim() < 1) {
                            return null;
                        }
                        else {
                            return this.selectedValue();
                        }
                    }
                };
                AditionalFieldComboBox.prototype.setValueEx = function (lookupSet, index) {
                    if (lookupSet == undefined) {
                        return;
                    }
                    var me = this;
                    if (index != undefined) {
                        me.selectedValue({ Uri: lookupSet.LookupItemUris[index], NameString: lookupSet.LookupItemFullNames[index] });
                        me.SelectedIndex = index;
                    }
                    else {
                        if (me.initialValue != undefined) {
                            if (me.initialValue.NameString != undefined) {
                                var idex = lookupSet.LookupItemFullNames.indexOf(me.initialValue.NameString);
                                if (idex > -1) {
                                    me.selectedValue({ Uri: lookupSet.LookupItemUris[idex], NameString: me.initialValue.NameString });
                                    me.Value(me.initialValue.NameString);
                                }
                            }
                            else {
                                var idex = lookupSet.LookupItemFullNames.indexOf(me.initialValue.toString());
                                if (idex > -1) {
                                    me.selectedValue({ Uri: lookupSet.LookupItemUris[idex], NameString: me.initialValue.toString() });
                                    me.Value(me.initialValue.toString());
                                }
                            }
                        }
                    }
                    me.CustomValue = this.selectedValue();
                    me.setDisplayValue(this.selectedValue());
                };
                AditionalFieldComboBox.prototype.getSelectedItems = function () {
                    if (this.Value() != undefined) {
                        var value = this.Value().toString();
                        if (value.length > 1) {
                            var strItems = value.split(",");
                            return strItems;
                        }
                    }
                    return [];
                };
                AditionalFieldComboBox.prototype.setSelectedIndex = function (selectedValue) {
                    var me = this;
                    me.SelectedIndex = -1;
                    me.selectedValue(null);
                    if (selectedValue != undefined) {
                        var items = me.items();
                        for (var i = 0; i < items.length; i++) {
                            if (items[i] == selectedValue.NameString) {
                                me.SelectedIndex = i;
                                me.selectedValue({ Uri: selectedValue.Uri, NameString: items[i] });
                                break;
                            }
                        }
                    }
                    me.setDisplayValue(me.selectedValue());
                };
                AditionalFieldComboBox.prototype.setSelectedValue = function (selectedIndex) {
                    if (me.lookupSetUri == '') {
                        return;
                    }
                    var me = this;
                    me.selectedValue(null);
                    me.SelectedIndex = -1;
                    var items = me.items();
                    if (selectedIndex > -1 && selectedIndex < items.length) {
                        var returnSet = {};
                        me.trimClient.getAndLoadLookupSet(me.lookupSetUri, function (returnSet) { me.setValueEx(returnSet, selectedIndex); });
                    }
                };
                AditionalFieldComboBox.prototype.setDisplayValue = function (selectedValue) {
                    if (selectedValue != undefined) {
                        if (selectedValue.NameString != undefined) {
                            this.Value(selectedValue.NameString.toString());
                        }
                        else {
                            this.Value(selectedValue.toString());
                        }
                        this.setError('');
                    }
                    else {
                        this.Value('');
                    }
                };
                AditionalFieldComboBox.prototype.isDisable = function () {
                    var isDisable = false;
                    if (_.has(this, "Readonly")) {
                        isDisable = this["Readonly"];
                    }
                    return isDisable;
                };
                AditionalFieldComboBox.prototype.onblur = function (context, event) {
                    if (context != null && context != undefined) {
                        var me = this;
                        _super.prototype.onblur.call(this, context, event);
                    }
                };
                AditionalFieldComboBox.prototype.showLookupItemPanel = function () {
                    root.multipleLookupItemPanel.setCallingControl(this, this.multiSelect, false);
                    root.showOverlay(root.multipleLookupItemPanel);
                };
                return AditionalFieldComboBox;
            }(ComboBox));
            Field.AditionalFieldComboBox = AditionalFieldComboBox;
            var LookupSetComboBox = (function (_super) {
                __extends(LookupSetComboBox, _super);
                function LookupSetComboBox(trimClient, query, multiSelect) {
                    _super.call(this);
                    this.enumName = "";
                    this.trimClient = trimClient;
                    this.optionsText = "Caption";
                    this.optionsValue = "Name";
                    this.query = query;
                    this.getData();
                }
                LookupSetComboBox.prototype.getData = function () {
                    var me = this;
                    var path = HPTRIM.BaseObjectTypes.LookupItem.path;
                    var requestObject = {};
                    requestObject.q = this.query;
                    requestObject.properties = "LookupItemName";
                    requestObject.format = "json";
                    me.trimClient.doGet(path, requestObject).done(function (data) {
                        var langs = data.Results;
                        var items = [];
                        _.each(langs, function (lang) {
                            var langObject = {
                                Caption: lang.LookupItemName.Value,
                                Name: lang.LookupItemName.Value
                            };
                            items.push(langObject);
                        });
                        me.items(items);
                    });
                };
                return LookupSetComboBox;
            }(ComboBox));
            Field.LookupSetComboBox = LookupSetComboBox;
            var ClientMatterPartyTypeComboBox = (function (_super) {
                __extends(ClientMatterPartyTypeComboBox, _super);
                function ClientMatterPartyTypeComboBox(trimClient) {
                    _super.call(this, trimClient, "set:[type:CmPartyType]");
                }
                return ClientMatterPartyTypeComboBox;
            }(LookupSetComboBox));
            Field.ClientMatterPartyTypeComboBox = ClientMatterPartyTypeComboBox;
            var ClientMatterRoleTypeComboBox = (function (_super) {
                __extends(ClientMatterRoleTypeComboBox, _super);
                function ClientMatterRoleTypeComboBox(trimClient) {
                    _super.call(this, trimClient, "set:[type:CmRoleType]");
                }
                return ClientMatterRoleTypeComboBox;
            }(LookupSetComboBox));
            Field.ClientMatterRoleTypeComboBox = ClientMatterRoleTypeComboBox;
            var UDFLookupSetComboBox = (function (_super) {
                __extends(UDFLookupSetComboBox, _super);
                function UDFLookupSetComboBox(trimClient, lookupSetUri) {
                    _super.call(this, trimClient, "set:" + lookupSetUri);
                }
                return UDFLookupSetComboBox;
            }(LookupSetComboBox));
            Field.UDFLookupSetComboBox = UDFLookupSetComboBox;
            var TrimEnumComboBoxFactory = (function () {
                function TrimEnumComboBoxFactory() {
                }
                TrimEnumComboBoxFactory.makeComboBox = function (trimClient, enumName, items, infoObject) {
                    switch (enumName.toLowerCase()) {
                        case "priority":
                            return new PriorityComboBox(trimClient);
                        case "contacttype":
                            return new ContactTypeComboBox(trimClient, infoObject);
                        case 'recordrelationshiptype':
                            return new RecordRelationshipTypeComboBox(trimClient, infoObject);
                        default:
                            var trimEnumComboBox = new TrimEnumComboBox(trimClient, items);
                            if (!items || items.length == 0) {
                                trimEnumComboBox.enumName = enumName;
                                trimEnumComboBox.getData();
                            }
                            return trimEnumComboBox;
                    }
                };
                return TrimEnumComboBoxFactory;
            }());
            Field.TrimEnumComboBoxFactory = TrimEnumComboBoxFactory;
            var TrimEnumComboBox = (function (_super) {
                __extends(TrimEnumComboBox, _super);
                function TrimEnumComboBox(trimClient, items) {
                    _super.call(this, items);
                    this.Value = ko.observable('');
                    this.enumName = "";
                    this.shouldIncludeThisItem = function (enumItem) {
                        if (enumItem.IsACustomValue === true && enumItem.HasBeenCustomised === false) {
                            return false;
                        }
                        return true;
                    };
                    this.setItemAsDefault = function (enumItem) {
                        return false;
                    };
                    this.trimClient = trimClient;
                    this.optionsText = "Caption";
                    this.optionsValue = "Name";
                }
                TrimEnumComboBox.prototype.getData = function (dataLoadedCallback) {
                    var _this = this;
                    var me = this;
                    var removeWorkGroupMenuItem = false;
                    if (me.enumName == "LocationType") {
                        if (me.trimClient.currentUserType() != "Administrator" && me.trimClient.currentUserType() != "Records Manager") {
                            removeWorkGroupMenuItem = true;
                        }
                    }
                    me.trimClient.getAndProcessEnumDefinition(this.enumName, function (enumItems) {
                        var items = [];
                        var defaultItem;
                        _.each(enumItems, function (enumItem) {
                            if (!enumItem.Name) {
                                return;
                            }
                            if (removeWorkGroupMenuItem) {
                                if (enumItem.Name === 'Workgroup') {
                                    return;
                                }
                            }
                            if (!_this.shouldIncludeThisItem(enumItem)) {
                                return;
                            }
                            var enumObject = {
                                Caption: enumItem.Caption,
                                Name: enumItem.Name,
                                RawItem: enumItem
                            };
                            items.push(enumObject);
                            if (_this.setItemAsDefault(enumItem)) {
                                defaultItem = enumItem;
                            }
                        });
                        me.items(items);
                        if (defaultItem) {
                            me.Value(defaultItem.Name);
                        }
                        if (dataLoadedCallback) {
                            dataLoadedCallback();
                        }
                    });
                };
                return TrimEnumComboBox;
            }(ComboBox));
            Field.TrimEnumComboBox = TrimEnumComboBox;
            var TrimBaseObjectTypesComboBox = (function (_super) {
                __extends(TrimBaseObjectTypesComboBox, _super);
                function TrimBaseObjectTypesComboBox(trimClient, cssClass) {
                    _super.call(this, trimClient);
                    if (cssClass) {
                        this.cssClass(cssClass);
                    }
                    this.enumName = "BaseObjectTypes";
                    _super.prototype.getData.call(this);
                }
                TrimBaseObjectTypesComboBox.prototype.shouldIncludeThisKey = function (keyName) {
                    return this.trimClient.isSupportedObjectType(keyName);
                };
                return TrimBaseObjectTypesComboBox;
            }(TrimEnumComboBox));
            Field.TrimBaseObjectTypesComboBox = TrimBaseObjectTypesComboBox;
            var GeneralAccessComboBox = (function (_super) {
                __extends(GeneralAccessComboBox, _super);
                function GeneralAccessComboBox(trimClient, cssClass) {
                    _super.call(this, trimClient);
                    if (cssClass) {
                        this.cssClass(cssClass);
                    }
                    this.enumName = "GeneralAccess";
                    _super.prototype.getData.call(this);
                }
                return GeneralAccessComboBox;
            }(TrimEnumComboBox));
            Field.GeneralAccessComboBox = GeneralAccessComboBox;
            var RecordAccessComboBox = (function (_super) {
                __extends(RecordAccessComboBox, _super);
                function RecordAccessComboBox(trimClient, cssClass) {
                    _super.call(this, trimClient);
                    if (cssClass) {
                        this.cssClass(cssClass);
                    }
                    this.enumName = "RecordAccess";
                    _super.prototype.getData.call(this);
                }
                return RecordAccessComboBox;
            }(TrimEnumComboBox));
            Field.RecordAccessComboBox = RecordAccessComboBox;
            var WorkflowAccessComboBox = (function (_super) {
                __extends(WorkflowAccessComboBox, _super);
                function WorkflowAccessComboBox(trimClient, cssClass) {
                    _super.call(this, trimClient);
                    if (cssClass) {
                        this.cssClass(cssClass);
                    }
                    this.enumName = "WorkflowAccess";
                    _super.prototype.getData.call(this);
                }
                return WorkflowAccessComboBox;
            }(TrimEnumComboBox));
            Field.WorkflowAccessComboBox = WorkflowAccessComboBox;
            var ClientMatterInterestTypes = (function (_super) {
                __extends(ClientMatterInterestTypes, _super);
                function ClientMatterInterestTypes(trimClient) {
                    _super.call(this, trimClient);
                    this.enumName = "ClientMatterInterestTypes";
                    _super.prototype.getData.call(this);
                }
                return ClientMatterInterestTypes;
            }(TrimEnumComboBox));
            Field.ClientMatterInterestTypes = ClientMatterInterestTypes;
            var LocationTypes = (function (_super) {
                __extends(LocationTypes, _super);
                function LocationTypes(trimClient, invalidTypeNames) {
                    var _this = this;
                    _super.call(this, trimClient);
                    this.shouldIncludeThisItem = function (enumItem) {
                        if (enumItem.IsACustomValue === true && enumItem.HasBeenCustomised === false) {
                            return false;
                        }
                        if (enumItem.Name === "Unknown") {
                            return false;
                        }
                        if (_this.invalidTypeNames) {
                            if (_.contains(_this.invalidTypeNames, enumItem.Name)) {
                                return false;
                            }
                        }
                        return true;
                    };
                    this.optionsAfterRender = function (optionElement, viewModel) {
                        if (viewModel.RawItem) {
                            var locationEnumType = viewModel.RawItem;
                            var iconName = locationEnumType.Icon;
                            if (iconName) {
                                optionElement.class = iconName.toLowerCase() + "_x16 media_object";
                            }
                        }
                    };
                    this.enumName = "LocationType";
                    this.invalidTypeNames = invalidTypeNames;
                    _super.prototype.getData.call(this);
                }
                return LocationTypes;
            }(TrimEnumComboBox));
            Field.LocationTypes = LocationTypes;
            var ContactTypeComboBox = (function (_super) {
                __extends(ContactTypeComboBox, _super);
                function ContactTypeComboBox(trimClient, recordInfoObject, dataLoadedCallback) {
                    var _this = this;
                    _super.call(this, trimClient);
                    this.shouldIncludeThisItem = function (enumItem) {
                        if (enumItem.IsACustomValue === true && enumItem.HasBeenCustomised === false) {
                            return false;
                        }
                        if (_this.recordInfoObject && _this.recordInfoObject.RecordRecordType && _this.recordInfoObject.RecordRecordType.RecordTypeTitlingMethod) {
                            if (_this.recordInfoObject.RecordRecordType.RecordTypeTitlingMethod.Value == "Contact") {
                                if (enumItem.Name == "Client") {
                                    return false;
                                }
                            }
                        }
                        return true;
                    };
                    this.enumName = "ContactType";
                    this.recordInfoObject = recordInfoObject;
                    this.getData(dataLoadedCallback);
                }
                return ContactTypeComboBox;
            }(TrimEnumComboBox));
            Field.ContactTypeComboBox = ContactTypeComboBox;
            var RecordRelationshipTypeComboBox = (function (_super) {
                __extends(RecordRelationshipTypeComboBox, _super);
                function RecordRelationshipTypeComboBox(trimClient, recordInfoObject, dataLoadedCallback) {
                    _super.call(this, trimClient);
                    this.enumName = "RecordRelationshipType,RevRecRelationship";
                    this.recordInfoObject = recordInfoObject;
                    this.getData(dataLoadedCallback);
                }
                RecordRelationshipTypeComboBox.prototype.getData = function (dataLoadedCallback) {
                    var _this = this;
                    var me = this;
                    me.trimClient.getAndProcessEnumDefinition(this.enumName, function (enumItems) {
                        var relationship = enumItems.RecordRelationshipType;
                        var mergedArray = relationship;
                        var excludeThese = [
                            "IsRootPart",
                            "IsInSeries",
                            "DerivedFrom",
                            "ContainsClause",
                            "InSharepointSite",
                            "IsVersion",
                            "RisRootPart",
                            "RisInSeries",
                            "RDerivedFrom",
                            "ClauseWithin",
                            "RinSharepointSite",
                            "RisRelatedTo"
                        ];
                        var filteredArray = _.filter(mergedArray, function (enumItem) {
                            return !_.contains(excludeThese, enumItem.Name);
                        });
                        var items = [];
                        var defaultItem;
                        _.each(filteredArray, function (enumItem) {
                            if (!enumItem.Name) {
                                return;
                            }
                            if (!_this.shouldIncludeThisItem(enumItem)) {
                                return;
                            }
                            var enumObject = {
                                Caption: enumItem.Caption,
                                Name: enumItem.Name
                            };
                            items.push(enumObject);
                            if (_this.setItemAsDefault(enumItem)) {
                                defaultItem = enumItem;
                            }
                        });
                        me.items(items);
                    });
                };
                return RecordRelationshipTypeComboBox;
            }(TrimEnumComboBox));
            Field.RecordRelationshipTypeComboBox = RecordRelationshipTypeComboBox;
            var PriorityComboBox = (function (_super) {
                __extends(PriorityComboBox, _super);
                function PriorityComboBox(trimClient, showNone, dataLoadedCallback) {
                    var _this = this;
                    _super.call(this, trimClient);
                    this.showNone = true;
                    this.shouldIncludeThisItem = function (enumItem) {
                        if (enumItem.IsACustomValue === true && enumItem.HasBeenCustomised === false) {
                            return false;
                        }
                        if (enumItem.Name == "None" && _this.showNone !== true) {
                            return false;
                        }
                        return true;
                    };
                    this.setItemAsDefault = function (enumItem) {
                        if (enumItem.Name == "Medium") {
                            return true;
                        }
                        return false;
                    };
                    this.enumName = "Priority";
                    if (showNone || showNone == false) {
                        this.showNone = showNone;
                    }
                    this.getData(dataLoadedCallback);
                }
                return PriorityComboBox;
            }(TrimEnumComboBox));
            Field.PriorityComboBox = PriorityComboBox;
            var TimezoneCombobox = (function (_super) {
                __extends(TimezoneCombobox, _super);
                function TimezoneCombobox(items) {
                    _super.call(this, items);
                    this.Value = ko.observable('');
                    this.Id = ('timezone-combo-box');
                    this.items = ko.observableArray(items);
                    this.Value = ko.observable('');
                    this.optionsValue = null;
                }
                return TimezoneCombobox;
            }(ComboBox));
            Field.TimezoneCombobox = TimezoneCombobox;
            var LanguageComboBox = (function (_super) {
                __extends(LanguageComboBox, _super);
                function LanguageComboBox(trimClient) {
                    _super.call(this, trimClient);
                    this.Id = ('language-combo-box');
                    this.enumName = 'Language';
                    this.getData();
                }
                LanguageComboBox.prototype.onblur = function (context, event) {
                    if (context != null && context != undefined) {
                        if (context.Value != undefined && (context.Readonly == true || context.Value != "")) {
                            this.setError('');
                            return;
                        }
                        var fieldMandaoryOption = this.getMandatoryOption();
                        if (fieldMandaoryOption == HP.HPTRIM.Form.FieldMandaoryOption.None) {
                            this.setError('');
                            return;
                        }
                        switch (fieldMandaoryOption) {
                            case HP.HPTRIM.Form.FieldMandaoryOption.Mandatory:
                                var msg = HP.HPTRIM.Messages.web_mandatoryFieldNeedsValue;
                                msg = msg.replace("{0}", this.Caption);
                                this.setError(msg);
                                return;
                            case HP.HPTRIM.Form.FieldMandaoryOption.Partially:
                                this.setError('partial');
                                return;
                            case HP.HPTRIM.Form.FieldMandaoryOption.WarningOnly:
                                return;
                        }
                        this.setError('');
                    }
                };
                return LanguageComboBox;
            }(TrimEnumComboBox));
            Field.LanguageComboBox = LanguageComboBox;
            var TrimSecurityLevel = (function (_super) {
                __extends(TrimSecurityLevel, _super);
                function TrimSecurityLevel(trimClient, initialValue) {
                    _super.call(this);
                    this.template = "templates/Field/SecurityLevel";
                    this.showCaption = ko.observable(true);
                    this.items = ko.observable([]);
                    this.selectedValue = ko.observable(0);
                    this.selectedValueName = ko.observable("");
                    this.Id = _.uniqueId('field-combo-box-security');
                    this.trimClient = trimClient;
                    if (initialValue) {
                        this.initialSecurityLevel = initialValue;
                    }
                    else {
                        this.initialSecurityLevel = { Uri: 0 };
                    }
                    this.getData();
                }
                TrimSecurityLevel.prototype.getData = function () {
                    var me = this;
                    var path = HPTRIM.BaseObjectTypes.SecurityLevel.path;
                    var requestObject = { q: "active", properties: "name", format: "json" };
                    me.trimClient.doGet(path, requestObject).done(function (data) {
                        var array = data.Results, items = [];
                        items.push({
                            Uri: 0,
                            Caption: "[" + HPTRIM.Messages.web_securityDefaultvalue + "]"
                        });
                        _.each(array, function (item) {
                            var securityLevel = {
                                Uri: item.Uri,
                                Caption: item.SecurityLevelName.Value
                            };
                            items.push(securityLevel);
                        });
                        me.items(items);
                        if (me.initialSecurityLevel.Uri) {
                            me.selectedValue(me.initialSecurityLevel.Uri);
                        }
                        else {
                            var items = me.items();
                            var secLevel = _.findWhere(items, { Caption: me.initialSecurityLevel.SecurityLevelName });
                            if (secLevel) {
                                me.selectedValue(secLevel.Uri);
                            }
                        }
                    });
                };
                TrimSecurityLevel.prototype.getValue = function () {
                    return this.getValueEx();
                };
                TrimSecurityLevel.prototype.getValueEx = function () {
                    return this.selectedValue();
                };
                return TrimSecurityLevel;
            }(ComboBox));
            Field.TrimSecurityLevel = TrimSecurityLevel;
            var TrimSecurityCaveat = (function () {
                function TrimSecurityCaveat(trimClient, selectedCaveats) {
                    this.isSettingVisible = ko.observable(false);
                    this.items = ko.observable([]);
                    this.selectedCaveats = ko.observable([]);
                    this.displayValue = ko.observable("");
                    this.trimClient = trimClient;
                    if (selectedCaveats) {
                        this.selectedCaveats(selectedCaveats);
                    }
                    this.getData();
                    var me = this;
                    ko.postbox.subscribe("CaveateChanged", function () {
                        me.refreshDisplayString();
                    });
                }
                TrimSecurityCaveat.prototype.refreshDisplayString = function () {
                    var me = this;
                    var displayString = [];
                    _.each(me.items(), function (item) {
                        if (item.IsSelected()) {
                            displayString.push(item.Name);
                        }
                    });
                    me.displayValue(displayString.join(', '));
                };
                TrimSecurityCaveat.prototype.getValue = function () {
                    this.selectedCaveats([]);
                    var me = this;
                    _.each(this.items(), function (item) {
                        if (item.IsSelected() || item.Remove === true) {
                            me.selectedCaveats().push(item);
                        }
                    });
                    return this.selectedCaveats();
                };
                TrimSecurityCaveat.prototype.getData = function () {
                    var me = this;
                    var path = HPTRIM.BaseObjectTypes.SecurityCaveat.path;
                    var requestObject = { q: "all", properties: "name, abbreviation", format: "json" };
                    me.trimClient.doGet(path, requestObject).done(function (data) {
                        var array = data.Results, items = [];
                        _.each(array, function (item) {
                            var caveat = {
                                Name: item.SecurityCaveatName.Value,
                                Abbreviation: item.SecurityCaveatAbbreviation.Value,
                                Uri: item.Uri,
                                IsSelected: ko.observable(false),
                                Remove: false,
                                Caption: ko.observable(HP.HPTRIM.Messages.web_Add)
                            };
                            var found = _.find(me.selectedCaveats(), function (context) {
                                var foundIt = context.Uri === caveat.Uri || context.SecurityCaveatName.Value == caveat.Name;
                                if (foundIt) {
                                    context.Uri = caveat.Uri;
                                }
                                return foundIt;
                            });
                            if (found) {
                                caveat.IsSelected(true);
                                caveat.Caption = ko.observable(HP.HPTRIM.Messages.web_remove);
                            }
                            items.push(caveat);
                        });
                        me.items(items);
                        me.refreshDisplayString();
                    });
                };
                TrimSecurityCaveat.prototype.toggle = function (item, event) {
                    this.isSettingVisible() ? this.isSettingVisible(false) : this.isSettingVisible(true);
                    var cDiv = event.currentTarget.children;
                    for (var i = 0; i < cDiv.length; i++) {
                        var div = cDiv[i];
                        var classNameStr = div.className;
                        if (classNameStr.indexOf('caret-midgrey-open') > -1 || classNameStr.indexOf('caret-midgrey-close') > -1) {
                            if (classNameStr.indexOf('caret-midgrey-open') > -1) {
                                classNameStr = classNameStr.replace('caret-midgrey-open', 'caret-midgrey-close');
                            }
                            else {
                                classNameStr = classNameStr.replace('caret-midgrey-close', 'caret-midgrey-open');
                            }
                            div.className = classNameStr;
                            return;
                        }
                    }
                };
                TrimSecurityCaveat.prototype.click = function (caveat, event) {
                    var className = event.currentTarget.className;
                    setTimeout(function () {
                        if (className.indexOf("active") > 0) {
                            caveat.IsSelected(false);
                            caveat.Remove = true;
                            caveat.Caption(HP.HPTRIM.Messages.web_Add);
                        }
                        else {
                            caveat.IsSelected(true);
                            caveat.Caption(HP.HPTRIM.Messages.web_remove);
                        }
                        ko.postbox.publish("CaveateChanged");
                    }, 100);
                };
                return TrimSecurityCaveat;
            }());
            Field.TrimSecurityCaveat = TrimSecurityCaveat;
        })(Field = HPTRIM.Field || (HPTRIM.Field = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var Field;
        (function (Field) {
            var AccessControl = (function () {
                function AccessControl(items) {
                    this.accessControlTypes = ko.observableArray([]);
                    this.template = "templates/Field/AccessControl";
                    this.accessControlTypes(items);
                }
                AccessControl.prototype.getAclAsArray = function (aclString) {
                    var strAclString = ko.utils.unwrapObservable(aclString);
                    var returnString = "";
                    var aclList = strAclString.split(';');
                    return aclList;
                };
                AccessControl.SubscriptionTopic = "CustomiseAccessControlLocation";
                return AccessControl;
            }());
            Field.AccessControl = AccessControl;
            var RecordAccessControl = (function (_super) {
                __extends(RecordAccessControl, _super);
                function RecordAccessControl(aclCustomValue) {
                    _super.call(this);
                    this.value = aclCustomValue;
                    this.processResponse(aclCustomValue);
                }
                RecordAccessControl.prototype.processResponse = function (aclFromServer) {
                    var data = aclFromServer.FunctionProfiles;
                    var newArray = [];
                    _.each(data, function (item, name) {
                        var aclSelector = new AccessControlValueSelector(item);
                        aclSelector.name = name;
                        newArray.push(aclSelector);
                    });
                    this.accessControlTypes(newArray);
                };
                RecordAccessControl.prototype.getValueEx = function () {
                    var accessControlValueSelectors = this.accessControlTypes();
                    var functionProfiles = {};
                    _.each(accessControlValueSelectors, function (valueSelector) {
                        functionProfiles[valueSelector.name] = {
                            ReferenceStyle: valueSelector.ReferenceStyle,
                            Setting: valueSelector.Setting,
                            AccessLocations: valueSelector.AccessLocations,
                        };
                    });
                    this.value.FunctionProfiles = functionProfiles;
                    return this.value;
                };
                return RecordAccessControl;
            }(AccessControl));
            Field.RecordAccessControl = RecordAccessControl;
            var AccessControlValueSelector = (function () {
                function AccessControlValueSelector(aclFunction) {
                    this.value = ko.observable(null);
                    this.displayValue = ko.observable('');
                    this.template = 'templates/Field/AccessControlValueSelector';
                    this.aclValueDefinitions = ko.observable();
                    this.configureAclValueDefinition();
                    $.extend(this, aclFunction);
                    this.value(aclFunction.AsString);
                    this.initialValue = aclFunction;
                    jQuery.extend(true, this.initialValue, aclFunction);
                }
                AccessControlValueSelector.prototype.configureAclValueDefinition = function () {
                    var array = [];
                    array.push(new AclEveryoneValueDefinition(this), new AclPrivateValueDefinition(this), new AclCustomValueDefinition(this), new AclNoChangeDefinition(this));
                    this.aclValueDefinitions(array);
                };
                AccessControlValueSelector.prototype.reset = function () {
                    $.extend(this, this.initialValue);
                };
                AccessControlValueSelector.prototype.syncData = function () {
                    this.value(this.AsString);
                };
                return AccessControlValueSelector;
            }());
            Field.AccessControlValueSelector = AccessControlValueSelector;
            var AccessControlValueDefinition = (function () {
                function AccessControlValueDefinition(aclSelector, caption) {
                    this.caption = "";
                    this.caption = caption;
                    this.aclFunction = aclSelector;
                }
                AccessControlValueDefinition.prototype.onSelect = function () {
                    this.aclFunction.Setting = this.caption;
                    this.aclFunction.value(this.caption);
                };
                return AccessControlValueDefinition;
            }());
            Field.AccessControlValueDefinition = AccessControlValueDefinition;
            var AclEveryoneValueDefinition = (function (_super) {
                __extends(AclEveryoneValueDefinition, _super);
                function AclEveryoneValueDefinition(aclSelector) {
                    _super.call(this, aclSelector, HP.HPTRIM.Messages.web_public.toString());
                }
                AclEveryoneValueDefinition.prototype.onSelect = function () {
                    _super.prototype.onSelect.call(this);
                    this.aclFunction.AccessLocations = [];
                };
                return AclEveryoneValueDefinition;
            }(AccessControlValueDefinition));
            Field.AclEveryoneValueDefinition = AclEveryoneValueDefinition;
            var AclPrivateValueDefinition = (function (_super) {
                __extends(AclPrivateValueDefinition, _super);
                function AclPrivateValueDefinition(aclSelector) {
                    _super.call(this, aclSelector, HP.HPTRIM.Messages.web_private.toString());
                }
                AclPrivateValueDefinition.prototype.onSelect = function () {
                    _super.prototype.onSelect.call(this);
                    this.aclFunction.AccessLocations = [{ FindBy: 'me' }];
                };
                return AclPrivateValueDefinition;
            }(AccessControlValueDefinition));
            Field.AclPrivateValueDefinition = AclPrivateValueDefinition;
            var AclContainerValueDefinition = (function (_super) {
                __extends(AclContainerValueDefinition, _super);
                function AclContainerValueDefinition(aclSelector) {
                    _super.call(this, aclSelector, HP.HPTRIM.Messages.web_container.toString());
                }
                return AclContainerValueDefinition;
            }(AccessControlValueDefinition));
            Field.AclContainerValueDefinition = AclContainerValueDefinition;
            var AclCustomValueDefinition = (function (_super) {
                __extends(AclCustomValueDefinition, _super);
                function AclCustomValueDefinition(aclSelector) {
                    _super.call(this, aclSelector, HP.HPTRIM.Messages.web_custom.toString());
                }
                AclCustomValueDefinition.prototype.onSelect = function () {
                    ko.postbox.publishEx(HP.HPTRIM.Field.AccessControl.SubscriptionTopic, this.aclFunction);
                };
                return AclCustomValueDefinition;
            }(AccessControlValueDefinition));
            Field.AclCustomValueDefinition = AclCustomValueDefinition;
            var AclNoChangeDefinition = (function (_super) {
                __extends(AclNoChangeDefinition, _super);
                function AclNoChangeDefinition(aclSelector) {
                    _super.call(this, aclSelector, HP.HPTRIM.Messages.bob_noChangeMsg.toString());
                }
                AclNoChangeDefinition.prototype.onSelect = function () {
                    _super.prototype.onSelect.call(this);
                    this.aclFunction.reset();
                };
                return AclNoChangeDefinition;
            }(AccessControlValueDefinition));
            Field.AclNoChangeDefinition = AclNoChangeDefinition;
        })(Field = HPTRIM.Field || (HPTRIM.Field = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var Field;
        (function (Field) {
            var SecurityProfile = (function (_super) {
                __extends(SecurityProfile, _super);
                function SecurityProfile(trimClient, pageItem) {
                    _super.call(this);
                    this.isSettingVisible = ko.observable(true);
                    this.template = "templates/Field/RecordSecurity";
                    var securityLevel = {}, securityCaveats = [];
                    if (pageItem.CustomValue) {
                        securityLevel = pageItem.CustomValue.SecurityLevel;
                        securityCaveats = pageItem.CustomValue.Caveats;
                    }
                    this.securityLevelField = new HP.HPTRIM.Field.TrimSecurityLevel(trimClient, securityLevel);
                    this.securityLevelField['Caption'] = pageItem.Caption;
                    this.securityLevelField.showCaption(false);
                    this.securityLevelField["Value"] = pageItem.Value;
                    this.securityCaveatField = new HP.HPTRIM.Field.TrimSecurityCaveat(trimClient, securityCaveats);
                }
                SecurityProfile.prototype.getValueEx = function () {
                    this.value = {
                        Caveats: [],
                        SecurityLevel: {}
                    };
                    this.value.Caveats = this.securityCaveatField.getValue();
                    this.value.SecurityLevel = {};
                    var selectedSecurityLevelUri = this.securityLevelField.getValue();
                    if (selectedSecurityLevelUri != 0) {
                        this.value.SecurityLevel = { Uri: selectedSecurityLevelUri };
                    }
                    return this.value;
                };
                return SecurityProfile;
            }(HP.HPTRIM.Form.FieldDecorator));
            Field.SecurityProfile = SecurityProfile;
            var RecordSecurityProfile = (function (_super) {
                __extends(RecordSecurityProfile, _super);
                function RecordSecurityProfile(trimClient, pageItem) {
                    _super.call(this, trimClient, pageItem);
                }
                RecordSecurityProfile.prototype.processResponse = function (aclFromServer) {
                    var data = aclFromServer.FunctionProfiles;
                };
                return RecordSecurityProfile;
            }(SecurityProfile));
            Field.RecordSecurityProfile = RecordSecurityProfile;
            var CheckinStyleSecurity = (function (_super) {
                __extends(CheckinStyleSecurity, _super);
                function CheckinStyleSecurity(trimClient, pageItem) {
                    try {
                        var parts = pageItem.Value().split(',');
                        var securityLevel = {}, hasCaveats = parts.length > 1;
                        var caveats = [];
                        if (hasCaveats) {
                            for (var i = 1; i < parts.length; i++) {
                                var caveat = {
                                    SecurityCaveatCaveatNumber: {
                                        Value: ''
                                    },
                                    SecurityCaveatName: {
                                        Value: parts[i].trim()
                                    }
                                };
                                caveats.push(caveat);
                            }
                        }
                        securityLevel = {
                            SecurityLevelAbbreviation: '',
                            SecurityLevelLevelNumber: '',
                            SecurityLevelName: parts[0].trim()
                        };
                        pageItem.CustomValue = {
                            SecurityLevel: securityLevel,
                            Caveats: caveats
                        };
                    }
                    catch (e) { }
                    _super.call(this, trimClient, pageItem);
                }
                CheckinStyleSecurity.prototype.getValueEx = function () {
                    var value = "";
                    var cavs = this.securityCaveatField.getValue();
                    var selectedCavs = _.where(cavs, { Remove: false });
                    var caveatNames = _.pluck(selectedCavs, 'Name');
                    var secLevelUri = this.securityLevelField.getValueEx();
                    var secLevelObject = _.find(this.securityLevelField.items(), function (item) {
                        return item.Uri == secLevelUri;
                    });
                    var secLevelName = secLevelObject.Caption;
                    var returnString = secLevelName + "," + caveatNames.join(',');
                    return returnString;
                };
                return CheckinStyleSecurity;
            }(SecurityProfile));
            Field.CheckinStyleSecurity = CheckinStyleSecurity;
        })(Field = HPTRIM.Field || (HPTRIM.Field = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var Field;
        (function (Field) {
            var SavedSearchPicker = (function (_super) {
                __extends(SavedSearchPicker, _super);
                function SavedSearchPicker(trimClient, label, isMandatory, errorHandler) {
                    var fieldOption = { baseObjectType: HPTRIM.BaseObjectTypes.SavedSearch, label: label, supportHierarchy: true, isMandatory: isMandatory, appendAsterisk: true, errorHandler: errorHandler };
                    _super.call(this, trimClient, fieldOption);
                    this.displayProperty = HPTRIM.Utils.TrimHelper.getDisplayProperty(HPTRIM.BaseObjectTypes.SavedSearch);
                    this.setAdditionalProperties();
                }
                SavedSearchPicker.prototype.setAdditionalProperties = function () {
                    this.additionalPropperties = ["Icon", "FullName", "Name", "SearchDefinition"];
                };
                SavedSearchPicker.prototype.processReceivedItem = function (item, trimObject) {
                    trimObject.hasChildren = function () {
                        return false;
                    };
                    trimObject.hasIcon = true;
                    trimObject.iconId = item["Icon"].Id;
                    trimObject['SearchDefinition'] = item['SearchDefinition'];
                    _super.prototype.processReceivedItem.call(this, item, trimObject);
                };
                return SavedSearchPicker;
            }(Field.TrimItemPicker));
            Field.SavedSearchPicker = SavedSearchPicker;
        })(Field = HPTRIM.Field || (HPTRIM.Field = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var Field;
        (function (Field) {
            var ActionDefPicker = (function (_super) {
                __extends(ActionDefPicker, _super);
                function ActionDefPicker(trimClient, label, isMandatory, errorHandler) {
                    var fieldOption = { baseObjectType: HPTRIM.BaseObjectTypes.ActionDef, label: label, supportHierarchy: true, isMandatory: isMandatory, appendAsterisk: true, errorHandler: errorHandler };
                    _super.call(this, trimClient, fieldOption);
                    this.setAdditionalProperties();
                    this.displayProperty = HPTRIM.Utils.TrimHelper.getDisplayProperty(HPTRIM.BaseObjectTypes.ActionDef);
                }
                ActionDefPicker.prototype.setAdditionalProperties = function () {
                    this.additionalPropperties = ["ActionDefAssignee", "Icon"];
                };
                ActionDefPicker.prototype.appendAdditionalQueryParms = function (query) {
                    return query;
                };
                ActionDefPicker.prototype.processReceivedItem = function (item, trimObject) {
                    trimObject.hasChildren = function () {
                        return false;
                    };
                    if (item["Icon"]) {
                        trimObject.hasIcon = true;
                        trimObject.iconId = item["Icon"].Id;
                    }
                    trimObject['ActionDefAssignee'] = item['ActionDefAssignee'];
                    _super.prototype.processReceivedItem.call(this, item, trimObject);
                };
                return ActionDefPicker;
            }(Field.TrimItemPicker));
            Field.ActionDefPicker = ActionDefPicker;
        })(Field = HPTRIM.Field || (HPTRIM.Field = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var Field;
        (function (Field) {
            var Plugin;
            (function (Plugin) {
                var ItemPickerPlugin = (function () {
                    function ItemPickerPlugin() {
                        this.template = "";
                    }
                    ItemPickerPlugin.prototype.initialize = function (owner) { };
                    return ItemPickerPlugin;
                }());
                Plugin.ItemPickerPlugin = ItemPickerPlugin;
            })(Plugin = Field.Plugin || (Field.Plugin = {}));
        })(Field = HPTRIM.Field || (HPTRIM.Field = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var Field;
        (function (Field) {
            var Plugin;
            (function (Plugin) {
                var CreatingLocationPickerPlugin = (function (_super) {
                    __extends(CreatingLocationPickerPlugin, _super);
                    function CreatingLocationPickerPlugin(trimClient) {
                        _super.call(this);
                        this.locationTypes = [];
                        this.trimClient = trimClient;
                        this.template = "templates/Field/Plugin/CreatingLocationItemPickerPlugin";
                        var me = this;
                        me.trimClient.getAndProcessEnumDefinition('LocationType', function (enumItems) {
                            var items = [];
                            var defaultItem;
                            var cannotCreateGroup = true;
                            if (me.trimClient.currentUserType() == "Administrator" || me.trimClient.currentUserType() == "Records Manager") {
                                cannotCreateGroup = false;
                            }
                            _.each(enumItems, function (enumItem) {
                                if (!enumItem.Name || enumItem.Name === 'StorageProvider' || enumItem.Name === 'Unknown') {
                                    return;
                                }
                                if (cannotCreateGroup) {
                                    if (enumItem.Name === 'Group' || enumItem.Name === 'Workgroup') {
                                        return;
                                    }
                                }
                                var enumObject = {
                                    caption: enumItem.Caption,
                                    value: enumItem.Name,
                                    icon: enumItem.Icon.toLowerCase() + '_x16'
                                };
                                items.push(enumObject);
                            });
                            me.locationTypes = items;
                        });
                    }
                    CreatingLocationPickerPlugin.prototype.initialize = function (owner) {
                        this.owner = owner;
                        this.subscriptionTopic = CreatingLocationPickerPlugin.LOCATION_CREATED_TOPIC + owner.controlContainerId;
                    };
                    CreatingLocationPickerPlugin.prototype.onClick = function (context, locationType) {
                        var me = this;
                        var path = "Location/DataEntryFormDefinition?InitializeAsType=" + locationType.value;
                        this.configureOnCreationCreatedEventHandler();
                        me.trimClient.doGet(path).done(function (data) {
                            var dataEntryFormDefinition = data.Results[0].DataEntryFormDefinition;
                            _.each(dataEntryFormDefinition.Pages, function (page) {
                                if (page.Type == "LocationAddress") {
                                    return _.each(page.PageItems, function (pageItem) {
                                        if (pageItem.Name == "LocationAddressAddressType") {
                                            pageItem.Format = "PlainText";
                                        }
                                    });
                                }
                            });
                            ko.postbox.publish(CreatingLocationPickerPlugin.DISPLAY_LOCATION_FORM_TOPIC, { topic: me.subscriptionTopic, dataEntryFormDefinition: dataEntryFormDefinition, typeOfLocation: locationType });
                        });
                    };
                    CreatingLocationPickerPlugin.prototype.configureOnCreationCreatedEventHandler = function () {
                        var me = this;
                        this.subscription = ko.postbox.subscribe(this.subscriptionTopic, function (location) {
                            var locBaseObject = HPTRIM.TrimBaseObject.make(location);
                            me.updateItemPicker(locBaseObject);
                            me.subscription.dispose();
                        }, this);
                    };
                    CreatingLocationPickerPlugin.prototype.updateItemPicker = function (location) {
                        this.owner.setDefaultValue(location);
                        this.owner.toggleEdit();
                    };
                    CreatingLocationPickerPlugin.DISPLAY_LOCATION_FORM_TOPIC = "displayLocationForm";
                    CreatingLocationPickerPlugin.LOCATION_CREATED_TOPIC = "locationCreated";
                    return CreatingLocationPickerPlugin;
                }(Plugin.ItemPickerPlugin));
                Plugin.CreatingLocationPickerPlugin = CreatingLocationPickerPlugin;
            })(Plugin = Field.Plugin || (Field.Plugin = {}));
        })(Field = HPTRIM.Field || (HPTRIM.Field = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var Field;
        (function (Field) {
            var Plugin;
            (function (Plugin) {
                var KwikSelectItemPickerPlugin = (function (_super) {
                    __extends(KwikSelectItemPickerPlugin, _super);
                    function KwikSelectItemPickerPlugin(trimClient) {
                        _super.call(this);
                        this.trimClient = trimClient;
                        this.template = "templates/Field/Plugin/KwikSelectItemPickerPlugin";
                    }
                    KwikSelectItemPickerPlugin.prototype.showKwikSelectPanel = function (data) {
                        var _this = this;
                        var lcData = data;
                        var me = this;
                        var lcTrimObjectType;
                        var lcDefaultSelectedValue;
                        if (this.owner.getValue()) {
                            var baseObject = this.owner.getValue();
                            lcTrimObjectType = baseObject.baseObjectType;
                            if (me.owner.multiSelect == true) {
                                var lvSelectedItems = this.owner.selectedItems();
                                if (lvSelectedItems.length > 0) {
                                    lcTrimObjectType = lvSelectedItems[0].baseObjectType;
                                }
                            }
                            if (this.query && this.query != HP.HPTRIM.Messages.web_All.toLowerCase() && this.query != HP.HPTRIM.Messages.web_Top.toLowerCase())
                                lcDefaultSelectedValue = this.owner.getValue();
                        }
                        else {
                            this.owner.setValue(data.owner);
                            var baseObject = this.owner.getValue();
                            lcTrimObjectType = baseObject.baseObjectType;
                        }
                        if (!this.query) {
                            this.query = this.owner.defaultQuery();
                        }
                        var addQuery = this.owner.appendAdditionalQueryParms("");
                        var editSearchData = {
                            allowMultiple: true,
                            objectType: lcTrimObjectType,
                            query: this.query,
                            searchTitle: this.owner.label(),
                            sort: this.owner.getSortValue(),
                            callback: function (objectValueArray) {
                                var me = _this;
                                if (objectValueArray) {
                                    if (objectValueArray.length > 0) {
                                        _this.updateItemPicker(objectValueArray);
                                        _this.refreshEnclosedCheckbox();
                                    }
                                }
                                if (me.owner != undefined && me.owner.fieldObject != undefined) {
                                    var element = $("#" + me.owner.fieldObject.Id).closest('.panel-group');
                                    if (element.length == 0) {
                                        element = $("#" + me.owner.controlContainerId + 'upper').closest('.panel-group');
                                    }
                                    if (element) {
                                        if (element.length == 1) {
                                            var dateEntryPage = element[0].firstElementChild.lastElementChild.getAttribute("id");
                                            var pageAccordionDateEntryPage = $("#" + "PageAccordion" + dateEntryPage).removeClass("panel-collapse collapse").addClass("panel-collapse in");
                                            $("#" + dateEntryPage).removeClass("panel-collapse collapse").addClass("panel-collapse in");
                                            $("#" + dateEntryPage + "_caret").removeClass("hp-icon hp-chevron-left pull-right").addClass("hp-icon pull-right hp-chevron-down");
                                            var ele = document.getElementById(me.owner.fieldObject.Id + 'upper');
                                            if (!ele) {
                                                ele = document.getElementById("#" + me.owner.controlContainerId + 'upper');
                                            }
                                            if (ele) {
                                                ele.scrollIntoView();
                                                ele.focus();
                                            }
                                        }
                                    }
                                }
                            },
                            parentObjectType: function () {
                                return _this.owner;
                            },
                        };
                        ko.postbox.publish(me.subscriptionTopic, editSearchData);
                    };
                    KwikSelectItemPickerPlugin.prototype.initialize = function (owner) {
                        this.owner = owner;
                        this.subscriptionTopic = KwikSelectItemPickerPlugin.SHOW_KWIK_SELECT_DIALOG_TOPIC;
                    };
                    KwikSelectItemPickerPlugin.prototype.updateItemPicker = function (term) {
                        var _this = this;
                        var me = this;
                        if (me.owner.multiSelect == false) {
                            this.owner.setDefaultValue(term[0]);
                        }
                        else if (me.owner.multiSelect == true) {
                            this.owner.selectedItems([]);
                            _.each(term, function (result) {
                                _this.owner.selectedItems.push(result);
                            });
                        }
                        me.owner.isEditing(false);
                    };
                    KwikSelectItemPickerPlugin.prototype.refreshEnclosedCheckbox = function () {
                        this.owner.EnclosedCheckbox();
                    };
                    KwikSelectItemPickerPlugin.SHOW_KWIK_SELECT_DIALOG_TOPIC = "showKwikDialog";
                    return KwikSelectItemPickerPlugin;
                }(Plugin.ItemPickerPlugin));
                Plugin.KwikSelectItemPickerPlugin = KwikSelectItemPickerPlugin;
            })(Plugin = Field.Plugin || (Field.Plugin = {}));
        })(Field = HPTRIM.Field || (HPTRIM.Field = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var Field;
        (function (Field) {
            var MultiItemPickerItemTemplate = (function () {
                function MultiItemPickerItemTemplate() {
                }
                MultiItemPickerItemTemplate.ItemTemplateCheckbox = 'MultiSelectItemPicker-ChexkboxItemTemplate';
                MultiItemPickerItemTemplate.ItemTemplateToggle = 'MultiSelectItemPicker-ToggleItemTemplate';
                return MultiItemPickerItemTemplate;
            }());
            Field.MultiItemPickerItemTemplate = MultiItemPickerItemTemplate;
            var MultiItemPicker = (function (_super) {
                __extends(MultiItemPicker, _super);
                function MultiItemPicker(items, label, isMandatory, errorHandler, selectedValues, readonly) {
                    var _this = this;
                    if (!label) {
                        label = "";
                    }
                    var fieldOption = { label: label, isMandatory: isMandatory, appendAsterisk: false, errorHandler: errorHandler, multiSelect: true };
                    _super.call(this, fieldOption);
                    this.items(items);
                    var templateName = 'MultiSelectItemPicker';
                    this.listTemplateName(templateName);
                    this.selectedItems([]);
                    if (selectedValues) {
                        this.selectedItems(selectedValues);
                    }
                    if (readonly) {
                        setTimeout(function () {
                            var itemPickerParentDiv = $('#' + _this.controlContainerId);
                            itemPickerParentDiv.addClass("field-readonly");
                        }, 500);
                    }
                    this.resultStyle = "position: relative; z-index: 9999; max-width:100%;margin-top:-14px";
                    this.itemTemplate = ko.observable(MultiItemPickerItemTemplate.ItemTemplateToggle);
                    this.enableClickToExpand = true;
                }
                MultiItemPicker.prototype.getValueEx = function () {
                    return this.getValue();
                };
                MultiItemPicker.prototype.getValue = function () {
                    var returnValue = this.selectedItems().join(';');
                    return returnValue;
                };
                MultiItemPicker.prototype.toggleSelectItem = function (item) {
                    var foundItemIndex = this.selectedItems.indexOf(item, 0);
                    if (foundItemIndex > -1) {
                        this.selectedItems.remove(item);
                    }
                    else {
                        this.selectedItems.push(item);
                    }
                };
                MultiItemPicker.prototype.isSelected = function (item) {
                    var isSelected = false;
                    var foundItemIndex = this.selectedItems.indexOf(item, 0);
                    if (foundItemIndex > -1) {
                        isSelected = true;
                    }
                    return isSelected;
                };
                MultiItemPicker.prototype.changeItemRowTemplate = function (templateName) {
                    if (templateName) {
                        this.itemTemplate(templateName);
                    }
                };
                MultiItemPicker.prototype.onKeyUp = function (context, event) {
                    return;
                };
                return MultiItemPicker;
            }(Field.ItemPicker));
            Field.MultiItemPicker = MultiItemPicker;
        })(Field = HPTRIM.Field || (HPTRIM.Field = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var Field;
        (function (Field) {
            var PillBox = (function (_super) {
                __extends(PillBox, _super);
                function PillBox(items, label, isMandatory, errorHandler, selectedValues, readonly) {
                    _super.call(this, items, label, isMandatory, errorHandler, selectedValues, readonly);
                    this.currentPill = {};
                    this.enableMultiItemPickerSearch(true);
                    this.isLoadingKnockoutSubscription.dispose();
                }
                PillBox.prototype.deselect = function (item) {
                    if (!this.multiSelect) {
                        throw "Invalid operation, multiselect must be enabled";
                    }
                    if (!this.selectedItems) {
                        throw "SelectedItems is undefined";
                    }
                    var indexOf = this.selectedItems.indexOf(item);
                    if (indexOf >= 0) {
                        this.selectedItems.remove(item);
                    }
                    this.currentPill.editField = null;
                };
                PillBox.prototype.toggleEdit = function (context, event) {
                    if (this.multiSelect === true) {
                        var e = event || window.event;
                        if (!e) {
                            return;
                        }
                        var targetElement = e.target;
                        if (targetElement['className'] == "hp-icon hp-close close") {
                            return;
                        }
                    }
                    var inputElement = this.htmlElement();
                    if (!inputElement) {
                        return;
                    }
                    if (inputElement.value == '') {
                        return;
                    }
                    if (this.isMultiItemPickerSearchEnabled()) {
                        this.selectedItems.push(inputElement.value);
                        inputElement.value = '';
                    }
                };
                PillBox.prototype.hideItemPicker = function (e) {
                    var target = e.target;
                    if (target.parentElement == null) {
                        return;
                    }
                    if (!this.currentPill.editField) {
                        return;
                    }
                    $('.pill-edit').css('display', 'none');
                    $('.pill').css('display', 'inline-block');
                    if (this.selectedItems().length == 0) {
                        return;
                    }
                    var pillValue = this.currentPill.editField.value;
                    this.selectedItems.splice(this.currentPill.index, 1, pillValue);
                };
                PillBox.prototype.editPill = function (item, e) {
                    var arg = [];
                    for (var _i = 2; _i < arguments.length; _i++) {
                        arg[_i - 2] = arguments[_i];
                    }
                    var index = arguments[2];
                    var pill = e.target['parentElement'];
                    pill.style.display = 'none';
                    var pillEditField = pill['nextElementSibling'];
                    this.currentPill = { index: index, editField: pillEditField };
                    pillEditField.style.display = 'inline-block';
                    pillEditField.value = item;
                    pillEditField.setSelectionRange(0, item.length);
                    pillEditField.focus();
                };
                PillBox.prototype.onKeyUp = function (context, event) {
                    var event = event || window.event;
                    var KEY_ESC = 27, KEY_ENTER = 13;
                    if (event.keyCode == KEY_ESC) {
                        this.hideItemPicker(event);
                        return;
                    }
                    if (event.keyCode == KEY_ENTER) {
                        if (event.preventDefault) {
                            event.preventDefault();
                        }
                        if (this.currentPill) {
                            if (this.currentPill.index != undefined) {
                                if (this.currentPill.index >= 0) {
                                    this.hideItemPicker(event);
                                    var inputElement = this.htmlElement();
                                    if (inputElement) {
                                        inputElement.focus();
                                    }
                                }
                            }
                        }
                        this.toggleEdit();
                        return;
                    }
                    return true;
                };
                PillBox.prototype.finishAddingPill = function (e) {
                    var target = e.target;
                    if (target.parentElement == null) {
                        return;
                    }
                };
                PillBox.prototype.getPillIcon = function (data) {
                    return "";
                };
                return PillBox;
            }(Field.MultiItemPicker));
            Field.PillBox = PillBox;
        })(Field = HPTRIM.Field || (HPTRIM.Field = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var Field;
        (function (Field) {
            var PillBoxFileTypes = (function (_super) {
                __extends(PillBoxFileTypes, _super);
                function PillBoxFileTypes() {
                    _super.apply(this, arguments);
                }
                PillBoxFileTypes.prototype.toggleEdit = function (context, event) {
                    if (this.multiSelect === true) {
                        var e = event || window.event;
                        if (!e) {
                            return;
                        }
                        var targetElement = e.target;
                        if (targetElement['className'] == "hp-icon hp-close close") {
                            return;
                        }
                    }
                    var inputElement = this.htmlElement();
                    if (!inputElement) {
                        return;
                    }
                    var item = inputElement.value;
                    if (item == '') {
                        return;
                    }
                    if (this.isMultiItemPickerSearchEnabled()) {
                        if (item.indexOf("*.") == -1) {
                            item = "*." + item;
                        }
                        this.selectedItems.push(item);
                        inputElement.value = '';
                    }
                };
                PillBoxFileTypes.prototype.getPillIcon = function (data) {
                    var keyValue = {
                        '*.doc': "recestatushasemail_att_x24",
                        '*.docx': "records_24",
                        '*.pdf': "recestatuscheckedoutother_x24",
                        '*.xls': 'ltgrnfile_x24',
                        '*.tif': 'tifjpeg_x24'
                    };
                    var className = keyValue[data];
                    if (!className) {
                        className = 'help_24';
                    }
                    return className;
                };
                return PillBoxFileTypes;
            }(Field.PillBox));
            Field.PillBoxFileTypes = PillBoxFileTypes;
        })(Field = HPTRIM.Field || (HPTRIM.Field = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var Field;
        (function (Field) {
            var SelectPickerDropdown = (function (_super) {
                __extends(SelectPickerDropdown, _super);
                function SelectPickerDropdown(trimClient, items) {
                    _super.call(this);
                    this.Value = ko.observable('');
                    this.items = ko.observable([]);
                    this.enumName = "";
                    this.Id = _.uniqueId('field-select-picker');
                    this.template = "templates/Field/SelectPickerDropdown";
                    this.shouldIncludeThisItem = function (enumItem) {
                        if (enumItem.IsACustomValue === true && enumItem.HasBeenCustomised === false) {
                            return false;
                        }
                        return true;
                    };
                    this.setItemAsDefault = function (enumItem) {
                        return false;
                    };
                    this.items(items);
                    this.trimClient = trimClient;
                    this.selectedValue = ko.observable('');
                }
                SelectPickerDropdown.prototype.getValue = function () {
                    return this.Value();
                };
                SelectPickerDropdown.prototype.initializeSelect = function (data) {
                    if (!ko.isObservable(data.defaultValue)) {
                        $('#' + this.Id + '.selectpicker').val(data.defaultValue);
                        this.Value = ko.observable(data.defaultValue);
                        $('#' + this.Id + '.selectpicker').selectpicker('refresh');
                    }
                    else {
                        this.Value = ko.observable(data.items()[0].Name);
                        $('select#' + this.Id + '.selectpicker').selectpicker();
                    }
                };
                SelectPickerDropdown.prototype.getData = function (dataLoadedCallback) {
                    var _this = this;
                    var me = this;
                    me.trimClient.getAndProcessEnumDefinition(this.enumName, function (enumItems) {
                        var items = [];
                        var defaultItem;
                        _.each(enumItems, function (enumItem) {
                            if (!enumItem.Name) {
                                return;
                            }
                            if (!_this.shouldIncludeThisItem(enumItem)) {
                                return;
                            }
                            var enumObject = {
                                Caption: enumItem.Caption,
                                Name: enumItem.Name,
                                RawItem: enumItem
                            };
                            items.push(enumObject);
                            if (_this.setItemAsDefault(enumItem)) {
                                defaultItem = enumItem;
                            }
                        });
                        me.items(items);
                        if (defaultItem) {
                            me.Value(defaultItem.Name);
                        }
                        if (dataLoadedCallback) {
                            dataLoadedCallback();
                        }
                    });
                };
                return SelectPickerDropdown;
            }(HP.HPTRIM.Form.FieldDecorator));
            Field.SelectPickerDropdown = SelectPickerDropdown;
        })(Field = HPTRIM.Field || (HPTRIM.Field = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var Addon;
        (function (Addon) {
            var CustomScriptManager = (function () {
                function CustomScriptManager() {
                    throw new Error("Cannot instantiate a new instance of this class");
                }
                CustomScriptManager.register = function (buttonAddOn) {
                    this.s_buttons.push(buttonAddOn);
                    var copied = $.extend({}, buttonAddOn);
                    this.s_initialStates.push(buttonAddOn);
                };
                CustomScriptManager.reset = function () {
                    this.s_buttons([]);
                    for (var key in this.s_initialStates) {
                        this.s_buttons.push(this.s_initialStates[key]);
                    }
                    _.each(this.s_buttons(), function (btn) {
                        btn.setVisible(true);
                    });
                };
                CustomScriptManager.s_buttons = ko.observableArray([]);
                CustomScriptManager.s_initialStates = [];
                return CustomScriptManager;
            }());
            Addon.CustomScriptManager = CustomScriptManager;
        })(Addon = HPTRIM.Addon || (HPTRIM.Addon = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var Addon;
        (function (Addon) {
            var RecordAddonButton = (function () {
                function RecordAddonButton(param) {
                    this.isVisible = ko.observable(true);
                    this.caption = ko.observable("");
                    this.preRender = function () { };
                    this.caption(param.caption);
                    this.clickHandler = param.clickHandler;
                }
                RecordAddonButton.prototype.setContext = function (context) {
                    this.context = context;
                };
                RecordAddonButton.prototype.getContex = function (context) {
                    return this.context;
                };
                RecordAddonButton.prototype.setVisible = function (visible) {
                    if (visible == undefined) {
                        this.isVisible(true);
                        return;
                    }
                    this.isVisible(visible);
                };
                return RecordAddonButton;
            }());
            Addon.RecordAddonButton = RecordAddonButton;
        })(Addon = HPTRIM.Addon || (HPTRIM.Addon = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var DataLoader;
        (function (DataLoader) {
            var TrimItemListLoader = (function () {
                function TrimItemListLoader(trimClient, searchString, baseObjectType, owningPanel, sortOrder, searchRecordSetIdPrefix) {
                    this._requestId = 0;
                    this.properties = [];
                    this.propertySets = [];
                    this.loading = ko.observable(false);
                    this.searchRecordSetId = "";
                    this.searchRecordSetIdPrefix = "";
                    this.folderType = ['folder', 'series', 'box', 'paperfolder'];
                    this.propertiesFor = {
                        'Record': ['RecordClassification', 'PossiblyHasSubordinates', 'RecordRecordType', 'RecordTitle', 'RecordNumber', 'RecordExtension', 'isElectronic', 'RecordSpUrl', 'RecordRevisionCount', 'RecordIsCheckedOut', 'ChildRenditions'],
                        'SavedSearch': ['SearchDefinition', 'IsInFavorites', 'Icon', 'NameString', 'Uri', 'SavedSearchQueryString', 'SavedSearchIsOldFormat', 'SavedSearchObjectType', 'SavedSearchFilterString', 'SavedSearchSortString', 'SavedSearchDescription',
                            "SavedSearchAnyWordContents",
                            "SavedSearchAnyWordNotes",
                            "SavedSearchAnyWordTitle",
                            "SavedSearchAssigneeSearchIncludesAuthorisation",
                            "SavedSearchAssigneeSearchIncludesDelegates",
                            "SavedSearchAssigneeSearchIncludesEscalated",
                            "SavedSearchAssigneeSearchIncludesGroups",
                            "SavedSearchAssigneeSearchIncludesPosition",
                            "SavedSearchDefaultIncludesContent",
                            "SavedSearchDefaultIncludesNotes",
                            "SavedSearchDefaultIncludesNumber",
                            "SavedSearchDefaultIncludesTitle",
                            "SavedSearchExtendedIDOLOptimization",
                            "SavedSearchIdolSearchStyle",
                        ]
                    };
                    this._trimClient = trimClient;
                    this._searchString = searchString;
                    this._baseObjectType = baseObjectType;
                    this._sortOrder = sortOrder;
                    this._currentStartItemIndex = 1;
                    this.owningPanel = owningPanel;
                    this.searchRecordSetIdPrefix = searchRecordSetIdPrefix;
                    this.searchRecordSetId = searchRecordSetIdPrefix;
                    this._parentObjectType = "";
                }
                TrimItemListLoader.prototype.abort = function () {
                };
                TrimItemListLoader.prototype.updateSearchRecordSetId = function (query) {
                    this.searchRecordSetId = this.searchRecordSetIdPrefix + '_' + query.substring(0, 10) + '_' + new Date().getTime();
                };
                TrimItemListLoader.prototype.load = function (requestData, callback, errorCallback, fromItemIndex, itemsToLoad) {
                    var me = this;
                    if (!this._baseObjectType) {
                        throw "We need the name BaseObjectType name property for generic object";
                    }
                    this.reject();
                    var pageSize = this._trimClient.currentListPageSize(), page = 0;
                    var paging = requestData.Paging;
                    if (paging) {
                        pageSize = paging.pageSize;
                        page = paging.page;
                    }
                    if (this._searchString === "") {
                        return;
                    }
                    var searchFor = this._searchString || "none";
                    var search = new HPTRIM.TrimMainObjectSearch(this._trimClient, this._baseObjectType, this.searchRecordSetId);
                    search.setSearchString(searchFor);
                    search.setPageSize(pageSize);
                    var searchDefaultsList = this._trimClient.getSearchDefaults();
                    if (searchDefaultsList) {
                        var listOfObjectsWithDefaults = _.keys(searchDefaultsList);
                        var mainObjectType = this._baseObjectType.Id;
                        var filterObject = _.find(listOfObjectsWithDefaults, function (flag) {
                            return flag == mainObjectType;
                        });
                        if (filterObject == mainObjectType && (this._parentObjectType != "") && (this.folderType.indexOf(this._parentObjectType.toLowerCase()) === -1)) {
                            search.setFilterby(true);
                        }
                        else {
                            search.setFilterby(false);
                        }
                    }
                    else {
                        search.setFilterby(false);
                    }
                    if (this.properties.length == 0) {
                        var properties = this.propertiesFor[this._baseObjectType.name];
                        if (!properties) {
                            properties = ['icon', 'namestring'];
                        }
                    }
                    else {
                        properties = this.properties;
                    }
                    search.setPropertySets(this.propertySets);
                    search.setProperties(properties);
                    search.setStringDisplayType(HPTRIM.StringDisplayType.TreeColumn);
                    if (this._sortOrder) {
                        search.setSortby(this._sortOrder);
                    }
                    if (this._filterString) {
                        search.setFilter(this._filterString);
                    }
                    if (this._searchOptions) {
                        search.setSearchOptions(this._searchOptions);
                    }
                    search.includePropertyDefs(true);
                    search.setPropertyValueType(HPTRIM.PropertyValueType.Both);
                    me._requestId++;
                    var currentRequestId = me._requestId;
                    search.setItemsToLoad(fromItemIndex, itemsToLoad);
                    me._currentRequestXhr = search.page(page).done(function (result) {
                        me._currentRequestXhr = null;
                        me.loading(false);
                        me._currentStartItemIndex = search.getStartItemIndex();
                        me._trimClient.contentSearchHighlightString = result.HitHighlightString;
                        if (currentRequestId != me._requestId) {
                            return;
                        }
                        var items = [];
                        for (var index = 0; index < result.Results.length; index++) {
                            var asItem = { Fields: {}, ParentUris: [], Expanded: ko.observable(false), Expanding: ko.observable(false), NoChildren: ko.observable(false), owningPanel: me.owningPanel, subordinateListHasMoreItems: ko.observable(false), moreItemsCaption: ko.observable(""), isDuplicateActivityRecord: ko.observable(false) };
                            var trimItem = result.Results[index];
                            for (var propertyIndex in trimItem) {
                                var property = trimItem[propertyIndex];
                                if (propertyIndex == 'RecordExtension' ||
                                    propertyIndex == 'RecordSpURL') {
                                    asItem.Fields[propertyIndex] = trimItem[propertyIndex].Value;
                                }
                                else {
                                    if (trimItem[propertyIndex].Value == true && trimItem[propertyIndex].StringValue != undefined) {
                                        asItem.Fields[propertyIndex] = trimItem[propertyIndex];
                                    }
                                    else {
                                        asItem.Fields[propertyIndex] = trimItem[propertyIndex].Value || trimItem[propertyIndex];
                                    }
                                }
                            }
                            me.configureGetIcon(asItem);
                            items.push(asItem);
                        }
                        if (callback) {
                            var pluginData = {
                                Paging: { total: result.MinimumCount }, Selection: {}
                            };
                            var responseData = {
                                Items: items, PluginData: pluginData, SearchTitle: result.SearchTitle, PropertiesAndFields: result.PropertiesAndFields, HasMoreItems: result.HasMoreItems, TotalResults: result.TotalResults, CountStringEx: result.CountStringEx, MinimumCount: result.MinimumCount };
                            callback(responseData);
                        }
                    }).fail(function (jqXHR, textStatus, errorThrown) {
                        me._currentRequestXhr = null;
                        me.loading(false);
                        var items = [];
                        var responseStatus = {};
                        if (jqXHR.ResponseStatus) {
                            responseStatus = jqXHR.ResponseStatus;
                        }
                        else if (jqXHR.responseJSON && jqXHR.responseJSON.ResponseStatus) {
                            responseStatus = jqXHR.responseJSON.ResponseStatus;
                        }
                        var pluginData = {
                            Paging: { total: 0 }, Selection: {}
                        };
                        var responseData = { Items: items, responseStatus: responseStatus, textStatus: textStatus, errorThrown: errorThrown, PluginData: pluginData, HasMoreItems: false, TotalResults: 0 };
                        if (textStatus != "abort") {
                            errorCallback(responseData);
                        }
                    });
                    me.loading(true);
                };
                TrimItemListLoader.prototype.configureGetIcon = function (asItem) {
                    asItem.getIcon = HP.HPTRIM.Utils.TrimHelper.makeGetIconFunction();
                };
                TrimItemListLoader.prototype.getListStartItemIndex = function () {
                    return this._currentStartItemIndex;
                };
                TrimItemListLoader.prototype.setListStartItemIndex = function (newIndex) {
                    if (newIndex != undefined && newIndex > -1) {
                        this._currentStartItemIndex = newIndex;
                    }
                };
                TrimItemListLoader.prototype.setBaseObjectType = function (bobType) {
                    this._baseObjectType = bobType;
                };
                TrimItemListLoader.prototype.reject = function () {
                    if (this._currentRequestXhr && this._currentRequestXhr.state() == 'pending') {
                        this._currentRequestXhr.abort();
                    }
                };
                return TrimItemListLoader;
            }());
            DataLoader.TrimItemListLoader = TrimItemListLoader;
        })(DataLoader = HPTRIM.DataLoader || (HPTRIM.DataLoader = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var DataLoader;
        (function (DataLoader) {
            var ReportItemLoader = (function () {
                function ReportItemLoader(trimClient, query) {
                    this._searchString = "type: record and usable";
                    this._baseObjectType = HP.HPTRIM.BaseObjectTypes.Report;
                    this.loading = ko.observable(false);
                    this._trimClient = trimClient;
                    if (query) {
                        this._searchString = query.searchString + ' ' + HP.HPTRIM.Messages.core_and + ' ' + HP.HPTRIM.Messages.web_usable;
                    }
                }
                ReportItemLoader.prototype.abort = function () {
                };
                ReportItemLoader.prototype.load = function (requestData, callback, errorCallback) {
                    var paging = requestData.Paging;
                    var pageSize = 10000, page = 0;
                    var search = new HPTRIM.TrimMainObjectSearch(this._trimClient, this._baseObjectType);
                    search.setPropertySets(["All"]);
                    search.setSearchString(this._searchString);
                    search.setPageSize(pageSize);
                    search.setStringDisplayType(HPTRIM.StringDisplayType.TreeColumn);
                    var pageOne = search.page(page).done(function (result) {
                        var items = [];
                        for (var index = 0; index < result.Results.length; index++) {
                            var asItem = { Fields: {} };
                            var trimItem = result.Results[index];
                            for (var propertyIndex in trimItem) {
                                var property = trimItem[propertyIndex];
                                asItem.Fields[propertyIndex] = trimItem[propertyIndex].Value || trimItem[propertyIndex];
                            }
                            items.push(asItem);
                        }
                        if (callback) {
                            var pluginData = {
                                Paging: { total: result.TotalResults },
                                Selection: {}
                            };
                            var responseData = { Items: items, PluginData: pluginData, HasMoreItems: result.HasMoreItems, TotalResults: result.TotalResults };
                            callback(responseData);
                        }
                    });
                };
                return ReportItemLoader;
            }());
            DataLoader.ReportItemLoader = ReportItemLoader;
        })(DataLoader = HPTRIM.DataLoader || (HPTRIM.DataLoader = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var DataLoader;
        (function (DataLoader) {
            var ChildObjectItemListLoader = (function () {
                function ChildObjectItemListLoader(trimClient, searchString, baseObjectType, childObjectListName, enforceUniqueResult, sortOrder) {
                    var _this = this;
                    this._requestId = 0;
                    this.properties = [];
                    this._childObjectListName = "";
                    this._enforceUniqueResult = true;
                    this.loading = ko.observable(false);
                    this._pageSize = 20;
                    this.loadFilterer = function (item) { return true; };
                    this._searchString = searchString;
                    this._baseObjectType = baseObjectType;
                    this._sortOrder = sortOrder;
                    this._trimClient = trimClient;
                    this._childObjectListName = childObjectListName;
                    this._enforceUniqueResult = enforceUniqueResult;
                    this.properties.push(childObjectListName);
                    this._pageSize = trimClient.currentListPageSize();
                    trimClient.currentListPageSize.subscribe(function (newSize) {
                        _this._pageSize = _this._trimClient.currentListPageSize();
                    });
                }
                ChildObjectItemListLoader.prototype.abort = function () {
                };
                ChildObjectItemListLoader.prototype.updateSearchRecordSetId = function (query) {
                };
                ChildObjectItemListLoader.prototype.setBaseObjectType = function (baseObjectType) {
                    this._baseObjectType = baseObjectType;
                };
                ChildObjectItemListLoader.prototype.load = function (requestData, callback, errorCallback) {
                    var me = this;
                    this.reject();
                    var page = 0;
                    var paging = requestData.Paging;
                    if (paging) {
                        this._pageSize = paging.pageSize;
                        page = paging.page;
                    }
                    if (this._searchString === "") {
                        return;
                    }
                    var searchFor = this._searchString || "none";
                    var search = new HPTRIM.TrimMainObjectSearch(this._trimClient, this._baseObjectType);
                    search.setSearchString(searchFor);
                    search.setPageSize(me._pageSize);
                    search.setProperties(this.properties);
                    search.setStringDisplayType(HPTRIM.StringDisplayType.TreeColumn);
                    if (this._sortOrder) {
                        search.setSortby(this._sortOrder);
                    }
                    if (this._filterString) {
                        search.setFilter(this._filterString);
                    }
                    if (this._searchOptions) {
                        search.setSearchOptions(this._searchOptions);
                    }
                    me._requestId++;
                    var currentRequestId = me._requestId;
                    me._currentRequestXhr = search.page(page).done(function (result) {
                        me._currentRequestXhr = null;
                        me.loading(false);
                        if (currentRequestId != me._requestId) {
                            return;
                        }
                        if (result.Results.length > 1 && this._enforceUniqueResult) {
                            return;
                        }
                        var items = [];
                        for (var index = 0; index < result.Results.length; index++) {
                            var trimItem = result.Results[index];
                            var childObjectList = trimItem[me._childObjectListName];
                            for (var childIndex = 0; childIndex < childObjectList.length; childIndex++) {
                                var asItem = { Fields: {} };
                                var currentChildObject = childObjectList[childIndex];
                                for (var propertyIndex in currentChildObject) {
                                    var property = currentChildObject[propertyIndex];
                                    asItem.Fields[propertyIndex] = currentChildObject[propertyIndex].Value || currentChildObject[propertyIndex];
                                }
                                if (me.loadFilterer(asItem)) {
                                    items.push(asItem);
                                }
                            }
                        }
                        if (callback) {
                            var pluginData = {
                                Paging: { total: result.TotalResults }, Selection: {}
                            };
                            var responseData = { Items: items, PluginData: pluginData, HasMoreItems: result.HasMoreItems, TotalResults: result.TotalResults };
                            callback(responseData);
                        }
                    }).fail(function (jqXHR, textStatus, errorThrown) {
                        me._currentRequestXhr = null;
                        me.loading(false);
                        var items = [];
                        var responseStatus = {};
                        if (jqXHR.ResponseStatus) {
                            responseStatus = jqXHR.ResponseStatus;
                        }
                        var pluginData = {
                            Paging: { total: 0 }, Selection: {}
                        };
                        var responseData = { Items: items, responseStatus: responseStatus, textStatus: textStatus, errorThrown: errorThrown, PluginData: pluginData, HasMoreItems: false, TotalResults: 0 };
                        callback(responseData);
                        var error = "Error performing search.";
                        if (jqXHR.ResponseStatus) {
                            if (jqXHR.ResponseStatus.Message) {
                                error = jqXHR.ResponseStatus.Message;
                            }
                        }
                        errorCallback(error);
                    });
                    me.loading(true);
                };
                ChildObjectItemListLoader.prototype.reject = function () {
                    if (this._currentRequestXhr && this._currentRequestXhr.state() == 'pending') {
                        this._currentRequestXhr.abort();
                    }
                };
                return ChildObjectItemListLoader;
            }());
            DataLoader.ChildObjectItemListLoader = ChildObjectItemListLoader;
        })(DataLoader = HPTRIM.DataLoader || (HPTRIM.DataLoader = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var ActionHandlers;
            (function (ActionHandlers) {
                "use strict";
                var ShowHomeHandler = (function () {
                    function ShowHomeHandler() {
                    }
                    ShowHomeHandler.getHandler = function (app) {
                        return function () {
                            var action = app.trimNavPanel.getActionByName(App.Panels.Framework.NavPanel.HOME_CAPTION);
                            app.trimNavPanel.setActionActive(action);
                            app.trimMenuNavPanel.setActionActive(action);
                            app.trimBodyPanel.showDashboard();
                            app.trimMenuNavPanel.panelSelected(action.caption.toUpperCase());
                            if ($('#NAV_WORKLISTS').hasClass("selected")) {
                                $('#NAV_WORKLISTS').removeClass("active selected");
                                $("#NAV_WORKLISTS .nav-second-level").collapse('hide');
                            }
                            $('.template').height($('#recordDetailsCmpt').height());
                            $('.mediaObject').height($('#recordDetailsCmpt').height());
                            $(".draggable").sortable({
                                handle: ".drag-handle",
                                connectWith: ".draggable",
                                tolerance: "pointer",
                                forcePlaceholderSize: true,
                                opacity: 0.8,
                            });
                            app.historyCaption = app.trimNavPanel.getActionByName(App.Panels.Framework.NavPanel.HOME_CAPTION);
                            app.trimHistory.stateHandler(app, {}, HP.HPTRIM.Messages.web_HPRM + " - " + HP.HPTRIM.Messages.web_home);
                        };
                    };
                    return ShowHomeHandler;
                }());
                ActionHandlers.ShowHomeHandler = ShowHomeHandler;
            })(ActionHandlers = App.ActionHandlers || (App.ActionHandlers = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var ActionHandlers;
            (function (ActionHandlers) {
                "use strict";
                var ShowActivitiesHandler = (function () {
                    function ShowActivitiesHandler() {
                    }
                    ShowActivitiesHandler.getHandler = function (app, searchString) {
                        return function (id, uri) {
                            var action = app.trimNavPanel.getActionByName(App.Panels.Framework.NavPanel.WORKFLOW_CAPTION);
                            app.trimNavPanel.setActionActive(action);
                            app.trimMenuNavPanel.setActionActive(action);
                            app.trimMenuNavPanel.panelSelected(action.caption.toUpperCase());
                            app.trimBodyPanel.openPanelAndShowView(HPTRIM.BaseObjectTypes.Activity, App.Panels.WorkflowPanel.ACTIVITIES_DUE_VIEW_ID);
                        };
                    };
                    ShowActivitiesHandler.getSearchHandler = function (app) {
                        return function (objectType, searchString) {
                            var action = app.trimNavPanel.getActionByName(App.Panels.Framework.NavPanel.WORKFLOW_CAPTION);
                            app.trimNavPanel.setActionActive(action);
                            app.trimBodyPanel.openPanelAndSearch(objectType, searchString);
                        };
                    };
                    return ShowActivitiesHandler;
                }());
                ActionHandlers.ShowActivitiesHandler = ShowActivitiesHandler;
            })(ActionHandlers = App.ActionHandlers || (App.ActionHandlers = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var ActionHandlers;
            (function (ActionHandlers) {
                "use strict";
                var ShowRecordHandler = (function () {
                    function ShowRecordHandler() {
                    }
                    ShowRecordHandler.getHandler = function (app) {
                        return function (id, uri) {
                            if (app.trimNavPanel) {
                                var action = app.trimNavPanel.getActionByName(App.Panels.Framework.NavPanel.RECORD_CAPTION);
                                app.trimNavPanel.setActionActive(action);
                                app.trimMenuNavPanel.setActionActive(action);
                                app.trimMenuNavPanel.panelSelected(action.caption.toUpperCase());
                                var recordsPanel = app.trimBodyPanel.showRecordPanel(id, uri);
                            }
                            if (app.historyCaption && app.trimHistory) {
                                app.historyCaption = action.caption;
                                var context = {};
                                context.id = id;
                                context.uri = uri;
                                var title = HP.HPTRIM.Messages.web_HPRM + " - " + HP.HPTRIM.Messages.web_records;
                                app.trimHistory.stateHandler(app, context, title);
                                var url = window.location.href;
                                recordsPanel.recordCommandPanel.url(url);
                            }
                        };
                    };
                    return ShowRecordHandler;
                }());
                ActionHandlers.ShowRecordHandler = ShowRecordHandler;
            })(ActionHandlers = App.ActionHandlers || (App.ActionHandlers = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var ActionHandlers;
            (function (ActionHandlers) {
                "use strict";
                var CreateNewRecordHandler = (function () {
                    function CreateNewRecordHandler() {
                    }
                    CreateNewRecordHandler.getHandler = function (app) {
                        return function (fileDropped, recordTypeFilter, propertyValues, defaultClassification) {
                            app.trimBodyPanel.showNewRecordDataEntryPanel(fileDropped, recordTypeFilter, propertyValues, defaultClassification);
                        };
                    };
                    return CreateNewRecordHandler;
                }());
                ActionHandlers.CreateNewRecordHandler = CreateNewRecordHandler;
                var CreateNewRecordHandlerFromClassification = (function () {
                    function CreateNewRecordHandlerFromClassification() {
                    }
                    CreateNewRecordHandlerFromClassification.getHandler = function (app) {
                        return function (fileDropped, recordTypeFilter, propertyValues, defaultClassification) {
                            var createRecordPanel = app.trimBodyPanel.newRecordDataEntryPanelInModal(fileDropped, recordTypeFilter, propertyValues, defaultClassification, HP.HPTRIM.RecordTypeFilter.RecordWithinClassification);
                            createRecordPanel.configureCommandPanel(propertyValues, fileDropped, defaultClassification, HP.HPTRIM.RecordTypeFilter.RecordWithinClassification);
                            createRecordPanel.commandPanel.recordTypeFilter(recordTypeFilter);
                            createRecordPanel.commandPanel.displayDataEntryForm(false);
                            createRecordPanel.completeAction = function (uri) {
                                app.hideOverlay();
                                var currentActiveTab = app.trimBodyPanel.currentActiveTabPanel();
                                var recordsPanel = currentActiveTab.panel();
                                var query = "classification:" + defaultClassification.Uri;
                                recordsPanel.executeQuery(query, true);
                            };
                            createRecordPanel.dataEntryPanel.cancel = function () {
                                app.hideOverlay();
                            };
                            app.showOverlay(createRecordPanel);
                        };
                    };
                    return CreateNewRecordHandlerFromClassification;
                }());
                ActionHandlers.CreateNewRecordHandlerFromClassification = CreateNewRecordHandlerFromClassification;
                var CreateNewRecordBasedOnExistingRecordHandler = (function () {
                    function CreateNewRecordBasedOnExistingRecordHandler() {
                    }
                    CreateNewRecordBasedOnExistingRecordHandler.getHandler = function (app) {
                        return function (existingRecordUri, newRecordType, successCallback, failureCallback) {
                            var properties = "";
                            var data = {};
                            var newRequest = new HPTRIM.RecordNewRequest(app.trimClient, existingRecordUri, newRecordType, properties, data);
                            newRequest.doRequest().done(function (result) {
                                if (result.Results && result.Results.length == 1 && result.Results[0].Uri) {
                                    successCallback("uri:" + result.Results[0].Uri, "", HPTRIM.BaseObjectTypes.Record);
                                }
                                else {
                                    failureCallback(result);
                                }
                            }).fail(function (result) {
                                failureCallback(result);
                            });
                        };
                    };
                    return CreateNewRecordBasedOnExistingRecordHandler;
                }());
                ActionHandlers.CreateNewRecordBasedOnExistingRecordHandler = CreateNewRecordBasedOnExistingRecordHandler;
            })(ActionHandlers = App.ActionHandlers || (App.ActionHandlers = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var ActionHandlers;
            (function (ActionHandlers) {
                "use strict";
                var CreateLocationHandler = (function () {
                    function CreateLocationHandler() {
                    }
                    CreateLocationHandler.getHandler = function (app) {
                        return function () {
                            var displayError = ActionHandlers.DisplayError.getHandler(app);
                            app.trimBodyPanel.showNewLocationDataEntryPanel(app.trimClient, displayError);
                        };
                    };
                    return CreateLocationHandler;
                }());
                ActionHandlers.CreateLocationHandler = CreateLocationHandler;
            })(ActionHandlers = App.ActionHandlers || (App.ActionHandlers = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var ActionHandlers;
            (function (ActionHandlers) {
                "use strict";
                var ShowSettingsHandler = (function () {
                    function ShowSettingsHandler() {
                    }
                    ShowSettingsHandler.getHandler = function (app) {
                        return function () {
                            if (app instanceof App.TRIMApp) {
                                var trimApp = app;
                                trimApp.settingsForm = new App.Panels.Plugins.SettingsPanel(trimApp.trimClient);
                                trimApp.settingsForm.sendBackToHome = ActionHandlers.ShowHomeHandler.getHandler(trimApp);
                                trimApp.settingsForm.dismiss = function () { trimApp.dismissAllOverlays(); };
                                trimApp.settingsForm.returnToSettings = function () {
                                    trimApp.dismissCompletingOverlay();
                                };
                                trimApp.showOverlay(trimApp.settingsForm);
                                trimApp.settingsForm.loading = function () {
                                    trimApp.completingOverlay.message(HPTRIM.Messages.web_loading);
                                    trimApp.completingOverlay.showingMessage(true);
                                    trimApp.completingOverlay.allowCancel(false);
                                    trimApp.showOverlay(trimApp.completingOverlay);
                                };
                            }
                        };
                    };
                    return ShowSettingsHandler;
                }());
                ActionHandlers.ShowSettingsHandler = ShowSettingsHandler;
            })(ActionHandlers = App.ActionHandlers || (App.ActionHandlers = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var ActionHandlers;
            (function (ActionHandlers) {
                "use strict";
                var SearchHandler = (function () {
                    function SearchHandler() {
                    }
                    SearchHandler.getHandler = function (app) {
                        return HP.HPTRIM.App.ActionHandlers.SearchHandler.getSearchHandler(app);
                    };
                    SearchHandler.getClearGlobalThenSearchHandler = function (app) {
                        return function (queryString, uri, baseObjectType, filterString, sortString, searchOptions) {
                            app.trimGlobalSearchPanel.updateQueryFieldWithoutSearching("");
                            var standardSearchHandler = SearchHandler.getSearchHandler(app);
                            return standardSearchHandler(queryString, uri, baseObjectType, filterString, sortString, searchOptions);
                        };
                    };
                    SearchHandler.getLocalSearchHandler = function (app) {
                        var _this = this;
                        var displayError = ActionHandlers.DisplayError.getHandler(app);
                        return function (queryString, uri, baseObjectType, filterString, sortString, searchOptions, dontUpdateGlobalSearchField) {
                            var targetObjectType = HPTRIM.BaseObjectTypes.Record;
                            if (baseObjectType) {
                                targetObjectType = baseObjectType;
                            }
                            if (!_.contains(app.getSupportedTypes(), targetObjectType)) {
                                displayError(HPTRIM.Messages.web_unsupportedType);
                                return;
                            }
                            if (baseObjectType) {
                                app.trimGlobalSearchPanel.setType(baseObjectType);
                            }
                            if (dontUpdateGlobalSearchField !== true) {
                                var queryStringTitle = _this.getCaptionTitle(queryString);
                                app.trimGlobalSearchPanel.updateQueryFieldWithoutSearching(queryString, queryStringTitle);
                            }
                            app.trimGlobalSearchPanel.currentFilter(filterString);
                            if (app.trimGlobalSearchPanel.showFilterButton()) {
                                app.trimGlobalSearchPanel.currentFilterPanelRef.setFilterString(filterString);
                            }
                            if (baseObjectType == HPTRIM.BaseObjectTypes.Record) {
                                if (app.trimGlobalSearchPanel.currentRecordTypeFilterRef) {
                                    app.trimGlobalSearchPanel.currentRecordTypeFilterRef.setFilterString(filterString);
                                }
                            }
                            if (targetObjectType == HPTRIM.BaseObjectTypes.Record) {
                                var recordsPanel = app.trimBodyPanel.currentActiveTabPanel().recordsPanelRef;
                                if (recordsPanel) {
                                    recordsPanel.executeQuery(queryString, true, sortString, filterString, searchOptions);
                                    recordsPanel.selectedUri(uri);
                                    var queryStringTitle = _this.getCaptionTitle(queryString);
                                    app.trimBodyPanel.currentActiveTabPanel().title(targetObjectType.Caption + ' - ' + queryStringTitle);
                                }
                                else {
                                    app.trimBodyPanel.openPanelAndSearch(targetObjectType, queryString, uri, filterString, sortString, searchOptions);
                                }
                            }
                            else {
                                var activatedPanel = app.trimBodyPanel.currentActiveTabPanel().mainObjectPanelRef;
                                var action = app.trimNavPanel.getActionByType(targetObjectType);
                                if (activatedPanel && activatedPanel.getTypeForPanel() == targetObjectType) {
                                    var query = "";
                                    if (queryString) {
                                        query = queryString.replace(/^"|"$/g, '');
                                    }
                                    activatedPanel.doSearch(queryString, uri, filterString, sortString);
                                    app.trimBodyPanel.currentActiveTabPanel().title(targetObjectType.Caption + ' - ' + query);
                                }
                                else {
                                    app.trimBodyPanel.openPanelAndSearch(targetObjectType, queryString, uri, filterString, sortString, searchOptions);
                                }
                            }
                            _.delay(function () {
                                $('.as-spa-content-main')[0].focus();
                            }, 500);
                        };
                    };
                    SearchHandler.getSearchHandler = function (app) {
                        return function (queryString, uri, baseObjectType, filterString, sortString, searchOptions, dontUpdateGlobalSearchField, callBack) {
                            var targetObjectType = HPTRIM.BaseObjectTypes.Record;
                            if (baseObjectType) {
                                targetObjectType = baseObjectType;
                            }
                            if (!_.contains(app.getSupportedTypes(), targetObjectType)) {
                                var displayError = ActionHandlers.DisplayError.getHandler(app);
                                displayError(HPTRIM.Messages.web_unsupportedType);
                                return;
                            }
                            if (baseObjectType) {
                                app.trimGlobalSearchPanel.setType(baseObjectType);
                            }
                            if (dontUpdateGlobalSearchField !== true) {
                                app.trimGlobalSearchPanel.updateQueryFieldWithoutSearching(queryString);
                            }
                            app.trimGlobalSearchPanel.currentFilter(filterString);
                            if (app.trimGlobalSearchPanel.showFilterButton()) {
                                app.trimGlobalSearchPanel.currentFilterPanelRef.setFilterString(filterString);
                            }
                            if (baseObjectType == HPTRIM.BaseObjectTypes.Record) {
                                if (app.trimGlobalSearchPanel.currentRecordTypeFilterRef) {
                                    app.trimGlobalSearchPanel.currentRecordTypeFilterRef.setFilterString(filterString);
                                }
                            }
                            app.trimGlobalSearchPanel.currentSort(sortString);
                            if (app.trimGlobalSearchPanel.currentSortPanelRef) {
                                app.trimGlobalSearchPanel.currentSortPanelRef.setSortString(sortString);
                            }
                            var action = app.trimNavPanel.getActionByType(targetObjectType);
                            app.trimNavPanel.setActionActive(action);
                            app.trimBodyPanel.openPanelAndSearch(targetObjectType, queryString, uri, filterString, sortString, searchOptions, callBack);
                        };
                    };
                    SearchHandler.getCaptionTitle = function (queryString) {
                        var captionTitle = "";
                        switch (queryString) {
                            case "favorite":
                                captionTitle = HP.HPTRIM.Messages.web_favoritesView;
                                break;
                            case "checkedOutBy:" + HPTRIM.Messages.bob_sbMe:
                                captionTitle = HP.HPTRIM.Messages.web_checkedOutView + HPTRIM.Messages.bob_sbMe;
                                break;
                            case "myDocuments":
                                captionTitle = HP.HPTRIM.Messages.web_recentsView;
                                break;
                            case "creator:" + HPTRIM.Messages.bob_sbMe:
                                captionTitle = HP.HPTRIM.Messages.web_createdView + HPTRIM.Messages.bob_sbMe;
                                break;
                            default: captionTitle = queryString;
                        }
                        return captionTitle;
                    };
                    return SearchHandler;
                }());
                ActionHandlers.SearchHandler = SearchHandler;
            })(ActionHandlers = App.ActionHandlers || (App.ActionHandlers = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var ActionHandlers;
            (function (ActionHandlers) {
                "use strict";
                var ModifyRecordDetailsHandler = (function () {
                    function ModifyRecordDetailsHandler() {
                    }
                    ModifyRecordDetailsHandler.getHandler = function (app, owningPanel) {
                        return HP.HPTRIM.App.ActionHandlers.ModifyRecordDetailsHandler.getModifyRecordHandler(app, owningPanel);
                    };
                    ModifyRecordDetailsHandler.getModifyRecordHandler = function (app, owningPanel, goToDashboardOnCancel) {
                        return function (uri, updateCallback) {
                            app.trimBodyPanel.showUpdateRecordDataEntryPanel(uri, updateCallback);
                        };
                    };
                    return ModifyRecordDetailsHandler;
                }());
                ActionHandlers.ModifyRecordDetailsHandler = ModifyRecordDetailsHandler;
            })(ActionHandlers = App.ActionHandlers || (App.ActionHandlers = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var ActionHandlers;
            (function (ActionHandlers) {
                "use strict";
                var ViewRecordHandler = (function () {
                    function ViewRecordHandler() {
                    }
                    ViewRecordHandler.getHandler = function (app, trimClient) {
                        return HP.HPTRIM.App.ActionHandlers.ViewRecordHandler.getViewRecordHandler(app, trimClient);
                    };
                    ViewRecordHandler.getViewRecordHandler = function (app, trimClient) {
                        return function (uri, downloadLink, html, canCheckOut, checkOutCallback, passedInRecNumber, passedInRecTitle) {
                            var activePanel = app.trimBodyPanel.activePanel();
                            var searchStringForHighlight = trimClient.contentSearchHighlightString;
                            var currentHTML = html;
                            var highlightedContent = HP.HPTRIM.Utils.TrimHelper.getHighlightedContent(currentHTML, searchStringForHighlight);
                            var recordViewOverlay = app.recordViewOverlay;
                            if (app.trimBodyPanel && app.recordViewOverlay) {
                                app.recordViewOverlay.returnAction = function () {
                                    app.docViewer.hide();
                                };
                                app.recordViewOverlay.togglehighlight.subscribe(function (newValue) {
                                    var currentHTML = html;
                                    if (newValue) {
                                        recordViewOverlay.recordHtml(highlightedContent);
                                    }
                                    else {
                                        recordViewOverlay.recordHtml(html);
                                    }
                                });
                                recordViewOverlay.uri(uri);
                                recordViewOverlay.recordHtml(highlightedContent);
                                if (searchStringForHighlight.length)
                                    app.recordViewOverlay.togglehighlight(true);
                                recordViewOverlay.downloadLink(downloadLink);
                                recordViewOverlay.canCheckOut(canCheckOut);
                                recordViewOverlay.searchHighlightString(searchStringForHighlight);
                                recordViewOverlay.checkOut = function () {
                                    var checkOutRequest = new HP.HPTRIM.CheckOutRequest(app.trimClient, uri, {});
                                    checkOutRequest.doRequest().done(function (result) {
                                        window.open(downloadLink, '_self');
                                        recordViewOverlay.canCheckOut(false);
                                        recordViewOverlay.checkoutCallback();
                                        checkOutCallback();
                                        if (recCmp) {
                                            recCmp.refresh();
                                        }
                                    }).fail(function () {
                                        alert("Check out request failed.");
                                    });
                                };
                                app.recordViewOverlay.visible(true);
                                $('#cm-rendition-Viewer-container').hide();
                                $('#cm-Viewer-container').show();
                                $('#cm-Viewer-container').focus();
                                var currentTabPanel = app.trimBodyPanel.currentActiveTabPanel();
                                var recCmp = currentTabPanel.recordsPanelRef ? currentTabPanel.recordsPanelRef.recordsDetailComponent : undefined;
                                if (!recCmp) {
                                    recCmp = currentTabPanel.workflowPanelRef ? currentTabPanel.workflowPanelRef.recordsDetailComponent : undefined;
                                }
                                if (passedInRecNumber && passedInRecNumber.Value)
                                    passedInRecNumber = passedInRecNumber.Value;
                                if (passedInRecTitle && passedInRecTitle.Value)
                                    passedInRecTitle = passedInRecTitle.Value;
                                var currentRecNumber = passedInRecNumber ? passedInRecNumber : (recCmp ? recCmp.recordNumber() : "");
                                var currentRecTitle = passedInRecTitle ? passedInRecTitle : (recCmp ? recCmp.recordTitle() : "");
                                var recTitle = currentRecNumber + " : " + currentRecTitle;
                                app.docViewer.setTitle(recTitle);
                                app.docViewer.setUpShowRevisions(uri, html);
                                app.docViewer.setUpShowRenditions(uri, html);
                                app.docViewer.setRecordViewOverlay(app.recordViewOverlay);
                                if (app.trimHistory) {
                                    var title = HP.HPTRIM.Messages.web_HPRM + " - " + HP.HPTRIM.Messages.vwr_tbar_view + " " + HP.HPTRIM.Messages.web_records;
                                    app.trimHistory.stateHandler(app, { uri: uri, downloadLink: downloadLink }, title);
                                }
                            }
                        };
                    };
                    return ViewRecordHandler;
                }());
                ActionHandlers.ViewRecordHandler = ViewRecordHandler;
                var HandleGenericViewClickHandler = (function () {
                    function HandleGenericViewClickHandler() {
                    }
                    HandleGenericViewClickHandler.getHandler = function (app, trimClient) {
                        var viewHandler = ViewRecordHandler.getHandler(app, trimClient);
                        return function (uri, extension, failCallback) {
                            var deferred = new $.Deferred();
                            var promise = deferred.promise();
                            promise.done(function (result, realPath) {
                                var downloadPath = realPath + "Document?";
                                var realHtml = result.replace(/=\"resource\//g, "=\"" + realPath + "resource/");
                                realHtml = realHtml.replace(/alt=''/g, "");
                                realHtml = realHtml.replace(/alt!=/g, "");
                                realHtml = realHtml.replace(/<img /g, "<img alt='" + HP.HPTRIM.Messages.web_noImage + "'");
                                viewHandler(uri, downloadPath, realHtml);
                            }).fail(function (errorThrown, result, realPath) {
                                var showDefaultPane = false;
                                var jsonResult = jQuery.parseJSON(result);
                                if (jsonResult.ResponseStatus) {
                                    if (jsonResult.ResponseStatus.Message) {
                                        var message = jsonResult.ResponseStatus.Message;
                                        if ((message.indexOf(HP.HPTRIM.Messages.web_convert) != -1)
                                            && (message.indexOf(HP.HPTRIM.Messages.web_accessDenied) == -1)) {
                                            showDefaultPane = true;
                                        }
                                    }
                                }
                                if (showDefaultPane) {
                                    viewHandler(uri, realPath + "Document?", "");
                                }
                                else {
                                    var actionResult = HP.HPTRIM.Messages.web_accessDenied;
                                    actionResult += ",";
                                    if (jsonResult.ResponseStatus) {
                                        if (jsonResult.ResponseStatus.Message) {
                                            var message = jsonResult.ResponseStatus.Message;
                                            if (message.indexOf(HP.HPTRIM.Messages.web_accessDenied) == -1) {
                                                message = HP.HPTRIM.Messages.web_accessDenied;
                                                message += ",";
                                                actionResult += HP.HPTRIM.Messages.web_reason;
                                                actionResult += message;
                                            }
                                        }
                                    }
                                    failCallback(actionResult);
                                }
                            });
                            var rendition = new HPTRIM.TrimRecordRenditionRequest(app.trimClient, uri);
                            var request = rendition.doRequest(deferred);
                        };
                    };
                    return HandleGenericViewClickHandler;
                }());
                ActionHandlers.HandleGenericViewClickHandler = HandleGenericViewClickHandler;
                var HandleDetailComponentViewClickHandler = (function () {
                    function HandleDetailComponentViewClickHandler() {
                    }
                    HandleDetailComponentViewClickHandler.getHandler = function (app, recordsDetailComponent) {
                        var _this = this;
                        return function (uriFromTemplate, extensionFromTemplate, passedInRecNumber, passedInRecTitle, revisionCount, recordIsCheckedOut, sharePointUrl, recordInfoData) {
                            var me = _this;
                            if (recordsDetailComponent.recordInfoObject != undefined && recordsDetailComponent.recordInfoObject.Uri == uriFromTemplate) {
                                recordsDetailComponent.app = app;
                                var canBeViewedOnWOPI = recordsDetailComponent.recordInfoObject.WOPIInfo != null && recordsDetailComponent.recordInfoObject.WOPIInfo.editURL.length != 0;
                                if (me.isWOPISupported && canBeViewedOnWOPI) {
                                    recordsDetailComponent.viewDocument(uriFromTemplate);
                                }
                                else {
                                    me.viewDocument(app, recordsDetailComponent, uriFromTemplate, extensionFromTemplate, passedInRecNumber, passedInRecTitle, revisionCount, recordIsCheckedOut, sharePointUrl, recordInfoData);
                                }
                            }
                            else {
                                recordsDetailComponent.updateModel(uriFromTemplate, "", function () {
                                    var canBeViewedOnWOPI = recordsDetailComponent.recordInfoObject.WOPIInfo != null && recordsDetailComponent.recordInfoObject.WOPIInfo.editURL.length != 0;
                                    recordsDetailComponent.app = app;
                                    if (me.isWOPISupported && canBeViewedOnWOPI) {
                                        recordsDetailComponent.viewDocument(uriFromTemplate);
                                    }
                                    else {
                                        me.viewDocument(app, recordsDetailComponent, uriFromTemplate, extensionFromTemplate, passedInRecNumber, passedInRecTitle, revisionCount, recordIsCheckedOut, sharePointUrl, recordInfoData);
                                    }
                                });
                            }
                            recordsDetailComponent.attachmentIsViewed = false;
                        };
                    };
                    HandleDetailComponentViewClickHandler.viewDocument = function (app, recordsDetailComponent, uriFromTemplate, extensionFromTemplate, passedInRecNumber, passedInRecTitle, revisionCount, recordIsCheckedOut, sharePointUrl, recordInfoData) {
                        var enableRevisionBtn = false;
                        var enableRenditionBtn = false;
                        if (revisionCount > 1) {
                            enableRevisionBtn = true;
                        }
                        else {
                            enableRevisionBtn = false;
                        }
                        if (recordInfoData && recordInfoData.ChildRenditions != null && recordInfoData.ChildRenditions.length > 0) {
                            enableRenditionBtn = true;
                        }
                        app.docViewer.show();
                        setTimeout(function () {
                            app.docViewer.headerPanel.showRevisionsButton(enableRevisionBtn);
                            app.docViewer.headerPanel.enableRevisionButton(enableRevisionBtn);
                            app.docViewer.headerPanel.showRenditionsButton(enableRenditionBtn);
                            app.docViewer.headerPanel.enableRenditionsButton(enableRenditionBtn);
                        }, 500);
                        app.recordViewOverlay.visible(true);
                        app.recordViewOverlay.objectPanel.propertyOrFieldListView.promoteRevisionEnabled(!recordIsCheckedOut);
                        $('#cm-Viewer-container').show();
                        $('#cm-rendition-Viewer-container').hide();
                        $('#cm-Viewer-container').focus();
                        var currentTabPanel = app.trimBodyPanel.currentActiveTabPanel();
                        var recCmp = currentTabPanel.recordsPanelRef ? currentTabPanel.recordsPanelRef.recordsDetailComponent : undefined;
                        if (!recCmp) {
                            recCmp = currentTabPanel.workflowPanelRef ? currentTabPanel.workflowPanelRef.recordsDetailComponent : undefined;
                        }
                        var uri = uriFromTemplate;
                        var spItemUrl = sharePointUrl;
                        if (spItemUrl != "" && spItemUrl != undefined) {
                            recordsDetailComponent.downloadLink(spItemUrl);
                            recordsDetailComponent.viewRecord(uri, spItemUrl, HP.HPTRIM.Messages.web_docInSharePointNotPreviewable, false, function () { recordsDetailComponent.refresh; recordsDetailComponent.canCheckOut(false); });
                            app.recordViewOverlay.isSharePoint = ko.observable(true);
                            app.docViewer.headerPanel.isSharePoint(true);
                            app.docViewer.headerPanel.showDownloadButton(true);
                            app.docViewer.headerPanel.downloadLink(spItemUrl);
                            app.docViewer.headerPanel.title(passedInRecNumber + " : " + passedInRecTitle);
                            return;
                        }
                        app.docViewer.headerPanel.showDownloadButton(true);
                        app.docViewer.headerPanel.isSharePoint(false);
                        var recInfoObject = recordsDetailComponent.recordInfoObject;
                        var ext = "";
                        if (recInfoObject) {
                            if (recInfoObject.RecordExtension['Value'] != null) {
                                ext = recInfoObject.RecordExtension.Value.toLowerCase();
                            }
                            else {
                                ext = recInfoObject.RecordExtension.toLowerCase();
                            }
                        }
                        if (_.isString(extensionFromTemplate)) {
                            ext = extensionFromTemplate;
                        }
                        var extension = "*." + ext;
                        var trimClient = app.trimClient;
                        var userOption = trimClient.getUserOptions();
                        var bypassFileTypeArray = userOption.bypassViewerFileTypes();
                        var onstreamViewerFileTypesArray = userOption.onstreamViewerFileTypes();
                        var bypassViewerForThisRecord = false, useOnstreamViewerForThisRecord = false, strBypassViewer = "", strUseOnstream = "";
                        if (spItemUrl != "" && spItemUrl != undefined) {
                            app.recordViewOverlay.isSharePoint = ko.observable(true);
                        }
                        if (!_.isNull(bypassFileTypeArray)) {
                            strBypassViewer = bypassFileTypeArray.toString().toLowerCase();
                        }
                        if (!_.isNull(onstreamViewerFileTypesArray)) {
                            strUseOnstream = onstreamViewerFileTypesArray.toString().toLowerCase();
                        }
                        if (strBypassViewer.indexOf(extension.toLowerCase()) > -1) {
                            bypassViewerForThisRecord = true;
                        }
                        if (strUseOnstream.indexOf(extension.toLowerCase()) > -1) {
                            useOnstreamViewerForThisRecord = true;
                        }
                        var virtualDir = HPRMWebConfig.virtualDirectory;
                        var path = virtualDir + "ServiceApi/Record/";
                        var renditionPath = path + uri + "/Rendition/Longevity?inline";
                        var hasRendition = false;
                        var viewDocument = function () {
                            var html = "";
                            var byPassViewerActive = false;
                            if (hasRendition) {
                                byPassViewerActive = true;
                                html = "<iframe style='border:none' width=100% height=100% src='" + renditionPath + "'></iframe>";
                            }
                            else if (bypassViewerForThisRecord) {
                                byPassViewerActive = true;
                                html = "<iframe style='border:none' width=100% height=100% src='" + path + uri + "/File/Document?inline?forViewing'></iframe> ";
                            }
                            else if (useOnstreamViewerForThisRecord) {
                                byPassViewerActive = true;
                                var trapezeViewerUrl = virtualDir + "/TrapezeViewer/?uri=" + uri + '?forViewing';
                                html = "<iframe width=100% height=100% src = " + trapezeViewerUrl + " />";
                            }
                            if (byPassViewerActive) {
                                var downloadPath = path + uri + "/File/Document";
                                recordsDetailComponent.recordViewHtml(html);
                                recordsDetailComponent.viewRecord(uri, recordsDetailComponent.downloadLink(), recordsDetailComponent.recordViewHtml(), recordsDetailComponent.canCheckOut(), function () { recordsDetailComponent.refresh; recordsDetailComponent.canCheckOut(false); }, passedInRecNumber, passedInRecTitle);
                                recordsDetailComponent.downloadLink(downloadPath);
                                app.docViewer.headerPanel.downloadLink(downloadPath);
                                return;
                            }
                            var deferred = new $.Deferred();
                            var promise = deferred.promise();
                            promise.done(function (result, realPath) {
                                var downloadPath = realPath + "Document?";
                                var realHtml = result.replace(/=\"resource\//g, "=\"" + realPath + "resource/");
                                realHtml = realHtml.replace(/alt=''/g, "");
                                realHtml = realHtml.replace(/alt!=/g, "");
                                realHtml = realHtml.replace(/<img /g, "<img alt='" + HP.HPTRIM.Messages.web_noImage + "'");
                                recordsDetailComponent.recordViewHtml(realHtml);
                                recordsDetailComponent.downloadLink(downloadPath);
                                recordsDetailComponent.viewRecord(uri, recordsDetailComponent.downloadLink(), recordsDetailComponent.recordViewHtml(), recordsDetailComponent.canCheckOut(), function () { recordsDetailComponent.refresh; recordsDetailComponent.canCheckOut(false); }, passedInRecNumber, passedInRecTitle);
                                recordsDetailComponent.uri = uri;
                                app.docViewer.headerPanel.setContext(recordsDetailComponent);
                            }).fail(function (errorThrown, result, realPath) {
                                recordsDetailComponent.recordViewHtml("");
                                var showDefaultPane = false;
                                var jsonResult = jQuery.parseJSON(result);
                                if (jsonResult.ResponseStatus) {
                                    if (jsonResult.ResponseStatus.Message) {
                                        var message = jsonResult.ResponseStatus.Message;
                                        if ((message.indexOf(HP.HPTRIM.Messages.web_convert) != -1)
                                            && (message.indexOf(HP.HPTRIM.Messages.web_accessDenied) == -1)) {
                                            showDefaultPane = true;
                                        }
                                    }
                                }
                                if (showDefaultPane) {
                                    recordsDetailComponent.recordViewHtml("");
                                    recordsDetailComponent.downloadLink(realPath + "Document?");
                                    recordsDetailComponent.viewRecord(uri, recordsDetailComponent.downloadLink(), recordsDetailComponent.recordViewHtml(), recordsDetailComponent.canCheckOut(), function () { recordsDetailComponent.refresh; recordsDetailComponent.canCheckOut(false); }, passedInRecNumber, passedInRecTitle);
                                    app.docViewer.headerPanel.downloadLink(recordsDetailComponent.downloadLink());
                                }
                                else {
                                    var actionResult = HP.HPTRIM.Messages.web_accessDenied;
                                    actionResult += ",";
                                    if (jsonResult.ResponseStatus) {
                                        if (jsonResult.ResponseStatus.Message) {
                                            var message = jsonResult.ResponseStatus.Message;
                                            if (message.indexOf(HP.HPTRIM.Messages.web_accessDenied) == -1) {
                                                message = HP.HPTRIM.Messages.web_accessDenied;
                                                message += ",";
                                                actionResult += HP.HPTRIM.Messages.web_reason;
                                                actionResult += message;
                                            }
                                        }
                                    }
                                    recordsDetailComponent.actionResult(actionResult);
                                    recordsDetailComponent.actionResultDisplay(true);
                                    recordsDetailComponent.downloadLink("");
                                }
                            });
                            var rendition = new HPTRIM.TrimRecordRenditionRequest(recordsDetailComponent.trimClient, uri);
                            var request = rendition.doRequest(deferred);
                        };
                        var success = function (data, status, xhr) {
                            var content_length = xhr.getResponseHeader("content-length");
                            if (parseInt(content_length) > 0) {
                                hasRendition = true;
                                app.docViewer.hasRendition(true);
                            }
                            else {
                                hasRendition = false;
                                app.docViewer.hasRendition(false);
                            }
                        };
                        var err = function (data, status, xhr) {
                            viewDocument();
                        };
                        var req = trimClient.doGetForRenditionResource(renditionPath).then(success, err);
                        req.then(function () {
                            viewDocument();
                        });
                    };
                    HandleDetailComponentViewClickHandler.isWOPISupported = typeof WOPIConfig != "undefined" && WOPIConfig.enabled;
                    return HandleDetailComponentViewClickHandler;
                }());
                ActionHandlers.HandleDetailComponentViewClickHandler = HandleDetailComponentViewClickHandler;
            })(ActionHandlers = App.ActionHandlers || (App.ActionHandlers = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var ActionHandlers;
            (function (ActionHandlers) {
                "use strict";
                var ViewRecordRenditionHandler = (function () {
                    function ViewRecordRenditionHandler() {
                    }
                    ViewRecordRenditionHandler.getHandler = function (app, trimClient) {
                        return HP.HPTRIM.App.ActionHandlers.ViewRecordRenditionHandler.getViewRecordRenditionHandler(app, trimClient);
                    };
                    ViewRecordRenditionHandler.getViewRecordRenditionHandler = function (app, trimClient) {
                        return function (uri, downloadLink, html, canCheckOut, checkOutCallback, passedInRecNumber, passedInRecTitle) {
                            var activePanel = app.trimBodyPanel.activePanel();
                            var recordViewRenditionOverlay = app.recordViewRenditionOverlay;
                            if (app.trimBodyPanel && app.recordViewRenditionOverlay) {
                                app.recordViewRenditionOverlay.returnAction = function () {
                                    app.renditionDocViewer.hide();
                                };
                                recordViewRenditionOverlay.uri(uri);
                                recordViewRenditionOverlay.recordHtml(html);
                                recordViewRenditionOverlay.downloadLink(downloadLink);
                                app.recordViewRenditionOverlay.visible(true);
                                $('#cm-Viewer-container').hide();
                                $('#cm-rendition-Viewer-container').show();
                                $('#cm-rendition-Viewer-container').focus();
                                var currentTabPanel = app.trimBodyPanel.currentActiveTabPanel();
                                var recCmp = currentTabPanel.recordsPanelRef ? currentTabPanel.recordsPanelRef.recordsDetailComponent : undefined;
                                if (!recCmp) {
                                    recCmp = currentTabPanel.workflowPanelRef ? currentTabPanel.workflowPanelRef.recordsDetailComponent : undefined;
                                }
                                if (passedInRecNumber && passedInRecNumber.Value)
                                    passedInRecNumber = passedInRecNumber.Value;
                                if (passedInRecTitle && passedInRecTitle.Value)
                                    passedInRecTitle = passedInRecTitle.Value;
                                var currentRecNumber = passedInRecNumber ? passedInRecNumber : (recCmp ? recCmp.recordNumber() : "");
                                var currentRecTitle = passedInRecTitle ? passedInRecTitle : (recCmp ? recCmp.recordTitle() : "");
                                var recTitle = currentRecNumber + " : " + currentRecTitle;
                                app.renditionDocViewer.setTitle(recTitle);
                                app.renditionDocViewer.setRecordViewOverlayForRendition(app.recordViewRenditionOverlay);
                                app.renditionDocViewer.setUpShowRenditions(uri, html);
                                if (app.trimHistory) {
                                    var title = HP.HPTRIM.Messages.web_HPRM + " - " + HP.HPTRIM.Messages.vwr_tbar_view + " " + HP.HPTRIM.Messages.web_records;
                                    app.trimHistory.stateHandler(app, { uri: uri, downloadLink: downloadLink }, title);
                                }
                            }
                        };
                    };
                    return ViewRecordRenditionHandler;
                }());
                ActionHandlers.ViewRecordRenditionHandler = ViewRecordRenditionHandler;
                var HandleShowRenditionViewClickHandler = (function () {
                    function HandleShowRenditionViewClickHandler() {
                    }
                    HandleShowRenditionViewClickHandler.getHandler = function (app, recordsDetailComponent) {
                        return function (uriFromTemplate, recordRenditions, recordInfoObject, passedInRecNumber, passedInRecTitle, recordIsCheckedOut, sharePointUrl) {
                            var hasMoreRenditions = false;
                            app.renditionDocViewer.show();
                            setTimeout(function () {
                                if (recordRenditions != null && recordRenditions.length > 1) {
                                    app.renditionDocViewer.headerPanel.enableRenditionsButton(true);
                                }
                                else {
                                    app.renditionDocViewer.headerPanel.enableRenditionsButton(false);
                                }
                                app.renditionDocViewer.headerPanel.showRenditionsButton(true);
                            }, 500);
                            app.recordViewRenditionOverlay.visible(true);
                            $('#cm-Viewer-container').hide();
                            $('#cm-rendition-Viewer-container').show();
                            $('#cm-rendition-Viewer-container').focus();
                            var currentTabPanel = app.trimBodyPanel.currentActiveTabPanel();
                            var recCmp = currentTabPanel.recordsPanelRef ? currentTabPanel.recordsPanelRef.recordsDetailComponent : undefined;
                            if (!recCmp) {
                                recCmp = currentTabPanel.workflowPanelRef ? currentTabPanel.workflowPanelRef.recordsDetailComponent : undefined;
                            }
                            var uri = uriFromTemplate;
                            if (recordRenditions == null || recordRenditions.length == 0) {
                                recordsDetailComponent.downloadLink("");
                                recordsDetailComponent.viewRecord(uri, "", HP.HPTRIM.Messages.web_docInSharePointNotPreviewable, false, function () { recordsDetailComponent.refresh; recordsDetailComponent.canCheckOut(false); });
                                app.recordViewRenditionOverlay.isSharePoint = ko.observable(false);
                                app.renditionDocViewer.headerPanel.isSharePoint(false);
                                app.renditionDocViewer.headerPanel.showDownloadButton(false);
                                app.renditionDocViewer.headerPanel.downloadLink("");
                                app.renditionDocViewer.headerPanel.title(passedInRecNumber + " : " + passedInRecTitle);
                                return;
                            }
                            var recordRendition = recordRenditions[0];
                            var rendtionType = recordRendition.RecordRenditionTypeOfRendition.Value;
                            var rendtionUri = recordRendition.Uri;
                            app.renditionDocViewer.headerPanel.showDownloadButton(true);
                            app.renditionDocViewer.headerPanel.showRevisionsButton(true);
                            app.renditionDocViewer.headerPanel.isSharePoint(false);
                            app.renditionDocViewer.setUpShowRevisions(recordInfoObject, recCmp);
                            var recInfoObject = recordsDetailComponent.recordInfoObject;
                            var ext = "";
                            if (recordRendition) {
                                if (recordRendition.RecordRenditionExtension) {
                                    ext = recordRendition.RecordRenditionExtension.Value.toLowerCase();
                                }
                            }
                            var extension = "*." + ext;
                            var trimClient = app.trimClient;
                            app.recordViewRenditionOverlay.isSharePoint = ko.observable(false);
                            var virtualDir = HPRMWebConfig.virtualDirectory;
                            var path = virtualDir + "ServiceApi/Record/";
                            var renditionPath = path + uri + "/ChildHtml/RecordRendition/" + rendtionUri;
                            var downloadPath = path + uri + "/Children/RecordRendition/" + rendtionUri;
                            var deferred = new $.Deferred();
                            var promise = deferred.promise();
                            promise.done(function (result, realPath) {
                                var realHtml = result.replace(/=\"resource\//g, "=\"" + realPath + "resource/");
                                realHtml = realHtml.replace(/alt=''/g, "");
                                realHtml = realHtml.replace(/alt!=/g, "");
                                realHtml = realHtml.replace(/<img /g, "<img alt='" + HP.HPTRIM.Messages.web_noImage + "'");
                                recordsDetailComponent.recordViewHtml(realHtml);
                                recordsDetailComponent.downloadLink(downloadPath);
                                recordsDetailComponent.viewRendition(uri, recordsDetailComponent.downloadLink(), recordsDetailComponent.recordViewHtml(), recordsDetailComponent.canCheckOut(), function () { recordsDetailComponent.refresh; recordsDetailComponent.canCheckOut(false); }, passedInRecNumber, passedInRecTitle);
                                recordsDetailComponent.uri = uri;
                                app.renditionDocViewer.headerPanel.setContext(recordsDetailComponent);
                            }).fail(function (errorThrown, result, realPath) {
                                recordsDetailComponent.recordViewHtml("");
                                var showDefaultPane = false;
                                var jsonResult = jQuery.parseJSON(result);
                                if (jsonResult.ResponseStatus) {
                                    if (jsonResult.ResponseStatus.Message) {
                                        var message = jsonResult.ResponseStatus.Message;
                                        if ((message.indexOf(HP.HPTRIM.Messages.web_convert) != -1)
                                            && (message.indexOf(HP.HPTRIM.Messages.web_accessDenied) == -1)) {
                                            showDefaultPane = true;
                                        }
                                    }
                                }
                                if (showDefaultPane) {
                                    recordsDetailComponent.recordViewHtml("");
                                    recordsDetailComponent.downloadLink(downloadPath);
                                    recordsDetailComponent.viewRendition(uri, recordsDetailComponent.downloadLink(), recordsDetailComponent.recordViewHtml(), recordsDetailComponent.canCheckOut(), function () { recordsDetailComponent.refresh; recordsDetailComponent.canCheckOut(false); }, passedInRecNumber, passedInRecTitle);
                                    app.renditionDocViewer.headerPanel.downloadLink(recordsDetailComponent.downloadLink());
                                }
                                else {
                                    var actionResult = HP.HPTRIM.Messages.web_accessDenied;
                                    actionResult += ",";
                                    if (jsonResult.ResponseStatus) {
                                        if (jsonResult.ResponseStatus.Message) {
                                            var message = jsonResult.ResponseStatus.Message;
                                            if (message.indexOf(HP.HPTRIM.Messages.web_accessDenied) == -1) {
                                                message = HP.HPTRIM.Messages.web_accessDenied;
                                                message += ",";
                                                actionResult += HP.HPTRIM.Messages.web_reason;
                                                actionResult += message;
                                            }
                                        }
                                    }
                                    recordsDetailComponent.actionResult(actionResult);
                                    recordsDetailComponent.actionResultDisplay(true);
                                    recordsDetailComponent.downloadLink("");
                                }
                            });
                            var rendition = new HPTRIM.TrimRecordChildRenditionRequest(recordsDetailComponent.trimClient, uri, rendtionUri);
                            var request = rendition.doRequest(deferred);
                        };
                    };
                    return HandleShowRenditionViewClickHandler;
                }());
                ActionHandlers.HandleShowRenditionViewClickHandler = HandleShowRenditionViewClickHandler;
            })(ActionHandlers = App.ActionHandlers || (App.ActionHandlers = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var ActionHandlers;
            (function (ActionHandlers) {
                "use strict";
                var CheckOutHandler = (function () {
                    function CheckOutHandler() {
                    }
                    CheckOutHandler.getHandler = function (app, trimClient) {
                        return function (uri, successCallback) {
                            var checkOutRequest = new HPTRIM.CheckOutRequest(trimClient, uri, {});
                            checkOutRequest.doRequest().done(function (result, downloadLink) {
                                if (result && result.Results[0]) {
                                    window.open(downloadLink, '_parent');
                                    successCallback(result.Results[0]);
                                }
                                else {
                                    var displayError = ActionHandlers.DisplayError.getHandler(app);
                                    displayError(HP.HPTRIM.Messages.web_checkOutTitleNoSubstitute + ' ' + HP.HPTRIM.Messages.core_failed);
                                }
                            }).fail(function (err) {
                                var displayError = ActionHandlers.DisplayError.getHandler(app);
                                if (err.ResponseStatus.Message != "") {
                                    displayError(err.ResponseStatus.Message);
                                }
                                else {
                                    displayError(HP.HPTRIM.Messages.web_checkOutTitleNoSubstitute + ' ' + HP.HPTRIM.Messages.core_failed);
                                }
                            });
                        };
                    };
                    return CheckOutHandler;
                }());
                ActionHandlers.CheckOutHandler = CheckOutHandler;
                (function (CheckInSource) {
                    CheckInSource[CheckInSource["localFile"] = 0] = "localFile";
                    CheckInSource[CheckInSource["webdav"] = 1] = "webdav";
                    CheckInSource[CheckInSource["wopi"] = 2] = "wopi";
                })(ActionHandlers.CheckInSource || (ActionHandlers.CheckInSource = {}));
                var CheckInSource = ActionHandlers.CheckInSource;
                var CheckInOptions = (function () {
                    function CheckInOptions() {
                        this.showMakeNewRevision = true;
                        this.successCallback = null;
                        this.failCallback = null;
                    }
                    return CheckInOptions;
                }());
                ActionHandlers.CheckInOptions = CheckInOptions;
                var CheckInRecordDetails = (function () {
                    function CheckInRecordDetails() {
                    }
                    return CheckInRecordDetails;
                }());
                ActionHandlers.CheckInRecordDetails = CheckInRecordDetails;
                var CheckInHandler = (function () {
                    function CheckInHandler() {
                    }
                    CheckInHandler.getHandler = function (app) {
                        return function (recordDetails, options) {
                            app.checkInForm.resetPanel();
                            app.checkInForm.uri(recordDetails.uri);
                            app.checkInForm.recordNumber(recordDetails.recordNumber);
                            app.checkInForm.checkInSource(recordDetails.source);
                            if (recordDetails.source == CheckInSource.webdav) {
                                app.checkInForm.fileName(recordDetails.fileName);
                                app.checkInForm.fileSize(recordDetails.fileSize);
                                app.checkInForm.updatePreview();
                            }
                            app.checkInForm.checkedOutToURI(recordDetails.checkedOutToURI);
                            app.checkInForm.showMakeNewRevision(options.showMakeNewRevision);
                            app.checkInForm.successCallback = options.successCallback;
                            app.checkInForm.failCallback = options.failCallback;
                            app.showOverlay(app.checkInForm);
                        };
                    };
                    return CheckInHandler;
                }());
                ActionHandlers.CheckInHandler = CheckInHandler;
                var WebdavEditHandler = (function () {
                    function WebdavEditHandler() {
                    }
                    WebdavEditHandler.getHandler = function (trimClient) {
                        return function (uri, successCallback, failCallback) {
                            var editRequest = new HPTRIM.WebdavEditRequest(trimClient, uri);
                            editRequest.doRequest().done(function (result) {
                                successCallback(result.WebdavURL);
                            }).fail(function (result) {
                                failCallback(result);
                            });
                        };
                    };
                    return WebdavEditHandler;
                }());
                ActionHandlers.WebdavEditHandler = WebdavEditHandler;
                var WOPILinkHandler = (function () {
                    function WOPILinkHandler() {
                    }
                    WOPILinkHandler.getHandler = function (trimClient) {
                        return function (uri, action, successCallback, failCallback) {
                            var editRequest = new HPTRIM.WOPILinkRequest(trimClient, uri, action);
                            editRequest.doRequest().done(function (result) {
                                successCallback(result);
                            }).fail(function (result) {
                                failCallback(result);
                            });
                        };
                    };
                    return WOPILinkHandler;
                }());
                ActionHandlers.WOPILinkHandler = WOPILinkHandler;
                var ConvertRecordDetails = (function () {
                    function ConvertRecordDetails() {
                    }
                    return ConvertRecordDetails;
                }());
                ActionHandlers.ConvertRecordDetails = ConvertRecordDetails;
                var WOPIConfirmConversionHandler = (function () {
                    function WOPIConfirmConversionHandler() {
                    }
                    WOPIConfirmConversionHandler.getHandler = function (app) {
                        return function (convDetails) {
                            var confCallback = function () {
                                app.confirmForm.dismissHandler();
                                convDetails.convAction();
                            };
                            app.confirmForm.reset();
                            var message = HP.HPTRIM.Messages.web_wopiConversionWarning;
                            if (convDetails.revisionsAllowed) {
                                message += "  " + HP.HPTRIM.Messages.web_wopiConversionOldFormatRevision;
                            }
                            app.confirmForm.setUp(HP.HPTRIM.Messages.web_wopiConversionTitle, message, confCallback);
                            app.showOverlay(app.confirmForm);
                        };
                    };
                    return WOPIConfirmConversionHandler;
                }());
                ActionHandlers.WOPIConfirmConversionHandler = WOPIConfirmConversionHandler;
            })(ActionHandlers = App.ActionHandlers || (App.ActionHandlers = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var ActionHandlers;
            (function (ActionHandlers) {
                "use strict";
                var RecordCreatedHandler = (function () {
                    function RecordCreatedHandler() {
                    }
                    RecordCreatedHandler.getHandler = function (app) {
                        return function (uri) {
                            var actionToCall = ActionHandlers.ShowRecordHandler.getHandler(app);
                            actionToCall(App.Panels.RecordsPanel.CREATED_VIEW_ID, uri);
                        };
                    };
                    return RecordCreatedHandler;
                }());
                ActionHandlers.RecordCreatedHandler = RecordCreatedHandler;
            })(ActionHandlers = App.ActionHandlers || (App.ActionHandlers = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var ActionHandlers;
            (function (ActionHandlers) {
                "use strict";
                var DisplayError = (function () {
                    function DisplayError() {
                    }
                    DisplayError.getHandler = function (app) {
                        return function (errorMessage) {
                            var confirmCallback = function () {
                                app.hideOverlay();
                                var currentOverlay = app.trimDynamicOverlay().activePanel();
                                if (currentOverlay == app.completingOverlay) {
                                    app.hideOverlay();
                                }
                            };
                            app.errorOnOperationOverlay.setUp(HPTRIM.Messages.web_error, errorMessage, confirmCallback);
                            app.showOverlay(app.errorOnOperationOverlay);
                        };
                    };
                    DisplayError.getHandlerWithTitle = function (app) {
                        return function (title, errorMessage) {
                            var confirmCallback = function () {
                                app.hideOverlay();
                                var currentOverlay = app.trimDynamicOverlay().activePanel();
                                if (currentOverlay == app.completingOverlay) {
                                    app.hideOverlay();
                                }
                            };
                            app.errorOnOperationOverlay.setUp(title, errorMessage, confirmCallback);
                            app.showOverlay(app.errorOnOperationOverlay);
                        };
                    };
                    return DisplayError;
                }());
                ActionHandlers.DisplayError = DisplayError;
            })(ActionHandlers = App.ActionHandlers || (App.ActionHandlers = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var ActionHandlers;
            (function (ActionHandlers) {
                "use strict";
                var RecordsHistoryHandler = (function () {
                    function RecordsHistoryHandler() {
                    }
                    RecordsHistoryHandler.getHandler = function (app) {
                        return function (id, query, uri, page) {
                            app.historyCaption = HP.HPTRIM.App.Panels.Framework.NavPanel.RECORD_CAPTION;
                            var context = {};
                            context.id = id;
                            context.uri = uri;
                            context.page = page;
                            if (query) {
                                context.query = query;
                            }
                            var title = HP.HPTRIM.Messages.web_HPRM + " - " + HP.HPTRIM.Messages.web_records;
                            app.trimHistory.stateHandler(app, context, title);
                            var url = window.location.href;
                            app.trimBodyPanel.currentActiveTabPanel().recordsPanelRef.recordCommandPanel.url(url);
                        };
                    };
                    return RecordsHistoryHandler;
                }());
                ActionHandlers.RecordsHistoryHandler = RecordsHistoryHandler;
            })(ActionHandlers = App.ActionHandlers || (App.ActionHandlers = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var ActionHandlers;
            (function (ActionHandlers) {
                "use strict";
                var MainObjectHistoryHandler = (function () {
                    function MainObjectHistoryHandler() {
                    }
                    MainObjectHistoryHandler.getHandler = function (app) {
                        return function (objectName, trayId, query, uri, page, fullState) {
                            app.historyCaption = objectName;
                            var context = {};
                            context.fullState = fullState;
                            context.trayId = trayId;
                            context.query = query;
                            context.uri = uri;
                            context.page = page;
                            var title = HP.HPTRIM.Messages.web_HPRM + " - " + objectName;
                            app.trimHistory.stateHandler(app, context, title);
                        };
                    };
                    return MainObjectHistoryHandler;
                }());
                ActionHandlers.MainObjectHistoryHandler = MainObjectHistoryHandler;
            })(ActionHandlers = App.ActionHandlers || (App.ActionHandlers = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var ActionHandlers;
            (function (ActionHandlers) {
                "use strict";
                var ActivitiesHistoryHandler = (function () {
                    function ActivitiesHistoryHandler() {
                    }
                    ActivitiesHistoryHandler.getHandler = function (app) {
                        return function (id, query, uri, page, fullState) {
                            app.historyCaption = HP.HPTRIM.App.Panels.Framework.NavPanel.WORKFLOW_CAPTION;
                            var context = {};
                            context.fullState = fullState;
                            context.id = id;
                            context.uri = uri;
                            context.page = page;
                            context.query = query;
                            var title = HP.HPTRIM.Messages.web_HPRM + " - " + HP.HPTRIM.Messages.web_activities;
                            app.trimHistory.stateHandler(app, context, title);
                        };
                    };
                    return ActivitiesHistoryHandler;
                }());
                ActionHandlers.ActivitiesHistoryHandler = ActivitiesHistoryHandler;
            })(ActionHandlers = App.ActionHandlers || (App.ActionHandlers = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var ActionHandlers;
            (function (ActionHandlers) {
                "use strict";
                var ModifyActivityHandler = (function () {
                    function ModifyActivityHandler() {
                    }
                    ModifyActivityHandler.getHandler = function (app) {
                        return function (activityUri) {
                            app.trimBodyPanel.showModifyActivityPanel(activityUri);
                        };
                    };
                    return ModifyActivityHandler;
                }());
                ActionHandlers.ModifyActivityHandler = ModifyActivityHandler;
            })(ActionHandlers = App.ActionHandlers || (App.ActionHandlers = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var ActionHandlers;
            (function (ActionHandlers) {
                "use strict";
                var InitiateWorkflowFromTemplateWizardHandler = (function () {
                    function InitiateWorkflowFromTemplateWizardHandler() {
                    }
                    InitiateWorkflowFromTemplateWizardHandler.getHandler = function (app) {
                        return function (initiatingRecordInfoObject) {
                            var displayError = ActionHandlers.DisplayError.getHandler(app);
                            var workflowFromTemplateWizardPanel = app.trimBodyPanel.showNewWorkflowFromTemplateWizard(displayError);
                            workflowFromTemplateWizardPanel.workflowDataEntryPanel.completeSaving = function (uri) {
                                ActionHandlers.SearchHandler.getHandler(app)("uri:" + uri, uri, HPTRIM.BaseObjectTypes.Workflow);
                            };
                            var workflowDataEntryPanel = workflowFromTemplateWizardPanel.workflowDataEntryPanel;
                            workflowDataEntryPanel.clearFormContents();
                            workflowDataEntryPanel.showForm(false);
                            if (initiatingRecordInfoObject) {
                                workflowDataEntryPanel.setInitiatingRecord(initiatingRecordInfoObject);
                            }
                            var wrkTmplField = workflowFromTemplateWizardPanel.selectWorkflowPanel.wrkTmplField;
                            wrkTmplField.setRawValue("all");
                            wrkTmplField.doSearch();
                            wrkTmplField.isEditing(true);
                            workflowFromTemplateWizardPanel.visible(true);
                            var title = HP.HPTRIM.Messages.web_HPRM + " - " + HP.HPTRIM.Messages.vwr_tbar_view + " " + HP.HPTRIM.Messages.web_records;
                        };
                    };
                    return InitiateWorkflowFromTemplateWizardHandler;
                }());
                ActionHandlers.InitiateWorkflowFromTemplateWizardHandler = InitiateWorkflowFromTemplateWizardHandler;
            })(ActionHandlers = App.ActionHandlers || (App.ActionHandlers = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var ActionHandlers;
            (function (ActionHandlers) {
                "use strict";
                var CompleteActivityHandler = (function () {
                    function CompleteActivityHandler() {
                    }
                    CompleteActivityHandler.getHandler = function (app) {
                        var displayError = ActionHandlers.DisplayError.getHandler(app);
                        return function () {
                            app.historyCaption = HP.HPTRIM.App.Panels.Framework.NavPanel.WORKFLOW_CAPTION;
                            var wrkPanel = app.trimBodyPanel.currentActiveTabPanel().workflowPanelRef;
                            if (!wrkPanel) {
                                return;
                            }
                            var actDetailCmp = wrkPanel.activityDetailComponent;
                            var activityUri = parseInt(wrkPanel.activityDetailComponent.uri);
                            var data = {
                                'ServiceActions': "CompleteActivity", 'properties': 'RequestStatus,Workflow'
                            };
                            var childResultsReached = actDetailCmp.activityResultsComponent.getReachedResults();
                            var numResultsChecked = actDetailCmp.activityResultsComponent.getHowmanyReachedResults();
                            var numRollbackChecked = actDetailCmp.activityResultsComponent.getHowmanyRollbackChecked();
                            if (numRollbackChecked.length > 1) {
                                displayError(HP.HPTRIM.Messages.wrk_cannotSelectMoreThanOneRollbackResult);
                            }
                            else if (numResultsChecked.length > 1 && childResultsReached[0].RollbackToId > 0) {
                                displayError(HP.HPTRIM.Messages.wrk_cannotSelectRollbackAndNoRollback);
                            }
                            else if (childResultsReached.length == 1 && childResultsReached[0].RollbackToId > 0) {
                                var rollbackActivityRequest = new HPTRIM.ActivtiyRollbackRequest(app.trimClient, activityUri.toString(), childResultsReached[0].RollbackToId, "");
                                rollbackActivityRequest.doRequest().done(function (response) {
                                    response.Results[0]['ActivityIsComplete'] = { 'Value': false };
                                    actDetailCmp.useCachedResult(response.Results[0]);
                                    var trimObject = new HPTRIM.TrimBaseObject(HPTRIM.BaseObjectTypes.Activity, activityUri.toString());
                                    wrkPanel.updatePropertiesViewPanel(trimObject);
                                    wrkPanel.updateActivityList(response.Results[0]);
                                }).fail(function (errorResponse) {
                                    var errorMessage = errorResponse.ResponseStatus.Message;
                                    displayError(errorMessage);
                                });
                                return;
                            }
                            else {
                                var completeRequest = new HPTRIM.TrimObjectSave(app.trimClient, HPTRIM.BaseObjectTypes.Activity, activityUri);
                                var resultData = {
                                    "ChildResults": childResultsReached,
                                    "Uri": activityUri
                                };
                                var setActivityResultRequest = new HPTRIM.TrimObjectSave(app.trimClient, HPTRIM.BaseObjectTypes.Activity, activityUri);
                                setActivityResultRequest.doRequestEx(resultData)
                                    .done(function (response) {
                                    completeRequest.doRequestEx(data).done(function (response) {
                                        if (response.Results.length == 0) {
                                            if (response.ResponseStatus && response.ResponseStatus.Message) {
                                                displayError(response.ResponseStatus.Message);
                                            }
                                            else {
                                                displayError(HP.HPTRIM.Messages.web_unableToUpdate + HPTRIM.BaseObjectTypes.Activity.Caption);
                                            }
                                            return;
                                        }
                                        var finish = function () {
                                            if (wrkPanel.activityDetailComponent.activityInfoObject.ActivityWorkflow.Uri) {
                                                var queryString = wrkPanel.activityItemListPanel['searchQueryObject'].searchString;
                                                wrkPanel.updateView(wrkPanel.activityItemListPanel, queryString);
                                                wrkPanel.selectedUri("");
                                                wrkPanel.selectedUri(response.Results[0].Uri);
                                            }
                                        };
                                        if (response.Results[0].ActivityWorkflow) {
                                            var unassignedActivitySearch = new HPTRIM.TrimMainObjectSearch(app.trimClient, HPTRIM.BaseObjectTypes.Activity);
                                            var workflowUri = response.Results[0].ActivityWorkflow.Uri;
                                            var query = "canStart  And  workflow:" + workflowUri + " And  assignee:null";
                                            unassignedActivitySearch.setSearchString(query);
                                            unassignedActivitySearch.setPropertiesByString(App.Panels.ActivityDetails.ActivityDetailComponent.PROPERTY_LIST);
                                            unassignedActivitySearch.page().done(function (unassignedResults) {
                                                if (unassignedResults.Results[0]) {
                                                    app.reassignActivityForm.resetPanel();
                                                    app.reassignActivityForm.activityUri(unassignedResults.Results[0].Uri);
                                                    var listActivityNames = [];
                                                    var arrActvityuri = [];
                                                    for (var i = 0; i < unassignedResults.Results.length; i++) {
                                                        listActivityNames.push(unassignedResults.Results[i].ActivityName.Value);
                                                        arrActvityuri.push(unassignedResults.Results[i].Uri);
                                                    }
                                                    var listAlertText = listActivityNames.join(', ');
                                                    var alertText = HPTRIM.Utils.String.format(HPTRIM.Messages.web_assignNextActivity, [listAlertText]);
                                                    app.reassignActivityForm.alertDetails(alertText);
                                                    app.reassignActivityForm.numResultsTicked(unassignedResults.Results.length);
                                                    app.reassignActivityForm.createLocationPickers(unassignedResults.Results);
                                                    app.reassignActivityForm.createActivityUri(arrActvityuri);
                                                    app.reassignActivityForm.errorVisible(true);
                                                    app.reassignActivityForm.cancelButtonText(HP.HPTRIM.Messages.web_close);
                                                    app.reassignActivityForm.successCallback = function () {
                                                        finish();
                                                    };
                                                    app.reassignActivityForm.cancelHandler = function () {
                                                        finish();
                                                    };
                                                    app.showOverlay(app.reassignActivityForm);
                                                }
                                                else {
                                                    finish();
                                                }
                                            });
                                        }
                                    }).fail(function (response) {
                                        var errorMessage = response.ResponseStatus.Message;
                                        displayError(errorMessage);
                                    });
                                }).fail(function (response) {
                                    var errorMessage = response.ResponseStatus.Message;
                                    displayError(errorMessage);
                                });
                                return;
                            }
                        };
                    };
                    return CompleteActivityHandler;
                }());
                ActionHandlers.CompleteActivityHandler = CompleteActivityHandler;
            })(ActionHandlers = App.ActionHandlers || (App.ActionHandlers = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var ActionHandlers;
            (function (ActionHandlers) {
                "use strict";
                var UncompleteActivityHandler = (function () {
                    function UncompleteActivityHandler() {
                    }
                    UncompleteActivityHandler.getHandler = function (app) {
                        return function () {
                            var wrkPanel = app.trimBodyPanel.currentActiveTabPanel().workflowPanelRef;
                            var actDetailCmp = wrkPanel.activityDetailComponent;
                            var activityUri = wrkPanel.activityDetailComponent.uri;
                            var doRequest = function (reason) {
                                app.uncompleteActivityForm.finishHandler();
                                var uncompleteRequest = new HPTRIM.ActivtiyUncompleteRequest(app.trimClient, activityUri, reason);
                                uncompleteRequest.doRequest().done(function (response) {
                                    response.Results[0]['ActivityIsComplete'] = { 'Value': false };
                                    actDetailCmp.useCachedResult(response.Results[0]);
                                    var trimObject = new HPTRIM.TrimBaseObject(HPTRIM.BaseObjectTypes.Activity, activityUri);
                                    wrkPanel.updatePropertiesViewPanel(trimObject);
                                    var queryString = wrkPanel.activityItemListPanel['searchQueryObject'].searchString;
                                    wrkPanel.updateView(wrkPanel.activityItemListPanel, queryString);
                                    wrkPanel.selectedUri("");
                                    wrkPanel.selectedUri(activityUri);
                                }).fail(function (errorResponse) {
                                    var errorMessage = errorResponse.ResponseStatus.Message;
                                    var displayError = ActionHandlers.DisplayError.getHandler(app);
                                    displayError(errorMessage);
                                });
                                return;
                            };
                            app.uncompleteActivityForm.resetPanel();
                            app.uncompleteActivityForm.uncompleteHandler = doRequest;
                            app.showOverlay(app.uncompleteActivityForm);
                        };
                    };
                    return UncompleteActivityHandler;
                }());
                ActionHandlers.UncompleteActivityHandler = UncompleteActivityHandler;
            })(ActionHandlers = App.ActionHandlers || (App.ActionHandlers = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var ActionHandlers;
            (function (ActionHandlers) {
                "use strict";
                var AdditionalRequestHandler = (function () {
                    function AdditionalRequestHandler() {
                    }
                    AdditionalRequestHandler.getHandler = function (app) {
                        return function (uri, successCallback, failCallback) {
                            app.createAdditionRequestForm.requestHandler = function (locationUri) {
                                var data = {};
                                data.RequestRequestor = locationUri;
                                data.RequestRecord = uri;
                                var recRequestRequest = new HPTRIM.RecRequestRequest(app.trimClient, data);
                                recRequestRequest.doRequest().done(function (result) {
                                    app.hideOverlay();
                                    successCallback(result);
                                }).fail(function (result) {
                                    app.hideOverlay();
                                    failCallback(result);
                                });
                            };
                            app.createAdditionRequestForm.cancelHandler = function () {
                                app.hideOverlay();
                            };
                            app.createAdditionRequestForm.resetPanel();
                            app.showOverlay(app.createAdditionRequestForm);
                        };
                    };
                    return AdditionalRequestHandler;
                }());
                ActionHandlers.AdditionalRequestHandler = AdditionalRequestHandler;
            })(ActionHandlers = App.ActionHandlers || (App.ActionHandlers = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var ActionHandlers;
            (function (ActionHandlers) {
                "use strict";
                var DeleteChildObjectHandler = (function () {
                    function DeleteChildObjectHandler() {
                    }
                    DeleteChildObjectHandler.getHandler = function (app) {
                        return function (propertyCaption, name, uri, propertyName, parentUri, parentType, returnCallback) {
                            var title = HP.HPTRIM.Messages.web_confirmDeleteHeading;
                            var message = HP.HPTRIM.Messages.web_confirmDelete;
                            message = message.replace('{0}', propertyCaption);
                            message = message.replace('{1}', name);
                            var confirmHandler = function () {
                                app.confirmForm.buttonsActive(false);
                                var saveRequest = new HPTRIM.TrimObjectSave(app.trimClient, parentType);
                                var data = {};
                                data.Uri = parentUri;
                                data[propertyName] = {
                                    'Uri': uri,
                                    'Delete': true,
                                };
                                saveRequest.doRequestEx(data).done(function () {
                                    app.confirmForm.dismissHandler();
                                    if (returnCallback) {
                                        returnCallback();
                                    }
                                }).fail(function (error) {
                                    app.confirmForm.dismissHandler();
                                    var errorMessage = error.ResponseStatus.Message;
                                    var displayError = ActionHandlers.DisplayError.getHandler(app);
                                    displayError(errorMessage);
                                });
                            };
                            app.confirmForm.setUp(title, message, confirmHandler);
                            app.showOverlay(app.confirmForm);
                        };
                    };
                    return DeleteChildObjectHandler;
                }());
                ActionHandlers.DeleteChildObjectHandler = DeleteChildObjectHandler;
                var DeleteChildrenObjectHandler = (function () {
                    function DeleteChildrenObjectHandler() {
                    }
                    DeleteChildrenObjectHandler.getHandler = function (app) {
                        return function (uriArray, propertyName, parentUri, parentType, returnCallback) {
                            var saveRequest = new HPTRIM.TrimObjectSave(app.trimClient, parentType);
                            var data = {};
                            data.Uri = parentUri;
                            var childrenToDelete = _.map(uriArray, function (childObjectUri) {
                                return { 'Uri': childObjectUri, 'Delete': true };
                            });
                            data[propertyName] = childrenToDelete;
                            saveRequest.doRequestEx(data).done(function () {
                                if (app.trimDynamicOverlay().activePanel() == app.confirmForm) {
                                    app.confirmForm.dismissHandler();
                                }
                                if (returnCallback) {
                                    returnCallback();
                                }
                            }).fail(function (error) {
                                if (app.trimDynamicOverlay().activePanel() == app.confirmForm) {
                                    app.confirmForm.dismissHandler();
                                }
                                var errorMessage = error.ResponseStatus.Message;
                                var displayError = ActionHandlers.DisplayError.getHandler(app);
                                displayError(errorMessage);
                            });
                        };
                    };
                    ;
                    return DeleteChildrenObjectHandler;
                }());
                ActionHandlers.DeleteChildrenObjectHandler = DeleteChildrenObjectHandler;
            })(ActionHandlers = App.ActionHandlers || (App.ActionHandlers = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var ActionHandlers;
            (function (ActionHandlers) {
                "use strict";
                var CreateChildHandler = (function () {
                    function CreateChildHandler() {
                    }
                    CreateChildHandler.getHandler = function (app, childForm, callback, failCallback) {
                        return function () {
                            childForm.saveHandler = function (data, type) {
                                var saveRequest = new HPTRIM.TrimObjectSave(app.trimClient, type);
                                saveRequest.doRequestEx(data).done(function (result) {
                                    app.hideOverlay();
                                    if (callback) {
                                        callback(result);
                                    }
                                }).fail(function (result) {
                                    app.hideOverlay();
                                    if (failCallback) {
                                        failCallback(result);
                                    }
                                });
                            };
                            childForm.cancelHandler = function () {
                                app.hideOverlay();
                            };
                            childForm.preparePanel(HP.HPTRIM.Messages.web_addTodoItemReference, "");
                            app.showOverlay(childForm);
                        };
                    };
                    return CreateChildHandler;
                }());
                ActionHandlers.CreateChildHandler = CreateChildHandler;
            })(ActionHandlers = App.ActionHandlers || (App.ActionHandlers = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var ActionHandlers;
            (function (ActionHandlers) {
                "use strict";
                var CreateMainObjectHandler = (function () {
                    function CreateMainObjectHandler() {
                    }
                    CreateMainObjectHandler.getHandler = function (app, callback) {
                        return function (objectDef, defaultFieldValues) {
                            var displayCreatePanel = function (createPanel) {
                                createPanel.resetPanels(true);
                                createPanel.errorAction = ActionHandlers.DisplayError.getHandler(app);
                                app.trimBodyPanel.showNewMainObjectDataEntryPanel(createPanel, objectDef, defaultFieldValues, callback);
                            };
                            var createMainObjectPanel;
                            if (objectDef.RequiredObjectOnCreate) {
                                createMainObjectPanel = new App.Panels.MainObject.CreateOrModifyMainObjectPanel(app.trimClient, objectDef, true);
                                displayCreatePanel(createMainObjectPanel);
                                return;
                            }
                            if (objectDef.CanAnybodyCreate && objectDef.DataEntryFormDefinition) {
                                createMainObjectPanel = new App.Panels.MainObject.CreateOrModifyMainObjectPanel(app.trimClient, objectDef, true);
                                displayCreatePanel(createMainObjectPanel);
                            }
                            else {
                                var cancelled = false;
                                app.completingOverlay.message(HPTRIM.Messages.web_loading);
                                app.completingOverlay.showingMessage(true);
                                app.completingOverlay.cancelHandler = function () {
                                    cancelled = true;
                                    app.hideOverlay();
                                };
                                app.showOverlay(app.completingOverlay);
                                app.trimClient.getAndProcessObjectDefinition(objectDef.Id, true, function (result) {
                                    if (cancelled) {
                                        return;
                                    }
                                    app.hideOverlay();
                                    if (result.ObjectDefs && result.ObjectDefs[0] && result.ObjectDefs[0].DataEntryFormDefinition && (result.ObjectDefs[0].DataEntryFormDefinition.length > 0)) {
                                        var rawFormDefs = result.ObjectDefs[0].DataEntryFormDefinition;
                                        var rawLatestForm = rawFormDefs[rawFormDefs.length - 1];
                                        objectDef.DataEntryFormDefinition = rawLatestForm;
                                        var createMainObjectPanel = new App.Panels.MainObject.CreateOrModifyMainObjectPanel(app.trimClient, objectDef, true);
                                        displayCreatePanel(createMainObjectPanel);
                                    }
                                });
                            }
                        };
                    };
                    return CreateMainObjectHandler;
                }());
                ActionHandlers.CreateMainObjectHandler = CreateMainObjectHandler;
            })(ActionHandlers = App.ActionHandlers || (App.ActionHandlers = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var ActionHandlers;
            (function (ActionHandlers) {
                "use strict";
                var DeleteMainObjectHandler = (function () {
                    function DeleteMainObjectHandler() {
                    }
                    DeleteMainObjectHandler.getHandler = function (app) {
                        return function (uri, type, objectTypeCaption, objectName, returnCallback) {
                            var title = HP.HPTRIM.Messages.web_confirmDeleteHeading;
                            var message = HP.HPTRIM.Messages.web_confirmDelete;
                            message = message.replace('{0}', objectTypeCaption);
                            message = message.replace('{1}', objectName);
                            var confirmHandler = function () {
                                app.confirmForm.buttonsActive(false);
                                var deleteRequest = new HPTRIM.DeleteRequest(app.trimClient, new HPTRIM.TrimBaseObject(type, uri));
                                deleteRequest.doRequest().done(function () {
                                    app.confirmForm.dismissHandler();
                                    if (returnCallback) {
                                        returnCallback();
                                    }
                                }).fail(function (error) {
                                    app.confirmForm.dismissHandler();
                                    var errorMessage = error.ResponseStatus.Message;
                                    var displayError = ActionHandlers.DisplayError.getHandler(app);
                                    displayError(errorMessage);
                                });
                            };
                            app.confirmForm.setUp(title, message, confirmHandler);
                            app.showOverlay(app.confirmForm);
                        };
                    };
                    return DeleteMainObjectHandler;
                }());
                ActionHandlers.DeleteMainObjectHandler = DeleteMainObjectHandler;
            })(ActionHandlers = App.ActionHandlers || (App.ActionHandlers = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var ActionHandlers;
            (function (ActionHandlers) {
                "use strict";
                var CreateTaskHandler = (function () {
                    function CreateTaskHandler() {
                    }
                    CreateTaskHandler.getHandler = function (app) {
                        return function (createTask, infoObject, objectType, targetType, callback) {
                            var createHandler = HP.HPTRIM.App.ActionHandlers.CreateMainObjectHandler.getHandler(app, callback);
                            var targetTypeDef = app.mainObjectDefinitions.getMainObjectDef(targetType);
                            if (targetTypeDef) {
                                var defaults = [];
                                _.each(createTask.defaultParameters, function (parm) {
                                    if (parm.type == "object") {
                                        var uri = infoObject.Uri;
                                        var displayValue = infoObject[parm.displayProperty];
                                        if (displayValue && displayValue.Value) {
                                            displayValue == displayValue.Value;
                                        }
                                        var displayValueExtra = parm.displayValueExtra ? infoObject[parm.displayValueExtra] : undefined;
                                        var icon = parm.iconProperty ? infoObject[parm.iconProperty] : undefined;
                                        var iconId = icon ? icon.Id : undefined;
                                        var valueAsObject = new HPTRIM.TrimBaseObject(objectType, uri, displayValue, displayValueExtra, iconId);
                                        var defaultFieldValue = {
                                            FieldName: parm.name,
                                            FieldValue: valueAsObject
                                        };
                                        defaults.push(defaultFieldValue);
                                    }
                                });
                                createHandler(targetTypeDef, defaults);
                            }
                            else {
                                throw "Unsupported type - name: " + targetType;
                            }
                        };
                    };
                    return CreateTaskHandler;
                }());
                ActionHandlers.CreateTaskHandler = CreateTaskHandler;
            })(ActionHandlers = App.ActionHandlers || (App.ActionHandlers = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var ActionHandlers;
            (function (ActionHandlers) {
                "use strict";
                var UpdateHandler = (function () {
                    function UpdateHandler() {
                    }
                    UpdateHandler.getHandler = function (app) {
                        var _this = this;
                        var performUpdateProperty = PerformUpdatePropertyHandler.getHandler(app);
                        var showUpdatePropertyDialog = ShowUpdatePropertyDialogHandler.getHandler(app);
                        var showCustomUpdateTaskDialog = ShowCustomUpdateTaskDialogHandler.getHandler(app);
                        var showUpdateTaskDialog = ShowUpdateTaskDialogHandler.getHandler(app);
                        var perfromUpdateTask = PerformUpdateTaskHandler.getHandler(app);
                        return function (updateTask, suppliedInfoObject, suppliedObjectType, handleUpdateResults, warningCallback, errorCallback, objectDef) {
                            var updateTaskToExecute = updateTask;
                            var infoObject = suppliedInfoObject;
                            var objectType = suppliedObjectType;
                            if (updateTask.createNewObject) {
                                updateTaskToExecute = UpdateHandler.makeCreateUpdateTask(updateTask, suppliedInfoObject);
                                objectType = updateTask.objectType;
                                infoObject = { Uri: 0 };
                                _.forEach(updateTask.newObjectProperties, function (newObjectProperty) {
                                    if (newObjectProperty.useCreatingObjectUri) {
                                        infoObject[newObjectProperty.propertyId] = suppliedInfoObject.Uri;
                                    }
                                    if (newObjectProperty.value || newObjectProperty.value === false || newObjectProperty.value === "") {
                                        infoObject[newObjectProperty.propertyId] = newObjectProperty.value;
                                    }
                                });
                            }
                            var requiredCommandIds = updateTaskToExecute.requiredCommandIds.join(',');
                            var me = _this;
                            var data = {};
                            if (updateTaskToExecute.requireCustomForm) {
                                showCustomUpdateTaskDialog(infoObject.Uri, infoObject, objectType, updateTaskToExecute, requiredCommandIds, [], handleUpdateResults, warningCallback, errorCallback);
                            }
                            else if (updateTaskToExecute.propertiesToUpdate && updateTaskToExecute.propertiesToUpdate.length != 0) {
                                _.each(updateTaskToExecute.propertiesToUpdate, function (propToUpdate) {
                                    if (typeof propToUpdate.value != "undefined") {
                                        data[propToUpdate.propertyId] = propToUpdate.value;
                                    }
                                    else if (propToUpdate.clearValue == true) {
                                        data[propToUpdate.propertyId] = "";
                                    }
                                    else {
                                        var propertyDef = app.trimClient.getMainObjectPropertyDefFromCache(objectType, propToUpdate.propertyId);
                                        var valueToSet;
                                        if (propertyDef.PFFormat == "Datetime") {
                                            var date = new Date();
                                            valueToSet = date.toISOString();
                                        }
                                        else if (propertyDef.PFFormat == "Boolean") {
                                            valueToSet = true;
                                        }
                                        data[propToUpdate.propertyId] = valueToSet;
                                    }
                                });
                                var requireInput = _.find(updateTaskToExecute.propertiesToUpdate, function (propToUpdate) {
                                    return propToUpdate.requiresInput;
                                }) ? true : false;
                                if (requireInput) {
                                    showUpdatePropertyDialog(infoObject.Uri, infoObject, objectType, updateTaskToExecute, requiredCommandIds, data, handleUpdateResults, warningCallback, errorCallback);
                                }
                                else {
                                    performUpdateProperty(infoObject.Uri, infoObject, objectType, updateTaskToExecute, requiredCommandIds, data, handleUpdateResults, warningCallback, errorCallback);
                                }
                            }
                            else if (updateTaskToExecute.serviceActionParameters.length > 0) {
                                showUpdateTaskDialog(infoObject.Uri, infoObject, objectType, updateTaskToExecute, requiredCommandIds, [], handleUpdateResults, warningCallback, errorCallback);
                            }
                            else {
                                perfromUpdateTask(infoObject.Uri, infoObject, objectType, updateTaskToExecute, requiredCommandIds, [], handleUpdateResults, warningCallback, errorCallback);
                            }
                        };
                    };
                    UpdateHandler.makeCreateUpdateTask = function (updateTask, existingInfoObject) {
                        var createUpdateTask = {
                            id: "",
                            caption: updateTask.caption,
                            toolTip: "",
                            successMessage: "",
                            isGroup: false,
                            preConditions: [],
                            supportsTagged: false,
                            supportsSingle: false,
                            returnedType: updateTask.returnedType,
                            objectUpdated: true,
                            objectDeleted: false,
                            propertiesToUpdate: [],
                            objectType: updateTask.objectType,
                            serviceAction: "",
                            serviceActionParameters: [],
                            serviceActionValueParameters: [],
                            requiredProperties: [],
                            updatedProperties: [],
                            requiredCommandIds: [],
                            checkForWarnings: true,
                        };
                        createUpdateTask.propertiesToUpdate = _.map(updateTask.newObjectProperties, function (newObjectProperty) {
                            var objectProperty = {
                                propertyId: newObjectProperty.propertyId,
                                value: newObjectProperty.value,
                                clearValue: newObjectProperty.clearValue,
                                requiresInput: newObjectProperty.requiresInput,
                                allowClearValue: newObjectProperty.allowClearValue,
                                inputDefaultClear: newObjectProperty.inputDefaultClear,
                                isMandatory: newObjectProperty.isMandatory,
                                purpose: newObjectProperty.purpose,
                                objectFilter: newObjectProperty.objectFilter,
                                objectFilterParameters: newObjectProperty.objectFilterParameters,
                                allowNewLocation: newObjectProperty.allowNewLocation,
                            };
                            if (newObjectProperty.useCreatingObjectUri) {
                                objectProperty.value = existingInfoObject.Uri;
                            }
                            return objectProperty;
                        });
                        return createUpdateTask;
                    };
                    return UpdateHandler;
                }());
                ActionHandlers.UpdateHandler = UpdateHandler;
                var PerformUpdatePropertyHandler = (function () {
                    function PerformUpdatePropertyHandler() {
                    }
                    PerformUpdatePropertyHandler.getHandler = function (app) {
                        return function (uri, infoObject, objectType, task, requiredCommandIds, data, successCallback, warningCallback, failCallback) {
                            var execute = function () {
                                var failOnWarnings = task.checkForWarnings;
                                app.completingOverlay.title(task.caption);
                                app.completingOverlay.message(HPTRIM.Messages.web_ProcessingOperation);
                                app.completingOverlay.showingMessage(true);
                                app.completingOverlay.allowCancel(false);
                                app.showOverlay(app.completingOverlay);
                                var onSuccess = function (rawResult) {
                                    app.dismissStandardOverlays();
                                    var result = rawResult.Results[0];
                                    _.each(task.updatedProperties, function (updatedProperty) {
                                        if (result[updatedProperty] === undefined) {
                                            result[updatedProperty] = {};
                                        }
                                    });
                                    if (successCallback) {
                                        successCallback(result, task);
                                    }
                                };
                                var taskRequest = new HPTRIM.MainObjectUpdateTaskRequest(app.trimClient, objectType, task, uri, requiredCommandIds, failOnWarnings, [], infoObject);
                                taskRequest.addData(data);
                                taskRequest.doRequest().done(function (rawResult) {
                                    if (!rawResult.Results || rawResult.Results.length == 0) {
                                        var rawStatusObject = rawResult.ResponseStatus;
                                        var rawErrorArray = rawStatusObject ? rawStatusObject.Errors : [];
                                        var error = _.reduce(rawErrorArray, function (memo, rawError) {
                                            return (rawError.Meta.Bad === "True" || memo);
                                        }, false);
                                        if (rawStatusObject.Errors && rawStatusObject.Errors.length > 0 && !error) {
                                            var resubmit = function () {
                                                var failOnWarningsForRetry = false;
                                                var secondTaskRequest = new HPTRIM.MainObjectUpdateTaskRequest(app.trimClient, objectType, task, uri, requiredCommandIds, failOnWarningsForRetry, [], infoObject);
                                                secondTaskRequest.addData(data);
                                                secondTaskRequest.doRequest().done(function (rawResult) {
                                                    if (!rawResult.Results || rawResult.Results.length == 0) {
                                                        failCallback(task.caption, rawResult);
                                                    }
                                                    else {
                                                        onSuccess(rawResult);
                                                    }
                                                }).fail(function (err) {
                                                    failCallback(task.caption, rawResult);
                                                });
                                            };
                                            var errorMessages = _.map(rawResult.ResponseStatus.Errors, function (rawError) {
                                                return rawError.Message;
                                            });
                                            warningCallback(task.caption, errorMessages, resubmit);
                                        }
                                        else {
                                            failCallback(task.caption, rawResult);
                                        }
                                    }
                                    else {
                                        onSuccess(rawResult);
                                    }
                                }).fail(function (rawError) {
                                    failCallback(task.caption, rawError);
                                });
                            };
                            if (task.showConfirmation && task.confirmationString) {
                                var confirmCallback = function () {
                                    app.hideOverlay();
                                    execute();
                                };
                                app.confirmForm.setUp(task.confirmationTitle, task.confirmationString, confirmCallback);
                                app.showOverlay(app.confirmForm);
                            }
                            else {
                                execute();
                            }
                        };
                    };
                    return PerformUpdatePropertyHandler;
                }());
                ActionHandlers.PerformUpdatePropertyHandler = PerformUpdatePropertyHandler;
                var ShowUpdatePropertyDialogHandler = (function () {
                    function ShowUpdatePropertyDialogHandler() {
                    }
                    ShowUpdatePropertyDialogHandler.getHandler = function (app) {
                        return function (uri, infoObject, objectType, task, requiredCommandIds, data, successCallback, warningCallback, failCallback) {
                            app.mainObjectUpdateTaskPanel.resetPanel();
                            app.mainObjectUpdateTaskPanel.renderForm(task, infoObject, objectType);
                            var executeTask = function (parameterList) {
                                var execute = function () {
                                    if (!data) {
                                        data = {};
                                    }
                                    var failOnWarnings = task.checkForWarnings;
                                    _.each(parameterList, function (parameter) {
                                        var name = parameter.name;
                                        var value = parameter.value;
                                        if (value && value.Uri) {
                                            value = parameter.value.Uri;
                                        }
                                        data[name] = value;
                                    });
                                    app.completingOverlay.title(task.caption);
                                    app.completingOverlay.message(HPTRIM.Messages.web_ProcessingOperation);
                                    app.completingOverlay.showingMessage(true);
                                    app.completingOverlay.allowCancel(false);
                                    app.showOverlay(app.completingOverlay);
                                    var onSuccess = function (rawResult) {
                                        app.dismissStandardOverlays();
                                        var result = rawResult.Results[0];
                                        _.each(task.updatedProperties, function (updatedProperty) {
                                            if (result[updatedProperty] === undefined) {
                                                result[updatedProperty] = {};
                                            }
                                        });
                                        if (successCallback) {
                                            successCallback(result, task);
                                        }
                                    };
                                    var taskRequest = new HPTRIM.MainObjectUpdateTaskRequest(app.trimClient, objectType, task, uri, requiredCommandIds, failOnWarnings, [], infoObject);
                                    taskRequest.addData(data);
                                    taskRequest.doRequest().done(function (rawResult) {
                                        if (!rawResult.Results || rawResult.Results.length == 0) {
                                            var rawStatusObject = rawResult.ResponseStatus;
                                            var rawErrorArray = rawStatusObject ? rawStatusObject.Errors : [];
                                            var error = _.reduce(rawErrorArray, function (memo, rawError) {
                                                return (rawError.Meta.Bad === "True" || memo);
                                            }, false);
                                            if (rawStatusObject.Errors && rawStatusObject.Errors.length > 0 && !error) {
                                                var resubmit = function () {
                                                    var failOnWarningsForRetry = false;
                                                    var secondTaskRequest = new HPTRIM.MainObjectUpdateTaskRequest(app.trimClient, objectType, task, uri, requiredCommandIds, failOnWarningsForRetry, [], infoObject);
                                                    secondTaskRequest.addData(data);
                                                    secondTaskRequest.doRequest().done(function (rawResult) {
                                                        if (!rawResult.Results || rawResult.Results.length == 0) {
                                                            failCallback(task.caption, rawResult);
                                                        }
                                                        else {
                                                            onSuccess(rawResult);
                                                        }
                                                    }).fail(function (rawError) {
                                                        failCallback(task.caption, rawError);
                                                    });
                                                };
                                                var errorMessages = _.map(rawResult.ResponseStatus.Errors, function (rawError) {
                                                    return rawError.Message;
                                                });
                                                warningCallback(task.caption, errorMessages, resubmit);
                                            }
                                            else {
                                                failCallback(task.caption, rawResult);
                                            }
                                        }
                                        else {
                                            onSuccess(rawResult);
                                        }
                                    }).fail(function (rawError) {
                                        failCallback(task.caption, rawError);
                                    });
                                };
                                if (task.showConfirmation && task.confirmationString) {
                                    var confirmCallback = function () {
                                        app.hideOverlay();
                                        execute();
                                    };
                                    app.confirmForm.setUp(task.confirmationTitle, task.confirmationString, confirmCallback);
                                    app.showOverlay(app.confirmForm);
                                }
                                else {
                                    execute();
                                }
                            };
                            app.mainObjectUpdateTaskPanel.saveHandler = executeTask;
                            app.showOverlay(app.mainObjectUpdateTaskPanel);
                        };
                    };
                    return ShowUpdatePropertyDialogHandler;
                }());
                ActionHandlers.ShowUpdatePropertyDialogHandler = ShowUpdatePropertyDialogHandler;
                var PerformUpdateTaskHandler = (function () {
                    function PerformUpdateTaskHandler() {
                    }
                    PerformUpdateTaskHandler.getHandler = function (app) {
                        return function (uri, infoObject, objectType, task, requiredCommandIds, parameterList, successCallback, warningCallback, failCallback) {
                            var execute = function () {
                                var failOnWarnings = true;
                                var onSuccess = function (rawResult) {
                                    var result = rawResult.Results[0];
                                    _.each(task.updatedProperties, function (updatedProperty) {
                                        if (result[updatedProperty] === undefined) {
                                            result[updatedProperty] = {};
                                        }
                                    });
                                    if (successCallback) {
                                        successCallback(result, task);
                                    }
                                };
                                var taskRequest = new HPTRIM.MainObjectUpdateTaskRequest(app.trimClient, objectType, task, uri, requiredCommandIds, failOnWarnings, parameterList, infoObject);
                                taskRequest.doRequest().done(function (rawResult) {
                                    if (app.trimDynamicOverlay().activePanel() != app.recordActionsComponentOverlay) {
                                        app.hideOverlay();
                                    }
                                    var rawStatusObject = rawResult.ResponseStatus;
                                    var rawErrorArray = rawStatusObject ? rawStatusObject.Errors : [];
                                    var error = _.reduce(rawErrorArray, function (memo, rawError) {
                                        return (rawError.Meta.Bad === "True" || memo);
                                    }, false);
                                    if (rawStatusObject.Errors && rawStatusObject.Errors.length > 0 && !error) {
                                        var resubmit = function () {
                                            var failOnWarningsForRetry = false;
                                            var secondTaskRequest = new HPTRIM.MainObjectUpdateTaskRequest(app.trimClient, objectType, task, uri, requiredCommandIds, failOnWarningsForRetry, parameterList, infoObject);
                                            secondTaskRequest.doRequest().done(function (rawResult) {
                                                if (!rawResult.Results || rawResult.Results.length == 0) {
                                                    failCallback(task.caption, rawResult);
                                                }
                                                else {
                                                    onSuccess(rawResult);
                                                }
                                            }).fail(function (rawError) {
                                                failCallback(task.caption, rawError);
                                            });
                                        };
                                        var message = "";
                                        var errorMessages = _.map(rawResult.ResponseStatus.Errors, function (rawError) {
                                            return rawError.Message;
                                        });
                                        warningCallback(task.caption, errorMessages, resubmit);
                                    }
                                    else {
                                        onSuccess(rawResult);
                                    }
                                }).fail(function (rawError) {
                                    failCallback(task.caption, rawError);
                                });
                            };
                            if (task.showConfirmation && task.confirmationString) {
                                var confirmCallback = function () {
                                    app.hideOverlay();
                                    execute();
                                };
                                app.confirmForm.setUp(task.confirmationTitle, task.confirmationString, confirmCallback);
                                app.showOverlay(app.confirmForm);
                            }
                            else {
                                execute();
                            }
                        };
                    };
                    return PerformUpdateTaskHandler;
                }());
                ActionHandlers.PerformUpdateTaskHandler = PerformUpdateTaskHandler;
                var ShowUpdateTaskDialogHandler = (function () {
                    function ShowUpdateTaskDialogHandler() {
                    }
                    ShowUpdateTaskDialogHandler.getHandler = function (app) {
                        return function (uri, infoObject, objectType, task, requiredCommandIds, parameterList, successCallback, warningCallback, failCallback) {
                            app.mainObjectUpdateTaskPanel.resetPanel();
                            app.mainObjectUpdateTaskPanel.renderForm(task, infoObject, objectType);
                            var executeTask = function (userSuppliedParameterList) {
                                var execute = function () {
                                    app.completingOverlay.title(task.caption);
                                    app.completingOverlay.message(HPTRIM.Messages.web_ProcessingOperation);
                                    app.completingOverlay.showingMessage(true);
                                    app.completingOverlay.allowCancel(false);
                                    app.showOverlay(app.completingOverlay);
                                    var onSuccess = function (rawResult) {
                                        app.dismissStandardOverlays();
                                        var result = rawResult.Results[0];
                                        _.each(task.updatedProperties, function (updatedProperty) {
                                            if (result[updatedProperty] === undefined) {
                                                result[updatedProperty] = {};
                                            }
                                        });
                                        if (successCallback) {
                                            successCallback(result, task);
                                        }
                                    };
                                    var parameters = _.union(parameterList, userSuppliedParameterList);
                                    var failOnWarnings = task.checkForWarnings;
                                    var taskRequest = new HPTRIM.MainObjectUpdateTaskRequest(app.trimClient, objectType, task, uri, requiredCommandIds, failOnWarnings, parameters, infoObject);
                                    taskRequest.doRequest().done(function (rawResult) {
                                        if (!rawResult.Results || rawResult.Results.length == 0) {
                                            var rawStatusObject = rawResult.ResponseStatus;
                                            var rawErrorArray = rawStatusObject ? rawStatusObject.Errors : [];
                                            var error = _.reduce(rawErrorArray, function (memo, rawError) {
                                                return (rawError.Meta.Bad === "True" || memo);
                                            }, false);
                                            if (rawStatusObject.Errors && rawStatusObject.Errors.length > 0 && !error) {
                                                var resubmit = function () {
                                                    var failOnWarningsForRetry = false;
                                                    var secondTaskRequest = new HPTRIM.MainObjectUpdateTaskRequest(app.trimClient, objectType, task, uri, requiredCommandIds, failOnWarningsForRetry, parameters, infoObject);
                                                    secondTaskRequest.doRequest().done(function (rawResult) {
                                                        if (!rawResult.Results || rawResult.Results.length == 0) {
                                                            failCallback(task.caption, rawResult);
                                                        }
                                                        else {
                                                            onSuccess(rawResult);
                                                        }
                                                    }).fail(function (rawError) {
                                                        failCallback(task.caption, rawError);
                                                    });
                                                };
                                                var message = "";
                                                var errorMessages = _.map(rawResult.ResponseStatus.Errors, function (rawError) {
                                                    return rawError.Message;
                                                });
                                                warningCallback(task.caption, errorMessages, resubmit);
                                            }
                                        }
                                        else
                                            onSuccess(rawResult);
                                    }).fail(function (rawError) {
                                        failCallback(task.caption, rawError);
                                    });
                                };
                                if (task.showConfirmation && task.confirmationString) {
                                    var confirmCallback = function () {
                                        app.hideOverlay();
                                        execute();
                                    };
                                    app.confirmForm.setUp(task.confirmationTitle, task.confirmationString, confirmCallback);
                                    app.showOverlay(app.confirmForm);
                                }
                                else {
                                    execute();
                                }
                            };
                            app.mainObjectUpdateTaskPanel.saveHandler = executeTask;
                            app.showOverlay(app.mainObjectUpdateTaskPanel);
                        };
                    };
                    return ShowUpdateTaskDialogHandler;
                }());
                ActionHandlers.ShowUpdateTaskDialogHandler = ShowUpdateTaskDialogHandler;
                var ShowCustomUpdateTaskDialogHandler = (function () {
                    function ShowCustomUpdateTaskDialogHandler() {
                    }
                    ShowCustomUpdateTaskDialogHandler.getHandler = function (app) {
                        return function (uri, infoObject, objectType, task, requiredCommandIds, parameterList, successCallback, warningCallback, failCallback) {
                            var executeTaskMethod = function (userSuppliedParameterList, overridingTask) {
                                var taskToExecute = task;
                                if (overridingTask) {
                                    taskToExecute = overridingTask;
                                }
                                var execute = function () {
                                    if (task.id == "EditUserfields") {
                                        var requestData = userSuppliedParameterList[0];
                                        var Qstring = "Uri:" + uri.toString();
                                        requestData.Validate = true;
                                        requestData.Q = Qstring;
                                        var updateAdditionFieldRequest = new HP.HPTRIM.TrimObjectSave(app.trimClient, objectType);
                                        updateAdditionFieldRequest.doRequestEx(requestData).done(function (rawResult) {
                                            if (!rawResult.Results || rawResult.Results.length == 0) {
                                                failCallback(task.caption, rawResult);
                                            }
                                            else {
                                                app.hideOverlay();
                                                successCallback(rawResult.Results[0], task);
                                            }
                                        }).fail(function (rawError) {
                                            failCallback(task.caption, rawError);
                                        });
                                    }
                                    else {
                                        var parameters = _.union(parameterList, userSuppliedParameterList);
                                        app.completingOverlay.title(task.caption);
                                        app.completingOverlay.message(HPTRIM.Messages.web_ProcessingOperation);
                                        app.completingOverlay.showingMessage(true);
                                        app.completingOverlay.allowCancel(false);
                                        app.showOverlay(app.completingOverlay);
                                        var onSuccess = function (rawResult) {
                                            app.dismissStandardOverlays();
                                            var result = rawResult.Results[0];
                                            _.each(taskToExecute.updatedProperties, function (updatedProperty) {
                                                if (result[updatedProperty] === undefined) {
                                                    result[updatedProperty] = {};
                                                }
                                            });
                                            if (successCallback) {
                                                successCallback(result, taskToExecute);
                                            }
                                        };
                                        var failOnWarnings = taskToExecute.checkForWarnings;
                                        var taskRequest = new HPTRIM.MainObjectUpdateTaskRequest(app.trimClient, objectType, taskToExecute, uri, requiredCommandIds, failOnWarnings, parameters, infoObject);
                                        taskRequest.doRequest().done(function (rawResult) {
                                            if (!rawResult.Results || rawResult.Results.length == 0) {
                                                var rawStatusObject = rawResult.ResponseStatus;
                                                var rawErrorArray = rawStatusObject ? rawStatusObject.Errors : [];
                                                var error = _.reduce(rawErrorArray, function (memo, rawError) {
                                                    return (rawError.Meta.Bad === "True" || memo);
                                                }, false);
                                                if (rawStatusObject.Errors && rawStatusObject.Errors.length > 0 && !error) {
                                                    var resubmit = function () {
                                                        var failOnWarningsForRetry = false;
                                                        var secondTaskRequest = new HPTRIM.MainObjectUpdateTaskRequest(app.trimClient, objectType, taskToExecute, uri, requiredCommandIds, failOnWarningsForRetry, parameters, infoObject);
                                                        secondTaskRequest.doRequest().done(function (rawResult) {
                                                            if (!rawResult.Results || rawResult.Results.length == 0) {
                                                                failCallback(task.caption, rawResult);
                                                            }
                                                            else {
                                                                onSuccess(rawResult);
                                                            }
                                                        }).fail(function (rawError) {
                                                            failCallback(task.caption, rawError);
                                                        });
                                                    };
                                                    var errorMessages = _.map(rawResult.ResponseStatus.Errors, function (rawError) {
                                                        return rawError.Message;
                                                    });
                                                    warningCallback(task.caption, errorMessages, resubmit);
                                                }
                                                else {
                                                    failCallback(task.caption, rawResult);
                                                }
                                            }
                                            else
                                                onSuccess(rawResult);
                                        }).fail(function (rawError) {
                                            failCallback(task.caption, rawError);
                                        });
                                    }
                                };
                                if (taskToExecute.showConfirmation && taskToExecute.confirmationString) {
                                    var confirmCallback = function () {
                                        app.hideOverlay();
                                        execute();
                                    };
                                    app.confirmForm.setUp(taskToExecute.confirmationTitle, taskToExecute.confirmationString, confirmCallback);
                                    app.showOverlay(app.confirmForm);
                                }
                                else {
                                    execute();
                                }
                            };
                            app.showCustomTaskPanel(infoObject, task, executeTaskMethod);
                        };
                    };
                    return ShowCustomUpdateTaskDialogHandler;
                }());
                ActionHandlers.ShowCustomUpdateTaskDialogHandler = ShowCustomUpdateTaskDialogHandler;
            })(ActionHandlers = App.ActionHandlers || (App.ActionHandlers = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var ActionHandlers;
            (function (ActionHandlers) {
                "use strict";
                var RemoveRelatedRecordHandler = (function () {
                    function RemoveRelatedRecordHandler() {
                    }
                    RemoveRelatedRecordHandler.getHandler = function (app) {
                        return function (uri, recNumber, title) {
                            app.removeRelatedRecordForm.resetPanel();
                            app.removeRelatedRecordForm.recordUri = uri;
                            app.removeRelatedRecordForm.recordNumber(recNumber);
                            app.removeRelatedRecordForm.recordTitle(title);
                            app.removeRelatedRecordForm.updateQuery('uri:' + uri);
                            app.showOverlay(app.removeRelatedRecordForm);
                        };
                    };
                    return RemoveRelatedRecordHandler;
                }());
                ActionHandlers.RemoveRelatedRecordHandler = RemoveRelatedRecordHandler;
            })(ActionHandlers = App.ActionHandlers || (App.ActionHandlers = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var ActionHandlers;
            (function (ActionHandlers) {
                "use strict";
                var TaggedUpdatePropertyHandler = (function () {
                    function TaggedUpdatePropertyHandler() {
                    }
                    TaggedUpdatePropertyHandler.getHandler = function (app) {
                        return function (uriArray, query, filter, objectType, task, data, startCallback, updateCallback, completeCallback, warningCallback, failCallback) {
                            if (uriArray.length == 0 && (query == undefined || query == "")) {
                                return;
                            }
                            if (uriArray.length > 0) {
                                var totalLength = uriArray.length;
                                var successCount = 0;
                                var errorCount = 0;
                                var processStack = function (currentUris, processedItemCallback, completeCallback, errorCallback) {
                                    if (currentUris.length == 0) {
                                        completeCallback(successCount, totalLength);
                                    }
                                    if (currentUris.length > 0) {
                                        var currentUri = currentUris[0];
                                        var remainingUris = currentUris.slice(1, currentUris.length);
                                        var processedCount = totalLength - remainingUris.length;
                                        var taskRequest = new HPTRIM.MainObjectUpdateTaskRequest(app.trimClient, objectType, task, currentUris[0], "", task.checkForWarnings);
                                        if (task.requiredCommandIds) {
                                            taskRequest.addData({ cid_SelectedIds: task.requiredCommandIds.join(',') });
                                        }
                                        taskRequest.addData(data);
                                        var onSuccess = function (result) {
                                            successCount = successCount + 1;
                                            if (processedItemCallback) {
                                                _.each(task.updatedProperties, function (requiredProperty) {
                                                    if (result[requiredProperty] === undefined) {
                                                        result[requiredProperty] = {};
                                                    }
                                                });
                                                processedItemCallback(result, task.nameProperty, processedCount, totalLength, function () { processStack(remainingUris, processedItemCallback, completeCallback, errorCallback); }, function () { completeCallback(successCount, totalLength); });
                                            }
                                            else {
                                                processStack(remainingUris, processedItemCallback, completeCallback, errorCallback);
                                            }
                                        };
                                        taskRequest.doRequest().done(function (rawResult) {
                                            if (rawResult.Results[0]) {
                                                onSuccess(rawResult.Results[0]);
                                            }
                                            else {
                                                var rawStatusObject = rawResult.ResponseStatus;
                                                var rawErrorArray = rawStatusObject ? rawStatusObject.Errors : [];
                                                var error = _.reduce(rawErrorArray, function (memo, rawError) {
                                                    return (rawError.Meta.Bad === "True" || memo);
                                                }, false);
                                                if (rawStatusObject.Errors && rawStatusObject.Errors.length > 0 && !error) {
                                                    var continueCallback = function () {
                                                        var failOnWarningsForRetry = false;
                                                        var secondTaskRequest = new HPTRIM.MainObjectUpdateTaskRequest(app.trimClient, objectType, task, currentUris[0], "", failOnWarningsForRetry);
                                                        if (task.requiredCommandIds) {
                                                            secondTaskRequest.addData({ cid_SelectedIds: task.requiredCommandIds.join(',') });
                                                        }
                                                        secondTaskRequest.addData(data);
                                                        secondTaskRequest.doRequest().done(function (secondRawResult) {
                                                            if (secondRawResult.Results[0]) {
                                                                onSuccess(secondRawResult.Results[0]);
                                                            }
                                                            else {
                                                                errorCount = errorCount + 1;
                                                                if (failCallback) {
                                                                    failCallback(secondRawResult, currentUri, task.nameProperty, processedCount, totalLength, function () { processStack(remainingUris, processedItemCallback, completeCallback, errorCallback); }, function () { completeCallback(successCount, totalLength); });
                                                                }
                                                                else {
                                                                    processStack(remainingUris, processedItemCallback, completeCallback, errorCallback);
                                                                }
                                                            }
                                                        }).fail(function (err) {
                                                            errorCount = errorCount + 1;
                                                            if (failCallback) {
                                                                failCallback(err, currentUri, task.nameProperty, totalLength - remainingUris.length, totalLength, function () { processStack(remainingUris, processedItemCallback, completeCallback, errorCallback); }, function () { completeCallback(successCount, totalLength); });
                                                            }
                                                            else {
                                                                processStack(remainingUris, processedItemCallback, completeCallback, errorCallback);
                                                            }
                                                        });
                                                    };
                                                    var errorMessages = _.map(rawResult.ResponseStatus.Errors, function (rawError) {
                                                        return rawError.Message;
                                                    });
                                                    var warningMessage = errorMessages.join(' ');
                                                    var warningCode = ["0"];
                                                    if (rawResult.ResponseStatus.Errors[0] && rawResult.ResponseStatus.Errors[0].Meta && rawResult.ResponseStatus.Errors[0].Meta.WarningCodes) {
                                                        warningCode = rawResult.ResponseStatus.Errors[0].Meta.WarningCodes.split(',');
                                                    }
                                                    var skipCallback = function () {
                                                        errorCount = errorCount + 1;
                                                        processStack(remainingUris, processedItemCallback, completeCallback, errorCallback);
                                                    };
                                                    warningCallback(warningMessage, warningCode, currentUri, task.nameProperty, processedCount, totalLength, continueCallback, skipCallback, function () { completeCallback(successCount, totalLength); });
                                                }
                                                else {
                                                    errorCount = errorCount + 1;
                                                    if (failCallback) {
                                                        failCallback(rawResult, currentUri, task.nameProperty, processedCount, totalLength, function () { processStack(remainingUris, processedItemCallback, completeCallback, errorCallback); }, function () { completeCallback(successCount, totalLength); });
                                                    }
                                                    else {
                                                        processStack(remainingUris, processedItemCallback, completeCallback, errorCallback);
                                                    }
                                                }
                                            }
                                        }).fail(function (err) {
                                            errorCount = errorCount + 1;
                                            if (failCallback) {
                                                failCallback(err, currentUri, task.nameProperty, totalLength - remainingUris.length, totalLength, function () { processStack(remainingUris, processedItemCallback, completeCallback, errorCallback); }, function () { completeCallback(successCount, totalLength); });
                                            }
                                            else {
                                                processStack(remainingUris, processedItemCallback, completeCallback, errorCallback);
                                            }
                                        });
                                    }
                                };
                                startCallback();
                                processStack(uriArray, updateCallback, completeCallback, failCallback);
                            }
                        };
                    };
                    return TaggedUpdatePropertyHandler;
                }());
                ActionHandlers.TaggedUpdatePropertyHandler = TaggedUpdatePropertyHandler;
                var TaggedUpdatePropertyDialogHandler = (function () {
                    function TaggedUpdatePropertyDialogHandler() {
                    }
                    TaggedUpdatePropertyDialogHandler.getHandler = function (app) {
                        return function (uriArray, query, filter, objectType, task, data, startCallback, updateCallback, completeCallback, warningCallback, failCallback) {
                            app.mainObjectUpdateTaskPanel.resetPanel();
                            app.mainObjectUpdateTaskPanel.renderForm(task, {}, objectType);
                            var executeTask = function (parameterList) {
                                if (!data) {
                                    data = {};
                                }
                                _.each(parameterList, function (parameter) {
                                    var name = parameter.name;
                                    var value = parameter.value.Uri ? parameter.value.Uri : parameter.value;
                                    data[name] = value;
                                });
                                app.hideOverlay();
                                var taggedUpdateTaskHandler = TaggedUpdatePropertyHandler.getHandler(app);
                                var finishedCallback = function (processedCount, total, extraMsg) {
                                    completeCallback(processedCount, total, extraMsg);
                                };
                                taggedUpdateTaskHandler(uriArray, query, filter, objectType, task, data, startCallback, updateCallback, finishedCallback, warningCallback, failCallback);
                            };
                            app.mainObjectUpdateTaskPanel.saveHandler = executeTask;
                            app.showOverlay(app.mainObjectUpdateTaskPanel);
                        };
                    };
                    return TaggedUpdatePropertyDialogHandler;
                }());
                ActionHandlers.TaggedUpdatePropertyDialogHandler = TaggedUpdatePropertyDialogHandler;
                var TaggedUpdateTaskHandler = (function () {
                    function TaggedUpdateTaskHandler() {
                    }
                    TaggedUpdateTaskHandler.getHandler = function (app) {
                        return function (uriArray, query, filter, objectType, task, data, startCallback, updateCallback, completeCallback, warningCallback, failCallback) {
                            if (uriArray.length == 0 && (query == undefined || query == "")) {
                                return;
                            }
                            var totalLength = uriArray.length;
                            var successCount = 0;
                            var errorCount = 0;
                            if (uriArray.length > 0) {
                                var processStack = function (currentUris, processedItemCallback, completeCallback, errorCallback) {
                                    if (currentUris.length == 0) {
                                        completeCallback(successCount, totalLength);
                                    }
                                    var onSuccess = function (rawObject) {
                                        successCount = successCount + 1;
                                        if (processedItemCallback) {
                                            processedItemCallback(rawObject, task.nameProperty, processedCount, totalLength, function () { processStack(remainingUris, processedItemCallback, completeCallback, errorCallback); }, function () { completeCallback(successCount, totalLength); });
                                        }
                                        else {
                                            processStack(remainingUris, processedItemCallback, completeCallback, errorCallback);
                                        }
                                    };
                                    if (currentUris.length > 0) {
                                        var currentUri = currentUris[0];
                                        var remainingUris = currentUris.slice(1, currentUris.length);
                                        var processedCount = totalLength - remainingUris.length;
                                        var parameterList = [];
                                        if (data.parameterList) {
                                            parameterList = data.parameterList;
                                        }
                                        var taskRequest = new HPTRIM.MainObjectUpdateTaskRequest(app.trimClient, objectType, task, currentUris[0], "", task.checkForWarnings, parameterList);
                                        if (task.requiredCommandIds) {
                                            taskRequest.addData({ cid_SelectedIds: task.requiredCommandIds.join(',') });
                                        }
                                        taskRequest.addData(data);
                                        taskRequest.doRequest().done(function (rawResult) {
                                            if (rawResult.Results[0]) {
                                                onSuccess(rawResult.Results[0]);
                                            }
                                            else {
                                                var rawStatusObject = rawResult.ResponseStatus;
                                                var rawErrorArray = rawStatusObject ? rawStatusObject.Errors : [];
                                                var error = _.reduce(rawErrorArray, function (memo, rawError) {
                                                    return (rawError.Meta.Bad === "True" || memo);
                                                }, false);
                                                if (rawStatusObject.Errors && rawStatusObject.Errors.length > 0 && !error) {
                                                    var continueCallback = function () {
                                                        var failOnWarningsForRetry = false;
                                                        var secondTaskRequest = new HPTRIM.MainObjectUpdateTaskRequest(app.trimClient, objectType, task, currentUris[0], "", failOnWarningsForRetry, parameterList);
                                                        if (task.requiredCommandIds) {
                                                            secondTaskRequest.addData({ cid_SelectedIds: task.requiredCommandIds.join(',') });
                                                        }
                                                        secondTaskRequest.addData(data);
                                                        secondTaskRequest.doRequest().done(function (secondRawResult) {
                                                            if (secondRawResult.Results[0]) {
                                                                onSuccess(secondRawResult.Results[0]);
                                                            }
                                                            else {
                                                                errorCount = errorCount + 1;
                                                                if (failCallback) {
                                                                    failCallback(secondRawResult, currentUri, task.nameProperty, processedCount, totalLength, function () { processStack(remainingUris, processedItemCallback, completeCallback, errorCallback); }, function () { completeCallback(successCount, totalLength); });
                                                                }
                                                                else {
                                                                    processStack(remainingUris, processedItemCallback, completeCallback, errorCallback);
                                                                }
                                                            }
                                                        }).fail(function (err) {
                                                            errorCount = errorCount + 1;
                                                            if (failCallback) {
                                                                failCallback(err, currentUri, task.nameProperty, totalLength - remainingUris.length, totalLength, function () { processStack(remainingUris, processedItemCallback, completeCallback, errorCallback); }, function () { completeCallback(successCount, totalLength); });
                                                            }
                                                            else {
                                                                processStack(remainingUris, processedItemCallback, completeCallback, errorCallback);
                                                            }
                                                        });
                                                    };
                                                    var errorMessages = _.map(rawResult.ResponseStatus.Errors, function (rawError) {
                                                        return rawError.Message;
                                                    });
                                                    var warningMessage = HPTRIM.Messages.web_warning + " " + errorMessages.join(', ');
                                                    var skipCallback = function () {
                                                        errorCount = errorCount + 1;
                                                        processStack(remainingUris, processedItemCallback, completeCallback, errorCallback);
                                                    };
                                                    var warningCodes = ["0"];
                                                    if (rawResult.ResponseStatus.Meta && rawResult.ResponseStatus.Meta.WarningCodes) {
                                                        warningCodes = rawResult.ResponseStatus.Meta.WarningCodes.split(',');
                                                    }
                                                    warningCallback(warningMessage, warningCodes, currentUri, task.nameProperty, processedCount, totalLength, continueCallback, skipCallback, function () { completeCallback(successCount, totalLength); });
                                                }
                                                else {
                                                    errorCount = errorCount + 1;
                                                    if (failCallback) {
                                                        failCallback(rawResult, currentUri, task.nameProperty, processedCount, totalLength, function () { processStack(remainingUris, processedItemCallback, completeCallback, errorCallback); }, function () { completeCallback(successCount, totalLength); });
                                                    }
                                                    else {
                                                        processStack(remainingUris, processedItemCallback, completeCallback, errorCallback);
                                                    }
                                                }
                                            }
                                        }).fail(function (err) {
                                            errorCount = errorCount + 1;
                                            if (failCallback) {
                                                failCallback(err, currentUri, task.nameProperty, processedCount, totalLength, function () { processStack(remainingUris, processedItemCallback, completeCallback, errorCallback); }, function () { completeCallback(successCount, totalLength); });
                                            }
                                            else {
                                                processStack(remainingUris, processedItemCallback, completeCallback, errorCallback);
                                            }
                                        });
                                    }
                                };
                                startCallback();
                                processStack(uriArray, updateCallback, completeCallback, failCallback);
                            }
                        };
                    };
                    return TaggedUpdateTaskHandler;
                }());
                ActionHandlers.TaggedUpdateTaskHandler = TaggedUpdateTaskHandler;
                var TaggedUpdateAdditionalFieldsTaskHandler = (function () {
                    function TaggedUpdateAdditionalFieldsTaskHandler() {
                    }
                    TaggedUpdateAdditionalFieldsTaskHandler.getHandler = function (app) {
                        return function (uriArray, query, filter, objectType, task, data, startCallback, updateCallback, completeCallback, warningCallback, failCallback) {
                            if (uriArray.length == 0 && (query == undefined || query == "")) {
                                return;
                            }
                            var totalLength = uriArray.length;
                            var successCount = 0;
                            var errorCount = 0;
                            if (uriArray.length > 0) {
                                var requestData = data.parameterList[0];
                                var Qstring = "Uri:" + uriArray.join(',');
                                requestData.Validate = true;
                                requestData.Q = Qstring;
                                var taskRequest = new HP.HPTRIM.TrimObjectSave(app.trimClient, objectType);
                                taskRequest.doRequestEx(requestData).done(function (result) {
                                    completeCallback(result.Results.length, result.Results.length, result.ResponseStatus.Message);
                                }).fail(function (err) {
                                });
                            }
                        };
                    };
                    return TaggedUpdateAdditionalFieldsTaskHandler;
                }());
                ActionHandlers.TaggedUpdateAdditionalFieldsTaskHandler = TaggedUpdateAdditionalFieldsTaskHandler;
                var TaggedUpdateSecurityTaskHandler = (function () {
                    function TaggedUpdateSecurityTaskHandler() {
                    }
                    TaggedUpdateSecurityTaskHandler.getHandler = function (app) {
                        return function (uriArray, query, filter, objectType, task, data, startCallback, updateCallback, completeCallback, warningCallback, failCallback) {
                            if (uriArray.length == 0 && (query == undefined || query == "")) {
                                return;
                            }
                            var totalLength = uriArray.length;
                            var successCount = 0;
                            var errorCount = 0;
                            if (uriArray.length > 0) {
                                var processStack = function (currentUris, processedItemCallback, completeCallback, errorCallback) {
                                    if (currentUris.length == 0) {
                                        setTimeout(function () {
                                            completeCallback(successCount, totalLength);
                                        }, 500);
                                    }
                                    var onSuccess = function (rawObject) {
                                        successCount = successCount + 1;
                                        if (processedItemCallback) {
                                            processedItemCallback(rawObject, task.nameProperty, processedCount, totalLength, function () { processStack(remainingUris, processedItemCallback, completeCallback, errorCallback); }, function () { completeCallback(successCount, totalLength); });
                                        }
                                        else {
                                            processStack(remainingUris, processedItemCallback, completeCallback, errorCallback);
                                        }
                                    };
                                    if (currentUris.length > 0) {
                                        var currentUri = currentUris[0];
                                        var remainingUris = currentUris.slice(1, currentUris.length);
                                        var processedCount = totalLength - remainingUris.length;
                                        var countUri = processedCount - 1;
                                        var parameterList = [];
                                        if (data.parameterList) {
                                            parameterList = data.parameterList;
                                        }
                                        var requestData = {};
                                        requestData.AccessControlList = data.parameterList["AccessControlList"];
                                        requestData.SecurityProfile = data.parameterList["SecurityProfile"];
                                        var Qstring = "Uri:" + uriArray.join(',');
                                        requestData.Validate = true;
                                        requestData.Q = Qstring;
                                        requestData.FailOnWarnings = false;
                                        requestData.parameterList = parameterList;
                                        var taskRequest = new HP.HPTRIM.TrimObjectSave(app.trimClient, objectType);
                                        taskRequest.doRequestEx(requestData).done(function (rawResult) {
                                            if (rawResult.Results[countUri]) {
                                                onSuccess(rawResult.Results[countUri]);
                                            }
                                            else {
                                                var rawStatusObject = rawResult.ResponseStatus;
                                                var rawErrorArray = rawStatusObject ? rawStatusObject.Errors : [];
                                                var error = _.reduce(rawErrorArray, function (memo, rawError) {
                                                    return (rawError.Meta.Bad === "True" || memo);
                                                }, false);
                                                if (rawStatusObject.Errors && rawStatusObject.Errors.length > 0 && !error) {
                                                    var continueCallback = function () {
                                                        var failOnWarningsForRetry = false;
                                                        var secondTaskRequest = new HP.HPTRIM.TrimObjectSave(app.trimClient, objectType);
                                                        secondTaskRequest.doRequestEx(requestData).done(function (secondRawResult) {
                                                            if (secondRawResult.Results[countUri]) {
                                                                onSuccess(secondRawResult.Results[countUri]);
                                                            }
                                                            else {
                                                                errorCount = errorCount + 1;
                                                                if (failCallback) {
                                                                    failCallback(secondRawResult, currentUri, task.nameProperty, processedCount, totalLength, function () { processStack(remainingUris, processedItemCallback, completeCallback, errorCallback); }, function () { completeCallback(successCount, totalLength); });
                                                                }
                                                                else {
                                                                    processStack(remainingUris, processedItemCallback, completeCallback, errorCallback);
                                                                }
                                                            }
                                                        }).fail(function (err) {
                                                            errorCount = errorCount + 1;
                                                            if (failCallback) {
                                                                failCallback(err, currentUri, task.nameProperty, totalLength - remainingUris.length, totalLength, function () { processStack(remainingUris, processedItemCallback, completeCallback, errorCallback); }, function () { completeCallback(successCount, totalLength); });
                                                            }
                                                            else {
                                                                processStack(remainingUris, processedItemCallback, completeCallback, errorCallback);
                                                            }
                                                        });
                                                    };
                                                    var errorMessages = _.map(rawResult.ResponseStatus.Errors, function (rawError) {
                                                        return rawError.Message;
                                                    });
                                                    var warningMessage = HPTRIM.Messages.web_warning + " " + errorMessages.join(', ');
                                                    var skipCallback = function () {
                                                        errorCount = errorCount + 1;
                                                        processStack(remainingUris, processedItemCallback, completeCallback, errorCallback);
                                                    };
                                                    var warningCodes = ["0"];
                                                    if (rawResult.ResponseStatus.Meta && rawResult.ResponseStatus.Meta.WarningCodes) {
                                                        warningCodes = rawResult.ResponseStatus.Meta.WarningCodes.split(',');
                                                    }
                                                    warningCallback(warningMessage, warningCodes, currentUri, task.nameProperty, processedCount, totalLength, continueCallback, skipCallback, function () { completeCallback(successCount, totalLength); });
                                                }
                                                else {
                                                    errorCount = errorCount + 1;
                                                    if (failCallback) {
                                                        failCallback(rawResult, currentUri, task.nameProperty, processedCount, totalLength, function () { processStack(remainingUris, processedItemCallback, completeCallback, errorCallback); }, function () { completeCallback(successCount, totalLength); });
                                                    }
                                                    else {
                                                        processStack(remainingUris, processedItemCallback, completeCallback, errorCallback);
                                                    }
                                                }
                                            }
                                        }).fail(function (err) {
                                            errorCount = errorCount + 1;
                                            if (failCallback) {
                                                failCallback(err, currentUri, task.nameProperty, processedCount, totalLength, function () { processStack(remainingUris, processedItemCallback, completeCallback, errorCallback); }, function () { completeCallback(successCount, totalLength); });
                                            }
                                            else {
                                                processStack(remainingUris, processedItemCallback, completeCallback, errorCallback);
                                            }
                                        });
                                    }
                                };
                                startCallback();
                                processStack(uriArray, updateCallback, completeCallback, failCallback);
                            }
                        };
                    };
                    return TaggedUpdateSecurityTaskHandler;
                }());
                ActionHandlers.TaggedUpdateSecurityTaskHandler = TaggedUpdateSecurityTaskHandler;
                var TaggedUpdateTaskDialogHandler = (function () {
                    function TaggedUpdateTaskDialogHandler() {
                    }
                    TaggedUpdateTaskDialogHandler.getHandler = function (app) {
                        return function (uriArray, query, filter, objectType, task, data, startCallback, updateCallback, completeCallback, warningCallback, failCallback) {
                            if (uriArray.length == 0 && (query == undefined || query == "")) {
                                return;
                            }
                            app.mainObjectUpdateTaskPanel.resetPanel();
                            app.mainObjectUpdateTaskPanel.renderForm(task, {}, objectType);
                            var executeTask = function (parameterList) {
                                data['parameterList'] = parameterList;
                                var taggedUpdateTaskHandler = TaggedUpdateTaskHandler.getHandler(app);
                                var finishedCallback = function (processedCount, total, extraMsg) {
                                    app.hideOverlay();
                                    completeCallback(processedCount, total, extraMsg);
                                };
                                taggedUpdateTaskHandler(uriArray, query, filter, objectType, task, data, startCallback, updateCallback, finishedCallback, warningCallback, failCallback);
                            };
                            app.mainObjectUpdateTaskPanel.saveHandler = executeTask;
                            app.showOverlay(app.mainObjectUpdateTaskPanel);
                        };
                    };
                    return TaggedUpdateTaskDialogHandler;
                }());
                ActionHandlers.TaggedUpdateTaskDialogHandler = TaggedUpdateTaskDialogHandler;
                var TaggedUpdateTaskCustomDialogHandler = (function () {
                    function TaggedUpdateTaskCustomDialogHandler() {
                    }
                    TaggedUpdateTaskCustomDialogHandler.getHandler = function (app) {
                        return function (uriArray, query, filter, objectType, task, data, startCallback, updateCallback, completeCallback, warningCallback, failCallback) {
                            if (uriArray.length == 0 && (query == undefined || query == "")) {
                                return;
                            }
                            var executeTask = function (parameterList) {
                                app.hideOverlay();
                                data['parameterList'] = parameterList;
                                if (task.id == HP.HPTRIM.App.Panels.RecordDetails.RecordTasks.modifyAdditionalFieldsRecordsTaskId) {
                                    var taggedUpdateAdditionalFieldsTaskHandler = TaggedUpdateAdditionalFieldsTaskHandler.getHandler(app);
                                    var finishedCallback = function (processedCount, total, extraMsg) {
                                        app.hideOverlay();
                                        completeCallback(processedCount, total, extraMsg);
                                    };
                                    taggedUpdateAdditionalFieldsTaskHandler(uriArray, query, filter, objectType, task, data, startCallback, updateCallback, finishedCallback, warningCallback, failCallback);
                                }
                                else if (task.id == HP.HPTRIM.App.Panels.RecordDetails.RecordTasks.SetSecurityTaskId) {
                                    var taggedUpdateSecurityTaskHandler = TaggedUpdateSecurityTaskHandler.getHandler(app);
                                    var finishedCallback = function (processedCount, total, extraMsg) {
                                        app.hideOverlay();
                                        completeCallback(processedCount, total, extraMsg);
                                    };
                                    taggedUpdateSecurityTaskHandler(uriArray, query, filter, objectType, task, data, startCallback, updateCallback, finishedCallback, warningCallback, failCallback);
                                }
                                else {
                                    var taggedUpdateTaskHandler = TaggedUpdateTaskHandler.getHandler(app);
                                    var finishedCallback = function (processedCount, total, extraMsg) {
                                        app.hideOverlay();
                                        completeCallback(processedCount, total, extraMsg);
                                    };
                                    taggedUpdateTaskHandler(uriArray, query, filter, objectType, task, data, startCallback, updateCallback, finishedCallback, warningCallback, failCallback);
                                }
                            };
                            app.showCustomTaskPanel(null, task, executeTask, uriArray);
                        };
                    };
                    return TaggedUpdateTaskCustomDialogHandler;
                }());
                ActionHandlers.TaggedUpdateTaskCustomDialogHandler = TaggedUpdateTaskCustomDialogHandler;
            })(ActionHandlers = App.ActionHandlers || (App.ActionHandlers = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var ActionHandlers;
            (function (ActionHandlers) {
                "use strict";
                var ModifyMainObjectHandler = (function () {
                    function ModifyMainObjectHandler() {
                    }
                    ModifyMainObjectHandler.getHandler = function (app) {
                        return function (uri, objectDef, requiredProperties, requiredCommandIds, updateCallback) {
                            app.trimBodyPanel.showUpdateMainObjectdDataEntryPanel(uri, objectDef, app.showError, requiredProperties, requiredCommandIds, updateCallback);
                        };
                    };
                    return ModifyMainObjectHandler;
                }());
                ActionHandlers.ModifyMainObjectHandler = ModifyMainObjectHandler;
            })(ActionHandlers = App.ActionHandlers || (App.ActionHandlers = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var ActionHandlers;
            (function (ActionHandlers) {
                "use strict";
                var HomePageNavHandler = (function () {
                    function HomePageNavHandler() {
                    }
                    HomePageNavHandler.getHandler = function (app) {
                        return function (baseObjectType, queryString, viewId, uri, filter, sort, searchOptions) {
                            app.trimGlobalSearchPanel.updateQueryFieldWithoutSearching(queryString);
                            var targetObjectType = HPTRIM.BaseObjectTypes.Record;
                            if (baseObjectType) {
                                targetObjectType = baseObjectType;
                            }
                            var action = app.trimNavPanel.getActionByType(targetObjectType);
                            app.trimNavPanel.setActionActive(action);
                            if (viewId > 0) {
                                var alreadyExistTabIndex = app.trimBodyPanel.checkIsTabAlreadyExist(queryString, targetObjectType);
                                if (alreadyExistTabIndex != -1) {
                                    app.trimBodyPanel.select(app.trimBodyPanel.tabPanelList()[alreadyExistTabIndex]);
                                    return;
                                }
                                app.trimBodyPanel.openPanelAndShowView(targetObjectType, viewId, uri);
                            }
                            else {
                                var alreadyExistTabIndex = app.trimBodyPanel.checkIsTabAlreadyExist(queryString, targetObjectType);
                                if (alreadyExistTabIndex != -1) {
                                    app.trimBodyPanel.select(app.trimBodyPanel.tabPanelList()[alreadyExistTabIndex]);
                                    return;
                                }
                                app.trimBodyPanel.openPanelAndSearch(targetObjectType, queryString, uri, filter, sort, searchOptions);
                            }
                        };
                    };
                    return HomePageNavHandler;
                }());
                ActionHandlers.HomePageNavHandler = HomePageNavHandler;
            })(ActionHandlers = App.ActionHandlers || (App.ActionHandlers = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var ActionHandlers;
            (function (ActionHandlers) {
                "use strict";
                var TaggedStartHandler = (function () {
                    function TaggedStartHandler() {
                    }
                    TaggedStartHandler.getHandler = function (app) {
                        return function (taskCaption, objectType) {
                            app.progressWindow.fullReset();
                            var makeHeading = function () {
                                if (objectType.Caption)
                                    return objectType.Caption + " - " + taskCaption;
                                return taskCaption;
                            };
                            app.progressWindow.heading(makeHeading());
                            app.progressWindow.currentObjectType = objectType;
                            app.progressWindow.showNotification();
                        };
                    };
                    return TaggedStartHandler;
                }());
                ActionHandlers.TaggedStartHandler = TaggedStartHandler;
                var TaggedUpdateProgressHandler = (function () {
                    function TaggedUpdateProgressHandler() {
                    }
                    TaggedUpdateProgressHandler.getHandler = function (app) {
                        return function (itemName, processedCount, total, cancelCallback) {
                            app.progressWindow.reset();
                            app.progressWindow.showErrorControls(false);
                            app.progressWindow.currentItemName(itemName);
                            app.progressWindow.updateProgress(processedCount, total);
                            app.progressWindow.cancelCallback = cancelCallback;
                            app.progressWindow.showNotification();
                        };
                    };
                    return TaggedUpdateProgressHandler;
                }());
                ActionHandlers.TaggedUpdateProgressHandler = TaggedUpdateProgressHandler;
                var TaggedUpdateProgressErrorHandler = (function () {
                    function TaggedUpdateProgressErrorHandler() {
                    }
                    TaggedUpdateProgressErrorHandler.getHandler = function (app) {
                        return function (itemName, uri, errorMessage, processedCount, total, cancelCallback, pauseOnError, ignoreErrors, continueCallback, cancelProcessing) {
                            app.progressWindow.reset();
                            app.progressWindow.currentItemName(itemName);
                            app.progressWindow.currentItemError(true);
                            app.progressWindow.currentItemMessage(errorMessage);
                            app.progressWindow.addError(uri, itemName, errorMessage);
                            app.progressWindow.updateProgress(processedCount, total);
                            app.progressWindow.cancelCallback = cancelCallback;
                            app.progressWindow.showNotification();
                            app.progressWindow.continueAfterError = continueCallback;
                            app.progressWindow.ignoreErrors = ignoreErrors;
                            app.progressWindow.cancelProcessing = cancelProcessing;
                            if (pauseOnError) {
                                app.progressWindow.showErrorControls(true);
                                $('.progress-bar').addClass('progress-bar-warning');
                            }
                            else {
                                app.progressWindow.showErrorControls(false);
                                $('.progress-bar').removeClass('progress-bar-warning');
                                continueCallback();
                            }
                        };
                    };
                    return TaggedUpdateProgressErrorHandler;
                }());
                ActionHandlers.TaggedUpdateProgressErrorHandler = TaggedUpdateProgressErrorHandler;
                var TaggedUpdateProgressWarningHandler = (function () {
                    function TaggedUpdateProgressWarningHandler() {
                    }
                    TaggedUpdateProgressWarningHandler.getHandler = function (app) {
                        return function (itemName, uri, errorMessage, processedCount, total, cancelCallback, pauseOnWarningForThisObject, ignoreWarningsForThisObject, skipCurrentOject, skipAllWarnings, ignoreWarning, ignoreAllWarnings, cancelProcessing) {
                            app.progressWindow.reset();
                            app.progressWindow.currentItemName(itemName);
                            app.progressWindow.currentItemWarning(true);
                            app.progressWindow.currentItemMessage(errorMessage);
                            app.progressWindow.updateProgress(processedCount, total);
                            app.progressWindow.cancelCallback = cancelCallback;
                            app.progressWindow.showNotification();
                            app.progressWindow.skipWarning = function () {
                                $('.progress-bar').addClass('progress-bar-warning');
                                app.progressWindow.addError(uri, itemName, errorMessage);
                                skipCurrentOject();
                            };
                            app.progressWindow.skipAllWarnings = function () {
                                $('.progress-bar').removeClass('progress-bar-warning');
                                app.progressWindow.addError(uri, itemName, errorMessage);
                                skipAllWarnings();
                            };
                            app.progressWindow.ignoreWarning = function () {
                                $('.progress-bar').removeClass('progress-bar-warning');
                                app.progressWindow.addWarning(uri, itemName, errorMessage);
                                ignoreWarning();
                            };
                            app.progressWindow.IgnoreAllWarnings = function () {
                                $('.progress-bar').removeClass('progress-bar-warning');
                                app.progressWindow.addWarning(uri, itemName, errorMessage);
                                ignoreAllWarnings();
                            };
                            app.progressWindow.cancelProcessing = function () {
                                app.progressWindow.addError(uri, itemName, errorMessage);
                                cancelProcessing();
                            };
                            if (pauseOnWarningForThisObject) {
                                app.progressWindow.showWarningControls(true);
                                $('.progress-bar').addClass('progress-bar-warning');
                            }
                            else {
                                app.progressWindow.showWarningControls(false);
                                if (ignoreWarningsForThisObject) {
                                    $('.progress-bar').removeClass('progress-bar-warning');
                                    app.progressWindow.addWarning(uri, itemName, errorMessage);
                                    ignoreWarning();
                                }
                                else {
                                    $('.progress-bar').addClass('progress-bar-warning');
                                    app.progressWindow.addError(uri, itemName, errorMessage);
                                    skipCurrentOject();
                                }
                            }
                        };
                    };
                    return TaggedUpdateProgressWarningHandler;
                }());
                ActionHandlers.TaggedUpdateProgressWarningHandler = TaggedUpdateProgressWarningHandler;
                var TaggedCompleteProgressHandler = (function () {
                    function TaggedCompleteProgressHandler() {
                    }
                    TaggedCompleteProgressHandler.getHandler = function (app) {
                        return function (successCount, total, extraMsg) {
                            app.progressWindow.finish(successCount, total, extraMsg);
                            app.progressWindow.showNotification();
                        };
                    };
                    return TaggedCompleteProgressHandler;
                }());
                ActionHandlers.TaggedCompleteProgressHandler = TaggedCompleteProgressHandler;
            })(ActionHandlers = App.ActionHandlers || (App.ActionHandlers = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var ActionHandlers;
            (function (ActionHandlers) {
                "use strict";
                var RemoveContactHandler = (function () {
                    function RemoveContactHandler() {
                    }
                    RemoveContactHandler.getHandler = function (app) {
                        return function (uri, recNumber, title) {
                            app.removeContactOverlay.resetPanel();
                            app.removeContactOverlay.recordUri = uri;
                            app.removeContactOverlay.recordNumber(recNumber);
                            app.removeContactOverlay.recordTitle(title);
                            app.removeContactOverlay.updateQuery("uri:" + uri);
                            app.showOverlay(app.removeContactOverlay);
                        };
                    };
                    return RemoveContactHandler;
                }());
                ActionHandlers.RemoveContactHandler = RemoveContactHandler;
            })(ActionHandlers = App.ActionHandlers || (App.ActionHandlers = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var ActionHandlers;
            (function (ActionHandlers) {
                "use strict";
                var AddRelatedRecordHandler = (function () {
                    function AddRelatedRecordHandler() {
                    }
                    AddRelatedRecordHandler.getHandler = function (app) {
                        return function (uri, recNumber, title) {
                            app.addRelatedRecordForm.resetPanel();
                            app.addRelatedRecordForm.recordUri = uri;
                            app.addRelatedRecordForm.recordNumber(recNumber);
                            app.addRelatedRecordForm.recordTitle(title);
                            app.showOverlay(app.addRelatedRecordForm);
                        };
                    };
                    return AddRelatedRecordHandler;
                }());
                ActionHandlers.AddRelatedRecordHandler = AddRelatedRecordHandler;
            })(ActionHandlers = App.ActionHandlers || (App.ActionHandlers = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var ActionHandlers;
            (function (ActionHandlers) {
                "use strict";
                var RemoveFromUserLabelsHandler = (function () {
                    function RemoveFromUserLabelsHandler() {
                    }
                    RemoveFromUserLabelsHandler.getHandler = function (app) {
                        return function (uri, recNumber, title) {
                            app.removeFromUserLabelsForm.resetPanel();
                            app.removeFromUserLabelsForm.recordUri = uri;
                            app.removeFromUserLabelsForm.recordNumber(recNumber);
                            app.removeFromUserLabelsForm.recordTitle(title);
                            app.removeFromUserLabelsForm.updateQuery('stuckOn:record:' + uri);
                            app.showOverlay(app.removeFromUserLabelsForm);
                        };
                    };
                    return RemoveFromUserLabelsHandler;
                }());
                ActionHandlers.RemoveFromUserLabelsHandler = RemoveFromUserLabelsHandler;
            })(ActionHandlers = App.ActionHandlers || (App.ActionHandlers = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var ActionHandlers;
            (function (ActionHandlers) {
                "use strict";
                var AddToUserLabelHandler = (function () {
                    function AddToUserLabelHandler() {
                    }
                    AddToUserLabelHandler.getHandler = function (app) {
                        return function (uri, recNumber, title) {
                            app.addToUserLabelForm.resetPanel();
                            app.addToUserLabelForm.recordUri = uri;
                            app.addToUserLabelForm.recordNumber(recNumber);
                            app.addToUserLabelForm.recordTitle(title);
                            app.addToUserLabelForm.initializeRecordUri(uri);
                            app.showOverlay(app.addToUserLabelForm);
                        };
                    };
                    return AddToUserLabelHandler;
                }());
                ActionHandlers.AddToUserLabelHandler = AddToUserLabelHandler;
                var ShowThesaurus = (function () {
                    function ShowThesaurus() {
                    }
                    ShowThesaurus.getHandler = function (app) {
                        return function (thesaurusTitle) {
                            app.thesaurusSelectionPanel.setTitleDecorator(thesaurusTitle);
                            var recordFormPanel = app.trimBodyPanel.currentActiveTabPanel().createOrModifyRecordPanelRef;
                            if (recordFormPanel) {
                                var titlingMethodObj = recordFormPanel.dataEntryPanel.form().titlingMethod;
                                var keywordTitlingMethod = HPTRIM.Utils.EnumHelper.toValue(HP.HPTRIM.TitlingMethods, titlingMethodObj.Value);
                                app.thesaurusSelectionPanel.setTitlingMethod(keywordTitlingMethod);
                                app.showOverlay(app.thesaurusSelectionPanel);
                                setTimeout(function () {
                                    app.thesaurusSelectionPanel.keywordTreePanel.load();
                                    if (keywordTitlingMethod == HPTRIM.Utils.EnumHelper.toValue(HP.HPTRIM.TitlingMethods, 'Keyword_Descriptor')) {
                                        if (app.thesaurusSelectionPanel.selectedKeywords().length > 1) {
                                            var ele = $('.hp-remove').get(0);
                                            $(ele).css('display', 'none');
                                        }
                                    }
                                }, 500);
                            }
                        };
                    };
                    return ShowThesaurus;
                }());
                ActionHandlers.ShowThesaurus = ShowThesaurus;
            })(ActionHandlers = App.ActionHandlers || (App.ActionHandlers = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var ActionHandlers;
            (function (ActionHandlers) {
                "use strict";
                var SendToCheckinStyleHandler = (function () {
                    function SendToCheckinStyleHandler() {
                    }
                    SendToCheckinStyleHandler.getHandler = function (app) {
                        return function (uri, recNumber, title, recIcon) {
                            var objectDef = _.find(app.trimClient.getMainObjectDefinitions().definitions, function (def) {
                                return def.type.name == "CheckinStyle";
                            });
                            var displayCreatePanel = function (createPanel) {
                                createPanel.resetPanels(true);
                                var emptyDefaultFields = {};
                                var emptyCallback = function (uri) { };
                                app.trimBodyPanel.showNewMainObjectDataEntryPanel(createPanel, objectDef, emptyDefaultFields, emptyCallback);
                                var form = createPanel.createOrModifyMainObjectFormPanel.form();
                                var containerField = form.getField('CheckinStyleContainer', 'Name');
                                var nameField = form.getField('CheckinStyleName', 'Name');
                                var styleOwner = form.getField('CheckinStyleStyleOwner', 'Name');
                                form.clear();
                                if (containerField) {
                                    var record = new HP.HPTRIM.TrimBaseObject(HP.HPTRIM.BaseObjectTypes.Record, uri, recNumber, "", recIcon);
                                    containerField.setDefaultValue(record);
                                    containerField.isEditing(false);
                                }
                                if (nameField) {
                                    nameField.Value(title);
                                }
                                if (styleOwner) {
                                    var currentUser = app.trimClient.getDatabase().getCurrentUser();
                                    currentUser.hasIcon = true;
                                    currentUser.iconId = "locperson";
                                    styleOwner.setDefaultValue(currentUser);
                                    styleOwner.isEditing(false);
                                }
                                createPanel.errorAction = ActionHandlers.DisplayError.getHandler(app);
                            };
                            var createMainObjectPanel;
                            if (objectDef.CanAnybodyCreate && objectDef.DataEntryFormDefinition) {
                                createMainObjectPanel = new App.Panels.MainObject.CreateOrModifyMainObjectPanel(app.trimClient, objectDef, true);
                                displayCreatePanel(createMainObjectPanel);
                            }
                            else {
                                var cancelled = false;
                                app.completingOverlay.message(HPTRIM.Messages.web_loading);
                                app.completingOverlay.showingMessage(true);
                                app.completingOverlay.cancelHandler = function () {
                                    cancelled = true;
                                    app.hideOverlay();
                                };
                                app.showOverlay(app.completingOverlay);
                                app.trimClient.getAndProcessObjectDefinition(objectDef.Id, true, function (result) {
                                    if (cancelled) {
                                        return;
                                    }
                                    app.hideOverlay();
                                    if (result.ObjectDefs && result.ObjectDefs[0] && result.ObjectDefs[0].DataEntryFormDefinition && (result.ObjectDefs[0].DataEntryFormDefinition.length > 0)) {
                                        var rawFormDefs = result.ObjectDefs[0].DataEntryFormDefinition;
                                        var rawLatestForm = rawFormDefs[rawFormDefs.length - 1];
                                        objectDef.DataEntryFormDefinition = rawLatestForm;
                                        var createMainObjectPanel = new App.Panels.MainObject.CreateOrModifyMainObjectPanel(app.trimClient, objectDef, true);
                                        displayCreatePanel(createMainObjectPanel);
                                    }
                                });
                            }
                        };
                    };
                    return SendToCheckinStyleHandler;
                }());
                ActionHandlers.SendToCheckinStyleHandler = SendToCheckinStyleHandler;
            })(ActionHandlers = App.ActionHandlers || (App.ActionHandlers = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var ActionHandlers;
            (function (ActionHandlers) {
                "use strict";
                var ShowMainObjectHandler = (function () {
                    function ShowMainObjectHandler() {
                    }
                    ShowMainObjectHandler.getDefaultViewHandler = function (app) {
                        return function (type) {
                            var action = app.trimNavPanel.getActionByType(type);
                            app.trimNavPanel.setActionActive(action);
                            app.trimBodyPanel.showMainObjectPanel(type);
                        };
                    };
                    ShowMainObjectHandler.getSearchViewHandler = function (app) {
                        return function (type, searchString) {
                            app.trimBodyPanel.openPanelAndSearch(type, searchString);
                            var action = app.trimNavPanel.getActionByType(type);
                            if (action) {
                                app.trimNavPanel.setActionActive(action);
                            }
                            else {
                                return;
                            }
                        };
                    };
                    return ShowMainObjectHandler;
                }());
                ActionHandlers.ShowMainObjectHandler = ShowMainObjectHandler;
            })(ActionHandlers = App.ActionHandlers || (App.ActionHandlers = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var ActionHandlers;
            (function (ActionHandlers) {
                "use strict";
                var GetNotesHandler = (function () {
                    function GetNotesHandler() {
                    }
                    GetNotesHandler.getHandler = function (app, trimClient) {
                        return function (objectType, propertyName, uri, canAddtoNotes, notesInsertStyle, annotateWhenReadOnly, annotateOnly) {
                            app.notesOverlay.resetPanel();
                            app.notesOverlay.uri = uri;
                            app.notesOverlay.notesPropertyName = propertyName;
                            app.notesOverlay.objectType = objectType;
                            var isEnabled_existingNotesField = false;
                            var isEnabled_newNotesField = false;
                            var isSet_setToTop = false;
                            var isEnabled_setToTopCheckBox = false;
                            var isSet_setToBottom = false;
                            var isEnabled_setToBottomCheckBox = false;
                            var isTop_NotesInsertStyle = false;
                            var woteva_NotesInsertStyle = false;
                            var objectTypeIsRecord = objectType.name == HPTRIM.BaseObjectTypes.Record.name;
                            if (objectTypeIsRecord) {
                                var notesInsertStyleValue = HP.HPTRIM.Utils.EnumHelper.toValue(HP.HPTRIM.NotesInsertStyles, notesInsertStyle.Value);
                                if (notesInsertStyleValue == HPTRIM.NotesInsertStyles.Wherever) {
                                    woteva_NotesInsertStyle = true;
                                }
                                else if (notesInsertStyleValue == HPTRIM.NotesInsertStyles.AtStart) {
                                    isTop_NotesInsertStyle = true;
                                }
                                else if (notesInsertStyleValue == HPTRIM.NotesInsertStyles.AtBottom) {
                                    isTop_NotesInsertStyle = false;
                                }
                                app.notesOverlay.noteInsertStyle(notesInsertStyle);
                            }
                            if (trimClient.canModifyRecord()
                                || canAddtoNotes
                                || (objectTypeIsRecord && annotateWhenReadOnly['Value'])) {
                                isEnabled_newNotesField = true;
                                if (woteva_NotesInsertStyle || trimClient.isRecordAdmin()) {
                                    if (notesInsertStyleValue !== undefined) {
                                        if (notesInsertStyleValue == HPTRIM.NotesInsertStyles.Wherever) {
                                            isEnabled_setToTopCheckBox = true;
                                            isEnabled_setToBottomCheckBox = true;
                                        }
                                    }
                                    else {
                                        isEnabled_setToTopCheckBox = true;
                                        isEnabled_setToBottomCheckBox = true;
                                    }
                                }
                                if (isTop_NotesInsertStyle) {
                                    isSet_setToTop = true;
                                    isSet_setToBottom = false;
                                }
                                else {
                                    isSet_setToTop = false;
                                    isSet_setToBottom = true;
                                }
                            }
                            else {
                                app.notesOverlay.addUserStampCheckBox.enabled(false);
                                app.notesOverlay.addUserStampCheckBox.decoratorVisible(false);
                            }
                            app.notesOverlay.existingNotesField.enabled(isEnabled_existingNotesField);
                            app.notesOverlay.newNotesField.enabled(isEnabled_newNotesField);
                            app.notesOverlay.setToTop(isSet_setToTop);
                            app.notesOverlay.setToTopCheckBox.enabled(isEnabled_setToTopCheckBox);
                            app.notesOverlay.setToBottom(isSet_setToBottom);
                            app.notesOverlay.setToBottomCheckBox.enabled(isEnabled_setToBottomCheckBox);
                            var request = new HPTRIM.TrimBaseObjectRequest(trimClient, new HPTRIM.TrimBaseObject(objectType, uri), propertyName);
                            var promise = request.doRequest().done(function (result) {
                                if (result.Results && result.Results.length > 0) {
                                    var result = result.Results[0];
                                    app.notesOverlay.existingNotes(result[propertyName].Value);
                                }
                            }).fail(function () {
                            });
                            app.showOverlay(app.notesOverlay);
                        };
                    };
                    return GetNotesHandler;
                }());
                ActionHandlers.GetNotesHandler = GetNotesHandler;
            })(ActionHandlers = App.ActionHandlers || (App.ActionHandlers = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var ActionHandlers;
            (function (ActionHandlers) {
                "use strict";
                var GetViewCommentsHandler = (function () {
                    function GetViewCommentsHandler() {
                    }
                    GetViewCommentsHandler.getHandler = function (app, trimClient, recordsDetailComponent) {
                        return function (objectType, uri, infoObject) {
                            app.viewCommentsOverlay.resetPanel();
                            app.viewCommentsOverlay.setRecordDetailObject(infoObject);
                            app.viewCommentsOverlay.wireUpViewCommentsPanel(recordsDetailComponent);
                            app.viewCommentsOverlay.uri = uri;
                            app.viewCommentsOverlay.objectType = objectType;
                            app.showCommentsOverlay(app.viewCommentsOverlay);
                        };
                    };
                    return GetViewCommentsHandler;
                }());
                ActionHandlers.GetViewCommentsHandler = GetViewCommentsHandler;
            })(ActionHandlers = App.ActionHandlers || (App.ActionHandlers = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var ActionHandlers;
            (function (ActionHandlers) {
                "use strict";
                var AddNotesHandler = (function () {
                    function AddNotesHandler() {
                    }
                    AddNotesHandler.getHandler = function (app, trimClient) {
                        return function (objectType, parentObject, canAddtoNotes, notesInsertStyle, annotateWhenReadOnly, annotateOnly) {
                            app.addNotesOverlay.resetPanel();
                            app.addNotesOverlay.objectType = objectType;
                            app.addNotesOverlay.parentObject = parentObject;
                            var isEnabled_existingNotesField = false;
                            var isEnabled_newNotesField = true;
                            var isSet_setToTop = false;
                            var isEnabled_setToTopCheckBox = true;
                            var isSet_setToBottom = true;
                            var isEnabled_setToBottomCheckBox = true;
                            var isTop_NotesInsertStyle = true;
                            var woteva_NotesInsertStyle = true;
                            var objectTypeIsRecord = objectType.name == HPTRIM.BaseObjectTypes.Record.name;
                            if (objectTypeIsRecord) {
                                var notesInsertStyleValue = HP.HPTRIM.Utils.EnumHelper.toValue(HP.HPTRIM.NotesInsertStyles, notesInsertStyle.Value);
                                if (notesInsertStyleValue == HPTRIM.NotesInsertStyles.Wherever) {
                                    woteva_NotesInsertStyle = true;
                                }
                                else if (notesInsertStyleValue == HPTRIM.NotesInsertStyles.AtStart) {
                                    isTop_NotesInsertStyle = true;
                                }
                                else if (notesInsertStyleValue == HPTRIM.NotesInsertStyles.AtBottom) {
                                    isTop_NotesInsertStyle = false;
                                }
                                app.addNotesOverlay.noteInsertStyle(notesInsertStyle);
                            }
                            app.addNotesOverlay.addUserStampCheckBox.enabled(true);
                            app.addNotesOverlay.addUserStampCheckBox.decoratorVisible(true);
                            app.addNotesOverlay.existingNotesField.enabled(isEnabled_existingNotesField);
                            app.addNotesOverlay.newNotesField.enabled(isEnabled_newNotesField);
                            app.addNotesOverlay.setToTop(isSet_setToTop);
                            app.addNotesOverlay.setToTopCheckBox.enabled(isEnabled_setToTopCheckBox);
                            app.addNotesOverlay.setToBottom(isSet_setToBottom);
                            app.addNotesOverlay.setToBottomCheckBox.enabled(isEnabled_setToBottomCheckBox);
                            app.addNotesOverlay.existingNotes(parentObject.Value());
                            app.showOverlay(app.addNotesOverlay);
                        };
                    };
                    return AddNotesHandler;
                }());
                ActionHandlers.AddNotesHandler = AddNotesHandler;
            })(ActionHandlers = App.ActionHandlers || (App.ActionHandlers = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var ActionHandlers;
            (function (ActionHandlers) {
                "use strict";
                var AddToNotesInCommentHandler = (function () {
                    function AddToNotesInCommentHandler() {
                    }
                    AddToNotesInCommentHandler.getHandler = function (app, trimClient) {
                        return function (objectType, parentObject, canAddtoNotes, notesInsertStyle, annotateWhenReadOnly, annotateOnly) {
                            app.commentAddNotesOverlay.resetPanel();
                            app.commentAddNotesOverlay.objectType = objectType;
                            app.commentAddNotesOverlay.parentObject = parentObject;
                            var isEnabled_existingNotesField = false;
                            var isEnabled_newNotesField = true;
                            var isSet_setToTop = false;
                            var isEnabled_setToTopCheckBox = true;
                            var isSet_setToBottom = true;
                            var isEnabled_setToBottomCheckBox = true;
                            var isTop_NotesInsertStyle = true;
                            var woteva_NotesInsertStyle = true;
                            var objectTypeIsRecord = objectType.name == HPTRIM.BaseObjectTypes.Record.name;
                            if (objectTypeIsRecord) {
                                var notesInsertStyleValue = HP.HPTRIM.Utils.EnumHelper.toValue(HP.HPTRIM.NotesInsertStyles, notesInsertStyle.Value);
                                if (notesInsertStyleValue == HPTRIM.NotesInsertStyles.Wherever) {
                                    woteva_NotesInsertStyle = true;
                                }
                                else if (notesInsertStyleValue == HPTRIM.NotesInsertStyles.AtStart) {
                                    isTop_NotesInsertStyle = true;
                                }
                                else if (notesInsertStyleValue == HPTRIM.NotesInsertStyles.AtBottom) {
                                    isTop_NotesInsertStyle = false;
                                }
                                app.commentAddNotesOverlay.noteInsertStyle(notesInsertStyle);
                            }
                            app.commentAddNotesOverlay.addUserStampCheckBox.enabled(true);
                            app.commentAddNotesOverlay.addUserStampCheckBox.decoratorVisible(true);
                            app.commentAddNotesOverlay.existingNotesField.enabled(isEnabled_existingNotesField);
                            app.commentAddNotesOverlay.newNotesField.enabled(isEnabled_newNotesField);
                            app.commentAddNotesOverlay.setToTop(isSet_setToTop);
                            app.commentAddNotesOverlay.setToTopCheckBox.enabled(isEnabled_setToTopCheckBox);
                            app.commentAddNotesOverlay.setToBottom(isSet_setToBottom);
                            app.commentAddNotesOverlay.setToBottomCheckBox.enabled(isEnabled_setToBottomCheckBox);
                            app.commentAddNotesOverlay.existingNotes(parentObject.Value());
                            app.showOverlay(app.commentAddNotesOverlay);
                        };
                    };
                    return AddToNotesInCommentHandler;
                }());
                ActionHandlers.AddToNotesInCommentHandler = AddToNotesInCommentHandler;
            })(ActionHandlers = App.ActionHandlers || (App.ActionHandlers = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var ActionHandlers;
            (function (ActionHandlers) {
                "use strict";
                var ShowShowRecRevisionsHandler = (function () {
                    function ShowShowRecRevisionsHandler() {
                    }
                    ShowShowRecRevisionsHandler.getHandler = function (app, searchString) {
                        if (!searchString) {
                            return function (id, uri) {
                            };
                        }
                        else {
                            return function () {
                            };
                        }
                    };
                    ShowShowRecRevisionsHandler.getSearchHandler = function (app, searchString) {
                        return function () {
                        };
                    };
                    return ShowShowRecRevisionsHandler;
                }());
                ActionHandlers.ShowShowRecRevisionsHandler = ShowShowRecRevisionsHandler;
            })(ActionHandlers = App.ActionHandlers || (App.ActionHandlers = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var ActionHandlers;
            (function (ActionHandlers) {
                "use strict";
                var ShowMenuObjectHandler = (function () {
                    function ShowMenuObjectHandler() {
                    }
                    ShowMenuObjectHandler.getDefaultViewHandler = function (app) {
                        return function (type) {
                            if (type != undefined) {
                                var action = app.trimNavPanel.getActionByType(type);
                                app.trimNavPanel.setActionActive(action);
                                app.trimMenuNavPanel.setActionActive(action);
                                app.trimBodyPanel.showMainObjectPanel(type);
                                app.trimMenuNavPanel.panelSelected(action.caption.toUpperCase());
                            }
                        };
                    };
                    ShowMenuObjectHandler.getSearchViewHandler = function (app) {
                        return function (type, searchString) {
                            app.trimBodyPanel.openPanelAndSearch(type, searchString);
                            var action = app.trimNavPanel.getActionByType(type);
                            if (action) {
                                app.trimNavPanel.setActionActive(action);
                            }
                            else {
                                return;
                            }
                        };
                    };
                    ShowMenuObjectHandler.getSelectedViewHandler = function (app) {
                        return function (type, trayItem, trayPage) {
                            var action = app.trimNavPanel.getActionByType(type);
                            app.trimNavPanel.setActionActive(action);
                            app.trimMenuNavPanel.setActionActive(action);
                            app.trimBodyPanel.showSelectedSubMainObjecPanel(type, trayItem, trayPage);
                        };
                    };
                    return ShowMenuObjectHandler;
                }());
                ActionHandlers.ShowMenuObjectHandler = ShowMenuObjectHandler;
            })(ActionHandlers = App.ActionHandlers || (App.ActionHandlers = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var ActionHandlers;
            (function (ActionHandlers) {
                "use strict";
                var ManualNumberingHandler = (function () {
                    function ManualNumberingHandler() {
                    }
                    ManualNumberingHandler.getHandler = function (app) {
                        return function (recordDataEntryPanel) {
                            app.manualNumberingOverlay.setRecordNumberProperties(recordDataEntryPanel);
                            if (app.manualNumberingOverlay.recordLastNumber() == undefined && recordDataEntryPanel.recordLastNumber != undefined) {
                                app.manualNumberingOverlay.recordLastNumber(recordDataEntryPanel.recordLastNumber);
                            }
                            app.showOverlay(app.manualNumberingOverlay);
                        };
                    };
                    ManualNumberingHandler.updateHandler = function (app) {
                        return function (updatedLastRecordNumber) {
                            updatedLastRecordNumber = app.manualNumberingOverlay.recordLastNumber();
                        };
                    };
                    ManualNumberingHandler.finishhandler = function (app) {
                        return function () {
                            app.hideOverlay();
                        };
                    };
                    return ManualNumberingHandler;
                }());
                ActionHandlers.ManualNumberingHandler = ManualNumberingHandler;
            })(ActionHandlers = App.ActionHandlers || (App.ActionHandlers = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            "use strict";
            var TRIMApp = (function (_super) {
                __extends(TRIMApp, _super);
                function TRIMApp(trimClient) {
                    var _this = this;
                    _super.call(this);
                    this.navOrderPanelIds = [
                        "Home",
                        "Records",
                        "Request",
                        "Location",
                        "Workflow",
                        "SavedSearch",
                        "Todoitem",
                        "CheckinStyle",
                        "Consignmentapprover",
                        "UserLabel",
                        "Recordaction"
                    ];
                    this.historyCaption = HPTRIM.Messages.web_HPRM;
                    this.uploadPending = false;
                    this.showingSearchOverlay = ko.observable(false);
                    this.activeFeatures = [];
                    this.hidingOverlay = false;
                    this.pendingShowOverlayMethods = [];
                    var me = this;
                    this.templateName('templates/Framework/Layouts/AppContainerPanel');
                    this.cssClass('as-spa');
                    HP.HPTRIM.Utils.KeyboardMap.Setup();
                    this.name = "TrimAPP";
                    this.latestSearchQuery = "";
                    this.trimClient = trimClient;
                    this.setupMixins();
                    this.mainObjectDefinitions = trimClient.getMainObjectDefinitions();
                    this.mainObjectDefinitions = this.trimClient.getMainObjectDefinitions();
                    if (this.mainObjectDefinitions) {
                        this.mainObjectDefinitions.removeUnsupportedNavTasks(this.getActiveCustomTypes());
                    }
                    this.docViewer = new HP.HPTRIM.App.Panels.Framework.DocumentViewerPanel(trimClient);
                    this.renditionDocViewer = new HP.HPTRIM.App.Panels.Framework.DocumentRenditionViewerPanel(trimClient);
                    this.trimDynamicSearchOverlay = new App.Panels.HPRMModalOverlay([], true, function () { me.showingSearchOverlay(true); }, function () { me.showingSearchOverlay(false); }, "hprm-dynamic-search-modal");
                    this.overlaySearchStack = ko.observableArray([]);
                    this.rootSearchPanel = ko.observable(null);
                    var postTo = HPRMWebConfig.virtualDirectory + "Api/FileUpload/PostFormData";
                    var postToQueryString = "?locUri=" + this.trimClient.getDatabase().getCurrentUser().Uri;
                    this.completeUrl = postTo + postToQueryString;
                    this.fileUploadProvider = function () {
                        if (_this.uploadPending) {
                            _this.uploadPending = false;
                            return _this.trimFileUploadComponent;
                        }
                        var trimFileUploadComponent = new HP.HPTRIM.App.Widgets.TrimFileUploadComponent({ url: _this.completeUrl, autoUpload: true, trimClient: _this.trimClient });
                        trimFileUploadComponent.templateName('templates/Widgets/TRIMFileUpload');
                        return trimFileUploadComponent;
                    };
                    this.trimBodyPanel = new App.Panels.Framework.BodyPanel(this.trimClient, this.fileUploadProvider, this.mainObjectDefinitions.definitions, this.mainObjectDefinitions.childDefinitions, this.getSupportedTypes());
                    this.activeFeatures = this.trimClient.getDatabase().activeFeatures();
                    this.trimNavPanel = new App.Panels.Framework.AppNavPanel(this.trimClient, this.mainObjectDefinitions.definitions, this.navOrderPanelIds, this.activeFeatures);
                    this.trimMenuNavPanel = new App.Panels.Framework.MenuNavPanel(this.trimClient, this.mainObjectDefinitions.definitions, this.navOrderPanelIds, this.activeFeatures);
                    this.trimMenuNavPanel.templateName('templates/Framework/MenuPanel');
                    this.trimGlobalSearchPanel = new App.Panels.Framework.GlobalSearchPanel(this.trimClient, this.getSupportedTypes());
                    this.showSearchBuilder = function (objectType, existingQuery, searchOptionFilterPanel, title, callback) {
                        var query = "";
                        if (existingQuery) {
                            query = existingQuery;
                        }
                        else {
                            query = _this.latestSearchQuery;
                        }
                        var mainObjectDef = me.mainObjectDefinitions.getMainObjectDef(objectType);
                        var searchEditor = new App.Panels.SearchEditor.SearchEditorPanel(trimClient, objectType, mainObjectDef, searchOptionFilterPanel);
                        if (title) {
                            searchEditor.title(title);
                        }
                        if (me.showingSearchOverlay()) {
                            var currentOverlaySearchPanels = _this.overlaySearchStack();
                            var activePanel = me.trimDynamicSearchOverlay.activePanel();
                            var getLatestChild = function (activePanel) {
                                if (activePanel.childPanel()) {
                                    return getLatestChild(activePanel.childPanel());
                                }
                                return activePanel;
                            };
                            var currentChildPanel = getLatestChild(activePanel);
                            currentOverlaySearchPanels.push(currentChildPanel);
                            _this.overlaySearchStack(currentOverlaySearchPanels);
                            currentChildPanel.childPanel(searchEditor);
                            searchEditor.setIsChild();
                        }
                        else {
                            me.rootSearchPanel(searchEditor);
                        }
                        searchEditor.dismiss = function () {
                            if (_this.overlaySearchStack().length > 0) {
                                var currentOverlaySearchPanels = _this.overlaySearchStack();
                                var searchEditorPanelToRender = currentOverlaySearchPanels.pop();
                                _this.overlaySearchStack(currentOverlaySearchPanels);
                                searchEditorPanelToRender.childPanel(null);
                                searchEditorPanelToRender.initialiseView();
                            }
                            else {
                                me.trimDynamicSearchOverlay.hideModal();
                                me.rootSearchPanel(null);
                            }
                        };
                        var searchHandler = App.ActionHandlers.SearchHandler.getHandler(_this);
                        searchEditor.searchBuilderPanel.executeSearch = function (queryString, uri, objectType, filterString, sortString, searchOptions) {
                            var alreadyExistTabIndex = me.trimBodyPanel.checkIsTabAlreadyExist(queryString, objectType);
                            if (alreadyExistTabIndex != -1) {
                                me.trimBodyPanel.select(me.trimBodyPanel.tabPanelList()[alreadyExistTabIndex]);
                            }
                            else {
                                me.trimGlobalSearchPanel.updateQueryFieldWithoutSearching(queryString);
                                if (_this.trimGlobalSearchPanel.showFilterButton()) {
                                    var filters = searchEditor.searchFilterPanel.filterList();
                                    me.trimGlobalSearchPanel.currentFilterPanelRef.filterList(filters);
                                    me.trimGlobalSearchPanel.currentFilter(filterString);
                                }
                                me.trimGlobalSearchPanel.currentSortPanelRef.setSortString(sortString);
                                me.trimGlobalSearchPanel.currentSort(sortString);
                                if (objectType == HPTRIM.BaseObjectTypes.Record || objectType == HPTRIM.BaseObjectTypes.Activity) {
                                    me.trimGlobalSearchPanel.currentSearchOptionFilterRef.setOptionString(searchOptions);
                                    me.trimGlobalSearchPanel.currentSearchOptions(searchOptions);
                                }
                                searchHandler(queryString, uri, objectType, filterString, sortString, searchOptions);
                            }
                            searchEditor.dismiss();
                        };
                        searchEditor.searchBuilderPanel.setQuery(query);
                        if (callback) {
                            searchEditor.searchBuilderPanel.callback = function (query, filter, sort, purpose) {
                                searchEditor.dismiss();
                                callback(query, filter, sort, purpose);
                            };
                            searchEditor.searchBuilderPanel.submitCaption(HPTRIM.Messages.web_searchUpdateQuery);
                        }
                        searchEditor.searchBuilderPanel.editSubQuery = _this.showSearchBuilder;
                        searchEditor.searchBuilderPanel.dismiss = searchEditor.dismiss;
                        me.trimDynamicSearchOverlay.activatePanel(me.rootSearchPanel());
                        me.trimDynamicSearchOverlay.showModal();
                        me.giveOverlayFocus(me.rootSearchPanel().id);
                        var renderClauseFinder = function () {
                            if (searchEditor.clauseFinder.isRendered()) {
                                searchEditor.clauseFinder.toggleView(HP.HPTRIM.App.Panels.SearchEditor.SearchClausesView.ByCategory, true);
                            }
                            else {
                                setTimeout(renderClauseFinder, 100);
                            }
                        };
                        renderClauseFinder();
                    };
                    this.trimGlobalSearchPanel.showSearchEditor = this.showSearchBuilder;
                    this.panels([me.trimBodyPanel, me.trimGlobalSearchPanel, me.trimMenuNavPanel]);
                    this.trimFileUploadComponent = new HP.HPTRIM.App.Widgets.TrimFileUploadComponent({ url: this.completeUrl, autoUpload: true, trimClient: this.trimClient });
                    this.trimFileUploadComponent.templateName('templates/Widgets/TRIMFileUpload');
                    this.recordViewOverlay = new App.Panels.RecordDetails.RecordViewOverlayPanel(trimClient);
                    this.recordViewRenditionOverlay = new App.Panels.RecordDetails.RecordViewRenditionOverlayPanel(trimClient);
                    this.savedSearchForm = new App.Panels.Plugins.SavedSearchForm(this.trimClient);
                    this.locationForm = ko.observable(new App.Panels.Plugins.LocationForm());
                    this.checkInForm = new App.Panels.Plugins.CheckInForm(this.trimClient, this);
                    this.reassignActivityForm = new App.Panels.Plugins.ReassignActivityForm(this.trimClient);
                    this.uncompleteActivityForm = new App.Panels.Plugins.UncompleteActivityForm();
                    this.confirmForm = new App.Panels.Plugins.ConfirmForm();
                    this.createAdditionRequestForm = new App.Panels.Plugins.CreateAdditionalRequestForm(this.trimClient);
                    this.propertiesSelectorForm = new App.Widgets.ObjectPropertiesSelectorForm(this.trimClient);
                    this.commandSelectorForm = new App.Widgets.CommandSelectorOverlay(this.trimClient);
                    this.mainObjectUpdateTaskPanel = new App.Panels.Plugins.MainObjectUpdateTaskForm(this.trimClient);
                    this.formSearchOverlay = new App.Panels.FormSearchPanel(this.trimClient);
                    this.multiFileUploadPanel = new App.Panels.MultiFileUploadPanel(this.trimClient, this.trimFileUploadComponent);
                    this.removeContactOverlay = new App.Panels.Plugins.RemoveContactForm(this.trimClient);
                    this.removeRelatedRecordForm = new App.Panels.Plugins.RemoveRelatedRecordForm(this.trimClient);
                    this.addRelatedRecordForm = new App.Panels.Plugins.AddRelatedRecordForm(this.trimClient);
                    this.notesOverlay = new App.Panels.Plugins.NotesForm(this.trimClient);
                    this.viewCommentsOverlay = new App.Panels.Plugins.ViewCommentsForm(this.trimClient);
                    this.recordActionsComponentOverlay = new App.Panels.Plugins.RecordActionsOverlay(this.trimClient);
                    this.recordDocumentsComponentOverlay = new App.Panels.Plugins.RecordDocumentsOverlay(this.trimClient);
                    this.addNotesOverlay = new App.Panels.Plugins.AddNotesForm(this.trimClient);
                    this.commentAddNotesOverlay = new App.Panels.Plugins.AddNotesForm(this.trimClient);
                    this.recordSecurityAccessOverlay = new App.Panels.Plugins.RecordSecurityAccessControlForm(this.trimClient);
                    this.addToUserLabelForm = new App.Panels.Plugins.AddToUserLabelForm(this.trimClient);
                    this.thesaurusSelectionPanel = new App.Panels.Plugins.KeywordSelectOverlay(this.trimClient);
                    this.removeFromUserLabelsForm = new App.Panels.Plugins.RemoveFromUserLabelsForm(this.trimClient);
                    this.notificationWindow = new HP.HPTRIM.App.Widgets.TrimNotificationWindow();
                    this.manualNumberingOverlay = new App.Panels.Plugins.ManualNumberingForm(this.trimClient);
                    this.completingOverlay = new App.Panels.Plugins.CompletingOperationOverlay(this.trimClient);
                    this.warningOnOperationOverlay = new App.Panels.Plugins.WarningOnOperationOverlay();
                    this.errorOnOperationOverlay = new App.Panels.Plugins.ErrorOnOperationOverlay();
                    this.progressWindow = new HP.HPTRIM.App.Widgets.TrimProgressNotificationWindow();
                    this.multipleJurisdictionPanel = new App.Panels.MultipleJurisdictionPanel(this.trimClient);
                    this.multipleLookupItemPanel = new App.Panels.MultipleLookupItemPanel(this.trimClient);
                    this.customTaskList = [];
                    this.customTaskList.push(new App.Panels.Plugins.RecordSetAssigneeForm(this.trimClient));
                    this.customTaskList.push(new App.Panels.Plugins.RecordSetContainerForm(this.trimClient));
                    this.customTaskList.push(new App.Panels.Plugins.RecordSetHomeLocationForm(this.trimClient));
                    this.customTaskList.push(new App.Panels.Plugins.RecordMakeRequest(this.trimClient));
                    this.customTaskList.push(new App.Panels.Plugins.ModifyRecordAdditionalFieldsPanel(this.trimClient));
                    this.customTaskList.push(new App.Panels.Plugins.RecordAttachActionForm(this.trimClient));
                    this.customTaskList.push(new App.Panels.Plugins.AddToUserLabelForm(this.trimClient));
                    this.customTaskList.push(new App.Panels.Plugins.RemoveFromUserLabelsForm(this.trimClient));
                    this.customTaskList.push(new App.Panels.Plugins.RecordMakeFinal(this.trimClient));
                    this.customTaskList.push(new App.Panels.Plugins.RecordSecurityAccessControlForm(this.trimClient));
                    var custRecordStartReviewAuthorizerForm = new App.Panels.Plugins.RecordStartReviewAuthorizerForm(this.trimClient);
                    var wireUpViewDocumentPanel = function (recordDetailsComponent) {
                        me.hideOverlay();
                        custRecordStartReviewAuthorizerForm.handleViewClick = App.ActionHandlers.HandleDetailComponentViewClickHandler.getHandler(me, recordDetailsComponent);
                    };
                    custRecordStartReviewAuthorizerForm.wireUpViewDocumentPanel = wireUpViewDocumentPanel;
                    custRecordStartReviewAuthorizerForm.updateCallback = function (infoObject, task) {
                        me.trimBodyPanel.currentActiveTabPanel().recordsPanelRef.recordsDetailComponent.handleUpdateDocumentReviewMenu(infoObject, task);
                        me.trimBodyPanel.currentActiveTabPanel().recordsPanelRef.recordsDetailComponent.showMessage(task.successMessage);
                    };
                    this.customTaskList.push(custRecordStartReviewAuthorizerForm);
                    this.showingOverlay = ko.observable(false);
                    this.trimDynamicOverlay = ko.observable(new App.Panels.HPRMModalOverlay([], true, function () { me.showingOverlay(true); }, function () { me.showingOverlay(false); }));
                    this.overlayStack = ko.observableArray([]);
                    var overlayCancelHandler = function () {
                        me.hideOverlay();
                    };
                    var overlayCommentsCancelHandler = function () {
                        me.hideCommentsOverlay();
                        me.rootSearchPanel(null);
                    };
                    me.commandSelectorForm.closeBehaviour = overlayCancelHandler;
                    me.propertiesSelectorForm.closeBehaviour = function () {
                        overlayCancelHandler();
                    };
                    me.warningHandler = function (title, warnings, continueUpdate, warningBody) {
                        var continueCallback = function () { _this.hideOverlay(), continueUpdate(); };
                        var cancelCallback = function () {
                            _this.hideOverlay();
                            var currentOverlay = _this.trimDynamicOverlay().activePanel();
                            if (currentOverlay == _this.completingOverlay) {
                                _this.hideOverlay();
                            }
                        };
                        _this.warningOnOperationOverlay.setUp(title, warnings, continueCallback, cancelCallback, warningBody);
                        _this.showOverlay(_this.warningOnOperationOverlay);
                    };
                    me.errorHandler = function (title, rawError) {
                        var errorMessage = HPTRIM.Messages.web_error;
                        if (rawError) {
                            if (rawError.ResponseStatus && rawError.ResponseStatus.Errors && rawError.ResponseStatus && rawError.ResponseStatus.Errors.length > 0) {
                                var errors = rawError.ResponseStatus.Errors;
                                var badError = _.find(errors, function (error) {
                                    return (error.Meta && error.Meta.Bad == "True");
                                });
                                if (badError) {
                                    errorMessage = badError.Message;
                                }
                            }
                            else if (rawError.ResponseStatus && rawError.ResponseStatus.Message) {
                                errorMessage = rawError.ResponseStatus.Message;
                            }
                        }
                        var confirmCallback = function () {
                            me.hideOverlay();
                            var currentOverlay = me.trimDynamicOverlay().activePanel();
                            if (currentOverlay == me.completingOverlay) {
                                me.hideOverlay();
                            }
                        };
                        me.errorOnOperationOverlay.setUp(title, errorMessage, confirmCallback);
                        me.showOverlay(me.errorOnOperationOverlay);
                    };
                    me.showError = function (message) {
                        var displayErrorMethod = App.ActionHandlers.DisplayError.getHandler(me);
                        displayErrorMethod(message);
                    };
                    me.manualNumberingHandler = HP.HPTRIM.App.ActionHandlers.ManualNumberingHandler.getHandler(this);
                    me.manualNumberingCompletedHandler = HP.HPTRIM.App.ActionHandlers.ManualNumberingHandler.finishhandler(this);
                    this.showCustomTaskPanel = function (infoObject, updateTask, executeTask, uriArray) {
                        var panel = _.find(_this.customTaskList, function (currentCustomPanel) {
                            return currentCustomPanel.appliesToTask(updateTask.objectType, updateTask.id);
                        });
                        if (panel) {
                            panel.resetPanel();
                            panel.currentTask = updateTask;
                            panel.executeTask = executeTask;
                            panel.prepareForm(updateTask.id);
                            panel.setInfoObject(infoObject, uriArray);
                            panel.cancelHandler = overlayCancelHandler;
                            me.showOverlay(panel);
                        }
                    };
                    this.recordActionsComponentOverlay.actionsComponent.checkActionsVisible = function () {
                        if (_this.trimDynamicOverlay().panels().length == 0) {
                            _this.trimDynamicOverlay().activatePanel(_this.recordActionsComponentOverlay);
                        }
                    };
                    var actionCmp = this.recordActionsComponentOverlay.actionsComponent;
                    actionCmp.errorHandler = this.errorHandler;
                    actionCmp.dismiss = overlayCancelHandler;
                    actionCmp.search = HP.HPTRIM.App.ActionHandlers.SearchHandler.getHandler(this);
                    actionCmp.warningHandler = this.warningHandler;
                    actionCmp.taskHandler = HP.HPTRIM.App.ActionHandlers.UpdateHandler.getHandler(this);
                    this.recordActionsComponentOverlay.updatePropertiesViewPanel = this.getUpdateViewPanelCode(this.recordActionsComponentOverlay.objectPropertiesPanel);
                    this.recordActionsComponentOverlay.objectPropertiesPanel.propertyOrFieldListView.searchCallback = App.ActionHandlers.SearchHandler.getHandler(me);
                    this.recordActionsComponentOverlay.objectPropertiesPanel.propertyOrFieldListView.showRecordPropertiesOverlay = function () { me.showPropertiesSelector(); };
                    var documentCmp = this.recordDocumentsComponentOverlay.actionsComponent;
                    documentCmp.errorHandler = this.errorHandler;
                    documentCmp.dismiss = overlayCancelHandler;
                    documentCmp.search = HP.HPTRIM.App.ActionHandlers.SearchHandler.getHandler(this);
                    documentCmp.warningHandler = this.warningHandler;
                    documentCmp.cancelHandler = overlayCancelHandler;
                    documentCmp.taskHandler = HP.HPTRIM.App.ActionHandlers.UpdateHandler.getHandler(this);
                    this.recordDocumentsComponentOverlay.updatePropertiesViewPanel = this.getUpdateViewPanelCode(this.recordDocumentsComponentOverlay.objectPropertiesPanel);
                    this.recordDocumentsComponentOverlay.objectPropertiesPanel.propertyOrFieldListView.searchCallback = App.ActionHandlers.SearchHandler.getHandler(me);
                    this.recordDocumentsComponentOverlay.objectPropertiesPanel.propertyOrFieldListView.showRecordPropertiesOverlay = function () { me.showPropertiesSelector(); };
                    documentCmp.checkDocumentReviewVisible = function () {
                        if (_this.trimDynamicOverlay().panels().length == 0) {
                            _this.trimDynamicOverlay().activatePanel(_this.recordDocumentsComponentOverlay);
                        }
                    };
                    documentCmp.updateCallback = function (infoObject, task) {
                        me.trimBodyPanel.currentActiveTabPanel().recordsPanelRef.recordsDetailComponent.handleUpdateDocumentReviewMenu(infoObject, task);
                        me.trimBodyPanel.currentActiveTabPanel().recordsPanelRef.recordsDetailComponent.showMessage(task.successMessage);
                    };
                    this.progressWindow.searchHandler = HP.HPTRIM.App.ActionHandlers.SearchHandler.getHandler(this);
                    me.formSearchOverlay.cancel = overlayCancelHandler;
                    me.formSearchOverlay.searchCallback = function (query) {
                        me.trimGlobalSearchPanel.searchField(query);
                        me.trimGlobalSearchPanel.search();
                        me.hideOverlay();
                    };
                    var savedSearchSuccessHandler = function () {
                        me.hideOverlay();
                    };
                    me.savedSearchForm.successCallback = savedSearchSuccessHandler;
                    me.savedSearchForm.cancelHandler = overlayCancelHandler;
                    me.uncompleteActivityForm.finishHandler = overlayCancelHandler;
                    me.checkInForm.cancelHandler = overlayCancelHandler;
                    me.checkInForm.finishHandler = overlayCancelHandler;
                    me.reassignActivityForm.dismiss = overlayCancelHandler;
                    me.confirmForm.cancelHandler = overlayCancelHandler;
                    me.confirmForm.dismissHandler = overlayCancelHandler;
                    me.warningOnOperationOverlay.dismissHandler = function () {
                        overlayCancelHandler();
                    };
                    me.mainObjectUpdateTaskPanel.cancelHandler = overlayCancelHandler;
                    me.removeContactOverlay.cancelHandler = overlayCancelHandler;
                    me.removeContactOverlay.saveHandler = App.ActionHandlers.DeleteChildrenObjectHandler.getHandler(me);
                    me.removeContactOverlay.callback = function () {
                        me.trimBodyPanel.currentActiveTabPanel().recordsPanelRef.recordsDetailComponent.showMessage(HP.HPTRIM.Messages.web_contactRemoved);
                    };
                    me.removeRelatedRecordForm.cancelHandler = overlayCancelHandler;
                    me.removeRelatedRecordForm.callback = function () {
                        me.trimBodyPanel.currentActiveTabPanel().recordsPanelRef.recordsDetailComponent.showMessage(HP.HPTRIM.Messages.web_udpatedSuccessfully);
                    };
                    me.removeRelatedRecordForm.saveHandler = App.ActionHandlers.DeleteChildrenObjectHandler.getHandler(me);
                    me.addRelatedRecordForm.cancelHandler = overlayCancelHandler;
                    me.addRelatedRecordForm.callback = function () {
                        me.trimBodyPanel.currentActiveTabPanel().recordsPanelRef.recordsDetailComponent.showMessage(HP.HPTRIM.Messages.web_udpatedSuccessfully);
                    };
                    me.addRelatedRecordForm.saveHandler = App.ActionHandlers.PerformUpdateTaskHandler.getHandler(me);
                    me.addRelatedRecordForm.warningHandler = me.warningHandler;
                    me.addRelatedRecordForm.errorHandler = me.errorHandler;
                    me.removeFromUserLabelsForm.cancelHandler = overlayCancelHandler;
                    me.removeFromUserLabelsForm.callback = function () {
                        me.trimBodyPanel.currentActiveTabPanel().recordsPanelRef.recordsDetailComponent.showMessage(HP.HPTRIM.Messages.web_udpatedSuccessfully);
                    };
                    me.removeFromUserLabelsForm.saveHandler = App.ActionHandlers.PerformUpdateTaskHandler.getHandler(me);
                    me.removeFromUserLabelsForm.warningHandler = me.warningHandler;
                    me.addToUserLabelForm.cancelHandler = overlayCancelHandler;
                    me.addToUserLabelForm.callback = function () {
                        me.trimBodyPanel.currentActiveTabPanel().recordsPanelRef.recordsDetailComponent.showMessage(HP.HPTRIM.Messages.web_udpatedSuccessfully);
                    };
                    me.addToUserLabelForm.saveHandler = App.ActionHandlers.PerformUpdateTaskHandler.getHandler(me);
                    me.multipleJurisdictionPanel.cancelHandler = overlayCancelHandler;
                    me.multipleLookupItemPanel.cancelHandler = overlayCancelHandler;
                    this.thesaurusSelectionPanel.hide = function () {
                        _this.hideOverlay();
                    };
                    me.notesOverlay.warningHandler = me.warningHandler;
                    me.notesOverlay.cancelHandler = overlayCancelHandler;
                    me.notesOverlay.finishHandler = overlayCancelHandler;
                    me.notesOverlay.updateObjectPropertiesPanel = function (trimObject) {
                        var uri = trimObject.Uri;
                        var objectType = trimObject.baseObjectType;
                        if (objectType == HPTRIM.BaseObjectTypes.Record) {
                            me.trimBodyPanel.currentActiveTabPanel().recordsPanelRef.recordsDetailComponent.updatePropertiesView(trimObject, null);
                        }
                        else if (objectType == HPTRIM.BaseObjectTypes.Activity || objectType == HPTRIM.BaseObjectTypes.Workflow) {
                            me.trimBodyPanel.currentActiveTabPanel().workflowPanelRef.updatePropertiesViewPanel(trimObject);
                        }
                        else {
                            var mainObjectPanel = me.trimBodyPanel.currentActiveTabPanel().mainObjectPanelRef;
                            mainObjectPanel.updatePropertiesViewPanel(trimObject);
                        }
                    };
                    me.viewCommentsOverlay.warningHandler = me.warningHandler;
                    me.viewCommentsOverlay.cancelHandler = overlayCommentsCancelHandler;
                    me.viewCommentsOverlay.finishHandler = overlayCommentsCancelHandler;
                    me.addNotesOverlay.warningHandler = me.warningHandler;
                    me.addNotesOverlay.cancelHandler = function () {
                        overlayCancelHandler();
                    };
                    me.addNotesOverlay.finishHandler = overlayCancelHandler;
                    me.commentAddNotesOverlay.warningHandler = me.warningHandler;
                    me.commentAddNotesOverlay.cancelHandler = function () {
                        overlayCancelHandler();
                        var currentSearchPanel = me.trimDynamicSearchOverlay.activePanel();
                        if (currentSearchPanel) {
                            $('#hprm-dynamic-search-modal').show();
                        }
                    };
                    me.commentAddNotesOverlay.finishHandler = overlayCancelHandler;
                    me.viewCommentsOverlay.showNotes = App.ActionHandlers.AddToNotesInCommentHandler.getHandler(me, me.trimClient);
                    me.viewCommentsOverlay.updateObjectPropertiesPanel = function (trimObject) {
                        var uri = trimObject.Uri;
                        var objectType = trimObject.baseObjectType;
                        if (objectType == HPTRIM.BaseObjectTypes.Record) {
                            me.trimBodyPanel.currentActiveTabPanel().recordsPanelRef.recordsDetailComponent.updatePropertiesView(trimObject, null);
                        }
                        else if (objectType == HPTRIM.BaseObjectTypes.Activity || objectType == HPTRIM.BaseObjectTypes.Workflow) {
                            me.trimBodyPanel.currentActiveTabPanel().workflowPanelRef.updatePropertiesViewPanel(trimObject);
                        }
                        else {
                            var mainObjectPanel = me.trimBodyPanel.currentActiveTabPanel().mainObjectPanelRef;
                            mainObjectPanel.updatePropertiesViewPanel(trimObject);
                        }
                    };
                    me.recordSecurityAccessOverlay.cancelHandler = overlayCancelHandler;
                    me.recordSecurityAccessOverlay.finishHandler = function (refresh) {
                        me.trimBodyPanel.currentActiveTabPanel().refreshCurrentItem();
                        overlayCancelHandler();
                    };
                    me.recordSecurityAccessOverlay.warningHandler = this.warningHandler;
                    me.manualNumberingOverlay.cancelHandler = overlayCancelHandler;
                    me.manualNumberingOverlay.finishHandler = function (refresh) {
                        overlayCancelHandler();
                    };
                    me.manualNumberingOverlay.updateHandler = function (result) {
                        var upperCaseNumber = result.toUpperCase();
                        me.recordDataEntryPanel.recordLongNumber = upperCaseNumber;
                        me.recordDataEntryPanel.form().recordLongNumber = upperCaseNumber;
                        me.recordDataEntryPanel.manualNumberingRequired(false);
                        me.recordDataEntryPanel.form().manualNumberingCompletedHandler = App.ActionHandlers.ManualNumberingHandler.finishhandler(me);
                        me.recordDataEntryPanel.form().submit();
                    };
                    this.trimHistoryHandler = function (historyState) {
                        if (historyState) {
                            if (historyState.title) {
                                window.document.title = historyState.title;
                            }
                            if (historyState.action_caption) {
                                me.trimNavPanel.setActionActive(me.trimNavPanel.getActionByName(historyState.action_caption));
                            }
                            var panel;
                            if (historyState.panel_id) {
                                var panelId = historyState.panel_id;
                                for (var i = 0; i < me.trimBodyPanel.panels().length; i++) {
                                    if (panelId === me.trimBodyPanel.panels()[i].id) {
                                        panel = me.trimBodyPanel.panels()[i];
                                        break;
                                    }
                                }
                            }
                            if (panel) {
                                if (panel.setContext && historyState.context) {
                                    panel.setContext(historyState.context);
                                }
                                me.trimBodyPanel.activatePanel(panel);
                            }
                            else {
                                me.trimBodyPanel.activatePanel(me.trimBodyPanel.dashBoardPanel);
                            }
                        }
                        else {
                            var pathname = window.location.hash;
                            var urlLocationString = pathname.substr(pathname.indexOf('#') + 1);
                            if (urlLocationString) {
                                var urlState = new HP.HPTRIM.History.TRIM_URLStateObject(urlLocationString);
                                _this.trimHistory.urlHandler(urlState);
                            }
                            else {
                                me.trimNavPanel.setActionActive(me.trimNavPanel.getActionByName(HP.HPTRIM.App.Panels.Framework.NavPanel.HOME_CAPTION));
                                me.trimBodyPanel.activatePanel(me.trimBodyPanel.dashBoardPanel);
                                window.document.title = HP.HPTRIM.Messages.web_HPRM;
                            }
                        }
                    };
                    this.wireUpTrimNavPanelObject();
                    this.wireUpTrimMenuPanelObject();
                    this.setupGlobalSearchPanelHandler();
                    this.showParameterisedSearch =
                        function (saveSearchDefinition, callback, type, filter, sort, searchOptions) {
                            var saveSearchDefinitionCopy = $.extend(true, {}, saveSearchDefinition);
                            var searchDefinition = {
                                SavedSearchFilterString: filter,
                                SavedSearchSortString: sort,
                                SavedSearchOptions: searchOptions,
                                SearchResultsProperties: saveSearchDefinitionCopy.SearchResultsProperties,
                                SearchStack: saveSearchDefinitionCopy.SearchStack
                            };
                            me.trimClient.getAndProcessSearchClauseDefinition(type.Name, function (result) {
                                var form = new HP.HPTRIM.Form.Search.ParameterisedSearchForm(me.trimClient, searchDefinition, type, result);
                                form.cancel = function () {
                                    me.hideOverlay();
                                };
                                form.callback = callback;
                                me.showOverlay(form);
                            });
                        };
                    this.setupRecordsPanelHandler();
                    this.setupTrimBodyPanelHandler();
                    this.setupDragDropFileUpload();
                    this.setupViewerPanels();
                    this.configureSubscriptions();
                    this.promptUserToSetDefaultTimezone();
                    this.setupOverlays();
                }
                TRIMApp.prototype.setupViewerPanels = function () {
                    var _this = this;
                    var me = this;
                    me.recordViewOverlay.revisionPanel.showConfirm = function (title, message, callback) {
                        me.confirmForm.setUp(title, message, function () { me.hideOverlay(); callback(); });
                        me.showOverlay(me.confirmForm);
                    };
                    me.recordViewOverlay.revisionPanel.showError = me.errorHandler;
                    var wireUpViewCommentsPanel = function (recordDetailsComponent) {
                        me.viewCommentsOverlay.handleViewClick = App.ActionHandlers.HandleDetailComponentViewClickHandler.getHandler(me, recordDetailsComponent);
                    };
                    var wireUpDocumentViewerPanel = function (recordDetailsComponent) {
                        _this.docViewer.handleRenditionViewClick = App.ActionHandlers.HandleShowRenditionViewClickHandler.getHandler(me, recordDetailsComponent);
                    };
                    var wireUpDocumentViewLookup = function (recordDetailsComponent) {
                        _this.hideOverlay();
                        _this.mainObjectUpdateTaskPanel.handleViewClick = App.ActionHandlers.HandleDetailComponentViewClickHandler.getHandler(me, recordDetailsComponent);
                    };
                    var wireUpDocumentRenditionViewerPanel = function (recordDetailsComponent) {
                        _this.renditionDocViewer.handleViewClick = App.ActionHandlers.HandleDetailComponentViewClickHandler.getHandler(me, recordDetailsComponent);
                    };
                    this.mainObjectUpdateTaskPanel.wireUpDocumentViewLookup = wireUpDocumentViewLookup;
                    this.docViewer.wireUpDocumentViewerPanel = wireUpDocumentViewerPanel;
                    this.renditionDocViewer.wireUpDocumentRenditionViewerPanel = wireUpDocumentRenditionViewerPanel;
                    this.viewCommentsOverlay.wireUpViewCommentsPanel = wireUpViewCommentsPanel;
                };
                TRIMApp.prototype.wireUpTrimNavPanelObject = function () {
                    var me = this;
                    var activatePanelHandler = function (action, panelToActivate) {
                        me.trimNavPanel.setActionActive(action);
                        me.trimBodyPanel.activatePanel(panelToActivate);
                    };
                    var me = this;
                    me.trimNavPanel.activatePanel = activatePanelHandler;
                    me.trimNavPanel.showHomeFunction = App.ActionHandlers.ShowHomeHandler.getHandler(me);
                    me.trimNavPanel.showRecordsFunction = App.ActionHandlers.ShowRecordHandler.getHandler(me);
                    me.trimNavPanel.showWorkflowFunction = App.ActionHandlers.ShowActivitiesHandler.getHandler(me);
                    me.trimNavPanel.showMainObjectPanel = App.ActionHandlers.ShowMainObjectHandler.getDefaultViewHandler(me);
                    me.trimNavPanel.onPostPanelSwitched = function () {
                        me.progressWindow.hideNotification();
                        $('#global-search-input').blur();
                    };
                };
                TRIMApp.prototype.wireUpTrimMenuPanelObject = function () {
                    var _this = this;
                    var me = this;
                    var activatePanelHandler = function (action, panelToActivate) {
                        me.trimNavPanel.setActionActive(action);
                        me.trimBodyPanel.activatePanel(panelToActivate);
                    };
                    var me = this;
                    me.trimMenuNavPanel.activatePanel = activatePanelHandler;
                    me.trimMenuNavPanel.showHomeFunction = App.ActionHandlers.ShowHomeHandler.getHandler(me);
                    me.trimMenuNavPanel.showRecordsFunction = App.ActionHandlers.ShowRecordHandler.getHandler(me);
                    me.trimMenuNavPanel.showWorkflowFunction = App.ActionHandlers.ShowActivitiesHandler.getHandler(me);
                    me.trimMenuNavPanel.actionHandler = App.ActionHandlers.ShowMenuObjectHandler.getDefaultViewHandler(me);
                    me.trimMenuNavPanel.showSelectedSubMenuHandler = App.ActionHandlers.ShowMenuObjectHandler.getSelectedViewHandler(me);
                    me.trimMenuNavPanel.addRecord = App.ActionHandlers.CreateNewRecordHandler.getHandler(me);
                    me.trimMenuNavPanel.showFileUploadManager = function () {
                        var fileUploadBodyTab = new HP.HPTRIM.App.Panels.Framework.BodyTab(me.multiFileUploadPanel, "File Upload Manager");
                        !_.contains(me.trimBodyPanel.tabPanelList(), fileUploadBodyTab);
                        {
                            me.trimBodyPanel.tabPanelList.push(fileUploadBodyTab);
                        }
                        me.trimBodyPanel.currentActiveTabPanel(fileUploadBodyTab);
                        me.multiFileUploadPanel.close = function () {
                            me.trimBodyPanel.remove(fileUploadBodyTab);
                        };
                        me.multiFileUploadPanel.cancel = me.multiFileUploadPanel.close;
                        me.multiFileUploadPanel.showRecords = function (searchString) {
                            me.trimGlobalSearchPanel.search(searchString);
                        };
                        me.multiFileUploadPanel.newRecordInModal = _this.trimBodyPanel.newRecordDataEntryPanelInModal;
                    };
                };
                TRIMApp.prototype.showPropertiesSelector = function () {
                    this.showOverlay(this.propertiesSelectorForm);
                };
                TRIMApp.prototype.setupGlobalSearchPanelHandler = function () {
                    var _this = this;
                    var me = this;
                    me.trimGlobalSearchPanel.setupFilter = function (objectType) {
                        me.trimGlobalSearchPanel.showFilterButton(false);
                        me.trimGlobalSearchPanel.showRecordTypeFilterButton(false);
                        me.trimGlobalSearchPanel.showSearchOptionButton(false);
                        me.trimGlobalSearchPanel.currentFilter("");
                        me.trimGlobalSearchPanel.currentFilterPanelRef = undefined;
                        me.trimGlobalSearchPanel.currentRecordTypeFilterRef = undefined;
                        me.trimGlobalSearchPanel.currentSearchOptionFilterRef = undefined;
                        var supportsFilters = false;
                        var rawFilters = undefined;
                        var rawOptionFilters = undefined;
                        if (objectType == HPTRIM.BaseObjectTypes.Record) {
                            supportsFilters = true;
                            rawFilters = App.Panels.RecordDetails.RecordInformation.getFilters();
                            me.trimGlobalSearchPanel.showRecordTypeFilterButton(true);
                            var currentRecordTypeFilterPanel = new App.Panels.SearchEditor.SearchRecordTypeFilterPanel(_this.trimClient);
                            me.trimGlobalSearchPanel.currentRecordTypeFilterRef = currentRecordTypeFilterPanel;
                            currentRecordTypeFilterPanel.callback = function (filterString) {
                                var otherFilters = me.trimGlobalSearchPanel.currentFilterPanelRef.getFilterString();
                                if (otherFilters) {
                                    filterString = filterString + " " + otherFilters;
                                }
                                me.trimGlobalSearchPanel.currentFilter(filterString);
                                me.trimGlobalSearchPanel.executeSearch();
                            };
                        }
                        else if (objectType == HPTRIM.BaseObjectTypes.Workflow) {
                            supportsFilters = true;
                            rawFilters = App.Panels.Workflow.WorkflowInformation.Filters;
                        }
                        else if (objectType == HPTRIM.BaseObjectTypes.Activity) {
                            supportsFilters = true;
                            rawFilters = App.Panels.Workflow.AcitivyInformation.Filters;
                        }
                        else {
                            var mainObjectDef = me.mainObjectDefinitions.getMainObjectDef(objectType);
                            if (mainObjectDef && mainObjectDef.hasFilters) {
                                supportsFilters = true;
                                rawFilters = mainObjectDef.rawFilters;
                            }
                        }
                        if (objectType == HPTRIM.BaseObjectTypes.Record || objectType == HPTRIM.BaseObjectTypes.Activity) {
                            supportsFilters = true;
                            me.trimGlobalSearchPanel.showSearchOptionButton(true);
                            rawOptionFilters = App.Panels.RecordDetails.RecordInformation.getSearchOptionFilters(_this.trimClient, objectType);
                            var currentSearchOptionFiltePanel = new App.Panels.SearchEditor.SearchOptionFilterPanel(_this.trimClient, objectType, rawOptionFilters);
                            me.trimGlobalSearchPanel.currentSearchOptionFilterRef = currentSearchOptionFiltePanel;
                            me.trimGlobalSearchPanel.currentSearchOptions(currentSearchOptionFiltePanel.getOptionString());
                            currentSearchOptionFiltePanel.callback = function (filterString) {
                                var filterString = me.trimGlobalSearchPanel.currentSearchOptionFilterRef.getOptionString();
                                me.trimGlobalSearchPanel.currentSearchOptions(filterString);
                                me.trimGlobalSearchPanel.executeSearch();
                            };
                        }
                        else {
                            me.trimGlobalSearchPanel.currentSearchOptions("");
                        }
                        if (supportsFilters) {
                            me.trimGlobalSearchPanel.showFilterButton(true);
                            var currentFilterPanel = new App.Panels.SearchEditor.SearchFilterPanel(_this.trimClient, objectType, rawFilters);
                            me.trimGlobalSearchPanel.currentFilterPanelRef = currentFilterPanel;
                            me.trimGlobalSearchPanel.currentFilter(currentFilterPanel.getCurrentDefaultFilterString());
                            currentFilterPanel.callback = function (filterString) {
                                if (me.trimGlobalSearchPanel.showRecordTypeFilterButton()) {
                                    var recordTypeFilter = me.trimGlobalSearchPanel.currentRecordTypeFilterRef.getFilterString();
                                    if (recordTypeFilter) {
                                        filterString = filterString + " " + recordTypeFilter;
                                    }
                                }
                                me.trimGlobalSearchPanel.currentFilter(filterString);
                                me.trimGlobalSearchPanel.executeSearch();
                            };
                        }
                    };
                    me.trimGlobalSearchPanel.setupFilter(me.trimGlobalSearchPanel.selectedType());
                    me.trimGlobalSearchPanel.showRecordTypeFilterPanel = function (recordTypeFilterPanel) {
                        var searchRecordTypeFilterModal = new App.Panels.SearchEditor.SearchRecordTypeFilterModal(recordTypeFilterPanel);
                        searchRecordTypeFilterModal.dismiss = function () {
                            me.trimDynamicSearchOverlay.hideModal();
                        };
                        me.trimDynamicSearchOverlay.activatePanel(searchRecordTypeFilterModal);
                        me.trimDynamicSearchOverlay.showModal();
                        me.giveOverlayFocus(recordTypeFilterPanel.id);
                    };
                    me.trimGlobalSearchPanel.showSearchOptionFilterPanel = function (searchOptionFilterPanel) {
                        var searchOptionFilterModal = new App.Panels.SearchEditor.SearchOptionFilterModal(searchOptionFilterPanel);
                        searchOptionFilterModal.dismiss = function () {
                            me.trimDynamicSearchOverlay.hideModal();
                        };
                        me.trimDynamicSearchOverlay.activatePanel(searchOptionFilterModal);
                        me.trimDynamicSearchOverlay.showModal();
                        me.giveOverlayFocus(searchOptionFilterPanel.id);
                    };
                    me.trimGlobalSearchPanel.showSearchFilterPanel = function (filterPanel) {
                        var searchFilterModal = new App.Panels.SearchEditor.SearchFilterModal(filterPanel);
                        searchFilterModal.dismiss = function () {
                            me.trimDynamicSearchOverlay.hideModal();
                        };
                        me.trimDynamicSearchOverlay.activatePanel(searchFilterModal);
                        me.trimDynamicSearchOverlay.showModal();
                        me.giveOverlayFocus(searchFilterModal.id);
                    };
                    me.trimGlobalSearchPanel.setupSort = function (objectType) {
                        me.trimGlobalSearchPanel.currentSortPanelRef = new App.Panels.SearchEditor.SearchSortPanel(_this.trimClient, objectType);
                        me.trimGlobalSearchPanel.currentSort(me.trimGlobalSearchPanel.currentSortPanelRef.currentObjectSortDefaultString);
                        me.trimGlobalSearchPanel.currentSortPanelRef.callback = function (sortString) {
                            me.trimGlobalSearchPanel.currentSort(sortString);
                            me.trimGlobalSearchPanel.executeSearch();
                        };
                    };
                    me.trimGlobalSearchPanel.setupSort(me.trimGlobalSearchPanel.selectedType());
                    me.trimGlobalSearchPanel.showSearchSortPanel = function (sortPanel) {
                        var searchSortModal = new App.Panels.SearchEditor.SearchSortModal(sortPanel);
                        searchSortModal.dismiss = function () {
                            me.trimDynamicSearchOverlay.hideModal();
                        };
                        me.trimDynamicSearchOverlay.activatePanel(searchSortModal);
                        me.trimDynamicSearchOverlay.showModal();
                        me.giveOverlayFocus(searchSortModal.id);
                    };
                    me.trimGlobalSearchPanel.showSearchForm = function (dataEntryFormDefinition) {
                        var bobType = _this.trimGlobalSearchPanel.selectedType();
                        var defaultSearchFormDefinition = (bobType.DefaultSearchFormDefinition);
                        var useThisForm = dataEntryFormDefinition ? dataEntryFormDefinition : defaultSearchFormDefinition;
                        var supportsFilters = false;
                        var rawFilters = undefined;
                        me.formSearchOverlay.showRecordTypeFilter(false);
                        if (bobType == HPTRIM.BaseObjectTypes.Record) {
                            supportsFilters = true;
                            rawFilters = App.Panels.RecordDetails.RecordInformation.getFilters();
                            me.formSearchOverlay.searchRecordTypeFilterPanel = new App.Panels.SearchEditor.SearchRecordTypeFilterPanel(_this.trimClient);
                            me.formSearchOverlay.showRecordTypeFilter(true);
                            me.formSearchOverlay.searchRecordTypeFilterPanel.callback = function (filterString) {
                                me.trimGlobalSearchPanel.currentFilter(filterString);
                            };
                        }
                        else if (bobType == HPTRIM.BaseObjectTypes.Workflow) {
                            supportsFilters = true;
                            rawFilters = App.Panels.Workflow.WorkflowInformation.Filters;
                        }
                        else if (bobType == HPTRIM.BaseObjectTypes.Activity) {
                            supportsFilters = true;
                            rawFilters = App.Panels.Workflow.AcitivyInformation.Filters;
                        }
                        else {
                            var mainObjectDef = me.mainObjectDefinitions.getMainObjectDef(bobType);
                            if (mainObjectDef && mainObjectDef.hasFilters) {
                                supportsFilters = true;
                                rawFilters = mainObjectDef.rawFilters;
                            }
                        }
                        if (bobType == HPTRIM.BaseObjectTypes.Record || bobType == HPTRIM.BaseObjectTypes.Activity) {
                            if (me.trimGlobalSearchPanel.currentSearchOptionFilterRef) {
                                var searchOptions = me.trimGlobalSearchPanel.currentSearchOptionFilterRef.getOptionString();
                                me.trimGlobalSearchPanel.currentSearchOptions(searchOptions);
                            }
                        }
                        else {
                            me.trimGlobalSearchPanel.currentSearchOptions("");
                        }
                        if (supportsFilters) {
                            me.formSearchOverlay.showFilter(true);
                            me.formSearchOverlay.searchFilterPanel = new App.Panels.SearchEditor.SearchFilterPanel(_this.trimClient, bobType, rawFilters);
                            me.formSearchOverlay.searchFilterPanel.callback = function (filterString) {
                                me.trimGlobalSearchPanel.currentFilter(filterString);
                            };
                            if (me.trimGlobalSearchPanel.currentSearchOptionFilterRef) {
                                var searchOptions = me.trimGlobalSearchPanel.currentSearchOptionFilterRef.getOptionString();
                                me.trimGlobalSearchPanel.currentSearchOptions(searchOptions);
                            }
                        }
                        else {
                            me.formSearchOverlay.showFilter(false);
                        }
                        me.formSearchOverlay.updateForm(useThisForm);
                        me.showOverlay(me.formSearchOverlay);
                        me.formSearchOverlay.resetFormSearch();
                    };
                    me.trimGlobalSearchPanel.homePageVisible = function () {
                        if (me.trimBodyPanel.dashBoardPanel.visible()) {
                            return true;
                        }
                        else {
                            return false;
                        }
                    };
                    me.trimGlobalSearchPanel.showHelp = function () {
                        var virtualDirectory = HPRMWebConfig.virtualDirectory;
                        var languageCode = me.trimClient.getCurrentLanguageCode();
                        var url = virtualDirectory + "Content/help/" + languageCode + "/WebClient.htm";
                        window.open(url, "_blank");
                    };
                    me.trimGlobalSearchPanel.showSettings = App.ActionHandlers.ShowSettingsHandler.getHandler(me);
                    me.trimGlobalSearchPanel.searchHandler = App.ActionHandlers.SearchHandler.getHandler(me);
                    me.trimGlobalSearchPanel.localSearchHandler = App.ActionHandlers.SearchHandler.getLocalSearchHandler(me);
                    me.trimGlobalSearchPanel.getCurrentDisplayedObject = function () {
                        return me.trimBodyPanel.currentActiveTabPanel().objectType;
                    };
                    me.trimGlobalSearchPanel.showError = App.ActionHandlers.DisplayError.getHandler(me);
                    me.trimGlobalSearchPanel.searchField.subscribe(function (newValue) {
                        me.savedSearchForm.queryString(newValue);
                    });
                    me.trimGlobalSearchPanel.searchField.subscribe(function (newValue) {
                        me.savedSearchForm.searchDescriptionName(newValue);
                    });
                    me.trimGlobalSearchPanel.saveSearch = function () {
                        me.savedSearchForm.resetPanel();
                        me.savedSearchForm.queryString(me.trimGlobalSearchPanel.searchField());
                        me.savedSearchForm.searchDescriptionName(me.trimGlobalSearchPanel.selectedType().Caption + ' - ' + me.trimGlobalSearchPanel.searchField());
                        me.savedSearchForm.filter(me.trimGlobalSearchPanel.currentFilter());
                        me.savedSearchForm.sort(me.trimGlobalSearchPanel.currentSort());
                        me.savedSearchForm.searchObject = me.trimGlobalSearchPanel.selectedType();
                        me.showOverlay(me.savedSearchForm);
                    };
                };
                TRIMApp.prototype.setupRecordsPanelHandler = function () {
                    var _this = this;
                    var me = this;
                    var wireUpGenericRecordPanel = function (recPanel) {
                        recPanel.recordsDetailComponent.editDetailsHandler = App.ActionHandlers.ModifyRecordDetailsHandler.getHandler(me, recPanel);
                        recPanel.recordsDetailComponent.search = App.ActionHandlers.SearchHandler.getHandler(me);
                        recPanel.handleViewClick = App.ActionHandlers.HandleDetailComponentViewClickHandler.getHandler(me, recPanel.recordsDetailComponent);
                        recPanel.recordsDetailComponent.viewRecord = App.ActionHandlers.ViewRecordHandler.getHandler(me, me.trimClient);
                        recPanel.recordsDetailComponent.viewRendition = App.ActionHandlers.ViewRecordRenditionHandler.getHandler(me, me.trimClient);
                        recPanel.recordsDetailComponent.doCheckIn = App.ActionHandlers.CheckInHandler.getHandler(me);
                        recPanel.recordsDetailComponent.doCheckOut = App.ActionHandlers.CheckOutHandler.getHandler(me, me.trimClient);
                        recPanel.recordsDetailComponent.doWebDavEdit = App.ActionHandlers.WebdavEditHandler.getHandler(me.trimClient);
                        recPanel.recordsDetailComponent.doWOPILink = App.ActionHandlers.WOPILinkHandler.getHandler(me.trimClient);
                        recPanel.recordsDetailComponent.doConfirmWOPIConversion = App.ActionHandlers.WOPIConfirmConversionHandler.getHandler(me);
                        recPanel.recordsDetailComponent.displayError = App.ActionHandlers.DisplayError.getHandler(me);
                        recPanel.handleRenditionViewClick = App.ActionHandlers.HandleShowRenditionViewClickHandler.getHandler(me, recPanel.recordsDetailComponent);
                        recPanel.recordsDetailComponent.createNewRecord = App.ActionHandlers.CreateNewRecordHandler.getHandler(me);
                        recPanel.recordsDetailComponent.createNewPart = App.ActionHandlers.CreateNewRecordBasedOnExistingRecordHandler.getHandler(me);
                        var currentObjectPropertiesPanel = recPanel.objectPropertiesPanel;
                        recPanel.updatePropertiesViewPanel = _this.getUpdateViewPanelCode(currentObjectPropertiesPanel);
                        recPanel.objectPropertiesPanel.propertyOrFieldListView.showRecordPropertiesOverlay = function () { me.showPropertiesSelector(); };
                        recPanel.recordsDetailComponent.doAdditionalRequestRecord = App.ActionHandlers.AdditionalRequestHandler.getHandler(me);
                        recPanel.recordsDetailComponent.initiateWorkflow = App.ActionHandlers.InitiateWorkflowFromTemplateWizardHandler.getHandler(me);
                        recPanel.recordsDetailComponent.removeContact = App.ActionHandlers.RemoveContactHandler.getHandler(me);
                        recPanel.recordsDetailComponent.addRelatedRecord = App.ActionHandlers.AddRelatedRecordHandler.getHandler(me);
                        recPanel.recordsDetailComponent.removeRelatedRecord = App.ActionHandlers.RemoveRelatedRecordHandler.getHandler(me);
                        recPanel.recordsDetailComponent.addToUserLabel = App.ActionHandlers.AddToUserLabelHandler.getHandler(me);
                        recPanel.recordsDetailComponent.removeFromUserLabels = App.ActionHandlers.RemoveFromUserLabelsHandler.getHandler(me);
                        recPanel.recordsDetailComponent.sendToCheckinStyle = App.ActionHandlers.SendToCheckinStyleHandler.getHandler(me);
                        recPanel.recordsDetailComponent.hideOverlays = _this.dismissStandardOverlays;
                        recPanel.recordsDetailComponent.updateTaskHandler = App.ActionHandlers.UpdateHandler.getHandler(me);
                        recPanel.recordsDetailComponent.showNotes = App.ActionHandlers.GetNotesHandler.getHandler(me, me.trimClient);
                        recPanel.recordsDetailComponent.showComments = App.ActionHandlers.GetViewCommentsHandler.getHandler(me, me.trimClient, recPanel.recordsDetailComponent);
                        recPanel.recordsDetailComponent.handleError = _this.errorHandler;
                        recPanel.recordsDetailComponent.handleWarning = _this.warningHandler;
                        recPanel.recordsDetailComponent.showRecordActionsAndProcedures = function (uri, infoObject) {
                            me.recordActionsComponentOverlay.actionsComponent.setRecord(uri, infoObject);
                            me.recordActionsComponentOverlay.actionsComponent.load(uri);
                            me.showOverlay(me.recordActionsComponentOverlay);
                        };
                        recPanel.recordsDetailComponent.showRecordDocument = function (uri, infoObject, task) {
                            me.recordDocumentsComponentOverlay.actionsComponent.handleViewClick = App.ActionHandlers.HandleDetailComponentViewClickHandler.getHandler(me, recPanel.recordsDetailComponent);
                            me.recordDocumentsComponentOverlay.actionsComponent.showNotes = App.ActionHandlers.AddNotesHandler.getHandler(me, me.trimClient);
                            me.recordDocumentsComponentOverlay.actionsComponent.setRecordDetailObject(infoObject, task);
                            me.showOverlay(me.recordDocumentsComponentOverlay);
                        };
                        recPanel.recordsDetailComponent.updateSecurity = function (uri) {
                            me.recordSecurityAccessOverlay.resetPanel();
                            me.recordSecurityAccessOverlay.uri(uri);
                            me.showOverlay(me.recordSecurityAccessOverlay);
                        };
                    };
                    var wireUpRecordPanel = function (recordsPanel) {
                        recordsPanel.createNewRecordCallback = App.ActionHandlers.CreateNewRecordHandler.getHandler(me);
                        recordsPanel.updateHistory = App.ActionHandlers.RecordsHistoryHandler.getHandler(me);
                        recordsPanel.showError = App.ActionHandlers.DisplayError.getHandler(me);
                        recordsPanel.objectPropertiesPanel.propertyOrFieldListView.searchCallback = App.ActionHandlers.SearchHandler.getHandler(me);
                        recordsPanel.taggedUpdatePropertyHandler = App.ActionHandlers.TaggedUpdatePropertyHandler.getHandler(me);
                        recordsPanel.taggedUpdatePropertyDialogHandler = App.ActionHandlers.TaggedUpdatePropertyDialogHandler.getHandler(me);
                        recordsPanel.taggedUpdateTaskHandler = App.ActionHandlers.TaggedUpdateTaskHandler.getHandler(me);
                        recordsPanel.taggedUpdateTaskDialogHandler = App.ActionHandlers.TaggedUpdateTaskDialogHandler.getHandler(me);
                        recordsPanel.taggedShowCustomUpdateTaskDialog = App.ActionHandlers.TaggedUpdateTaskCustomDialogHandler.getHandler(me);
                        recordsPanel.taggedStartHandler = App.ActionHandlers.TaggedStartHandler.getHandler(me);
                        recordsPanel.taggedUpdateProgess = App.ActionHandlers.TaggedUpdateProgressHandler.getHandler(me);
                        recordsPanel.taggedUpdateProgressError = App.ActionHandlers.TaggedUpdateProgressErrorHandler.getHandler(me);
                        recordsPanel.taggedUpdateProgressWarning = App.ActionHandlers.TaggedUpdateProgressWarningHandler.getHandler(me);
                        recordsPanel.taggedCompleteProgess = App.ActionHandlers.TaggedCompleteProgressHandler.getHandler(me);
                        recordsPanel.searchHandler = App.ActionHandlers.SearchHandler.getHandler(me);
                        recordsPanel.localSearchHandler = App.ActionHandlers.SearchHandler.getLocalSearchHandler(me);
                    };
                    this.trimBodyPanel.wireUpRecordPanel = wireUpRecordPanel;
                    this.trimBodyPanel.wireUpGenericRecordPanel = wireUpGenericRecordPanel;
                    var wireUpCreateRecordPanel = function (createRecordPanel) {
                        _this.recordDataEntryPanel = createRecordPanel.dataEntryPanel;
                        createRecordPanel.dataEntryPanel.updateHandler = function (result) {
                            App.ActionHandlers.ShowHomeHandler.getHandler(me)();
                        };
                        createRecordPanel.dataEntryPanel.warningHandler = me.warningHandler;
                        createRecordPanel.returnAction = App.ActionHandlers.ShowHomeHandler.getHandler(me);
                        createRecordPanel.dataEntryPanel.cancel = function () {
                            App.ActionHandlers.ShowHomeHandler.getHandler(me);
                            HPTRIM.Utils.Form.resetThesaurusOverlayPanel();
                        };
                        createRecordPanel.dataEntryPanel.displayError = App.ActionHandlers.DisplayError.getHandler(me);
                        createRecordPanel.commandPanel.displayError = App.ActionHandlers.DisplayError.getHandler(me);
                        createRecordPanel.dataEntryPanel.manualNumberingHandler = App.ActionHandlers.ManualNumberingHandler.getHandler(me);
                    };
                    this.trimBodyPanel.wireUpCreateRecordPanel = wireUpCreateRecordPanel;
                    var wireUpModifyRecordPanel = function (modifyRecordPanel) {
                        modifyRecordPanel.dataEntryPanel.displayError = App.ActionHandlers.DisplayError.getHandler(me);
                        modifyRecordPanel.commandPanel.displayError = App.ActionHandlers.DisplayError.getHandler(me);
                        modifyRecordPanel.dataEntryPanel.warningHandler = me.warningHandler;
                    };
                    this.trimBodyPanel.wireUpModifyRecordPanel = wireUpModifyRecordPanel;
                };
                TRIMApp.prototype.setupTrimBodyPanelHandler = function () {
                    var _this = this;
                    var me = this;
                    me.trimBodyPanel.notifyTypeChangeCallback = function (type) {
                        if (type) {
                            me.trimGlobalSearchPanel.setType(type);
                        }
                    };
                    var mainPanel = me.trimBodyPanel.dashBoardPanel.mainPanel;
                    mainPanel.showParamaterisedSearch = this.showParameterisedSearch;
                    mainPanel.search = App.ActionHandlers.SearchHandler.getClearGlobalThenSearchHandler(this);
                    mainPanel.showItemCallback = App.ActionHandlers.HomePageNavHandler.getHandler(me);
                    mainPanel.showError = App.ActionHandlers.DisplayError.getHandler(me);
                    var searchBarUpdater = function (query, objectType) {
                        me.trimGlobalSearchPanel.updateQueryFieldWithoutSearching(query);
                        me.trimGlobalSearchPanel.setType(objectType);
                    };
                    var wireUpWorkflowPanel = function (workflowPanel) {
                        workflowPanel.activityDetailComponent.doReassignActivity = function (uri, currentAssignee, callback) {
                            me.reassignActivityForm.resetPanel();
                            me.reassignActivityForm.cancelHandler = function () { };
                            me.reassignActivityForm.activityUri(uri);
                            me.reassignActivityForm.reassignField.setValue(currentAssignee);
                            me.reassignActivityForm.successCallback = callback;
                            me.showOverlay(me.reassignActivityForm);
                        };
                        workflowPanel.activityDetailComponent.errorHandler = me.showError;
                        workflowPanel.workflowDetailComponent.errorHandler = me.showError;
                        workflowPanel.documentDetailComponent.errorHandler = me.showError;
                        workflowPanel.updateGlobalSearchPanelCallback = function (type) {
                            me.trimGlobalSearchPanel.setType(type);
                        };
                        workflowPanel.updateHistory = App.ActionHandlers.ActivitiesHistoryHandler.getHandler(me);
                        workflowPanel.completeActivity = App.ActionHandlers.CompleteActivityHandler.getHandler(me);
                        workflowPanel.uncompleteActivity = App.ActionHandlers.UncompleteActivityHandler.getHandler(me);
                        workflowPanel.activityDetailComponent.modifyActivity = App.ActionHandlers.ModifyActivityHandler.getHandler(me);
                        workflowPanel.displayError = App.ActionHandlers.DisplayError.getHandler(me);
                        workflowPanel.objectPropertiesPanel.propertyOrFieldListView.searchCallback = App.ActionHandlers.SearchHandler.getHandler(me);
                        workflowPanel.warningHandler = me.warningHandler;
                        workflowPanel.searchBarQueryUpdater = searchBarUpdater;
                        workflowPanel.workflowCommandPanel.initiateWorkflowFromTemplate = App.ActionHandlers.InitiateWorkflowFromTemplateWizardHandler.getHandler(me);
                    };
                    me.trimBodyPanel.wireUpWorkflowPanel = wireUpWorkflowPanel;
                    me.recordViewOverlay.defaultReturnAction = App.ActionHandlers.ShowHomeHandler.getHandler(me);
                    var wireUpMainObjectPanel = function (mainObjectPanel) {
                        mainObjectPanel.updatePropertiesViewPanel = me.getUpdateViewPanelCode(mainObjectPanel.objectPropertiesPanel);
                        mainObjectPanel.objectPropertiesPanel.propertyOrFieldListView.showRecordPropertiesOverlay = function () { me.showPropertiesSelector(); };
                        mainObjectPanel.deleteObject = App.ActionHandlers.DeleteMainObjectHandler.getHandler(me);
                        mainObjectPanel.detailComponent.doCreate = App.ActionHandlers.CreateTaskHandler.getHandler(me);
                        mainObjectPanel.detailComponent.searchHandler = App.ActionHandlers.SearchHandler.getClearGlobalThenSearchHandler(me);
                        mainObjectPanel.detailComponent.doUpdate = App.ActionHandlers.UpdateHandler.getHandler(me);
                        mainObjectPanel.detailComponent.handleWarning = me.warningHandler;
                        mainObjectPanel.detailComponent.handleError = me.errorHandler;
                        mainObjectPanel.detailComponent.paramaterisedSearchHandler = _this.showParameterisedSearch;
                        mainObjectPanel.detailComponent.viewHandler = App.ActionHandlers.HandleGenericViewClickHandler.getHandler(me, me.trimClient);
                        mainObjectPanel.detailComponent.errorHandler = App.ActionHandlers.DisplayError.getHandler(me);
                        mainObjectPanel.detailComponent.getNotesHandler = App.ActionHandlers.GetNotesHandler.getHandler(me, me.trimClient);
                        mainObjectPanel.updateHistory = App.ActionHandlers.MainObjectHistoryHandler.getHandler(me);
                        mainObjectPanel.searchHandler = App.ActionHandlers.SearchHandler.getHandler(me);
                        mainObjectPanel.localSearchHandler = App.ActionHandlers.SearchHandler.getLocalSearchHandler(me);
                        mainObjectPanel.taggedUpdatePropertyHandler = App.ActionHandlers.TaggedUpdatePropertyHandler.getHandler(me);
                        mainObjectPanel.taggedUpdatePropertyDialogHandler = App.ActionHandlers.TaggedUpdatePropertyDialogHandler.getHandler(me);
                        mainObjectPanel.taggedUpdateTaskHandler = App.ActionHandlers.TaggedUpdateTaskHandler.getHandler(me);
                        mainObjectPanel.taggedUpdateTaskDialogHandler = App.ActionHandlers.TaggedUpdateTaskDialogHandler.getHandler(me);
                        mainObjectPanel.taggedStartHandler = App.ActionHandlers.TaggedStartHandler.getHandler(me);
                        mainObjectPanel.taggedUpdateProgess = App.ActionHandlers.TaggedUpdateProgressHandler.getHandler(me);
                        mainObjectPanel.taggedUpdateProgressError = App.ActionHandlers.TaggedUpdateProgressErrorHandler.getHandler(me);
                        mainObjectPanel.taggedUpdateProgressWarning = App.ActionHandlers.TaggedUpdateProgressWarningHandler.getHandler(me);
                        mainObjectPanel.taggedCompleteProgess = App.ActionHandlers.TaggedCompleteProgressHandler.getHandler(me);
                        mainObjectPanel.objectPropertiesPanel.propertyOrFieldListView.searchCallback = App.ActionHandlers.SearchHandler.getHandler(me);
                        if (mainObjectPanel.objectDefinition.CanAnybodyCreate) {
                            mainObjectPanel.commandPanel.createObject = App.ActionHandlers.CreateMainObjectHandler.getHandler(me, mainObjectPanel.createCallback);
                        }
                        mainObjectPanel.detailComponent.editDetails = App.ActionHandlers.ModifyMainObjectHandler.getHandler(me);
                        _.each(mainObjectPanel.childObjectListArray, function (childObjectComponent) {
                            if (!childObjectComponent) {
                                return;
                            }
                            if (childObjectComponent.detailComponent) {
                                childObjectComponent.detailComponent.searchHandler = App.ActionHandlers.SearchHandler.getHandler(me);
                                childObjectComponent.detailComponent.deleteChild = App.ActionHandlers.DeleteChildObjectHandler.getHandler(me);
                                childObjectComponent.detailComponent.viewHandler = App.ActionHandlers.HandleGenericViewClickHandler.getHandler(me, me.trimClient);
                            }
                            var addChildCallback = function (result) {
                                childObjectComponent.childObjectItemListPanel.refresh();
                            };
                            var errorHandler = App.ActionHandlers.DisplayError.getHandler(me);
                            childObjectComponent.childObjectCommandPanel.addChildHandler = App.ActionHandlers.CreateChildHandler.getHandler(me, childObjectComponent.newChildForm, addChildCallback, errorHandler);
                        });
                        if (mainObjectPanel.objectDefinition.type === HPTRIM.BaseObjectTypes.Location) {
                            mainObjectPanel.commandPanel.createObject = HP.HPTRIM.App.ActionHandlers.CreateLocationHandler.getHandler(me);
                        }
                        ;
                        if (mainObjectPanel.objectDefinition.type === HPTRIM.BaseObjectTypes.SavedSearch) {
                            mainObjectPanel.detailComponent.editDetails = function (uri, objectDef, requiredProperties, requiredCommandIds, callback) {
                                me.savedSearchForm.populatePanel(mainObjectPanel.detailComponent.mainObjectInfoObject, function (result) {
                                    var infoObject = result.Results[0];
                                    mainObjectPanel.detailComponent.updateDetailComponentWithCachedResult(infoObject);
                                    mainObjectPanel.updateItemListPanelItem(infoObject);
                                });
                                me.showOverlay(me.savedSearchForm);
                            };
                        }
                    };
                    me.trimBodyPanel.wireUpMainObjectPanel = wireUpMainObjectPanel;
                };
                TRIMApp.prototype.setupMixins = function () {
                    App.Panels.Framework.ManageSearchFormMixin.s_app = this;
                    HPTRIM.Utils.Mixins.applyMixins(App.Panels.Framework.GlobalSearchPanel, [App.Panels.Framework.ManageSearchFormMixin]);
                    HP.HPTRIM.App.Panels.TrimHandlerMixin.s_app = this;
                    HPTRIM.Utils.Mixins.applyMixins(HP.HPTRIM.App.Panels.BrowseViaClassificationsPanel, [HP.HPTRIM.App.Panels.TrimHandlerMixin]);
                    HP.HPTRIM.App.Panels.SearchEditor.Mixins.ReceiveBobChangeNotificationMixin.s_app = this;
                    HPTRIM.Utils.Mixins.applyMixins(App.Panels.SearchEditor.SearchEditorPanel, [App.Panels.SearchEditor.Mixins.ReceiveBobChangeNotificationMixin]);
                    HPTRIM.Utils.Mixins.applyMixins(HP.HPTRIM.App.Panels.BrowseViaUserLabelPanel, [HP.HPTRIM.App.Panels.UserLabelTreePanel]);
                    HP.HPTRIM.Form.ShowOverlayMixin.s_app = this;
                    HPTRIM.Utils.Mixins.applyMixins(HP.HPTRIM.Form.ThesaurusTitleDecorator, [HP.HPTRIM.Form.ShowOverlayMixin]);
                };
                TRIMApp.prototype.promptUserToSetDefaultTimezone = function () {
                    var _this = this;
                    if (HPRM_webClientOptions.WebClientUserOptionsTimezone.StringValue != '') {
                        return;
                    }
                    App.ActionHandlers.ShowSettingsHandler.getHandler(this)();
                    var guessedTz = this.trimClient.setDefaultClientTimezoneIfEmpty(HPRM_webClientOptions);
                    this.settingsForm.viewerOptionsTabPanel.timezone = guessedTz;
                    setTimeout(function () {
                        _this.settingsForm.m_alert().message(HP.HPTRIM.Messages.web_selectTimeZone);
                        $('#settingsPanel li:eq(1) a').tab('show');
                    }, 2500);
                };
                TRIMApp.prototype.getUpdateViewPanelCode = function (currentObjectPropertiesPanel, hidePanelOnUpdate) {
                    var me = this;
                    return function (trimObject, recordType) {
                        currentObjectPropertiesPanel.propertyOrFieldListView.updateSelectorCallbackClosure = function () {
                            me.propertiesSelectorForm.propertyOrFieldDefSelector.updateCallback = function (trimBaseObject, selectedPropsAndFields) {
                                currentObjectPropertiesPanel.updatedPropertiesSelected(trimBaseObject, selectedPropsAndFields);
                            };
                        };
                        currentObjectPropertiesPanel.currentlySelectedPropertiesCallback = function (trimObject, selectedViewPanepropertyOrFieldDefs, additionalData) {
                            me.propertiesSelectorForm.updateSelector(trimObject, selectedViewPanepropertyOrFieldDefs, additionalData, ko.observableArray([]));
                        };
                        me.propertiesSelectorForm.propertyOrFieldDefSelector.updateCallback = function (trimBaseObject, selectedPropsAndFields) {
                            currentObjectPropertiesPanel.updatedPropertiesSelected(trimBaseObject, selectedPropsAndFields);
                        };
                        currentObjectPropertiesPanel.updateObject(trimObject, recordType);
                    };
                };
                TRIMApp.prototype.configureSubscriptions = function () {
                    this.configureComplexSearchResultsSubscription();
                    this.configureCreatingLocationSubscription();
                    this.configureCutomiseAccessControlSubscription();
                    this.configureErrorSubscription();
                    this.configureKwikSelectSubscription();
                };
                TRIMApp.prototype.configureErrorSubscription = function () {
                    var me = this;
                    ko.postbox.subscribe(TRIMApp.NOTIFICATION_ERROR_TOPIC, function (message) {
                        me.showError(message);
                    });
                };
                TRIMApp.prototype.configureComplexSearchResultsSubscription = function () {
                    var _this = this;
                    var me = this;
                    var subscriptionTopic = HP.HPTRIM.Field.TrimItemPicker.SHOW_SEARCH_DIALOG_TOPIC;
                    ko.postbox.subscribe(subscriptionTopic, function (data) {
                        var showingSearchOverlay = false;
                        var overlaySearchStack = [];
                        var currentSearchPanel = undefined;
                        if (me.showingSearchOverlay()) {
                            showingSearchOverlay = true;
                            overlaySearchStack = me.overlaySearchStack();
                            currentSearchPanel = me.trimDynamicSearchOverlay.activePanel();
                            me.overlaySearchStack([]);
                            me.showingSearchOverlay(false);
                            me.trimDynamicSearchOverlay.hideModal();
                        }
                        var query = data.query;
                        var filter = "";
                        var sort = "";
                        var purpose = data.purpose;
                        var searchPreviewPanel = new App.Panels.SearchEditor.SearchPreviewPanel(_this.trimClient, data.searchTitle, data.objectType, query, filter, sort, purpose);
                        searchPreviewPanel.updatePropertiesViewPanel = _this.getUpdateViewPanelCode(searchPreviewPanel.objectPropertiesPanel, true);
                        searchPreviewPanel.objectPropertiesPanel.propertyOrFieldListView.searchCallback = App.ActionHandlers.SearchHandler.getHandler(me);
                        searchPreviewPanel.objectPropertiesPanel.propertyOrFieldListView.showRecordPropertiesOverlay = function () {
                            searchPreviewPanel.objectPropertiesPanel.propertyOrFieldListView.toggleVisible();
                            _this.showPropertiesSelector();
                        };
                        searchPreviewPanel.showSearchBuilder = function () {
                            me.hideOverlay();
                            me.showSearchBuilder(data.objectType, searchPreviewPanel.searchField(), undefined, data.searchTitle, function (query, filter, sort, purpose) {
                                searchPreviewPanel.doSearch(data.objectType, query, filter, sort, purpose);
                                searchPreviewPanel.searchField(query);
                                me.showOverlay(searchPreviewPanel);
                            });
                        };
                        searchPreviewPanel.okHandler = function () {
                            me.hideOverlay();
                            data.callback(searchPreviewPanel.selectedItemList);
                            if (showingSearchOverlay) {
                                me.overlaySearchStack(overlaySearchStack);
                                me.trimDynamicSearchOverlay.activatePanel(currentSearchPanel);
                                me.trimDynamicSearchOverlay.showModal();
                                me.giveOverlayFocus(currentSearchPanel.id);
                            }
                        };
                        searchPreviewPanel.cancelHandler = function () {
                            me.hideOverlay();
                            if (showingSearchOverlay) {
                                me.overlaySearchStack(overlaySearchStack);
                                me.trimDynamicSearchOverlay.activatePanel(currentSearchPanel);
                                me.trimDynamicSearchOverlay.showModal();
                                me.giveOverlayFocus(currentSearchPanel.id);
                            }
                        };
                        me.showOverlay(searchPreviewPanel);
                    });
                };
                TRIMApp.prototype.configureKwikSelectSubscription = function () {
                    var _this = this;
                    var me = this;
                    var subscriptionTopic = HP.HPTRIM.Field.TrimItemPicker.SHOW_KWIK_SELECT_DIALOG_TOPIC;
                    ko.postbox.subscribe(subscriptionTopic, function (data) {
                        var showingSearchOverlay = false;
                        var overlaySearchStack = [];
                        var currentSearchPanel = undefined;
                        if (me.showingSearchOverlay()) {
                            showingSearchOverlay = true;
                            overlaySearchStack = me.overlaySearchStack();
                            currentSearchPanel = me.trimDynamicSearchOverlay.activePanel();
                            me.overlaySearchStack([]);
                            me.showingSearchOverlay(false);
                            me.trimDynamicSearchOverlay.hideModal();
                        }
                        var query = data.query;
                        var filter = "";
                        var sort = data.sort;
                        var purpose = data.purpose;
                        var parentObjectType = data.parentObjectType;
                        var itemKiwiSelectPanel = new App.Panels.ItemKiwiSelectPanel(_this.trimClient, data.searchTitle, data.objectType, query, filter, sort, purpose, parentObjectType);
                        itemKiwiSelectPanel.updatePropertiesViewPanel = _this.getUpdateViewPanelCode(itemKiwiSelectPanel.objectPropertiesPanel, true);
                        itemKiwiSelectPanel.objectPropertiesPanel.propertyOrFieldListView.searchCallback = App.ActionHandlers.SearchHandler.getHandler(me);
                        itemKiwiSelectPanel.objectPropertiesPanel.propertyOrFieldListView.showRecordPropertiesOverlay = function () {
                            itemKiwiSelectPanel.objectPropertiesPanel.propertyOrFieldListView.toggleVisible();
                            _this.showPropertiesSelector();
                        };
                        var activatePanel = function () {
                            if (showingSearchOverlay) {
                                me.overlaySearchStack(overlaySearchStack);
                                var renderClauseFinder = function () {
                                    if (currentSearchPanel.clauseFinder.isRendered()) {
                                        var lvSearchClauseView = HP.HPTRIM.App.Panels.SearchEditor.SearchClausesView.ByCategory;
                                        if (currentSearchPanel.clauseFinder.alphabeticalTabVisible()) {
                                            lvSearchClauseView = HP.HPTRIM.App.Panels.SearchEditor.SearchClausesView.ByAlphabetical;
                                        }
                                        currentSearchPanel.clauseFinder.toggleView(lvSearchClauseView, true);
                                    }
                                    else {
                                        setTimeout(renderClauseFinder, 100);
                                    }
                                };
                                me.trimDynamicSearchOverlay.activatePanel(currentSearchPanel);
                                me.trimDynamicSearchOverlay.showModal();
                                me.giveOverlayFocus(currentSearchPanel.id);
                                renderClauseFinder();
                            }
                        };
                        itemKiwiSelectPanel.okHandler = function () {
                            me.hideOverlay();
                            data.callback(itemKiwiSelectPanel.selectedItemList);
                            activatePanel();
                        };
                        itemKiwiSelectPanel.cancelHandler = function () {
                            me.hideOverlay();
                            data.callback();
                            activatePanel();
                        };
                        me.showOverlay(itemKiwiSelectPanel);
                    });
                };
                TRIMApp.prototype.configureCreatingLocationSubscription = function () {
                    var me = this;
                    var subscriptionTopic = HP.HPTRIM.Field.Plugin.CreatingLocationPickerPlugin.DISPLAY_LOCATION_FORM_TOPIC;
                    var close = function () {
                        var modalDialog = me.hideOverlay();
                    };
                    ko.postbox.subscribe(subscriptionTopic, function (data) {
                        me.locationForm = ko.observable(new App.Panels.Plugins.LocationForm());
                        me.locationForm().close = close;
                        var topic = data.topic, typeOfLocation = data.typeOfLocation;
                        var form = new HP.HPTRIM.Form.LocationDataEntryForm(me.trimClient, data.dataEntryFormDefinition, typeOfLocation);
                        me.locationForm().topicToPublishOnFormSubmit(topic);
                        me.locationForm().setDataEntryForm(form);
                        me.locationForm().typeOfLocation(typeOfLocation.caption);
                        me.showOverlay(me.locationForm());
                    }, this);
                    me.locationForm().close = close;
                };
                TRIMApp.prototype.setupOverlays = function () {
                    var _this = this;
                    var me = this;
                    this.dismissStandardOverlays = function () {
                        var currentOverlays = _this.overlayStack();
                        var overlaysToKeep = [
                            me.settingsForm,
                            me.recordActionsComponentOverlay,
                        ];
                        currentOverlays = _.filter(currentOverlays, function (panel) {
                            return _.contains(overlaysToKeep, panel);
                        });
                        _this.overlayStack(currentOverlays);
                        if (currentOverlays.length > 0) {
                            _this.hideOverlay();
                        }
                        else {
                            _this.trimDynamicOverlay().hideModal();
                        }
                    };
                    this.dismissAllOverlays = function () {
                        _this.overlayStack([]);
                        _this.trimDynamicOverlay().hideModal();
                    };
                };
                TRIMApp.prototype.showOverlay = function (panel) {
                    var _this = this;
                    var showOverlayWorker = function () {
                        if (_this.showingOverlay()) {
                            var currentOverlayPanels = _this.overlayStack();
                            var activePanel = _this.trimDynamicOverlay().activePanel();
                            currentOverlayPanels.push(activePanel);
                            _this.overlayStack(currentOverlayPanels);
                        }
                        if (panel) {
                            panel.initialiseView();
                            _this.trimDynamicOverlay().activatePanel(panel);
                            _this.trimDynamicOverlay().showModal();
                            _this.giveOverlayFocus(panel.id);
                        }
                    };
                    if (this.hidingOverlay) {
                        this.pendingShowOverlayMethods.push(showOverlayWorker);
                    }
                    else {
                        showOverlayWorker();
                    }
                };
                TRIMApp.prototype.showCommentsOverlay = function (panel) {
                    var _this = this;
                    var showOverlayWorker = function () {
                        var me = _this;
                        if (_this.showingSearchOverlay()) {
                            var currentOverlayPanels = _this.overlayStack();
                            var activePanel = _this.trimDynamicSearchOverlay.activePanel();
                            currentOverlayPanels.push(activePanel);
                            _this.overlayStack(currentOverlayPanels);
                        }
                        if (panel) {
                            panel.initialiseView();
                            _this.trimDynamicSearchOverlay.activatePanel(panel);
                            _this.trimDynamicSearchOverlay.showModal();
                            _this.giveOverlayFocus(panel.id);
                        }
                    };
                    if (this.hidingOverlay) {
                        this.pendingShowOverlayMethods.push(showOverlayWorker);
                    }
                    else {
                        showOverlayWorker();
                    }
                };
                TRIMApp.prototype.replaceOverlay = function (panel) {
                    var _this = this;
                    var replaceOverlayWorker = function () {
                        if (panel) {
                            panel.initialiseView();
                            _this.trimDynamicOverlay().activatePanel(panel);
                            if (!_this.showingOverlay()) {
                                _this.trimDynamicOverlay().showModal();
                            }
                        }
                    };
                    if (this.hidingOverlay) {
                        this.pendingShowOverlayMethods.push(replaceOverlayWorker);
                    }
                    else {
                        replaceOverlayWorker();
                    }
                };
                TRIMApp.prototype.giveOverlayFocus = function (panelId) {
                    if (panelId) {
                        setTimeout(function () {
                            var id = "overlay_" + panelId;
                            var panelElement = document.getElementById(id);
                            var currentElementWithFocus = document.activeElement;
                            if (currentElementWithFocus && panelElement) {
                                if (!$.contains(panelElement, currentElementWithFocus)) {
                                    panelElement.focus();
                                }
                            }
                            else {
                                if (panelElement) {
                                    panelElement.focus();
                                }
                            }
                        }, 1000);
                    }
                };
                TRIMApp.prototype.hideOverlay = function () {
                    var _this = this;
                    if (this.hidingOverlay) {
                        return;
                    }
                    if (this.overlayStack().length > 0) {
                        var currentOverlayPanels = this.overlayStack();
                        var panel = currentOverlayPanels.pop();
                        panel.initialiseView();
                        this.trimDynamicOverlay().activatePanel(panel);
                        this.trimDynamicOverlay().setPositionAndSize();
                        this.overlayStack(currentOverlayPanels);
                    }
                    else {
                        this.hidingOverlay = true;
                        this.trimDynamicOverlay().hideModal();
                        setTimeout(function () {
                            _this.hidingOverlay = false;
                            _.each(_this.pendingShowOverlayMethods, function (method) {
                                method();
                            });
                            _this.pendingShowOverlayMethods = [];
                        }, 750);
                    }
                };
                TRIMApp.prototype.hideCommentsOverlay = function () {
                    var _this = this;
                    if (this.hidingOverlay) {
                        return;
                    }
                    if (this.overlayStack().length > 0) {
                        var currentOverlayPanels = this.overlayStack();
                        var panel = currentOverlayPanels.pop();
                        panel.initialiseView();
                        this.trimDynamicSearchOverlay.activatePanel(panel);
                        this.trimDynamicSearchOverlay.setPositionAndSize();
                        this.overlayStack(currentOverlayPanels);
                    }
                    else {
                        this.hidingOverlay = true;
                        this.trimDynamicSearchOverlay.hideModal();
                        setTimeout(function () {
                            _this.hidingOverlay = false;
                            _.each(_this.pendingShowOverlayMethods, function (method) {
                                method();
                            });
                            _this.pendingShowOverlayMethods = [];
                        }, 750);
                    }
                };
                TRIMApp.prototype.dismissCompletingOverlay = function () {
                    if (this.trimDynamicOverlay().activePanel() == this.completingOverlay) {
                        this.hideOverlay();
                    }
                };
                TRIMApp.prototype.configureCutomiseAccessControlSubscription = function () {
                    var me = this;
                    var subscriptionTopic = HP.HPTRIM.Field.AccessControl.SubscriptionTopic;
                    ko.postbox.subscribe(subscriptionTopic, function (aclFunction) {
                        var form = new HP.HPTRIM.App.Panels.Plugins.CustomizeAccessControlPanel(this.trimClient, aclFunction);
                        form.cancel = function () {
                            me.hideOverlay();
                        };
                        me.showOverlay(form);
                    }, this);
                };
                TRIMApp.prototype.getActiveCustomTypes = function () {
                    var activeFeatures = this.trimClient.getDatabase().activeFeatures();
                    var activeTypes = [HPTRIM.BaseObjectTypes.Record];
                    if (_.contains(activeFeatures, "Workflow")) {
                        activeTypes.push(HPTRIM.BaseObjectTypes.Activity);
                        activeTypes.push(HPTRIM.BaseObjectTypes.Workflow);
                    }
                    return activeTypes;
                };
                TRIMApp.prototype.getSupportedTypes = function () {
                    var supportedTypes = _.map(this.mainObjectDefinitions.definitions, function (object) {
                        return object.type;
                    });
                    var activeCustomTypes = this.getActiveCustomTypes();
                    _.each(activeCustomTypes, function (customType) {
                        supportedTypes.push(customType);
                    });
                    supportedTypes = _.uniq(supportedTypes);
                    return supportedTypes;
                };
                TRIMApp.prototype.getBodyPanel = function () {
                    return this.trimBodyPanel;
                };
                TRIMApp.prototype.afterLoad = function () {
                    if (!this.trimHistory) {
                        this.trimHistory = new HP.HPTRIM.History.TRIMHistory(this);
                        var pathname = window.location.hash;
                        var urlLocationString = pathname.substr(pathname.indexOf('#') + 1);
                        if (urlLocationString) {
                            var urlState = new HP.HPTRIM.History.TRIM_URLStateObject(urlLocationString);
                            this.trimHistory.urlHandler(urlState);
                        }
                    }
                };
                TRIMApp.prototype.setupDragDropFileUpload = function () {
                    var me = this;
                    var bodyPanelElement = document.getElementById('bodyContent');
                    if (bodyPanelElement) {
                        var dragOverHandler = function (evt) {
                            var dragItems = evt.dataTransfer.items;
                            if (HP.HPTRIM.Utils.DomHelper.isIEBeforeEdge()) {
                                dragItems = evt.dataTransfer.files;
                            }
                            if (dragItems.length > 0) {
                                if (dragItems[0].kind != "file") {
                                    return;
                                }
                                var types = _.pluck(dragItems, "type");
                                if (_.indexOf(types, "") > -1) {
                                    me.showError(HP.HPTRIM.Messages.web_folderNotSupported);
                                    return;
                                }
                            }
                            var showingCreateOrModifyRecord = me.trimBodyPanel.currentActiveTabPanel().createOrModifyRecordPanelRef != null;
                            var rv = -1;
                            if (navigator.appName == 'Microsoft Internet Explorer') {
                                var ua = navigator.userAgent;
                                var re = new RegExp("MSIE ([0-9]{1,}[\.0-9]{0,})");
                                if (re.exec(ua) != null)
                                    rv = parseFloat(RegExp.$1);
                                if (rv > -1) {
                                    if (rv < 10.0) {
                                        evt.stopPropagation();
                                        evt.preventDefault();
                                        return;
                                    }
                                }
                            }
                            if (Modernizr.draganddrop) {
                                var element = document.getElementById(me.id);
                                if (showingCreateOrModifyRecord) {
                                    evt.dataTransfer.dropEffect = 'none';
                                    evt.stopPropagation();
                                    evt.preventDefault();
                                    return;
                                }
                                else {
                                    $(element).attr('style', 'opacity: 0.5; fill: #f5f5f5; fill-opacity:0.5; border: dashed 5px #8E8E8E;');
                                    evt.dataTransfer.dropEffect = 'link';
                                    evt.stopPropagation();
                                    evt.preventDefault();
                                }
                            }
                            else {
                                evt.stopPropagation();
                                evt.preventDefault();
                                return;
                            }
                        };
                        var dragLeaveHandler = function (evt) {
                            var showingCreateOrModifyRecord = me.trimBodyPanel.currentActiveTabPanel().createOrModifyRecordPanelRef != null;
                            if (!Modernizr.draganddrop) {
                                return;
                            }
                            if (showingCreateOrModifyRecord) {
                                evt.stopPropagation();
                                evt.preventDefault();
                                return;
                            }
                            var element = document.getElementById(me.id);
                            $(element).removeAttr('style');
                            evt.stopPropagation();
                            evt.preventDefault();
                        };
                        var dropHandler = function (evt) {
                            var _files = evt.dataTransfer.files;
                            var fileCount = _files.length;
                            if (fileCount == 0) {
                                return;
                            }
                            if (fileCount == 1) {
                                var showingCreateOrModifyRecord = me.trimBodyPanel.currentActiveTabPanel().createOrModifyRecordPanelRef != null;
                                var rv = -1;
                                if (navigator.appName == 'Microsoft Internet Explorer') {
                                    var ua = navigator.userAgent;
                                    var re = new RegExp("MSIE ([0-9]{1,}[\.0-9]{0,})");
                                    if (re.exec(ua) != null)
                                        rv = parseFloat(RegExp.$1);
                                    if (rv > -1) {
                                        if (rv < 10.0) {
                                            evt.stopPropagation();
                                            evt.preventDefault();
                                            return;
                                        }
                                    }
                                }
                                var internalFlag = 0;
                                var element = document.getElementById(me.id);
                                var file;
                                if (evt.dataTransfer.items) {
                                    file = evt.dataTransfer.items[0];
                                }
                                else {
                                    file = evt.dataTransfer.files[0];
                                }
                                if (file == null) {
                                    $(element).removeAttr('style');
                                    evt.stopPropagation();
                                    evt.preventDefault();
                                    me.showError(HP.HPTRIM.Messages.web_folderNotSupported);
                                    return;
                                }
                                if (!file.type && (file.size % 4096 == 0 || !file.size) && !HP.HPTRIM.Utils.File.isMSG(file.getAsFile().name)) {
                                    $(element).removeAttr('style');
                                    evt.stopPropagation();
                                    evt.preventDefault();
                                    me.showError(HP.HPTRIM.Messages.web_folderNotSupported);
                                    return;
                                }
                                if (evt.dataTransfer.files.length == 0 && !(showingCreateOrModifyRecord)) {
                                    $(element).removeAttr('style');
                                    return;
                                }
                                if (showingCreateOrModifyRecord) {
                                    evt.stopPropagation();
                                    evt.preventDefault();
                                    return;
                                }
                                evt.stopPropagation();
                                evt.preventDefault();
                                $(element).removeAttr('style');
                                me.trimFileUploadComponent = new HP.HPTRIM.App.Widgets.TrimFileUploadComponent({ url: me.completeUrl, autoUpload: true, trimClient: me.trimClient });
                                me.trimFileUploadComponent.templateName('templates/Widgets/TRIMFileUpload');
                                me.trimFileUploadComponent.clearForm();
                                me.trimFileUploadComponent.files.removeAll();
                                App.ActionHandlers.CreateNewRecordHandler.getHandler(me)(true);
                                var _files = evt.dataTransfer.files;
                                var files;
                                var createOrModifyPanelRef_1 = me.trimBodyPanel.currentActiveTabPanel().createOrModifyRecordPanelRef;
                                createOrModifyPanelRef_1.dataEntryPanel.filePending(true);
                                me.uploadPending = true;
                                me.notificationWindow.message(HP.HPTRIM.Messages.web_record, HP.HPTRIM.Messages.web_pendingElectronicUpload);
                                me.notificationWindow.showNotification();
                                createOrModifyPanelRef_1.dataEntryPanel.form.subscribe(function () {
                                    createOrModifyPanelRef_1.dataEntryPanel.filePending(false);
                                    setTimeout(function () {
                                        var dropZone = document.getElementById('dropZone');
                                        if (dropZone != null) {
                                            var fileInput = $(this)[0];
                                            if (!Modernizr.draganddrop) {
                                                $('#dropZone > h3').addClass('hidden');
                                                $('#dropZone').removeClass('drag-and-drop');
                                                $('#notSupported').removeClass('hidden');
                                                $('#FileInputComponent').removeClass('hidden');
                                                $('#progressBar').addClass('hidden');
                                                $('#imagePreview').addClass('hidden');
                                                $('#cancelContainer').addClass('hidden');
                                                return;
                                            }
                                            if (_files.length > 0 && _files[0].size > 0) {
                                                files = _files;
                                            }
                                            else {
                                                if (_files[0] != undefined && _files[0].size == 0) {
                                                    me.notificationWindow.hideNotification();
                                                    setTimeout(function () {
                                                        me.notificationWindow.message(HP.HPTRIM.Messages.web_record, 'The pending file is 0Kb, we are unable to upload it.');
                                                        me.notificationWindow.showNotification();
                                                    }, 1000);
                                                }
                                                return;
                                            }
                                            _.each(files, function (file) {
                                                file.state = ko.observable('pending');
                                                file.error = ko.observable(null);
                                            });
                                            me.trimFileUploadComponent.files(files);
                                            me.trimFileUploadComponent.uploadedFiles([]);
                                            if (me.trimFileUploadComponent.options.autoUpload) {
                                                me.trimFileUploadComponent.uploadFile(me.trimFileUploadComponent.options.url, _files);
                                            }
                                            files = [];
                                            _files = [];
                                            fileInput = null;
                                            dropZone = null;
                                            if (evt.dataTransfer) {
                                                evt.dataTransfer.clearData("File");
                                            }
                                            me.notificationWindow.hideNotification();
                                        }
                                    }, 1500);
                                });
                            }
                            else if (fileCount > 1) {
                                var fu = me.multiFileUploadPanel.fileUploader;
                                fu.determineIfDragAndDropSupported();
                                fu.showDropZone(false);
                                me.multiFileUploadPanel.fileUploader.options.autoUpload = true;
                                me.trimMenuNavPanel.showFileUploadManager();
                                me.multiFileUploadPanel.newRecordInModal = function (callback, file, rty) {
                                    var f = _.bind(me.trimBodyPanel.newCreateRecordDataEntryPanel, me.trimBodyPanel);
                                    var createRecordPanel = f();
                                    createRecordPanel.dataEntryPanel.cancel = function () {
                                        me.trimDynamicOverlay().hideModal();
                                        ko.postbox.publish("NEW_RECORD_IN_MODAL_CANCEL");
                                    };
                                    createRecordPanel.dataEntryPanel.hideFileUploadComponent(true);
                                    var fileName = file.OriginalFileName.substring(1, file.OriginalFileName.length - 1);
                                    if (HP.HPTRIM.Utils.DomHelper.isIEBeforeEdge()) {
                                        var parts = fileName.split('\\');
                                        fileName = _.last(parts);
                                    }
                                    var title = "";
                                    var hasExtension = fileName.lastIndexOf(".");
                                    if (hasExtension > 0) {
                                        title = fileName.substr(0, hasExtension);
                                    }
                                    createRecordPanel.dataEntryPanel.recordTitle(title);
                                    if (rty) {
                                        createRecordPanel.commandPanel.recordTypeSelectedCallback(createRecordPanel.commandPanel.rtyField, rty);
                                        createRecordPanel.commandPanel.rtyField.isEditing(false);
                                        createRecordPanel.commandPanel.rtyField.setValue(rty);
                                        createRecordPanel.commandPanel.rtyField.setPurpose(3);
                                    }
                                    createRecordPanel.dataEntryPanel.form.subscribe(function (newForm) {
                                        newForm.fileNameOnServer(file.UploadedFileName);
                                        newForm.fileNameToDisplay(file.OriginalFileName);
                                    });
                                    createRecordPanel.doneCallBack = callback;
                                    me.trimDynamicOverlay().activatePanel(createRecordPanel);
                                    me.trimDynamicOverlay().showModal();
                                    me.multiFileUploadPanel.afterDone = function () {
                                        createRecordPanel.dataEntryPanel.cancel();
                                    };
                                };
                                var _files = evt.dataTransfer.files;
                                fu.files(_files);
                                fu.uploadedFiles([]);
                                me.notificationWindow.message(HP.HPTRIM.Messages.web_record, HP.HPTRIM.Messages.web_pendingElectronicUpload);
                                me.notificationWindow.showNotification();
                                _.each(fu.files(), function (file) {
                                    file.state = ko.observable('pending');
                                    file.error = ko.observable(null);
                                });
                                setTimeout(function () {
                                    if (fu.options.autoUpload) {
                                        fu.uploadFile(me.trimFileUploadComponent.options.url, _files);
                                    }
                                }, 1000);
                                var element = document.getElementById(me.id);
                                $(element).removeAttr('style');
                                evt.preventDefault();
                                return;
                            }
                        };
                        bodyPanelElement.addEventListener('dragover', dragOverHandler, false);
                        bodyPanelElement.addEventListener('dragleave', dragLeaveHandler, false);
                        bodyPanelElement.addEventListener('drop', dropHandler, false);
                    }
                };
                TRIMApp.NOTIFICATION_ERROR_TOPIC = "TRIMNotificationWindowError";
                return TRIMApp;
            }(HP.HPTRIM.Framework.Components.Layouts.ContainerPanel));
            App.TRIMApp = TRIMApp;
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            "use strict";
            var RawApplicationDefinition = (function () {
                function RawApplicationDefinition() {
                }
                RawApplicationDefinition.getDefinition = function () {
                    return {
                        "ObjectDef": [
                            {
                                "Id": "CheckinStyle",
                                "RequiredProductFeatureName": ['CheckinStyles'],
                                "CanAnybodyUpdate": true,
                                "UpdateCaption": HP.HPTRIM.Messages.web_update,
                                "CanAnybodyCreate": true,
                                "CanAnybodyDelete": true,
                                "RequiredObjectOnCreate": HP.HPTRIM.BaseObjectTypes.RecordType,
                                "HasReports": false,
                                "standardDataEntryForm": true,
                                "dataEntryForm": "",
                                "ItemListProperties": [
                                    {
                                        "location": "Icon",
                                        "value": "registeredmailbox_x24"
                                    },
                                    {
                                        "location": "TopLeft",
                                        "property": "CheckinStyleRecordType",
                                        "subProperty": "RecordTypeName",
                                    },
                                    {
                                        "location": "TopRight",
                                        "property": "CheckinStyleStyleOwner",
                                        "subProperty": "LocationFormattedName",
                                    },
                                    {
                                        "location": "Title",
                                        "property": "CheckinStyleName"
                                    }
                                ],
                                "Trays": [
                                    {
                                        "pageId": "1",
                                        "pageCaption": HP.HPTRIM.Messages.web_general,
                                        "pageItems": [
                                            {
                                                "name": "myMailboxes",
                                                "caption": HP.HPTRIM.Utils.String.format(HP.HPTRIM.Messages.web_myObject, [HP.HPTRIM.BaseObjectTypes.CheckinStyle.CaptionPlural]),
                                                "query": "owner:" + HPTRIM.Messages.bob_sbMe
                                            }
                                        ]
                                    }
                                ],
                                "updateTasks": [],
                                "navigationTasks": []
                            },
                            {
                                "Id": "ConsignmentApprover",
                                "RequiredProductFeatureName": ['AdvancedDisposal'],
                                "RequiredPermissions": ['ApproveDisposal'],
                                "CanAnybodyUpdate": true,
                                "UpdateCaption": HP.HPTRIM.Messages.web_update,
                                "CanAnybodyCreate": false,
                                "CanAnybodyDelete": false,
                                "HasReports": false,
                                "PanelCaptionOverride": HPTRIM.Messages.web_consignmentsTobeApproved,
                                "NavCaptionOverride": HPTRIM.BaseObjectTypes.Consignment.CaptionPlural,
                                "standardDataEntryForm": true,
                                "dataEntryForm": "",
                                "ItemListProperties": [
                                    {
                                        "location": "Icon",
                                        "value": "consignmentapprover_24",
                                    },
                                    {
                                        "location": "TopRight",
                                        "property": "ConsignmentApproverApprover",
                                        "subProperty": "LocationFormattedName",
                                    },
                                    {
                                        "location": "TopLeft",
                                        "property": "ConsignmentApproverConsignment",
                                        "subProperty": "ConsignmentNumber",
                                    },
                                    {
                                        "location": "Title",
                                        "property": "ConsignmentApproverConsignment",
                                        "subProperty": "ConsignmentDescription"
                                    },
                                    {
                                        "location": "Data",
                                        "property": "ConsignmentApproverStatus"
                                    },
                                    {
                                        "location": "Data",
                                        "property": "ConsignmentApproverApprovedOn"
                                    },
                                    {
                                        "location": "Data",
                                        "value": HPTRIM.Messages.web_consignmentNotAbleToBeProcessedFromWeb,
                                        "showCaption": false,
                                        "preConditions": [{
                                                "property": "ConsignmentApproverConsignment",
                                                "subProperty": "ConsignmentAuthenticateApprovals",
                                                "value": true,
                                            },
                                        ],
                                    },
                                ],
                                "Trays": [
                                    {
                                        "pageId": "1",
                                        "pageCaption": HP.HPTRIM.Messages.web_general,
                                        "pageItems": [
                                            {
                                                "name": "myConsignmentAprovals",
                                                "caption": HP.HPTRIM.BaseObjectTypes.Consignment.Caption + " " + HP.HPTRIM.Messages.web_approvals,
                                                "query": "approver:" + HPTRIM.Messages.bob_sbMe + " " + HPTRIM.Messages.core_and + " status:0",
                                                "isDefault": true,
                                            }
                                        ]
                                    }
                                ],
                                "updateTasks": [
                                    {
                                        "id": "approveConsigment",
                                        "caption": HP.HPTRIM.Messages.web_approve,
                                        "tooltip": HP.HPTRIM.Messages.web_approve,
                                        "successMessage": HP.HPTRIM.Messages.web_udpatedSuccessfully,
                                        "checkForWarnings": true,
                                        "icon": "activity_complete_24",
                                        "supportsTagged": true,
                                        "supportsSingle": true,
                                        "returnedType": "ApprovalConsignment",
                                        "objectUpdated": true,
                                        "objectDeleted": false,
                                        "enabledCommandId": "ApproveConsignment",
                                        "preConditions": [{
                                                "property": "ConsignmentApproverConsignment",
                                                "subProperty": "ConsignmentAuthenticateApprovals",
                                                "value": false,
                                            }],
                                        "serviceAction": {
                                            "name": "ApproveConsignment",
                                            "fullType": "HP.HPTRIM.ServiceModel.ApproveConsignment",
                                            "requiredParameters": []
                                        },
                                        "updatedProperties": [
                                            "EnabledCommandIds",
                                            "ConsignmentApproverStatus",
                                            "ConsignmentApproverApprovedOn",
                                        ]
                                    },
                                    {
                                        "id": "rejectConsigment",
                                        "caption": HP.HPTRIM.Messages.web_reject + " " + HPTRIM.BaseObjectTypes.Consignment.Caption,
                                        "tooltip": HP.HPTRIM.Messages.web_reject,
                                        "successMessage": HP.HPTRIM.Messages.web_udpatedSuccessfully,
                                        "checkForWarnings": true,
                                        "icon": "reject",
                                        "supportsTagged": true,
                                        "supportsSingle": true,
                                        "returnedType": "ApprovalConsignment",
                                        "objectUpdated": true,
                                        "objectDeleted": false,
                                        "enabledCommandId": "RejectConsignment",
                                        "preConditions": [{
                                                "property": "ConsignmentApproverConsignment",
                                                "subProperty": "ConsignmentAuthenticateApprovals",
                                                "value": false,
                                            }],
                                        "serviceAction": {
                                            "name": "RejectConsignment",
                                            "fullType": "HP.HPTRIM.ServiceModel.RejectConsignment",
                                            "requiredParameters": [
                                                {
                                                    "name": "RejectConsignmentReasonForRejection",
                                                    "isMandatory": true,
                                                    "type": "string",
                                                    "requiresInput": true,
                                                    "caption": HPTRIM.Messages.web_reason
                                                }
                                            ]
                                        },
                                        "updatedProperties": [
                                            "EnabledCommandIds",
                                            "ConsignmentApproverStatus",
                                            "ConsignmentApproverApprovedOn",
                                        ]
                                    },
                                ],
                                "navigationTasks": [
                                    {
                                        "id": "consignmentRecords",
                                        "caption": HP.HPTRIM.Messages.web_showRecords,
                                        "tooltip": HP.HPTRIM.Messages.web_showRecords,
                                        "supportsTagged": true,
                                        "supportsSingle": true,
                                        "returnedType": "Record",
                                        "icon": "gotorecord_24",
                                        "searchData": {
                                            "query": "consignment: {0}",
                                            "objectType": "Record",
                                            "parameters": [
                                                { "property": "ConsignmentApproverConsignment", "type": "Object" }
                                            ]
                                        }
                                    }, {
                                        "id": "consignmentRejections",
                                        "caption": HP.HPTRIM.Messages.web_showConsignmentRejections,
                                        "tooltip": HP.HPTRIM.Messages.web_showConsignmentRejections,
                                        "supportsTagged": true,
                                        "supportsSingle": true,
                                        "returnedType": "ConsignmentRejection",
                                        "icon": "consignmentrejection_24",
                                        "searchData": {
                                            "query": "consignment: {0}",
                                            "objectType": "ConsignmentRejection",
                                            "parameters": [
                                                { "property": "ConsignmentApproverConsignment", "type": "Object" }
                                            ]
                                        }
                                    },
                                ]
                            },
                            {
                                "Id": "ConsignmentRejection",
                                "RequiredProductFeatureName": ['AdvancedDisposal'],
                                "RequiredPermissions": ['ApproveDisposal'],
                                "CanAnybodyUpdate": true,
                                "UpdateCaption": HP.HPTRIM.Messages.web_update,
                                "CanAnybodyCreate": false,
                                "CanAnybodyDelete": false,
                                "isHiddenInNavPanel": true,
                                "HasReports": false,
                                "standardDataEntryForm": true,
                                "dataEntryForm": "",
                                "ItemListProperties": [
                                    {
                                        "location": "Icon",
                                        "value": "consignmentrejection_24",
                                    },
                                    {
                                        "location": "TopLeft",
                                        "property": "ConsignmentRejectionConsignment",
                                        "subProperty": "ConsignmentNumber"
                                    },
                                    {
                                        "location": "TopRight",
                                        "property": "ConsignmentRejectionConsignment",
                                        "subProperty": "ConsignmentDescription"
                                    },
                                    {
                                        "location": "Title",
                                        "property": "ConsignmentRejectionRecord",
                                        "subProperty": "RecordNumber"
                                    },
                                    {
                                        "location": "Data",
                                        "property": "ConsignmentRejectionRejectReason"
                                    },
                                    {
                                        "location": "Data",
                                        "property": "ConsignmentRejectionRejectedOn"
                                    },
                                    {
                                        "location": "Data",
                                        "property": "ConsignmentRejectionIsConfirmed"
                                    },
                                ],
                                "Trays": [
                                    {
                                        "pageId": "1",
                                        "pageCaption": HP.HPTRIM.Messages.web_general,
                                        "pageItems": [
                                            {
                                                "name": "myConsignmentRejections",
                                                "caption": HP.HPTRIM.Messages.web_approvals,
                                                "query": "not confirmed and approver:" + HPTRIM.Messages.bob_sbMe,
                                                "isDefault": true,
                                            }
                                        ]
                                    }
                                ],
                                "updateTasks": [
                                    {
                                        "id": "confirmConsignmentRejection",
                                        "caption": HP.HPTRIM.Messages.web_confirmRejection,
                                        "tooltip": HP.HPTRIM.Messages.web_confirmRejection,
                                        "successMessage": HP.HPTRIM.Messages.web_udpatedSuccessfully,
                                        "checkForWarnings": true,
                                        "icon": "activity_complete_24",
                                        "supportsTagged": true,
                                        "supportsSingle": true,
                                        "returnedType": "ConsignmentRejection",
                                        "objectUpdated": true,
                                        "objectDeleted": false,
                                        "enabledCommandId": "ConfirmRejection",
                                        "preConditions": [],
                                        "serviceAction": {
                                            "name": "ConfirmConsignmentRejection",
                                            "fullType": "HP.HPTRIM.ServiceModel.ConfirmConsignmentRejection",
                                            "requiredParameters": []
                                        },
                                        "updatedProperties": [
                                            "EnabledCommandIds",
                                            "ConsignmentRejectionRejectedOn",
                                            "ConsignmentRejectionIsConfirmed",
                                        ]
                                    },
                                    {
                                        "id": "cancelConsigmentReject",
                                        "caption": HP.HPTRIM.Messages.web_cancelRejection,
                                        "tooltip": HP.HPTRIM.Messages.web_cancelRejection,
                                        "successMessage": HP.HPTRIM.Messages.web_udpatedSuccessfully,
                                        "checkForWarnings": true,
                                        "icon": "reject",
                                        "supportsTagged": true,
                                        "supportsSingle": true,
                                        "returnedType": "ConsignmentRejection",
                                        "objectUpdated": true,
                                        "objectDeleted": true,
                                        "enabledCommandId": "CancelRejection",
                                        "preConditions": [],
                                        "serviceAction": {
                                            "name": "CancelConsignmentRejection",
                                            "fullType": "HP.HPTRIM.ServiceModel.CancelConsignmentRejection",
                                            "requiredParameters": []
                                        },
                                        "updatedProperties": [
                                            "EnabledCommandIds"
                                        ]
                                    },
                                ],
                                "navigationTasks": []
                            },
                            {
                                "Id": "History",
                                "RequiredProductFeatureName": [],
                                "RequiredPermissions": ['CanViewAuditEvents'],
                                "CanAnybodyUpdate": false,
                                "UpdateCaption": HP.HPTRIM.Messages.web_update,
                                "CanAnybodyCreate": false,
                                "CanAnybodyDelete": false,
                                "HasReports": true,
                                "standardDataEntryForm": false,
                                "dataEntryForm": "",
                                "isHiddenInNavPanel": true,
                                "ItemListProperties": [
                                    {
                                        "location": "Icon",
                                        "value": "rechistory_x24"
                                    },
                                    {
                                        "location": "TopLeft",
                                        "propertyOptions": [
                                            { "property": "HistoryRecord", "subProperty": "RecordNumber" },
                                            { "property": "HistoryLocation", "subProperty": "LocationFormattedName" },
                                            { "property": "HistoryActivity", "subProperty": "ActivityName" },
                                            { "property": "HistoryWorkflow", "subProperty": "WorkflowName" },
                                            { "property": "HistoryForObjectType" }],
                                    },
                                    {
                                        "location": "TopRight",
                                        "property": "HistoryLoginLocation",
                                        "subProperty": "LocationFormattedName",
                                    },
                                    {
                                        "location": "Title",
                                        "property": "HistoryEventDescription"
                                    }
                                ],
                                "Trays": [],
                                "updateTasks": [],
                                "navigationTasks": [
                                    {
                                        "id": "historyLoginLocation",
                                        "caption": HP.HPTRIM.Messages.web_responsibleLoc,
                                        "tooltip": HP.HPTRIM.Messages.web_responsibleLoc,
                                        "icon": "trmlocationsearch_x24",
                                        "supportsTagged": false,
                                        "supportsSingle": true,
                                        "returnedType": "Location",
                                        "searchData": {
                                            "query": "Uri: {0}",
                                            "objectType": "Location",
                                            "parameters": [
                                                { "property": "HistoryLoginLocation", "type": "Object" }
                                            ]
                                        }
                                    },
                                    {
                                        "id": "historyRecord",
                                        "icon": "showrecords_24",
                                        "caption": HP.HPTRIM.Messages.web_record,
                                        "tooltip": HP.HPTRIM.Messages.web_record,
                                        "supportsTagged": false,
                                        "supportsSingle": true,
                                        "returnedType": "Record",
                                        "searchData": {
                                            "query": "Uri: {0}",
                                            "objectType": "Record",
                                            "parameters": [
                                                { "property": "HistoryRecord", "type": "Object" }
                                            ]
                                        },
                                        "preConditions": [{
                                                "property": "HistoryRecord",
                                                "valueType": "Object",
                                                "valueRequired": true
                                            }],
                                    },
                                ]
                            },
                            {
                                "Id": "TodoItem",
                                "RequiredProductFeatureName": ["TodoItems"],
                                "CanAnybodyCreate": true,
                                "CanAnybodyDelete": true,
                                "CanAnybodyUpdate": true,
                                "UpdateCaption": HP.HPTRIM.Messages.web_updateTodoITem,
                                "HasReports": true,
                                "NotesPropertyName": "TodoItemNotes",
                                "CanUpdateNotes": true,
                                "NotesPropertyReadOnly": false,
                                "standardDataEntryForm": true,
                                "ChildObjects": [
                                    {
                                        "property": "ChildItemReferences",
                                        "type": "TodoItemItemReference",
                                        "caption": HP.HPTRIM.Messages.web_todoItemReferences,
                                        "tooltip": HP.HPTRIM.Messages.web_todoItemReferenceDocuments,
                                        "constructorArguments": [
                                            {
                                                "type": "enum",
                                                "caption": HP.HPTRIM.Messages.web_todoItemReferenceType,
                                                "enumName": "TodoReferenceType",
                                                "propertyName": "TodoItemItemReferenceReferenceType"
                                            },
                                            {
                                                "type": "object",
                                                "objectType": "Record",
                                                "caption": HP.HPTRIM.Messages.web_todoItemReferenceRecord,
                                                "propertyName": "TodoItemItemReferenceRecord"
                                            }
                                        ]
                                    }
                                ],
                                "Trays": [
                                    {
                                        "pageId": "1",
                                        "pageCaption": HP.HPTRIM.Messages.web_search,
                                        "pageItems": [
                                            {
                                                "name": "myTodoItems",
                                                "caption": HP.HPTRIM.Messages.web_myTodoItems,
                                                "query": "assignee:" + HPTRIM.Messages.bob_sbMe + " " + HPTRIM.Messages.core_and + " " + HPTRIM.Messages.web_Not + " done",
                                                "sortBy": ""
                                            }
                                        ]
                                    }
                                ],
                                "ItemListProperties": [
                                    {
                                        "location": "Icon",
                                        "property": "Icon",
                                        "subProperty": "Id"
                                    },
                                    {
                                        "location": "Title",
                                        "property": "TodoItemTodo"
                                    },
                                    {
                                        "location": "Data",
                                        "property": "TodoItemDateDue",
                                        "capitaliseCaption": true,
                                        "highlightProperties": [{
                                                "property": "TodoItemIsOverdue",
                                                "value": true
                                            },
                                            {
                                                "property": "TodoItemIsComplete",
                                                "value": false
                                            }]
                                    },
                                    {
                                        "location": "TopLeft",
                                        "property": "TodoItemIsComplete",
                                        "showCaption": false,
                                        "capitaliseText": true
                                    },
                                    {
                                        "location": "Data",
                                        "property": "TodoItemAssignee",
                                        "subProperty": "LocationFormattedName",
                                        "showCaption": true,
                                        "capitaliseCaption": true,
                                    },
                                    {
                                        "location": "DetailData",
                                        "property": "TodoItemDateDone",
                                        "defaultValue": "",
                                    }
                                ],
                                "navigationTasks": [],
                                "updateTasks": [
                                    {
                                        "id": "completeTodoItemTasks",
                                        "caption": HP.HPTRIM.Messages.web_complete,
                                        "tooltip": HP.HPTRIM.Messages.web_todoItemCompleteToolTip,
                                        "successMessage": HP.HPTRIM.Messages.web_udpatedSuccessfully,
                                        "checkForWarnings": true,
                                        "icon": "activity_complete_24",
                                        "supportsTagged": true,
                                        "supportsSingle": true,
                                        "returnedType": "TodoItem",
                                        "objectUpdated": true,
                                        "objectDeleted": false,
                                        "enabledCommandId": "CompleteTodo",
                                        "preConditions": [{
                                                "property": "TodoItemIsComplete",
                                                "value": false
                                            }],
                                        "propertiesUpdated": [
                                            {
                                                "propertyId": "TodoItemDateDone",
                                                "requiresInput": false,
                                            }
                                        ],
                                        "updatedProperties": [
                                            "EnabledCommandIds",
                                            "TodoItemIsComplete",
                                            "TodoItemDateDone",
                                            "DateLastUpdated",
                                            "LastUpdatedBy"
                                        ]
                                    },
                                    {
                                        "id": "uncompleteTodoItemTasks",
                                        "caption": HP.HPTRIM.Messages.web_uncomplete,
                                        "tooltip": HP.HPTRIM.Messages.web_todoItemUncompleteToolTip,
                                        "successMessage": HP.HPTRIM.Messages.web_udpatedSuccessfully,
                                        "checkForWarnings": true,
                                        "icon": "uncompleteactivity_x24",
                                        "supportsTagged": true,
                                        "supportsSingle": true,
                                        "returnedType": "TodoItem",
                                        "objectUpdated": true,
                                        "objectDeleted": false,
                                        "enabledCommandId": "UncompleteTodo",
                                        "preConditions": [{
                                                "property": "TodoItemIsComplete",
                                                "value": true
                                            }],
                                        "propertiesUpdated": [
                                            {
                                                "propertyId": "TodoItemDateDone",
                                                "clearValue": true,
                                                "requiresInput": false,
                                            }
                                        ],
                                        "updatedProperties": [
                                            "EnabledCommandIds",
                                            "TodoItemIsComplete",
                                            "TodoItemDateDone",
                                            "DateLastUpdated",
                                            "LastUpdatedBy"
                                        ]
                                    },
                                    {
                                        "id": "reassignTodoItem",
                                        "caption": HP.HPTRIM.Messages.web_reassign,
                                        "tooltip": HP.HPTRIM.Messages.web_reassign,
                                        "successMessage": HP.HPTRIM.Messages.web_udpatedSuccessfully,
                                        "checkForWarnings": true,
                                        "icon": "setAssignee",
                                        "supportsTagged": true,
                                        "supportsSingle": true,
                                        "returnedType": "TodoItem",
                                        "objectUpdated": true,
                                        "objectDeleted": false,
                                        "enabledCommandId": "Properties",
                                        "requiredProperties": ["TodoItemAssignee"],
                                        "propertiesUpdated": [
                                            {
                                                "propertyId": "TodoItemAssignee",
                                                "purpose": HPTRIM.LocationPurpose.TodoAssignee,
                                                "requiresInput": true,
                                                "allowClearValue": false,
                                            }
                                        ],
                                        "updatedProperties": [
                                            "TodoItemAssignee",
                                            "DateLastUpdated",
                                            "LastUpdatedBy"
                                        ]
                                    }
                                ],
                                "hasFilters": true,
                                "allowFilterDefaultSave": false,
                                "filterList": [
                                    {
                                        "caption": HP.HPTRIM.Messages.web_filterCompletedItems,
                                        "name": "completedActivities",
                                        "clauseId": "TodoItemDone",
                                        "clauseString": "done",
                                        "format": "boolean",
                                        "oneInGroupMustBeOn": false,
                                        "reversed": true,
                                        "options": [
                                            { "caption": HP.HPTRIM.Messages.web_showCompletedActivities, "name": 'showCompleted', "negated": true },
                                        ],
                                    },
                                    {
                                        "name": "TodoItemItemPriority",
                                        "caption": HP.HPTRIM.Messages.web_selectPriorityTypesToBeFiltered,
                                        "clauseId": "TodoItemPriority",
                                        "format": "enum",
                                        "enumName": "Priority",
                                        "clauseString": "priority",
                                    }
                                ],
                            },
                            {
                                "Id": "Request",
                                "RequiredPermissions": ["RequestWorker"],
                                "RequiredProductFeatureName": ["Requests", "AdvancedRequests"],
                                "CanAnybodyCreate": false,
                                "CanAnybodyDelete": true,
                                "DeletePermission": "RequestAdministrator",
                                "CanAnybodyUpdate": false,
                                "UpdatePermission": "RequestAdministrator",
                                "HasReports": true,
                                "standardDataEntryForm": true,
                                "NotesPropertyName": "RequestNotes",
                                "CanUpdateNotes": true,
                                "NotesPropertyReadOnly": true,
                                "dataEntryForm": "",
                                "Trays": [
                                    {
                                        "pageId": "general",
                                        "pageCaption": HP.HPTRIM.Messages.web_general,
                                        "pageItems": [
                                            {
                                                "name": "general_all",
                                                "query": "all",
                                                "caption": HP.HPTRIM.Messages.web_All
                                            },
                                            {
                                                "name": "general_highAndMediumPriority",
                                                "query": "status:0,1 " + HPTRIM.Messages.core_and + " priority:0,1 " + HPTRIM.Messages.core_and + " record:[home:[administeredby:" + HPTRIM.Messages.bob_sbMe + "]]",
                                                "caption": HP.HPTRIM.Messages.web_AllHighAndMediumPriority
                                            },
                                            {
                                                "name": "general_myRecordRequestsNotYetActioned",
                                                "query": "status:1 " + HPTRIM.Messages.core_and + " record:[requestor:" + HPTRIM.Messages.bob_sbMe + "]",
                                                "caption": HP.HPTRIM.Messages.web_myRecordRequestsNotYetActioned
                                            },
                                            {
                                                "name": "general_allRequestsAwaitingApproval",
                                                "query": "status:0 " + HPTRIM.Messages.core_and + " record:[home:[administeredby:" + HPTRIM.Messages.bob_sbMe + "]]",
                                                "caption": HP.HPTRIM.Messages.web_AllRequestsNeedToApprove
                                            }
                                        ]
                                    },
                                    {
                                        "pageId": "new",
                                        "pageCaption": HP.HPTRIM.Messages.web_NewRecordPickups,
                                        "pageItems": [
                                            {
                                                "name": "new_approvals",
                                                "query": "status:0 " + HPTRIM.Messages.core_and + " type:3 " + HPTRIM.Messages.core_and + " record:[home:[administeredby:" + HPTRIM.Messages.bob_sbMe + "]]",
                                                "caption": HP.HPTRIM.Messages.web_approvals
                                            }
                                        ]
                                    },
                                    {
                                        "pageId": "returns",
                                        "pageCaption": HP.HPTRIM.Messages.web_RecordReturns,
                                        "pageItems": [
                                            {
                                                "name": "return_approvals",
                                                "caption": HP.HPTRIM.Messages.web_approvals,
                                                "query": "status:0 " + HPTRIM.Messages.core_and + " type:4 " + HPTRIM.Messages.core_and + " record:[home:[administeredby:" + HPTRIM.Messages.bob_sbMe + "]]",
                                                "isDefault": true
                                            },
                                            {
                                                "name": "return_pickupList",
                                                "caption": HP.HPTRIM.Messages.web_pickups,
                                                "query": "status:1 " + HPTRIM.Messages.core_and + " type:3 " + HPTRIM.Messages.core_and + " record:[home:[administeredby:" + HPTRIM.Messages.bob_sbMe + "]]",
                                            }
                                        ]
                                    },
                                    {
                                        "pageId": "temp",
                                        "pageCaption": HP.HPTRIM.Messages.web_TemporaryRetrievals,
                                        "pageItems": [
                                            {
                                                "name": "temp_approvals",
                                                "caption": HP.HPTRIM.Messages.web_approvals,
                                                "query": "status:0 " + HPTRIM.Messages.core_and + " type:0,1 " + HPTRIM.Messages.core_and + " record:[home:[administeredby:" + HPTRIM.Messages.bob_sbMe + "]]",
                                            },
                                            {
                                                "name": "temp_deliveries",
                                                "caption": HP.HPTRIM.Messages.web_deliveries,
                                                "query": "status:1 " + HPTRIM.Messages.core_and + " type:0,1 " + HPTRIM.Messages.core_and + " record:[home:[administeredby:" + HPTRIM.Messages.bob_sbMe + "]] " + HPTRIM.Messages.core_and + " record:[atHome]",
                                            }
                                        ]
                                    },
                                    {
                                        "pageId": "permanent",
                                        "pageCaption": HP.HPTRIM.Messages.web_PermanentRetrievals,
                                        "pageItems": [
                                            {
                                                "name": "permanent_approvals",
                                                "caption": HP.HPTRIM.Messages.web_approvals,
                                                "query": "status:0 " + HPTRIM.Messages.core_and + " type:2 " + HPTRIM.Messages.core_and + "  record:[home:[administeredby:" + HPTRIM.Messages.bob_sbMe + "]]",
                                            },
                                            {
                                                "name": "permanent_pickupList",
                                                "caption": HP.HPTRIM.Messages.web_pickups,
                                                "query": "status:1 " + HPTRIM.Messages.core_and + " type:2 " + HPTRIM.Messages.core_and + " record:[home:[administeredby:" + HPTRIM.Messages.bob_sbMe + "]] " + HPTRIM.Messages.core_and + " record:[atHome]",
                                            },
                                            {
                                                "name": "permanent_deliveries",
                                                "caption": HP.HPTRIM.Messages.web_deliveries,
                                                "query": "status:1 " + HPTRIM.Messages.core_and + " type:2 " + HPTRIM.Messages.core_and + " record:[home:[administeredby:" + HPTRIM.Messages.bob_sbMe + "]] " + HPTRIM.Messages.core_and + " record:[atHome]",
                                            },
                                            {
                                                "name": "permanent_recordsInCirculation",
                                                "caption": HP.HPTRIM.Messages.web_RecordsInCirculation,
                                                "query": "status:1 " + HPTRIM.Messages.core_and + " type:0,1,2 " + HPTRIM.Messages.core_and + " record:[home:[administeredby:" + HPTRIM.Messages.bob_sbMe + "]] " + HPTRIM.Messages.web_Not + " record:[atHome]",
                                            }
                                        ]
                                    }
                                ],
                                "ItemListProperties": [
                                    {
                                        "location": "Icon",
                                        "value": "recrequests_x32"
                                    },
                                    {
                                        "location": "TopLeft",
                                        "property": "RequestRequestType"
                                    },
                                    {
                                        "location": "TopRight",
                                        "property": "RequestRecord",
                                        "subProperty": "RecordNumber"
                                    },
                                    {
                                        "location": "Title",
                                        "property": "RequestRecord",
                                        "subProperty": "RecordTitle"
                                    },
                                    {
                                        "location": "Data",
                                        "property": "RequestStatus",
                                        "capitaliseText": true
                                    },
                                    {
                                        "location": "Data",
                                        "property": "RequestRequestor",
                                        "subProperty": "LocationFormattedName",
                                        "showCaption": true,
                                        "capitaliseCaption": true
                                    },
                                    {
                                        "location": "Data",
                                        "property": "RequestDueDate",
                                        "capitaliseCaption": true
                                    },
                                    {
                                        "location": "DetailData",
                                        "property": "RequestDateCompleted",
                                        "defaultValue": "",
                                    },
                                ],
                                "updateTasks": [
                                    {
                                        "id": "approveRequest",
                                        "caption": HP.HPTRIM.Messages.web_approve,
                                        "tooltip": HP.HPTRIM.Messages.web_approve,
                                        "successMessage": HP.HPTRIM.Messages.web_udpatedSuccessfully,
                                        "checkForWarnings": true,
                                        "icon": "accept",
                                        "supportsTagged": true,
                                        "supportsSingle": true,
                                        "returnedType": "Request",
                                        "objectUpdated": true,
                                        "objectDeleted": false,
                                        "preConditions": [{
                                                "property": "RequestIsComplete",
                                                "value": false
                                            },
                                            {
                                                "property": "RequestStatus",
                                                "value": "NewAwaitingApproval"
                                            }],
                                        "enabledCommandId": "ApproveRequest",
                                        "propertiesUpdated": [
                                            {
                                                "propertyId": "RequestStatus",
                                                "value": "New",
                                                "requiresInput": false,
                                            }
                                        ],
                                        "taggedErrorProperty": "RequestDescription",
                                        "updatedProperties": [
                                            "RequestStatus",
                                            "RequestIsComplete",
                                            "EnabledCommandIds",
                                            "RequestDateCompleted",
                                            "DateLastUpdated",
                                            "LastUpdatedBy"
                                        ],
                                    },
                                    {
                                        "id": "rejectRequest",
                                        "caption": HP.HPTRIM.Messages.web_reject,
                                        "tooltip": HP.HPTRIM.Messages.web_reject,
                                        "successMessage": HP.HPTRIM.Messages.web_udpatedSuccessfully,
                                        "checkForWarnings": true,
                                        "icon": "reject",
                                        "supportsTagged": true,
                                        "supportsSingle": true,
                                        "returnedType": "Request",
                                        "objectUpdated": true,
                                        "objectDeleted": false,
                                        "preConditions": [{
                                                "property": "RequestIsComplete",
                                                "value": false
                                            },
                                            {
                                                "property": "RequestStatus",
                                                "value": "NewAwaitingApproval"
                                            }],
                                        "enabledCommandId": "RejectRequest",
                                        "propertiesUpdated": [
                                            {
                                                "propertyId": "RequestStatus",
                                                "value": "Denied",
                                                "requiresInput": false,
                                            }
                                        ],
                                        "taggedErrorProperty": "RequestDescription",
                                        "updatedProperties": [
                                            "RequestStatus",
                                            "RequestIsComplete",
                                            "RequestDateCompleted",
                                            "DateLastUpdated",
                                            "LastUpdatedBy"
                                        ],
                                    },
                                    {
                                        "id": "completeRequestTask",
                                        "caption": HP.HPTRIM.Messages.web_complete,
                                        "tooltip": HP.HPTRIM.Messages.web_CompleteRequest,
                                        "successMessage": HP.HPTRIM.Messages.web_udpatedSuccessfully,
                                        "checkForWarnings": true,
                                        "icon": "activity_complete_24",
                                        "enabledCommandId": "CompleteRequest",
                                        "supportsTagged": true,
                                        "supportsSingle": true,
                                        "returnedType": "Request",
                                        "objectUpdated": true,
                                        "objectDeleted": false,
                                        "preConditions": [{
                                                "property": "RequestIsComplete",
                                                "value": false
                                            }],
                                        "serviceAction": {
                                            "name": "CompleteRequest",
                                            "fullType": "HP.HPTRIM.ServiceModel.CompleteRequest"
                                        },
                                        "taggedErrorProperty": "RequestDescription",
                                        "updatedProperties": [
                                            "RequestStatus",
                                            "RequestIsComplete",
                                            "RequestDateCompleted",
                                            "DateLastUpdated",
                                            "LastUpdatedBy"
                                        ]
                                    },
                                ],
                                "navigationTasks": []
                            },
                            {
                                "Id": "TodoItemItemReference",
                                "RequiredProductFeatureName": ["TodoItems"],
                                "ButtonCaption": HP.HPTRIM.Messages.web_todoItemReferences,
                                "ButtonToolTip": HP.HPTRIM.Messages.web_todoItemReferenceDocuments,
                                "CanAnybodyCreate": true,
                                "CanAnybodyUpdate": false,
                                "CanAnybodyDelete": true,
                                "standardDataEntryForm": true,
                                "dataEntryForm": "",
                                "ItemListProperties": [
                                    {
                                        "location": "Icon",
                                        "property": "TodoItemItemReferenceRecord",
                                        "subProperty": "Icon",
                                        "defaultValue": "utytodoitem_x32"
                                    },
                                    {
                                        "location": "TopLeft",
                                        "property": "TodoItemItemReferenceReferenceType"
                                    },
                                    {
                                        "location": "Title",
                                        "property": "TodoItemItemReferenceDetails"
                                    }
                                ],
                                "Trays": [],
                                "navigationTasks": [
                                    {
                                        "id": "todoItemItemReferenceLinkedRecord",
                                        "caption": HP.HPTRIM.Messages.web_navigateToLinkedRecord,
                                        "tooltip": HP.HPTRIM.Messages.web_navigateToLinkedRecord,
                                        "icon": "navigateUpFolderIcon",
                                        "supportsTagged": false,
                                        "supportsSingle": true,
                                        "returnedType": "Record",
                                        "requiredProperty": "TodoItemItemReferenceRecord",
                                        "searchData": {
                                            "query": "uri: {0}",
                                            "objectType": "Record",
                                            "parameters": [
                                                { "property": "TodoItemItemReferenceRecord", "type": "Object" }
                                            ]
                                        }
                                    }
                                ],
                                "updateTasks": [],
                                "viewTask": {
                                    "id": "viewTodoItemItemReferenceLinkedRecord",
                                    "caption": HP.HPTRIM.Messages.vwr_tbar_view,
                                    "tooltip": HP.HPTRIM.Messages.web_viewReferencedDocument,
                                    "property": "TodoItemItemReferenceRecord"
                                }
                            },
                            {
                                "Id": "UserLabel",
                                "RequiredProductFeatureName": ["Labels"],
                                "CanAnybodyCreate": true,
                                "CanAnybodyUpdate": true,
                                "UpdateCaption": HP.HPTRIM.Messages.web_userLabel,
                                "CanAnybodyDelete": true,
                                "DeleteCaption": HP.HPTRIM.Messages.web_delete,
                                "standardDataEntryForm": true,
                                "dataEntryForm": "",
                                "ItemListProperties": [
                                    {
                                        "location": "Icon",
                                        "property": "Icon",
                                        "subProperty": "Id"
                                    },
                                    {
                                        "location": "Title",
                                        "property": "UserLabelName",
                                        "isEmail": false,
                                        "defaultValue": ""
                                    },
                                    {
                                        "location": "TopLeft",
                                        "property": "UserLabelFullName",
                                    },
                                    {
                                        "location": "TopRight",
                                        "property": "UserLabelOwner",
                                        "subProperty": "LocationFormattedName",
                                        "defaultValue": ""
                                    },
                                    {
                                        "location": "Data",
                                        "property": "DateLastUpdated",
                                        "onlyShownInDetailPanel": true,
                                    },
                                ],
                                "Trays": [
                                    {
                                        "pageId": "favoriteUserLabelPage",
                                        "pageCaption": HP.HPTRIM.Messages.web_favorites,
                                        "pageItems": [
                                            {
                                                "name": "topLevelUserLabel",
                                                "caption": HP.HPTRIM.Messages.web_topLevel,
                                                "query": "top"
                                            },
                                        ]
                                    },
                                ],
                                "navigationTasks": [
                                    {
                                        "id": "userLabelParent",
                                        "caption": HP.HPTRIM.Messages.web_navigateToParentUserLabel,
                                        "tooltip": HP.HPTRIM.Messages.web_navigateToParentUserLabel,
                                        "icon": "navigateUpFolderIcon",
                                        "requiredProperty": "UserLabelParentLabel",
                                        "supportsTagged": false,
                                        "supportsSingle": true,
                                        "returnedType": "UserLabel",
                                        "preConditions": [{
                                                "property": "UserLabelParentLabel",
                                                "valueType": "Object",
                                                "value": true
                                            }],
                                        "searchData": {
                                            "query": "uri: {0}",
                                            "objectType": "UserLabel",
                                            "parameters": [
                                                { "property": "UserLabelParentLabel", "type": "Object" }
                                            ]
                                        }
                                    },
                                    {
                                        "id": "userLabelChildern",
                                        "caption": HP.HPTRIM.Messages.web_navigateToSubUserLabel,
                                        "tooltip": HP.HPTRIM.Messages.web_navigateToSubUserLabel,
                                        "icon": "lowerlabel_24",
                                        "requiredProperty": "UserLabelParentLabel",
                                        "supportsTagged": false,
                                        "supportsSingle": true,
                                        "returnedType": "UserLabel",
                                        "preConditions": [{
                                                "property": "PossiblyHasSubordinates",
                                                "valueType": "Boolean",
                                                "value": true
                                            }],
                                        "searchData": {
                                            "query": "parent: {0}",
                                            "objectType": "UserLabel",
                                            "parameters": [
                                                { "property": "Uri", "type": "Uri" },
                                            ]
                                        },
                                    },
                                    {
                                        "id": "userLabelRecords",
                                        "caption": HP.HPTRIM.Messages.web_showRecords,
                                        "tooltip": HP.HPTRIM.Messages.web_showRecords,
                                        "icon": "labels-record_24",
                                        "supportsTagged": false,
                                        "supportsSingle": true,
                                        "returnedType": "Record",
                                        "searchData": {
                                            "query": "label:{0}",
                                            "objectType": "Record",
                                            "parameters": [
                                                { "property": "Uri", "type": "Uri" },
                                            ]
                                        }
                                    },
                                    {
                                        "id": "userLabelLocations",
                                        "caption": HP.HPTRIM.Messages.web_showLocations,
                                        "tooltip": HP.HPTRIM.Messages.web_showLocations,
                                        "icon": "labels-locations_24",
                                        "supportsTagged": false,
                                        "supportsSingle": true,
                                        "returnedType": "Location",
                                        "searchData": {
                                            "query": "label:{0}",
                                            "objectType": "Location",
                                            "parameters": [
                                                { "property": "Uri", "type": "Uri" },
                                            ]
                                        }
                                    },
                                ],
                                "updateTasks": [],
                                "createTasks": [
                                    {
                                        "id": "userLabelNewSubLevel",
                                        "caption": HP.HPTRIM.Messages.web_createLowerLevelItem,
                                        "tooltip": HP.HPTRIM.Messages.web_createLowerLevelItem,
                                        "icon": "newuserlabel_24",
                                        "objectType": "UserLabel",
                                        "requiredProperties": ["UserLabelFullName"],
                                        "returnedType": "UserLabel",
                                        "successMessage": HPTRIM.Messages.web_userLabelCreated,
                                        "defaultValues": [
                                            { "name": "UserLabelParentLabel", "type": "object", "displayProperty": "UserLabelFullName", "iconProperty": "Icon" },
                                        ],
                                    },
                                ],
                            },
                            {
                                "Id": "SearchForm",
                                "CanAnybodyCreate": false,
                                "CanAnybodyUpdate": false,
                                "UpdateCaption": HP.HPTRIM.Messages.web_update,
                                "CanAnybodyDelete": false,
                                "DeleteCaption": HP.HPTRIM.Messages.web_delete,
                                "standardDataEntryForm": true,
                                "dataEntryForm": "",
                                "isHiddenInNavPanel": true,
                                "ItemListProperties": [
                                    {
                                        "location": "Icon",
                                        "property": "Icon",
                                        "subProperty": "Id"
                                    },
                                    {
                                        "location": "Title",
                                        "property": "SearchFormName"
                                    },
                                    {
                                        "location": "TopLeft",
                                        "property": "SearchFormObjectType"
                                    },
                                    {
                                        "location": "TopRight",
                                        "property": "SearchFormName",
                                        "subProperty": "SearchFormName",
                                        "showCaption": true,
                                        "defaultValue": ""
                                    },
                                    {
                                        "location": "Data",
                                        "property": "SearchFormDescription",
                                        "isEmail": false,
                                        "defaultValue": ""
                                    },
                                    {
                                        "location": "Data",
                                        "property": "SearchFormName",
                                        "subProperty": "AsString",
                                        "showCaption": true,
                                        "isEmail": false,
                                        "defaultValue": ""
                                    },
                                ],
                                "Trays": [
                                    {
                                        "pageId": "favoriteFormSearchPage",
                                        "pageCaption": HP.HPTRIM.Messages.web_favorites,
                                        "pageItems": [
                                            {
                                                "name": "favoriteClassifications",
                                                "caption": HP.HPTRIM.Messages.web_favorites,
                                                "query": "favorite"
                                            },
                                            {
                                                "name": "topLevelClassifications",
                                                "caption": HPTRIM.Messages.web_allSearchForms,
                                                "query": "all"
                                            }
                                        ]
                                    },
                                ],
                                "navigationTasks": [],
                                "updateTasks": [],
                            },
                            {
                                "Id": "Location",
                                "CanAnybodyCreate": true,
                                "CreatePermissions": ["CreateInternalLocation", "CreateExternalLocation"],
                                "CanAnybodyUpdate": true,
                                "UpdatePermission": "LimitedModInternalLocation",
                                "UpdateCaption": HP.HPTRIM.Messages.web_updateLocationCaption,
                                "CanAnybodyDelete": true,
                                "DeletePermission": "DeleteInternalLocation",
                                "HasReports": true,
                                "NotesPropertyName": "LocationNotes",
                                "CanUpdateNotes": true,
                                "NotesPropertyReadOnly": false,
                                "standardDataEntryForm": false,
                                "mandatoryProperties": ["LocationIsWithin"],
                                "ChildObjects": [],
                                "ItemListProperties": [
                                    {
                                        "location": "Icon",
                                        "property": "Icon",
                                        "subProperty": "Id"
                                    },
                                    {
                                        "location": "Title",
                                        "property": "LocationFormattedName"
                                    },
                                    {
                                        "location": "TopLeft",
                                        "property": "LocationTypeOfLocation"
                                    },
                                    {
                                        "location": "TopRight",
                                        "property": "LocationPhoneNumber",
                                        "defaultValue": "",
                                    },
                                    {
                                        "location": "Data",
                                        "property": "LocationInternetMailAddress",
                                        "isEmail": true,
                                        "defaultValue": "",
                                    },
                                    {
                                        "location": "DetailData",
                                        "property": "LocationJobDescription",
                                        "defaultValue": "",
                                    },
                                    {
                                        "location": "DetailData",
                                        "property": "LocationFormattedAddress",
                                        "defaultValue": "",
                                    },
                                    {
                                        "location": "DetailData",
                                        "property": "LocationWebPage",
                                        "defaultValue": "",
                                    },
                                    {
                                        "location": "DetailDataRight",
                                        "property": "LocationUserType",
                                        "requiredPermission": "ViewProfile",
                                        "defaultValue": ""
                                    },
                                ],
                                "Trays": [
                                    {
                                        "pageId": "generalLocation",
                                        "pageCaption": HP.HPTRIM.Messages.web_general,
                                        "pageItems": [
                                            {
                                                "name": "favoriteLocations",
                                                "caption": HP.HPTRIM.Messages.web_favorites,
                                                "query": "favorite"
                                            }
                                        ]
                                    }
                                ],
                                "navigationTasks": [
                                    {
                                        "id": "recordGroup",
                                        "isGroup": true,
                                        "caption": HP.HPTRIM.Messages.web_locationShowCaption,
                                        "tooltip": HP.HPTRIM.Messages.web_locationShowToolTip,
                                        "tasks": [
                                            {
                                                "id": "contactRecords",
                                                "caption": HP.HPTRIM.Messages.web_locationContactRecords,
                                                "tooltip": HP.HPTRIM.Messages.web_locationContactRecords,
                                                "supportsTagged": true,
                                                "supportsSingle": true,
                                                "returnedType": "Record",
                                                "searchData": {
                                                    "query": "contact: {0}",
                                                    "objectType": "Record",
                                                    "parameters": [
                                                        { "property": "Uri", "type": "Uri" }
                                                    ]
                                                }
                                            },
                                            {
                                                "id": "assignedRecords",
                                                "caption": HP.HPTRIM.Messages.web_locationAssignedRecords,
                                                "tooltip": HP.HPTRIM.Messages.web_locationAssignedRecords,
                                                "supportsTagged": true,
                                                "supportsSingle": true,
                                                "returnedType": "Record",
                                                "searchData": {
                                                    "query": "assignee: {0}",
                                                    "objectType": "Record",
                                                    "parameters": [
                                                        { "property": "Uri", "type": "Uri" }
                                                    ]
                                                }
                                            },
                                            {
                                                "id": "createdRecords",
                                                "caption": HP.HPTRIM.Messages.web_locationCreatedRecords,
                                                "tooltip": HP.HPTRIM.Messages.web_locationCreatedRecords,
                                                "supportsTagged": true,
                                                "supportsSingle": true,
                                                "returnedType": "Record",
                                                "searchData": {
                                                    "query": "creator: {0}",
                                                    "objectType": "Record",
                                                    "parameters": [
                                                        { "property": "Uri", "type": "Uri" }
                                                    ]
                                                }
                                            },
                                            {
                                                "id": "ownedRecords",
                                                "caption": HP.HPTRIM.Messages.web_locationOwnedRecords,
                                                "tooltip": HP.HPTRIM.Messages.web_locationOwnedRecords,
                                                "supportsTagged": true,
                                                "supportsSingle": true,
                                                "returnedType": "Record",
                                                "searchData": {
                                                    "query": "owner: {0}",
                                                    "objectType": "Record",
                                                    "parameters": [
                                                        { "property": "Uri", "type": "Uri" }
                                                    ]
                                                }
                                            },
                                            {
                                                "id": "checkedOutRecords",
                                                "caption": HP.HPTRIM.Messages.web_locationCheckedOutRecords,
                                                "tooltip": HP.HPTRIM.Messages.web_locationCheckedOutRecords,
                                                "supportsTagged": true,
                                                "supportsSingle": true,
                                                "returnedType": "Record",
                                                "searchData": {
                                                    "query": "checkedOutBy: {0}",
                                                    "objectType": "Record",
                                                    "parameters": [
                                                        { "property": "Uri", "type": "Uri" }
                                                    ]
                                                }
                                            },
                                            {
                                                "id": "assignedActivities",
                                                "caption": HP.HPTRIM.Messages.web_activities,
                                                "tooltip": HP.HPTRIM.Messages.web_activities,
                                                "supportsTagged": true,
                                                "supportsSingle": true,
                                                "returnedType": "Activity",
                                                "searchData": {
                                                    "query": "assignee: {0}",
                                                    "objectType": "Activity",
                                                    "parameters": [
                                                        { "property": "Uri", "type": "Uri" }
                                                    ]
                                                }
                                            },
                                            {
                                                "id": "assignedTodoitems",
                                                "caption": HP.HPTRIM.Messages.web_todoItems,
                                                "tooltip": HP.HPTRIM.Messages.web_todoItems,
                                                "supportsTagged": true,
                                                "supportsSingle": true,
                                                "returnedType": "TodoItem",
                                                "searchData": {
                                                    "query": "assignee: {0}",
                                                    "objectType": "TodoItem",
                                                    "parameters": [
                                                        { "property": "Uri", "type": "Uri" }
                                                    ]
                                                }
                                            },
                                            {
                                                "id": "forRequests",
                                                "caption": HP.HPTRIM.Messages.web_locationRequestsFor,
                                                "tooltip": HP.HPTRIM.Messages.web_locationRequestsFor,
                                                "supportsTagged": true,
                                                "supportsSingle": true,
                                                "returnedType": "Request",
                                                "searchData": {
                                                    "query": "by: {0}",
                                                    "objectType": "Request",
                                                    "parameters": [
                                                        { "property": "Uri", "type": "Uri" }
                                                    ]
                                                }
                                            },
                                            {
                                                "id": "requestsBy",
                                                "caption": HP.HPTRIM.Messages.web_locationRequestsBy,
                                                "tooltip": HP.HPTRIM.Messages.web_locationRequestsBy,
                                                "supportsTagged": true,
                                                "supportsSingle": true,
                                                "returnedType": "Request",
                                                "searchData": {
                                                    "query": "serviceLocation: {0}",
                                                    "objectType": "Request",
                                                    "parameters": [
                                                        { "property": "Uri", "type": "Uri" }
                                                    ]
                                                }
                                            }
                                        ]
                                    }
                                ],
                                "updateTasks": [
                                    {
                                        "id": "setActiveDateRangeTask",
                                        "caption": HP.HPTRIM.Messages.web_locationDateRangeToolTip,
                                        "tooltip": HP.HPTRIM.Messages.web_locationDateRangeToolTip,
                                        "successMessage": HP.HPTRIM.Messages.web_udpatedSuccessfully,
                                        "icon": "setactivedaterange_24",
                                        "enabledCommandId": "SetActiveDates",
                                        "checkForWarnings": true,
                                        "supportsTagged": true,
                                        "supportsSingle": true,
                                        "returnedType": "Location",
                                        "objectUpdated": true,
                                        "objectDeleted": false,
                                        "serviceAction": {
                                            "name": "SetActiveDateRange",
                                            "fullType": "HP.HPTRIM.ServiceModel.SetActiveDateRange",
                                            "requiredParameters": [
                                                {
                                                    "name": "SetActiveDateRangeValidFromDate",
                                                    "type": "Datetime",
                                                    "property": "LocationActiveFrom",
                                                    "caption": HP.HPTRIM.Messages.web_activedateFrom,
                                                    "defaultClear": true,
                                                    "isMandatory": false,
                                                },
                                                {
                                                    "name": "SetActiveDateRangeValidToDate",
                                                    "type": "Datetime",
                                                    "property": "LocationActiveTo",
                                                    "caption": HP.HPTRIM.Messages.web_activedateTo,
                                                    "defaultClear": true,
                                                    "isMandatory": false,
                                                },
                                            ]
                                        },
                                        "updatedProperties": [
                                            "LocationIsActive",
                                            "LocationActiveTo",
                                            "LocationActiveFrom",
                                            "DateLastUpdated",
                                            "LastUpdatedBy"
                                        ]
                                    },
                                    {
                                        "id": "detailGroup",
                                        "isGroup": true,
                                        "caption": HP.HPTRIM.Messages.web_details,
                                        "tooltip": HP.HPTRIM.Messages.web_details,
                                        "subTasks": [
                                            {
                                                "id": "setGPSLocation",
                                                "caption": HP.HPTRIM.Messages.web_GPSLocation,
                                                "tooltip": HP.HPTRIM.Messages.web_GPSLocation,
                                                "completeMessage": HP.HPTRIM.Messages.web_udpatedSuccessfully,
                                                "icon": "setactivedaterange_24",
                                                "enabledCommandId": "LocOtherFields",
                                                "supportsTagged": true,
                                                "supportsSingle": true,
                                                "returnedType": "Location",
                                                "requiredFeature": "GeoLocations",
                                                "objectUpdated": true,
                                                "objectDeleted": false,
                                                "requiredProperties": ["LocationGpsLocation"],
                                                "propertiesUpdated": [
                                                    {
                                                        "propertyId": "LocationGpsLocation",
                                                        "requiresInput": true,
                                                    }
                                                ],
                                                "updatedProperties": [
                                                    "DateLastUpdated",
                                                    "LastUpdatedBy",
                                                    "LocationGPSLocation",
                                                ]
                                            },
                                        ]
                                    },
                                ],
                                "hasFilters": true,
                                "filterList": [
                                    {
                                        "name": "LocationType",
                                        "caption": HP.HPTRIM.Messages.web_selectLocationTypesToBeFiltered,
                                        "clauseId": "LocationType",
                                        "format": "enum",
                                        "enumName": "LocationType",
                                        "clauseString": "type",
                                    },
                                    {
                                        "caption": HPTRIM.Messages.bob_objectIsActive,
                                        "name": "active",
                                        "clauseId": "Active",
                                        "clauseString": "active",
                                        "format": 'boolean',
                                        "oneInGroupMustBeOn": true,
                                        "options": [
                                            { "caption": HPTRIM.Messages.bob_objectIsActive, "name": 'active', "negated": false },
                                            { "caption": HPTRIM.Messages.web_locationActiveFilterInactive, "name": 'inactive', "negated": true }
                                        ]
                                    },
                                    {
                                        "name": "LoctionInternal",
                                        "caption": HPTRIM.Messages.web_locationInternalFilter,
                                        "clauseId": "LocationInternal",
                                        "format": 'boolean',
                                        "oneInGroupMustBeOn": true,
                                        "clauseString": "internal",
                                        "options": [
                                            { "caption": HPTRIM.Messages.web_locationInternalFilter, "name": 'internal', "negated": false },
                                            { "caption": HPTRIM.Messages.web_locationInternalFilterExternal, "name": 'external', "negated": true }
                                        ]
                                    },
                                    {
                                        "caption": HPTRIM.Messages.web_locationCanUseFilter,
                                        "name": "withCanUse",
                                        "clauseId": "Usable",
                                        "clauseString": "usable",
                                        "format": 'boolean',
                                        "oneInGroupMustBeOn": false,
                                        "reversed": true,
                                        "options": [
                                            { "caption": HPTRIM.Messages.web_showWothoutCanUse, "name": 'showWithoutCanUse', "negated": false },
                                        ]
                                    }
                                ],
                            },
                            {
                                "Id": "SavedSearch",
                                "RequiredProductFeatureName": [],
                                "CanAnybodyCreate": false,
                                "CanAnybodyUpdate": true,
                                "UpdateCaption": HP.HPTRIM.Messages.web_savedSearches,
                                "CanAnybodyDelete": true,
                                "HasReports": false,
                                "standardDataEntryForm": true,
                                "dataEntryForm": "",
                                "mandatoryProperties": ["SavedSearchOwner",
                                    "SavedSearchAnyWordContents",
                                    "SavedSearchAnyWordNotes",
                                    "SavedSearchAnyWordTitle",
                                    "SavedSearchAssigneeSearchIncludesAuthorisation",
                                    "SavedSearchAssigneeSearchIncludesDelegates",
                                    "SavedSearchAssigneeSearchIncludesEscalated",
                                    "SavedSearchAssigneeSearchIncludesGroups",
                                    "SavedSearchAssigneeSearchIncludesPosition",
                                    "SavedSearchDefaultIncludesContent",
                                    "SavedSearchDefaultIncludesNotes",
                                    "SavedSearchDefaultIncludesNumber",
                                    "SavedSearchDefaultIncludesTitle",
                                    "SavedSearchExtendedIDOLOptimization",
                                    "SavedSearchIdolSearchStyle",
                                    "SavedSearchDescription",
                                ],
                                "ItemListProperties": [
                                    {
                                        "location": "Icon",
                                        "customisedValue": true
                                    },
                                    {
                                        "location": "TopLeft",
                                        "property": "SavedSearchObjectType"
                                    },
                                    {
                                        "location": "Title",
                                        "property": "SavedSearchName"
                                    },
                                    {
                                        "location": "TopRight",
                                        "property": "SavedSearchOwner",
                                        "subProperty": "LocationFormattedName",
                                        "showCaption": true,
                                        "defaultValue": HP.HPTRIM.Messages.web_public,
                                    },
                                    {
                                        "location": "Data",
                                        "property": "SavedSearchDescription",
                                        "showCaption": true,
                                        "capitaliseCaption": true,
                                        "defaultValue": ""
                                    },
                                    {
                                        "location": "DetailData",
                                        "property": "SavedSearchQueryString",
                                        "defaultValue": "-",
                                    }
                                ],
                                "Trays": [
                                    {
                                        "pageId": "1",
                                        "pageCaption": HP.HPTRIM.Messages.web_general,
                                        "pageItems": [
                                            {
                                                "name": "Favorites",
                                                "caption": HP.HPTRIM.Messages.web_favorites,
                                                "query": "favorite",
                                                "default": true,
                                            },
                                            {
                                                "name": "public",
                                                "caption": HP.HPTRIM.Messages.web_public,
                                                "query": "public",
                                            },
                                            {
                                                "name": "private",
                                                "caption": HP.HPTRIM.Messages.web_private,
                                                "query": "owner:[default:" + HPTRIM.Messages.bob_sbMe + "]",
                                            },
                                        ]
                                    }
                                ],
                                "updateTasks": [],
                                "navigationTasks": [],
                                "searchTask": {
                                    "objectSearchQeryProperty": "SavedSearchQueryString",
                                    "objectSearchDescriptionProperty": "SavedSearchDescriptionString",
                                    "objectFilterProperty": "SavedSearchFilterString",
                                    "objectSortProperty": "SavedSearchSortString",
                                    "objectTypeNameProperty": "SavedSearchObjectType",
                                    "searchDefinitionProperty": "SearchDefinition",
                                    "searchIsOldFormatProperty": "SavedSearchIsOldFormat",
                                }
                            },
                            {
                                "Id": "RecordAction",
                                "RequiredProductFeatureName": ['Actions'],
                                "CanAnybodyCreate": false,
                                "CanAnybodyUpdate": false,
                                "UpdateCaption": HP.HPTRIM.Messages.web_update,
                                "CanAnybodyDelete": false,
                                "HasReports": false,
                                "NotesPropertyName": "RecordActionNotes",
                                "CanUpdateNotes": true,
                                "NotesPropertyReadOnly": false,
                                "standardDataEntryForm": true,
                                "dataEntryForm": "",
                                "ItemListProperties": [
                                    {
                                        "location": "Icon",
                                        "property": "Icon",
                                        "subProperty": "Id"
                                    },
                                    {
                                        "location": "TopLeft",
                                        "property": "RecordActionRecord",
                                        "subProperty": "RecordNumber",
                                        "defaultValue": ""
                                    },
                                    {
                                        "location": "TopRight",
                                        "property": "RecordActionRecord",
                                        "subProperty": "RecordTitle",
                                        "defaultValue": ""
                                    },
                                    {
                                        "location": "Title",
                                        "property": "RecordActionActionName"
                                    },
                                    {
                                        "location": "Data",
                                        "property": "RecordActionResponsibility",
                                        "subProperty": "LocationFormattedName",
                                    },
                                    {
                                        "location": "Data",
                                        "property": "RecordActionStatus"
                                    },
                                    {
                                        "location": "Data",
                                        "property": "RecordActionDueDate"
                                    }
                                ],
                                "Trays": [
                                    {
                                        "pageId": "1",
                                        "pageCaption": HP.HPTRIM.Messages.web_general,
                                        "pageItems": [
                                            {
                                                "name": "dueActions",
                                                "caption": HP.HPTRIM.Messages.web_activitiesReadyToStart,
                                                "query": "assignee:" + HPTRIM.Messages.bob_sbMe + " " + HPTRIM.Messages.core_and + " canStart"
                                            }
                                        ]
                                    }
                                ],
                                "updateTasks": [
                                    {
                                        "id": "completeRecordActionTask",
                                        "caption": HP.HPTRIM.Messages.web_complete,
                                        "tooltip": HP.HPTRIM.Messages.web_complete,
                                        "title": HP.HPTRIM.Messages.web_complete + ": {0}",
                                        "titleProperty": "RecordActionActionName",
                                        "successMessage": HP.HPTRIM.Messages.web_udpatedSuccessfully,
                                        "checkForWarnings": true,
                                        "icon": "activity_complete_24",
                                        "enabledCommandId": "CompleteAction",
                                        "supportsTagged": false,
                                        "supportsSingle": true,
                                        "returnedType": "RecordAction",
                                        "objectUpdated": true,
                                        "objectDeleted": false,
                                        "serviceAction": {
                                            "name": "Complete",
                                            "fullType": "HP.HPTRIM.ServiceModel.CompleteRecordAction",
                                            "requiredParameters": [
                                                {
                                                    "name": "CompleteRecordActionCompletionDate",
                                                    "type": "Datetime",
                                                    "caption": HP.HPTRIM.Messages.web_completionDateTime,
                                                    "isMandatory": true,
                                                },
                                                {
                                                    "name": "CompleteRecordActionCompletePrevious",
                                                    "type": "Boolean",
                                                    "caption": HP.HPTRIM.Messages.web_completeAllPreviousIncompleteRecordActions,
                                                    "isMandatory": false,
                                                    "defaultClear": true
                                                },
                                            ]
                                        },
                                        "updatedProperties": [
                                            "RecordActionPercentComplete",
                                            "RecordActionOverdue",
                                            "RecordActionDone",
                                            "RecordActionCompletedOnTime",
                                            "RecordActionCompletedBy",
                                            "RecordActionActualDuration"
                                        ]
                                    },
                                    {
                                        "id": "uncompleteRecordActionTask",
                                        "caption": HP.HPTRIM.Messages.web_uncomplete,
                                        "tooltip": HP.HPTRIM.Messages.web_uncomplete,
                                        "successMessage": HP.HPTRIM.Messages.web_udpatedSuccessfully,
                                        "checkForWarnings": true,
                                        "icon": "uncompleteactivity_x24",
                                        "enabledCommandId": "UncompleteAction",
                                        "supportsTagged": false,
                                        "supportsSingle": true,
                                        "returnedType": "RecordAction",
                                        "objectUpdated": true,
                                        "objectDeleted": false,
                                        "serviceAction": {
                                            "name": "Uncomplete",
                                            "fullType": "HP.HPTRIM.ServiceModel.UncompleteRecordAction",
                                        },
                                        "updatedProperties": [
                                            "RecordActionPercentComplete",
                                            "RecordActionOverdue",
                                            "RecordActionDone",
                                            "RecordActionCompletedOnTime",
                                            "RecordActionCompletedBy",
                                            "RecordActionActualDuration"
                                        ]
                                    },
                                    {
                                        "id": "reassignRecordActionTask",
                                        "caption": HP.HPTRIM.Messages.web_reassign,
                                        "tooltip": HP.HPTRIM.Messages.web_reassign,
                                        "successMessage": HP.HPTRIM.Messages.web_udpatedSuccessfully,
                                        "checkForWarnings": true,
                                        "icon": "activity_reassign_24",
                                        "enabledCommandId": "ReassignAction",
                                        "supportsTagged": true,
                                        "supportsSingle": true,
                                        "returnedType": "RecordAction",
                                        "objectUpdated": true,
                                        "objectDeleted": false,
                                        "serviceAction": {
                                            "name": "setAssignee",
                                            "fullType": "HP.HPTRIM.ServiceModel.ReassignRecordAction",
                                            "requiredParameters": [
                                                {
                                                    "name": "ReassignRecordActionNewAssignee",
                                                    "type": "object",
                                                    "objectType": HPTRIM.BaseObjectTypes.Location.Name,
                                                    "caption": HP.HPTRIM.Messages.web_newAssignee,
                                                    "requiresInput": true,
                                                    "purpose": HPTRIM.LocationPurpose.WorkflowAssignee,
                                                    "property": "RecordActionResponsibility",
                                                }
                                            ]
                                        },
                                        "updatedProperties": [
                                            "RecordActionResponsibility"
                                        ]
                                    },
                                    {
                                        "id": "updateCostActionTask",
                                        "caption": HP.HPTRIM.Messages.web_updateCost,
                                        "tooltip": HP.HPTRIM.Messages.web_updateCost,
                                        "successMessage": HP.HPTRIM.Messages.web_udpatedSuccessfully,
                                        "checkForWarnings": true,
                                        "icon": "currency_x24",
                                        "enabledCommandId": "ActionCost",
                                        "supportsTagged": true,
                                        "supportsSingle": true,
                                        "returnedType": "RecordAction",
                                        "objectUpdated": true,
                                        "objectDeleted": false,
                                        "requiredProperties": ["RecordActionCost", "RecordActionRecord"],
                                        "serviceAction": {
                                            "name": "SetRecordActionCost",
                                            "fullType": "HP.HPTRIM.ServiceModel.SetRecordActionCost",
                                            "requiredParameters": [
                                                {
                                                    "name": "SetRecordActionCostnewCost",
                                                    "type": "currency",
                                                    "requiresInput": true,
                                                    "caption": HPTRIM.Messages.web_newCost,
                                                    "property": "RecordActionCost",
                                                }
                                            ]
                                        },
                                        "updatedProperties": [
                                            "RecordActionCost",
                                            "EnabledCommandIds",
                                            "RecordActionResponsibility",
                                            "DateLastUpdated",
                                            "LastUpdatedBy"
                                        ]
                                    },
                                ],
                                "navigationTasks": [
                                    {
                                        "id": "recordAppliesTo",
                                        "caption": HP.HPTRIM.Messages.web_record,
                                        "tooltip": HP.HPTRIM.Messages.web_record,
                                        "icon": "navigateUpFolderIcon",
                                        "supportsTagged": false,
                                        "supportsSingle": true,
                                        "returnedType": "Record",
                                        "requiredProperty": "RecordActionRecord",
                                        "searchData": {
                                            "query": "uri:{0}",
                                            "parameters": [
                                                { "property": "RecordActionRecord", "type": "Object" }
                                            ]
                                        }
                                    },
                                    {
                                        "id": "responsibleLocation",
                                        "caption": HP.HPTRIM.Messages.web_responsibleLoc,
                                        "tooltip": HP.HPTRIM.Messages.web_responsibleLoc,
                                        "icon": "locperson_x24",
                                        "supportsTagged": false,
                                        "supportsSingle": true,
                                        "returnedType": "Location",
                                        "requiredProperty": "RecordActionResponsibility",
                                        "searchData": {
                                            "query": "uri:{0}",
                                            "parameters": [
                                                { "property": "RecordActionResponsibility", "type": "Object" }
                                            ]
                                        }
                                    }
                                ],
                            },
                            {
                                "Id": "RecordType",
                                "RequiredProductFeatureName": [],
                                "CanAnybodyCreate": false,
                                "CanAnybodyUpdate": false,
                                "UpdatePermission": "RecordAdmin",
                                "UpdateCaption": HP.HPTRIM.Messages.web_update,
                                "CanAnybodyDelete": false,
                                "DeletePermission": "RecordAdmin",
                                "standardDataEntryForm": false,
                                "ItemListProperties": [
                                    {
                                        "location": "Icon",
                                        "property": "Icon",
                                        "subProperty": "Id"
                                    },
                                    {
                                        "location": "Data",
                                        "property": "RecordTypeHomeLocation",
                                        "subProperty": "LocationFormattedName",
                                        "showCaption": true,
                                        "defaultValue": "-",
                                    },
                                    {
                                        "location": "Data",
                                        "property": "RecordTypeOwnerLocation",
                                        "subProperty": "LocationFormattedName",
                                        "showCaption": true,
                                        "defaultValue": "-",
                                    },
                                    {
                                        "location": "Title",
                                        "property": "RecordTypeName"
                                    }
                                ],
                                "Trays": [
                                    {
                                        "pageId": "1",
                                        "pageCaption": HP.HPTRIM.Messages.web_general,
                                        "pageItems": [
                                            {
                                                "name": "allRecordTypes",
                                                "caption": HP.HPTRIM.Messages.web_allRecordTypes,
                                                "query": "all"
                                            }
                                        ]
                                    }
                                ],
                                "updateTasks": [],
                                "navigationTasks": []
                            },
                        ]
                    };
                };
                return RawApplicationDefinition;
            }());
            App.RawApplicationDefinition = RawApplicationDefinition;
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Panels;
            (function (Panels) {
                "use strict";
                var HPRMModalOverlay = (function (_super) {
                    __extends(HPRMModalOverlay, _super);
                    function HPRMModalOverlay(panels, visible, showCallback, hideCallback, overlayCSSId) {
                        _super.call(this, panels, visible);
                        this.hprmModal = $('#hprm-dynamic-modal');
                        this.templateName('templates/Framework/Overlays/DynamicOverlayBase');
                        this.showCallback = showCallback;
                        this.hideCallback = hideCallback;
                        if (overlayCSSId) {
                            this.hprmModal = $("#" + overlayCSSId);
                        }
                        var me = this;
                        $(window).resize(function () {
                            me.setPositionAndSize();
                        });
                    }
                    HPRMModalOverlay.prototype.hideModal = function () {
                        this.hprmModal.modal('hide');
                        this.hideCallback();
                    };
                    HPRMModalOverlay.prototype.showModal = function () {
                        this.hprmModal.modal('show');
                        this.showCallback();
                        this.setPositionAndSize();
                    };
                    HPRMModalOverlay.prototype.setPositionAndSize = function () {
                        if (this.activePanel() instanceof HP.HPTRIM.App.Panels.Plugins.RecordActionsOverlay) {
                            var dw = $(document).width();
                            var modalWidth = 800;
                            var newLeftPx = -150;
                            if (dw < 850) {
                                modalWidth = dw - 10;
                                $('.modal-content').css('width', modalWidth.toString() + "px");
                                newLeftPx = newLeftPx + (850 - dw) / 2;
                            }
                            else {
                                $('.modal-content').css('width', '800px');
                                if (dw < 1000) {
                                    newLeftPx = newLeftPx + (1000 - dw) / 4;
                                }
                            }
                            $('.modal-content').css('left', newLeftPx.toString() + "px");
                        }
                        else {
                            $('.modal-content').css('width', '');
                            $('.modal-content').css('left', '');
                        }
                    };
                    HPRMModalOverlay.prototype.getDataContext = function () {
                        var cur = this.activePanel();
                        return cur;
                    };
                    HPRMModalOverlay.prototype.getTemplate = function () {
                        var currentPanel = this.activePanel();
                        return currentPanel.templateName();
                    };
                    return HPRMModalOverlay;
                }(HP.HPTRIM.Framework.Components.Layouts.CardPanel));
                Panels.HPRMModalOverlay = HPRMModalOverlay;
            })(Panels = App.Panels || (App.Panels = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Panels;
            (function (Panels) {
                var Workflow;
                (function (Workflow) {
                    "use strict";
                    var WorkflowDataEntryPanel = (function (_super) {
                        __extends(WorkflowDataEntryPanel, _super);
                        function WorkflowDataEntryPanel(trimClient) {
                            _super.call(this, "templates/Workflow/WorkflowDataEntryForm");
                            this.baseObjectType = HP.HPTRIM.BaseObjectTypes.Workflow;
                            this.baseOnWorkflowTemplate = null;
                            this.workflowName = ko.observable("");
                            this.workflowHasInitialRecord = ko.observable(false);
                            this.recordSupplied = ko.observable(false);
                            this.showForm = ko.observable(true);
                            this.displayError = function (errorMessage) { };
                            this.completeSaving = function (uri) { };
                            this.close = function () { };
                            this.trimClient = trimClient;
                            this.recInitiatingRecordAs = new HP.HPTRIM.Field.RecordPicker(this.trimClient, HPTRIM.Messages.web_initiatingRecord);
                            var recBehaviourPageItem = {
                                Caption: HPTRIM.Messages.web_initiatingRecordBehaviour,
                                Readonly: true,
                                Value: ko.observable(""),
                            };
                            this.initiatingRecordBehavior = new HPTRIM.Form.StringDecorator(recBehaviourPageItem);
                        }
                        WorkflowDataEntryPanel.prototype.setInitiatingRecord = function (initiatingRecordInfoObject) {
                            this.recInitiatingRecordAs.setValueFromInfoObject(initiatingRecordInfoObject);
                            this.recInitiatingRecordAs.enable(false);
                            this.recordSupplied(true);
                        };
                        WorkflowDataEntryPanel.prototype.updateForm = function (value) {
                            if (!value) {
                                return;
                            }
                            this.baseOnWorkflowTemplate = value;
                            var initiatingRecordBehaviour = "Ignore";
                            if (value["initRecordBehavior"] && value["initRecordBehavior"]) {
                                initiatingRecordBehaviour = value["initRecordBehavior"];
                            }
                            this.initiatingRecordBehavior.Value(initiatingRecordBehaviour);
                            var shouldShowInitRecordField = initiatingRecordBehaviour !== "Ignore";
                            this.workflowHasInitialRecord(shouldShowInitRecordField);
                            this.workflowName(value.displayValue);
                            if (initiatingRecordBehaviour === "Working") {
                                this.recInitiatingRecordAs.filterClause("electronic");
                            }
                            else {
                                this.recInitiatingRecordAs.filterClause("");
                            }
                        };
                        WorkflowDataEntryPanel.prototype.clearFormContents = function () {
                            this.workflowName("");
                            this.workflowHasInitialRecord(false);
                            this.recInitiatingRecordAs.rawValue("");
                            this.recInitiatingRecordAs.enable(true);
                            this.initiatingRecordBehavior.Value("");
                            this.recordSupplied(false);
                        };
                        WorkflowDataEntryPanel.prototype.submit = function () {
                            var _this = this;
                            var me = this;
                            var data = {};
                            data["WorkflowName"] = this.workflowName();
                            data["WorkflowTemplate"] = this.baseOnWorkflowTemplate.Uri;
                            var initiatingRecord = this.recInitiatingRecordAs.getValue();
                            if (initiatingRecord !== null) {
                                data["WorkflowInitiator"] = initiatingRecord.Uri;
                            }
                            var dispatcher = new HP.HPTRIM.TrimObjectSave(me.trimClient, this.baseObjectType);
                            dispatcher.doRequestEx(data).done(function (response) {
                                _this.handleResponse(response);
                            }).fail(function (errorResponse) {
                                var errorMsg = HP.HPTRIM.Messages.web_unableToConnectToWebServices;
                                if (errorResponse.ResponseStatus && errorResponse.ResponseStatus.Message) {
                                    errorMsg = errorResponse.ResponseStatus.Message;
                                }
                                me.displayError(errorMsg);
                            });
                        };
                        WorkflowDataEntryPanel.prototype.handleResponse = function (response) {
                            if (!response.Results) {
                                return;
                            }
                            var workflow = response.Results[0];
                            var uri = workflow.Uri;
                            this.close();
                            this.completeSaving(uri);
                        };
                        return WorkflowDataEntryPanel;
                    }(HP.HPTRIM.Framework.Components.Layouts.Panel));
                    Workflow.WorkflowDataEntryPanel = WorkflowDataEntryPanel;
                })(Workflow = Panels.Workflow || (Panels.Workflow = {}));
            })(Panels = App.Panels || (App.Panels = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Panels;
            (function (Panels) {
                var Workflow;
                (function (Workflow) {
                    "use strict";
                    var SelectWorkflowTemplatePanel = (function (_super) {
                        __extends(SelectWorkflowTemplatePanel, _super);
                        function SelectWorkflowTemplatePanel(trimClient) {
                            _super.call(this, "templates/Workflow/SelectWorkflowTemplate");
                            this.selectWorkflowTemplate = ko.observable(true);
                            this.workflowSelectedCallback = function (value) { };
                            this.trimClient = trimClient;
                            this.configureField();
                        }
                        SelectWorkflowTemplatePanel.prototype.configureField = function () {
                            this.wrkTmplField = new HP.HPTRIM.Field.WorkflowTemplate(this.trimClient, HP.HPTRIM.Messages.web_selectWorkflowTemplate);
                            this.wrkTmplField.resultStyle = "position: relative; z-index: 9999";
                            this.wrkTmplField.setRawValue("all");
                            this.wrkTmplField.doSearch();
                            var me = this;
                            this.wrkTmplField.on({
                                'afterItemClicked': function (field, value) {
                                    me.workflowSelectedCallback(value);
                                }
                            });
                        };
                        return SelectWorkflowTemplatePanel;
                    }(HP.HPTRIM.Framework.Components.Layouts.Panel));
                    Workflow.SelectWorkflowTemplatePanel = SelectWorkflowTemplatePanel;
                })(Workflow = Panels.Workflow || (Panels.Workflow = {}));
            })(Panels = App.Panels || (App.Panels = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Panels;
            (function (Panels) {
                var Workflow;
                (function (Workflow) {
                    "use strict";
                    var WorkflowWizardPanel = (function (_super) {
                        __extends(WorkflowWizardPanel, _super);
                        function WorkflowWizardPanel(trimClient) {
                            _super.call(this);
                            this.displayError = function () { };
                            this.close = function () { };
                            this.trimClient = trimClient;
                            var me = this;
                            this.selectWorkflowPanel = new HP.HPTRIM.App.Panels.Workflow.SelectWorkflowTemplatePanel(this.trimClient);
                            this.selectWorkflowPanel.workflowSelectedCallback = function (value) {
                                if (!value) {
                                    return;
                                }
                                me.workflowDataEntryPanel.showForm(true);
                                me.workflowDataEntryPanel.updateForm(value);
                            };
                            this.primaryPanel.panels.push(this.selectWorkflowPanel);
                            this.workflowDataEntryPanel = new HP.HPTRIM.App.Panels.Workflow.WorkflowDataEntryPanel(trimClient);
                            this.workflowDataEntryPanel.close = function () {
                                me.visible(false);
                                me.close();
                            };
                            this.workflowDataEntryPanel.showForm(false);
                            this.mainPanel.panels.push(this.workflowDataEntryPanel);
                        }
                        WorkflowWizardPanel.prototype.getClassName = function () {
                            return WorkflowWizardPanel.CLASS_NAME;
                        };
                        WorkflowWizardPanel.CLASS_NAME = "WorkflowWizardPanel";
                        return WorkflowWizardPanel;
                    }(HP.HPTRIM.Framework.Components.Layouts.SinglePage.ContentPanel));
                    Workflow.WorkflowWizardPanel = WorkflowWizardPanel;
                })(Workflow = Panels.Workflow || (Panels.Workflow = {}));
            })(Panels = App.Panels || (App.Panels = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Panels;
            (function (Panels) {
                "use strict";
                var FormSearchPanel = (function (_super) {
                    __extends(FormSearchPanel, _super);
                    function FormSearchPanel(trimClient, cssClass) {
                        var _this = this;
                        _super.call(this, 'templates/Search/FormSearchPanel', true);
                        this.panelTitle = ko.observable(HP.HPTRIM.Messages.web_formSearchMenu.toUpperCase());
                        this.currentAdvQuery = "";
                        this.setupPanel = function () { };
                        this.errorVisible = ko.observable(false);
                        this.alertDetails = ko.observable("");
                        this.formDefinition = ko.observable({});
                        this.showError = function (message) { };
                        this.showMessage = ko.observable(false);
                        this.message = ko.observable("");
                        this.focusCallback = function () { };
                        this.cancel = function () { };
                        this.showRecordTypeFilter = ko.observable(false);
                        this.showFilter = ko.observable(false);
                        this.resetFormSearch = function () {
                            var form = _this.formDefinition();
                            for (var i = 0; i < form.Pages.length; i++) {
                                var page = form.Pages[i];
                                for (var j = 0; j < page.PageItems.length; j++) {
                                    var pageItem = page.PageItems[j];
                                    if (pageItem.ObjectType == HPTRIM.BaseObjectTypes.RecordType.name) {
                                        page.PageItems.splice(j, 1);
                                        continue;
                                    }
                                    if (pageItem.doAfterRender) {
                                        pageItem.doAfterRender(true);
                                    }
                                    if (pageItem.Caption == HP.HPTRIM.BaseObjectTypes.RecordType.Caption)
                                        pageItem.forRecordCreation = false;
                                    pageItem.setValue("");
                                    if (pageItem.getValueEx) {
                                        if (pageItem.getValueEx()) {
                                            page.forceShow();
                                            continue;
                                        }
                                    }
                                }
                            }
                        };
                        this.cssClass(cssClass);
                        this.trimClient = trimClient;
                        var me = this;
                        var errorSubscription = function (newValue) {
                            me.errorVisible(newValue.length != 0);
                            me.alertDetails(newValue);
                        };
                        var classificationResultExpansionOverlay = false;
                        var containerResultExpansionOverlay = false;
                        var bindings = ko.bindingHandlers;
                        this.searchCallback = function () {
                        };
                    }
                    FormSearchPanel.prototype.updateForm = function (searchFormDefinition) {
                        var me = this;
                        if (!searchFormDefinition) {
                            return;
                        }
                        var pageCount = 0;
                        var mapping = {
                            'PageItems': {
                                create: function (options) {
                                    var pageItem = options.data;
                                    pageItem.Readonly = false;
                                    var objHierarchy = HP.HPTRIM.Utils.TrimHelper.toBaseObjectType(pageItem.ObjectType);
                                    if (objHierarchy != null && objHierarchy.HasHierarchy) {
                                        pageItem.IsRecursive = objHierarchy.HasHierarchy;
                                    }
                                    var decoratedPageItem = HP.HPTRIM.Form.DecoratorFactory.make(me.trimClient, pageItem, true);
                                    decoratedPageItem.focusCallback = me.focusCallback;
                                    return decoratedPageItem;
                                }
                            },
                            'Pages': {
                                create: function (options) {
                                    var page = options.data;
                                    var pageObject = ko.mapping.fromJS(page, mapping);
                                    $.extend(pageObject, new HP.HPTRIM.Form.PageDecorator());
                                    pageObject.id = "FormPage" + _.uniqueId();
                                    pageObject.pageIndex = pageCount++;
                                    return pageObject;
                                }
                            },
                            'observe': ["Value"]
                        };
                        me.formDefinition(ko.mapping.fromJS(searchFormDefinition, mapping));
                    };
                    FormSearchPanel.prototype.getFieldsValue = function () {
                        var keyValue = {};
                        var pages = this.formDefinition().Pages;
                        _.each(pages, function (page) {
                            _.each(page.PageItems, function (pageItem) {
                                if (pageItem.ClauseName) {
                                    var value = pageItem.getValueForSearchForm();
                                    if (value === undefined) {
                                        return;
                                    }
                                    if (_.isObject(value)) {
                                        if (value.Uri == -1 || value.Uri == 0 || value.Uri === undefined) {
                                            return;
                                        }
                                        else {
                                            if (value.baseObjectType == HPTRIM.BaseObjectTypes.LookupItem && (pageItem.Format == 'Text' || pageItem.Format == 'String')) {
                                                if (pageItem.hasRecursive()) {
                                                    keyValue[pageItem.ClauseName] = '"' + value.displayValue + '+"';
                                                }
                                                else {
                                                    keyValue[pageItem.ClauseName] = '"' + value.displayValue + '"';
                                                }
                                            }
                                            else {
                                                if (pageItem.hasRecursive()) {
                                                    keyValue[pageItem.ClauseName] = value.Uri + "+";
                                                }
                                                else {
                                                    keyValue[pageItem.ClauseName] = value.Uri;
                                                }
                                            }
                                        }
                                    }
                                    else {
                                        if (_.isBoolean(value) || value == "true") {
                                            value = " ";
                                        }
                                        if (pageItem['LookupValues']) {
                                            if (value !== '') {
                                                keyValue[pageItem.ClauseName] = '"' + value.replace(/;/g, "; ") + '"';
                                            }
                                            return;
                                        }
                                        if ((pageItem.Format != "Datetime" && pageItem.Format != "Date" &&
                                            pageItem.Format != "Enum") && (_.isString(value) && value != "")) {
                                            value = value.replace('"', '\\"');
                                            value = '"' + value + '"';
                                        }
                                        keyValue[pageItem.ClauseName] = value;
                                    }
                                }
                            });
                        });
                        return keyValue;
                    };
                    FormSearchPanel.prototype.finaliseQuery = function () {
                        var _this = this;
                        var me = this;
                        var handleFilters = function () {
                            var errorCallback = function (error) { };
                            if (me.showFilter()) {
                                var finish = function (filterString) {
                                    me.searchFilterPanel.callback(filterString);
                                    me.searchCallback(_this.currentAdvQuery);
                                };
                                var filterString = _this.searchFilterPanel.getFilterString();
                                if (me.showRecordTypeFilter()) {
                                    var recordFilterString = me.searchRecordTypeFilterPanel.getFilterString();
                                    if (recordFilterString) {
                                        filterString = filterString + " " + recordFilterString;
                                    }
                                }
                                if (_this.searchFilterPanel.saveFiltersAsDefault() || (me.showRecordTypeFilter() && me.searchRecordTypeFilterPanel.saveFiltersAsDefault())) {
                                    if ((me.showRecordTypeFilter() && me.searchRecordTypeFilterPanel.saveFiltersAsDefault())) {
                                        var recordTypeFilter = me.searchRecordTypeFilterPanel.getRawFilter();
                                        me.searchFilterPanel.saveSearchFilters(function () { finish(filterString); }, errorCallback, recordTypeFilter);
                                    }
                                    else {
                                        me.searchFilterPanel.saveSearchFilters(function () { finish(filterString); }, errorCallback);
                                    }
                                }
                                else {
                                    finish(filterString);
                                }
                            }
                            else {
                                _this.searchCallback(_this.currentAdvQuery);
                            }
                        };
                        if (this.validateFormAndShowErrors()) {
                            this.updateQuery();
                            handleFilters();
                        }
                    };
                    FormSearchPanel.prototype.validateFormAndShowErrors = function () {
                        var errors = "";
                        var me = this;
                        var isValid = true;
                        var pages = this.formDefinition().Pages;
                        _.each(pages, function (page) {
                            _.each(page.PageItems, function (pageItem) {
                                var itemValid = pageItem.isValid();
                                if (!itemValid) {
                                    if (errors) {
                                        errors += ", ";
                                    }
                                    errors += pageItem.Caption;
                                }
                                isValid = isValid && itemValid;
                            });
                        });
                        if (!isValid) {
                            var errorMsg = HPTRIM.Messages.web_invalidFields + errors;
                            this.showError(errorMsg);
                        }
                        return isValid;
                    };
                    FormSearchPanel.prototype.updateQuery = function () {
                        var queryString = "";
                        var queryParameters = this.getFieldsValue();
                        for (var clauseName in queryParameters) {
                            var value = queryParameters[clauseName];
                            if (_.isObject(queryParameters[clauseName])) {
                                if (queryParameters[clauseName].Uri) {
                                    value = queryParameters[clauseName].Uri;
                                }
                            }
                            if (value) {
                                if (queryString.length != 0) {
                                    queryString = queryString + " and ";
                                }
                                if (value == "" || value == " " || value == '" "') {
                                    queryString = queryString + clauseName;
                                }
                                else {
                                    queryString = queryString + clauseName + ":" + value;
                                }
                            }
                        }
                        this.currentAdvQuery = queryString;
                        return true;
                    };
                    return FormSearchPanel;
                }(HP.HPTRIM.Framework.Components.Layouts.Panel));
                Panels.FormSearchPanel = FormSearchPanel;
            })(Panels = App.Panels || (App.Panels = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Panels;
            (function (Panels) {
                "use strict";
                var RecordsPanel = (function (_super) {
                    __extends(RecordsPanel, _super);
                    function RecordsPanel(trimClient, lazyLoad) {
                        var _this = this;
                        _super.call(this);
                        this.handleViewClick = function (uriFromTemplate, extensionFromTemplate, passedInRecNumber, passedInRecTitle, revisionCount, recordIsCheckedOut, recordSpURL, recordInfoData) { };
                        this.handleRenditionViewClick = function (uriFromTemplate, recordRenditions, recordInfoObject, passedInRecNumber, passedInRecTitle, recordIsCheckedOut) { };
                        this.moreItemsCaption = ko.observable("");
                        this.updatePropertiesViewPanel = function (trimObject, additionalInfo) { };
                        this.createNewRecordCallback = function () { };
                        this.updateHistory = function (id, query, uri, page) { };
                        this.showError = function (errorMessage) { };
                        this.currentPanelId = RecordsPanel.FAVORITE_VIEW_ID;
                        this.updateCallback = function (infoObject, task) { };
                        this.trimClient = trimClient;
                        var me = this;
                        var toggleVisibleFunction = function (event) {
                            $('#' + me.id + ' .as-spa-content-additional').toggleClass('active');
                            if ($('#' + me.id + ' .as-spa-content-additional').hasClass('active')) {
                                $("#" + me.id + " .as-spa-content-primary").css('width', "15%");
                                $("#" + me.id + " .as-spa-content-additional").css('width', "25%");
                                $("#" + me.id + " .as-spa-content-additional").css('height', "calc(100% - 35px)");
                                $("#" + me.id + " .as-spa-content-additional").closest(".active").css('height', "calc(100% - 95px)");
                                $("#" + me.id + " .as-spa-content-main").css('width', "60%");
                            }
                            else {
                                $("#" + me.id + " .as-spa-content-primary").css('width', "15%");
                                $("#" + me.id + " .as-spa-content-main").css('width', "85%");
                                $("#" + me.id + " .as-spa-content-additional").css('width', "");
                            }
                        };
                        this.objectPropertiesPanel = new HP.HPTRIM.App.Panels.Plugins.ObjectPropertiesPanel(trimClient, toggleVisibleFunction);
                        this.initialiseAdditionalPanel(this.objectPropertiesPanel);
                        this.objectPropertiesPanel.visible(false);
                        this.recordCommandPanel = new Panels.RecordCommandPanel(this.trimClient);
                        this.reportCommandPanel = new Panels.ReportCommandPanel(this.trimClient);
                        this.browseClassificationPanel = new HP.HPTRIM.App.Panels.BrowseViaClassificationsPanel(trimClient);
                        this.browseUserLabelPanel = new HP.HPTRIM.App.Panels.BrowseViaUserLabelPanel(trimClient);
                        this.recordsDetailComponent = new Panels.RecordDetails.RecordsDetailComponent(this.trimClient);
                        this.recordsDetailComponent.updateCallback = function (result, task) { _this.updateCallback(result, task); };
                        this.selectedUri = ko.observable("");
                        this.searching = ko.observable(false);
                        this.searchingString = ko.observable(HP.HPTRIM.Messages.web_retrievingResults + "...");
                        this.noResults = ko.observable(true);
                        this.showSelected = ko.observable(true);
                        this.selectAllCheckbox = ko.observable(false);
                        this.selections = ko.observableArray([]);
                        this.selectedInfoObjects = ko.observableArray([]);
                        this.displayQuery = ko.observable(true);
                        this.queryDisplayString = ko.observable("");
                        this.currentQuery = ko.observable("");
                        this.currentFilter = ko.observable("");
                        this.count = ko.observable("");
                        this.isLoading = ko.observable(false);
                        this.countEnabled = ko.observable(false);
                        var searchQueryObject = { searchString: "", baseObjectType: HPTRIM.BaseObjectTypes.Record };
                        var pagingSearchCallback = function () {
                            me.searching(true);
                            me.trimMainObjectItemListPanel.getItemList().items([]);
                            me.selectAllCheckbox(false);
                        };
                        this.trimMainObjectItemListPanel = new HP.HPTRIM.App.Panels.ItemList.TrimScrollspyItemListPanel(this.trimClient, this, HP.HPTRIM.Messages.web_searching, searchQueryObject, pagingSearchCallback, function () { me.searching(false); }, this.id);
                        this.trimMainObjectItemListPanel.getItemList().templateName('templates/Record/RecordsPanelItemList');
                        var updateDataFromResult = function (result) {
                            var update = function (items) {
                                for (var _i = 0, _a = items(); _i < _a.length; _i++) {
                                    var currentItem = _a[_i];
                                    if (currentItem.Fields.Uri == result.Uri) {
                                        var itemNeedsUpate = false;
                                        var newItem = jQuery.extend(true, {}, currentItem);
                                        if (result.RecordTypedTitle && currentItem.Fields.RecordTitle != result.RecordTypedTitle.Value) {
                                            newItem.Fields.RecordTitle = result.RecordTypedTitle.Value;
                                            itemNeedsUpate = true;
                                        }
                                        if (result.RecordExtension && currentItem.Fields.RecordExtension != result.RecordExtension.Value) {
                                            newItem.Fields.RecordExtension = result.RecordExtension.Value;
                                            itemNeedsUpate = true;
                                        }
                                        if (result.RecordIsCheckedOut && currentItem.Fields.RecordIsCheckedOut.Value != result.RecordIsCheckedOut.Value) {
                                            newItem.Fields.RecordIsCheckedOut = result.RecordIsCheckedOut;
                                            itemNeedsUpate = true;
                                        }
                                        if (result.RecordRevisionCount && currentItem.Fields.RecordRevisionCount != result.RecordRevisionCount.Value) {
                                            newItem.Fields.RecordRevisionCount = result.RecordRevisionCount.Value;
                                            itemNeedsUpate = true;
                                        }
                                        if (itemNeedsUpate) {
                                            items.replace(currentItem, newItem);
                                            items.valueHasMutated();
                                        }
                                    }
                                    if (currentItem.subordinateList) {
                                        update(currentItem.subordinateList.items);
                                    }
                                }
                            };
                            update(me.trimMainObjectItemListPanel.getItemList().items);
                        };
                        this.trimMainObjectItemListPanel.updateDataFromResult = updateDataFromResult;
                        this.showDefaultPanelView();
                        this.showItem = function (data, updateHistory) {
                            me.selectedUri(data.Fields.Uri);
                            if (updateHistory) {
                                me.historySelectUri(data.Fields.Uri);
                            }
                        };
                        this.handleMinimiseClick = function (uri, parents) {
                            var itemToMinimise;
                            if (parents) {
                                var currentItems = (me.trimMainObjectItemListPanel.itemList.items());
                                _.each(parents, function (uri) {
                                    var parentObject = _.find(currentItems, function (item) {
                                        return item.Fields.Uri == uri;
                                    });
                                    currentItems = parentObject.subordinateList.items();
                                });
                                itemToMinimise = _.find(currentItems, function (item) {
                                    return item.Fields.Uri == uri;
                                });
                            }
                            else {
                                itemToMinimise = _.find(me.trimMainObjectItemListPanel.itemList.items(), function (item) {
                                    return item.Fields.Uri == uri;
                                });
                            }
                            if (itemToMinimise) {
                                itemToMinimise.subordinateList.items([]);
                                itemToMinimise.Expanded(false);
                                itemToMinimise.Expanding(false);
                            }
                        };
                        this.handleExpandClick = function (uri, parents) {
                            var itemToExpand;
                            if (parents) {
                                var currentItems = (me.trimMainObjectItemListPanel.itemList.items());
                                _.each(parents, function (uri) {
                                    var parentObject = _.find(currentItems, function (item) {
                                        return item.Fields.Uri == uri;
                                    });
                                    currentItems = parentObject.subordinateList.items();
                                });
                                itemToExpand = _.find(currentItems, function (item) {
                                    return item.Fields.Uri == uri;
                                });
                            }
                            else {
                                itemToExpand = _.find(me.trimMainObjectItemListPanel.itemList.items(), function (item) {
                                    return item.Fields.Uri == uri;
                                });
                            }
                            itemToExpand.Expanding(true);
                            var searchString;
                            if (HPRM_userSearchOptions.SearchUserOptionsIncludeAlternateWhenShowingFolderContents.Value) {
                                searchString = "containerEx:[uri:" + uri + "]";
                            }
                            else {
                                searchString = "container:[uri:" + uri + "]";
                            }
                            if (itemToExpand.Fields.RecordRecordType.RecordTypeUsualBehaviour.Value == "Client") {
                                searchString = "clientRecord:[uri:" + uri + "] and type:[behaviour:22]";
                            }
                            else if (itemToExpand.Fields.RecordRecordType.RecordTypeUsualBehaviour.Value == "Matter") {
                                searchString = "matterRecord:[uri:" + uri + "] and type:[behaviour:2]";
                            }
                            var searchQueryObject = {
                                baseObjectType: HPTRIM.BaseObjectTypes.Record,
                                filter: "",
                                searchOptions: "",
                                searchString: searchString,
                                sortBy: "",
                                parentObjectType: itemToExpand.Fields.RecordRecordType.RecordTypeUsualBehaviour.Value
                            };
                            var trimItemList = new HP.HPTRIM.App.Panels.ItemList.TrimItemListPanel(me.trimClient, me, searchQueryObject);
                            trimItemList.refresh(function (result) {
                                var retrievedItems = trimItemList.itemList.items();
                                var retrievedItemParents = [];
                                if (parents) {
                                    _.each(parents, function (uri) {
                                        retrievedItemParents.push(uri);
                                    });
                                }
                                retrievedItemParents.push(uri);
                                _.each(retrievedItems, function (item) {
                                    item.ParentUris = retrievedItemParents;
                                });
                                if (retrievedItemParents.length >= 4) {
                                    _.each(retrievedItems, function (item) {
                                        var nameString = itemToExpand.Fields["RecordTitle"];
                                        var clauseCaption = HPTRIM.Messages.web_containedRecords;
                                        var caption = HPTRIM.Messages.web_moreItemShowAll + " " + clauseCaption + " " + nameString;
                                        item.moreItemsCaption(caption);
                                    });
                                }
                                if (itemToExpand) {
                                    itemToExpand.Expanding(false);
                                    if (retrievedItems.length > 0) {
                                        itemToExpand.subordinateList = { items: ko.observableArray(retrievedItems) };
                                        itemToExpand.Expanded(true);
                                        var subordinateUris = HP.HPTRIM.Utils.TrimHelper.pluckUrisFromItemsArray(retrievedItems);
                                        if (_this.selectAllCheckbox() == true) {
                                            _this.selectSomeMore(subordinateUris);
                                        }
                                    }
                                    else {
                                        itemToExpand.Fields.PossiblyHasSubordinates = false;
                                        itemToExpand.NoChildren(true);
                                    }
                                }
                                if (result.HasMoreItems === true) {
                                    itemToExpand.subordinateListHasMoreItems(true);
                                    var nameString = itemToExpand.Fields["RecordTitle"];
                                    var clauseCaption = HPTRIM.Messages.web_containedRecords;
                                    var captionStart = HPTRIM.Messages.web_moreItemsToShowNoCount;
                                    var totalResults = result['TotalResults'];
                                    if (totalResults) {
                                        var remainingResults = totalResults - retrievedItems.length;
                                    }
                                    if (remainingResults && remainingResults > 0) {
                                        captionStart = '+' + remainingResults + ' ' + HPTRIM.Messages.web_moreItemsToShow;
                                    }
                                    var caption = captionStart + ": " + HPTRIM.Messages.web_moreItemShowAll + " " + clauseCaption + " " + nameString;
                                    itemToExpand.moreItemsCaption(caption);
                                }
                            });
                        };
                        this.handleMoreItemsClick = function (uri) {
                            var searchString = "container:[uri:" + uri + "]";
                            me.searchHandler(searchString);
                        };
                        this.recordsDetailComponent.updatePropertiesView = function (trimObject, recordType) {
                            me.updatePropertiesViewPanel(trimObject, recordType);
                        };
                        this.recordsDetailComponent.search = function (searchString) {
                            _this.searchHandler(searchString);
                        };
                        this.closeDetails = function (data) {
                            me.recordsDetailComponent.panelIsExpanded = false;
                            me.selectedUri("");
                            me.historySelectUri("");
                        };
                        var hidePropertiesPanel = function () {
                            $('.as-spa-content-main').css({ width: '100%' });
                            me.objectPropertiesPanel.visible(false);
                        };
                        this.selectedUri.subscribe(function (newUri) {
                            var onlyDigits = /^\d*$/;
                            if (!onlyDigits.test(newUri)) {
                                hidePropertiesPanel();
                                return;
                            }
                            me.recordsDetailComponent.updateModel(newUri);
                            if (newUri == "") {
                                hidePropertiesPanel();
                                return;
                            }
                            if (!$('#' + this.id + ' .as-spa-content-additional').hasClass('active')) {
                                me.objectPropertiesPanel.visible(true);
                                $('#' + this.id + '.as-spa-content-main').css({ width: '85%' });
                            }
                        });
                        this.recordsDetailComponent.doReport = function (uri) {
                            uri = "" + uri;
                            if (!_this.selections() || _this.selections.indexOf(uri) == -1) {
                                var currentSelections = _this.selections();
                                currentSelections.push(uri);
                                _this.selections(currentSelections);
                            }
                            me.primaryPanel.panels([_this.reportCommandPanel]);
                        };
                        var activeFeatures = this.trimClient.getDatabase().activeFeatures();
                        if (_.contains(activeFeatures, "Requests")) {
                            this.recordCommandPanel.showBasicRequest(true);
                        }
                        else {
                            this.recordCommandPanel.showRequest(false);
                        }
                        if (_.contains(activeFeatures, "AdvancedRequests")) {
                            this.recordCommandPanel.showBasicRequest(false);
                            this.recordCommandPanel.showRequest(true);
                        }
                        else {
                            this.recordCommandPanel.showRequest(false);
                        }
                        if (_.contains(activeFeatures, "GeoLocations")) {
                            this.recordCommandPanel.showUpdateGPS(true);
                        }
                        else {
                            this.recordCommandPanel.showUpdateGPS(false);
                        }
                        this.recordCommandPanel.addRecord = function () {
                            me.createNewRecordCallback();
                        };
                        this.recordCommandPanel.showFavorites = function () {
                            me.favoritesView();
                            me.updateHistory(RecordsPanel.FAVORITE_VIEW_ID);
                        };
                        this.recordCommandPanel.showMyRecords = function () {
                            me.checkedOutView();
                            me.updateHistory(RecordsPanel.CHECKED_OUT_VIEW_ID);
                        };
                        this.recordCommandPanel.showRecents = function () {
                            me.recentsView();
                            me.updateHistory(RecordsPanel.RECENTS_VIEW_ID);
                        };
                        this.recordCommandPanel.showCreated = function () {
                            me.createdView();
                            me.updateHistory(RecordsPanel.CREATED_VIEW_ID);
                        };
                        this.recordCommandPanel.showReportPanel = function () {
                            me.primaryPanel.panels([me.reportCommandPanel]);
                        };
                        this.recordCommandPanel.browseViaClassifications = function () {
                            if (me.panels().length == 4) {
                                if (me.panels()[0].id !== me.browseClassificationPanel.id) {
                                    me.panels.shift();
                                    me.panels.unshift(me.browseClassificationPanel);
                                    me.browseClassificationPanel.load();
                                    return;
                                }
                                else {
                                    me.browseClassificationPanel.restore();
                                    return;
                                }
                            }
                            me.primaryPanel.panels([me.recordCommandPanel]);
                            me.panels.unshift(me.browseClassificationPanel);
                            me.browseClassificationPanel.onClose = function () {
                                me.browseClassificationPanel.initialized = false;
                                me.primaryPanel.panels([me.recordCommandPanel]);
                                me.recordCommandPanel.visible(true);
                                if (me.panels().length == 4) {
                                    me.panels.shift();
                                }
                            };
                            me.browseClassificationPanel.onMinimize = function () {
                                me.recordCommandPanel.visible(true);
                            };
                            me.browseClassificationPanel.onRestore = function () {
                                me.recordCommandPanel.visible(false);
                            };
                            me.browseClassificationPanel.onRestore();
                            if ($('#BrowseViaClassificationTree' + me.browseClassificationPanel.id).html() == "") {
                                me.browseClassificationPanel.load();
                            }
                        };
                        this.recordCommandPanel.browseViaUserLabel = function () {
                            if (me.panels().length == 4) {
                                if (me.panels()[0].id !== me.browseUserLabelPanel.id) {
                                    me.panels.shift();
                                    me.panels.unshift(me.browseUserLabelPanel);
                                    me.browseUserLabelPanel.load();
                                    return;
                                }
                                else {
                                    me.browseUserLabelPanel.restore();
                                    return;
                                }
                            }
                            me.primaryPanel.panels([me.recordCommandPanel]);
                            me.panels.unshift(me.browseUserLabelPanel);
                            me.browseUserLabelPanel.onClose = function () {
                                me.primaryPanel.panels([me.recordCommandPanel]);
                                me.recordCommandPanel.visible(true);
                                me.panels.shift();
                            };
                            me.browseUserLabelPanel.onMinimize = function () {
                                me.recordCommandPanel.visible(true);
                            };
                            me.browseUserLabelPanel.onRestore = function () {
                                me.recordCommandPanel.visible(false);
                            };
                            me.browseUserLabelPanel.onRestore();
                        };
                        var activeFeatures = this.trimClient.getDatabase().activeFeatures();
                        this.recordCommandPanel.showRequest(false);
                        if (_.contains(activeFeatures, "AdvancedRequests")) {
                            var permissions = this.trimClient.getDatabase().currentUserPermissions();
                            if (permissions["RequestWorker"] || permissions["RequestAdministrator"]) {
                                this.recordCommandPanel.showRequest(true);
                            }
                        }
                        this.recordCommandPanel.doUpdateTask = function (updateTask) {
                            var shouldContinue = true;
                            var pauseOnError = true;
                            var pauseOnWarning = true;
                            var ignoreWarningsWhileProcessing = false;
                            var startCallback = function () { me.taggedStartHandler(updateTask.caption, HPTRIM.BaseObjectTypes.Record); };
                            var updateCallback = function (infoObject, nameProperty, processedCount, total, continueCallback, completeCallback) {
                                if (me.selectedUri() && infoObject.Uri == me.selectedUri()) {
                                    me.recordsDetailComponent.handleUpdateResults(infoObject, updateTask);
                                }
                                if (infoObject != null) {
                                    updateDataFromResult(infoObject);
                                }
                                var processedInfoObject = _.find(me.selectedInfoObjects(), function (selectedInfoObject) {
                                    return (selectedInfoObject.Fields.Uri == infoObject.Uri);
                                });
                                var cancelCallback = function () {
                                    shouldContinue = false;
                                };
                                me.taggedUpdateProgess(processedInfoObject.Fields['RecordNumber'] + ' ' + processedInfoObject.Fields['RecordTitle'], processedCount, total, cancelCallback);
                                if (shouldContinue) {
                                    continueCallback();
                                }
                                else {
                                    completeCallback();
                                }
                            };
                            var completeCallback = function (successCount, total, extraMsg) {
                                me.taggedCompleteProgess(successCount, total, extraMsg);
                            };
                            var failureCallback = function (rawError, uri, nameProperty, processedCount, total, continueCallback, completeCallback) {
                                var processedInfoObject = _.find(me.selectedInfoObjects(), function (selectedInfoObject) {
                                    return (selectedInfoObject.Fields.Uri == uri);
                                });
                                var cancelCallback = function () {
                                    shouldContinue = false;
                                    continueCallback();
                                };
                                var errorMessage = HP.HPTRIM.Messages.web_errorPerformingOperation;
                                if (rawError && rawError.ResponseStatus && rawError.ResponseStatus.Message) {
                                    errorMessage = rawError.ResponseStatus.Message;
                                }
                                if (rawError && rawError.ResponseStatus && rawError.ResponseStatus.Errors) {
                                    var error = _.find(rawError.ResponseStatus.Errors, function (currentError) {
                                        return (currentError.Meta && currentError.Meta.Bad == "True");
                                    });
                                    if (error) {
                                        errorMessage = error.Message;
                                    }
                                    ;
                                }
                                var ignoreErrorsAndContinue = function () {
                                    pauseOnError = false;
                                    continueCallback();
                                };
                                var continueProcessing = function () {
                                    continueCallback();
                                };
                                var cancelProcessing = function () {
                                    shouldContinue = false;
                                    completeCallback();
                                };
                                me.taggedUpdateProgressError(processedInfoObject.Fields['RecordTitle'], uri, errorMessage, processedCount, total, cancelCallback, pauseOnError, ignoreErrorsAndContinue, continueCallback, cancelProcessing);
                            };
                            var warningsToSkip = [];
                            var warningsToIgnore = [];
                            var warningCallback = function (warningMessage, warningCodes, uri, nameProperty, processedCount, total, continueCallback, skipCallback, cancelCallback) {
                                var processedInfoObject = _.find(me.selectedInfoObjects(), function (selectedInfoObject) {
                                    return (selectedInfoObject.Fields.Uri == uri);
                                });
                                var cancelProcessing = function () {
                                    shouldContinue = false;
                                    cancelCallback();
                                };
                                var skipCurrentObject = function () {
                                    skipCallback();
                                };
                                var skipAllWarnings = function () {
                                    if (warningCodes.length > 0) {
                                        warningsToSkip = warningsToSkip.concat(warningCodes);
                                        _.uniq(warningsToSkip);
                                    }
                                    skipCallback();
                                };
                                var ignoreWarning = function () {
                                    continueCallback();
                                };
                                var ignoreAllWarnings = function () {
                                    if (warningCodes.length > 0) {
                                        warningsToIgnore = warningsToIgnore.concat(warningCodes);
                                        _.uniq(warningsToIgnore);
                                    }
                                    continueCallback();
                                };
                                var warningCodeToCheck = warningCodes.length > 0 ? warningCodes[0] : "";
                                var pauseForThisObject = true;
                                var ignoreWarningsForThisObject = false;
                                if (warningCodes.length <= 1) {
                                    if (_.contains(warningsToSkip, warningCodeToCheck)) {
                                        pauseForThisObject = false;
                                    }
                                    if (_.contains(warningsToIgnore, warningCodeToCheck)) {
                                        pauseForThisObject = false;
                                        ignoreWarningsForThisObject = true;
                                    }
                                }
                                else {
                                    var anySkipFound = false;
                                    _.each(warningCodes, function (code) {
                                        if (_.contains(warningsToSkip, code)) {
                                            anySkipFound = true;
                                        }
                                    });
                                    if (anySkipFound) {
                                        pauseForThisObject = false;
                                        ignoreWarningsForThisObject = false;
                                    }
                                    else {
                                        if (!anySkipFound) {
                                            var ignore = true;
                                            _.each(warningCodes, function (code) {
                                                if (_.contains(warningsToIgnore, code)) {
                                                    ignore = ignore && true;
                                                }
                                                else {
                                                    ignore = false;
                                                }
                                            });
                                            if (ignore) {
                                                pauseForThisObject = false;
                                                ignoreWarningsForThisObject = true;
                                            }
                                        }
                                    }
                                }
                                me.taggedUpdateProgressWarning(processedInfoObject.Fields['RecordTitle'], uri, warningMessage, processedCount, total, cancelCallback, pauseForThisObject, ignoreWarningsForThisObject, skipCurrentObject, skipAllWarnings, ignoreWarning, ignoreAllWarnings, cancelProcessing);
                            };
                            var data = {};
                            if (updateTask.propertiesToUpdate && updateTask.propertiesToUpdate.length != 0) {
                                _.each(updateTask.propertiesToUpdate, function (propToUpdate) {
                                    if (typeof propToUpdate.value != "undefined") {
                                        data[propToUpdate.propertyId] = propToUpdate.value;
                                    }
                                    else if (propToUpdate.clearValue == true) {
                                        data[propToUpdate.propertyId] = "";
                                    }
                                    else {
                                        var propertyDef = _this.trimClient.getMainObjectPropertyDefFromCache(HPTRIM.BaseObjectTypes.Record, propToUpdate.propertyId);
                                        var valueToSet;
                                        if (propertyDef.PFFormat == "Datetime") {
                                            var date = new Date();
                                            valueToSet = date.toISOString();
                                        }
                                        else if (propertyDef.PFFormat == "Boolean") {
                                            valueToSet = true;
                                        }
                                        data[propToUpdate.propertyId] = valueToSet;
                                    }
                                });
                                if (_.find(updateTask.propertiesToUpdate, function (propToUpdate) { return propToUpdate.requiresInput; })) {
                                    me.taggedUpdatePropertyDialogHandler(me.selections(), me.currentQuery(), me.currentFilter(), HPTRIM.BaseObjectTypes.Record, updateTask, data, startCallback, updateCallback, completeCallback, warningCallback, failureCallback);
                                }
                                else {
                                    me.taggedUpdatePropertyHandler(me.selections(), me.currentQuery(), me.currentFilter(), HPTRIM.BaseObjectTypes.Record, updateTask, data, startCallback, updateCallback, completeCallback, warningCallback, failureCallback);
                                }
                            }
                            else if (updateTask.requireCustomForm) {
                                me.taggedShowCustomUpdateTaskDialog(me.selections(), me.currentQuery(), me.currentFilter(), HPTRIM.BaseObjectTypes.Record, updateTask, data, startCallback, updateCallback, completeCallback, warningCallback, failureCallback);
                            }
                            else if (updateTask.serviceActionParameters.length > 0) {
                                me.taggedUpdateTaskDialogHandler(me.selections(), me.currentQuery(), me.currentFilter(), HPTRIM.BaseObjectTypes.Record, updateTask, data, startCallback, updateCallback, completeCallback, warningCallback, failureCallback);
                            }
                            else {
                                me.taggedUpdateTaskHandler(me.selections(), me.currentQuery(), me.currentFilter(), HPTRIM.BaseObjectTypes.Record, updateTask, data, startCallback, updateCallback, completeCallback, warningCallback, failureCallback);
                            }
                        };
                        this.recordCommandPanel.searchContainer = function () {
                            var query = "container:" + me.selections().join(',');
                            if (me.searchHandler) {
                                me.searchHandler(query, "", HPTRIM.BaseObjectTypes.Record);
                            }
                        };
                        this.recordCommandPanel.downloadContainer = function () {
                            var query = me.selections().join(',');
                            var isIpad = (navigator.userAgent.match(/iPad/i) != null || navigator.userAgent.match(/Macintosh/i));
                            var downloadWindowType = '_self';
                            if (isIpad) {
                                downloadWindowType = '_blank';
                            }
                            var path = HPTRIM.BaseObjectTypes.Record.path + "/" + query + "/" + HPTRIM.Messages.rec_edmFile + "/" + HPTRIM.Messages.core_document + "?";
                            var fullPath = me.trimClient.getUrl(path);
                            window.open(fullPath, downloadWindowType);
                        };
                        this.recordCommandPanel.searchRequests = function () {
                            var query = "record:" + me.selections().join(',');
                            if (me.searchHandler) {
                                me.searchHandler(query, "", HPTRIM.BaseObjectTypes.Request);
                            }
                        };
                        this.recordCommandPanel.clearSelections = function () {
                            me.selectAllCheckbox(false);
                            me.selections([]);
                        };
                        this.selections.subscribe(function (newValue) {
                            me.recordCommandPanel.bulkSelect(false);
                            me.reportCommandPanel.selectedCount(newValue.length);
                            if (newValue.length == 1) {
                                if (me.selectedUri() != newValue[0]) {
                                    me.selectedUri(newValue[0]);
                                }
                            }
                            if (newValue.length > 1) {
                                me.recordCommandPanel.showActions(true);
                            }
                            else {
                                me.recordCommandPanel.showActions(false);
                            }
                            _.each(newValue, function (newUri) {
                                if (!_.find(me.selectedInfoObjects(), function (infoObject) { return infoObject.Fields.Uri == newUri; })) {
                                    var findObject = function (items) {
                                        for (var i = 0; i < items().length; i++) {
                                            if (items()[i].Fields.Uri == newUri) {
                                                return items()[i];
                                            }
                                            if (items()[i].subordinateList) {
                                                if (findObject(items()[i].subordinateList.items)) {
                                                    return findObject(items()[i].subordinateList.items);
                                                }
                                            }
                                        }
                                    };
                                    var object = findObject(me.trimMainObjectItemListPanel.getItemList().items);
                                    if (object) {
                                        me.selectedInfoObjects.push(object);
                                    }
                                }
                            });
                            var updatedSelectedInfoObject = _.filter(me.selectedInfoObjects(), function (infoObject) {
                                return _.contains(me.selections(), infoObject.Fields.Uri + "");
                            });
                            me.selectedInfoObjects(updatedSelectedInfoObject);
                        });
                        this.isSelected = function (uri) {
                            uri = "" + uri;
                            if (_this.selections().indexOf(uri) != -1) {
                                return true;
                            }
                            return false;
                        };
                        var selectAll = function () {
                            var items = me.trimMainObjectItemListPanel.getItemList().items();
                            for (var i = 0; i < items.length; i++) {
                                if (_this.selections().indexOf(String(items[i].Fields.Uri)) == -1) {
                                    _this.selections().push(String(items[i].Fields.Uri));
                                }
                            }
                            _this.selections.valueHasMutated();
                        };
                        var selectNone = function () {
                            _this.selections([]);
                        };
                        this.selectAllCheckbox.subscribe(function (newValue) {
                            if (newValue) {
                                selectAll();
                            }
                            else {
                                selectNone();
                            }
                        });
                        this.bulkSelect = function () {
                            _this.selections([]);
                            _this.selectAllCheckbox(false);
                            _this.recordCommandPanel.bulkSelect(true);
                            _this.recordCommandPanel.bulkQuery(_this.currentQuery());
                            _this.recordCommandPanel.bulkFilter(_this.currentFilter());
                            _this.recordCommandPanel.bulkCount(_this.trimMainObjectItemListPanel.getPlugin().totalItems());
                            _this.recordCommandPanel.showActions(true);
                            _this.reportCommandPanel.selectedCount(_this.trimMainObjectItemListPanel.getPlugin().totalItems());
                        };
                        this.reportCommandPanel.cancel = function () {
                            me.showDefaultPanelView();
                            me.selectAllCheckbox(false);
                        };
                        this.reportCommandPanel.reportUrl = ko.computed(function () {
                            var path = HPTRIM.BaseObjectTypes.Report.path + "/" + me.reportCommandPanel.getSelectedReportUri() + "/PrintToHTML";
                            var fullPath = me.trimClient.getUrl(path);
                            var query = "";
                            if (_this.recordCommandPanel.bulkSelect()) {
                                query = "q=" + _this.currentQuery();
                                if (_this.currentFilter()) {
                                    query = query + "&filter=" + _this.currentFilter();
                                }
                            }
                            else {
                                query = "q=uri=" + me.selections().join(",");
                            }
                            return fullPath + "?" + query;
                        });
                        this.reportCommandPanel.doReport = function () {
                            if (me.selections().length == 0 && me.recordCommandPanel.bulkSelect() == false) {
                                return false;
                            }
                            if (!me.reportCommandPanel.getSelectedReportName()) {
                                return false;
                            }
                            me.showDefaultPanelView();
                            return true;
                        };
                        this.historySelectUri = function (uri) {
                            me.currentQuery();
                        };
                        this.browseClassificationPanel.classificationChange = function (uri) {
                            var searchString = 'classification:' + uri;
                            _this.localSearchHandler(searchString);
                        };
                        this.browseUserLabelPanel.userLabelChange = function (uri) {
                            var searchString = 'label:' + uri;
                            _this.localSearchHandler(searchString);
                        };
                        this.configureEventHandlers();
                    }
                    RecordsPanel.prototype.getTypeForPanel = function () {
                        return HPTRIM.BaseObjectTypes.Record;
                    };
                    RecordsPanel.prototype.getClassName = function () {
                        return RecordsPanel.CLASS_NAME;
                    };
                    RecordsPanel.prototype.koHandleViewClick = function (item) {
                        var uriFromTmpl;
                        var extFromTmpl;
                        var recNo;
                        var recTitle;
                        var showRevisionButton;
                        var recordSpURL;
                        var revisionCount = 0;
                        var showRenditionButton = false;
                        var recordIsCheckedOut;
                        if (!item.Fields)
                            item["Fields"] = item;
                        if (item.Fields) {
                            if (item.Fields.TrimType == 'Record') {
                                item = this.updateRecordObj(item);
                                if (item.Fields.ChildRenditions != null && item.Fields.ChildRenditions.length > 0)
                                    showRenditionButton = true;
                                uriFromTmpl = item.Fields.Uri;
                                extFromTmpl = item.Fields.RecordExtension;
                                recNo = item.Fields.RecordNumber;
                                recTitle = item.Fields.RecordTitle;
                                recordSpURL = item.Fields.RecordSpURL;
                                if (item.Fields.RecordRevisionCount.Value) {
                                    revisionCount = item.Fields.RecordRevisionCount.Value;
                                }
                                else {
                                    revisionCount = item.Fields.RecordRevisionCount;
                                }
                                recordIsCheckedOut = item.Fields.RecordIsCheckedOut.Value;
                            }
                            this.recordsDetailComponent.attachmentIsViewed = true;
                            this.recordsDetailComponent.uriFromTmpl = uriFromTmpl;
                            this.recordsDetailComponent.extFromTmpl = extFromTmpl;
                            this.recordsDetailComponent.recNo = recNo;
                            this.recordsDetailComponent.recTitle = recTitle;
                            this.recordsDetailComponent.revisionCount = revisionCount;
                            this.recordsDetailComponent.recordIsCheckedOut = recordIsCheckedOut;
                            this.recordsDetailComponent.recordSpURL = recordSpURL;
                            this.recordsDetailComponent.item = item;
                            this.handleViewClick(uriFromTmpl, extFromTmpl, recNo, recTitle, revisionCount, recordIsCheckedOut, recordSpURL, item.Fields);
                        }
                    };
                    RecordsPanel.prototype.updateRecordObj = function (recordObj) {
                        if (recordObj.Fields.RecordSpURL['Value'] != null) {
                            var RecordSpURL = recordObj.Fields.RecordSpURL['Value'];
                            delete recordObj.Fields.RecordSpURL;
                            recordObj["RecordSpURL"] = RecordSpURL;
                        }
                        if (recordObj.Fields.RecordExtension['Value'] != null) {
                            var RecordExtension = recordObj.Fields.RecordExtension['Value'];
                            delete recordObj.Fields.RecordExtension;
                            recordObj["RecordExtension"] = RecordExtension;
                        }
                        if (recordObj.Fields.RecordNumber['Value'] != null) {
                            var RecordNumber = recordObj.Fields.RecordNumber['Value'];
                            delete recordObj.Fields.RecordNumber;
                            recordObj["RecordNumber"] = RecordNumber;
                        }
                        if (recordObj.Fields.RecordTitle['Value'] != null) {
                            var RecordTitle = recordObj.Fields.RecordTitle['Value'];
                            delete recordObj.Fields.RecordTitle;
                            recordObj["RecordTitle"] = RecordTitle;
                        }
                        return recordObj;
                    };
                    RecordsPanel.prototype.configureEventHandlers = function () {
                        var _this = this;
                        this.trimMainObjectItemListPanel.getPlugin().onPageFetched = function (fetchedObjectUris) {
                            if (_this.selectAllCheckbox() == true) {
                                _this.selectSomeMore(fetchedObjectUris);
                            }
                        };
                    };
                    RecordsPanel.prototype.selectSomeMore = function (objectUris) {
                        if (!objectUris) {
                            return;
                        }
                        if (objectUris.length == 0) {
                            return;
                        }
                        for (var idx in objectUris) {
                            var uri = objectUris[idx];
                            if (!_.contains(this.selections(), uri)) {
                                this.selections().push(uri);
                            }
                        }
                        this.selections.valueHasMutated();
                    };
                    RecordsPanel.prototype.refresh = function () {
                        this.showRecordView(this.currentPanelId, this.selectedUri());
                    };
                    RecordsPanel.prototype.updateDataFromResult = function (result) {
                        this.trimMainObjectItemListPanel.updateDataFromResult(result);
                    };
                    RecordsPanel.prototype.executeQuery = function (query, clearResults, sortBy, filter, searchOptions) {
                        if (query.trim().length == 0) {
                            return;
                        }
                        if (clearResults) {
                            this.trimMainObjectItemListPanel.itemList.items([]);
                        }
                        this.selectAllCheckbox(false);
                        this.recordCommandPanel.deselectAllButtons();
                        this.updateSearchView(query, sortBy, filter, searchOptions);
                    };
                    RecordsPanel.prototype.updateList = function () {
                        var _this = this;
                        var me = this;
                        var callback = function () {
                            if (me.selectedUri() && true == _this.visible()) {
                                var uri = me.selectedUri();
                                var items = me.trimMainObjectItemListPanel.getItemList().items();
                                for (var i = 0; i < items.length; i++) {
                                    if (items[i].Fields.Uri == uri) {
                                        me.objectPropertiesPanel.refresh();
                                        me.objectPropertiesPanel.visible(true);
                                    }
                                }
                            }
                        };
                        this.trimMainObjectItemListPanel.getItemList().load(callback);
                    };
                    RecordsPanel.prototype.updateSearchView = function (query, sortBy, filter, searchOptions) {
                        var _this = this;
                        this.recordCommandPanel.queryString(query);
                        this.selectedUri("");
                        this.selections([]);
                        var me = this;
                        var callback = function (result) {
                            me.searching(false);
                            me.noResults(me.trimMainObjectItemListPanel.getItemList().items().length == 0);
                            if (me.trimMainObjectItemListPanel.getItemList().items().length == 1) {
                                me.showItem({ Fields: { Uri: me.trimMainObjectItemListPanel.getItemList().items()[0].Fields.Uri } });
                            }
                            if (result && result.SearchTitle) {
                                _this.queryDisplayString(result.SearchTitle);
                            }
                            var responseStatus = result.responseStatus;
                            if (result.errorThrown || (responseStatus && responseStatus.Message)) {
                                var errorMessage = result.errorThrown;
                                if (responseStatus && responseStatus.Message) {
                                    errorMessage = responseStatus.Message;
                                }
                                me.showError(errorMessage);
                            }
                            if (result.MinimumCount >= 500) {
                                _this.countEnabled(true);
                                _this.count("Count");
                            }
                            else {
                                _this.countEnabled(false);
                                _this.count(" ");
                            }
                        };
                        this.currentQuery(query);
                        this.currentFilter(filter);
                        var isearchQuery = { searchString: query, baseObjectType: HPTRIM.BaseObjectTypes.Record, sortBy: sortBy, filter: filter, searchOptions: searchOptions };
                        this.searching(true);
                        this.noResults(false);
                        this.trimMainObjectItemListPanel.updateQuery(isearchQuery, callback, true);
                        this.queryDisplayString(HP.HPTRIM.Messages.web_query + ": " + "'" + query + "'");
                    };
                    RecordsPanel.prototype.showDefaultPanelView = function () {
                        this.primaryPanel.visible(true);
                        var primaryPanels = this.primaryPanel.panels();
                        if (primaryPanels.length == 0) {
                            this.primaryPanel.panels([this.recordCommandPanel]);
                            this.recordCommandPanel.visible(true);
                        }
                        if (_.contains(primaryPanels, this.reportCommandPanel)) {
                            this.primaryPanel.panels([this.recordCommandPanel]);
                            this.recordCommandPanel.visible(true);
                        }
                        this.mainPanel.panels([this.trimMainObjectItemListPanel]);
                    };
                    RecordsPanel.prototype.prepareView = function (uri) {
                        this.recordCommandPanel.deselectAllButtons();
                        if (uri) {
                            this.selectedUri(uri);
                        }
                        else {
                            this.selectedUri("");
                        }
                    };
                    RecordsPanel.prototype.getCount = function () {
                        var me = this;
                        if (me.countEnabled()) {
                            var search = new HPTRIM.TrimMainObjectSearch(this.trimClient, HPTRIM.BaseObjectTypes.Record);
                            search.setSearchString(me.recordCommandPanel.queryString());
                            search.setExcludeCount(true);
                            search.setCountResults(true);
                            var me = this;
                            this.isLoading(true);
                            var currentRequestXhr = search.page().done(function (result) {
                                me.isLoading(false);
                                me.count("[" + HPTRIM.Messages.web_totalResults + ":" + result.Count + "]");
                                me.countEnabled(false);
                            }).fail(function (jqXHR, responseStatus, errorThrown) {
                                if (errorThrown || (responseStatus && responseStatus.Message)) {
                                    var errorMessage = errorThrown;
                                    if (responseStatus && responseStatus.Message) {
                                        errorMessage = responseStatus.Message;
                                    }
                                    this.queryDisplayString(errorMessage);
                                }
                                me.isLoading(false);
                            });
                        }
                    };
                    RecordsPanel.prototype.showRecordView = function (id, uri) {
                        var panelId = id;
                        if (!panelId) {
                            panelId = this.currentPanelId;
                        }
                        switch (panelId) {
                            case RecordsPanel.CHECKED_OUT_VIEW_ID:
                                this.checkedOutView(uri);
                                break;
                            case RecordsPanel.RECENTS_VIEW_ID:
                                this.recentsView(uri);
                                break;
                            case RecordsPanel.FAVORITE_VIEW_ID:
                                this.favoritesView(uri);
                                break;
                            case RecordsPanel.CREATED_VIEW_ID:
                                this.createdView(uri);
                                break;
                            case RecordsPanel.BROWSE_VIA_CATEGORY:
                                this.browseViaClassificationsView();
                                break;
                            case RecordsPanel.BROWSE_VIA_USERLABEL:
                                this.browseViaUserLabelView();
                                break;
                            default:
                                this.favoritesView(uri);
                                break;
                        }
                        ;
                    };
                    RecordsPanel.prototype.checkedOutView = function (uri) {
                        this.localSearchHandler("checkedOutBy:" + HPTRIM.Messages.bob_sbMe);
                        this.prepareView(uri);
                        this.recordCommandPanel.myRecordsSelected(true);
                        this.currentPanelId = RecordsPanel.CHECKED_OUT_VIEW_ID;
                    };
                    RecordsPanel.prototype.favoritesView = function (uri) {
                        this.localSearchHandler("favorite");
                        this.prepareView(uri);
                        this.recordCommandPanel.favoritesSelected(true);
                        this.currentPanelId = RecordsPanel.FAVORITE_VIEW_ID;
                    };
                    RecordsPanel.prototype.recentsView = function (uri) {
                        this.localSearchHandler("myDocuments", "", HPTRIM.BaseObjectTypes.Record, "", "updated-");
                        this.prepareView(uri);
                        this.recordCommandPanel.recentssSelected(true);
                        this.currentPanelId = RecordsPanel.RECENTS_VIEW_ID;
                    };
                    RecordsPanel.prototype.createdView = function (uri) {
                        this.localSearchHandler("creator:" + HPTRIM.Messages.bob_sbMe, "", HPTRIM.BaseObjectTypes.Record, "", "updated-");
                        this.prepareView(uri);
                        this.recordCommandPanel.createdSelected(true);
                        this.currentPanelId = RecordsPanel.CREATED_VIEW_ID;
                    };
                    RecordsPanel.prototype.browseViaClassificationsView = function (uri) {
                        this.recordCommandPanel.browseViaClassifications();
                        this.currentPanelId = RecordsPanel.BROWSE_VIA_CATEGORY;
                    };
                    RecordsPanel.prototype.browseViaUserLabelView = function () {
                        this.recordCommandPanel.browseViaUserLabel();
                        this.currentPanelId = RecordsPanel.BROWSE_VIA_USERLABEL;
                    };
                    RecordsPanel.prototype.searchView = function (query, uri, sort, filter, searchOptions) {
                        var sortBy = "updated-";
                        if (sort) {
                            sortBy = sort;
                        }
                        this.searchHandler(query, "", HPTRIM.BaseObjectTypes.Record, filter, sort, searchOptions);
                        this.prepareView(uri);
                    };
                    RecordsPanel.prototype.setContext = function (context) {
                        if (context.query) {
                            this.searchHandler(context.query);
                        }
                        else if (context.id) {
                            this.showRecordView(context.id);
                        }
                        else {
                            this.showRecordView(RecordsPanel.FAVORITE_VIEW_ID);
                        }
                        if (context.uri) {
                            this.selectedUri(context.uri);
                        }
                        else {
                            this.selectedUri("");
                        }
                        this.recordCommandPanel.url(window.location.href);
                    };
                    RecordsPanel.CHECKED_OUT_VIEW_ID = 1;
                    RecordsPanel.RECENTS_VIEW_ID = 2;
                    RecordsPanel.FAVORITE_VIEW_ID = 3;
                    RecordsPanel.CREATED_VIEW_ID = 4;
                    RecordsPanel.SAVEDSEARCH_VIEW_ID = 5;
                    RecordsPanel.BROWSE_VIA_CATEGORY = 6;
                    RecordsPanel.BROWSE_VIA_USERLABEL = 7;
                    RecordsPanel.CLASS_NAME = "RecordsPanel";
                    return RecordsPanel;
                }(HP.HPTRIM.Framework.Components.Layouts.SinglePage.ContentPanel));
                Panels.RecordsPanel = RecordsPanel;
            })(Panels = App.Panels || (App.Panels = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Panels;
            (function (Panels) {
                "use strict";
                var RecordCommandPanel = (function (_super) {
                    __extends(RecordCommandPanel, _super);
                    function RecordCommandPanel(trimClient, cssClass) {
                        _super.call(this, 'templates/Record/RecordCommandPanel', true);
                        this.createReportEnabled = ko.observable(false);
                        this.favoritesSelected = ko.observable(false);
                        this.recentssSelected = ko.observable(false);
                        this.myRecordsSelected = ko.observable(false);
                        this.createdSelected = ko.observable(false);
                        this.showUrl = ko.observable(false);
                        this.isbrowseViaUserLabelVisible = ko.observable(true);
                        this.url = ko.observable("");
                        this.showReportPanel = function () { };
                        this.browseViaClassifications = function () { };
                        this.browseViaUserLabel = function () { };
                        this.urlStringToRemove = "";
                        this.clearSelections = function () { };
                        this.bulkSelect = ko.observable(false);
                        this.bulkQuery = ko.observable("");
                        this.bulkFilter = ko.observable("");
                        this.bulkCount = ko.observable(0);
                        this.searchRequests = function () { };
                        this.searchContainer = function () { };
                        this.downloadContainer = function () { };
                        if (cssClass) {
                            this.cssClass(cssClass);
                        }
                        var me = this;
                        this.showUrlButton = ko.observable(true);
                        this.url = ko.observable("");
                        this.showUrl = ko.observable(false);
                        this.queryString = ko.observable("");
                        this.showActions = ko.observable(false);
                        this.taskGroups = ko.observableArray([]);
                        this.initialiseTasks(trimClient);
                        this.showRequest = ko.observable(true);
                        this.showBasicRequest = ko.observable(false);
                        this.canRequest = ko.observable(true);
                        this.showUpdateGPS = ko.observable(false);
                        this.executeTask = function (task) {
                            me.doUpdateTask(task);
                        };
                        var activeFeatures = trimClient.getDatabase().activeFeatures();
                        if (!_.contains(activeFeatures, "Labels")) {
                            me.isbrowseViaUserLabelVisible(false);
                        }
                        this.addRecord = function () {
                        };
                        this.showRecents = function () {
                        };
                        this.showFavorites = function () {
                        };
                        this.showCreated = function () {
                        };
                        this.showMyRecords = function () {
                        };
                    }
                    RecordCommandPanel.prototype.deselectAllButtons = function () {
                        this.favoritesSelected(false);
                        this.recentssSelected(false);
                        this.myRecordsSelected(false);
                        this.createdSelected(false);
                    };
                    RecordCommandPanel.prototype.modifyRecordAdditionalFieldsClick = function () {
                        Panels.RecordDetails.RecordTasks.modifyAdditionalFieldsForMultiple = true;
                        var task = Panels.RecordDetails.RecordTasks.modifyAdditionalFieldsRecordsTask();
                        this.doUpdateTask(task);
                    };
                    RecordCommandPanel.prototype.setGPSLocationClick = function () {
                        this.doUpdateTask(Panels.RecordDetails.RecordTasks.setGpsLocationTask());
                    };
                    RecordCommandPanel.prototype.initialiseTasks = function (trimClient) {
                        var activeFeatures = trimClient.getDatabase().activeFeatures();
                        var taskGroups = [];
                        taskGroups.push(Panels.RecordDetails.RecordTasks.getSendToGroupTask());
                        taskGroups.push(Panels.RecordDetails.RecordTasks.getRemoveFromGroupTask());
                        taskGroups.push(Panels.RecordDetails.RecordTasks.getLocationGroupTasks());
                        if (_.contains(activeFeatures, "Requests") && _.contains(activeFeatures, "AdvancedRequests")) {
                            taskGroups.push(Panels.RecordDetails.RecordTasks.getAdvancedRequestGroupTask());
                        }
                        else if (_.contains(activeFeatures, "Requests")) {
                            taskGroups.push(Panels.RecordDetails.RecordTasks.getBasicRequestGroupTask());
                        }
                        taskGroups.push(Panels.RecordDetails.RecordTasks.getDetailsGroupTasks());
                        taskGroups.push(Panels.RecordDetails.RecordTasks.getMoreGroupTasks());
                        var filterTasksOnPermission = function (task) {
                            if (task.isGroup) {
                                task.subTasks = _.filter(task.subTasks, function (task) {
                                    return filterTasksOnPermission(task);
                                });
                                if (task.subTasks && task.subTasks.length > 0) {
                                    return true;
                                }
                                return false;
                            }
                            if (task.requiredFeature) {
                                if (!_.contains(trimClient.getDatabase().activeFeatures(), task.requiredFeature)) {
                                    return true;
                                }
                            }
                            if (task.requiredPermission) {
                                if (trimClient.getDatabase().currentUserPermissions()[task.requiredPermission] == true) {
                                    return true;
                                }
                                return false;
                            }
                            else {
                                return true;
                            }
                        };
                        var finalTaskGroups = _.filter(taskGroups, filterTasksOnPermission);
                        this.taskGroups(finalTaskGroups);
                    };
                    RecordCommandPanel.prototype.toggleURLView = function () {
                        var basePath = HP.HPTRIM.Utils.TrimHelper.getBaseUrl();
                        var queryStringValue = this.queryString();
                        var query = HP.HPTRIM.Framework.Components.Shared.String.format("q={0}", [queryStringValue]);
                        var objectType = HP.HPTRIM.Framework.Components.Shared.String.format("t={0}", ["Record"]);
                        var url = HP.HPTRIM.Framework.Components.Shared.String.format("{0}?{1}&{2}", [basePath, query, objectType]);
                        if (this.urlStringToRemove) {
                            url = url.replace(this.urlStringToRemove, "");
                        }
                        this.url(url);
                        this.showUrl(!this.showUrl());
                        if (this.showUrl()) {
                            $('#URL_Link_Command').select();
                            if (document.execCommand) {
                                document.execCommand('copy');
                            }
                        }
                    };
                    RecordCommandPanel.prototype.getRevisionDetails = function () {
                    };
                    return RecordCommandPanel;
                }(HP.HPTRIM.Framework.Components.Layouts.Panel));
                Panels.RecordCommandPanel = RecordCommandPanel;
            })(Panels = App.Panels || (App.Panels = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Panels;
            (function (Panels) {
                "use strict";
                var ReportCommandPanel = (function (_super) {
                    __extends(ReportCommandPanel, _super);
                    function ReportCommandPanel(trimClient, cssClass, advancedPanelErrorVisible, advancedPanelAlertDetails) {
                        _super.call(this, 'templates/Record/ReportCommandPanel', true);
                        this.selectedReportItem = ko.observable();
                        this.selectedCount = ko.observable(0);
                        this.cssClass('report-command-panel');
                        var me = this;
                        this.noReportMessage = ko.observable(HP.HPTRIM.Messages.web_noSavedSearchAvailable);
                        this.searchQueryObject = { searchString: "type: Record", baseObjectType: HPTRIM.BaseObjectTypes.Report };
                        this.trimItemListLoader = new HP.HPTRIM.DataLoader.ReportItemLoader(trimClient, this.searchQueryObject);
                        var fieldSelector = function (field) {
                            if (field.InternalName == "ReportName") {
                                return true;
                            }
                            return false;
                        };
                        this.itemList = new HP.HPTRIM.Framework.Components.ItemList.ItemListComponent({ loader: this.trimItemListLoader });
                        this.itemList.templateName('/templates/ItemList/ReportItemListCard');
                        this.itemList.load();
                        this.selectReport = function (report) {
                            me.selectedReportItem(report);
                        };
                    }
                    ReportCommandPanel.prototype.getSelectedReportUri = function () {
                        if (this.selectedReportItem()) {
                            return this.selectedReportItem().Fields.Uri;
                        }
                        return "";
                    };
                    ReportCommandPanel.prototype.getSelectedReportName = function () {
                        if (this.selectedReportItem()) {
                            return this.selectedReportItem().Fields.ReportName;
                        }
                        return "";
                    };
                    return ReportCommandPanel;
                }(HP.HPTRIM.Framework.Components.Layouts.Panel));
                Panels.ReportCommandPanel = ReportCommandPanel;
            })(Panels = App.Panels || (App.Panels = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Panels;
            (function (Panels) {
                var RecordDetails;
                (function (RecordDetails) {
                    "use strict";
                    var RecordInformation = (function () {
                        function RecordInformation() {
                        }
                        RecordInformation.getFilters = function () {
                            return [
                                {
                                    caption: HP.HPTRIM.Messages.web_dispositionFilter,
                                    format: "enum",
                                    enumName: "RecordDisp",
                                    clauseId: "RecordDisposition",
                                    clauseString: "disposition",
                                    name: "recordDisposition",
                                    oneInGroupMustBeOn: true,
                                    errCaption: HP.HPTRIM.Messages.web_mustPickAtLeatOneDispFilter,
                                },
                                {
                                    caption: HP.HPTRIM.Messages.web_recordClassFilter,
                                    format: "enum",
                                    enumName: "RecordClass",
                                    clauseId: "RecordClass",
                                    clauseString: "class",
                                    name: "recordClass",
                                    oneInGroupMustBeOn: true,
                                    errCaption: HP.HPTRIM.Messages.web_mustPickAtLeatOneRecordClassFilter,
                                },
                                {
                                    caption: HP.HPTRIM.Messages.web_recordExtensionFilter,
                                    name: "",
                                    clauseId: "RecordExtension",
                                    clauseString: "extension",
                                    format: "string",
                                    fieldCaption: HP.HPTRIM.Messages.web_recordExtensionFilter,
                                    isList: true,
                                    listSeparator: ',',
                                },
                                {
                                    caption: HP.HPTRIM.Messages.web_recordSavedSearchFilter,
                                    name: "",
                                    clauseId: "Saved",
                                    clauseString: "Saved",
                                    format: "object",
                                    objectType: HPTRIM.BaseObjectTypes.SavedSearch,
                                    pickerFilterString: "type:Record",
                                },
                                {
                                    caption: HP.HPTRIM.Messages.web_recordDateRegisteredFilter,
                                    name: "",
                                    clauseId: "RecordRegisteredOn",
                                    clauseString: "registeredOn",
                                    criteriaFormat: "last {0} days",
                                    format: "number",
                                    fieldCaption: HPTRIM.Messages.web_numberOfDays,
                                    allowZeroNumber: false,
                                },
                                {
                                    caption: HP.HPTRIM.Messages.web_recordFinalisedFilter,
                                    name: "finalised",
                                    clauseId: "RecordFinal",
                                    clauseString: "final",
                                    format: 'boolean',
                                    oneInGroupMustBeOn: true,
                                    errCaption: HP.HPTRIM.Messages.web_finalizedFilters,
                                    options: [
                                        { "caption": HP.HPTRIM.Messages.rec_finalised, "name": 'final', "negated": false },
                                        { "caption": HP.HPTRIM.Messages.web_notFinalized, "name": 'notfinal', "negated": true }
                                    ]
                                },
                            ];
                        };
                        RecordInformation.getSearchOptionFilters = function (trimClient, objectType) {
                            var me = this;
                            var lcRawFilters = [];
                            var searchOptions = trimClient.searchOptionDefinitions;
                            var defaultValue = ko.observable(false);
                            var capitalize = function (stringValue) {
                                return stringValue.charAt(0).toUpperCase() + stringValue.slice(1);
                            };
                            _.forEach(searchOptions[objectType.name], function (searchOption) {
                                var id = searchOption.Id;
                                if (id == 'SearchUserOptionsAssigneeSearchIncludesPosition') {
                                    var searchOptionCaptionTitle = searchOption.Caption.split(',');
                                    defaultValue(!HPRM_userSearchOptions[searchOption.Id].Value);
                                    var rawOptionFilter = {
                                        caption: searchOptionCaptionTitle[0],
                                        name: searchOption.PropertyId,
                                        clauseId: searchOption.PropertyId,
                                        clauseString: searchOption.PropertyId,
                                        format: searchOption.PFFormat.toLowerCase(),
                                        oneInGroupMustBeOn: false,
                                        defaultUnchecked: defaultValue(),
                                        errCaption: HP.HPTRIM.Messages.web_options,
                                        options: [
                                            { "caption": searchOption.Caption, "name": searchOption.Id, "negated": false },
                                        ]
                                    };
                                    var lcCaptionTitle = (searchOptionCaptionTitle[1]) ? searchOptionCaptionTitle[1].trim() : searchOptionCaptionTitle[0];
                                    lcCaptionTitle = capitalize(lcCaptionTitle);
                                    if (searchOption.PFFormat.toLowerCase() == 'boolean') {
                                        var options = [
                                            { "caption": HP.HPTRIM.Messages.web_includePersonPosition, "name": searchOption.Id, "negated": false }
                                        ];
                                        rawOptionFilter.options = options;
                                    }
                                    lcRawFilters.push(rawOptionFilter);
                                }
                            });
                            return lcRawFilters;
                        };
                        return RecordInformation;
                    }());
                    RecordDetails.RecordInformation = RecordInformation;
                    var RecordTasks = (function () {
                        function RecordTasks() {
                        }
                        RecordTasks.addToFavoriteTask = function () {
                            return {
                                id: "AddToFavorites",
                                icon: "favorite_x24",
                                caption: HPTRIM.Messages.web_addToFavorites,
                                tagCaption: HPTRIM.Messages.web_favorites,
                                toolTip: HPTRIM.Messages.web_addToFavorites,
                                successMessage: HPTRIM.Messages.web_favoriteAdded,
                                messageProperty: 'RecordNumber',
                                isGroup: false,
                                requiredPermission: "",
                                enabledCommandId: "",
                                preConditions: [],
                                supportsTagged: true,
                                supportsSingle: true,
                                returnedType: HPTRIM.BaseObjectTypes.Record,
                                objectUpdated: true,
                                objectDeleted: false,
                                objectType: HPTRIM.BaseObjectTypes.Record,
                                requiredProperties: ["IsInFavorites"],
                                serviceAction: "SetUserLabel",
                                serviceActionFullType: "HP.HPTRIM.ServiceModel.SetUserLabel",
                                serviceActionParameters: [],
                                serviceActionValueParameters: [],
                                updatedProperties: ["IsInFavorites"],
                                requiredCommandIds: [],
                                propertiesToUpdate: [],
                                checkForWarnings: true,
                            };
                        };
                        RecordTasks.removeFromFavoritesTask = function () {
                            return {
                                id: "RemoveFromFavorites",
                                icon: "editcut_x24",
                                caption: HPTRIM.Messages.web_removeFromFavorites,
                                tagCaption: HPTRIM.Messages.web_favorites,
                                toolTip: HPTRIM.Messages.web_removeFromFavorites,
                                successMessage: HPTRIM.Messages.web_favoriteRemoved,
                                messageProperty: 'RecordNumber',
                                isGroup: false,
                                requiredPermission: "",
                                enabledCommandId: "",
                                preConditions: [],
                                supportsTagged: true,
                                supportsSingle: true,
                                returnedType: HPTRIM.BaseObjectTypes.Record,
                                objectUpdated: true,
                                objectDeleted: false,
                                objectType: HPTRIM.BaseObjectTypes.Record,
                                requiredProperties: ["IsInFavorites"],
                                serviceAction: "RemoveUserLabel",
                                serviceActionFullType: "HP.HPTRIM.ServiceModel.RemoveUserLabel",
                                serviceActionParameters: [],
                                serviceActionValueParameters: [],
                                updatedProperties: ["IsInFavorites"],
                                requiredCommandIds: [],
                                propertiesToUpdate: [],
                                checkForWarnings: true,
                            };
                        };
                        RecordTasks.addToRecordsWorkTrayTask = function () {
                            return {
                                id: "AddToWorktray",
                                icon: "",
                                caption: HPTRIM.Messages.web_sendRequestOnBehalfOfButtonCaption + ' ' + HPTRIM.Messages.web_to + ' ' + HPTRIM.Messages.trm_shortCutWorkTray,
                                tagCaption: HPTRIM.Messages.trm_shortCutWorkTray,
                                toolTip: HPTRIM.Messages.web_sendRequestOnBehalfOfButtonCaption + ' ' + HPTRIM.Messages.web_to + ' ' + HPTRIM.Messages.trm_shortCutWorkTray,
                                successMessage: HPTRIM.Messages.web_worktrayAdded,
                                messageProperty: 'RecordNumber',
                                isGroup: false,
                                requiredPermission: "",
                                enabledCommandId: "",
                                preConditions: [],
                                supportsTagged: true,
                                supportsSingle: true,
                                returnedType: HPTRIM.BaseObjectTypes.Record,
                                objectUpdated: true,
                                objectDeleted: false,
                                objectType: HPTRIM.BaseObjectTypes.Record,
                                requiredProperties: [""],
                                serviceAction: "SetUserLabel",
                                serviceActionFullType: "HP.HPTRIM.ServiceModel.SetUserLabel",
                                serviceActionParameters: [],
                                serviceActionValueParameters: [
                                    {
                                        parameterName: "SetUserLabelFavoriteType",
                                        type: "string",
                                        value: "Worktray"
                                    }
                                ],
                                updatedProperties: [""],
                                requiredCommandIds: [],
                                propertiesToUpdate: [],
                                checkForWarnings: true,
                            };
                        };
                        RecordTasks.removeFromRecordsWorkTrayTask = function () {
                            return {
                                id: "RemoveFromWorktray",
                                icon: "",
                                caption: HPTRIM.Messages.web_remove + ' ' + HPTRIM.Messages.web_from + ' ' + HPTRIM.Messages.trm_shortCutWorkTray,
                                tagCaption: HPTRIM.Messages.trm_shortCutWorkTray,
                                toolTip: HPTRIM.Messages.web_remove + ' ' + HPTRIM.Messages.web_from + ' ' + HPTRIM.Messages.trm_shortCutWorkTray,
                                successMessage: HPTRIM.Messages.web_worktrayRemoved,
                                messageProperty: 'RecordNumber',
                                isGroup: false,
                                requiredPermission: "",
                                enabledCommandId: "",
                                preConditions: [],
                                supportsTagged: true,
                                supportsSingle: true,
                                returnedType: HPTRIM.BaseObjectTypes.Record,
                                objectUpdated: true,
                                objectDeleted: false,
                                objectType: HPTRIM.BaseObjectTypes.Record,
                                requiredProperties: [""],
                                serviceAction: "RemoveUserLabel",
                                serviceActionFullType: "HP.HPTRIM.ServiceModel.RemoveUserLabel",
                                serviceActionParameters: [],
                                serviceActionValueParameters: [
                                    {
                                        parameterName: "RemoveUserLabelFavoriteType",
                                        type: "string",
                                        value: "Worktray"
                                    }
                                ],
                                updatedProperties: [""],
                                requiredCommandIds: [],
                                propertiesToUpdate: [],
                                checkForWarnings: true,
                            };
                        };
                        RecordTasks.addToMyContainersTask = function () {
                            return {
                                id: "AddRecentFolder",
                                icon: "",
                                caption: HPTRIM.Messages.web_sendRequestOnBehalfOfButtonCaption + ' ' + HPTRIM.Messages.web_to + ' ' + HPTRIM.Messages.dbp_recentContainers,
                                tagCaption: HPTRIM.Messages.web_myContainers,
                                toolTip: HPTRIM.Messages.web_sendRequestOnBehalfOfButtonCaption + ' ' + HPTRIM.Messages.web_to + ' ' + HPTRIM.Messages.dbp_recentContainers,
                                successMessage: HPTRIM.Messages.web_myContainersAdded,
                                messageProperty: 'RecordNumber',
                                isGroup: false,
                                requiredPermission: "",
                                enabledCommandId: "",
                                preConditions: [],
                                supportsTagged: true,
                                supportsSingle: true,
                                returnedType: HPTRIM.BaseObjectTypes.Record,
                                objectUpdated: true,
                                objectDeleted: false,
                                objectType: HPTRIM.BaseObjectTypes.Record,
                                requiredProperties: [""],
                                serviceAction: "SetUserLabel",
                                serviceActionFullType: "HP.HPTRIM.ServiceModel.SetUserLabel",
                                serviceActionParameters: [],
                                serviceActionValueParameters: [
                                    {
                                        parameterName: "SetUserLabelFavoriteType",
                                        type: "string",
                                        value: "Containers"
                                    }
                                ],
                                updatedProperties: [""],
                                requiredCommandIds: [],
                                propertiesToUpdate: [],
                                checkForWarnings: true,
                            };
                        };
                        RecordTasks.removeFromMyContainersTask = function () {
                            return {
                                id: "RemoveRecentFolder",
                                icon: "",
                                caption: HPTRIM.Messages.web_removeFromMyContainers,
                                tagCaption: HPTRIM.Messages.web_myContainers,
                                toolTip: HPTRIM.Messages.web_removeFromMyContainers,
                                successMessage: HPTRIM.Messages.web_myContainerRemoved,
                                messageProperty: 'RecordNumber',
                                isGroup: false,
                                requiredPermission: "",
                                enabledCommandId: "",
                                preConditions: [],
                                supportsTagged: true,
                                supportsSingle: true,
                                returnedType: HPTRIM.BaseObjectTypes.Record,
                                objectUpdated: true,
                                objectDeleted: false,
                                objectType: HPTRIM.BaseObjectTypes.Record,
                                requiredProperties: [""],
                                serviceAction: "RemoveUserLabel",
                                serviceActionFullType: "HP.HPTRIM.ServiceModel.RemoveUserLabel",
                                serviceActionParameters: [],
                                serviceActionValueParameters: [
                                    {
                                        parameterName: "RemoveUserLabelFavoriteType",
                                        type: "string",
                                        value: "Containers"
                                    }
                                ],
                                updatedProperties: [""],
                                requiredCommandIds: [],
                                propertiesToUpdate: [],
                                checkForWarnings: true,
                            };
                        };
                        RecordTasks.addToRecentRecordsTask = function () {
                            return {
                                id: "AddRecentDoc",
                                icon: "",
                                caption: HPTRIM.Messages.web_sendRequestOnBehalfOfButtonCaption + ' ' + HPTRIM.Messages.web_to + ' ' + HPTRIM.Messages.web_recentRecords,
                                tagCaption: HPTRIM.Messages.web_recentRecords,
                                toolTip: HPTRIM.Messages.web_sendRequestOnBehalfOfButtonCaption + ' ' + HPTRIM.Messages.web_to + ' ' + HPTRIM.Messages.web_recentRecords,
                                successMessage: HPTRIM.Messages.web_recentDocumentsAdded,
                                messageProperty: 'RecordNumber',
                                isGroup: false,
                                requiredPermission: "",
                                enabledCommandId: "",
                                preConditions: [],
                                supportsTagged: true,
                                supportsSingle: true,
                                returnedType: HPTRIM.BaseObjectTypes.Record,
                                objectUpdated: true,
                                objectDeleted: false,
                                objectType: HPTRIM.BaseObjectTypes.Record,
                                requiredProperties: [""],
                                serviceAction: "SetUserLabel",
                                serviceActionFullType: "HP.HPTRIM.ServiceModel.SetUserLabel",
                                serviceActionParameters: [],
                                serviceActionValueParameters: [
                                    {
                                        parameterName: "SetUserLabelFavoriteType",
                                        type: "string",
                                        value: "Documents"
                                    }
                                ],
                                updatedProperties: [""],
                                requiredCommandIds: [],
                                propertiesToUpdate: [],
                                checkForWarnings: true,
                            };
                        };
                        RecordTasks.removeFromRecentRecordsTask = function () {
                            return {
                                id: "RemoveRecentDoc",
                                icon: "",
                                caption: HPTRIM.Messages.web_remove + ' ' + HPTRIM.Messages.web_from + ' ' + HPTRIM.Messages.web_recentRecords,
                                tagCaption: HPTRIM.Messages.web_recentRecords,
                                toolTip: HPTRIM.Messages.web_remove + ' ' + HPTRIM.Messages.web_from + ' ' + HPTRIM.Messages.web_recentRecords,
                                successMessage: HPTRIM.Messages.web_recentDocRemoved,
                                messageProperty: 'RecordNumber',
                                isGroup: false,
                                requiredPermission: "",
                                enabledCommandId: "",
                                preConditions: [],
                                supportsTagged: true,
                                supportsSingle: true,
                                returnedType: HPTRIM.BaseObjectTypes.Record,
                                objectUpdated: true,
                                objectDeleted: false,
                                objectType: HPTRIM.BaseObjectTypes.Record,
                                requiredProperties: [""],
                                serviceAction: "RemoveUserLabel",
                                serviceActionFullType: "HP.HPTRIM.ServiceModel.RemoveUserLabel",
                                serviceActionParameters: [],
                                serviceActionValueParameters: [
                                    {
                                        parameterName: "RemoveUserLabelFavoriteType",
                                        type: "string",
                                        value: "Documents"
                                    }
                                ],
                                updatedProperties: [""],
                                requiredCommandIds: [],
                                propertiesToUpdate: [],
                                checkForWarnings: true,
                            };
                        };
                        RecordTasks.addToUserLabelTask = function () {
                            return {
                                id: "AddToUserLabel",
                                caption: HP.HPTRIM.Messages.web_addToUserLabel,
                                tagCaption: HPTRIM.Messages.web_userLabel,
                                toolTip: HP.HPTRIM.Messages.web_addToUserLabel,
                                successMessage: HPTRIM.Messages.web_addToUserLabelSuccess,
                                isGroup: false,
                                requiredPermission: "",
                                enabledCommandId: "",
                                preConditions: [],
                                supportsTagged: false,
                                supportsSingle: true,
                                objectType: HPTRIM.BaseObjectTypes.Record,
                                objectUpdated: true,
                                requireCustomForm: true,
                                objectDeleted: false,
                                returnedType: HPTRIM.BaseObjectTypes.Record,
                                serviceActionValueParameters: [],
                                serviceAction: "SetUserLabel",
                                serviceActionFullType: "HP.HPTRIM.ServiceModel.SetUserLabel",
                                serviceActionParameters: [
                                    {
                                        parameterName: "SetUserLabelUserLabelToApply",
                                        type: "object",
                                        objectPropertyName: "",
                                        value: ""
                                    }
                                ],
                                requiredProperties: ["UserLabelToApply"],
                                updatedProperties: ["UserLabelToApply"],
                                requiredCommandIds: [],
                                checkForWarnings: true,
                            };
                        };
                        RecordTasks.removeFromUserLabelsTask = function () {
                            return {
                                id: "RemoveFromUserLabels",
                                caption: HP.HPTRIM.Messages.web_removeUserLabel,
                                tagCaption: HPTRIM.Messages.web_userLabel,
                                toolTip: HP.HPTRIM.Messages.web_removeUserLabel,
                                successMessage: HPTRIM.Messages.web_removeUserLabelSuccess,
                                isGroup: false,
                                requiredPermission: "",
                                enabledCommandId: "",
                                preConditions: [],
                                supportsTagged: false,
                                supportsSingle: true,
                                objectType: HPTRIM.BaseObjectTypes.Record,
                                objectUpdated: true,
                                requireCustomForm: true,
                                objectDeleted: false,
                                returnedType: HPTRIM.BaseObjectTypes.Record,
                                serviceAction: "RemoveUserLabel",
                                serviceActionFullType: "HP.HPTRIM.ServiceModel.RemoveUserLabel",
                                serviceActionValueParameters: [
                                    {
                                        parameterName: "SetUserLabelUserLabelToApply",
                                        type: "object",
                                        objectPropertyName: "sourceObject",
                                        value: undefined
                                    }
                                ],
                                serviceActionParameters: [],
                                requiredProperties: ["UserLabelToDetach"],
                                updatedProperties: ["UserLabelToDetach"],
                                requiredCommandIds: [],
                                checkForWarnings: true,
                            };
                        };
                        RecordTasks.AddToMyCheckinStyles = function () {
                            return {
                                id: "AddToMyCheckinStyles",
                                caption: HP.HPTRIM.Messages.web_addToCheckinStyle,
                                tagCaption: HP.HPTRIM.Messages.web_addToCheckinStyle,
                                toolTip: HP.HPTRIM.Messages.web_addToCheckinStyle,
                                successMessage: HPTRIM.Messages.web_success,
                                isGroup: false,
                                requiredPermission: "",
                                enabledCommandId: "",
                                preConditions: [],
                                supportsTagged: false,
                                supportsSingle: true,
                                objectType: HPTRIM.BaseObjectTypes.Record,
                                objectUpdated: true,
                                requireCustomForm: true,
                                objectDeleted: false,
                                returnedType: HPTRIM.BaseObjectTypes.Record,
                                serviceAction: "",
                                serviceActionFullType: "",
                                serviceActionValueParameters: [],
                                serviceActionParameters: [],
                                requiredProperties: [],
                                updatedProperties: [],
                                requiredCommandIds: [],
                                checkForWarnings: true,
                            };
                        };
                        RecordTasks.modifyAdditionalFieldsRecordsTaskId = "EditUserfields";
                        RecordTasks.modifyAdditionalFieldsForMultiple = false;
                        RecordTasks.modifyAdditionalFieldsRecordsTask = function () {
                            return {
                                id: "EditUserfields",
                                caption: HPTRIM.Messages.web_modify + ' ' + HPTRIM.Messages.web_record + ' ' + HPTRIM.Messages.web_additional_Fields,
                                toolTip: HPTRIM.Messages.web_modify + ' ' + HPTRIM.Messages.web_record + ' ' + HPTRIM.Messages.web_additional_Fields,
                                successMessage: HPTRIM.Messages.web_recordUpdateSucceeded,
                                isGroup: false,
                                requiredPermission: "",
                                enabledCommandId: "",
                                preConditions: [],
                                supportsTagged: true,
                                supportsSingle: true,
                                requiredProperties: [""],
                                objectType: HPTRIM.BaseObjectTypes.Record,
                                objectUpdated: true,
                                requireCustomForm: true,
                                objectDeleted: false,
                                returnedType: HPTRIM.BaseObjectTypes.Record,
                                updatedProperties: [""],
                                serviceAction: "ModifyRecordAdditionalFields",
                                serviceActionFullType: "HP.HPTRIM.ServiceModel.ModifyRecordAdditionalFields",
                                serviceActionParameters: [],
                                serviceActionValueParameters: [],
                                requiredCommandIds: [],
                                forMultipleItems: true,
                                checkForWarnings: true,
                            };
                        };
                        RecordTasks.SetSecurityTaskId = "Security";
                        RecordTasks.modifySecurityAccessTask = function () {
                            return {
                                id: "Security",
                                caption: HP.HPTRIM.Messages.web_showSecurityAccess,
                                toolTip: HP.HPTRIM.Messages.web_showSecurityAccess,
                                successMessage: HPTRIM.Messages.web_recordUpdateSucceeded,
                                isGroup: false,
                                requiredPermission: "ModifyRecordSecurity",
                                enabledCommandId: "",
                                preConditions: [],
                                supportsTagged: true,
                                supportsSingle: true,
                                requiredProperties: [""],
                                objectType: HPTRIM.BaseObjectTypes.Record,
                                objectUpdated: true,
                                requireCustomForm: true,
                                objectDeleted: false,
                                returnedType: HPTRIM.BaseObjectTypes.Record,
                                updatedProperties: ["RecordSecurity"],
                                serviceAction: "",
                                serviceActionFullType: "",
                                serviceActionParameters: [],
                                serviceActionValueParameters: [],
                                requiredCommandIds: [],
                                forMultipleItems: true,
                                checkForWarnings: true,
                            };
                        };
                        RecordTasks.navigateToRelatedRecordTask = function () {
                            return {
                                id: "",
                                caption: "",
                                enabledCommandId: "",
                                icon: "",
                                isGroup: false,
                                objectPropertiesForQuery: [],
                                preConditions: [],
                                query: "",
                                returnedType: HPTRIM.BaseObjectTypes.Record,
                                returnedTypeProperty: "",
                                subTasks: [],
                                supportsSingle: true,
                                supportsTagged: false,
                                toolTip: "",
                            };
                        };
                        RecordTasks.navigateToAllRelatedRecordTask = function () {
                            return {
                                id: "",
                                caption: "",
                                enabledCommandId: "",
                                icon: "",
                                isGroup: false,
                                objectPropertiesForQuery: [],
                                preConditions: [],
                                query: "",
                                returnedType: HPTRIM.BaseObjectTypes.Record,
                                returnedTypeProperty: "",
                                subTasks: [],
                                supportsSingle: true,
                                supportsTagged: false,
                                toolTip: "",
                            };
                        };
                        RecordTasks.addRelatedRecordTask = function () {
                            return {
                                id: "AddRelatedRecord",
                                caption: HP.HPTRIM.Messages.web_Add + ' ' + HP.HPTRIM.Messages.dp_cap_relatedRecords,
                                toolTip: HP.HPTRIM.Messages.web_Add + ' ' + HP.HPTRIM.Messages.dp_cap_relatedRecords,
                                successMessage: HPTRIM.Messages.web_recordUpdateSucceeded,
                                isGroup: false,
                                requiredPermission: "RecordRelate",
                                enabledCommandId: "",
                                preConditions: [],
                                supportsTagged: false,
                                supportsSingle: true,
                                requiredProperties: [""],
                                objectType: HPTRIM.BaseObjectTypes.Record,
                                objectUpdated: true,
                                requireCustomForm: true,
                                objectDeleted: false,
                                returnedType: HPTRIM.BaseObjectTypes.Record,
                                updatedProperties: [""],
                                serviceActionParameters: [],
                                serviceActionValueParameters: [],
                                requiredCommandIds: [],
                                childCollectionToUpdate: "ChildRelationships",
                                checkForWarnings: true,
                            };
                        };
                        RecordTasks.removeRelatedRecordTas = function () {
                            return {
                                id: "RemoveRelatedRecord",
                                caption: HP.HPTRIM.Messages.web_remove + ' ' + HP.HPTRIM.Messages.dp_cap_relatedRecords,
                                toolTip: HP.HPTRIM.Messages.web_remove + ' ' + HP.HPTRIM.Messages.dp_cap_relatedRecords,
                                successMessage: HPTRIM.Messages.web_recordUpdateSucceeded,
                                isGroup: false,
                                requiredPermission: "RecordRelate",
                                enabledCommandId: "",
                                preConditions: [],
                                supportsTagged: false,
                                supportsSingle: true,
                                requiredProperties: [""],
                                objectType: HPTRIM.BaseObjectTypes.Record,
                                objectUpdated: true,
                                requireCustomForm: true,
                                objectDeleted: false,
                                returnedType: HPTRIM.BaseObjectTypes.Record,
                                updatedProperties: [""],
                                serviceActionParameters: [],
                                serviceActionValueParameters: [],
                                requiredCommandIds: [],
                                checkForWarnings: true,
                            };
                        };
                        RecordTasks.setOwnerTask = function () {
                            return {
                                id: "RecOwnerLoc",
                                caption: HPTRIM.Messages.web_setOwner,
                                toolTip: HPTRIM.Messages.web_setOwner,
                                successMessage: HPTRIM.Messages.web_recordUpdateSucceeded,
                                isGroup: false,
                                requiredPermission: "RecordModify",
                                enabledCommandId: "RecOwnerLoc",
                                preConditions: [],
                                supportsTagged: true,
                                supportsSingle: true,
                                requiredProperties: ["RecordOwnerLocation"],
                                objectType: HPTRIM.BaseObjectTypes.Record,
                                propertiesToUpdate: [
                                    {
                                        allowClearValue: false,
                                        clearValue: false,
                                        requiresInput: true,
                                        isMandatory: true,
                                        propertyId: "RecordOwnerLocation",
                                        inputDefaultClear: false,
                                    }
                                ],
                                objectUpdated: true,
                                objectDeleted: false,
                                returnedType: HPTRIM.BaseObjectTypes.Record,
                                updatedProperties: ["RecordOwnerLocation"],
                                serviceActionParameters: [],
                                serviceActionValueParameters: [],
                                requiredCommandIds: [],
                                checkForWarnings: true,
                            };
                        };
                        RecordTasks.removeFromContainerTask = function () {
                            return {
                                id: "RemoveRecentFolder",
                                caption: HPTRIM.Messages.web_removeFromContainer,
                                toolTip: HPTRIM.Messages.web_removeFromContainer,
                                successMessage: HPTRIM.Messages.web_recordUpdateSucceeded,
                                objectType: HPTRIM.BaseObjectTypes.Record,
                                isGroup: false,
                                requiredPermission: "RecordModify",
                                enabledCommandId: "RecContainer",
                                preConditions: [],
                                supportsTagged: true,
                                supportsSingle: true,
                                propertiesToUpdate: [],
                                requiredProperties: ["RecordContainer", "RecordHomeLocation", "RecordAssignee"],
                                objectUpdated: true,
                                objectDeleted: false,
                                returnedType: HPTRIM.BaseObjectTypes.Record,
                                updatedProperties: ["RecordContainer", "RecordHomeLocation", "RecordAssignee"],
                                serviceAction: "RemoveFromContainer",
                                serviceActionFullType: "HP.HPTRIM.ServiceModel.RemoveFromContainer",
                                serviceActionParameters: [
                                    {
                                        parameterName: "RemoveFromContainerNewHomeLocation",
                                        caption: HPTRIM.Messages.web_homeLocationLabel,
                                        type: "object",
                                        purpose: HPTRIM.LocationPurpose.Home,
                                        enumName: "",
                                        objectPropertyName: "",
                                        isMandatory: true,
                                        value: undefined,
                                        defaultClear: true,
                                        objectType: HPTRIM.BaseObjectTypes.Location,
                                        allowNewLocations: true,
                                        defaultQuery: "",
                                        defaultQueryParameters: [],
                                        objectFilter: "",
                                        objectFilterParameters: []
                                    },
                                ],
                                serviceActionValueParameters: [],
                                requiredCommandIds: [],
                                checkForWarnings: true,
                            };
                        };
                        RecordTasks.SetContainerTaskId = "RecContainer";
                        RecordTasks.setContainerTask = function () {
                            return {
                                id: "RecContainer",
                                caption: HPTRIM.Messages.web_setContainer,
                                toolTip: HPTRIM.Messages.web_setContainer,
                                requireCustomForm: true,
                                successMessage: HPTRIM.Messages.web_recordUpdateSucceeded,
                                isGroup: false,
                                requiredPermission: "SetContainer",
                                enabledCommandId: "RecContainer",
                                preConditions: [],
                                supportsTagged: false,
                                supportsSingle: true,
                                requiredProperties: ["RecordContainer", "RecordHomeLocation", "RecordAssignee"],
                                propertiesToUpdate: [],
                                objectType: HPTRIM.BaseObjectTypes.Record,
                                objectUpdated: true,
                                objectDeleted: false,
                                returnedType: HPTRIM.BaseObjectTypes.Record,
                                updatedProperties: ["RecordContainer", "RecordHomeLocation", "RecordAssignee", "RecordIsEnclosed"],
                                serviceActionFullType: "HP.HPTRIM.ServiceModel.SetContainer",
                                serviceAction: "SetContainer",
                                serviceActionParameters: [],
                                serviceActionValueParameters: [],
                                requiredCommandIds: [],
                                checkForWarnings: true,
                            };
                        };
                        RecordTasks.SetAssigneeTaskId = "RecCurrentLoc";
                        RecordTasks.setAssigneeTask = function () {
                            return {
                                id: "RecCurrentLoc",
                                caption: HPTRIM.Messages.web_setAssignee,
                                toolTip: HPTRIM.Messages.web_setAssignee,
                                successMessage: HPTRIM.Messages.web_recordUpdateSucceeded,
                                isGroup: false,
                                requiredPermission: "RecordModify",
                                enabledCommandId: "RecCurrentLoc",
                                preConditions: [],
                                supportsTagged: true,
                                supportsSingle: true,
                                returnedType: HPTRIM.BaseObjectTypes.Record,
                                objectUpdated: true,
                                objectDeleted: false,
                                objectType: HPTRIM.BaseObjectTypes.Record,
                                requireCustomForm: true,
                                serviceAction: "SetAssignee",
                                serviceActionFullType: "HP.HPTRIM.ServiceModel.SetAssignee",
                                serviceActionParameters: [],
                                serviceActionValueParameters: [],
                                requiredProperties: ["RecordAssignee", "RecordContainer", "RecordHomeLocation", "RecordRequests"],
                                updatedProperties: ["RecordContainer", "RecordHomeLocation", "RecordAssignee", "RecordRequests"],
                                requiredCommandIds: [],
                                propertiesToUpdate: [],
                                checkForWarnings: true,
                            };
                        };
                        RecordTasks.SetHomeLocationTaskId = "RecHomeLoc";
                        RecordTasks.setHomeLocationTask = function () {
                            return {
                                id: "RecHomeLoc",
                                caption: HPTRIM.Messages.web_setHome,
                                toolTip: HPTRIM.Messages.web_setHome,
                                successMessage: HPTRIM.Messages.web_recordUpdateSucceeded,
                                isGroup: false,
                                requiredPermission: "RecordModify",
                                enabledCommandId: "RecHomeLoc",
                                preConditions: [],
                                supportsTagged: true,
                                supportsSingle: true,
                                returnedType: HPTRIM.BaseObjectTypes.Record,
                                objectUpdated: true,
                                objectDeleted: false,
                                objectType: HPTRIM.BaseObjectTypes.Record,
                                requireCustomForm: true,
                                serviceAction: "SetHomeLocation",
                                serviceActionFullType: "HP.HPTRIM.ServiceModel.SetHomeLocation",
                                serviceActionParameters: [],
                                serviceActionValueParameters: [],
                                requiredProperties: ["RecordAssignee", "RecordContainer", "RecordHomeLocation", "RecordRequests"],
                                updatedProperties: ["RecordContainer", "RecordHomeLocation", "RecordAssignee", "RecordRequests"],
                                requiredCommandIds: [],
                                propertiesToUpdate: [],
                                checkForWarnings: true,
                            };
                        };
                        RecordTasks.addContactTask = function () {
                            return {
                                id: "RecAddContact",
                                caption: HPTRIM.Messages.web_addContact,
                                toolTip: HPTRIM.Messages.web_addContact,
                                successMessage: HPTRIM.Messages.web_recordUpdateSucceeded,
                                isGroup: false,
                                requiredPermission: "RecordModify",
                                enabledCommandId: "RecAddContact",
                                preConditions: [],
                                supportsTagged: true,
                                supportsSingle: true,
                                returnedType: HPTRIM.BaseObjectTypes.Record,
                                objectUpdated: true,
                                objectDeleted: false,
                                objectType: HPTRIM.BaseObjectTypes.Record,
                                serviceAction: "AttachContact",
                                serviceActionFullType: "HP.HPTRIM.ServiceModel.AttachContact",
                                serviceActionValueParameters: [],
                                serviceActionParameters: [
                                    {
                                        parameterName: "AttachContactContactLocation",
                                        caption: HPTRIM.Messages.web_contactName,
                                        type: "object",
                                        purpose: HPTRIM.LocationPurpose.Contact,
                                        enumName: "",
                                        objectPropertyName: "",
                                        isMandatory: true,
                                        value: undefined,
                                        defaultClear: true,
                                        objectType: HPTRIM.BaseObjectTypes.Location,
                                        allowNewLocations: true,
                                        defaultQuery: "",
                                        defaultQueryParameters: [],
                                        objectFilter: "",
                                        objectFilterParameters: []
                                    },
                                    {
                                        parameterName: "AttachContactAsContactType",
                                        caption: HPTRIM.Messages.web_contactType,
                                        type: "enum",
                                        enumName: "ContactType",
                                        objectPropertyName: "",
                                        isMandatory: true,
                                        value: undefined,
                                        defaultClear: true,
                                        objectType: HPTRIM.BaseObjectTypes.Location,
                                        defaultQuery: "",
                                        defaultQueryParameters: [],
                                        objectFilter: "",
                                        objectFilterParameters: []
                                    },
                                    {
                                        parameterName: "AttachContactSetAsPrimaryContact",
                                        caption: HPTRIM.Messages.web_makePrimaryContact,
                                        type: "boolean",
                                        enumName: "",
                                        objectPropertyName: "",
                                        isMandatory: true,
                                        value: true,
                                        defaultClear: false,
                                        objectType: HPTRIM.BaseObjectTypes.Location,
                                        defaultQuery: "",
                                        defaultQueryParameters: [],
                                        objectFilter: "",
                                        objectFilterParameters: []
                                    }
                                ],
                                updatedProperties: [],
                                requiredProperties: [],
                                requiredCommandIds: [],
                                propertiesToUpdate: [],
                                checkForWarnings: true,
                            };
                        };
                        RecordTasks.newVersionTask = function () {
                            return {
                                id: "RecNewVersion",
                                caption: HPTRIM.Messages.web_newRecordVersion,
                                toolTip: HPTRIM.Messages.web_newRecordVersionToolTip,
                                successMessage: HPTRIM.Messages.web_recordUpdateSucceeded,
                                isGroup: false,
                                requiredPermission: "RecordModify",
                                enabledCommandId: "RecNewVersion",
                                preConditions: [],
                                supportsTagged: true,
                                supportsSingle: true,
                                returnedType: HPTRIM.BaseObjectTypes.Record,
                                objectUpdated: true,
                                objectDeleted: false,
                                supportsElectronicDocs: true,
                                objectType: HPTRIM.BaseObjectTypes.Record,
                                newObjectProperties: [],
                                serviceAction: "",
                                serviceActionFullType: "HP.HPTRIM.ServiceModel.CreateNewVersion",
                                serviceActionValueParameters: [{
                                        parameterName: "RecordNewType",
                                        type: "string",
                                        value: "Version"
                                    }],
                                serviceActionParameters: [
                                    {
                                        parameterName: "CreateNewVersionUsingDocumentAsNewVersion",
                                        caption: HPTRIM.Messages.web_useAttachmentNewVersionRecordActions,
                                        type: "boolean",
                                        enumName: "",
                                        objectPropertyName: "",
                                        isMandatory: true,
                                        value: true,
                                        defaultClear: false,
                                        objectType: HPTRIM.BaseObjectTypes.Record,
                                        defaultQuery: "",
                                        defaultQueryParameters: [],
                                        objectFilter: "",
                                        objectFilterParameters: [],
                                    },
                                    {
                                        parameterName: "RecordFilePath",
                                        caption: HPTRIM.Messages.web_attachElectronicDocument,
                                        type: "file",
                                        enumName: "",
                                        objectPropertyName: "",
                                        isMandatory: true,
                                        value: "",
                                        defaultClear: false,
                                        isGroup: true,
                                        objectType: HPTRIM.BaseObjectTypes.Record,
                                        defaultQuery: "",
                                        defaultQueryParameters: [],
                                        objectFilter: "",
                                        objectFilterParameters: [],
                                        dependsOn: { parameterName: "CreateNewVersionUsingDocumentAsNewVersion", parameterValue: true },
                                    }
                                ],
                                updatedProperties: ["RecordNewType"],
                                requiredProperties: ["RecordNewType"],
                                requiredCommandIds: [],
                                propertiesToUpdate: [],
                                checkForWarnings: true,
                            };
                        };
                        RecordTasks.makeRequestRetrieveTemporaryTaskId = "RetrieveTemporary";
                        RecordTasks.makeRequestRetrieveTemporaryTask = function () {
                            return {
                                id: RecordTasks.makeRequestRetrieveTemporaryTaskId,
                                caption: HPTRIM.Messages.web_requestRetrieveTemporary,
                                toolTip: HPTRIM.Messages.web_requestRetrieveTemporary,
                                successMessage: HPTRIM.Messages.web_recordRequestCreated,
                                requiredFeature: "AdvancedRequests",
                                isGroup: false,
                                requiredPermission: "",
                                enabledCommandId: "RecAddRetrieveTemporaryRequest",
                                preConditions: [],
                                supportsTagged: true,
                                supportsSingle: true,
                                returnedType: HPTRIM.BaseObjectTypes.Record,
                                objectUpdated: true,
                                objectDeleted: false,
                                objectType: HPTRIM.BaseObjectTypes.Record,
                                requireCustomForm: true,
                                serviceAction: "RequestRecord",
                                serviceActionFullType: "HP.HPTRIM.ServiceModel.RequestRecord",
                                serviceActionParameters: [],
                                serviceActionValueParameters: [],
                                requiredProperties: ["RecordRequests"],
                                updatedProperties: ["RecordRequests"],
                                requiredCommandIds: [],
                                propertiesToUpdate: [],
                                checkForWarnings: true,
                            };
                        };
                        RecordTasks.makeRequestRetrievePermanentTaskId = "RetrievePermanent";
                        RecordTasks.makeRequestRetrievePermanentTask = function () {
                            return {
                                id: RecordTasks.makeRequestRetrievePermanentTaskId,
                                caption: HPTRIM.Messages.web_requestRetrievePermanent,
                                toolTip: HPTRIM.Messages.web_requestRetrievePermanent,
                                successMessage: HPTRIM.Messages.web_recordRequestCreated,
                                requiredFeature: "AdvancedRequests",
                                isGroup: false,
                                requiredPermission: "",
                                enabledCommandId: "RecAddRetrievePermanentRequest",
                                preConditions: [],
                                supportsTagged: true,
                                supportsSingle: true,
                                returnedType: HPTRIM.BaseObjectTypes.Record,
                                objectUpdated: true,
                                objectDeleted: false,
                                objectType: HPTRIM.BaseObjectTypes.Record,
                                requireCustomForm: true,
                                serviceAction: "RequestRecord",
                                serviceActionFullType: "HP.HPTRIM.ServiceModel.RequestRecord",
                                serviceActionParameters: [],
                                serviceActionValueParameters: [],
                                requiredProperties: ["RecordRequests"],
                                updatedProperties: ["RecordRequests"],
                                requiredCommandIds: [],
                                propertiesToUpdate: [],
                                checkForWarnings: true,
                            };
                        };
                        RecordTasks.makeRequestRetrieveRecurringTaskId = "RetrieveRecurring";
                        RecordTasks.makeRequestRetrieveRecurringTask = function () {
                            return {
                                id: RecordTasks.makeRequestRetrieveRecurringTaskId,
                                caption: HPTRIM.Messages.web_requestRetrieveRecurring,
                                toolTip: HPTRIM.Messages.web_requestRetrieveRecurring,
                                successMessage: HPTRIM.Messages.web_recordRequestCreated,
                                requiredFeature: "AdvancedRequests",
                                isGroup: false,
                                requiredPermission: "",
                                enabledCommandId: "RecAddRetrieveRecurrentRequest",
                                preConditions: [],
                                supportsTagged: true,
                                supportsSingle: true,
                                returnedType: HPTRIM.BaseObjectTypes.Record,
                                objectUpdated: true,
                                objectDeleted: false,
                                objectType: HPTRIM.BaseObjectTypes.Record,
                                requireCustomForm: true,
                                serviceAction: "RequestRecord",
                                serviceActionFullType: "HP.HPTRIM.ServiceModel.RequestRecord",
                                serviceActionParameters: [],
                                serviceActionValueParameters: [],
                                requiredProperties: ["RecordRequests"],
                                updatedProperties: ["RecordRequests"],
                                requiredCommandIds: [],
                                propertiesToUpdate: [],
                                checkForWarnings: true,
                            };
                        };
                        RecordTasks.makeRequestPickUpNewTaskId = "PickupNew";
                        RecordTasks.makeRequestPickUpNewTask = function () {
                            return {
                                id: RecordTasks.makeRequestPickUpNewTaskId,
                                caption: HPTRIM.Messages.web_requestRetrievePickupNew,
                                toolTip: HPTRIM.Messages.web_requestRetrievePickupNew,
                                successMessage: HPTRIM.Messages.web_recordRequestCreated,
                                requiredFeature: "AdvancedRequests",
                                isGroup: false,
                                requiredPermission: "",
                                enabledCommandId: "RecAddPickupTemporaryRequest",
                                preConditions: [],
                                supportsTagged: true,
                                supportsSingle: true,
                                returnedType: HPTRIM.BaseObjectTypes.Record,
                                objectUpdated: true,
                                objectDeleted: false,
                                objectType: HPTRIM.BaseObjectTypes.Record,
                                requireCustomForm: true,
                                serviceAction: "RequestRecord",
                                serviceActionFullType: "HP.HPTRIM.ServiceModel.RequestRecord",
                                serviceActionParameters: [],
                                serviceActionValueParameters: [],
                                requiredProperties: ["RecordRequests"],
                                updatedProperties: ["RecordRequests"],
                                requiredCommandIds: [],
                                propertiesToUpdate: [],
                                checkForWarnings: true,
                            };
                        };
                        RecordTasks.makeRequestPickUpReturnTaskId = "PickupReturn";
                        RecordTasks.makeRequestPickUpReturnTask = function () {
                            return {
                                id: RecordTasks.makeRequestPickUpReturnTaskId,
                                caption: HPTRIM.Messages.web_requestRetrievePickupReturn,
                                toolTip: HPTRIM.Messages.web_requestRetrievePickupReturn,
                                successMessage: HPTRIM.Messages.web_recordRequestCreated,
                                requiredFeature: "AdvancedRequests",
                                isGroup: false,
                                requiredPermission: "",
                                enabledCommandId: "RecAddPickupPermanentRequest",
                                preConditions: [],
                                supportsTagged: true,
                                supportsSingle: true,
                                returnedType: HPTRIM.BaseObjectTypes.Record,
                                objectUpdated: true,
                                objectDeleted: false,
                                objectType: HPTRIM.BaseObjectTypes.Record,
                                requireCustomForm: true,
                                serviceAction: "RequestRecord",
                                serviceActionFullType: "HP.HPTRIM.ServiceModel.RequestRecord",
                                serviceActionParameters: [],
                                serviceActionValueParameters: [],
                                requiredProperties: ["RecordRequests"],
                                updatedProperties: ["RecordRequests"],
                                requiredCommandIds: [],
                                propertiesToUpdate: [],
                                checkForWarnings: true,
                            };
                        };
                        RecordTasks.makeBasicRequestTaskId = "BasicRequest";
                        RecordTasks.makeBasicRequestTask = function () {
                            return {
                                id: RecordTasks.makeBasicRequestTaskId,
                                caption: HPTRIM.Messages.web_request,
                                toolTip: HPTRIM.Messages.web_request,
                                successMessage: HPTRIM.Messages.web_recordRequestCreated,
                                requiredFeature: "Requests",
                                isGroup: false,
                                requiredPermission: "",
                                enabledCommandId: "RecAddRequest",
                                preConditions: [],
                                supportsTagged: true,
                                supportsSingle: true,
                                returnedType: HPTRIM.BaseObjectTypes.Record,
                                objectUpdated: true,
                                objectDeleted: false,
                                objectType: HPTRIM.BaseObjectTypes.Record,
                                requireCustomForm: true,
                                serviceAction: "RequestRecord",
                                serviceActionFullType: "HP.HPTRIM.ServiceModel.RequestRecord",
                                serviceActionParameters: [],
                                serviceActionValueParameters: [],
                                requiredProperties: ["RecordRequests"],
                                updatedProperties: ["RecordRequests"],
                                requiredCommandIds: [],
                                propertiesToUpdate: [],
                                checkForWarnings: true,
                            };
                        };
                        RecordTasks.makeRecordInactiveTask = function () {
                            return {
                                id: "makeRecordInactive",
                                icon: "",
                                caption: HPTRIM.Messages.web_makeInActive,
                                toolTip: HPTRIM.Messages.web_makeInActive,
                                successMessage: HPTRIM.Messages.web_makeInactiveSuccessMessage,
                                messageProperty: '',
                                isGroup: false,
                                requiredPermission: "",
                                enabledCommandId: "",
                                preConditions: [],
                                supportsTagged: true,
                                supportsSingle: true,
                                returnedType: HPTRIM.BaseObjectTypes.Record,
                                objectUpdated: true,
                                objectDeleted: false,
                                objectType: HPTRIM.BaseObjectTypes.Record,
                                requiredProperties: [""],
                                serviceAction: "RemoveUserLabel",
                                serviceActionFullType: "HP.HPTRIM.ServiceModel.MakeInactive",
                                serviceActionParameters: [],
                                serviceActionValueParameters: [
                                    {
                                        parameterName: "MakeInactiveContinueOnError",
                                        type: "boolean",
                                        value: "false"
                                    }
                                ],
                                updatedProperties: [""],
                                requiredCommandIds: [],
                                propertiesToUpdate: [],
                                checkForWarnings: true,
                            };
                        };
                        RecordTasks.rejectRecordFromConsignmnetTask = function () {
                            return {
                                id: "rejectRecordFromConsignment",
                                icon: "",
                                caption: HP.HPTRIM.Messages.web_reject,
                                toolTip: HP.HPTRIM.Messages.web_reject,
                                successMessage: HPTRIM.Messages.web_udpatedSuccessfully,
                                messageProperty: '',
                                isGroup: false,
                                requiredPermission: "",
                                enabledCommandId: "RecRejectFromConsignment",
                                preConditions: [],
                                supportsTagged: true,
                                supportsSingle: true,
                                returnedType: HPTRIM.BaseObjectTypes.ConsignmentRejection,
                                objectUpdated: true,
                                objectDeleted: false,
                                propertiesToUpdate: [],
                                objectType: HPTRIM.BaseObjectTypes.ConsignmentRejection,
                                serviceAction: "",
                                serviceActionParameters: [],
                                serviceActionValueParameters: [],
                                createNewObject: true,
                                newObjectProperties: [
                                    {
                                        propertyId: "ConsignmentRejectionRecord",
                                        useCreatingObjectUri: true,
                                        requiresInput: false,
                                    },
                                    {
                                        propertyId: "ConsignmentRejectionRejectReason",
                                        requiresInput: true,
                                        allowClearValue: false,
                                        isMandatory: true,
                                    },
                                ],
                                requiredProperties: [],
                                updatedProperties: [""],
                                requiredCommandIds: [],
                                checkForWarnings: true,
                            };
                        };
                        RecordTasks.makeRecordActiveTask = function () {
                            return {
                                id: "makeRecordActive",
                                icon: "",
                                caption: HP.HPTRIM.Messages.web_makeActive,
                                toolTip: HP.HPTRIM.Messages.web_makeActive,
                                successMessage: HPTRIM.Messages.web_makeActiveSuccessMessage,
                                messageProperty: '',
                                isGroup: false,
                                requiredPermission: "",
                                enabledCommandId: "",
                                preConditions: [],
                                supportsTagged: true,
                                supportsSingle: true,
                                returnedType: HPTRIM.BaseObjectTypes.Record,
                                objectUpdated: true,
                                objectDeleted: false,
                                objectType: HPTRIM.BaseObjectTypes.Record,
                                requiredProperties: [""],
                                serviceAction: "RemoveUserLabel",
                                serviceActionFullType: "HP.HPTRIM.ServiceModel.MakeActive",
                                serviceActionParameters: [],
                                serviceActionValueParameters: [
                                    {
                                        parameterName: "MakeActiveContinueOnError",
                                        type: "boolean",
                                        value: "false"
                                    }
                                ],
                                updatedProperties: [""],
                                requiredCommandIds: [],
                                propertiesToUpdate: [],
                                checkForWarnings: true,
                            };
                        };
                        RecordTasks.setGpsLocationTask = function () {
                            return {
                                id: "RecSetGIS",
                                caption: HPTRIM.Messages.web_GPSLocation,
                                toolTip: HPTRIM.Messages.web_GPSLocation,
                                successMessage: HPTRIM.Messages.web_recordUpdateSucceeded,
                                isGroup: false,
                                requiredPermission: "",
                                requiredFeature: "GeoLocations",
                                enabledCommandId: "RecOtherFields",
                                preConditions: [],
                                supportsTagged: true,
                                supportsSingle: true,
                                requiredProperties: ["RecordGpsLocation"],
                                objectType: HPTRIM.BaseObjectTypes.Record,
                                propertiesToUpdate: [
                                    {
                                        allowClearValue: true,
                                        clearValue: false,
                                        requiresInput: true,
                                        isMandatory: true,
                                        propertyId: "RecordGpsLocation",
                                        inputDefaultClear: true,
                                        fieldName: "MapReference",
                                    }
                                ],
                                objectUpdated: true,
                                objectDeleted: false,
                                returnedType: HPTRIM.BaseObjectTypes.Record,
                                updatedProperties: ["RecordGpsLocation"],
                                serviceActionParameters: [],
                                serviceActionValueParameters: [],
                                requiredCommandIds: [],
                                requiredAccessRights: true,
                                checkForWarnings: true,
                            };
                        };
                        RecordTasks.setRecordAsFinal = function () {
                            return {
                                id: "RecDocFinal",
                                title: HPTRIM.Messages.web_final,
                                caption: HPTRIM.Messages.web_final,
                                toolTip: HPTRIM.Messages.web_final,
                                successMessage: HPTRIM.Messages.web_finaliseSuccessMessage,
                                isGroup: false,
                                requiredPermission: "",
                                enabledCommandId: "RecDocFinal",
                                preConditions: [],
                                supportsTagged: true,
                                supportsSingle: true,
                                returnedType: HPTRIM.BaseObjectTypes.Record,
                                objectUpdated: true,
                                objectDeleted: false,
                                requireCustomForm: true,
                                objectType: HPTRIM.BaseObjectTypes.Record,
                                serviceAction: "SetAsFinal",
                                serviceActionFullType: "HP.HPTRIM.ServiceModel.SetAsFinal",
                                serviceActionValueParameters: [],
                                serviceActionParameters: [
                                    {
                                        parameterName: "SetAsDraft",
                                        caption: HPTRIM.Messages.web_draftWorkingDocument,
                                        successMessage: HPTRIM.Messages.rec_docIsDraft,
                                        type: "boolean",
                                        enumName: "",
                                        objectPropertyName: "",
                                        isMandatory: false,
                                        value: false,
                                        defaultClear: true,
                                    },
                                    {
                                        parameterName: "SetAsFinal",
                                        caption: HPTRIM.Messages.web_final,
                                        type: "boolean",
                                        enumName: "",
                                        objectPropertyName: "",
                                        isMandatory: false,
                                        value: false,
                                        defaultClear: true,
                                    },
                                    {
                                        parameterName: "SetAsFinalRemoveOldRevisions",
                                        caption: HPTRIM.Messages.web_finalCheckBoxMesssage,
                                        type: "boolean",
                                        enumName: "",
                                        objectPropertyName: "",
                                        isMandatory: false,
                                        value: false,
                                        defaultClear: true,
                                    },
                                ],
                                updatedProperties: ["RecordDocumentStatus"],
                                requiredProperties: [],
                                requiredCommandIds: [],
                                checkForWarnings: true,
                            };
                        };
                        RecordTasks.setRecordAsDraft = function () {
                            return {
                                id: "RecDocDraft",
                                title: HPTRIM.Messages.web_draftWorkingDocument,
                                caption: HPTRIM.Messages.web_draftWorkingDocument,
                                toolTip: HPTRIM.Messages.web_draftWorkingDocument,
                                successMessage: HPTRIM.Messages.web_draftWorkingDocument,
                                isGroup: false,
                                requiredPermission: "",
                                enabledCommandId: "RecDocFinal",
                                preConditions: [],
                                supportsTagged: true,
                                supportsSingle: true,
                                returnedType: HPTRIM.BaseObjectTypes.Record,
                                objectUpdated: true,
                                objectDeleted: false,
                                requireCustomForm: true,
                                objectType: HPTRIM.BaseObjectTypes.Record,
                                serviceAction: "SetAsDraft",
                                serviceActionFullType: "HP.HPTRIM.ServiceModel.SetAsDraft",
                                serviceActionValueParameters: [],
                                serviceActionParameters: [],
                                updatedProperties: ["RecordDocumentStatus"],
                                requiredProperties: [],
                                requiredCommandIds: [],
                                checkForWarnings: true,
                            };
                        };
                        RecordTasks.getSendToGroupTask = function () {
                            return {
                                id: "sendTo",
                                caption: HPTRIM.Messages.web_sendRequestOnBehalfOfButtonCaption + ' ' + HP.HPTRIM.Messages.web_to,
                                toolTip: HPTRIM.Messages.web_sendRequestOnBehalfOfButtonCaption + ' ' + HP.HPTRIM.Messages.web_to,
                                isGroup: true,
                                subTasks: [
                                    RecordTasks.addToFavoriteTask(),
                                    RecordTasks.addToRecentRecordsTask(),
                                    RecordTasks.addToMyContainersTask(),
                                    RecordTasks.addToRecordsWorkTrayTask(),
                                    RecordTasks.addToUserLabelTask(),
                                ],
                                successMessage: "",
                                preConditions: [],
                                supportsTagged: true,
                                supportsSingle: false,
                                objectType: HPTRIM.BaseObjectTypes.Record,
                                serviceActionParameters: [],
                                serviceActionValueParameters: [],
                                requiredProperties: [],
                                requiredCommandIds: [],
                                updatedProperties: [],
                                objectDeleted: false,
                                objectUpdated: false,
                                returnedType: HPTRIM.BaseObjectTypes.Record,
                                checkForWarnings: true,
                            };
                        };
                        RecordTasks.getRemoveFromGroupTask = function () {
                            return {
                                id: "removeFrom",
                                caption: HPTRIM.Messages.web_remove + ' ' + HP.HPTRIM.Messages.web_from,
                                toolTip: HPTRIM.Messages.web_remove + ' ' + HP.HPTRIM.Messages.web_from,
                                isGroup: true,
                                subTasks: [
                                    RecordTasks.removeFromFavoritesTask(),
                                    RecordTasks.removeFromRecentRecordsTask(),
                                    RecordTasks.removeFromMyContainersTask(),
                                    RecordTasks.removeFromRecordsWorkTrayTask(),
                                    RecordTasks.removeFromUserLabelsTask(),
                                ],
                                successMessage: "",
                                preConditions: [],
                                supportsTagged: true,
                                supportsSingle: false,
                                objectType: HPTRIM.BaseObjectTypes.Record,
                                serviceActionParameters: [],
                                serviceActionValueParameters: [],
                                requiredProperties: [],
                                requiredCommandIds: [],
                                updatedProperties: [],
                                objectDeleted: false,
                                objectUpdated: false,
                                returnedType: HPTRIM.BaseObjectTypes.Record,
                                checkForWarnings: true,
                            };
                        };
                        RecordTasks.getLocationGroupTasks = function () {
                            return {
                                id: "locations",
                                caption: HPTRIM.Messages.web_recordLocations,
                                toolTip: HPTRIM.Messages.web_recordLocations,
                                isGroup: true,
                                subTasks: [
                                    RecordTasks.setContainerTask(),
                                    RecordTasks.removeFromContainerTask(),
                                    RecordTasks.setAssigneeTask(),
                                    RecordTasks.setHomeLocationTask(),
                                    RecordTasks.setOwnerTask(),
                                ],
                                successMessage: "",
                                preConditions: [],
                                supportsTagged: true,
                                supportsSingle: false,
                                objectType: HPTRIM.BaseObjectTypes.Record,
                                serviceActionParameters: [],
                                serviceActionValueParameters: [],
                                requiredProperties: [],
                                requiredCommandIds: [],
                                updatedProperties: [],
                                objectDeleted: false,
                                objectUpdated: false,
                                returnedType: HPTRIM.BaseObjectTypes.Record,
                                checkForWarnings: true,
                            };
                        };
                        RecordTasks.getMoreGroupTasks = function () {
                            return {
                                id: "more",
                                caption: HPTRIM.Messages.web_more,
                                toolTip: HPTRIM.Messages.web_more,
                                isGroup: true,
                                subTasks: [
                                    RecordTasks.setRecordAsFinal(),
                                    RecordTasks.modifySecurityAccessTask(),
                                ],
                                successMessage: "",
                                preConditions: [],
                                supportsTagged: true,
                                supportsSingle: false,
                                objectType: HPTRIM.BaseObjectTypes.Record,
                                serviceActionParameters: [],
                                serviceActionValueParameters: [],
                                requiredProperties: [],
                                requiredCommandIds: [],
                                updatedProperties: [],
                                objectDeleted: false,
                                objectUpdated: false,
                                returnedType: HPTRIM.BaseObjectTypes.Record,
                                checkForWarnings: true,
                            };
                        };
                        RecordTasks.getBasicRequestGroupTask = function () {
                            return {
                                id: "BasicRequestGroup",
                                caption: HPTRIM.Messages.web_request,
                                toolTip: HPTRIM.Messages.web_request,
                                isGroup: true,
                                subTasks: [RecordTasks.makeBasicRequestTask()],
                                successMessage: "",
                                preConditions: [],
                                supportsTagged: true,
                                supportsSingle: true,
                                returnedType: HPTRIM.BaseObjectTypes.Record,
                                objectUpdated: true,
                                objectDeleted: false,
                                objectType: HPTRIM.BaseObjectTypes.Record,
                                requireCustomForm: false,
                                serviceActionParameters: [],
                                serviceActionValueParameters: [],
                                requiredProperties: ["RecordRequests"],
                                updatedProperties: ["RecordRequests"],
                                requiredCommandIds: [],
                                propertiesToUpdate: [],
                                checkForWarnings: true,
                            };
                        };
                        RecordTasks.getAdvancedRequestGroupTask = function () {
                            return {
                                id: "BasicRequestGroup",
                                caption: HPTRIM.Messages.web_request,
                                toolTip: HPTRIM.Messages.web_request,
                                isGroup: true,
                                subTasks: [RecordTasks.makeRequestRetrieveTemporaryTask(),
                                    RecordTasks.makeRequestRetrievePermanentTask(),
                                    RecordTasks.makeRequestRetrieveRecurringTask(),
                                    RecordTasks.makeRequestPickUpNewTask(),
                                    RecordTasks.makeRequestPickUpReturnTask()],
                                successMessage: "",
                                preConditions: [],
                                supportsTagged: true,
                                supportsSingle: true,
                                returnedType: HPTRIM.BaseObjectTypes.Record,
                                objectUpdated: true,
                                objectDeleted: false,
                                objectType: HPTRIM.BaseObjectTypes.Record,
                                requireCustomForm: false,
                                serviceActionParameters: [],
                                serviceActionValueParameters: [],
                                requiredProperties: ["RecordRequests"],
                                updatedProperties: ["RecordRequests"],
                                requiredCommandIds: [],
                                propertiesToUpdate: [],
                                checkForWarnings: true,
                            };
                        };
                        RecordTasks.getDetailsGroupTasks = function () {
                            return {
                                id: "details",
                                caption: HPTRIM.Messages.web_details,
                                toolTip: HPTRIM.Messages.web_details,
                                isGroup: true,
                                subTasks: [
                                    RecordTasks.setGpsLocationTask()
                                ],
                                successMessage: "",
                                preConditions: [],
                                supportsTagged: true,
                                supportsSingle: false,
                                objectType: HPTRIM.BaseObjectTypes.Record,
                                serviceActionParameters: [],
                                serviceActionValueParameters: [],
                                requiredProperties: [],
                                requiredCommandIds: [],
                                updatedProperties: [],
                                objectDeleted: false,
                                objectUpdated: false,
                                returnedType: HPTRIM.BaseObjectTypes.Record,
                                checkForWarnings: true,
                            };
                        };
                        RecordTasks.setStartReviewTaskId = "RecStartReview";
                        RecordTasks.startReviewTask = function (recordNumber, objectRecordDetailComponent) {
                            return {
                                id: RecordTasks.setStartReviewTaskId,
                                title: HPTRIM.Utils.String.format(HPTRIM.Messages.web_startReviewAuthorizationTitle, [HPTRIM.Messages.web_reviewer, HPTRIM.Messages.web_review]),
                                toolTip: HPTRIM.Utils.String.format(HPTRIM.Messages.web_startReviewAuthorizationTitle, [HPTRIM.Messages.web_reviewer, HPTRIM.Messages.web_review]),
                                caption: HPTRIM.Utils.String.format(HPTRIM.Messages.web_startReviewAuthorizationCaption, [HPTRIM.Messages.web_reviewer, recordNumber]),
                                successMessage: HPTRIM.Messages.web_recordUpdateSucceeded,
                                isGroup: false,
                                requiredPermission: "StartReview",
                                enabledCommandId: "StartReview",
                                preConditions: [],
                                supportsTagged: true,
                                supportsSingle: true,
                                returnedType: HPTRIM.BaseObjectTypes.Record,
                                objectUpdated: true,
                                objectDeleted: false,
                                supportsElectronicDocs: true,
                                objectType: HPTRIM.BaseObjectTypes.Record,
                                newObjectProperties: [],
                                serviceAction: "",
                                serviceActionFullType: "HP.HPTRIM.ServiceModel.Record",
                                requireCustomForm: true,
                                serviceActionValueParameters: [{
                                        parameterName: "RecordNeedsReview",
                                        type: "boolean",
                                        value: true
                                    }, {
                                        parameterName: "RecordReviewState",
                                        type: "string",
                                        value: HP.HPTRIM.DocumentReviewStates.Reviewing
                                    }],
                                serviceActionParameters: [],
                                updatedProperties: ["RecordNumber", "RecordReviewDueDate", "ChildLocations"],
                                requiredProperties: ["EnabledCommandIds", "RecordNumber", "RecordReviewDueDate", "ChildLocations"],
                                requiredCommandIds: ["StartReview", "StartAuthorization", "ViewComments", "ReviewDocument", "AuthorizeDocument", "FinalizeDocument", "RestartDocumentReview"],
                                propertiesToUpdate: [],
                                checkForWarnings: true,
                                actionView: true,
                                objectRecordDetailComponent: objectRecordDetailComponent
                            };
                        };
                        RecordTasks.setStartAuthorizationTaskId = "RecStartAuthorization";
                        RecordTasks.startAuthorizationTask = function (recordNumber, objectRecordDetailComponent) {
                            return {
                                id: RecordTasks.setStartAuthorizationTaskId,
                                title: HPTRIM.Utils.String.format(HPTRIM.Messages.web_startReviewAuthorizationTitle, [HPTRIM.Messages.web_authorizer, HPTRIM.Messages.web_authorize]),
                                toolTip: HPTRIM.Utils.String.format(HPTRIM.Messages.web_startReviewAuthorizationTitle, [HPTRIM.Messages.web_authorizer, HPTRIM.Messages.web_authorize]),
                                caption: HPTRIM.Utils.String.format(HPTRIM.Messages.web_startReviewAuthorizationCaption, [HPTRIM.Messages.web_authorizer, recordNumber]),
                                successMessage: HPTRIM.Messages.web_recordUpdateSucceeded,
                                isGroup: false,
                                requiredPermission: "StartAuthorization",
                                requireCustomForm: true,
                                enabledCommandId: "StartAuthorization",
                                preConditions: [],
                                supportsTagged: true,
                                supportsSingle: true,
                                returnedType: HPTRIM.BaseObjectTypes.Record,
                                objectUpdated: true,
                                objectDeleted: false,
                                supportsElectronicDocs: true,
                                objectType: HPTRIM.BaseObjectTypes.Record,
                                newObjectProperties: [],
                                serviceAction: "",
                                serviceActionFullType: "HP.HPTRIM.ServiceModel.Record",
                                serviceActionValueParameters: [{
                                        parameterName: "RecordNeedsAuthorization",
                                        type: "boolean",
                                        value: true
                                    }, {
                                        parameterName: "RecordReviewState",
                                        type: "string",
                                        value: HP.HPTRIM.DocumentReviewStates.Authorizing
                                    }],
                                serviceActionParameters: [],
                                updatedProperties: ["RecordAuthorizationDueDate", "ChildLocations"],
                                requiredProperties: ["EnabledCommandIds", "RecordAuthorizationDueDate", "ChildLocations"],
                                requiredCommandIds: ["StartReview", "StartAuthorization", "ViewComments", "ReviewDocument", "AuthorizeDocument", "FinalizeDocument", "RestartDocumentReview"],
                                propertiesToUpdate: [],
                                checkForWarnings: true,
                                actionView: true,
                                objectRecordDetailComponent: objectRecordDetailComponent
                            };
                        };
                        RecordTasks.startFinalizeTask = function (recordNumber, objectRecordDetailComponent) {
                            return {
                                id: "RecFinalizeDocument",
                                caption: HPTRIM.Utils.String.format(HP.HPTRIM.Messages.web_finalizeDocumentCaption, [recordNumber]),
                                toolTip: HPTRIM.Messages.web_finalizeDocumentTitle,
                                title: HPTRIM.Messages.web_finalizeDocumentTitle,
                                successMessage: HPTRIM.Messages.web_recordUpdateSucceeded,
                                isGroup: false,
                                requiredPermission: "FinalizeDocument",
                                enabledCommandId: "FinalizeDocument",
                                preConditions: [],
                                supportsTagged: true,
                                supportsSingle: true,
                                returnedType: HPTRIM.BaseObjectTypes.Record,
                                objectUpdated: true,
                                objectDeleted: false,
                                supportsElectronicDocs: true,
                                objectType: HPTRIM.BaseObjectTypes.Record,
                                newObjectProperties: [],
                                serviceAction: "FinalizeDocumentReview",
                                serviceActionFullType: "HP.HPTRIM.ServiceModel.FinalizeDocumentReview",
                                serviceActionValueParameters: [],
                                serviceActionParameters: [
                                    {
                                        parameterName: "FinalizeDocumentReviewPurgeOldRevisions",
                                        caption: HPTRIM.Messages.web_purgeOldRevDocument,
                                        type: "boolean",
                                        value: false,
                                        defaultClear: true
                                    }
                                ],
                                updatedProperties: ["RecordTypePurgePreviousVersion", "ChildLocations"],
                                requiredProperties: ["RecordTypePurgePreviousVersion"],
                                requiredCommandIds: [],
                                propertiesToUpdate: [],
                                checkForWarnings: true,
                                actionView: true,
                                objectRecordDetailComponent: objectRecordDetailComponent
                            };
                        };
                        RecordTasks.restartReviewTask = function (recordNumber, objectRecordDetailComponent) {
                            return {
                                id: "RecRestartReview",
                                caption: HP.HPTRIM.Utils.String.format(HPTRIM.Messages.web_restartDocumentCaption, [recordNumber]),
                                toolTip: HPTRIM.Messages.web_restartDocumentTitle,
                                title: HPTRIM.Messages.web_restartDocumentTitle,
                                successMessage: HPTRIM.Messages.web_recordUpdateSucceeded,
                                isGroup: false,
                                requiredPermission: "RestartDocumentReview",
                                enabledCommandId: "RestartDocumentReview",
                                preConditions: [],
                                supportsTagged: true,
                                supportsSingle: true,
                                returnedType: HPTRIM.BaseObjectTypes.Record,
                                objectUpdated: true,
                                objectDeleted: false,
                                supportsElectronicDocs: true,
                                objectType: HPTRIM.BaseObjectTypes.Record,
                                newObjectProperties: [],
                                serviceAction: "RestartDocumentReview",
                                serviceActionFullType: "HP.HPTRIM.ServiceModel.RestartDocumentReview",
                                serviceActionValueParameters: [],
                                serviceActionParameters: [
                                    {
                                        parameterName: "RestartDocumentReviewSetToReviewed",
                                        caption: HPTRIM.Messages.web_restartDocumentLeaveDraft,
                                        type: "boolean",
                                        enumName: "",
                                        objectPropertyName: "",
                                        isMandatory: false,
                                        value: false,
                                        defaultClear: true,
                                        objectType: HPTRIM.BaseObjectTypes.Record,
                                        defaultQuery: "",
                                        defaultQueryParameters: [],
                                        objectFilter: "",
                                        objectFilterParameters: [],
                                    },
                                    {
                                        parameterName: "RestartDocumentReviewClearReviewerFlags",
                                        caption: HPTRIM.Messages.web_restartDocumentResetCompletion,
                                        type: "boolean",
                                        enumName: "",
                                        objectPropertyName: "",
                                        isMandatory: false,
                                        value: false,
                                        defaultClear: true,
                                        objectType: HPTRIM.BaseObjectTypes.Record,
                                        defaultQuery: "",
                                        defaultQueryParameters: [],
                                        objectFilter: "",
                                        objectFilterParameters: [],
                                    },
                                ],
                                updatedProperties: ["ChildLocations"],
                                requiredProperties: [],
                                requiredCommandIds: [],
                                propertiesToUpdate: [],
                                checkForWarnings: true,
                                actionView: true,
                                objectRecordDetailComponent: objectRecordDetailComponent
                            };
                        };
                        RecordTasks.setDocReviewTaskId = "DocumentReview";
                        RecordTasks.setDocumentReview = function () {
                            return {
                                id: RecordTasks.setDocReviewTaskId,
                                caption: HP.HPTRIM.Messages.web_review,
                                toolTip: HP.HPTRIM.Messages.web_documentReview,
                                successMessage: HP.HPTRIM.Messages.web_documentReviewSuccess,
                                requiredFeature: "AdvancedDocuments",
                                isGroup: false,
                                requiredPermission: "",
                                enabledCommandId: "ReviewDocument",
                                preConditions: [],
                                supportsTagged: true,
                                supportsSingle: true,
                                returnedType: HPTRIM.BaseObjectTypes.Record,
                                objectUpdated: true,
                                objectDeleted: false,
                                objectType: HPTRIM.BaseObjectTypes.Record,
                                requireCustomForm: true,
                                serviceAction: "Record",
                                serviceActionFullType: "HP.HPTRIM.ServiceModel.Record",
                                serviceActionParameters: [],
                                serviceActionValueParameters: [],
                                requiredProperties: ["EnabledCommandIds", "RecordRecordType", "RecordMyReviewComments", "RecordMyReviewComplete", "RecordReviewDueDate", "RecordReviewDate", "childlocations"],
                                updatedProperties: ["RecordMyReviewComments", "RecordMyReviewComplete", "RecordReviewDueDate", "RecordReviewDate", "ChildLocations"],
                                requiredCommandIds: ["StartReview", "StartAuthorization", "ViewComments", "ReviewDocument", "AuthorizeDocument", "FinalizeDocument", "RestartDocumentReview"],
                                propertiesToUpdate: [],
                                checkForWarnings: true,
                            };
                        };
                        RecordTasks.setDocAuthoriseTaskId = "DocumentAuthorization";
                        RecordTasks.setDocumentAuthorize = function () {
                            return {
                                id: RecordTasks.setDocAuthoriseTaskId,
                                caption: HP.HPTRIM.Messages.web_authorize,
                                toolTip: HP.HPTRIM.Messages.web_documentAuthorization,
                                successMessage: HP.HPTRIM.Messages.web_documentAuthorizationSuccess,
                                requiredFeature: "AdvancedDocuments",
                                isGroup: false,
                                requiredPermission: "",
                                enabledCommandId: "AuthorizeDocument",
                                preConditions: [],
                                supportsTagged: true,
                                supportsSingle: true,
                                returnedType: HPTRIM.BaseObjectTypes.Record,
                                objectUpdated: true,
                                objectDeleted: false,
                                objectType: HPTRIM.BaseObjectTypes.Record,
                                requireCustomForm: true,
                                serviceAction: "Record",
                                serviceActionFullType: "HP.HPTRIM.ServiceModel.Record",
                                serviceActionParameters: [],
                                serviceActionValueParameters: [],
                                requiredProperties: ["EnabledCommandIds", "RecordRecordType", "RecordMyAuthorizationComments", "RecordMyAuthorizationComplete", "RecordAuthorizationDueDate", "RecordAuthorizationDate", "RecordAuthorizer", "ChildLocations"],
                                updatedProperties: ["RecordMyAuthorizationComments", "RecordMyAuthorizationComplete", "RecordAuthorizationDueDate", "ChildLocations"],
                                requiredCommandIds: ["StartReview", "StartAuthorization", "ViewComments", "ReviewDocument", "AuthorizeDocument", "FinalizeDocument", "RestartDocumentReview"],
                                propertiesToUpdate: [],
                                checkForWarnings: true,
                            };
                        };
                        return RecordTasks;
                    }());
                    RecordDetails.RecordTasks = RecordTasks;
                })(RecordDetails = Panels.RecordDetails || (Panels.RecordDetails = {}));
            })(Panels = App.Panels || (App.Panels = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Panels;
            (function (Panels) {
                var RecordDetails;
                (function (RecordDetails) {
                    var ActionManager = HP.HPTRIM.Framework.Components.ActionManager;
                    var Messages = HP.HPTRIM.Messages;
                    "use strict";
                    var RecordsDetailComponent = (function () {
                        function RecordsDetailComponent(trimClient) {
                            var _this = this;
                            this.attachmentIsViewed = false;
                            this.showActions = ko.observable(true);
                            this.showSelectRecordButton = ko.observable(false);
                            this.canSelectContainer = ko.observable(false);
                            this.canSelectNotElectronic = ko.observable(false);
                            this.onlySelectContainer = ko.observable(false);
                            this.propertiesAndFields = ko.observable();
                            this.detailsTemplate = 'templates/Record/RecordDetailComponent';
                            this.canView = ko.observable(false);
                            this.showNewRecordMenu = ko.observable(true);
                            this.showNewPart = ko.observable(false);
                            this.showNewVersion = ko.observable(false);
                            this.isElectronic = ko.observable(false);
                            this.isInFavorites = ko.observable(false);
                            this.canReturn = ko.observable(false);
                            this.homeLocationUri = ko.observable("");
                            this.isContainer = ko.observable(false);
                            this.isInsideAContainer = ko.observable(false);
                            this.isAniOSDevice = ko.observable(false);
                            this.canAlwaysBeSelected = ko.observable(false);
                            this.showDocumentStatus = ko.observable(false);
                            this.canCheckIn = ko.observable(false);
                            this.canCheckOut = ko.observable(false);
                            this.canOnlineEdit = ko.observable(false);
                            this.isCheckedOutOnline = ko.observable(false);
                            this.isCheckedOutToWebdav = ko.observable(false);
                            this.isCheckedOutToWOPI = ko.observable(false);
                            this.isCheckedOutToCurrentUser = ko.observable(false);
                            this.isEditableByWOPI = ko.observable(false);
                            this.wopiInfo = ko.observable(null);
                            this.onlineEditTitle = ko.observable("");
                            this.onlineEditImage = ko.observable("");
                            this.canEditRecord = ko.observable(true);
                            this.canRequest = ko.observable(false);
                            this.canAdditionalRequest = ko.observable(false);
                            this.showRequestAction = ko.observable(false);
                            this.showAddRequest = ko.observable(false);
                            this.canSetRecordAsFinal = ko.observable(false);
                            this.canMakeRecordInactive = ko.observable(false);
                            this.canMakeRecordActive = ko.observable(false);
                            this.canChangeSecurity = ko.observable(false);
                            this.canSeeAuditEvents = ko.observable(false);
                            this.shareUsingObjectiveConnectEnabled = ko.observable(false);
                            this.canRejectFromConsignment = ko.observable(false);
                            this.recordTitle = ko.observable("");
                            this.recordNumber = ko.observable("");
                            this.recordRecordTypeBehaviour = ko.observable("");
                            this.authorName = ko.observable("");
                            this.dateCreated = ko.observable("");
                            this.assigneeName = ko.observable("");
                            this.dateRegistered = ko.observable("");
                            this.documentStatus = ko.observable("");
                            this.loading = ko.observable(true);
                            this.details = ko.observable(true);
                            this.detailsReady = ko.observable(false);
                            this.actionResult = ko.observable("");
                            this.actionResultDisplay = ko.observable(true);
                            this.recordViewHtml = ko.observable("");
                            this.downloadLink = ko.observable("");
                            this.panelIsExpanded = false;
                            this.isClientBehaviour = ko.observable(false);
                            this.isMatterBehaviour = ko.observable(false);
                            this.showNavClientRecords = ko.observable(false);
                            this.showNavMatterRecords = ko.observable(false);
                            this.showNavClientForMatterFolder = ko.observable(false);
                            this.showLocationActions = ko.observable(false);
                            this.canSetContainer = ko.observable(false);
                            this.canRemoveFromContainer = ko.observable(false);
                            this.canSetOwner = ko.observable(false);
                            this.canSetAssignee = ko.observable(false);
                            this.canSetHome = ko.observable(false);
                            this.showAdvancedRequestActions = ko.observable(false);
                            this.showAdvancedRequestEnabledActions = ko.observable(false);
                            this.canShowRequestForRec = ko.observable(false);
                            this.canRequestRetrieveTemp = ko.observable(false);
                            this.canRequestRetrievePerm = ko.observable(false);
                            this.canRequestRetrieveRecurrent = ko.observable(false);
                            this.canRequestRetrievePickupTemp = ko.observable(false);
                            this.canRequestRetrievePickupReturn = ko.observable(false);
                            this.canAddContact = ko.observable(false);
                            this.canShowContacts = ko.observable(false);
                            this.canRemoveContact = ko.observable(false);
                            this.showDetailsAction = ko.observable(false);
                            this.canSetNotes = ko.observable(false);
                            this.canSetGIS = ko.observable(false);
                            this.canEditAdditionalFields = ko.observable(false);
                            this.canSetRelationship = ko.observable(false);
                            this.showNavigationActions = ko.observable(false);
                            this.showLatestVersion = ko.observable(false);
                            this.showAllRelatedRecords = ko.observable(false);
                            this.showContainedRecords = ko.observable(false);
                            this.showContainedRecordsAlternative = ko.observable(false);
                            this.showContainerRecords = ko.observable(false);
                            this.showContainerRecordsAlternative = ko.observable(false);
                            this.showRecordsWithSameContacts = ko.observable(false);
                            this.showClientRecords = ko.observable(false);
                            this.showMatterRecords = ko.observable(false);
                            this.showMatterFolders = ko.observable(false);
                            this.showRecordsRelatedToMatter = ko.observable(false);
                            this.showRealtedRecords = ko.observable(false);
                            this.showLatestPart = ko.observable(false);
                            this.showAllParts = ko.observable(false);
                            this.showAllVersions = ko.observable(false);
                            this.showCurrentVersion = ko.observable(false);
                            this.showLinkedDocuments = ko.observable(false);
                            this.showDocumentLinkOf = ko.observable(false);
                            this.showClientRecordsForContacts = ko.observable(false);
                            this.showRecordsInEmailConversation = ko.observable(false);
                            this.showSeriesRecord = ko.observable(false);
                            this.showRecordsWithinSeries = ko.observable(false);
                            this.showAllRedactions = ko.observable(false);
                            this.showRedactionsFrom = ko.observable(false);
                            this.showDerivations = ko.observable(false);
                            this.showWorkflowActions = ko.observable(false);
                            this.showInitiateWorkflow = ko.observable(false);
                            this.showWorkflows = ko.observable(false);
                            this.showActionsAndProcedures = ko.observable(false);
                            this.showAddActionAndProcedure = ko.observable(false);
                            this.showCompleteLatestActionAndProcedure = ko.observable(false);
                            this.showTodoItems = ko.observable(false);
                            this.showMoreActions = ko.observable(false);
                            this.showReportsButton = ko.observable(true);
                            this.showAddRemoveActions = ko.observable(false);
                            this.showAddToFavorites = ko.observable(false);
                            this.showAddToRecentRecords = ko.observable(false);
                            this.showAddToMyContainers = ko.observable(false);
                            this.showAddToWorkTray = ko.observable(false);
                            this.showRemoveFromFavorites = ko.observable(false);
                            this.showRemoveFromRecentRecords = ko.observable(false);
                            this.showRemoveFromMyContainers = ko.observable(false);
                            this.showRemoveFromWorktray = ko.observable(false);
                            this.showAddToUserLabel = ko.observable(false);
                            this.showRemoveFromUserLabels = ko.observable(false);
                            this.showAddToCheckinStyle = ko.observable(false);
                            this.showDocumentReview = ko.observable(false);
                            this.showStartReview = ko.observable(false);
                            this.showStartAuthorization = ko.observable(false);
                            this.showViewComments = ko.observable(false);
                            this.showReviewDocument = ko.observable(false);
                            this.showAuthorizeDocument = ko.observable(false);
                            this.showFinalizeDocument = ko.observable(false);
                            this.showRestartDocumentReview = ko.observable(false);
                            this.spItemUrl = ko.observable("");
                            this.revisionCount = 0;
                            this.showRenditionButton = false;
                            this.editDetailsHandler = function () { };
                            this.handleViewClick = function () { };
                            this.handleRenditionViewClick = function () { };
                            this.viewRecord = function () { };
                            this.viewRendition = function () { };
                            this.initiateWorkflow = function (recordInfoObject) { };
                            this.doAdditionalRequestRecord = function () { };
                            this.doCheckOut = function () { };
                            this.doDetach = function () { };
                            this.doActivityDocumentAttach = function () { };
                            this.wopiWindows = [];
                            this.doReport = function () { };
                            this.removeContact = function () { };
                            this.removeRelatedRecord = function () { };
                            this.addRelatedRecord = function () { };
                            this.addToUserLabel = function () { };
                            this.removeFromUserLabels = function () { };
                            this.sendToCheckinStyle = function () { };
                            this.recordActionsAvailable = ko.observable(false);
                            this.showRecordActionsAndProcedures = function (uri, recordInfoObject) { };
                            this.showRecordDocument = function (uri, recordInfoObject, task) { };
                            this.displayAuditEvents = function (uri) {
                                _this.search("object:record," + uri, "", HPTRIM.BaseObjectTypes.History, "", "");
                            };
                            this.updateSecurity = function (uri) { };
                            this.displayError = function () { };
                            this.updatePropertiesView = function () { };
                            this.updateCallback = function (result, task) { _this.useCachedResult(result, task); };
                            this.canDetachFromActivity = ko.observable(false);
                            this.requiredProperties = "RecordNumber,RecordRecordType,isElectronic,isContainer,RecordType," +
                                "isCheckedOut,RecordContainer,RecordDocumentStatus,RecordDocumentType," +
                                "RecordCheckedOutTo,RecordCheckedOutPath,isInFavorites,Author," +
                                "RecordReturnDueDateTime,RecordAssignee,RecordAssigneeStatus,RecordDateRegistered," +
                                "RecordDateAssigned,RecordDateCreated,RecordHomeLocation,RecordGpsLocation," +
                                "RecordOwnerLocation,RecordTitle,RecordExtension,EnabledCommandIds," +
                                "RecordSpURL,RecordLastPartRecord,Icon,CurrentAction,ESource,DocumentSize," +
                                "RecordRevisionCount,RecordRenditionCount,RecordIsEnclosed,ChildRenditions" +
                                (RecordsDetailComponent.isWOPISupported ? ",WOPIInfo" : "");
                            this.requiredCommandIds = 'EditUserfields,NavClientRecord,NavMatterRecord,' +
                                'Security,ShowAuditEvents,Properties,RecCheckOut,RecCheckIn,RecNewPart,RecNewVersion,' +
                                'RecAddRetrieveTemporaryRequest,RecContainer,RecOwnerLoc,RecAddContact,RecOtherFields,' +
                                'ShowContacts,RecCurrentLoc,RecHomeLoc,RecRemoveContact,Notes,EditUserfields,RecRelate,' +
                                'AddRecentDoc,AddRecentFolder,AddToFavorites,AddToWorktray,NavContainer,NavContainerExt,' +
                                'RecDocFinal,NavContents,NavContentsExt,NavLatestVersion,NavAllRelated,NavSameContact,RemoveFromFavorites,' +
                                'RecMakeInactive,RecMakeActive,AddToMyCheckinStyles,RemoveFromWorktray,RemoveRecentDoc,RemoveRecentFolder,' +
                                'RecAttachAction,RecBrowseActions,RecCompleteCurrAct,RecNewWorkflow,RecShowWorkflow,' +
                                'NavRelated,NavLatestPart,NavAllParts,NavAllVersions,NavCurrentVersion,NavLinksTo,NavLinkOf,' +
                                'NavClient,NavEmailConversation,NavSeries,NavSeriesContents,NavRedactionsOf,NavRedactedFrom,NavToDerivations,Share';
                            this.requiredpropertySets = "";
                            this.hideOverlays = function () { };
                            this.handleWarning = function (title, errors, continueHandler) {
                                continueHandler();
                            };
                            this.handleError = function (title, rawError) {
                            };
                            this.CaptionRecordAssignee = ko.observable("");
                            this.CaptionRecordDateRegistered = ko.observable("");
                            this.CaptionDocumentStatus = ko.observable("");
                            this.handleUpdateTaskClick = function (updateTask, infoObject, objectType, handleUpdateResults) {
                                if (infoObject == undefined) {
                                    infoObject = _this.recordInfoObject;
                                }
                                if (objectType == undefined) {
                                    objectType = HPTRIM.BaseObjectTypes.Record;
                                }
                                if (handleUpdateResults == undefined) {
                                    handleUpdateResults = _this.handleUpdateResults;
                                }
                                if (updateTask.requiredProperties) {
                                    updateTask.requiredProperties.push("EnabledCommandIds");
                                }
                                else {
                                    updateTask.requiredProperties = ["EnabledCommandIds"];
                                }
                                updateTask.requiredCommandIds = _this.requiredCommandIds.split(",");
                                _this.updateTaskHandler(updateTask, infoObject, objectType, handleUpdateResults, _this.handleWarning, _this.handleError);
                            };
                            this.trimClient = trimClient, this.uri = "";
                            this.setDeviceType();
                            this.configureRequestorField();
                            this.configureRequiredCommandIds();
                            this.configureGenericTaskHandlers();
                            this.enableFeatures();
                            this.includeRecordActionIfAvailable();
                            this.configureSelectButton();
                            this.configureActions();
                            this.configureClientMatterNavigation();
                            var me = this;
                            this.canOnlineEdit = ko.computed(me._canOnlineEdit, me);
                            this.isCheckedOutOnline = ko.computed(me._isCheckedOutOnline, me);
                            this.onlineEditTitle = ko.computed(me._onlineEditTitle, me);
                            this.onlineEditImage = ko.computed(function () { return me.isCheckedOutOnline() ? HP.HPTRIM.Icons.editAttachment_x24 : HP.HPTRIM.Icons.checkOutEdit_x24; }, me);
                            this.isEditableByWOPI = ko.computed(me._isEditableByWOPI, me);
                        }
                        ;
                        ;
                        ;
                        ;
                        ;
                        RecordsDetailComponent.prototype.doWOPIAction = function (uri, act, callBack, failBack) {
                            var me = this;
                            var wopiWin = me.getWOPIWindow(uri);
                            if (wopiWin != null) {
                                if (act == HPTRIM.WOPIAction.view) {
                                    me.displayError(HP.HPTRIM.Messages.web_wopiAlreadyOpenForView);
                                    this.actionOnRecord = HPTRIM.WOPIAction.view;
                                }
                                else {
                                    me.displayError(HP.HPTRIM.Messages.web_wopiAlreadyOpen);
                                    this.actionOnRecord = HPTRIM.WOPIAction.edit;
                                }
                            }
                            else {
                                if (act == HPTRIM.WOPIAction.view) {
                                    this.actionOnRecord = HPTRIM.WOPIAction.view;
                                }
                                me.doWOPILink(uri, act, callBack, failBack);
                            }
                        };
                        RecordsDetailComponent.prototype.openWOPIWindow = function (recUri, db, url) {
                            var me = this;
                            var windowName = RecordsDetailComponent.getWOPIWindowName(recUri, db);
                            var newWindow = window.open(url, windowName);
                            me.wopiWindows.push([recUri, newWindow]);
                        };
                        RecordsDetailComponent.getWOPIWindowName = function (recUri, db) {
                            return "trim-wopi-" + recUri + "-" + db.id;
                        };
                        RecordsDetailComponent.prototype.getWOPIWindow = function (recUri) {
                            var me = this;
                            var returnWindow = null;
                            var index = 0;
                            while (index < me.wopiWindows.length) {
                                var winTuple = me.wopiWindows[index];
                                var windowObj = winTuple[1];
                                if (windowObj == null || windowObj.closed) {
                                    me.wopiWindows.splice(index, 1);
                                }
                                else {
                                    if (winTuple[0] == recUri && !windowObj.closed) {
                                        returnWindow = windowObj;
                                    }
                                    index++;
                                }
                            }
                            return returnWindow;
                        };
                        RecordsDetailComponent.prototype.editDocument = function () {
                            var me = this;
                            var updatePanel = function () {
                                if (!me._isCheckedOutOnline()) {
                                    me.refresh();
                                    me.canCheckOut(false);
                                    me.actionResult(HP.HPTRIM.Messages.web_recordCheckedOut);
                                    me.actionResultDisplay(true);
                                    me.doFadeInOutOnInformationalText();
                                }
                            };
                            var webdavCallback = function (webdavURL) {
                                updatePanel();
                                if (RecordsDetailComponent.spEditObj.EditDocument(webdavURL) == false) {
                                    var newURL = RecordsDetailComponent.removePortNumberFromURL(webdavURL);
                                    if (newURL == "" || RecordsDetailComponent.spEditObj.EditDocument(newURL) == false) {
                                        me.displayError(HP.HPTRIM.Messages.web_editDocFailedNoApp + "  " + HP.HPTRIM.Messages.web_contactAdministrator);
                                    }
                                }
                            };
                            var genericFailback = function (resp) {
                                try {
                                    me.displayError(resp.responseJSON.ResponseStatus.Message);
                                }
                                catch (ex) {
                                    me.displayError(me.onlineEditTitle() + ' ' + HP.HPTRIM.Messages.core_failed);
                                }
                            };
                            var wopiCallback = function (wopiResponse) {
                                if (wopiResponse.needsConversion) {
                                    var convFunc = function () {
                                        var result = {
                                            Uri: uri,
                                            RecordExtension: {
                                                Value: wopiResponse.newFormatExt
                                            }
                                        };
                                        me.updateCallback(result);
                                        me.doWOPILink(uri, HPTRIM.WOPIAction.convert, wopiCallback, genericFailback);
                                    };
                                    var convDetails = new App.ActionHandlers.ConvertRecordDetails();
                                    convDetails.convAction = convFunc;
                                    convDetails.revisionsAllowed = me.recordInfoObject.RecordRecordType.RecordTypeAllowVersions.Value;
                                    me.doConfirmWOPIConversion(convDetails);
                                }
                                else {
                                    updatePanel();
                                    me.openWOPIWindow(me.uri, me.trimClient.getDatabase(), wopiResponse.link);
                                }
                            };
                            var uri = me.uri;
                            if (!RecordsDetailComponent.isWOPISupported || me.isCheckedOutToWebdav()) {
                                me.doWebDavEdit(uri, webdavCallback, genericFailback);
                            }
                            else if (me.isCheckedOutToWOPI()) {
                                me.doWOPIAction(uri, HPTRIM.WOPIAction.edit, wopiCallback, genericFailback);
                            }
                            else {
                                var wopiFailback = function (resp) {
                                    if (RecordsDetailComponent.isWebDavSupported) {
                                        me.doWebDavEdit(uri, webdavCallback, genericFailback);
                                    }
                                    else {
                                        try {
                                            me.displayError(resp.responseJSON.ResponseStatus.Message);
                                        }
                                        catch (ex) {
                                            me.displayError(HP.HPTRIM.Messages.web_editDocFailedNoApp + "  " + HP.HPTRIM.Messages.web_contactAdministrator);
                                        }
                                    }
                                };
                                me.doWOPIAction(uri, HPTRIM.WOPIAction.edit, wopiCallback, wopiFailback);
                            }
                        };
                        ;
                        RecordsDetailComponent.prototype.viewDocument = function (uri) {
                            var _this = this;
                            var me = this;
                            var updatePanel = function () {
                                if (!me._isCheckedOutOnline()) {
                                    if (me.panelIsExpanded != undefined && me.panelIsExpanded != true) {
                                        me.refresh();
                                        me.canCheckOut(false);
                                    }
                                    if (!(_this.actionOnRecord == HPTRIM.WOPIAction.view) && (_this.actionOnRecord != undefined)) {
                                        me.actionResult(HP.HPTRIM.Messages.web_recordCheckedOut);
                                        me.actionResultDisplay(true);
                                    }
                                    me.doFadeInOutOnInformationalText();
                                }
                            };
                            var genericFailback = function (resp) {
                                try {
                                    me.displayError(resp.responseJSON.ResponseStatus.Message);
                                }
                                catch (ex) {
                                    me.displayError(me.onlineEditTitle() + ' ' + HP.HPTRIM.Messages.core_failed);
                                }
                            };
                            var wopiCallback = function (wopiResponse) {
                                if (wopiResponse.needsConversion) {
                                    var convFunc = function () {
                                        var result = {
                                            Uri: uri,
                                            RecordExtension: {
                                                Value: wopiResponse.newFormatExt
                                            }
                                        };
                                        me.updateCallback(result);
                                        me.doWOPILink(uri, HPTRIM.WOPIAction.convert, wopiCallback, genericFailback);
                                    };
                                    if (_this.actionOnRecord != undefined && _this.actionOnRecord == HPTRIM.WOPIAction.view && wopiResponse.needsConversion) {
                                        App.ActionHandlers.HandleDetailComponentViewClickHandler.viewDocument(me.app, me, me.uriFromTmpl, me.extFromTmpl, me.recNo, me.recTitle, me.revisionCount, me.recordIsCheckedOut, me.recordSpURL, me.recordInfoObject);
                                    }
                                    else {
                                        var convDetails = new App.ActionHandlers.ConvertRecordDetails();
                                        convDetails.convAction = convFunc;
                                        convDetails.revisionsAllowed = me.recordInfoObject.RecordRecordType.RecordTypeAllowVersions.Value;
                                        me.doConfirmWOPIConversion(convDetails);
                                    }
                                }
                                else {
                                    updatePanel();
                                    me.openWOPIWindow(me.uri, me.trimClient.getDatabase(), wopiResponse.link);
                                }
                            };
                            me.doWOPIAction(uri, HPTRIM.WOPIAction.view, wopiCallback, genericFailback);
                        };
                        ;
                        RecordsDetailComponent.CreateSPEditObj = function () {
                            try {
                                if (typeof WebDAVConfig == "undefined" || !WebDAVConfig.webdavEnabled) {
                                    return null;
                                }
                                return new ActiveXObject(WebDAVConfig.webdavSPObj);
                            }
                            catch (ex) {
                                return document.getElementById("SharepointWebDAVFirefoxPlugin");
                            }
                        };
                        RecordsDetailComponent.prototype._canOnlineEdit = function () {
                            var me = this;
                            if (me.canCheckOut()) {
                                return (me.isEditableByWOPI()) || RecordsDetailComponent.isWebDavSupported;
                            }
                            else {
                                return me.isCheckedOutToCurrentUser() && ((RecordsDetailComponent.isWebDavSupported && me.isCheckedOutToWebdav()) || (me.isEditableByWOPI() && me.isCheckedOutToWOPI()));
                            }
                        };
                        RecordsDetailComponent.prototype._onlineEditTitle = function () {
                            var me = this;
                            var appName = (me.isEditableByWOPI() && (me.isCheckedOutToWOPI() || me.canCheckOut())) ? me.wopiInfo().editAppName : HP.HPTRIM.Messages.web_defaultApplication;
                            var rawTitle = me.isCheckedOutOnline() ? HP.HPTRIM.Messages.web_editOnlineTitle : HP.HPTRIM.Messages.web_checkOutEditTitle;
                            return HPTRIM.Utils.String.format(rawTitle, [appName]);
                        };
                        RecordsDetailComponent.prototype._isEditableByWOPI = function () {
                            var me = this;
                            var wopiInfoValue = me.wopiInfo();
                            return RecordsDetailComponent.isWOPISupported && wopiInfoValue != null && wopiInfoValue.editURL.length != 0;
                        };
                        RecordsDetailComponent.prototype.configureRequestorField = function () {
                            this.requestor = new HP.HPTRIM.Field.LocationPicker(this.trimClient, HP.HPTRIM.Messages.web_requestSelectRequestorInputLabel.toUpperCase(), false, this.displayError);
                            var createNewLocationPlugin = new HP.HPTRIM.Field.Plugin.CreatingLocationPickerPlugin(this.trimClient);
                            this.requestor.addPlugin(createNewLocationPlugin);
                        };
                        RecordsDetailComponent.prototype.configureRequiredCommandIds = function () {
                            if (_.contains(this.trimClient.getDatabase().activeFeatures(), "AdvancedRequests")) {
                                this.requiredCommandIds = this.requiredCommandIds +
                                    ',RecShowRequests,RecAddRequest,RecAddRetrieveTemporaryRequest,RecAddRetrieveRecurrentRequest' +
                                    ',RecAddRetrievePermanentRequest,RecAddPickupTemporaryRequest,RecAddPickupPermanentRequest';
                                this.requiredProperties = this.requiredProperties + ",RecordRequests";
                            }
                            else if (_.contains(this.trimClient.getDatabase().activeFeatures(), "Requests")) {
                                this.requiredCommandIds = this.requiredCommandIds + ',RecShowRequests,RecAddRequest';
                            }
                            if (_.contains(this.trimClient.getDatabase().activeFeatures(), "AdvancedDisposal")) {
                                if (this.trimClient.getDatabase().currentUserPermissions()['ApproveDisposal'] === true) {
                                    this.requiredCommandIds = this.requiredCommandIds + ',RecRejectFromConsignment';
                                }
                            }
                        };
                        RecordsDetailComponent.prototype.configureClientMatterNavigation = function () {
                            var _this = this;
                            this.showNavMatterRecords.subscribe(function (newvalue) {
                                if (_this.recordInfoObject.RecordRecordType.RecordTypeUsualBehaviour.Value == "Document") {
                                    _this.showNavMatterRecords(false);
                                    return;
                                }
                                _this.showNavMatterRecords(newvalue);
                            });
                        };
                        RecordsDetailComponent.prototype.includeRecordActionIfAvailable = function () {
                            var mainObjectDefs = this.trimClient.getMainObjectDefinitions();
                            var recordActionObjectDefinition = _.find(mainObjectDefs.definitions, function (mainObjectDef) { return mainObjectDef.Id == HPTRIM.BaseObjectTypes.RecordAction.Id; });
                            if (recordActionObjectDefinition) {
                                this.recordActionsAvailable(true);
                            }
                        };
                        RecordsDetailComponent.prototype.configureGenericTaskHandlers = function () {
                            var _this = this;
                            var me = this;
                            this.handleUpdateResults = function (infoObject, task) {
                                var me = _this;
                                me.hideOverlays();
                                me.updateCallback(infoObject, task);
                                if (task.successMessage) {
                                    var message = task.successMessage;
                                    if (task.messageProperty) {
                                        var substitutionValue = infoObject[task.messageProperty];
                                        if (substitutionValue && substitutionValue.StringValue) {
                                            substitutionValue = substitutionValue.StringValue;
                                        }
                                        else if (substitutionValue && substitutionValue.Value) {
                                            substitutionValue = substitutionValue.Value;
                                        }
                                        if (!substitutionValue) {
                                            if (task.defaultMessageSubValue || task.defaultMessageSubValue === "") {
                                                substitutionValue = task.defaultMessageSubValue;
                                            }
                                            else {
                                                substitutionValue = task.objectType.Caption;
                                            }
                                        }
                                        message = HPTRIM.Utils.String.format(message, [substitutionValue, '']);
                                    }
                                    me.actionResult(message);
                                    me.actionResultDisplay(true);
                                    me.doFadeInOutOnInformationalText();
                                }
                            };
                            this.hideRequestRecordMenu = function () {
                                $("#request-record-popover").popover('hide');
                                _this.isPopoverVisible(false);
                            };
                            this.requestRecord = function () {
                                if (me.canRequest()) {
                                    me.actionResult(HP.HPTRIM.Messages.web_requestingRecord);
                                    me.doFadeInOutOnInformationalTextWithAddedDelay();
                                    me.actionResultDisplay(true);
                                    var data = {};
                                    data.RequestRecord = me.uri;
                                    var recRequestRequest = new HPTRIM.RecRequestRequest(_this.trimClient, data);
                                    recRequestRequest.doRequest().done(function (result) {
                                        me.actionResult(HP.HPTRIM.Messages.web_recordRequestCreated);
                                        me.actionResultDisplay(true);
                                        me.doFadeInOutOnInformationalText();
                                        me.canRequest(false);
                                    }).fail(function (result) {
                                        me.actionResult(HP.HPTRIM.Messages.web_unableToRequestRecord);
                                        me.actionResultDisplay(true);
                                        me.doFadeInOutOnInformationalText();
                                    });
                                }
                                else {
                                    me.actionResult(HP.HPTRIM.Messages.web_recordRequestOutstanding);
                                    me.actionResultDisplay(true);
                                    me.doFadeInOutOnInformationalText();
                                }
                            };
                            this.detach = function (index) {
                                _this.doDetach(index);
                            };
                            this.showAdditionalRequestRecord = function () {
                                var me = _this;
                                var successCallback = function (result) {
                                    me.actionResult(HP.HPTRIM.Messages.web_recordRequestCreated);
                                    me.actionResultDisplay(true);
                                    me.doFadeInOutOnInformationalText();
                                    me.canRequest(false);
                                };
                                var failCallback = function (result) {
                                    me.actionResult(HP.HPTRIM.Messages.web_unableToRequestRecord);
                                    me.actionResultDisplay(true);
                                    me.doFadeInOutOnInformationalText();
                                };
                                _this.doAdditionalRequestRecord(_this.uri, successCallback, failCallback);
                            };
                            this.refresh = function (actionResult) {
                                me.updateModel(_this.uri, actionResult);
                            };
                            this.selectRecord = function (uri, title, recNumber) {
                                return function () {
                                    me.selectRecordCallback(uri, title, recNumber);
                                };
                            };
                        };
                        RecordsDetailComponent.prototype.configureSelectButton = function () {
                            var _this = this;
                            this.showSelectButton = ko.computed(function () {
                                if (_this.showSelectRecordButton()) {
                                    if (_this.canAlwaysBeSelected()) {
                                        return true;
                                    }
                                    if (_this.canSelectContainer() && _this.isContainer()) {
                                        return true;
                                    }
                                    if (_this.onlySelectContainer() && !_this.isContainer()) {
                                        return false;
                                    }
                                    if (_this.isElectronic() || _this.canSelectNotElectronic()) {
                                        return true;
                                    }
                                }
                                return false;
                            });
                        };
                        RecordsDetailComponent.prototype.setDeviceType = function () {
                            var isIpad = navigator.userAgent.match(/iPad/i) != null;
                            var isIphone = navigator.userAgent.match(/iPhone/i) != null;
                            var isIpod = navigator.userAgent.match(/iPod/i) != null;
                            if (isIpad || isIphone || isIpad) {
                                this.isAniOSDevice(true);
                            }
                        };
                        RecordsDetailComponent.prototype.configureActions = function () {
                            this.configureLocationCommands();
                            this.configureNavCommands();
                            this.configureNewCommands();
                            this.configureRequestCommands();
                            this.configureMoreCommands();
                            if (this.showDocumentReview()) {
                                this.configureDocumentReviewCommands();
                            }
                            this.configureAddRemoveCommands();
                            this.configureDetailsCommands();
                            this.configureWorkflowCommands();
                        };
                        RecordsDetailComponent.prototype.configureDocumentReviewCommands = function () {
                            var _this = this;
                            var tasks = [
                                {
                                    caption: HP.HPTRIM.Messages.web_startReview,
                                    tooltip: HP.HPTRIM.Messages.web_startReview,
                                    enabled: ko.observable(true),
                                    visible: this.showStartReview,
                                    active: false,
                                    actionHandler: _.bind(function () {
                                        this.handleUpdateTaskClick(RecordDetails.RecordTasks.startReviewTask(this.recordNumber(), this));
                                    }, this)
                                },
                                {
                                    caption: HP.HPTRIM.Messages.web_startAuthorization,
                                    tooltip: HP.HPTRIM.Messages.web_startAuthorization,
                                    enabled: ko.observable(true),
                                    visible: this.showStartAuthorization,
                                    active: false,
                                    actionHandler: _.bind(function () {
                                        this.handleUpdateTaskClick(RecordDetails.RecordTasks.startAuthorizationTask(this.recordNumber(), this));
                                    }, this)
                                },
                                {
                                    caption: HP.HPTRIM.Messages.web_reviewDocument,
                                    tooltip: HP.HPTRIM.Messages.web_reviewDocument,
                                    enabled: ko.observable(true),
                                    visible: this.showReviewDocument,
                                    active: false,
                                    actionHandler: _.bind(function () { this.showRecordDocument(this.recordInfoObject.Uri, this.recordInfoObject, RecordDetails.RecordTasks.setDocumentReview()); }, this)
                                },
                                {
                                    caption: HP.HPTRIM.Messages.web_authorizeDocument,
                                    tooltip: HP.HPTRIM.Messages.web_authorizeDocument,
                                    enabled: ko.observable(true),
                                    visible: this.showAuthorizeDocument,
                                    active: false,
                                    actionHandler: _.bind(function () { this.showRecordDocument(this.recordInfoObject.Uri, this.recordInfoObject, RecordDetails.RecordTasks.setDocumentAuthorize()); }, this)
                                },
                                {
                                    caption: HP.HPTRIM.Messages.web_finalizeDocument,
                                    tooltip: HP.HPTRIM.Messages.web_finalizeDocument,
                                    enabled: ko.observable(true),
                                    visible: this.showFinalizeDocument,
                                    active: false,
                                    actionHandler: _.bind(function () {
                                        this.handleUpdateTaskClick(RecordDetails.RecordTasks.startFinalizeTask(this.recordNumber(), this));
                                    }, this)
                                },
                                {
                                    caption: HP.HPTRIM.Messages.web_viewComments,
                                    tooltip: HP.HPTRIM.Messages.web_viewComments,
                                    enabled: ko.observable(true),
                                    visible: this.showViewComments,
                                    active: false,
                                    actionHandler: function () {
                                        _this.getRevAuthComments();
                                    }
                                },
                                {
                                    caption: HP.HPTRIM.Messages.web_restart,
                                    tooltip: HP.HPTRIM.Messages.web_restart,
                                    enabled: ko.observable(true),
                                    visible: this.showRestartDocumentReview,
                                    active: false,
                                    actionHandler: _.bind(function () {
                                        this.handleUpdateTaskClick(RecordDetails.RecordTasks.restartReviewTask(this.recordNumber(), this));
                                    }, this)
                                }];
                            this.documentReviewDropDown = this.makeDropDownButton(this.makeTasks(tasks), HP.HPTRIM.Messages.web_documentReview, 'docReviewMenu');
                        };
                        RecordsDetailComponent.prototype.configureNewCommands = function () {
                            var _this = this;
                            var tasks = [
                                {
                                    caption: HP.HPTRIM.Messages.web_newRecord,
                                    tooltip: HP.HPTRIM.Messages.web_createRecordInContainerToolTip,
                                    enabled: ko.observable(true),
                                    visible: this.isContainer,
                                    active: false,
                                    actionHandler: _.bind(this.createRecordClick, this)
                                },
                                {
                                    caption: HP.HPTRIM.Messages.web_newRecordPart,
                                    tooltip: HP.HPTRIM.Messages.web_newRecordPartToolTip,
                                    enabled: ko.observable(true),
                                    visible: this.showNewPart,
                                    active: false,
                                    actionHandler: function () {
                                        _this.createNewRecordFromExistinRecord("Part");
                                    }
                                },
                                {
                                    caption: HP.HPTRIM.Messages.web_newRecordVersion,
                                    tooltip: HP.HPTRIM.Messages.web_newRecordVersionToolTip,
                                    enabled: ko.observable(true),
                                    visible: this.showNewVersion,
                                    active: false,
                                    actionHandler: function () {
                                        _this.handleUpdateTaskClick(RecordDetails.RecordTasks.newVersionTask());
                                    },
                                }];
                            this.newDropDown = this.makeDropDownButton(this.makeTasks(tasks), Messages.core_new);
                        };
                        RecordsDetailComponent.prototype.configureRequestCommands = function () {
                            var _this = this;
                            var tasks = [
                                {
                                    caption: HP.HPTRIM.Messages.web_requestRetrieveTemporary,
                                    tooltip: HP.HPTRIM.Messages.web_requestRetrieveTemporary,
                                    enabled: ko.observable(true),
                                    visible: this.canRequestRetrieveTemp,
                                    active: false,
                                    actionHandler: function () {
                                        _this.handleUpdateTaskClick(RecordDetails.RecordTasks.makeRequestRetrieveTemporaryTask());
                                    }
                                },
                                {
                                    caption: HP.HPTRIM.Messages.web_requestRetrievePermanent,
                                    tooltip: HP.HPTRIM.Messages.web_requestRetrievePermanent,
                                    enabled: ko.observable(true),
                                    visible: this.canRequestRetrievePerm,
                                    active: false,
                                    actionHandler: function () {
                                        _this.handleUpdateTaskClick(RecordDetails.RecordTasks.makeRequestRetrievePermanentTask());
                                    }
                                },
                                {
                                    caption: HP.HPTRIM.Messages.web_requestRetrieveRecurring,
                                    tooltip: HP.HPTRIM.Messages.web_requestRetrieveRecurring,
                                    enabled: ko.observable(true),
                                    visible: this.canRequestRetrieveRecurrent,
                                    active: false,
                                    actionHandler: function () {
                                        _this.handleUpdateTaskClick(RecordDetails.RecordTasks.makeRequestRetrieveRecurringTask());
                                    }
                                },
                                {
                                    caption: HP.HPTRIM.Messages.web_requestRetrievePickupNew,
                                    tooltip: HP.HPTRIM.Messages.web_requestRetrievePickupNew,
                                    enabled: ko.observable(true),
                                    visible: this.canRequestRetrievePickupTemp,
                                    active: false,
                                    actionHandler: function () {
                                        _this.handleUpdateTaskClick(RecordDetails.RecordTasks.makeRequestPickUpNewTask());
                                    }
                                },
                                {
                                    caption: HP.HPTRIM.Messages.web_requestRetrievePickupReturn,
                                    tooltip: HP.HPTRIM.Messages.web_requestRetrievePickupReturn,
                                    enabled: ko.observable(true),
                                    visible: this.canRequestRetrievePickupReturn,
                                    active: false,
                                    actionHandler: function () {
                                        _this.handleUpdateTaskClick(RecordDetails.RecordTasks.makeRequestPickUpReturnTask());
                                    }
                                },
                                {
                                    caption: HP.HPTRIM.Messages.web_showRequests,
                                    tooltip: HP.HPTRIM.Messages.web_showRequests,
                                    enabled: ko.observable(true),
                                    visible: this.canShowRequestForRec,
                                    active: false,
                                    actionHandler: function () {
                                        var query = "record:" + _this.uri;
                                        _this.search(query, "", HPTRIM.BaseObjectTypes.Request);
                                    }
                                }
                            ];
                            this.requestDropDown = this.makeDropDownButton(this.makeTasks(tasks), Messages.web_request, 'requestMenu');
                        };
                        RecordsDetailComponent.prototype.configureNavCommands = function () {
                            var _this = this;
                            var tasks = [
                                {
                                    caption: HP.HPTRIM.Messages.web_latestVersion,
                                    tooltip: HP.HPTRIM.Messages.web_latestVersion,
                                    enabled: ko.observable(true),
                                    visible: this.showLatestVersion,
                                    active: false,
                                    actionHandler: function () {
                                        var query = "latestVersion: [uri:" + _this.uri + "]";
                                        _this.search(query, "", HPTRIM.BaseObjectTypes.Record);
                                    }
                                },
                                {
                                    caption: HP.HPTRIM.Messages.web_currentVersion,
                                    tooltip: HP.HPTRIM.Messages.web_currentVersion,
                                    enabled: ko.observable(true),
                                    visible: this.showCurrentVersion,
                                    active: false,
                                    actionHandler: function () {
                                        var query = "currentVersion: [uri:" + _this.uri + "]";
                                        _this.search(query, "", HPTRIM.BaseObjectTypes.Record);
                                    }
                                },
                                {
                                    caption: HP.HPTRIM.Messages.web_allVersions,
                                    tooltip: HP.HPTRIM.Messages.web_allVersions,
                                    enabled: ko.observable(true),
                                    visible: this.showAllVersions,
                                    active: false,
                                    actionHandler: function () {
                                        var query = "allVersions: [uri:" + _this.uri + "]";
                                        _this.search(query, "", HPTRIM.BaseObjectTypes.Record);
                                    }
                                },
                                {
                                    caption: HP.HPTRIM.Messages.dp_cap_relatedRecords,
                                    tooltip: HP.HPTRIM.Messages.dp_cap_relatedRecords,
                                    enabled: ko.observable(true),
                                    visible: this.showRealtedRecords,
                                    active: false,
                                    actionHandler: function () {
                                        var query = "related:[uri:" + _this.uri + "]";
                                        _this.search(query, "", HPTRIM.BaseObjectTypes.Record);
                                    }
                                },
                                {
                                    caption: HP.HPTRIM.Messages.web_All + ' ' + HP.HPTRIM.Messages.dp_cap_relatedRecords,
                                    tooltip: HP.HPTRIM.Messages.web_All + ' ' + HP.HPTRIM.Messages.dp_cap_relatedRecords,
                                    enabled: ko.observable(true),
                                    visible: this.showAllRelatedRecords,
                                    active: false,
                                    actionHandler: function () {
                                        var query = "allRelated:[uri:" + _this.uri + "]";
                                        _this.search(query, "", HPTRIM.BaseObjectTypes.Record);
                                    }
                                },
                                {
                                    caption: HP.HPTRIM.Messages.web_latestPart,
                                    tooltip: HP.HPTRIM.Messages.web_latestPart,
                                    enabled: ko.observable(true),
                                    visible: this.showLatestPart,
                                    active: false,
                                    actionHandler: function () {
                                        var query = "latestPart:[uri:" + _this.uri + "]";
                                        _this.search(query, "", HPTRIM.BaseObjectTypes.Record);
                                    }
                                },
                                {
                                    caption: HP.HPTRIM.Messages.web_allParts,
                                    tooltip: HP.HPTRIM.Messages.web_allParts,
                                    enabled: ko.observable(true),
                                    visible: this.showAllParts,
                                    active: false,
                                    actionHandler: function () {
                                        var query = "allParts:[uri:" + _this.uri + "]";
                                        _this.search(query, "", HPTRIM.BaseObjectTypes.Record);
                                    }
                                },
                                {
                                    caption: HP.HPTRIM.Messages.web_linkedDocuments,
                                    tooltip: HP.HPTRIM.Messages.web_linkedDocuments,
                                    enabled: ko.observable(true),
                                    visible: this.showLinkedDocuments,
                                    active: false,
                                    actionHandler: function () {
                                        var query = "linksTo:[uri:" + _this.uri + "]";
                                        _this.search(query, "", HPTRIM.BaseObjectTypes.Record);
                                    }
                                },
                                {
                                    caption: HP.HPTRIM.Messages.web_documentLinkOf,
                                    tooltip: HP.HPTRIM.Messages.web_documentLinkOf,
                                    enabled: ko.observable(true),
                                    visible: this.showDocumentLinkOf,
                                    active: false,
                                    actionHandler: function () {
                                        var query = "linksOf:[uri:" + _this.uri + "]";
                                        _this.search(query, "", HPTRIM.BaseObjectTypes.Record);
                                    }
                                },
                                {
                                    caption: HP.HPTRIM.Messages.web_recordsInEmailConversation,
                                    tooltip: HP.HPTRIM.Messages.web_recordsInEmailConversation,
                                    enabled: ko.observable(true),
                                    visible: this.showRecordsInEmailConversation,
                                    active: false,
                                    actionHandler: function () {
                                        var query = "conversation:[uri:" + _this.uri + "]";
                                        _this.search(query, "", HPTRIM.BaseObjectTypes.Record);
                                    }
                                },
                                {
                                    caption: HP.HPTRIM.Messages.web_seriesRecord,
                                    tooltip: HP.HPTRIM.Messages.web_seriesRecord,
                                    enabled: ko.observable(true),
                                    visible: this.showSeriesRecord,
                                    active: false,
                                    actionHandler: function () {
                                        var query = "isSeriesOf:[uri:" + _this.uri + "]";
                                        _this.search(query, "", HPTRIM.BaseObjectTypes.Record);
                                    }
                                },
                                {
                                    caption: HP.HPTRIM.Messages.web_recordsWithinSeries,
                                    tooltip: HP.HPTRIM.Messages.web_recordsWithinSeries,
                                    enabled: ko.observable(true),
                                    visible: this.showRecordsWithinSeries,
                                    active: false,
                                    actionHandler: function () {
                                        var query = "inSeries:[uri:" + _this.uri + "]";
                                        _this.search(query, "", HPTRIM.BaseObjectTypes.Record);
                                    }
                                },
                                {
                                    caption: HP.HPTRIM.Messages.web_allRedactions,
                                    tooltip: HP.HPTRIM.Messages.web_allRedactions,
                                    enabled: ko.observable(true),
                                    visible: this.showAllRedactions,
                                    active: false,
                                    actionHandler: function () {
                                        var query = "redactionOf:[uri:" + _this.uri + "]";
                                        _this.search(query, "", HPTRIM.BaseObjectTypes.Record);
                                    }
                                },
                                {
                                    caption: HP.HPTRIM.Messages.web_redactedFrom,
                                    tooltip: HP.HPTRIM.Messages.web_redactedFrom,
                                    enabled: ko.observable(true),
                                    visible: this.showRedactionsFrom,
                                    active: false,
                                    actionHandler: function () {
                                        var query = "hasRedaction:[uri:" + _this.uri + "]";
                                        _this.search(query, "", HPTRIM.BaseObjectTypes.Record);
                                    }
                                },
                                {
                                    caption: HP.HPTRIM.Messages.web_derivations,
                                    tooltip: HP.HPTRIM.Messages.web_derivations,
                                    enabled: ko.observable(true),
                                    visible: this.showDerivations,
                                    active: false,
                                    actionHandler: function () {
                                        var query = "derivedForm:[uri:" + _this.uri + "]";
                                        _this.search(query, "", HPTRIM.BaseObjectTypes.Record);
                                    }
                                },
                                {
                                    caption: HP.HPTRIM.Messages.web_containedRecords,
                                    tooltip: HP.HPTRIM.Messages.web_containedRecords,
                                    enabled: ko.observable(true),
                                    visible: this.showContainedRecords,
                                    active: false,
                                    actionHandler: function () {
                                        var query = "container:[uri:" + _this.uri + "]";
                                        _this.search(query, "", HPTRIM.BaseObjectTypes.Record);
                                    }
                                },
                                {
                                    caption: HP.HPTRIM.Messages.web_containedRecordsAlt,
                                    tooltip: HP.HPTRIM.Messages.web_containedRecordsAlt,
                                    enabled: ko.observable(true),
                                    visible: this.showContainedRecordsAlternative,
                                    active: false,
                                    actionHandler: function () {
                                        var query = "containerEx:[uri:" + _this.uri + "]";
                                        _this.search(query, "", HPTRIM.BaseObjectTypes.Record);
                                    }
                                },
                                {
                                    caption: HP.HPTRIM.Messages.web_containerRecords,
                                    tooltip: HP.HPTRIM.Messages.web_containerRecords,
                                    enabled: ko.observable(true),
                                    visible: this.showContainerRecords,
                                    active: false,
                                    actionHandler: function () {
                                        var query = "contains:[uri:" + _this.uri + "]";
                                        _this.search(query, "", HPTRIM.BaseObjectTypes.Record);
                                    }
                                },
                                {
                                    caption: HP.HPTRIM.Messages.web_containerRecordsAlt,
                                    tooltip: HP.HPTRIM.Messages.web_containerRecordsAlt,
                                    enabled: ko.observable(true),
                                    visible: this.showContainerRecordsAlternative,
                                    active: false,
                                    actionHandler: function () {
                                        var query = "containsEx:[uri:" + _this.uri + "]";
                                        _this.search(query, "", HPTRIM.BaseObjectTypes.Record);
                                    }
                                },
                                {
                                    caption: HP.HPTRIM.Messages.web_recordsWithSameContacts,
                                    tooltip: HP.HPTRIM.Messages.web_recordsWithSameContacts,
                                    enabled: ko.observable(true),
                                    visible: this.showRecordsWithSameContacts,
                                    active: false,
                                    actionHandler: function () {
                                        var query = "sameContact:[uri:" + _this.uri + "]";
                                        _this.search(query, "", HPTRIM.BaseObjectTypes.Record);
                                    }
                                },
                                {
                                    caption: HP.HPTRIM.Messages.web_clientRecordsForContacts,
                                    tooltip: HP.HPTRIM.Messages.web_clientRecordsForContacts,
                                    enabled: ko.observable(true),
                                    visible: this.showClientRecordsForContacts,
                                    active: false,
                                    actionHandler: function () {
                                        var query = "sameClient:[uri:" + _this.uri + "]";
                                        _this.search(query, "", HPTRIM.BaseObjectTypes.Record);
                                    }
                                },
                                {
                                    caption: HP.HPTRIM.Messages.web_clientRecord,
                                    tooltip: HP.HPTRIM.Messages.web_clientRecord,
                                    enabled: ko.observable(true),
                                    visible: this.isMatterBehaviour,
                                    active: false,
                                    actionHandler: function () {
                                        var query = "clientOf:[uri:" + _this.uri + "]";
                                        _this.search(query, "", HPTRIM.BaseObjectTypes.Record);
                                    }
                                },
                                {
                                    caption: HP.HPTRIM.Messages.web_clientMatters,
                                    tooltip: HP.HPTRIM.Messages.web_clientMatters,
                                    enabled: ko.observable(true),
                                    visible: this.isClientBehaviour,
                                    active: false,
                                    actionHandler: function () {
                                        var matterFilterBehaviour = 22;
                                        var query = HP.HPTRIM.Framework.Components.Shared.String.format("clientRecord:{0} and type:[behaviour:{1}]", ["[uri:" + _this.uri + "]", matterFilterBehaviour]);
                                        _this.search(query, "", HPTRIM.BaseObjectTypes.Record);
                                    }
                                },
                                {
                                    caption: HP.HPTRIM.Messages.web_matterFolders,
                                    tooltip: HP.HPTRIM.Messages.web_matterFolders,
                                    enabled: ko.observable(true),
                                    visible: this.isMatterBehaviour,
                                    active: false,
                                    actionHandler: function () {
                                        var folderFilterBehaviour = 2;
                                        var query = HP.HPTRIM.Framework.Components.Shared.String.format("matterRecord:{0} and type:[behaviour:{1}]", ["[uri:" + _this.uri + "]", folderFilterBehaviour]);
                                        _this.search(query, "", HPTRIM.BaseObjectTypes.Record);
                                    }
                                },
                                {
                                    caption: HP.HPTRIM.Messages.web_searchContents,
                                    tooltip: HP.HPTRIM.Messages.web_searchContents,
                                    enabled: ko.observable(true),
                                    visible: this.isMatterBehaviour,
                                    active: false,
                                    actionHandler: function () {
                                        var query = HP.HPTRIM.Framework.Components.Shared.String.format("matterRecord:{0}", ["[uri:" + _this.uri + "]"]);
                                        _this.search(query, "", HPTRIM.BaseObjectTypes.Record);
                                    }
                                },
                                {
                                    caption: HP.HPTRIM.Messages.web_matterRecord,
                                    tooltip: HP.HPTRIM.Messages.web_matterRecord,
                                    enabled: ko.observable(true),
                                    visible: this.showNavMatterRecords,
                                    active: false,
                                    actionHandler: function () {
                                        var query = "matterOf:[uri:" + _this.uri + "]";
                                        _this.search(query, "", HPTRIM.BaseObjectTypes.Record);
                                    }
                                },
                                {
                                    caption: HP.HPTRIM.Messages.web_clientRecord,
                                    tooltip: HP.HPTRIM.Messages.web_clientRecord,
                                    enabled: ko.observable(true),
                                    visible: this.showNavClientForMatterFolder,
                                    active: false,
                                    actionHandler: function () {
                                        var query = "clientOf:[uri:" + _this.uri + "]";
                                        _this.search(query, "", HPTRIM.BaseObjectTypes.Record);
                                    }
                                },
                            ];
                            this.navigationDropDown = this.makeDropDownButton(this.makeTasks(tasks), Messages.web_navigateTo, 'navigationMenu');
                        };
                        RecordsDetailComponent.prototype.configureLocationCommands = function () {
                            var _this = this;
                            var tasks = [
                                {
                                    caption: HP.HPTRIM.Messages.web_container,
                                    tooltip: HP.HPTRIM.Messages.web_container,
                                    enabled: ko.observable(true),
                                    visible: this.canSetContainer,
                                    active: false,
                                    actionHandler: function () {
                                        _this.handleUpdateTaskClick(RecordDetails.RecordTasks.setContainerTask());
                                    }
                                },
                                {
                                    caption: HP.HPTRIM.Messages.web_removeFromContainer,
                                    tooltip: HP.HPTRIM.Messages.web_removeFromContainer,
                                    enabled: ko.observable(true),
                                    visible: this.canRemoveFromContainer,
                                    active: false,
                                    actionHandler: function () {
                                        _this.handleUpdateTaskClick(RecordDetails.RecordTasks.removeFromContainerTask());
                                    }
                                },
                                {
                                    caption: HP.HPTRIM.Messages.web_setAssignee,
                                    tooltip: HP.HPTRIM.Messages.web_setAssignee,
                                    enabled: ko.observable(true),
                                    visible: this.canSetAssignee,
                                    active: false,
                                    actionHandler: function () {
                                        _this.handleUpdateTaskClick(RecordDetails.RecordTasks.setAssigneeTask());
                                    }
                                },
                                {
                                    caption: HP.HPTRIM.Messages.web_home,
                                    tooltip: HP.HPTRIM.Messages.web_home,
                                    enabled: ko.observable(true),
                                    visible: this.canSetHome,
                                    active: false,
                                    actionHandler: function () {
                                        _this.handleUpdateTaskClick(RecordDetails.RecordTasks.setHomeLocationTask());
                                    }
                                },
                                {
                                    caption: HP.HPTRIM.Messages.web_setOwner,
                                    tooltip: HP.HPTRIM.Messages.web_setOwner,
                                    enabled: ko.observable(true),
                                    visible: this.canSetOwner,
                                    active: false,
                                    actionHandler: function () {
                                        _this.handleUpdateTaskClick(RecordDetails.RecordTasks.setOwnerTask());
                                    }
                                },
                                {
                                    caption: HP.HPTRIM.Messages.web_addContact,
                                    tooltip: HP.HPTRIM.Messages.web_addContact,
                                    enabled: ko.observable(true),
                                    visible: this.canAddContact,
                                    active: false,
                                    actionHandler: function () {
                                        _this.handleUpdateTaskClick(RecordDetails.RecordTasks.addContactTask());
                                    }
                                },
                                {
                                    caption: HP.HPTRIM.Messages.web_showContacts,
                                    tooltip: HP.HPTRIM.Messages.web_showContacts,
                                    enabled: ko.observable(true),
                                    visible: this.canShowContacts,
                                    active: false,
                                    actionHandler: function () {
                                        var query = "contactOf: " + _this.uri;
                                        _this.search(query, "", HPTRIM.BaseObjectTypes.Location);
                                    }
                                },
                                {
                                    caption: HP.HPTRIM.Messages.web_removeContactLabel,
                                    tooltip: HP.HPTRIM.Messages.web_removeContactLabel,
                                    enabled: ko.observable(true),
                                    visible: this.canRemoveContact,
                                    active: false,
                                    actionHandler: function () {
                                        _this.removeContact(_this.uri, _this.recordNumber(), _this.recordTitle());
                                    }
                                }
                            ];
                            this.locationDropDown = this.makeDropDownButton(this.makeTasks(tasks), Messages.web_recordLocations, 'locationMenu');
                        };
                        RecordsDetailComponent.prototype.configureMoreCommands = function () {
                            var _this = this;
                            var tasks = [
                                {
                                    caption: HP.HPTRIM.Messages.web_final,
                                    tooltip: HP.HPTRIM.Messages.web_final,
                                    enabled: ko.observable(true),
                                    visible: this.canSetRecordAsFinal,
                                    active: false,
                                    actionHandler: function () {
                                        _this.handleUpdateTaskClick(RecordDetails.RecordTasks.setRecordAsFinal());
                                    }
                                },
                                {
                                    caption: HP.HPTRIM.Messages.web_makeInActive,
                                    tooltip: HP.HPTRIM.Messages.web_makeInActive,
                                    enabled: ko.observable(true),
                                    visible: this.canMakeRecordInactive,
                                    active: false,
                                    actionHandler: function () {
                                        _this.handleUpdateTaskClick(RecordDetails.RecordTasks.makeRecordInactiveTask());
                                    }
                                },
                                {
                                    caption: HP.HPTRIM.Messages.web_makeActive,
                                    tooltip: HP.HPTRIM.Messages.web_makeActive,
                                    enabled: ko.observable(true),
                                    visible: this.canMakeRecordActive,
                                    active: false,
                                    actionHandler: function () {
                                        _this.handleUpdateTaskClick(RecordDetails.RecordTasks.makeRecordActiveTask());
                                    }
                                },
                                {
                                    caption: HP.HPTRIM.Messages.web_showReport,
                                    tooltip: HP.HPTRIM.Messages.web_showReport,
                                    enabled: ko.observable(true),
                                    visible: ko.observable(true),
                                    active: false,
                                    actionHandler: function () {
                                        _this.doReport(_this.uri);
                                    }
                                },
                                {
                                    caption: HP.HPTRIM.Messages.web_showActiveAuditEvents,
                                    tooltip: HP.HPTRIM.Messages.web_showActiveAuditEvents,
                                    enabled: ko.observable(true),
                                    visible: this.canSeeAuditEvents,
                                    active: false,
                                    actionHandler: function () {
                                        _this.displayAuditEvents(_this.uri);
                                    }
                                },
                                {
                                    caption: HP.HPTRIM.Messages.web_showSecurityAccess,
                                    tooltip: HP.HPTRIM.Messages.web_showSecurityAccess,
                                    enabled: ko.observable(true),
                                    visible: this.canChangeSecurity,
                                    active: false,
                                    actionHandler: function () {
                                        _this.updateSecurity(_this.uri);
                                    }
                                },
                                {
                                    caption: HP.HPTRIM.Messages.web_shareUsingObjectiveConnect,
                                    tooltip: HP.HPTRIM.Messages.web_shareUsingObjectiveConnect,
                                    enabled: ko.observable(true),
                                    visible: this.shareUsingObjectiveConnectEnabled,
                                    active: false,
                                    actionHandler: function () {
                                        _this.doShareUsingObjectiveConnect(_this.uri);
                                    }
                                }
                            ];
                            var addOns = this.loadRecordAddOn();
                            var tasksWithAddon = tasks.concat(addOns);
                            this.moreDropDown = this.makeDropDownButton(this.makeTasks(tasksWithAddon), Messages.web_more, 'moreMenu');
                        };
                        RecordsDetailComponent.prototype.loadRecordAddOn = function () {
                            var recordAddonArray = [];
                            var addonButtons = HP.HPTRIM.Addon.CustomScriptManager.s_buttons();
                            for (var key in addonButtons) {
                                var item = addonButtons[key];
                                var addOnButton = {
                                    caption: item.caption,
                                    tooltip: item.caption,
                                    active: false,
                                    enabled: ko.observable(true),
                                    visible: item.isVisible,
                                    actionHandler: item.clickHandler.bind(item, this.recordInfoObject)
                                };
                                recordAddonArray.push(addOnButton);
                            }
                            return recordAddonArray;
                        };
                        RecordsDetailComponent.prototype.configureAddRemoveCommands = function () {
                            var _this = this;
                            var tasks = [
                                {
                                    caption: HP.HPTRIM.Messages.web_addToFavorites,
                                    tooltip: HP.HPTRIM.Messages.web_addToFavorites,
                                    enabled: ko.observable(true),
                                    visible: this.showAddToFavorites,
                                    active: false,
                                    actionHandler: function () {
                                        _this.handleUpdateTaskClick(RecordDetails.RecordTasks.addToFavoriteTask());
                                    }
                                },
                                {
                                    caption: RecordDetails.RecordTasks.addToRecentRecordsTask().caption,
                                    tooltip: RecordDetails.RecordTasks.addToRecentRecordsTask().caption,
                                    enabled: ko.observable(true),
                                    visible: this.showAddToRecentRecords,
                                    active: false,
                                    actionHandler: function () {
                                        _this.handleUpdateTaskClick(RecordDetails.RecordTasks.addToRecentRecordsTask());
                                    }
                                },
                                {
                                    caption: RecordDetails.RecordTasks.addToMyContainersTask().caption,
                                    tooltip: RecordDetails.RecordTasks.addToMyContainersTask().caption,
                                    enabled: ko.observable(true),
                                    visible: this.showAddToMyContainers,
                                    active: false,
                                    actionHandler: function () {
                                        _this.handleUpdateTaskClick(RecordDetails.RecordTasks.addToMyContainersTask());
                                    }
                                },
                                {
                                    caption: RecordDetails.RecordTasks.addToRecordsWorkTrayTask().caption,
                                    tooltip: RecordDetails.RecordTasks.addToRecordsWorkTrayTask().caption,
                                    enabled: ko.observable(true),
                                    visible: this.showAddToWorkTray,
                                    active: false,
                                    actionHandler: function () {
                                        _this.handleUpdateTaskClick(RecordDetails.RecordTasks.addToRecordsWorkTrayTask());
                                    }
                                },
                                {
                                    caption: RecordDetails.RecordTasks.addToUserLabelTask().caption,
                                    tooltip: RecordDetails.RecordTasks.addToUserLabelTask().caption,
                                    enabled: ko.observable(true),
                                    visible: this.showAddToUserLabel,
                                    active: false,
                                    actionHandler: function () {
                                        _this.addToUserLabel(_this.uri, _this.recordNumber(), _this.recordTitle());
                                    }
                                },
                                {
                                    caption: RecordDetails.RecordTasks.AddToMyCheckinStyles().caption,
                                    tooltip: RecordDetails.RecordTasks.AddToMyCheckinStyles().caption,
                                    enabled: ko.observable(true),
                                    visible: this.showAddToCheckinStyle,
                                    active: false,
                                    actionHandler: function () {
                                        var icon = "";
                                        if (_this.recordInfoObject.Icon && _this.recordInfoObject.Icon.Id) {
                                            icon = _this.recordInfoObject.Icon.Id;
                                        }
                                        _this.sendToCheckinStyle(_this.uri, _this.recordNumber(), _this.recordTitle(), icon);
                                    }
                                },
                                {
                                    caption: HP.HPTRIM.Messages.web_removeFromFavorites,
                                    tooltip: HP.HPTRIM.Messages.web_removeFromFavorites,
                                    enabled: ko.observable(true),
                                    visible: this.showRemoveFromFavorites,
                                    active: false,
                                    actionHandler: function () {
                                        _this.handleUpdateTaskClick(RecordDetails.RecordTasks.removeFromFavoritesTask());
                                    }
                                },
                                {
                                    caption: RecordDetails.RecordTasks.removeFromRecentRecordsTask().caption,
                                    tooltip: RecordDetails.RecordTasks.removeFromRecentRecordsTask().caption,
                                    enabled: ko.observable(true),
                                    visible: this.showRemoveFromRecentRecords,
                                    active: false,
                                    actionHandler: function () {
                                        _this.handleUpdateTaskClick(RecordDetails.RecordTasks.removeFromRecentRecordsTask());
                                    }
                                },
                                {
                                    caption: RecordDetails.RecordTasks.removeFromMyContainersTask().caption,
                                    tooltip: RecordDetails.RecordTasks.removeFromMyContainersTask().caption,
                                    enabled: ko.observable(true),
                                    visible: this.showRemoveFromMyContainers,
                                    active: false,
                                    actionHandler: function () {
                                        _this.handleUpdateTaskClick(RecordDetails.RecordTasks.removeFromMyContainersTask());
                                    }
                                },
                                {
                                    caption: RecordDetails.RecordTasks.removeFromRecordsWorkTrayTask().caption,
                                    tooltip: RecordDetails.RecordTasks.removeFromRecordsWorkTrayTask().caption,
                                    enabled: ko.observable(true),
                                    visible: this.showRemoveFromWorktray,
                                    active: false,
                                    actionHandler: function () {
                                        _this.handleUpdateTaskClick(RecordDetails.RecordTasks.removeFromRecordsWorkTrayTask());
                                    }
                                },
                                {
                                    caption: RecordDetails.RecordTasks.removeFromUserLabelsTask().caption,
                                    tooltip: RecordDetails.RecordTasks.removeFromUserLabelsTask().caption,
                                    enabled: ko.observable(true),
                                    visible: this.showRemoveFromUserLabels,
                                    active: false,
                                    actionHandler: function () {
                                        _this.removeFromUserLabels(_this.uri, _this.recordNumber(), _this.recordTitle());
                                    }
                                },
                            ];
                            this.addRemoveDropDown = this.makeDropDownButton(this.makeTasks(tasks), Messages.web_addRemove, 'addRemoveMenu');
                        };
                        RecordsDetailComponent.prototype.configureDetailsCommands = function () {
                            var _this = this;
                            var me = this;
                            var tasks = [
                                {
                                    caption: HP.HPTRIM.Messages.web_notes,
                                    tooltip: HP.HPTRIM.Messages.web_notes,
                                    enabled: ko.observable(true),
                                    visible: this.canSetNotes,
                                    active: false,
                                    actionHandler: function () {
                                        _this.getSetNotes();
                                    }
                                },
                                {
                                    caption: HP.HPTRIM.Messages.web_Add + ' ' + HP.HPTRIM.Messages.dp_cap_relatedRecords,
                                    tooltip: HP.HPTRIM.Messages.web_Add + ' ' + HP.HPTRIM.Messages.dp_cap_relatedRecords,
                                    enabled: ko.observable(true),
                                    visible: this.canSetRelationship,
                                    active: false,
                                    actionHandler: function () {
                                        _this.addRelatedRecord(_this.uri, _this.recordNumber(), _this.recordTitle());
                                    }
                                },
                                {
                                    caption: HP.HPTRIM.Messages.web_remove + ' ' + HP.HPTRIM.Messages.dp_cap_relatedRecords,
                                    tooltip: HP.HPTRIM.Messages.web_remove + ' ' + HP.HPTRIM.Messages.dp_cap_relatedRecords,
                                    enabled: ko.observable(true),
                                    visible: this.canSetRelationship,
                                    active: false,
                                    actionHandler: function () {
                                        _this.removeRelatedRecord(_this.uri, _this.recordNumber(), _this.recordTitle());
                                    }
                                },
                                {
                                    caption: HP.HPTRIM.Messages.web_additional_Fields,
                                    tooltip: HP.HPTRIM.Messages.web_additional_Fields,
                                    enabled: ko.observable(true),
                                    visible: this.canEditAdditionalFields,
                                    active: false,
                                    actionHandler: function () {
                                        _this.editAdditionalFields();
                                    }
                                },
                                {
                                    caption: Messages.web_GPSLocation,
                                    tooltip: Messages.web_GPSLocation,
                                    enabled: ko.observable(true),
                                    visible: this.canSetGIS,
                                    active: false,
                                    actionHandler: function () {
                                        _this.setGPSLocationClick();
                                    }
                                },
                                {
                                    caption: HP.HPTRIM.Messages.web_copyURL,
                                    tooltip: HP.HPTRIM.Messages.web_copyURL,
                                    enabled: ko.observable(true),
                                    visible: ko.observable(true),
                                    active: false,
                                    actionHandler: function () {
                                        var basePath = HP.HPTRIM.Utils.TrimHelper.getBaseUrl();
                                        var objectType = HP.HPTRIM.Framework.Components.Shared.String.format("t={0}", ["Record"]);
                                        var query = "uri=" + me.recordInfoObject.Uri;
                                        var url = HP.HPTRIM.Framework.Components.Shared.String.format("{0}?{1}&{2}", [basePath, query, objectType]);
                                        HPTRIM.Utils.String.copyToClipboard(url);
                                        me.actionResult(HP.HPTRIM.Messages.web_urlCoppied);
                                        me.actionResultDisplay(true);
                                        me.doFadeInOutOnInformationalText();
                                    }
                                },
                                {
                                    caption: HP.HPTRIM.Messages.web_reject + " " + HP.HPTRIM.Messages.web_from + " " + HPTRIM.BaseObjectTypes.Consignment.Caption,
                                    tooltip: HP.HPTRIM.Messages.web_reject + " " + HP.HPTRIM.Messages.web_from + " " + HPTRIM.BaseObjectTypes.Consignment.Caption,
                                    enabled: ko.observable(true),
                                    visible: this.canRejectFromConsignment,
                                    active: false,
                                    actionHandler: function () {
                                        _this.updateTaskHandler(RecordDetails.RecordTasks.rejectRecordFromConsignmnetTask(), _this.recordInfoObject, HPTRIM.BaseObjectTypes.Record, _this.handleUpdateResults, _this.handleWarning, _this.handleError);
                                    }
                                },
                            ];
                            if (this.trimClient.currentUserType() == "Contributor" || this.trimClient.currentUserType() == "Inquiry User") {
                                tasks.splice(2, 1);
                            }
                            this.detailsDropDown = this.makeDropDownButton(this.makeTasks(tasks), Messages.web_details, 'detailsMenu');
                        };
                        RecordsDetailComponent.prototype.configureWorkflowCommands = function () {
                            var _this = this;
                            var tasks = [
                                {
                                    caption: HP.HPTRIM.Messages.web_initiateWorkFlow,
                                    tooltip: HP.HPTRIM.Messages.web_initiateWorkFlow,
                                    enabled: ko.observable(true),
                                    visible: this.showInitiateWorkflow,
                                    active: false,
                                    actionHandler: function () {
                                        _this.initiateWorkflow(_this.recordInfoObject);
                                    }
                                },
                                {
                                    caption: HP.HPTRIM.Messages.web_attachActionTitle,
                                    tooltip: HP.HPTRIM.Messages.web_attachActionTitle,
                                    enabled: ko.observable(true),
                                    visible: this.showAddActionAndProcedure,
                                    active: false,
                                    actionHandler: function () {
                                        _this.updateTaskHandler(Panels.Plugins.RecordActionsComponentActions.ATTACH_RECORD_ACTION_TASK, _this.recordInfoObject, HPTRIM.BaseObjectTypes.Record, _this.handleUpdateResults, _this.handleWarning, _this.handleError);
                                    }
                                },
                                {
                                    caption: HP.HPTRIM.Messages.web_completeCurrentAction,
                                    tooltip: HP.HPTRIM.Messages.web_completeCurrentAction,
                                    enabled: ko.observable(true),
                                    visible: this.showCompleteLatestActionAndProcedure,
                                    active: false,
                                    actionHandler: function () {
                                        _this.updateTaskHandler(Panels.Plugins.RecordActionsComponentActions.COMPLETE_LATEST_RECORD_ACTION_TASK, _this.recordInfoObject, HPTRIM.BaseObjectTypes.Record, _this.handleUpdateResults, _this.handleWarning, _this.handleError);
                                    }
                                },
                                {
                                    caption: HP.HPTRIM.Messages.web_attachedRecordActions,
                                    tooltip: HP.HPTRIM.Messages.web_attachedRecordActions,
                                    enabled: ko.observable(true),
                                    visible: this.showActionsAndProcedures,
                                    active: false,
                                    actionHandler: function () {
                                        _this.showRecordActionsAndProcedures(_this.uri, _this.recordInfoObject);
                                    }
                                },
                                {
                                    caption: HP.HPTRIM.Messages.web_workflow,
                                    tooltip: HP.HPTRIM.Messages.web_workflow,
                                    enabled: ko.observable(true),
                                    visible: this.showWorkflows,
                                    active: false,
                                    actionHandler: function () {
                                        var query = HPTRIM.Utils.String.format("record:{0} or container:{1} or initiator:{2}", [_this.uri, _this.uri, _this.uri]);
                                        _this.search(query, "", HPTRIM.BaseObjectTypes.Workflow);
                                    }
                                },
                                {
                                    caption: HP.HPTRIM.Messages.web_todoItem,
                                    tooltip: HP.HPTRIM.Messages.web_todoItem,
                                    enabled: ko.observable(true),
                                    visible: this.showWorkflows,
                                    active: false,
                                    actionHandler: function () {
                                        var query = HPTRIM.Utils.String.format("reference[record:{0}]", [_this.uri]);
                                        _this.search(query, "", HPTRIM.BaseObjectTypes.TodoItem);
                                    }
                                }
                            ];
                            this.workflowDropDown = this.makeDropDownButton(this.makeTasks(tasks), Messages.web_workflow, 'workflowMenu');
                        };
                        RecordsDetailComponent.prototype.makeDropDownButton = function (actions, caption, id) {
                            var dropDown = new ActionManager.ActionManagerComponent(caption, actions);
                            if (id) {
                                dropDown.id = id;
                            }
                            dropDown.templateName(ActionManager.ActionManagerComponent.templates.dropdown);
                            return dropDown;
                        };
                        RecordsDetailComponent.prototype.makeTasks = function (taskList) {
                            return HP.HPTRIM.Utils.TrimHelper.makeTasks(taskList);
                        };
                        RecordsDetailComponent.prototype.doShareUsingObjectiveConnect = function (uri) {
                            var property = 'ExternalShareURL';
                            var request = new HP.HPTRIM.TrimObjectInformationRequest(this.trimClient, uri, HP.HPTRIM.BaseObjectTypes.Record, property);
                            request.doRequest().done(function (result) {
                                if (result.Results && result.Results.length > 0) {
                                    var obj = result.Results[0];
                                    var url = obj.ExternalShareURL;
                                    try {
                                        var win = window.open(url, '_blank');
                                        win.focus();
                                    }
                                    catch (e) {
                                        console.log(e);
                                    }
                                }
                            }).fail(function (errorResponse) {
                                var errorMsg = HP.HPTRIM.Messages.web_unableToConnectToWebServices;
                                if (errorResponse.ResponseStatus && errorResponse.ResponseStatus.Message) {
                                    errorMsg = errorResponse.ResponseStatus.Message;
                                }
                                if (errorResponse.responseJSON && errorResponse.responseJSON.ResponseStatus && errorResponse.responseJSON.ResponseStatus.Message) {
                                    errorMsg = errorResponse.responseJSON.ResponseStatus.Message;
                                }
                                ko.postbox.publish(App.TRIMApp.NOTIFICATION_ERROR_TOPIC, errorMsg);
                            });
                        };
                        RecordsDetailComponent.prototype.editDetails = function () {
                            var me = this;
                            var returnCallback = function (message, result) {
                                if (message) {
                                    me.actionResult(message);
                                    me.actionResultDisplay(true);
                                    me.doFadeInOutOnInformationalText();
                                }
                                if (result) {
                                    me.updateCallback(result);
                                }
                            };
                            this.editDetailsHandler(this.uri, returnCallback);
                        };
                        RecordsDetailComponent.prototype.showRequestRecordMenu = function () {
                            var me = this;
                            this.requestor.clear();
                            if (this.isPopoverVisible()) {
                                $("#request-record-menu-popover").popover('hide');
                                this.isPopoverVisible(false);
                            }
                            else {
                                $("#request-record-menu-popover").popover('show');
                                ko.applyBindingsToDescendants(me, $(".popover-content")[0]);
                                this.isPopoverVisible(true);
                            }
                        };
                        RecordsDetailComponent.prototype.checkOut = function () {
                            var me = this;
                            var callback = function (infoObject) {
                                me.updateCallback(infoObject);
                                me.actionResult(HP.HPTRIM.Messages.web_recordCheckedOut);
                                me.actionResultDisplay(true);
                                me.doFadeInOutOnInformationalText();
                            };
                            this.doCheckOut(me.uri, callback);
                        };
                        RecordsDetailComponent.prototype.createRecordClick = function () {
                            if (this.recordInfoObject.RecordLastPartRecord && this.recordInfoObject.RecordLastPartRecord.Uri != this.recordInfoObject.Uri) {
                                this.displayError(Messages.web_folderNotLatestPart);
                                if (!this.trimClient.getDatabase().currentUserPermissions().RecordAdminRestricted) {
                                    return;
                                }
                            }
                            var fileDropped = false;
                            var recordTypeFilter = "";
                            if (this.recordInfoObject.RecordRecordType && this.recordInfoObject.RecordRecordType.Uri) {
                                var recordUri = this.recordInfoObject.RecordRecordType.Uri;
                                recordTypeFilter = "canBeContainedBy:" + recordUri;
                            }
                            var icon = "";
                            if (this.recordInfoObject.Icon && this.recordInfoObject.Icon.Id) {
                                icon = this.recordInfoObject.Icon.Id;
                            }
                            var container = new HPTRIM.TrimBaseObject(HPTRIM.BaseObjectTypes.Record, this.uri, this.recordNumber() + " " + this.recordTitle(), icon);
                            var propertyValueObject = { RecordContainer: container };
                            this.createNewRecord(fileDropped, recordTypeFilter, propertyValueObject);
                        };
                        RecordsDetailComponent.prototype.createNewPartClick = function () {
                            this.createNewRecordFromExistinRecord("Part");
                        };
                        RecordsDetailComponent.prototype.createNewVersionClick = function () {
                            this.createNewRecordFromExistinRecord("Version");
                        };
                        RecordsDetailComponent.prototype.createNewRecordFromExistinRecord = function (newRecordType) {
                            var me = this;
                            var successCallback = this.search;
                            var failureCallback = function (error) {
                                var message = HP.HPTRIM.Messages.web_error;
                                if (error.ResponseStatus && error.ResponseStatus.Message) {
                                    message = HP.HPTRIM.Messages.web_error + ": " + error.ResponseStatus.Message;
                                }
                                me.displayError(message);
                            };
                            this.createNewPart(me.uri, newRecordType, successCallback, failureCallback);
                        };
                        RecordsDetailComponent.prototype.modifyRecordAdditionalFieldsClick = function () {
                            this.handleUpdateTaskClick(RecordDetails.RecordTasks.modifyAdditionalFieldsRecordsTask());
                        };
                        RecordsDetailComponent.prototype.setContainerClick = function () {
                            this.handleUpdateTaskClick(RecordDetails.RecordTasks.setContainerTask());
                        };
                        RecordsDetailComponent.prototype.setAssigneeClick = function () {
                            this.handleUpdateTaskClick(RecordDetails.RecordTasks.setAssigneeTask());
                        };
                        RecordsDetailComponent.prototype.setHomeClick = function () {
                            this.handleUpdateTaskClick(RecordDetails.RecordTasks.setHomeLocationTask());
                        };
                        RecordsDetailComponent.prototype.removeFromContainerClick = function () {
                            this.handleUpdateTaskClick(RecordDetails.RecordTasks.removeFromContainerTask());
                        };
                        RecordsDetailComponent.prototype.setOwnerClick = function () {
                            this.handleUpdateTaskClick(RecordDetails.RecordTasks.setOwnerTask());
                        };
                        RecordsDetailComponent.prototype.addContactClick = function () {
                            this.handleUpdateTaskClick(RecordDetails.RecordTasks.addContactTask());
                        };
                        RecordsDetailComponent.prototype.showContactsClick = function () {
                            var query = "contactOf: " + this.uri;
                            this.search(query, "", HPTRIM.BaseObjectTypes.Location);
                        };
                        RecordsDetailComponent.prototype.removeContactClick = function () {
                            this.removeContact(this.uri, this.recordNumber(), this.recordTitle());
                        };
                        RecordsDetailComponent.prototype.setGPSLocationClick = function () {
                            this.handleUpdateTaskClick(RecordDetails.RecordTasks.setGpsLocationTask());
                        };
                        RecordsDetailComponent.prototype.getSetNotes = function () {
                            var me = this;
                            var propertyName = 'RecordNotes';
                            var rty = this.recordInfoObject['RecordRecordType'];
                            var notesInsertStyle = rty.RecordTypeNotesInsertStyle;
                            var annotateWhenReadOnly = rty.RecordTypeAnnotateWhenReadOnly;
                            var annotateOnly = rty.RecordTypeAnnotateOnly;
                            var canAddToNotes = this.recordInfoObject['CanAddToNotes'];
                            this.showNotes(HPTRIM.BaseObjectTypes.Record, propertyName, me.uri, canAddToNotes, notesInsertStyle, annotateWhenReadOnly, annotateOnly);
                        };
                        RecordsDetailComponent.prototype.getRevAuthComments = function () {
                            var me = this;
                            var recInfo = me.recordInfoObject;
                            this.showComments(HPTRIM.BaseObjectTypes.Record, me.uri, recInfo);
                        };
                        RecordsDetailComponent.prototype.editAdditionalFields = function () {
                            var task = RecordDetails.RecordTasks.modifyAdditionalFieldsRecordsTask();
                            RecordDetails.RecordTasks.modifyAdditionalFieldsForMultiple = false;
                            this.handleUpdateTaskClick(task);
                        };
                        RecordsDetailComponent.prototype.addRelatedRecordClick = function () {
                            this.addRelatedRecord(this.uri, this.recordNumber(), this.recordTitle());
                        };
                        RecordsDetailComponent.prototype.removeRelatedRecordClick = function () {
                            this.removeRelatedRecord(this.uri, this.recordNumber(), this.recordTitle());
                        };
                        RecordsDetailComponent.prototype.showMessage = function (message) {
                            this.actionResult(message);
                            this.actionResultDisplay(true);
                            this.doFadeInOutOnInformationalText();
                        };
                        RecordsDetailComponent.prototype.doFadeInOutOnInformationalText = function () {
                            $("#recordInformationLabel").show("drop", 500);
                            $("#recordInformationLabel").delay(3000).hide("drop", "down", 500);
                        };
                        RecordsDetailComponent.prototype.doFadeInOutOnInformationalTextWithAddedDelay = function () {
                            $("#recordInformationLabel").show("drop", 500);
                            $("#recordInformationLabel").delay(3000).hide("drop", "down", 500).delay(1500);
                        };
                        RecordsDetailComponent.prototype.addRelationshipClick = function () {
                        };
                        RecordsDetailComponent.prototype.handleReportButtonClick = function () {
                            this.doReport(this.uri);
                        };
                        RecordsDetailComponent.removePortNumberFromURL = function (url) {
                            var doubleSlash = url.indexOf("//");
                            var portColon = (doubleSlash == -1 || doubleSlash == url.length) ? -1 : url.indexOf(":", doubleSlash + 1);
                            var endPort = (portColon == -1 || doubleSlash == url.length) ? -1 : url.indexOf("/", portColon + 1);
                            var newURL = endPort == -1 ? "" : url.substr(0, portColon) + url.substr(endPort);
                            return newURL;
                        };
                        RecordsDetailComponent.prototype._isCheckedOutOnline = function () {
                            var me = this;
                            return me.isCheckedOutToWebdav() || me.isCheckedOutToWOPI();
                        };
                        RecordsDetailComponent.prototype._isCheckedOutToWebdav = function () {
                            var me = this;
                            var recInfo = me.recordInfoObject;
                            return recInfo != null && typeof WebDAVConfig != "undefined" && recInfo.RecordCheckedOutPath.Value == WebDAVConfig.webdavCheckOutPath;
                        };
                        RecordsDetailComponent.prototype._isCheckedOutToWOPI = function () {
                            var me = this;
                            var recInfo = me.recordInfoObject;
                            return recInfo != null && typeof WOPIConfig != "undefined" && recInfo.RecordCheckedOutPath.Value == WOPIConfig.checkoutType;
                        };
                        RecordsDetailComponent.prototype._isCheckedOutToCurrentUser = function () {
                            var me = this;
                            var userID = me.trimClient.getDatabase().getCurrentUser().Uri;
                            var outTo = "";
                            if (me.recordInfoObject != null) {
                                if (me.recordInfoObject.RecordCheckedOutTo) {
                                    outTo = me.recordInfoObject.RecordCheckedOutTo.Uri;
                                }
                            }
                            return userID == outTo;
                        };
                        RecordsDetailComponent.prototype.checkIn = function () {
                            var me = this;
                            var callback = function (keepCheckedOut, infoObject) {
                                if (infoObject != null) {
                                    me.updateCallback(infoObject);
                                }
                                else {
                                    var properties = "isCheckedOut,RecordCheckedOutTo,RecordExtension,RecordRevisionCount,EnabledCommandIds";
                                    var getUpdatedDetailsRequest = new HPTRIM.TrimBaseObjectRequest(me.trimClient, new HPTRIM.TrimBaseObject(HPTRIM.BaseObjectTypes.Record, me.uri), properties);
                                    getUpdatedDetailsRequest.doRequest().done(function (result) {
                                        if (result.Results && result.Results[0]) {
                                            var updatedObject = result.Results[0];
                                            me.updateCallback(updatedObject);
                                        }
                                        else {
                                            me.refresh();
                                        }
                                    }).fail(function (error) {
                                        me.refresh();
                                    });
                                }
                                me.actionResult(keepCheckedOut ? HP.HPTRIM.Messages.web_documentCheckedIn : HP.HPTRIM.Messages.web_recordCheckedIn);
                                me.actionResultDisplay(true);
                                me.doFadeInOutOnInformationalText();
                            };
                            var failCallback = function (resp) {
                                try {
                                    me.displayError(resp.responseJSON.ResponseStatus.Message);
                                }
                                catch (ex) {
                                    me.displayError(HP.HPTRIM.Messages.web_errorCheckin);
                                }
                            };
                            var recDetails = new App.ActionHandlers.CheckInRecordDetails();
                            if (me.isCheckedOutToWebdav()) {
                                recDetails.source = App.ActionHandlers.CheckInSource.webdav;
                            }
                            else if (me.isCheckedOutToWOPI()) {
                                recDetails.source = App.ActionHandlers.CheckInSource.wopi;
                            }
                            else {
                                recDetails.source = App.ActionHandlers.CheckInSource.localFile;
                            }
                            if (recDetails.source == App.ActionHandlers.CheckInSource.wopi) {
                                if (me.getWOPIWindow(me.uri) != null) {
                                    me.displayError(HP.HPTRIM.Messages.web_wopiPleaseCloseWindow);
                                    return;
                                }
                            }
                            recDetails.uri = me.uri;
                            recDetails.recordNumber = me.recordNumber();
                            var recInfo = me.recordInfoObject;
                            var outTo = "";
                            if (recInfo != null) {
                                if (recInfo.RecordCheckedOutTo != undefined) {
                                    if (recInfo.RecordCheckedOutTo.Uri) {
                                        outTo = recInfo.RecordCheckedOutTo.Uri;
                                    }
                                }
                            }
                            recDetails.checkedOutToURI = outTo;
                            recDetails.fileName = App.Widgets.TrimFileUploadComponent.fileNameFromPath(recInfo.RecordESource.StringValue);
                            recDetails.fileSize = recInfo.RecordDocumentSize.Value;
                            var options = new App.ActionHandlers.CheckInOptions();
                            options.showMakeNewRevision = (recInfo.RecordRecordType && recInfo.RecordRecordType.RecordTypeAllowVersions && recInfo.RecordRecordType.RecordTypeAllowVersions.Value == true);
                            options.successCallback = callback;
                            options.failCallback = failCallback;
                            this.doCheckIn(recDetails, options);
                        };
                        RecordsDetailComponent.prototype.enableFeatures = function () {
                            var activeFeatures = this.trimClient.getDatabase().activeFeatures();
                            if (_.contains(activeFeatures, "Requests")) {
                                this.showRequestAction(true);
                            }
                            else {
                                this.showRequestAction(false);
                            }
                            if (_.contains(activeFeatures, "DocumentReview")) {
                                this.showDocumentReview(true);
                            }
                            else {
                                this.showDocumentReview(false);
                            }
                            if (_.contains(activeFeatures, "AdvancedRequests")) {
                                this.showRequestAction(false);
                                this.showAdvancedRequestActions(true);
                            }
                            else {
                                this.showAdvancedRequestActions(false);
                            }
                        };
                        RecordsDetailComponent.prototype.selectRecordCallback = function (uri, title, recNumber) {
                            this.doActivityDocumentAttach(uri, title, recNumber);
                        };
                        RecordsDetailComponent.prototype.handleShowRecordActionsAndProceduresClick = function () {
                        };
                        RecordsDetailComponent.prototype.configureMenu = function (uri, enabledCommandIds, actionHandlers) {
                            var trimObject = new HP.HPTRIM.TrimBaseObject(HP.HPTRIM.BaseObjectTypes.Record, uri);
                            var commandHandlers = {
                                'Notes': _.bind(this.getSetNotes, this),
                                'Properties': _.bind(this.editDetails, this),
                                'EditUserfields': _.bind(this.editAdditionalFields, this)
                            };
                            this.objectMenu = new HP.HPTRIM.App.Menu.ObjectMenu(trimObject, null, commandHandlers);
                            if (!HPRMWebConfig.isDebugEnabled) {
                                this.objectMenu.visible(false);
                            }
                            setTimeout(function () {
                                $("#menu").menu();
                                $("#menu-popup").menu();
                            }, 1000);
                        };
                        RecordsDetailComponent.prototype.appendFormData = function (data, dataType, formData) {
                            var dataArray = data.split(',');
                            for (var i = 0; i < dataArray.length; i++) {
                                formData.append(dataType, dataArray[i]);
                            }
                            return formData;
                        };
                        RecordsDetailComponent.prototype.updateModel = function (newUri, actionResult, callback) {
                            this.uri = newUri;
                            var attachmentIsViewed = false;
                            var val = parseInt(newUri);
                            if (isNaN(val)) {
                                return;
                            }
                            this.actionResult("");
                            this.actionResultDisplay(false);
                            if (actionResult) {
                                this.actionResult(actionResult);
                                this.actionResultDisplay(true);
                            }
                            var me = this;
                            me.spItemUrl("");
                            me.details(true);
                            if (me.attachmentIsViewed) {
                                if (me.panelIsExpanded != undefined && me.panelIsExpanded != true) {
                                    me.loading(true);
                                }
                                attachmentIsViewed = me.attachmentIsViewed;
                            }
                            else {
                                me.loading(true);
                            }
                            var recordInfoRequest = new HPTRIM.TrimRecordInformationRequest(me.trimClient, newUri, me.requiredProperties);
                            recordInfoRequest.addRequiredCommandIds(me.requiredCommandIds);
                            recordInfoRequest.includePropertiesDef();
                            recordInfoRequest.includeBothStringValueAndRawValue();
                            recordInfoRequest.setStringDisplayType('ViewPane');
                            recordInfoRequest.doRequest().done(function (result) {
                                me.loading(false);
                                if (result.Results[0]) {
                                    var recordInfo = result.Results[0];
                                    me.recordInfoObject = recordInfo;
                                    if (_.contains(me.trimClient.getDatabase().activeFeatures(), "DocumentReview")) {
                                        var recordDocumentReviewRequest = new HPTRIM.TrimRecordInformationRequest(me.trimClient, newUri, "RecordReviewDueDate,RecordAuthorizationDueDate,EnabledCommandIds,ChildLocations");
                                        recordDocumentReviewRequest.addRequiredCommandIds("StartReview,StartAuthorization,ViewComments,ReviewDocument,AuthorizeDocument,FinalizeDocument,RestartDocumentReview");
                                        recordDocumentReviewRequest.includePropertiesDef();
                                        recordDocumentReviewRequest.includeBothStringValueAndRawValue();
                                        recordDocumentReviewRequest.setStringDisplayType('ViewPane');
                                        recordDocumentReviewRequest.doRequest().done(function (resultDocumentReview) {
                                            if (resultDocumentReview.Results[0]) {
                                                if (resultDocumentReview.Results[0].RecordReviewDueDate) {
                                                    if (resultDocumentReview.Results[0].RecordReviewDueDate.DateTime) {
                                                        if (resultDocumentReview.Results[0].RecordReviewDueDate.StringValue) {
                                                            delete resultDocumentReview.Results[0].RecordReviewDueDate.StringValue;
                                                        }
                                                    }
                                                    me.recordInfoObject.RecordReviewDueDate = resultDocumentReview.Results[0].RecordReviewDueDate;
                                                }
                                                if (resultDocumentReview.Results[0].RecordAuthorizationDueDate) {
                                                    if (resultDocumentReview.Results[0].RecordAuthorizationDueDate.DateTime) {
                                                        if (resultDocumentReview.Results[0].RecordAuthorizationDueDate.StringValue) {
                                                            delete resultDocumentReview.Results[0].RecordAuthorizationDueDate.StringValue;
                                                        }
                                                    }
                                                    me.recordInfoObject.RecordAuthorizationDueDate = resultDocumentReview.Results[0].RecordAuthorizationDueDate;
                                                }
                                                if (resultDocumentReview.Results[0].ChildLocations) {
                                                    me.recordInfoObject.ChildLocations = resultDocumentReview.Results[0].ChildLocations;
                                                }
                                                me.updateDocumentReviewMenu(resultDocumentReview.Results[0]);
                                            }
                                        });
                                    }
                                    if (recordInfo.EnabledCommandIds) {
                                        var findCommand = function (commandName) {
                                            return _.find(recordInfo.EnabledCommandIds, function (commandId) { return commandId == commandName; });
                                        };
                                        if (findCommand('EditUserfields')) {
                                            me.canEditRecord(true);
                                        }
                                        if (me.showRequestAction()) {
                                            if (findCommand('RecAddRequest')) {
                                                me.showAddRequest(true);
                                            }
                                            else {
                                                me.showAddRequest(false);
                                            }
                                        }
                                    }
                                    var propertiesOrFieldsDictionary = {};
                                    _.each(result.PropertiesAndFields.Record, function (item) {
                                        propertiesOrFieldsDictionary[item.Id] = item;
                                    });
                                    me.propertiesAndFields = ko.observable(propertiesOrFieldsDictionary);
                                    var getCaption = function (propertyName) {
                                        if (me.propertiesAndFields()[propertyName]) {
                                            return me.propertiesAndFields()[propertyName].Caption.toUpperCase();
                                        }
                                        return "";
                                    };
                                    me.CaptionDocumentStatus(getCaption('DocumentStatus'));
                                    me.CaptionRecordAssignee(getCaption('RecordAssignee'));
                                    me.CaptionRecordDateRegistered(getCaption('RecordDateRegistered'));
                                    var trimObject = new HPTRIM.TrimBaseObject(HPTRIM.BaseObjectTypes.Record, newUri, recordInfo.RecordNumber.StringValue, recordInfo.RecordRecordType.StringValue, recordInfo.RecordRecordType.Icon.Id);
                                    me.updatePropertiesView(trimObject, recordInfo.RecordRecordType);
                                    me.fetchSharePointItemIfApplicable();
                                    me.setAddonRecordContext(recordInfo);
                                    if (attachmentIsViewed) {
                                        if (me.panelIsExpanded != undefined && me.panelIsExpanded != true) {
                                            me.renderRecordDetails();
                                            me.panelIsExpanded = true;
                                        }
                                    }
                                    else {
                                        me.renderRecordDetails();
                                        me.panelIsExpanded = true;
                                    }
                                    if (callback) {
                                        callback();
                                    }
                                }
                            }).fail(function (errorResponse) {
                                var errorMsg = HP.HPTRIM.Messages.web_unableToConnectToWebServices;
                                if (errorResponse.ResponseStatus && errorResponse.ResponseStatus.Message) {
                                    errorMsg = errorResponse.ResponseStatus.Message;
                                }
                                if (errorResponse.responseJSON && errorResponse.responseJSON.ResponseStatus && errorResponse.responseJSON.ResponseStatus.Message) {
                                    errorMsg = errorResponse.responseJSON.ResponseStatus.Message;
                                }
                                me.displayError(errorMsg);
                                me.loading(false);
                                me.detailsReady(false);
                                me.details(false);
                            });
                        };
                        RecordsDetailComponent.prototype.useCachedResult = function (result, task) {
                            var me = this;
                            if (!this.recordInfoObject) {
                                this.recordInfoObject = result;
                            }
                            else {
                                if (task) {
                                    _.each(task.updatedProperties, function (updatedProperty) {
                                        if (result[updatedProperty]) {
                                            me.recordInfoObject[updatedProperty] = result[updatedProperty];
                                        }
                                    });
                                }
                                if (result.EnabledCommandIds) {
                                    this.recordInfoObject.EnabledCommandIds = result.EnabledCommandIds;
                                }
                                if (result.RecordIsElectronic) {
                                    this.recordInfoObject.RecordIsElectronic = result.RecordIsElectronic;
                                }
                                if (result.RecordAuthor) {
                                    this.recordInfoObject.RecordAuthor = result.RecordAuthor;
                                }
                                if (result.RecordDateCreated) {
                                    this.recordInfoObject.RecordDateCreated = result.RecordDateCreated;
                                }
                                if (result.RecordAssignee) {
                                    this.recordInfoObject.RecordAssignee = result.RecordAssignee;
                                }
                                if (result.RecordDateAssigned) {
                                    this.recordInfoObject.RecordDateAssigned = result.RecordDateAssigned;
                                }
                                if (result.RecordDateRegistered) {
                                    this.recordInfoObject.RecordDateRegisered = result.RecordDateRegistered;
                                }
                                if (result.RecordContainer) {
                                    this.recordInfoObject.RecordContainer = result.RecordContainer;
                                }
                                if (result.RecordHomeLoaction) {
                                    this.recordInfoObject.RecordHomeLocation = result.RecordHomeLocation;
                                }
                                if (result.IsInFavorites !== undefined) {
                                    this.recordInfoObject.IsInFavorites = result.IsInFavorites;
                                }
                                if (result.RecordRequests !== undefined) {
                                    this.recordInfoObject.RecordRequests = result.RecordRequests;
                                }
                                if (result.RecordCurrentAction !== undefined) {
                                    this.recordInfoObject.RecordCurrentAction = result.RecordCurrentAction;
                                }
                                if (result.RecordGpsLocation !== undefined) {
                                    this.recordInfoObject.RecordGpsLocation = result.RecordGpsLocation;
                                }
                                if (result.RecordDocumentStatus !== undefined) {
                                    this.recordInfoObject.RecordDocumentStatus = result.RecordDocumentStatus;
                                }
                                if (result.RecordIsCheckedOut !== undefined) {
                                    this.recordInfoObject.RecordIsCheckedOut = result.RecordIsCheckedOut;
                                }
                                if (result.RecordCheckedOutTo !== undefined) {
                                    this.recordInfoObject.RecordCheckedOutTo = result.RecordCheckedOutTo;
                                }
                                if (result.RecordExtension !== undefined) {
                                    this.recordInfoObject.RecordExtension = result.RecordExtension;
                                }
                                if (result.RecordRevisionCount !== undefined) {
                                    this.recordInfoObject.RecordRevisionCount = result.RecordRevisionCount;
                                }
                            }
                            var trimObject = new HPTRIM.TrimBaseObject(HPTRIM.BaseObjectTypes.Record, this.uri, this.recordInfoObject.RecordNumber.StringValue, this.recordInfoObject.RecordRecordType.StringValue, this.recordInfoObject.RecordRecordType.Icon.Id);
                            this.updatePropertiesView(trimObject, this.recordInfoObject.RecordRecordType);
                            this.renderRecordDetails();
                        };
                        RecordsDetailComponent.prototype.setAddonRecordContext = function (recordInfo) {
                            HP.HPTRIM.Addon.CustomScriptManager.reset();
                            for (var i = 0; i < HP.HPTRIM.Addon.CustomScriptManager.s_buttons().length; i++) {
                                var addOn = HP.HPTRIM.Addon.CustomScriptManager.s_buttons()[i];
                                addOn.setContext(recordInfo);
                                if (addOn.preRender) {
                                    addOn.preRender();
                                }
                            }
                        };
                        RecordsDetailComponent.prototype.fetchSharePointItemIfApplicable = function () {
                            var me = this;
                            if (this.recordInfoObject["RecordSpURL"].Value !== "") {
                                me.spItemUrl(this.recordInfoObject["RecordSpURL"].Value);
                            }
                        };
                        RecordsDetailComponent.prototype.renderRecordDetails = function () {
                            var me = this;
                            this.resetValues();
                            this.recordTitle(this.recordInfoObject.RecordTitle ? this.recordInfoObject.RecordTitle.Value : "");
                            this.recordNumber(this.recordInfoObject.RecordNumber.Value);
                            this.canView(this.recordInfoObject.RecordIsElectronic.Value);
                            if (this.spItemUrl() != "") {
                                this.canView(true);
                            }
                            this.isElectronic(this.recordInfoObject.RecordIsElectronic.Value);
                            if (this.recordInfoObject.RecordAuthor && this.recordInfoObject.RecordAuthor.LocationFormattedValue) {
                                this.authorName(this.recordInfoObject.RecordAuthor.LocationFormattedName.Value);
                            }
                            else if (this.recordInfoObject.RecordAuthor && this.recordInfoObject.RecordAuthor.StringValue) {
                                this.authorName(this.recordInfoObject.RecordAuthor.StringValue);
                            }
                            else {
                                this.authorName("");
                            }
                            if (this.recordInfoObject.RecordDateCreated && !this.recordInfoObject.RecordDateCreated.IsClear) {
                                if (this.recordInfoObject.RecordDateCreated.StringValue) {
                                    this.dateCreated(this.recordInfoObject.RecordDateCreated.StringValue);
                                }
                                else {
                                    var rawDateString = this.recordInfoObject.RecordDateCreated.DateTime;
                                    var date = new Date(Date.parse(rawDateString.substr(0, 23)));
                                    this.dateCreated(date.toDateString());
                                }
                            }
                            else {
                                this.dateCreated("");
                            }
                            if (this.recordInfoObject.RecordAssignee && this.recordInfoObject.RecordAssignee.StringValue) {
                                this.assigneeName(this.recordInfoObject.RecordAssignee.StringValue);
                            }
                            else if (this.recordInfoObject.RecordAssignee && this.recordInfoObject.RecordAssignee.LocationFormattedName) {
                                this.assigneeName(this.recordInfoObject.RecordAssignee.LocationFormattedName.Value);
                            }
                            else {
                                if (this.recordInfoObject.RecordContainer && this.recordInfoObject.RecordContainer.Uri) {
                                    me.assigneeName(Messages.web_loading);
                                    var containerAssigneeRequest = new HPTRIM.TrimRecordInformationRequest(me.trimClient, this.recordInfoObject.RecordContainer.Uri, "RecordAssignee,RecordNumber");
                                    containerAssigneeRequest.doRequest().done(function (result) {
                                        if (result.Results[0].RecordAssignee) {
                                            me.recordInfoObject.RecordAssignee = HP.HPTRIM.Messages.web_incontainerColon + result.Results[0].RecordNumber.Value + " (" + result.Results[0].RecordAssignee.LocationFormattedName.Value + ")";
                                        }
                                        else {
                                            me.recordInfoObject.RecordAssignee = HP.HPTRIM.Messages.web_incontainerColon + result.Results[0].RecordNumber.Value;
                                        }
                                        me.assigneeName(me.recordInfoObject.RecordAssignee);
                                    });
                                }
                                else {
                                    me.assigneeName("-");
                                }
                            }
                            if (this.recordInfoObject.RecordDateRegistered && !this.recordInfoObject.RecordDateRegistered.IsClear) {
                                if (this.recordInfoObject.RecordDateRegistered.StringValue) {
                                    this.dateRegistered(this.recordInfoObject.RecordDateRegistered.StringValue);
                                }
                                else {
                                    var rawDateString = this.recordInfoObject.RecordDateRegistered.DateTime;
                                    var date = new Date(Date.parse(rawDateString.substr(0, 23)));
                                    this.dateRegistered(date.toDateString());
                                }
                            }
                            else {
                                this.dateRegistered("");
                            }
                            this.canReturn(false);
                            if (this.trimClient.canModifyRecord() || (this.recordInfoObject.RecordRecordType.RecordTypeMoveWhenReadOnly && this.recordInfoObject.RecordRecordType.RecordTypeMoveWhenReadOnly.Value == true)) {
                                if (this.recordInfoObject.RecordHomeLocation) {
                                    if ((this.recordInfoObject.RecordAssignee != undefined) && (this.recordInfoObject.RecordHomeLocation.Uri != this.recordInfoObject.RecordAssignee.Uri)) {
                                        this.canReturn(true);
                                    }
                                    this.homeLocationUri(this.recordInfoObject.RecordHomeLocation.Uri);
                                }
                                else {
                                    this.homeLocationUri("");
                                }
                                if (this.recordInfoObject.RecordContainer && this.recordInfoObject.RecordContainer.Uri && this.recordInfoObject.RecordContainer.Uri != 0) {
                                    if (this.recordInfoObject.RecordHomeLocation) {
                                        if (this.recordInfoObject.RecordAssignee.Uri) {
                                            this.canReturn(true);
                                        }
                                    }
                                }
                            }
                            this.canCheckIn(_.contains(me.recordInfoObject.EnabledCommandIds, "RecCheckIn"));
                            this.canCheckOut(_.contains(me.recordInfoObject.EnabledCommandIds, "RecCheckOut"));
                            this.isCheckedOutToCurrentUser(this._isCheckedOutToCurrentUser());
                            this.isCheckedOutToWebdav(this._isCheckedOutToWebdav());
                            this.isCheckedOutToWOPI(this._isCheckedOutToWOPI());
                            this.wopiInfo(me.recordInfoObject.WOPIInfo);
                            this.canAdditionalRequest(true);
                            this.canRequest(true);
                            var behaviour = this.recordInfoObject.RecordRecordType.RecordTypeUsualBehaviour.Value.toUpperCase();
                            var isContainer = this.recordInfoObject.RecordIsContainer.Value;
                            isContainer = isContainer || (behaviour == "FOLDER" || behaviour == "MATTER" || behaviour == "BOX" || behaviour == "SERIES");
                            this.isContainer(isContainer);
                            if (this.recordInfoObject.RecordContainer) {
                                this.isInsideAContainer(this.recordInfoObject.RecordContainer.Uri);
                            }
                            else {
                                this.isInsideAContainer(false);
                            }
                            this.showNewRecordMenu(false);
                            this.showNewPart(_.contains(me.recordInfoObject.EnabledCommandIds, "RecNewPart"));
                            if (this.showNewPart()) {
                                if (this.recordInfoObject.RecordLastPartRecord && this.recordInfoObject.RecordLastPartRecord.Uri != this.recordInfoObject.Uri) {
                                    if (!this.trimClient.getDatabase().currentUserPermissions().RecordAdminRestricted) {
                                        this.showNewPart(false);
                                    }
                                }
                            }
                            this.showNewVersion(_.contains(me.recordInfoObject.EnabledCommandIds, "RecNewVersion"));
                            if (this.isContainer() || this.showNewPart() || this.showNewVersion()) {
                                this.showNewRecordMenu(true);
                            }
                            this.isInFavorites(this.recordInfoObject.IsInFavorites);
                            this.documentStatus("");
                            if (this.recordInfoObject.RecordDocumentStatus && this.recordInfoObject.RecordDocumentStatus.Value) {
                                this.documentStatus(this.recordInfoObject.RecordDocumentStatus.Value);
                            }
                            this.canSetContainer(_.contains(me.recordInfoObject.EnabledCommandIds, "RecContainer"));
                            this.canRemoveFromContainer(_.contains(me.recordInfoObject.EnabledCommandIds, "RecContainer") && this.isInsideAContainer());
                            this.canSetOwner(_.contains(me.recordInfoObject.EnabledCommandIds, "RecOwnerLoc"));
                            this.canAddContact(_.contains(me.recordInfoObject.EnabledCommandIds, "RecAddContact"));
                            this.canSetAssignee(_.contains(me.recordInfoObject.EnabledCommandIds, "RecCurrentLoc"));
                            this.canShowContacts(_.contains(me.recordInfoObject.EnabledCommandIds, "ShowContacts"));
                            this.canRemoveContact(_.contains(me.recordInfoObject.EnabledCommandIds, "RecRemoveContact") && this.trimClient.getDatabase().currentUserPermissions().RemoveContacts);
                            this.canSetHome(_.contains(me.recordInfoObject.EnabledCommandIds, "RecHomeLoc"));
                            this.showLocationActions(this.canSetContainer() || this.canRemoveFromContainer() || this.canSetOwner() || this.canAddContact() || this.canSetAssignee());
                            this.canShowRequestForRec(_.contains(me.recordInfoObject.EnabledCommandIds, "RecShowRequests") && this.trimClient.getDatabase().currentUserPermissions().RequestWorker);
                            this.canRequestRetrieveTemp(_.contains(me.recordInfoObject.EnabledCommandIds, "RecAddRetrieveTemporaryRequest"));
                            this.canRequestRetrieveRecurrent(_.contains(me.recordInfoObject.EnabledCommandIds, "RecAddRetrieveRecurrentRequest"));
                            this.canRequestRetrievePerm(_.contains(me.recordInfoObject.EnabledCommandIds, "RecAddRetrievePermanentRequest"));
                            this.canRequestRetrievePickupTemp(_.contains(me.recordInfoObject.EnabledCommandIds, "RecAddPickupTemporaryRequest"));
                            this.canRequestRetrievePickupReturn(_.contains(me.recordInfoObject.EnabledCommandIds, "RecAddPickupPermanentRequest"));
                            this.updateDocumentReviewMenu(me.recordInfoObject);
                            this.showAdvancedRequestEnabledActions(this.canShowRequestForRec() || this.canRequestRetrieveTemp() || this.canRequestRetrievePerm() || this.canRequestRetrievePickupReturn() || this.canRequestRetrievePickupTemp() || this.canRequestRetrieveRecurrent());
                            this.canSetNotes(_.contains(me.recordInfoObject.EnabledCommandIds, "Notes"));
                            this.canSetGIS(_.contains(this.trimClient.getDatabase().activeFeatures(), "GeoLocations"));
                            this.canEditAdditionalFields(_.contains(me.recordInfoObject.EnabledCommandIds, "EditUserfields"));
                            this.canSetRelationship(_.contains(me.recordInfoObject.EnabledCommandIds, "RecRelate"));
                            this.showDetailsAction(this.canSetNotes() || this.canSetRelationship() || this.canEditAdditionalFields());
                            this.showLatestVersion(_.contains(me.recordInfoObject.EnabledCommandIds, "NavLatestVersion"));
                            this.showCurrentVersion(_.contains(me.recordInfoObject.EnabledCommandIds, "NavCurrentVersion"));
                            this.showAllVersions(_.contains(me.recordInfoObject.EnabledCommandIds, "NavAllVersions"));
                            this.showLatestPart(_.contains(me.recordInfoObject.EnabledCommandIds, "NavLatestPart"));
                            this.showAllParts(_.contains(me.recordInfoObject.EnabledCommandIds, "NavAllParts"));
                            this.showRealtedRecords(_.contains(me.recordInfoObject.EnabledCommandIds, "NavRelated"));
                            this.showAllRelatedRecords(_.contains(me.recordInfoObject.EnabledCommandIds, "NavAllRelated"));
                            this.showContainedRecords(_.contains(me.recordInfoObject.EnabledCommandIds, "NavContents"));
                            this.showContainedRecordsAlternative(_.contains(me.recordInfoObject.EnabledCommandIds, "NavContentsExt"));
                            this.showContainerRecords(_.contains(me.recordInfoObject.EnabledCommandIds, "NavContainer"));
                            this.showContainerRecordsAlternative(_.contains(me.recordInfoObject.EnabledCommandIds, "NavContainerExt"));
                            this.showLinkedDocuments(_.contains(me.recordInfoObject.EnabledCommandIds, "NavLinksTo"));
                            this.showDocumentLinkOf(_.contains(me.recordInfoObject.EnabledCommandIds, "NavLinkOf"));
                            this.showClientRecordsForContacts(_.contains(me.recordInfoObject.EnabledCommandIds, "NavClient"));
                            this.showRecordsWithSameContacts(_.contains(me.recordInfoObject.EnabledCommandIds, "NavSameContact"));
                            this.showClientRecords(_.contains(me.recordInfoObject.EnabledCommandIds, "NavClientRecord"));
                            this.showMatterRecords(_.contains(me.recordInfoObject.EnabledCommandIds, "NavMatterRecord"));
                            this.showRecordsInEmailConversation(_.contains(me.recordInfoObject.EnabledCommandIds, "NavEmailConversation"));
                            this.showSeriesRecord(_.contains(me.recordInfoObject.EnabledCommandIds, "NavSeries"));
                            this.showRecordsWithinSeries(_.contains(me.recordInfoObject.EnabledCommandIds, "NavSeriesContents"));
                            this.showAllRedactions(_.contains(me.recordInfoObject.EnabledCommandIds, "NavRedactionsOf"));
                            this.showRedactionsFrom(_.contains(me.recordInfoObject.EnabledCommandIds, "NavRedactedFrom"));
                            this.showDerivations(_.contains(me.recordInfoObject.EnabledCommandIds, "NavToDerivations"));
                            this.processClientMatterNavCommands();
                            this.showNavigationActions(this.showLatestVersion() ||
                                this.showCurrentVersion() ||
                                this.showAllVersions() ||
                                this.showLatestPart() ||
                                this.showAllParts() ||
                                this.showRealtedRecords() ||
                                this.showAllRelatedRecords() ||
                                this.showContainedRecords() ||
                                this.showContainedRecordsAlternative() ||
                                this.showContainerRecords() ||
                                this.showContainerRecordsAlternative() ||
                                this.showLinkedDocuments() ||
                                this.showDocumentLinkOf() ||
                                this.showClientRecordsForContacts() ||
                                this.showRecordsWithSameContacts() ||
                                this.showClientRecords() ||
                                this.showMatterRecords() ||
                                this.showMatterFolders() ||
                                this.showRecordsRelatedToMatter() ||
                                this.showRecordsInEmailConversation() ||
                                this.showSeriesRecord() ||
                                this.showRecordsWithinSeries() ||
                                this.showAllRedactions() ||
                                this.showRedactionsFrom() ||
                                this.showDerivations());
                            this.showWorkflows(_.contains(me.recordInfoObject.EnabledCommandIds, "RecShowWorkflow"));
                            this.showInitiateWorkflow(_.contains(me.recordInfoObject.EnabledCommandIds, "RecNewWorkflow"));
                            this.showActionsAndProcedures(_.contains(me.recordInfoObject.EnabledCommandIds, "RecBrowseActions"));
                            this.showAddActionAndProcedure(_.contains(me.recordInfoObject.EnabledCommandIds, "RecAttachAction"));
                            this.showCompleteLatestActionAndProcedure(_.contains(me.recordInfoObject.EnabledCommandIds, "RecCompleteCurrAct"));
                            this.showTodoItems(_.contains(me.recordInfoObject.EnabledCommandIds, ""));
                            this.showWorkflowActions(this.showWorkflows() ||
                                this.showInitiateWorkflow() ||
                                this.showActionsAndProcedures() ||
                                this.showAddActionAndProcedure() ||
                                this.showCompleteLatestActionAndProcedure() ||
                                this.showTodoItems());
                            this.showAddToFavorites(_.contains(me.recordInfoObject.EnabledCommandIds, "AddToFavorites"));
                            this.showAddToMyContainers(_.contains(me.recordInfoObject.EnabledCommandIds, "AddRecentFolder"));
                            this.showAddToRecentRecords(_.contains(me.recordInfoObject.EnabledCommandIds, "AddRecentDoc"));
                            this.showAddToWorkTray(_.contains(me.recordInfoObject.EnabledCommandIds, "AddToWorktray"));
                            this.showRemoveFromFavorites(_.contains(me.recordInfoObject.EnabledCommandIds, "RemoveFromFavorites"));
                            this.showRemoveFromMyContainers(_.contains(me.recordInfoObject.EnabledCommandIds, "RemoveRecentFolder"));
                            this.showRemoveFromRecentRecords(_.contains(me.recordInfoObject.EnabledCommandIds, "RemoveRecentDoc"));
                            this.showRemoveFromWorktray(_.contains(me.recordInfoObject.EnabledCommandIds, "RemoveFromWorktray"));
                            this.showAddToCheckinStyle(_.contains(me.recordInfoObject.EnabledCommandIds, "AddToMyCheckinStyles"));
                            if (_.contains(this.trimClient.getDatabase().activeFeatures(), "Labels")) {
                                this.showAddToUserLabel(true);
                                this.showRemoveFromUserLabels(true);
                            }
                            this.showAddRemoveActions(this.showAddToFavorites() || this.showAddToMyContainers() || this.showAddToRecentRecords() || this.showAddToWorkTray() || this.showRemoveFromFavorites() || this.showRemoveFromMyContainers() ||
                                this.showRemoveFromRecentRecords() || this.showRemoveFromWorktray());
                            this.canSetRecordAsFinal(_.contains(me.recordInfoObject.EnabledCommandIds, "RecDocFinal"));
                            var prmCanViewAuditEvents = this.trimClient.getDatabase().currentUserPermissions()['CanViewAuditEvents'];
                            this.canSeeAuditEvents(prmCanViewAuditEvents);
                            this.canChangeSecurity(_.contains(me.recordInfoObject.EnabledCommandIds, "Security") && this.trimClient.getDatabase().currentUserPermissions().ModifyRecordSecurity);
                            this.canRejectFromConsignment(_.contains(me.recordInfoObject.EnabledCommandIds, "RecRejectFromConsignment"));
                            this.canMakeRecordInactive(_.contains(me.recordInfoObject.EnabledCommandIds, "RecMakeInactive"));
                            this.canMakeRecordActive(_.contains(me.recordInfoObject.EnabledCommandIds, "RecMakeActive"));
                            this.shareUsingObjectiveConnectEnabled(_.contains(me.recordInfoObject.EnabledCommandIds, "Share"));
                            this.showMoreActions(true);
                        };
                        RecordsDetailComponent.prototype.processClientMatterNavCommands = function () {
                            var rty = this.recordInfoObject.RecordRecordType;
                            var rtyBehaviour = rty.RecordTypeUsualBehaviour.Value;
                            if (rtyBehaviour === 'Client') {
                                this.isClientBehaviour(true);
                            }
                            if (rtyBehaviour === 'Matter') {
                                this.isMatterBehaviour(true);
                                this.showMatterFolders(true);
                                this.showRecordsRelatedToMatter(true);
                            }
                            if (rtyBehaviour !== 'Client' &&
                                rtyBehaviour !== 'Matter') {
                                if (this.recordInfoObject.EnabledCommandIds) {
                                    var enabledCommandIds = this.recordInfoObject.EnabledCommandIds;
                                    for (var i = 0; i < enabledCommandIds.length; i++) {
                                        if (enabledCommandIds[i] == 'NavClientRecord') {
                                            this.showNavClientForMatterFolder(true);
                                        }
                                        if (enabledCommandIds[i] == 'NavMatterRecord') {
                                            this.showNavMatterRecords(true);
                                        }
                                    }
                                }
                            }
                        };
                        RecordsDetailComponent.prototype.resetValues = function () {
                            this.isClientBehaviour(false);
                            this.isMatterBehaviour(false);
                            this.showMatterFolders(false);
                            this.showNavMatterRecords(false);
                            this.showNavClientRecords(false);
                            this.showNavClientForMatterFolder(false);
                        };
                        RecordsDetailComponent.prototype.handleUpdateDocumentReviewMenu = function (infoObject, task) {
                            var me = this;
                            if (!this.recordInfoObject) {
                                this.recordInfoObject = infoObject;
                            }
                            else {
                                if (task) {
                                    _.each(task.updatedProperties, function (updatedProperty) {
                                        if (infoObject[updatedProperty]) {
                                            me.recordInfoObject[updatedProperty] = infoObject[updatedProperty];
                                        }
                                    });
                                }
                            }
                            me.updateDocumentReviewMenu(infoObject);
                        };
                        RecordsDetailComponent.prototype.updateDocumentReviewMenu = function (infoObject) {
                            var me = this;
                            me.showStartReview(_.contains(infoObject.EnabledCommandIds, "StartReview"));
                            me.showStartAuthorization(_.contains(infoObject.EnabledCommandIds, "StartAuthorization"));
                            me.showViewComments(_.contains(infoObject.EnabledCommandIds, "ViewComments"));
                            me.showReviewDocument(_.contains(infoObject.EnabledCommandIds, "ReviewDocument"));
                            me.showAuthorizeDocument(_.contains(infoObject.EnabledCommandIds, "AuthorizeDocument"));
                            me.showFinalizeDocument(_.contains(infoObject.EnabledCommandIds, "FinalizeDocument"));
                            me.showRestartDocumentReview(_.contains(infoObject.EnabledCommandIds, "RestartDocumentReview"));
                            if (!me.showStartReview() && !me.showStartAuthorization() && !me.showReviewDocument() && !me.showAuthorizeDocument() &&
                                !me.showFinalizeDocument() && !me.showViewComments() && !me.showRestartDocumentReview()) {
                                me.showDocumentReview(false);
                            }
                            else {
                                me.showDocumentReview(true);
                            }
                        };
                        RecordsDetailComponent.spEditObj = RecordsDetailComponent.CreateSPEditObj();
                        RecordsDetailComponent.isWebDavSupported = RecordsDetailComponent.spEditObj != null;
                        RecordsDetailComponent.isWOPISupported = typeof WOPIConfig != "undefined" && WOPIConfig.enabled;
                        return RecordsDetailComponent;
                    }());
                    RecordDetails.RecordsDetailComponent = RecordsDetailComponent;
                })(RecordDetails = Panels.RecordDetails || (Panels.RecordDetails = {}));
            })(Panels = App.Panels || (App.Panels = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Panels;
            (function (Panels) {
                var RecordDetails;
                (function (RecordDetails) {
                    "use strict";
                    var RecordViewOverlayPanel = (function (_super) {
                        __extends(RecordViewOverlayPanel, _super);
                        function RecordViewOverlayPanel(trimClient) {
                            var _this = this;
                            _super.call(this);
                            this.isLoading = ko.observable(false);
                            this.isUrlVisible = ko.observable(false);
                            this.trimClient = trimClient;
                            this.uri = ko.observable("-1");
                            var me = this;
                            this.isSharePoint = ko.observable(false);
                            this.recordHtml = ko.observable("");
                            this.searchHighlightString = ko.observable("");
                            this.downloadLink = ko.observable("");
                            this.canCheckOut = ko.observable(false);
                            this.togglehighlight = ko.observable(true);
                            this.isExpanded = ko.observable(false);
                            this.isAniOSDevice = ko.observable(false);
                            this.actionResult = ko.observable("");
                            this.actionResultDisplay = ko.observable(false);
                            this.templateName('templates/Record/RecordViewOverlayContainer');
                            this.primaryPanel.visible(false);
                            var toggleVisibleForRevision = function (event) {
                                var revisionBtn = $('#showRevisions');
                                var renditionBtn = $('#showRenditions');
                                _this.objectPanel.cssClass('as-spa-content-additional');
                                revisionBtn.removeClass('btnActive');
                                renditionBtn.removeClass('btnActive');
                            };
                            this.objectPanel = new HP.HPTRIM.App.Panels.Plugins.ObjectPropertiesPanel(trimClient, toggleVisibleForRevision);
                            this.objectPanel.propertyOrFieldListView.showingRevisions(true);
                            this.objectPanel.visible(false);
                            this.revisionPanel = new HP.HPTRIM.App.Panels.ChildList.RevisionChildListPanel(trimClient);
                            this.objectPanel.panels.push(this.revisionPanel);
                            this.initialiseAdditionalPanel(this.objectPanel);
                            this.revisionPanel.selectedChildUri.subscribe(function (newValue) {
                                if (newValue && _this.revisionPanel.revision()) {
                                    _this.objectPanel.propertyOrFieldListView.revisionActionsEnabled(true);
                                    _this.objectPanel.propertyOrFieldListView.deleteEnabled(!_this.revisionPanel.selectedChildIsPreserved());
                                }
                                else {
                                    _this.objectPanel.propertyOrFieldListView.revisionActionsEnabled(false);
                                    _this.objectPanel.propertyOrFieldListView.deleteEnabled(false);
                                }
                            });
                            this.revisionPanel.selectedChildIsPreserved.subscribe(function (newValue) {
                                _this.objectPanel.propertyOrFieldListView.deleteEnabled(!newValue);
                            });
                            this.objectPanel.propertyOrFieldListView.promoteRevision = function () {
                                _this.revisionPanel.promoteRevision();
                            };
                            this.objectPanel.propertyOrFieldListView.deleteRevision = function () {
                                _this.revisionPanel.deleteRevision();
                            };
                            this.objectPanel.propertyOrFieldListView.showCurrentDocument = function () {
                                _this.revisionPanel.showCurrentRevisionDocument();
                            };
                            this.revisionPanel.updateHtml = function (html, realPath, childUri) {
                                var downloadPath = "";
                                if (childUri != undefined && childUri != "") {
                                    realPath += "RecordRevision/" + childUri + "/";
                                    0;
                                    downloadPath = realPath.replace(/ChildHtml/g, "Children");
                                }
                                else {
                                    downloadPath = realPath + "/Document";
                                }
                                var realHtml = html.replace(/=\"resource\//g, "=\"" + realPath + "resource/");
                                realHtml = realHtml.replace(/alt=''/g, "");
                                realHtml = realHtml.replace(/alt!=/g, "");
                                realHtml = realHtml.replace(/<img /g, "<img alt='" + HP.HPTRIM.Messages.web_noImage + "'");
                                var searchStringForHighlight = trimClient.contentSearchHighlightString;
                                if (searchStringForHighlight.length) {
                                    var currentHTML = realHtml;
                                    var highlightedContent = HP.HPTRIM.Utils.TrimHelper.getHighlightedContent(currentHTML, searchStringForHighlight);
                                    _this.recordHtml(highlightedContent);
                                }
                                else {
                                    _this.recordHtml(realHtml);
                                }
                                _this.downloadLink(downloadPath);
                                _this.isLoading(false);
                            };
                            this.revisionPanel.updateRenditionHtml = function (html, uri, realPath, childUri) {
                                var downloadPath = realPath;
                                var realHtml = html.replace(/=\"resource\//g, "=\"" + realPath + "resource/");
                                realHtml = realHtml.replace(/alt=''/g, "");
                                realHtml = realHtml.replace(/alt!=/g, "");
                                realHtml = realHtml.replace(/<img /g, "<img alt='" + HP.HPTRIM.Messages.web_noImage + "'");
                                _this.recordHtml(realHtml);
                                _this.downloadLink(downloadPath);
                                _this.isLoading(false);
                                _this.objectPanel.propertyOrFieldListView.revisionActionsEnabled(false);
                                _this.objectPanel.propertyOrFieldListView.deleteEnabled(false);
                            };
                            this.revisionPanel.resetloading = function () {
                                _this.recordHtml(' ');
                                _this.isLoading(true);
                            };
                            this.cssClass(this.cssClass() + " " + "margin-5px padding-5px");
                            this.mainPanel.panels([new HP.HPTRIM.Framework.Components.Layouts.Panel('templates/Record/RecordViewOverlayPanel')]);
                            var isIpad = navigator.userAgent.match(/iPad/i) != null;
                            var isIphone = navigator.userAgent.match(/iPhone/i) != null;
                            var isIpod = navigator.userAgent.match(/iPod/i) != null;
                            if (isIpad || isIphone || isIpad) {
                                me.isAniOSDevice(true);
                            }
                            else {
                                me.isAniOSDevice(false);
                            }
                            this.returnAction = function () {
                            };
                            this.defaultReturnAction = function () {
                            };
                            this.visible.subscribe(function (visible) {
                            });
                            this.checkoutCallback = function () {
                            };
                            this.populate = function () {
                            };
                            this.toggleExpanded = function () {
                                if (_this.isExpanded()) {
                                    _this.isExpanded(false);
                                }
                                else {
                                    _this.isExpanded(true);
                                }
                            };
                        }
                        RecordViewOverlayPanel.prototype.getClassName = function () {
                            return RecordViewOverlayPanel.CLASS_NAME;
                        };
                        RecordViewOverlayPanel.prototype.formatLink = function (link) {
                            var getVirtualDirInPath = false;
                            var basePath = HP.HPTRIM.Utils.TrimHelper.getBaseUrl(getVirtualDirInPath);
                            var returnValue;
                            if (!this.isSharePoint())
                                returnValue = HP.HPTRIM.Framework.Components.Shared.String.format("{0}{1}", [basePath, link]);
                            else
                                returnValue = HP.HPTRIM.Framework.Components.Shared.String.format("{0}", [link]);
                            return returnValue.replace('?', '');
                        };
                        RecordViewOverlayPanel.prototype.reset = function () {
                            var loadingString = "<i>" + HP.HPTRIM.Messages.web_loading + "... </i>";
                            this.recordHtml(loadingString);
                        };
                        RecordViewOverlayPanel.prototype.copyToClipboard = function () {
                            $('#URL_Link_View').focus().select();
                            if (document.execCommand) {
                                document.execCommand('copy');
                            }
                            return true;
                        };
                        RecordViewOverlayPanel.prototype.toggleURLView = function () {
                            if (this.isUrlVisible()) {
                                this.isUrlVisible(false);
                            }
                            else {
                                this.isUrlVisible(true);
                                $('#URL_Link_View').focus().select();
                                if (document.execCommand) {
                                    document.execCommand('copy');
                                }
                            }
                        };
                        RecordViewOverlayPanel.CLASS_NAME = "RecordViewOverlayPanel";
                        return RecordViewOverlayPanel;
                    }(HP.HPTRIM.Framework.Components.Layouts.SinglePage.ContentPanel));
                    RecordDetails.RecordViewOverlayPanel = RecordViewOverlayPanel;
                })(RecordDetails = Panels.RecordDetails || (Panels.RecordDetails = {}));
            })(Panels = App.Panels || (App.Panels = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Panels;
            (function (Panels) {
                var RecordDetails;
                (function (RecordDetails) {
                    "use strict";
                    var RecordViewRenditionOverlayPanel = (function (_super) {
                        __extends(RecordViewRenditionOverlayPanel, _super);
                        function RecordViewRenditionOverlayPanel(trimClient) {
                            var _this = this;
                            _super.call(this);
                            this.isLoading = ko.observable(false);
                            this.isUrlVisible = ko.observable(false);
                            this.trimClient = trimClient;
                            this.uri = ko.observable("-1");
                            var me = this;
                            this.isSharePoint = ko.observable(false);
                            this.recordHtml = ko.observable("");
                            this.downloadLink = ko.observable("");
                            this.canCheckOut = ko.observable(false);
                            this.isExpanded = ko.observable(false);
                            this.isAniOSDevice = ko.observable(false);
                            this.actionResult = ko.observable("");
                            this.actionResultDisplay = ko.observable(false);
                            this.templateName('templates/Record/RecordViewRenditionOverlayContainer');
                            this.primaryPanel.visible(false);
                            var toggleVisibleForRendition = function (event) {
                                var len = $('.as-spa-content-additional').length;
                                var idx = 0;
                                if (len > 1) {
                                    idx = 1;
                                }
                                var renditionPropPanel = $('.as-spa-content-additional')[idx];
                                $(renditionPropPanel).toggleClass('active');
                            };
                            this.objectPanel = new HP.HPTRIM.App.Panels.Plugins.RenditionObjectPropertiesPanel(trimClient, toggleVisibleForRendition);
                            this.objectPanel.propertiesRenditionListView.showingRenditions(true);
                            this.objectPanel.visible(false);
                            this.renditionPanel = new HP.HPTRIM.App.Panels.ChildList.RenditionChildListPanel(trimClient);
                            this.objectPanel.panels.push(this.renditionPanel);
                            this.initialiseAdditionalPanel(this.objectPanel);
                            this.objectPanel.propertiesRenditionListView.showCurrentDocument = function () {
                                _this.renditionPanel.showCurrentDocument();
                            };
                            this.renditionPanel.updateHtml = function (html, uri, realPath, childUri) {
                                var downloadPath = realPath + uri + "/Children/RecordRendition/" + childUri;
                                var realHtml = html.replace(/=\"resource\//g, "=\"" + realPath + "resource/");
                                realHtml = realHtml.replace(/alt=''/g, "");
                                realHtml = realHtml.replace(/alt!=/g, "");
                                realHtml = realHtml.replace(/<img /g, "<img alt='" + HP.HPTRIM.Messages.web_noImage + "'");
                                _this.recordHtml(realHtml);
                                _this.downloadLink(downloadPath);
                                _this.isLoading(false);
                            };
                            this.renditionPanel.resetloading = function () {
                                _this.recordHtml(' ');
                                _this.isLoading(true);
                            };
                            this.cssClass(this.cssClass() + " " + "margin-5px padding-5px");
                            this.mainPanel.panels([new HP.HPTRIM.Framework.Components.Layouts.Panel('templates/Record/RecordRenditionViewOverlayPanel')]);
                            var isIpad = navigator.userAgent.match(/iPad/i) != null;
                            var isIphone = navigator.userAgent.match(/iPhone/i) != null;
                            var isIpod = navigator.userAgent.match(/iPod/i) != null;
                            if (isIpad || isIphone || isIpad) {
                                me.isAniOSDevice(true);
                            }
                            else {
                                me.isAniOSDevice(false);
                            }
                            this.returnAction = function () {
                            };
                            this.defaultReturnAction = function () {
                            };
                            this.visible.subscribe(function (visible) {
                            });
                            this.checkoutCallback = function () {
                            };
                            this.populate = function () {
                            };
                            this.toggleExpanded = function () {
                                if (_this.isExpanded()) {
                                    _this.isExpanded(false);
                                }
                                else {
                                    _this.isExpanded(true);
                                }
                            };
                        }
                        RecordViewRenditionOverlayPanel.prototype.getClassName = function () {
                            return RecordDetails.RecordViewOverlayPanel.CLASS_NAME;
                        };
                        RecordViewRenditionOverlayPanel.prototype.formatLink = function (link) {
                            var getVirtualDirInPath = false;
                            var basePath = HP.HPTRIM.Utils.TrimHelper.getBaseUrl(getVirtualDirInPath);
                            var returnValue;
                            if (!this.isSharePoint())
                                returnValue = HP.HPTRIM.Framework.Components.Shared.String.format("{0}{1}", [basePath, link]);
                            else
                                returnValue = HP.HPTRIM.Framework.Components.Shared.String.format("{0}", [link]);
                            return returnValue.replace('?', '');
                        };
                        RecordViewRenditionOverlayPanel.prototype.reset = function () {
                            var loadingString = "<i>" + HP.HPTRIM.Messages.web_loading + "... </i>";
                            this.recordHtml(loadingString);
                        };
                        RecordViewRenditionOverlayPanel.prototype.copyToClipboard = function () {
                            $('#URL_Link_View').focus().select();
                            if (document.execCommand) {
                                document.execCommand('copy');
                            }
                            return true;
                        };
                        RecordViewRenditionOverlayPanel.prototype.toggleURLView = function () {
                            if (this.isUrlVisible()) {
                                this.isUrlVisible(false);
                            }
                            else {
                                this.isUrlVisible(true);
                                $('#URL_Link_View').focus().select();
                                if (document.execCommand) {
                                    document.execCommand('copy');
                                }
                            }
                        };
                        RecordViewRenditionOverlayPanel.CLASS_NAME = "RecordViewRenditionOverlayPanel";
                        return RecordViewRenditionOverlayPanel;
                    }(HP.HPTRIM.Framework.Components.Layouts.SinglePage.ContentPanel));
                    RecordDetails.RecordViewRenditionOverlayPanel = RecordViewRenditionOverlayPanel;
                })(RecordDetails = Panels.RecordDetails || (Panels.RecordDetails = {}));
            })(Panels = App.Panels || (App.Panels = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Panels;
            (function (Panels) {
                var SearchEditor;
                (function (SearchEditor) {
                    (function (SearchClausesView) {
                        SearchClausesView[SearchClausesView["ByCategory"] = 0] = "ByCategory";
                        SearchClausesView[SearchClausesView["ByAlphabetical"] = 1] = "ByAlphabetical";
                        SearchClausesView[SearchClausesView["ByFormat"] = 2] = "ByFormat";
                    })(SearchEditor.SearchClausesView || (SearchEditor.SearchClausesView = {}));
                    var SearchClausesView = SearchEditor.SearchClausesView;
                })(SearchEditor = Panels.SearchEditor || (Panels.SearchEditor = {}));
            })(Panels = App.Panels || (App.Panels = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Panels;
            (function (Panels) {
                var SearchEditor;
                (function (SearchEditor) {
                    var SearchEditorPanel = (function (_super) {
                        __extends(SearchEditorPanel, _super);
                        function SearchEditorPanel(trimClient, objectType, mainObject, searchOptionFilterPanel) {
                            var _this = this;
                            _super.call(this, "templates/Search/SearchEditor");
                            this.showFilter = ko.observable(false);
                            this.showRecordTypeFilter = ko.observable(false);
                            this.showSort = ko.observable(true);
                            this.showOption = ko.observable(true);
                            this.showSearchButton = ko.observable(false);
                            this.title = ko.observable("");
                            this.dismiss = function () { };
                            this.purpose = ko.observable("");
                            this.searchTabTtitle = ko.observable(HPTRIM.Messages.web_searchBuildSearchQuery);
                            this.filterTabTtitle = ko.observable(HPTRIM.Messages.web_filter);
                            this.recordTypesTabTtitle = ko.observable(HPTRIM.BaseObjectTypes.RecordType.CaptionPlural);
                            this.sortTabTtitle = ko.observable(HPTRIM.Messages.web_sort);
                            this.optionTabTitle = ko.observable(HPTRIM.Messages.web_options);
                            this.childPanel = ko.observable(null);
                            this.isChild = ko.observable(false);
                            var me = this;
                            this.searchBuilderPanel = new SearchEditor.SearchBuilderPanel(trimClient);
                            this.searchBuilderPanel.baseObjectType(objectType);
                            this.searchBuilderPanel.searchBuilderPartList.subscribe(function (newValue) {
                                if (newValue.length > 0) {
                                    _this.showSearchButton(true);
                                }
                                else {
                                    _this.showSearchButton(false);
                                }
                            });
                            this.title(objectType.Caption + " " + HPTRIM.Messages.web_search);
                            this.clauseFinder = new SearchEditor.SearchClauseFinderPanel(trimClient, objectType);
                            this.clauseFinder.onClauseSelect = function (treeNode) {
                                if (!treeNode) {
                                    return;
                                }
                                if (treeNode.searchClause) {
                                    var searchClause = treeNode.searchClause;
                                    me.searchBuilderPanel.onSearchClauseSelect(searchClause);
                                }
                            };
                            this.showFilter(false);
                            this.showRecordTypeFilter(false);
                            this.showOption(false);
                            var rawFilters = [];
                            var rawOptionFilters = [];
                            if (objectType == HPTRIM.BaseObjectTypes.Record) {
                                this.showFilter(true);
                                this.showRecordTypeFilter(true);
                                this.showOption(true);
                                rawFilters = Panels.RecordDetails.RecordInformation.getFilters();
                                rawOptionFilters = Panels.RecordDetails.RecordInformation.getSearchOptionFilters(trimClient, objectType);
                            }
                            else if (objectType == HPTRIM.BaseObjectTypes.Workflow) {
                                this.showFilter(true);
                                rawFilters = Panels.Workflow.WorkflowInformation.Filters;
                            }
                            else if (objectType == HPTRIM.BaseObjectTypes.Activity) {
                                this.showFilter(true);
                                this.showOption(true);
                                rawFilters = Panels.Workflow.AcitivyInformation.Filters;
                                rawOptionFilters = Panels.RecordDetails.RecordInformation.getSearchOptionFilters(trimClient, objectType);
                            }
                            else if (mainObject && mainObject.hasFilters) {
                                this.showFilter(true);
                                rawFilters = mainObject.rawFilters;
                            }
                            if (this.showFilter()) {
                                this.searchFilterPanel = new SearchEditor.SearchFilterPanel(trimClient, objectType, rawFilters);
                            }
                            if (this.showRecordTypeFilter()) {
                                this.searchRecordTypeFilterPanel = new SearchEditor.SearchRecordTypeFilterPanel(trimClient);
                            }
                            this.searchSortPanel = new SearchEditor.SearchSortPanel(trimClient, objectType);
                            if (searchOptionFilterPanel != undefined) {
                                this.searchOptionFilterPanel = searchOptionFilterPanel;
                            }
                            else {
                                this.searchOptionFilterPanel = new SearchEditor.SearchOptionFilterPanel(trimClient, objectType, rawOptionFilters);
                            }
                        }
                        SearchEditorPanel.prototype.setIsChild = function () {
                            this.isChild(true);
                            this.showFilter(false);
                            this.showSort(false);
                        };
                        SearchEditorPanel.prototype.initialiseView = function () {
                            this.clauseFinder.updateList();
                        };
                        SearchEditorPanel.prototype.onOk = function () {
                            var _this = this;
                            var me = this;
                            var query = me.searchBuilderPanel.getQuery();
                            if (!query && !query.trim()) {
                                this.dismiss();
                                return;
                            }
                            var doSearch = function () {
                                if (me.searchBuilderPanel.currentPart) {
                                    me.searchBuilderPanel.finishUpdating();
                                }
                                if (me.searchBuilderPanel.callback) {
                                    me.searchBuilderPanel.callback(me.searchBuilderPanel.getQuery(), me.searchBuilderPanel.filterString, me.searchSortPanel.getSortString(), me.purpose());
                                }
                                else {
                                    var query = me.searchBuilderPanel.getQuery();
                                    var uri = "";
                                    var objectType = me.searchBuilderPanel.baseObjectType();
                                    var filterString = me.searchBuilderPanel.filterString;
                                    var sortString = me.searchSortPanel.getSortString();
                                    var searchOptionString = me.searchOptionFilterPanel.getOptionString();
                                    me.searchBuilderPanel.executeSearch(query, uri, objectType, filterString, sortString, searchOptionString);
                                }
                            };
                            var handleFilters = function () {
                                var errorCallback = function (error) { };
                                if (me.showFilter()) {
                                    _this.searchFilterPanel.callback = function (filter) {
                                        me.searchBuilderPanel.filterString = filter;
                                        doSearch();
                                    };
                                    var filterString = _this.searchFilterPanel.getFilterString();
                                    if (me.showRecordTypeFilter()) {
                                        var recordFilterString = me.searchRecordTypeFilterPanel.getFilterString();
                                        if (recordFilterString) {
                                            filterString = filterString + " " + recordFilterString;
                                        }
                                    }
                                    if (_this.searchFilterPanel.saveFiltersAsDefault() || (me.showRecordTypeFilter() && me.searchRecordTypeFilterPanel.saveFiltersAsDefault())) {
                                        if ((me.showRecordTypeFilter() && me.searchRecordTypeFilterPanel.saveFiltersAsDefault())) {
                                            var recordTypeFilter = me.searchRecordTypeFilterPanel.getRawFilter();
                                            me.searchFilterPanel.saveSearchFilters(function () { me.searchFilterPanel.callback(filterString); }, errorCallback, recordTypeFilter);
                                        }
                                        else {
                                            me.searchFilterPanel.saveSearchFilters(function () { me.searchFilterPanel.callback(filterString); }, errorCallback);
                                        }
                                    }
                                    else {
                                        me.searchFilterPanel.callback(filterString);
                                    }
                                }
                                else {
                                    doSearch();
                                }
                            };
                            if (this.searchSortPanel.saveSortsAsDefault()) {
                                me.searchSortPanel.saveSearchSort(function () { handleFilters(); }, function (error) { });
                            }
                            else {
                                handleFilters();
                            }
                            var filterString = this.searchOptionFilterPanel.getOptionString();
                            if (this.searchOptionFilterPanel.saveFiltersAsDefault()) {
                                me.searchOptionFilterPanel.saveSearchOptionsFilters(function () { me.searchOptionFilterPanel.callback(filterString); me.dismiss(); }, function (error) { });
                            }
                            else {
                                me.searchOptionFilterPanel.callback(filterString);
                                me.dismiss();
                            }
                        };
                        SearchEditorPanel.prototype.cancel = function () {
                            this.dismiss();
                        };
                        return SearchEditorPanel;
                    }(HP.HPTRIM.Framework.Components.Layouts.Panel));
                    SearchEditor.SearchEditorPanel = SearchEditorPanel;
                })(SearchEditor = Panels.SearchEditor || (Panels.SearchEditor = {}));
            })(Panels = App.Panels || (App.Panels = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Panels;
            (function (Panels) {
                var ActivityDetails;
                (function (ActivityDetails) {
                    "use strict";
                    var ActivityDetailComponent = (function () {
                        function ActivityDetailComponent(trimClient) {
                            var _this = this;
                            this.hasWorkflowModifyPrm = ko.observable(false);
                            this.activityNotes = ko.observable("");
                            this.showResults = function () { };
                            this.showDocuments = function () { };
                            this.showRecords = function () { };
                            this.showNotes = function () { };
                            this.addToNotes = function () { };
                            this.toggleNotes = function () { };
                            this.toggleResults = function () { };
                            this.completeActivity = function () { };
                            this.uncompleteActivity = function () { };
                            this.modifyActivity = function (uri) { };
                            this.canReassign = ko.observable(true);
                            this.canComplete = ko.observable(true);
                            this.canUnComplete = ko.observable(true);
                            this.trimClient = trimClient;
                            this.uri = "";
                            this.detailsTemplate = 'templates/Activity/ActivityDetailComponent';
                            this.details = ko.observable(false);
                            this.loading = ko.observable(false);
                            this.detailsReady = ko.observable(false);
                            this.actionResultDisplay = ko.observable(false);
                            this.activityReadyForCompletion = ko.observable(false);
                            this.activityHasSubActivities = ko.observable(false);
                            this.activityCompleted = ko.observable(false);
                            this.mandatoryPlaceholers = ko.observable(0);
                            this.notMandatoryPlaceholers = ko.observable(0);
                            this.reviewDocuments = ko.observable(0);
                            this.firstMandatoryPlaceholderName = "";
                            this.actionResult = ko.observable("");
                            this.assigneeName = ko.observable("");
                            this.currentAssignee = new HPTRIM.TrimBaseObject(HPTRIM.BaseObjectTypes.Location, "0", "");
                            this.supervisorName = ko.observable("");
                            this.documentUris = {};
                            this.currentUserName = ko.observable(this.trimClient.getDatabase().currentLoggedInUser().displayValue);
                            this.activityResultsComponent = new ActivityDetails.ActivityResultsComponent(trimClient, this.uri);
                            this.activityResultsComponent.resultsSavedCallback = function () {
                                me.actionResult(HPTRIM.Messages.web_activityResultsSaved);
                                me.actionResultDisplay(true);
                                me.doFadeInOutOnInformationalText();
                            };
                            this.activityNotesComponent = new ActivityDetails.ActivityNotesComponent(trimClient, (this.uri));
                            this.activityNotesComponent.save = function (data, refresh) {
                                _this.save(data, refresh);
                            };
                            this.doFadeInOutOnInformationalText = function () {
                                $("#activityInformationLabel").show("drop", 500);
                                $("#activityInformationLabel").delay(3000).hide("drop", "down", 500);
                            };
                            this.doFadeInOutOnInformationalTextWithAddedDelay = function () {
                                $("#activityInformationLabel").show("drop", 500);
                                $("#activityInformationLabel").delay(3000).hide("drop", "down", 500).delay(1500);
                            };
                            var me = this;
                            this.addToNotes = this.activityNotesComponent.addToNotes;
                            this.toggleNotes = function () {
                                $('#notes').toggleClass('hide').toggleClass('show');
                                if ($('#notes').hasClass('show')) {
                                    document.body.scrollTop = $('#addToNotesField').offset().top;
                                    $('#addToNotesField').focus();
                                }
                                ;
                            };
                            this.toggleResults = function () {
                                $('#results').toggleClass('hide');
                            };
                            this.modifyActivityClick = function () {
                                me.modifyActivity(me.uri);
                            };
                            this.reassignActivityClick = function () {
                                var callback = function (infoObject) {
                                    me.useCachedResult(infoObject);
                                };
                                me.doReassignActivity(me.uri, me.currentAssignee, callback);
                            };
                        }
                        ActivityDetailComponent.prototype.hasResults = function () {
                            return this.activityResultsComponent.hasResults();
                        };
                        ActivityDetailComponent.prototype.save = function (data, refresh) {
                            var me = this;
                            var saveRequest = new HPTRIM.TrimObjectSave(me.trimClient, HPTRIM.BaseObjectTypes.Activity, parseInt(me.uri));
                            saveRequest.doRequestEx(data).done(function (response) {
                                var result = response.Results[0];
                                me.useCachedResult(result);
                                if (refresh) {
                                    me.refresh();
                                }
                            }).fail(function (error) {
                                var message = HP.HPTRIM.Messages.web_couldNotSaveActivity;
                                if (error.ResponseStatus.Message) {
                                    message = error.ResponseStatus.Message;
                                }
                                me.errorHandler(error.message);
                                me.refresh();
                            });
                            if (refresh) {
                                me.refresh();
                            }
                        };
                        ActivityDetailComponent.prototype.updateModel = function (newUri, actionResult) {
                            this.uri = newUri;
                            this.actionResult("");
                            this.actionResultDisplay(false);
                            if (actionResult) {
                                this.actionResult(actionResult);
                                this.actionResultDisplay(true);
                            }
                            var me = this;
                            if (newUri == "") {
                                me.details(false);
                                me.detailsReady(false);
                            }
                            if (newUri != "") {
                                me.loading(true);
                                var properties = ActivityDetailComponent.PROPERTY_LIST + ",enabledCommandIds";
                                var commandIds = { "cidcid_SelectedIds": "ReassignActivity" };
                                var activityInfoRequest = new HPTRIM.TrimBaseObjectRequest(me.trimClient, new HPTRIM.TrimBaseObject(HPTRIM.BaseObjectTypes.Activity, newUri, ""), properties, commandIds);
                                activityInfoRequest.doRequest().done(function (result) {
                                    me.loading(false);
                                    me.details(true);
                                    var activityInfo = result.Results[0];
                                    me.activityInfoObject = activityInfo;
                                    me.renderActivityDetails(true);
                                }).fail(function (errorResponse) {
                                    var errorMsg = HP.HPTRIM.Messages.web_unableToConnectToWebServices;
                                    if (errorResponse.ResponseStatus && errorResponse.ResponseStatus.Message) {
                                        errorMsg = errorResponse.ResponseStatus.Message;
                                    }
                                    if (errorResponse.responseJSON && errorResponse.responseJSON.ResponseStatus && errorResponse.responseJSON.ResponseStatus.Message) {
                                        errorMsg = errorResponse.responseJSON.ResponseStatus.Message;
                                    }
                                    me.errorHandler(errorMsg);
                                    me.loading(false);
                                    me.detailsReady(false);
                                    me.details(false);
                                });
                            }
                        };
                        ActivityDetailComponent.prototype.refresh = function (actionResult) {
                            this.updateModel(this.uri, actionResult);
                        };
                        ActivityDetailComponent.prototype.useCachedResult = function (result) {
                            if (result.ActivityName && result.ActivityName.Value != "") {
                                this.activityInfoObject.name = result.ActivityName.Value;
                                this.updateOwningItemList(this.activityInfoObject.Uri, this.activityInfoObject.name);
                            }
                            if (result.ActivityAssignedTo) {
                                this.activityInfoObject.ActivityAssignedTo = result.ActivityAssignedTo;
                                this.updateOwningItemListAssignee(this.activityInfoObject.Uri, result.ActivityAssignedTo);
                            }
                            else {
                                this.activityInfoObject.ActivityAssignedTo = "";
                            }
                            if (result.ActivitySupervisor) {
                                this.activityInfoObject.ActivitySupervisor = result.ActivitySupervisor;
                            }
                            if (result.ActivityIsReadyToStart) {
                                this.activityInfoObject.ActivityIsReadyToStart = result.ActivityIsReadyToStart;
                            }
                            if (result.ActivityIsComplete) {
                                this.activityInfoObject.ActivityIsComplete = result.ActivityIsComplete;
                            }
                            if (result.ActivityNotes) {
                                this.activityNotesComponent.setNotes(result.ActivityNotes.Value);
                            }
                            this.renderActivityDetails(true);
                        };
                        ActivityDetailComponent.prototype.renderActivityDetails = function (updateChildObjects) {
                            var db = this.trimClient.getDatabase();
                            var prm = db.currentUserPermissions();
                            this.hasWorkflowModifyPrm(prm.WorkflowModify);
                            this.canReassign(false);
                            if (this.activityInfoObject.EnabledCommandIds && _.contains(this.activityInfoObject.EnabledCommandIds, "ReassignActivity")) {
                                this.canReassign(true);
                            }
                            this.canComplete(false);
                            if (this.activityInfoObject.EnabledCommandIds && _.contains(this.activityInfoObject.EnabledCommandIds, "CompleteActivity")) {
                                this.canComplete(true);
                            }
                            this.canUnComplete(false);
                            if (this.activityInfoObject.EnabledCommandIds && _.contains(this.activityInfoObject.EnabledCommandIds, "UncompleteActivity")) {
                                this.canUnComplete(true);
                            }
                            var me = this;
                            if (this.activityInfoObject.ActivityIsReadyToStart && this.activityInfoObject.ActivityIsReadyToStart.Value)
                                this.activityReadyForCompletion(this.activityInfoObject.ActivityIsReadyToStart.Value);
                            if (this.activityInfoObject.ActivityAssignedTo) {
                                var assigneeName = this.activityInfoObject.ActivityAssignedTo.LocationFormattedName ? this.activityInfoObject.ActivityAssignedTo.LocationFormattedName.Value : "";
                                var iconId = this.activityInfoObject.ActivityAssignedTo.Icon ? this.activityInfoObject.ActivityAssignedTo.Icon.Id : "";
                                this.assigneeName(assigneeName);
                                this.currentAssignee = new HPTRIM.TrimBaseObject(HPTRIM.BaseObjectTypes.Location, this.activityInfoObject.ActivityAssignedTo.Uri, assigneeName, assigneeName, iconId);
                            }
                            else {
                                this.assigneeName(HP.HPTRIM.Messages.web_activityNotAssigned);
                                this.currentAssignee = undefined;
                            }
                            if (this.activityInfoObject.ActivitySupervisor && this.activityInfoObject.ActivitySupervisor.Uri != 0) {
                                this.supervisorName(this.activityInfoObject.ActivitySupervisor.LocationFormattedName.Value);
                            }
                            else {
                                this.supervisorName(HP.HPTRIM.Messages.web_activityNoSupervisor);
                            }
                            if (typeof this.activityInfoObject.ActivityIsReadyToStart != "undefined") {
                                this.activityReadyForCompletion(this.activityInfoObject.ActivityIsReadyToStart.Value);
                            }
                            if (typeof this.activityInfoObject.ActivityHasSubActivities != "undefined") {
                                this.activityHasSubActivities(this.activityInfoObject.ActivityHasSubActivities.Value);
                            }
                            if (typeof this.activityInfoObject.ActivityIsComplete != "undefined") {
                                this.activityCompleted(this.activityInfoObject.ActivityIsComplete.Value);
                            }
                            if (typeof this.activityInfoObject.ActivityNotes != "undefined") {
                                me.activityNotes(this.activityInfoObject.ActivityNotes.Value);
                                try {
                                    var textarea = document.getElementById('notesField');
                                    if (textarea != undefined) {
                                        textarea.scrollTop = textarea.scrollHeight;
                                    }
                                }
                                catch (ex) {
                                }
                            }
                            me.mandatoryPlaceholers(0);
                            me.notMandatoryPlaceholers(0);
                            me.reviewDocuments(0);
                            me.firstMandatoryPlaceholderName = "";
                            if (updateChildObjects) {
                                var path = HPTRIM.BaseObjectTypes.Activity.path;
                                var requestData = {};
                                requestData.q = "uri:" + me.uri;
                                requestData.properties = "ChildDocuments,ChildResults,ActivityNotes";
                                me.trimClient.doGet(path, requestData, "json", true).done(function (result) {
                                    var activityInfoObject = result.Results[0];
                                    if (activityInfoObject != undefined && activityInfoObject != null) {
                                        var docList = activityInfoObject.ChildDocuments;
                                        if (docList != undefined && docList != null) {
                                            for (var index = 0; index < docList.length; index++) {
                                                var curDoc = docList[index];
                                                me.documentUris[index] = curDoc.Uri;
                                                if (curDoc.ActivityDocumentUsage.Value === "Reference") {
                                                    continue;
                                                }
                                                if (curDoc.ActivityDocumentUsage.Value == "Review") {
                                                    me.reviewDocuments(me.reviewDocuments() + 1);
                                                }
                                                else {
                                                    if (curDoc.ActivityDocumentStatus.Value == "Unlinked") {
                                                        if (curDoc.ActivityDocumentMandatory.Value) {
                                                            me.mandatoryPlaceholers(me.mandatoryPlaceholers() + 1);
                                                            if (me.firstMandatoryPlaceholderName.length < 1) {
                                                                me.firstMandatoryPlaceholderName = curDoc.ActivityDocumentTitle.Value;
                                                            }
                                                        }
                                                        else {
                                                            me.notMandatoryPlaceholers(me.notMandatoryPlaceholers() + 1);
                                                        }
                                                    }
                                                }
                                            }
                                        }
                                        var activityResults = activityInfoObject.ChildResults;
                                        var notes = activityInfoObject.ActivityNotes.Value;
                                        me.actionResultDisplay(true);
                                        var canSave = false;
                                        if (me.activityReadyForCompletion() && !me.activityCompleted()) {
                                            canSave = true;
                                        }
                                        me.activityResultsComponent.setResults(me.uri, activityResults, canSave);
                                        me.activityNotesComponent.setNotes(notes);
                                        me.activityNotesComponent.setUri(me.uri);
                                        var textarea = document.getElementById('notesField');
                                        if (textarea != undefined) {
                                            textarea.scrollTop = textarea.scrollHeight;
                                        }
                                    }
                                }).fail(function (errorResponse) {
                                    var errorMsg = HP.HPTRIM.Messages.web_unableToConnectToWebServices;
                                    if (errorResponse.ResponseStatus && errorResponse.ResponseStatus.Message) {
                                        errorMsg = errorResponse.ResponseStatus.Message;
                                    }
                                    if (errorResponse.responseJSON && errorResponse.responseJSON.ResponseStatus && errorResponse.responseJSON.ResponseStatus.Message) {
                                        errorMsg = errorResponse.responseJSON.ResponseStatus.Message;
                                    }
                                    me.errorHandler(errorMsg);
                                    me.loading(false);
                                    me.detailsReady(false);
                                    me.details(false);
                                });
                            }
                        };
                        ActivityDetailComponent.PROPERTY_LIST = "name,workflow,dateDue,assignedTo,supervisor,activityAssignedTo,ActivityIsReadyToStart,ActivityIsComplete, ActivityHasSubActivities";
                        return ActivityDetailComponent;
                    }());
                    ActivityDetails.ActivityDetailComponent = ActivityDetailComponent;
                })(ActivityDetails = Panels.ActivityDetails || (Panels.ActivityDetails = {}));
            })(Panels = App.Panels || (App.Panels = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Panels;
            (function (Panels) {
                var ActivityDetails;
                (function (ActivityDetails) {
                    "use strict";
                    var ModifyActivityOverlayPanel = (function (_super) {
                        __extends(ModifyActivityOverlayPanel, _super);
                        function ModifyActivityOverlayPanel(trimClient) {
                            _super.call(this);
                            var me = this;
                            this.modifyActivityFormPanel = new HP.HPTRIM.App.Panels.ActivityDetails.ModifyActivityFormPanel(trimClient);
                            this.modifyActivityFormPanel.doneHandler = function (result) {
                                me.returnAction(HP.HPTRIM.Messages.web_activityUpdated, result);
                            };
                            if (!this.errorAction) {
                                this.errorAction = App.ActionHandlers.DisplayError.getHandler(window['root']);
                            }
                            this.modifyActivityFormPanel.returnHandler = function () {
                                me.returnAction();
                            };
                            this.modifyActivityFormPanel.errorHandler = function (error) {
                                me.errorAction(error);
                            };
                            this.mainPanel.panels([this.modifyActivityFormPanel]);
                            this.commandPanel = new ModifyActivityCommandPanel();
                            this.primaryPanel.panels([this.commandPanel]);
                            this.returnAction = function (message, returnAction) {
                            };
                        }
                        ModifyActivityOverlayPanel.prototype.getClassName = function () {
                            return ModifyActivityOverlayPanel.CLASS_NAME;
                        };
                        ModifyActivityOverlayPanel.prototype.update = function (uri, updateCallback) {
                            this.modifyActivityFormPanel.updatePanel(uri);
                        };
                        ModifyActivityOverlayPanel.CLASS_NAME = "ModifyActivityOverlayPanel";
                        return ModifyActivityOverlayPanel;
                    }(HP.HPTRIM.Framework.Components.Layouts.SinglePage.ContentPanel));
                    ActivityDetails.ModifyActivityOverlayPanel = ModifyActivityOverlayPanel;
                    var ModifyActivityCommandPanel = (function (_super) {
                        __extends(ModifyActivityCommandPanel, _super);
                        function ModifyActivityCommandPanel() {
                            _super.call(this, 'templates/Activity/ModifyActivityCommandPanel', true);
                            this.title = HP.HPTRIM.Messages.web_updateActivity;
                        }
                        return ModifyActivityCommandPanel;
                    }(HP.HPTRIM.Framework.Components.Layouts.Panel));
                    ActivityDetails.ModifyActivityCommandPanel = ModifyActivityCommandPanel;
                })(ActivityDetails = Panels.ActivityDetails || (Panels.ActivityDetails = {}));
            })(Panels = App.Panels || (App.Panels = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Panels;
            (function (Panels) {
                var ActivityDetails;
                (function (ActivityDetails) {
                    "use strict";
                    var ModifyActivityFormPanel = (function (_super) {
                        __extends(ModifyActivityFormPanel, _super);
                        function ModifyActivityFormPanel(trimClient) {
                            _super.call(this, "templates/Activity/ModifyActivityFormPanel");
                            this.loading = ko.observable(false);
                            this.activityName = ko.observable("");
                            this.assignedTo = new HP.HPTRIM.Field.LocationPicker(trimClient, HP.HPTRIM.Messages.web_activityAssignedTo);
                            this.supervisor = new HP.HPTRIM.Field.LocationPicker(trimClient, HP.HPTRIM.Messages.wrk_supervisor);
                            this.trimClient = trimClient;
                            var me = this;
                            this.priority = new HP.HPTRIM.Field.PriorityComboBox(this.trimClient, false);
                            this.estimatedDays = ko.observable(0).extend({ numeric: 0 });
                            this.estimatedHours = ko.observable(0).extend({ numeric: 0 });
                            this.estimatedMinutes = ko.observable(0).extend({ numeric: 0 });
                            this.estimatedCost = ko.observable(0).extend({ currency: 2 });
                            this.doneHandler = function (result) {
                            };
                            this.errorHandler = function (message) {
                            };
                            this.returnHandler = function () {
                            };
                        }
                        ModifyActivityFormPanel.prototype.updatePanel = function (uri) {
                            this.uri = uri;
                            var me = this;
                            var properties = 'activityName, activityAssignedTo, activitySupervisor,activityPriority, estimatedDuration, estimatedCost';
                            var request = new HP.HPTRIM.TrimBaseObjectRequest(me.trimClient, new HPTRIM.TrimBaseObject(HPTRIM.BaseObjectTypes.Activity, this.uri, ""), properties);
                            request.doRequest().done(function (result) {
                                me.loading(false);
                                var activityInfo = result.Results[0];
                                me.activityInfoObject = activityInfo;
                                me.renderActivityDetails();
                            }).fail(function (error) {
                                me.loading(false);
                                var message = HP.HPTRIM.Messages.web_couldNotLoadActivity;
                                if (error.ResponseStatus.Message) {
                                    message = error.ResponseStatus.Message;
                                }
                                if (error.responseJSON && error.responseJSON.ResponseStatus && error.responseJSON.ResponseStatus.Message) {
                                    message = error.responseJSON.ResponseStatus.Message;
                                }
                                me.errorHandler(message);
                            });
                        };
                        ModifyActivityFormPanel.prototype.renderActivityDetails = function (activityInfoObject) {
                            if (activityInfoObject) {
                                this.activityInfoObject = activityInfoObject;
                            }
                            this.activityName(this.activityInfoObject.ActivityName.Value);
                            if (this.activityInfoObject.ActivityAssignedTo && this.activityInfoObject.ActivityAssignedTo.Uri != 0) {
                                var assigneeName = "";
                                var assigneeIconId = "";
                                if (this.activityInfoObject.ActivityAssignedTo && this.activityInfoObject.ActivityAssignedTo.LocationFormattedName) {
                                    assigneeName = this.activityInfoObject.ActivityAssignedTo.LocationFormattedName.Value;
                                }
                                else {
                                    assigneeName = this.activityInfoObject.ActivityAssignedTo.Uri;
                                }
                                assigneeIconId = this.activityInfoObject.ActivityAssignedTo.Icon.Id;
                                var trimObject = new HPTRIM.TrimBaseObject(HPTRIM.BaseObjectTypes.Location, this.activityInfoObject.ActivityAssignedTo.Uri, assigneeName, assigneeName, assigneeIconId);
                                this.assignedTo.setValue(trimObject);
                                this.assignedTo.isEditing(false);
                            }
                            else {
                                this.assignedTo.clear();
                            }
                            if (this.activityInfoObject.ActivitySupervisor && this.activityInfoObject.ActivitySupervisor.Uri != 0) {
                                var supervisorName = "";
                                if (this.activityInfoObject.ActivitySupervisor && this.activityInfoObject.ActivitySupervisor.LocationFormattedName) {
                                    supervisorName = this.activityInfoObject.ActivitySupervisor.LocationFormattedName.Value;
                                }
                                else {
                                    supervisorName = this.activityInfoObject.ActivitySupervisor.Uri;
                                }
                                this.supervisor.setValue(new HPTRIM.TrimBaseObject(HPTRIM.BaseObjectTypes.Location, this.activityInfoObject.ActivitySupervisor.Uri, supervisorName));
                            }
                            else {
                                this.supervisor.clear();
                            }
                            if (this.activityInfoObject.ActivityActivityPriority) {
                                this.priority.Value(this.activityInfoObject.ActivityActivityPriority.Value);
                            }
                            else {
                                this.priority.Value('Medium');
                                var mediumPriority = _.find(this.priority.items(), function (entry) { return entry.Name == "Medium"; });
                                if (mediumPriority) {
                                    this.priority.Value(mediumPriority.Name);
                                }
                            }
                            if (this.activityInfoObject.ActivityEstimatedDuration) {
                                this.estimatedDays(Math.floor(this.activityInfoObject.ActivityEstimatedDuration.Value / ModifyActivityFormPanel.DAY_LENGTH));
                                var hoursAndMinutesRemainder = this.activityInfoObject.ActivityEstimatedDuration.Value % ModifyActivityFormPanel.DAY_LENGTH;
                                if (hoursAndMinutesRemainder >= ModifyActivityFormPanel.HOUR_LENGTH) {
                                    this.estimatedHours(Math.floor(hoursAndMinutesRemainder / ModifyActivityFormPanel.HOUR_LENGTH));
                                }
                                else {
                                    this.estimatedHours(0);
                                }
                                var minutesRemainder = hoursAndMinutesRemainder % ModifyActivityFormPanel.HOUR_LENGTH;
                                this.estimatedMinutes(Math.floor(minutesRemainder / ModifyActivityFormPanel.MINUTES_LENGTH));
                            }
                            if (this.activityInfoObject.ActivityEstimatedCost) {
                                this.estimatedCost(this.activityInfoObject.ActivityEstimatedCost.Value);
                            }
                        };
                        ModifyActivityFormPanel.prototype.submit = function () {
                            if (this.validate()) {
                                var data = this.createDataForSave();
                                data['properties'] = "ActivitySupervisor, ActivityIsReadyToStart, ActivityAssignedTo, ActivityName";
                                this.save(data);
                            }
                        };
                        ModifyActivityFormPanel.prototype.createDataForSave = function () {
                            var data = {};
                            data["ActivityName"] = this.activityName();
                            if (this.assignedTo.getValue()) {
                                data["ActivityAssignedTo"] = this.assignedTo.getValue().Uri;
                            }
                            else {
                                data["ActivityAssignedTo"] = 0;
                            }
                            if (this.supervisor.getValue()) {
                                data["ActivitySupervisor"] = this.supervisor.getValue().Uri;
                            }
                            if (this.estimatedCost()) {
                                data["ActivityEstimatedCost"] = this.estimatedCost();
                            }
                            var days = this.estimatedDays() ? this.estimatedDays() : 0;
                            var hours = this.estimatedHours() ? this.estimatedHours() : 0;
                            var minutes = this.estimatedMinutes() ? this.estimatedMinutes() : 0;
                            var estimatedDuration = (days * ModifyActivityFormPanel.DAY_LENGTH) +
                                (hours * ModifyActivityFormPanel.HOUR_LENGTH) +
                                (minutes * ModifyActivityFormPanel.MINUTES_LENGTH);
                            data["ActivityEstimatedDuration"] = estimatedDuration;
                            data["ActivityActivityPriority"] = this.priority.Value();
                            return data;
                        };
                        ModifyActivityFormPanel.prototype.save = function (data) {
                            var me = this;
                            var saveRequest = new HPTRIM.TrimObjectSave(me.trimClient, HPTRIM.BaseObjectTypes.Activity, parseInt(me.uri));
                            saveRequest.doRequestEx(data).done(function (response) {
                                var result = response.Results[0];
                                me.doneHandler(result);
                            }).fail(function (error) {
                                var message = HP.HPTRIM.Messages.web_couldNotSaveActivity;
                                if (error.ResponseStatus.Message) {
                                    message = error.ResponseStatus.Message;
                                }
                                if (error.responseJSON && error.responseJSON.ResponseStatus && error.responseJSON.ResponseStatus.Message) {
                                    message = error.responseJSON.ResponseStatus.Message;
                                }
                                me.errorHandler(message);
                            });
                        };
                        ModifyActivityFormPanel.prototype.validate = function () {
                            if (this.assignedTo.getValue()) {
                            }
                            else if (this.assignedTo.getRawValue() != "") {
                                this.errorHandler("Must be assigned to someone (or blank)!");
                                return false;
                            }
                            if (this.priority.Value() == 'None') {
                                this.errorHandler("Must have valid priority!");
                                return false;
                            }
                            return true;
                        };
                        ModifyActivityFormPanel.MINUTES_LENGTH = 60;
                        ModifyActivityFormPanel.HOUR_LENGTH = 60 * 60;
                        ModifyActivityFormPanel.DAY_LENGTH = 8 * 3600;
                        return ModifyActivityFormPanel;
                    }(HP.HPTRIM.Framework.Components.Layouts.Panel));
                    ActivityDetails.ModifyActivityFormPanel = ModifyActivityFormPanel;
                })(ActivityDetails = Panels.ActivityDetails || (Panels.ActivityDetails = {}));
            })(Panels = App.Panels || (App.Panels = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Panels;
            (function (Panels) {
                var ActivityDetails;
                (function (ActivityDetails) {
                    "use strict";
                    var ActivityDocumentDetailComponent = (function () {
                        function ActivityDocumentDetailComponent(trimClient) {
                            var _this = this;
                            this.trimClient = trimClient;
                            this.uri = "";
                            this.detailsTemplate = 'templates/Activity/ActivityDocumentDetailComponent';
                            this.parentActivityCompleted = ko.observable(false);
                            this.details = ko.observable(false);
                            this.loading = ko.observable(false);
                            this.detailsReady = ko.observable(false);
                            this.actionResultDisplay = ko.observable(false);
                            this.actionResult = ko.observable("");
                            this.linkedRecord = ko.observable("");
                            this.origin = ko.observable("");
                            this.isMandartory = ko.observable("");
                            this.supercopy = ko.observable("");
                            this.status = ko.observable("");
                            this.defaultContainer = ko.observable("");
                            this.defaultRecordType = ko.observable("");
                            var me = this;
                            this.updateOwningItemList = function (uri, name) {
                            };
                            this.attach = function (docUri, recUri) {
                            };
                            this.currentActivityDocumentUsage = function (uri) {
                                if (uri != "") {
                                    var docList = _this.activityDocumentInfoObject.ChildDocuments;
                                    for (var index = 0; index < docList.length; index++) {
                                        var curDoc = docList[index];
                                        if (curDoc.ActivityDocumentRecord != undefined) {
                                            if (curDoc.ActivityDocumentRecord.Uri == uri) {
                                                return curDoc.ActivityDocumentUsage.Value;
                                            }
                                        }
                                    }
                                }
                                return "";
                            };
                        }
                        ActivityDocumentDetailComponent.prototype.setParentUri = function (uri) {
                            this.parentUri = uri;
                        };
                        ActivityDocumentDetailComponent.prototype.updateModel = function (newUri, actionResult) {
                            this.uri = this.parentUri;
                            var me = this;
                            if (newUri == "") {
                                me.details(false);
                                me.detailsReady(false);
                            }
                            if (newUri != "" || me.uri != "") {
                                me.loading(true);
                                var activityInfoRequest = new HPTRIM.TrimBaseObjectRequest(me.trimClient, new HPTRIM.TrimBaseObject(HPTRIM.BaseObjectTypes.Activity, me.uri, ""), "ChildDocuments,ActivityIsComplete");
                                activityInfoRequest.doRequest().done(function (result) {
                                    me.loading(false);
                                    me.details(true);
                                    var activityDocumentInfo = result.Results[0];
                                    me.activityDocumentInfoObject = activityDocumentInfo;
                                    me.parentActivityCompleted(result.Results[0].ActivityIsComplete.Value);
                                }).fail(function (errorResponse) {
                                    var errorMsg = HP.HPTRIM.Messages.web_unableToConnectToWebServices;
                                    if (errorResponse.ResponseStatus && errorResponse.ResponseStatus.Message) {
                                        errorMsg = errorResponse.ResponseStatus.Message;
                                    }
                                    if (errorResponse.responseJSON && errorResponse.responseJSON.ResponseStatus && errorResponse.responseJSON.ResponseStatus.Message) {
                                        errorMsg = errorResponse.responseJSON.ResponseStatus.Message;
                                    }
                                    me.errorHandler(errorMsg);
                                    me.loading(false);
                                    me.detailsReady(false);
                                    me.details(false);
                                });
                            }
                        };
                        ActivityDocumentDetailComponent.prototype.refresh = function (actionResult) {
                            this.updateModel(this.uri, actionResult);
                        };
                        ActivityDocumentDetailComponent.prototype.useCachedResult = function (result) {
                            this.renderActivityDetails();
                        };
                        ActivityDocumentDetailComponent.prototype.renderActivityDetails = function () {
                        };
                        return ActivityDocumentDetailComponent;
                    }());
                    ActivityDetails.ActivityDocumentDetailComponent = ActivityDocumentDetailComponent;
                })(ActivityDetails = Panels.ActivityDetails || (Panels.ActivityDetails = {}));
            })(Panels = App.Panels || (App.Panels = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Panels;
            (function (Panels) {
                var ActivityDetails;
                (function (ActivityDetails) {
                    "use strict";
                    var ActivityResultsComponent = (function (_super) {
                        __extends(ActivityResultsComponent, _super);
                        function ActivityResultsComponent(trimClient, parentActivityUri) {
                            _super.call(this, "templates/Activity/ActivityResultsComponent", true);
                            this.results = ko.observableArray([]);
                            this.errorVisible = ko.observable(false);
                            this.alertDetails = ko.observable("");
                            this.saveEnabled = ko.observable(false);
                            var me = this;
                            this.trimClient = trimClient;
                            this.parentActivityUri = parentActivityUri;
                            this.showResultsOnMobile = ko.observable(false);
                            this.parentActivityCompleted = ko.observable(false);
                            this.returnAction = function () {
                            };
                            this.resultsSavedCallback = function () {
                            };
                        }
                        ActivityResultsComponent.prototype.prepareData = function () {
                            var selectedResults = {};
                            this.dispatchResults(selectedResults);
                        };
                        ActivityResultsComponent.prototype.dispatchResults = function (data) {
                            var _this = this;
                            var me = this;
                            var resultsToDispatch;
                            if (data != undefined) {
                                resultsToDispatch = data;
                            }
                            else {
                                resultsToDispatch = this.getPostData();
                            }
                            var result = {
                                "ChildResults": resultsToDispatch,
                                "Uri": this.parentActivityUri
                            };
                            var setActivityResultRequest = new HPTRIM.TrimObjectSave(this.trimClient, HPTRIM.BaseObjectTypes.Activity, parseInt(this.parentActivityUri));
                            setActivityResultRequest.doRequestEx(result).done(function (response) {
                                _this.resultsSavedCallback();
                            }).fail(function (response) {
                                var errorMessage = response.ResponseStatus ? response.ResponseStatus.Message : HPTRIM.Messages.web_error;
                                me.alertDetails(errorMessage);
                                me.errorVisible(true);
                            });
                        };
                        ActivityResultsComponent.prototype.save = function () {
                            this.dispatchResults();
                            this.alertDetails("");
                            this.errorVisible(false);
                        };
                        ActivityResultsComponent.prototype.okToComplete = function () {
                            var retResult = this.results().length < 2;
                            if (this.results().length > 1) {
                                _.each(this.results(), function (item) {
                                    if (item.wasReached) {
                                        retResult = true;
                                    }
                                });
                            }
                            return retResult;
                        };
                        ActivityResultsComponent.prototype.hasResults = function () {
                            return this.results().length != 0;
                        };
                        ActivityResultsComponent.prototype.setResults = function (activityUri, results, saveEnabled) {
                            this.alertDetails("");
                            this.errorVisible(false);
                            this.saveEnabled(saveEnabled);
                            var me = this;
                            this.parentActivityUri = activityUri;
                            var activityInfoRequest = new HPTRIM.TrimBaseObjectRequest(me.trimClient, new HPTRIM.TrimBaseObject(HPTRIM.BaseObjectTypes.Activity, this.parentActivityUri, ""), "ActivityIsComplete");
                            activityInfoRequest.doRequest().done(function (result) {
                                me.parentActivityCompleted(result.Results[0].ActivityIsComplete.Value);
                            }).fail(function (errorResponse) {
                                var errorMsg = HP.HPTRIM.Messages.web_unableToConnectToWebServices;
                                if (errorResponse.ResponseStatus && errorResponse.ResponseStatus.Message) {
                                    errorMsg = errorResponse.ResponseStatus.Message;
                                }
                                if (errorResponse.responseJSON && errorResponse.responseJSON.ResponseStatus && errorResponse.responseJSON.ResponseStatus.Message) {
                                    errorMsg = errorResponse.responseJSON.ResponseStatus.Message;
                                }
                                ko.postbox.publish(App.TRIMApp.NOTIFICATION_ERROR_TOPIC, errorMsg);
                            });
                            var transformedResults = [];
                            _.each(results, function (result) {
                                var transformedResult = new ActivityResult(result, me.parentActivityUri);
                                transformedResults.push(transformedResult);
                            });
                            this.results(transformedResults);
                        };
                        ActivityResultsComponent.prototype.getPostData = function () {
                            var results = [];
                            _.each(this.results(), function (item) {
                                if (item.rollbackId > 0) {
                                    results = [];
                                    var obj = { "Uri": item.Uri, "ActivityResultWasReached": item.wasReached, "RollbackToId": item.rollbackId };
                                    results.push(obj);
                                }
                                else {
                                    var obj = { "Uri": item.Uri, "ActivityResultWasReached": item.wasReached, "RollbackToId": item.rollbackId };
                                    results.push(obj);
                                }
                            });
                            return results;
                        };
                        ActivityResultsComponent.prototype.getReachedResults = function () {
                            var results = [];
                            _.each(this.results(), function (item) {
                                if (item.wasReached) {
                                    if (item.rollbackId > 0) {
                                        results = [];
                                        var obj = { "Uri": item.Uri, "ActivityResultWasReached": item.wasReached, "RollbackToId": item.rollbackId };
                                        results.push(obj);
                                        return results;
                                    }
                                    else {
                                        if (item.wasReached) {
                                            var obj = { "Uri": item.Uri, "ActivityResultWasReached": item.wasReached, "RollbackToId": item.rollbackId };
                                            results.push(obj);
                                        }
                                    }
                                }
                            });
                            return results;
                        };
                        ActivityResultsComponent.prototype.getHowmanyReachedResults = function () {
                            var results = [];
                            _.each(this.results(), function (item) {
                                if (item.wasReached) {
                                    if (item.wasReached) {
                                        var obj = { "Uri": item.Uri, "ActivityResultWasReached": item.wasReached, "RollbackToId": item.rollbackId };
                                        results.push(obj);
                                    }
                                }
                            });
                            return results;
                        };
                        ActivityResultsComponent.prototype.getHowmanyRollbackChecked = function () {
                            var results = [];
                            _.each(this.results(), function (item) {
                                if (item.wasReached) {
                                    if (item.rollbackId > 0) {
                                        var obj = { "Uri": item.Uri, "ActivityResultWasReached": item.wasReached, "RollbackToId": item.rollbackId };
                                        results.push(obj);
                                    }
                                }
                            });
                            return results;
                        };
                        return ActivityResultsComponent;
                    }(HP.HPTRIM.Framework.Components.Layouts.Panel));
                    ActivityDetails.ActivityResultsComponent = ActivityResultsComponent;
                    var ActivityResult = (function () {
                        function ActivityResult(resultObj, parentActivityUri) {
                            var _this = this;
                            this.name = "";
                            this.rollbackId = "";
                            this.description = "";
                            this.isSelected = ko.observable(false);
                            this.parentActivityUri = parentActivityUri;
                            this.name = resultObj.ActivityResultName.Value;
                            this.description = resultObj.ActivityResultDescription.Value;
                            this.rollbackId = resultObj.ActivityResultRollbackToId.Value;
                            this.wasReached = resultObj.ActivityResultWasReached.Value;
                            this.Uri = resultObj.Uri;
                            this.isSelected(this.wasReached);
                            this.isSelected.subscribe(function (newValue) {
                                _this.wasReached = !_this.wasReached;
                            });
                        }
                        return ActivityResult;
                    }());
                    ActivityDetails.ActivityResult = ActivityResult;
                })(ActivityDetails = Panels.ActivityDetails || (Panels.ActivityDetails = {}));
            })(Panels = App.Panels || (App.Panels = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Panels;
            (function (Panels) {
                var ActivityDetails;
                (function (ActivityDetails) {
                    "use strict";
                    var ActivityNotesComponent = (function (_super) {
                        __extends(ActivityNotesComponent, _super);
                        function ActivityNotesComponent(trimClient, parentActivityUri) {
                            _super.call(this, "templates/Activity/ActivityNotesComponent", true);
                            this.activityNotes = ko.observable('');
                            this.uri = "";
                            this.save = function () { };
                            this.trimClient = trimClient;
                            this.uri = parentActivityUri;
                        }
                        ActivityNotesComponent.prototype.setNotes = function (notes) {
                            this.activityNotes(notes);
                        };
                        ActivityNotesComponent.prototype.clearAddToNotesField = function () {
                            $('#addToNotesField').val('');
                        };
                        ActivityNotesComponent.prototype.showLatest = function () {
                            var textarea = document.getElementById('notesField');
                            textarea.scrollTop = textarea.scrollHeight;
                        };
                        ActivityNotesComponent.prototype.addToNotes = function () {
                            var notes = $('#addToNotesField').val();
                            if (notes != '') {
                                var data = {};
                                data["uri"] = this.uri;
                                data["ActivityNotes"] = $('#addToNotesField').val();
                                data["NotesUpdateType"] = "AppendWithUserStamp";
                                this.save(data, false);
                                this.clearAddToNotesField();
                                try {
                                    setTimeout(function () {
                                        var textarea = document.getElementById('notesField');
                                        textarea.scrollTop = textarea.scrollHeight;
                                    }, 500);
                                }
                                catch (x) { }
                            }
                        };
                        ActivityNotesComponent.prototype.setUri = function (uri) {
                            this.uri = uri;
                        };
                        ActivityNotesComponent.prototype.getNotes = function () {
                            var _this = this;
                            var request = new HPTRIM.TrimBaseObjectRequest(this.trimClient, new HPTRIM.TrimBaseObject(HPTRIM.BaseObjectTypes.Activity, this.uri), "ActivityNotes");
                            var promise = request.doRequest().done(function (result) {
                                if (result.Results && result.Results.length > 0) {
                                    var result = result.Results[0];
                                    _this.activityNotes(result.ActivityNotes.Value);
                                }
                            }).fail(function (errorResponse) {
                                var errorMsg = HP.HPTRIM.Messages.web_unableToConnectToWebServices;
                                if (errorResponse.ResponseStatus && errorResponse.ResponseStatus.Message) {
                                    errorMsg = errorResponse.ResponseStatus.Message;
                                }
                                if (errorResponse.responseJSON && errorResponse.responseJSON.ResponseStatus && errorResponse.responseJSON.ResponseStatus.Message) {
                                    errorMsg = errorResponse.responseJSON.ResponseStatus.Message;
                                }
                                ko.postbox.publish(App.TRIMApp.NOTIFICATION_ERROR_TOPIC, errorMsg);
                            });
                        };
                        return ActivityNotesComponent;
                    }(HP.HPTRIM.Framework.Components.Layouts.Panel));
                    ActivityDetails.ActivityNotesComponent = ActivityNotesComponent;
                })(ActivityDetails = Panels.ActivityDetails || (Panels.ActivityDetails = {}));
            })(Panels = App.Panels || (App.Panels = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Panels;
            (function (Panels) {
                "use strict";
                var AttachingActivityDocumentCommandPanel = (function (_super) {
                    __extends(AttachingActivityDocumentCommandPanel, _super);
                    function AttachingActivityDocumentCommandPanel(trimClient, fileUploadProvider, cssClass) {
                        _super.call(this, 'templates/Activity/AttachActivityDocumentCommandPanel', true);
                        this.attachType = AttachingActivityDocumentCommandPanel.ATTACH_SUPERCOPY;
                        this.warningHandler = function (title, errors, continueCallback) { continueCallback(); };
                        this.returnToActivityDocuments = function () { };
                        this.returnToAttachTypeSelection = function () { };
                        this.currentQuery = "";
                        this.queryList = [];
                        this.queryBoxCallback = function () { };
                        this.QUERY_EXECUTE_LENGTH = 3;
                        this.currentActivityDocumentAction = ko.observable("");
                        this.currentActivityDocumentUsage = ko.observable("");
                        this.currentActivityName = ko.observable("");
                        this.currentActivityDocumentName = ko.observable("");
                        this.currentActivityDocumentStatus = ko.observable("");
                        this.currentActivityDocumentMandatory = ko.observable("");
                        this.currentActivityDocumentRecordType = ko.observable("");
                        this.currentActivityDocumentSuperCopy = ko.observable("");
                        this.currentActivityDocumentDefaultContainer = ko.observable("");
                        this.selectedOptions = {
                            isSuperCopySelected: ko.observable(false),
                            isElectronicSelected: ko.observable(false),
                            isSelectFromRecordManagerSelected: ko.observable(false)
                        };
                        var me = this;
                        this.trimClient = trimClient;
                        this.fileUploadProvider = fileUploadProvider;
                        this.configureFields();
                        this.searchAheadEnabled = ko.observable(HPTRIM.Config.searchAhead);
                        this.nonSelectionMade = ko.observable(true);
                        this.showDataEntryForm = function () { };
                        this.executeQuery = function (query, clearResults, sortBy, purpose) {
                        };
                        this.returnSelectedRecordType = function (rtyData) {
                        };
                        this.returnToActivityDocuments = function () {
                        };
                        this.returnToAttachTypeSelection = function () {
                        };
                        this.queryString = ko.observable("").extend({ required: HP.HPTRIM.Messages.web_enterAQuery, hasChanged: true });
                        this.querySubscribeCallback = function (newValue) {
                            if (me.searchAheadEnabled()) {
                                var query = me.queryString();
                                if (query.length >= me.QUERY_EXECUTE_LENGTH) {
                                    if (query.indexOf('*') == -1 && query.indexOf(':') == -1) {
                                        query = query + "*";
                                    }
                                    me.queryList.push(query);
                                    setTimeout(function () {
                                        me.timerComplete();
                                    }, 200);
                                }
                            }
                        };
                        this.querySubscription = this.queryString.subscribe(this.querySubscribeCallback);
                    }
                    AttachingActivityDocumentCommandPanel.prototype.setOption = function (key, moreKeys) {
                        var _this = this;
                        this.nonSelectionMade(true);
                        _.each(this.selectedOptions, function (value, key) {
                            value(false);
                            if (moreKeys) {
                                if (_.has(moreKeys, key)) {
                                    value(true);
                                    _this.nonSelectionMade(false);
                                }
                            }
                        });
                        if (key) {
                            this.selectedOptions[key](true);
                            this.nonSelectionMade(false);
                        }
                        ;
                    };
                    AttachingActivityDocumentCommandPanel.prototype.timerComplete = function () {
                        if (this.queryList.length > 0) {
                            var query = this.queryList[0];
                            this.queryList.splice(0, 1);
                            if (this.queryList.length == 0) {
                                this.executeQuery(query, false, "", this.attachType);
                            }
                        }
                    };
                    AttachingActivityDocumentCommandPanel.prototype.attachSuperCopy = function () {
                        this.attachType = AttachingActivityDocumentCommandPanel.ATTACH_SUPERCOPY;
                        this.setOption('isSuperCopySelected');
                        this.documentRecordType = this.currentActivityDocumentRecordType();
                        this.documentSuperCopy = this.currentActivityDocumentSuperCopy();
                        if (this.documentRecordType != undefined) {
                            var defaultRecordType = new HP.HPTRIM.TrimBaseObject(HP.HPTRIM.BaseObjectTypes.RecordType, this.documentRecordType.Uri, "", "");
                            defaultRecordType.hasIcon = true;
                            defaultRecordType.iconId = "recloc";
                            this.rtyField.setRawValue(this.documentRecordType.RecordTypeName.Value);
                        }
                        this.rtyField.filterClause("haselecdocsupport");
                        this.rtyField.disableManualRecords = true;
                        this.rtyField.doSearch();
                        if (this.documentSuperCopy != undefined) {
                            this.queryString(this.documentSuperCopy.RecordNumber.Value);
                        }
                        this.finaliseQuery();
                    };
                    AttachingActivityDocumentCommandPanel.prototype.attachElectronic = function () {
                        this.attachType = AttachingActivityDocumentCommandPanel.ATTACH_NEWRECORD;
                        this.setOption('isElectronicSelected');
                        this.documentRecordType = this.currentActivityDocumentRecordType();
                        if (this.documentRecordType != undefined) {
                            var defaultRecordType = new HP.HPTRIM.TrimBaseObject(HP.HPTRIM.BaseObjectTypes.RecordType, this.documentRecordType.Uri, "", "");
                            defaultRecordType.hasIcon = true;
                            defaultRecordType.iconId = "recloc";
                            this.rtyField.setRawValue(this.documentRecordType.RecordTypeName.Value);
                        }
                        this.rtyField.filterClause("haselecdocsupport");
                        this.rtyField.doSearch();
                    };
                    AttachingActivityDocumentCommandPanel.prototype.attachExistingRecord = function () {
                        this.attachType = AttachingActivityDocumentCommandPanel.ATTACH_TRIMRECORD;
                        this.setOption('isSelectFromRecordManagerSelected');
                    };
                    AttachingActivityDocumentCommandPanel.prototype.finaliseQuery = function () {
                        this.queryList = [];
                        this.executeQuery(this.queryString(), true, "", this.attachType);
                    };
                    AttachingActivityDocumentCommandPanel.prototype.configureFields = function () {
                        var resultExpansionOverlay = false;
                        this.rtyField = new HP.HPTRIM.Field.RecordTypePicker(this.trimClient, HP.HPTRIM.Messages.rec_select + " " + HP.HPTRIM.Messages.web_recordType, false, resultExpansionOverlay);
                        this.rtyField.enableClickToExpand = true;
                        this.rtyField.setRawValue('all');
                        this.rtyField.filterClause("haselecdocsupport");
                        this.rtyField.doSearch();
                        this.setupRecordTypePickerEventHandler();
                    };
                    AttachingActivityDocumentCommandPanel.prototype.setupRecordTypePickerEventHandler = function () {
                        var me = this;
                        this.rtyField.on({
                            'afterItemClicked': function (field, value) {
                                var rty = value;
                                var rtyDetails = new HP.HPTRIM.TrimBaseObjectRequest(me.trimClient, rty, "RecordTypeEStore,storeType,Classification,RecordTypeNeedsClassification,RecordTypeName,DataEntryFormDefinition");
                                var documentTitle = me.currentActivityDocumentName();
                                var documentDefaultContainer = me.currentActivityDocumentDefaultContainer();
                                rtyDetails.doRequest().done(function (result) {
                                    if (result.Results.length > 0) {
                                        var rtyData = result.Results[0];
                                        var clonedRtyData = jQuery.extend(true, {}, rtyData);
                                        me.returnSelectedRecordType(clonedRtyData);
                                        if (me.attachType == AttachingActivityDocumentCommandPanel.ATTACH_NEWRECORD) {
                                            var form = new HP.HPTRIM.Form.RecordDataEntryForm(me.trimClient, me.fileUploadProvider, rtyData.DataEntryFormDefinition, rty, null, "", documentTitle, documentDefaultContainer);
                                            var dataEntryForm = new HP.HPTRIM.App.Panels.RecordDataEntryForm.RecordDataEntryPanel(me.trimClient, me.fileUploadProvider);
                                            dataEntryForm.setFormDataEntry(form);
                                            dataEntryForm.warningHandler = me.warningHandler;
                                            me.showDataEntryForm(dataEntryForm);
                                        }
                                    }
                                }).fail(function (errorResponse) {
                                    var errorMsg = HP.HPTRIM.Messages.web_unableToConnectToWebServices;
                                    if (errorResponse.ResponseStatus && errorResponse.ResponseStatus.Message) {
                                        errorMsg = errorResponse.ResponseStatus.Message;
                                    }
                                    if (errorResponse.responseJSON && errorResponse.responseJSON.ResponseStatus && errorResponse.responseJSON.ResponseStatus.Message) {
                                        errorMsg = errorResponse.responseJSON.ResponseStatus.Message;
                                    }
                                    ko.postbox.publish(App.TRIMApp.NOTIFICATION_ERROR_TOPIC, errorMsg);
                                });
                            }
                        });
                    };
                    AttachingActivityDocumentCommandPanel.ATTACH_SUPERCOPY = "supercopy";
                    AttachingActivityDocumentCommandPanel.ATTACH_NEWRECORD = "newRecord";
                    AttachingActivityDocumentCommandPanel.ATTACH_TRIMRECORD = "trimRecord";
                    return AttachingActivityDocumentCommandPanel;
                }(HP.HPTRIM.Framework.Components.Layouts.Panel));
                Panels.AttachingActivityDocumentCommandPanel = AttachingActivityDocumentCommandPanel;
            })(Panels = App.Panels || (App.Panels = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Panels;
            (function (Panels) {
                var ChildList;
                (function (ChildList) {
                    "use strict";
                    var RevisionChildListPanel = (function (_super) {
                        __extends(RevisionChildListPanel, _super);
                        function RevisionChildListPanel(trimClient) {
                            var _this = this;
                            _super.call(this, 'RecordRevisionTemplate');
                            this.childObjects = ko.observableArray([]);
                            this.currentChildObject = ko.observable('');
                            this.selectedChildUri = ko.observable('');
                            this.selectedChildNumber = ko.observable('');
                            this.selectedChildIsPreserved = ko.observable(false);
                            this.propertyDefinitionArray = null;
                            this.titleProperties = [];
                            this.titleRenditionProperties = [];
                            this.properties = [];
                            this.renditionProperties = [];
                            this.checkboxProperties = [];
                            this.mainObjectUri = "";
                            this.updateHtml = function (html, realPath, childUri) { };
                            this.updateRenditionHtml = function (html, uri, realPath, childUri) { };
                            this.viewCurrentDocument = function () { };
                            this.resetloading = function () { };
                            this.showConfirm = function (title, message, callback) { alert("no confirm override yet..."); callback(); };
                            this.revision = ko.observable(false);
                            this.rendition = ko.observable(false);
                            this.handleCurrentDocumentChange = function () {
                            };
                            this.trimClient = trimClient;
                            this.renditionProperties = ['RecordRenditionDateModified', 'RecordRenditionExtension', 'RecordRenditionTypeOfRendition', 'RecordRenditionAddedOn', 'RecordRenditionNotes'];
                            this.titleProperties = ['RecordRevisionRevisionNumber'];
                            this.titleRenditionProperties = ['RecordRenditionDescription'];
                            this.properties = ['RecordRevisionDateModified', 'RecordRevisionCheckedInBy', 'RecordRevisionExtension'];
                            this.checkboxProperties = ['RecordRevisionPreserve'];
                            this.selectedChildUri.subscribe(function (newChildUri) {
                                if (newChildUri && newChildUri !== "") {
                                    if (_this.revision()) {
                                        _this.viewRevision(newChildUri);
                                    }
                                    else if (_this.rendition()) {
                                        _this.viewRendition(newChildUri);
                                    }
                                }
                            });
                        }
                        RevisionChildListPanel.prototype.showRevisions = function (rawRecord) {
                            var _this = this;
                            this.templateName("RecordRevisionTemplate");
                            this.revision(true);
                            this.rendition(false);
                            var revisionArray = rawRecord.ChildRevisions;
                            var revisionsWithDisplayItemProperties = [];
                            _.each(revisionArray, function (currentRevisionObject) {
                                var currentRevisionObjectToRender = {};
                                var makeDisplayItemsForProperties = function (properties) {
                                    _.each(properties, function (propertyName) {
                                        var propertyWithDef = _.extend({}, currentRevisionObject[propertyName], _this.propertyDefinitionArray[propertyName]);
                                        var displayItem = HP.HPTRIM.Utils.TrimHelper.makePropertyOrFieldDisplayItem(propertyWithDef, currentRevisionObject, _this.trimClient);
                                        displayItem.renderer = HP.HPTRIM.App.Panels.Plugins.PropertyRenderer.make(displayItem);
                                        currentRevisionObjectToRender[propertyName] = displayItem;
                                    });
                                };
                                makeDisplayItemsForProperties(_this.titleProperties);
                                makeDisplayItemsForProperties(_this.properties);
                                makeDisplayItemsForProperties(_this.checkboxProperties);
                                currentRevisionObjectToRender.Uri = currentRevisionObject.Uri;
                                revisionsWithDisplayItemProperties.push(currentRevisionObjectToRender);
                            });
                            this.childObjects(revisionsWithDisplayItemProperties);
                        };
                        RevisionChildListPanel.prototype.refresh = function (uri) {
                            var _this = this;
                            this.mainObjectUri = uri;
                            var forUri = uri;
                            var request = new HP.HPTRIM.TrimObjectInformationRequest(this.trimClient, forUri, HP.HPTRIM.BaseObjectTypes.Record, "ChildRevisions");
                            request.includePropertiesDef();
                            request.includeBothStringValueAndRawValue();
                            request.setStringDisplayType("TreeColumn");
                            request.doRequest().done(function (result) {
                                _this.propertyDefinitionArray = _.indexBy(result.PropertiesAndFields.RecordRevision, "Id");
                                if (result.Results && result.Results.length > 0) {
                                    _this.showRevisions(result.Results[0]);
                                }
                            }).fail(function (errorResponse) {
                                var errorMsg = HP.HPTRIM.Messages.web_unableToConnectToWebServices;
                                if (errorResponse.ResponseStatus && errorResponse.ResponseStatus.Message) {
                                    errorMsg = errorResponse.ResponseStatus.Message;
                                }
                                if (errorResponse.responseJSON && errorResponse.responseJSON.ResponseStatus && errorResponse.responseJSON.ResponseStatus.Message) {
                                    errorMsg = errorResponse.responseJSON.ResponseStatus.Message;
                                }
                                ko.postbox.publish(App.TRIMApp.NOTIFICATION_ERROR_TOPIC, errorMsg);
                            });
                        };
                        RevisionChildListPanel.prototype.viewRevision = function (childUri) {
                            var _this = this;
                            if (childUri == '') {
                                return;
                            }
                            var revisionRequest = new HPTRIM.TrimRecordRevisionRequest(this.trimClient, this.mainObjectUri, childUri);
                            var deferred = new $.Deferred();
                            this.resetloading();
                            deferred.done(function (html, realPath, cUri) {
                                if (cUri === void 0) { cUri = _this.selectedChildUri(); }
                                _this.updateHtml(html, realPath, cUri);
                            });
                            revisionRequest.doRequest(deferred);
                        };
                        RevisionChildListPanel.prototype.promoteRevision = function () {
                            var _this = this;
                            var worker = function () {
                                var childUri = _this.selectedChildUri();
                                if (childUri == '') {
                                    return;
                                }
                                var promoteRequest = new HPTRIM.TrimRecordRevisionPromoteRequest(_this.trimClient, _this.mainObjectUri, childUri);
                                var requestPromise = promoteRequest.doRequest();
                                requestPromise.done(function (rawResult) {
                                    if (!rawResult.Results || rawResult.Results.length == 0) {
                                        _this.showError(HPTRIM.Messages.web_webErrorPromotingRevision, rawResult);
                                        return;
                                    }
                                    var recordResult = rawResult.Results[0];
                                    _this.showRevisions(recordResult);
                                    _this.handleCurrentDocumentChange();
                                    _this.showCurrentDocument();
                                }).fail(function (rawError) {
                                    _this.showError(HPTRIM.Messages.web_webErrorPromotingRevision, rawError);
                                });
                            };
                            var promoteTitleText = HPTRIM.Utils.String.format(HP.HPTRIM.Messages.web_revisionPromote_caption, [this.selectedChildNumber()]);
                            this.showConfirm(promoteTitleText, HP.HPTRIM.Messages.web_areYouSure, worker);
                        };
                        RevisionChildListPanel.prototype.preserveRevision = function (childObject) {
                            var _this = this;
                            var preserveRequest = new HPTRIM.TrimRecordRevisionPreserveRequest(this.trimClient, this.mainObjectUri, childObject.Uri, !childObject.RecordRevisionPreserve.RawValue);
                            var requestPromise = preserveRequest.doRequest();
                            requestPromise.done(function (rawResult) {
                                if (!rawResult.Results || rawResult.Results.length == 0) {
                                    _this.showError(HPTRIM.Messages.web_webErrorPreservingRevision, rawResult);
                                    return;
                                }
                                var recordResult = rawResult.Results[0];
                                _this.showRevisions(recordResult);
                            }).fail(function (rawError) {
                                _this.showError(HPTRIM.Messages.web_webErrorPreservingRevision, rawError);
                            });
                        };
                        RevisionChildListPanel.prototype.deleteRevision = function () {
                            var _this = this;
                            var worker = function () {
                                var childUri = _this.selectedChildUri();
                                if (childUri == '') {
                                    return;
                                }
                                var deleteRequest = new HPTRIM.TrimRecordRevisionDeleteRequest(_this.trimClient, _this.mainObjectUri, childUri);
                                deleteRequest.doRequest().done(function (rawResult) {
                                    if (!rawResult.Results || rawResult.Results.length == 0) {
                                        _this.showError(HPTRIM.Messages.web_webErrorDeletetingRevision, rawResult);
                                        return;
                                    }
                                    var recordResult = rawResult.Results[0];
                                    _this.showRevisions(recordResult);
                                    _this.showCurrentDocument();
                                }).fail(function (rawError) {
                                    _this.showError(HPTRIM.Messages.web_webErrorDeletetingRevision, rawError);
                                });
                            };
                            var deleteTitleText = HPTRIM.Utils.String.format(HP.HPTRIM.Messages.web_revisionDelete_caption, [this.selectedChildNumber()]);
                            this.showConfirm(deleteTitleText, HP.HPTRIM.Messages.web_areYouSure, worker);
                        };
                        RevisionChildListPanel.prototype.showCurrentDocument = function () {
                            if (this.selectedChildUri() !== "") {
                                this.selectedChildUri('');
                                this.selectedChildNumber('');
                                this.viewCurrentDocument();
                            }
                        };
                        RevisionChildListPanel.prototype.showCurrentRevisionDocument = function () {
                            var _this = this;
                            this.selectedChildUri("");
                            var deferred = new $.Deferred();
                            deferred.done(function (html, realPath) {
                                _this.updateHtml(html, realPath, "");
                            });
                            var originalRevision = new HPTRIM.TrimRecordDefaultRevisionRequest(this.trimClient, this.mainObjectUri);
                            var request = originalRevision.doRequest(deferred);
                        };
                        RevisionChildListPanel.prototype.select = function (childObject, event) {
                            if (childObject) {
                                if (childObject.Uri) {
                                    this.currentChildObject(childObject);
                                    if (this.selectedChildUri() == childObject.Uri) {
                                        this.showCurrentDocument();
                                        this.selectedChildIsPreserved(false);
                                    }
                                    else {
                                        if (childObject.Uri) {
                                            this.selectedChildUri(childObject.Uri);
                                        }
                                        if (childObject.RecordRevisionRevisionNumber != undefined) {
                                            this.selectedChildNumber(childObject.RecordRevisionRevisionNumber.displayValue);
                                        }
                                        if (childObject.RecordRevisionPreserve != undefined) {
                                            this.selectedChildIsPreserved(childObject.RecordRevisionPreserve.RawValue);
                                        }
                                    }
                                }
                                else {
                                    this.showCurrentDocument();
                                    this.selectedChildIsPreserved(false);
                                }
                            }
                        };
                        RevisionChildListPanel.prototype.showRenditions = function (rawRecord) {
                            var _this = this;
                            this.revision(false);
                            this.rendition(true);
                            this.templateName("RecordRenditionTemplate");
                            var renditionArray = rawRecord.ChildRenditions;
                            var renditionsWithDisplayItemProperties = [];
                            _.each(renditionArray, function (currentRenditionObject) {
                                var currentRenditionObjectToRender = {};
                                var makeDisplayItemsForProperties = function (properties) {
                                    _.each(properties, function (propertyName) {
                                        var propertyWithDef = _.extend({}, currentRenditionObject[propertyName], _this.propertyDefinitionArray[propertyName]);
                                        var displayItem = HP.HPTRIM.Utils.TrimHelper.makePropertyOrFieldDisplayItem(propertyWithDef, currentRenditionObject, _this.trimClient);
                                        displayItem.renderer = HP.HPTRIM.App.Panels.Plugins.PropertyRenderer.make(displayItem);
                                        currentRenditionObjectToRender[propertyName] = displayItem;
                                    });
                                };
                                makeDisplayItemsForProperties(_this.titleRenditionProperties);
                                makeDisplayItemsForProperties(_this.renditionProperties);
                                currentRenditionObjectToRender.Uri = currentRenditionObject.Uri;
                                renditionsWithDisplayItemProperties.push(currentRenditionObjectToRender);
                            });
                            this.childObjects(renditionsWithDisplayItemProperties);
                        };
                        RevisionChildListPanel.prototype.refreshRendition = function (uri) {
                            var _this = this;
                            this.mainObjectUri = uri;
                            var forUri = uri;
                            var request = new HP.HPTRIM.TrimObjectInformationRequest(this.trimClient, forUri, HP.HPTRIM.BaseObjectTypes.Record, "ChildRenditions");
                            request.includePropertiesDef();
                            request.includeBothStringValueAndRawValue();
                            request.setStringDisplayType("TreeColumn");
                            request.doRequest().done(function (result) {
                                _this.propertyDefinitionArray = _.indexBy(result.PropertiesAndFields.RecordRendition, "Id");
                                if (result.Results && result.Results.length > 0) {
                                    _this.showRenditions(result.Results[0]);
                                }
                            }).fail(function (errorResponse) {
                                var errorMsg = HP.HPTRIM.Messages.web_unableToConnectToWebServices;
                                if (errorResponse.ResponseStatus && errorResponse.ResponseStatus.Message) {
                                    errorMsg = errorResponse.ResponseStatus.Message;
                                }
                                if (errorResponse.responseJSON && errorResponse.responseJSON.ResponseStatus && errorResponse.responseJSON.ResponseStatus.Message) {
                                    errorMsg = errorResponse.responseJSON.ResponseStatus.Message;
                                }
                                ko.postbox.publish(App.TRIMApp.NOTIFICATION_ERROR_TOPIC, errorMsg);
                            });
                        };
                        RevisionChildListPanel.prototype.viewRendition = function (childUri) {
                            var _this = this;
                            if (childUri == '') {
                                return;
                            }
                            var lcCurrentChildObject = this.currentChildObject();
                            if (lcCurrentChildObject.RecordRenditionTypeOfRendition != undefined) {
                                var lcRenditionType = lcCurrentChildObject.RecordRenditionTypeOfRendition.RawValue;
                                var longevityPath = HPTRIM.BaseObjectTypes.Record.path + "/" + this.mainObjectUri + "/Children/RecordRendition/" + childUri + "/Rendition/Longevity?inline";
                                if (lcRenditionType.toLowerCase() == "longevity") {
                                    this.resetloading();
                                    var realResourcePath = this.trimClient.getUrl(longevityPath);
                                    var renditionHtml = "<iframe style='border:none' width=100% height=100% src='" + realResourcePath + "'></iframe>";
                                    this.updateRenditionHtml(renditionHtml, this.mainObjectUri, realResourcePath, childUri);
                                }
                                else {
                                    var renditionRequest = new HPTRIM.TrimRecordChildRenditionRequest(this.trimClient, this.mainObjectUri, childUri);
                                    var deferred = new $.Deferred();
                                    this.resetloading();
                                    deferred.done(function (html, realPath, cUri) {
                                        if (cUri === void 0) { cUri = _this.selectedChildUri(); }
                                        _this.updateRenditionHtml(html, _this.mainObjectUri, realPath, cUri);
                                    });
                                    renditionRequest.doRequest(deferred);
                                }
                            }
                        };
                        RevisionChildListPanel.prototype.reset = function () {
                            this.childObjects([]);
                            this.selectedChildUri('');
                            this.selectedChildNumber('');
                            this.selectedChildIsPreserved(false);
                        };
                        RevisionChildListPanel.prototype.getRevisionList = function (uri) {
                            if (!uri) {
                                throw "No uri supplied";
                            }
                            this.refresh(uri);
                        };
                        RevisionChildListPanel.prototype.hide = function () {
                            var clear = '0';
                            this.refresh(clear);
                        };
                        return RevisionChildListPanel;
                    }(HP.HPTRIM.Framework.Components.Layouts.Panel));
                    ChildList.RevisionChildListPanel = RevisionChildListPanel;
                })(ChildList = Panels.ChildList || (Panels.ChildList = {}));
            })(Panels = App.Panels || (App.Panels = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Panels;
            (function (Panels) {
                var ChildList;
                (function (ChildList) {
                    "use strict";
                    var RenditionChildListPanel = (function (_super) {
                        __extends(RenditionChildListPanel, _super);
                        function RenditionChildListPanel(trimClient) {
                            var _this = this;
                            _super.call(this, 'RecordRenditionTemplate');
                            this.childObjects = ko.observableArray([]);
                            this.selectedChildUri = ko.observable('');
                            this.propertyDefinitionArray = null;
                            this.titleProperties = [];
                            this.properties = [];
                            this.mainObjectUri = "";
                            this.updateHtml = function (html, uri, realPath, childUri) { };
                            this.viewCurrentDocument = function () { };
                            this.resetloading = function () { };
                            this.handleCurrentDocumentChange = function () {
                            };
                            this.trimClient = trimClient;
                            this.properties = ['Uri',
                                'RecordRenditionAddedOn',
                                'RecordRenditionBytes',
                                'RecordRenditionConfidenceLevel',
                                'RecordRenditionDateModified',
                                'RecordRenditionDescription',
                                'RecordRenditionEStore',
                                'RecordRenditionEStoreId',
                                'RecordRenditionExtension',
                                'RecordRenditionMimeType',
                                'RecordRenditionNbrPages',
                                'RecordRenditionNotes',
                                'RecordRenditionPageNumber',
                                'RecordRenditionTypeOfRendition'
                            ];
                            this.titleProperties = ['RecordRenditionDescription'];
                            this.properties = ['RecordRenditionDateModified', 'RecordRenditionExtension', 'RecordRenditionTypeOfRendition', 'RecordRenditionAddedOn', 'RecordRenditionNotes'];
                            this.selectedChildUri.subscribe(function (newChildUri) {
                                if (newChildUri && newChildUri !== "") {
                                    _this.viewRendition(newChildUri);
                                }
                            });
                        }
                        RenditionChildListPanel.prototype.showRenditions = function (rawRecord) {
                            var _this = this;
                            var renditionArray = rawRecord.ChildRenditions;
                            var renditionsWithDisplayItemProperties = [];
                            _.each(renditionArray, function (currentRenditionObject) {
                                var currentRenditionObjectToRender = {};
                                var makeDisplayItemsForProperties = function (properties) {
                                    _.each(properties, function (propertyName) {
                                        var propertyWithDef = _.extend({}, currentRenditionObject[propertyName], _this.propertyDefinitionArray[propertyName]);
                                        var displayItem = HP.HPTRIM.Utils.TrimHelper.makePropertyOrFieldDisplayItem(propertyWithDef, currentRenditionObject, _this.trimClient);
                                        displayItem.renderer = HP.HPTRIM.App.Panels.Plugins.PropertyRenderer.make(displayItem);
                                        currentRenditionObjectToRender[propertyName] = displayItem;
                                    });
                                };
                                makeDisplayItemsForProperties(_this.titleProperties);
                                makeDisplayItemsForProperties(_this.properties);
                                currentRenditionObjectToRender.Uri = currentRenditionObject.Uri;
                                renditionsWithDisplayItemProperties.push(currentRenditionObjectToRender);
                            });
                            this.childObjects(renditionsWithDisplayItemProperties);
                            if (renditionArray[0]) {
                                if (renditionArray[0].Uri) {
                                    if (this.selectedChildUri() != renditionArray[0].Uri) {
                                        this.selectedChildUri(renditionArray[0].Uri);
                                    }
                                }
                                else {
                                    this.showCurrentDocument();
                                }
                            }
                        };
                        RenditionChildListPanel.prototype.refresh = function (uri) {
                            var _this = this;
                            this.mainObjectUri = uri;
                            var forUri = uri;
                            var request = new HP.HPTRIM.TrimObjectInformationRequest(this.trimClient, forUri, HP.HPTRIM.BaseObjectTypes.Record, "ChildRenditions");
                            request.includePropertiesDef();
                            request.includeBothStringValueAndRawValue();
                            request.setStringDisplayType("TreeColumn");
                            request.doRequest().done(function (result) {
                                _this.propertyDefinitionArray = _.indexBy(result.PropertiesAndFields.RecordRendition, "Id");
                                if (result.Results && result.Results.length > 0) {
                                    _this.showRenditions(result.Results[0]);
                                }
                            }).fail(function (errorResponse) {
                                var errorMsg = HP.HPTRIM.Messages.web_unableToConnectToWebServices;
                                if (errorResponse.ResponseStatus && errorResponse.ResponseStatus.Message) {
                                    errorMsg = errorResponse.ResponseStatus.Message;
                                }
                                if (errorResponse.responseJSON && errorResponse.responseJSON.ResponseStatus && errorResponse.responseJSON.ResponseStatus.Message) {
                                    errorMsg = errorResponse.responseJSON.ResponseStatus.Message;
                                }
                                ko.postbox.publish(App.TRIMApp.NOTIFICATION_ERROR_TOPIC, errorMsg);
                            });
                        };
                        RenditionChildListPanel.prototype.viewRendition = function (childUri) {
                            var _this = this;
                            if (childUri == '') {
                                return;
                            }
                            var renditionRequest = new HPTRIM.TrimRecordChildRenditionRequest(this.trimClient, this.mainObjectUri, childUri);
                            var deferred = new $.Deferred();
                            this.resetloading();
                            deferred.done(function (html, realPath, cUri) {
                                if (cUri === void 0) { cUri = _this.selectedChildUri(); }
                                _this.updateHtml(html, _this.mainObjectUri, realPath, cUri);
                            });
                            renditionRequest.doRequest(deferred);
                        };
                        RenditionChildListPanel.prototype.showCurrentDocument = function () {
                            if (this.selectedChildUri() !== "") {
                                this.selectedChildUri('');
                                this.viewCurrentDocument();
                            }
                        };
                        RenditionChildListPanel.prototype.select = function (childObject, event) {
                            if (childObject) {
                                if (childObject.Uri) {
                                    if (this.selectedChildUri() != childObject.Uri) {
                                        this.selectedChildUri(childObject.Uri);
                                    }
                                }
                                else {
                                    this.showCurrentDocument();
                                }
                            }
                        };
                        RenditionChildListPanel.prototype.reset = function () {
                            this.childObjects([]);
                            this.selectedChildUri('');
                        };
                        RenditionChildListPanel.prototype.getRenditionList = function (uri) {
                            if (!uri) {
                                throw "No uri supplied";
                            }
                            this.refresh(uri);
                        };
                        RenditionChildListPanel.prototype.hide = function () {
                            var clear = '0';
                            this.refresh(clear);
                        };
                        return RenditionChildListPanel;
                    }(HP.HPTRIM.Framework.Components.Layouts.Panel));
                    ChildList.RenditionChildListPanel = RenditionChildListPanel;
                })(ChildList = Panels.ChildList || (Panels.ChildList = {}));
            })(Panels = App.Panels || (App.Panels = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Panels;
            (function (Panels) {
                "use strict";
                var WorkflowCommandPanel = (function (_super) {
                    __extends(WorkflowCommandPanel, _super);
                    function WorkflowCommandPanel(cssClass) {
                        _super.call(this, 'templates/Activity/ActivitiesCommandPanel', true);
                        this.initiateWorkflowFromTemplate = function () { throw "initiateWorkflowFromTemplate function has not been assigned"; };
                        this.workflowTitle = ko.observable("");
                        this.activityTitle = ko.observable("");
                        this.currentQuery = "";
                        this.queryList = [];
                        this.queryBoxCallback = function () { };
                        this.hasWorkflowCreatePrm = ko.observable(false);
                        this.QUERY_EXECUTE_LENGTH = 3;
                        this.workflowsSelected = ko.observable(false);
                        this.activitesDueSelected = ko.observable(false);
                        this.activitesIncompleteSelected = ko.observable(false);
                        this.showingRecords = ko.observable(false);
                        this.showingActivitiesForWorkflow = ko.observable(false);
                        this.showingRecordsFromActivity = ko.observable(false);
                        this.showingRecordsFromWorkflow = ko.observable(false);
                        this.showingActivityDocumentsFromActivity = ko.observable(false);
                        if (cssClass) {
                            this.cssClass(cssClass);
                        }
                        var me = this;
                        this.createObject = HP.HPTRIM.Messages.core_new;
                        this.searchAheadEnabled = ko.observable(HPTRIM.Config.searchAhead);
                        this.showWorkflows = function () {
                        };
                        this.showActivitiesDue = function () {
                        };
                        this.showActivitiesIncomplete = function () {
                        };
                        this.returnToWorkflow = function () {
                            this.returnToWorkflowDefaultBehaviour();
                        };
                        this.returnToActivities = function () {
                        };
                        this.returnToWorkflowDefaultBehaviour = function () {
                        };
                        this.executeQuery = function (query, clearResults, sortBy, prupose) {
                        };
                        this.initiateWorkflowClick = function () {
                            me.initiateWorkflowFromTemplate();
                        };
                    }
                    WorkflowCommandPanel.prototype.deselectAllButtons = function () {
                        this.workflowsSelected(false);
                        this.activitesDueSelected(false);
                        this.activitesIncompleteSelected(false);
                    };
                    WorkflowCommandPanel.prototype.resetView = function () {
                        this.showingRecords(false);
                        this.showingActivitiesForWorkflow(false);
                        this.showingRecordsFromActivity(false);
                        this.showingRecordsFromWorkflow(false);
                        this.showingActivityDocumentsFromActivity(false);
                    };
                    WorkflowCommandPanel.prototype.timerComplete = function () {
                        if (this.queryList.length > 0) {
                            var query = this.queryList[0];
                            this.queryList.splice(0, 1);
                            if (this.queryList.length == 0) {
                                this.executeQuery(query, false);
                                this.addQueryToHistory(query);
                            }
                        }
                    };
                    return WorkflowCommandPanel;
                }(HP.HPTRIM.Framework.Components.Layouts.Panel));
                Panels.WorkflowCommandPanel = WorkflowCommandPanel;
            })(Panels = App.Panels || (App.Panels = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Panels;
            (function (Panels) {
                "use strict";
                var WorkflowPanel = (function (_super) {
                    __extends(WorkflowPanel, _super);
                    function WorkflowPanel(trimClient, fileUploadProvider) {
                        var _this = this;
                        _super.call(this);
                        this.handleExpandClick = function (uri) { };
                        this.handleRenditionViewClick = function () { };
                        this.handleMinimiseClick = function (uri) { };
                        this.warningHandler = function (title, errors, continueCallback) { continueCallback(); };
                        this.handleViewClick = function (uriFromTemplate, extensionFromTemplate, passedInRecNumber, passedInRecTitle, revisionCount, recordIsCheckedOut) { };
                        this.searchBarQueryUpdater = function (query, objectType) { };
                        var me = this;
                        var toggleVisibleFunction = function (event) {
                            $('#' + me.id + ' .as-spa-content-additional').toggleClass('active');
                            if ($('#' + me.id + ' .as-spa-content-additional').hasClass('active')) {
                                $("#" + me.id + " .as-spa-content-primary").css('width', "15%");
                                $("#" + me.id + " .as-spa-content-additional").css('width', "25%");
                                $("#" + me.id + " .as-spa-content-additional").closest(".active").css('height', "calc(100% - 95px)");
                                $("#" + me.id + " .as-spa-content-main").css('width', "60%");
                            }
                            else {
                                $("#" + me.id + " .as-spa-content-primary").css('width', "15%");
                                $("#" + me.id + " .as-spa-content-main").css('width', "85%");
                                $("#" + me.id + " .as-spa-content-additional").css('width', "");
                            }
                        };
                        this.objectPropertiesPanel = new HP.HPTRIM.App.Panels.Plugins.ObjectPropertiesPanel(trimClient, toggleVisibleFunction);
                        this.initialiseAdditionalPanel(this.objectPropertiesPanel);
                        this.objectPropertiesPanel.visible(false);
                        this.executedQuery = "";
                        this.completeActivity = function () { throw "This function has not been set"; };
                        this.uncompleteActivity = function () { throw "This function has not been set"; };
                        this.trimClient = trimClient;
                        this.fileUploadProvider = fileUploadProvider;
                        this.activityDocumentCommandPanel = new Panels.AttachingActivityDocumentCommandPanel(trimClient, fileUploadProvider);
                        this.workflowCommandPanel = new Panels.WorkflowCommandPanel();
                        this.primaryPanel.visible(true);
                        this.primaryPanel.panels([this.workflowCommandPanel]);
                        this.currentPanelId = WorkflowPanel.ACTIVITIES_DUE_VIEW_ID;
                        this.reportCommandPanel = new Panels.ReportCommandPanel(this.trimClient);
                        this.activityDetailComponent = new Panels.ActivityDetails.ActivityDetailComponent(this.trimClient);
                        this.recordsDetailComponent = new Panels.RecordDetails.RecordsDetailComponent(this.trimClient);
                        this.workflowDetailComponent = new Panels.Workflow.WorkflowDetailComponent(this.trimClient);
                        this.documentDetailComponent = new Panels.ActivityDetails.ActivityDocumentDetailComponent(this.trimClient);
                        this.searching = ko.observable(false);
                        this.searchingString = ko.observable("");
                        this.noResults = ko.observable(false);
                        this.displayQuery = true;
                        this.queryDisplayString = ko.observable("");
                        this.currentQuery = ko.observable("");
                        this.selectedUri = ko.observable("");
                        this.showSelected = ko.observable(false);
                        this.selectAllCheckbox = ko.observable(false);
                        this.selections = ko.observableArray([]);
                        this.showingActivityDocuments = ko.observable(false);
                        this.namedHistoryState = {};
                        var activityQuery = { searchString: WorkflowPanel.GET_ASSIGNED_TO_ME_QUERY(), baseObjectType: HPTRIM.BaseObjectTypes.Activity, sortBy: WorkflowPanel.ACTIVITY_DUE_SORTBY };
                        var workflowQuery = { searchString: WorkflowPanel.GET_ALL_WORKFLOW_QUERY(), baseObjectType: HPTRIM.BaseObjectTypes.Workflow, sortBy: WorkflowPanel.DATEDUE_SORTBY };
                        var recordQuery = { searchString: WorkflowPanel.RECORDS_DUE_QUERY, baseObjectType: HPTRIM.BaseObjectTypes.Record, sortBy: WorkflowPanel.DATEDUE_SORTBY };
                        var activityDocumentQuery = { searchString: "", baseObjectType: HPTRIM.BaseObjectTypes.Activity };
                        var me = this;
                        var pagingSearchCallback = function () {
                            me.searching(true);
                            me.activityItemListPanel.getItemList().items([]);
                            me.workflowItemListPanel.getItemList().items([]);
                            me.recordItemListPanel.getItemList().items([]);
                            me.objectPropertiesPanel.visible(false);
                        };
                        this.activityItemListPanel = new HP.HPTRIM.App.Panels.ItemList.TrimPagingItemListPanel(this.trimClient, this, "Searching ", activityQuery, pagingSearchCallback, function () { me.searching(false), me.finishedLoading(); });
                        this.activityItemListPanel.getTrimItemListLoader().properties = ['Name', 'Icon', 'Workflow', 'activityState', 'dateDue', 'isOverDue', 'activitysupervisor', 'assignedto'];
                        this.activityItemListPanel.getPagingPlugin().generateEvent = function (page) { me.updatePageHistory(); };
                        this.activityItemListPanel.getItemList().templateName('templates/Activity/ActivitiesPanelItemList');
                        this.workflowItemListPanel = new HP.HPTRIM.App.Panels.ItemList.TrimPagingItemListPanel(this.trimClient, this, "Searching", workflowQuery, pagingSearchCallback, function () { me.searching(false), me.finishedLoading(); });
                        this.workflowItemListPanel.getTrimItemListLoader().properties = ['Name', 'Icon', 'dataDue', 'WorkflowWorkflowPriority', 'WorkflowPercentageCompleted'];
                        this.workflowItemListPanel.getPagingPlugin().generateEvent = function (page) { me.updatePageHistory(); };
                        this.workflowItemListPanel.getItemList().templateName('templates/Workflow/WorkflowPanelItemList');
                        this.recordItemListPanel = new HP.HPTRIM.App.Panels.ItemList.TrimPagingItemListPanel(this.trimClient, this, "Searching ", recordQuery, pagingSearchCallback, function () { me.searching(false), me.finishedLoading(); });
                        this.recordItemListPanel.getPagingPlugin().generateEvent = function (page) { me.updatePageHistory(); };
                        this.recordItemListPanel.getItemList().templateName('templates/Record/WorkflowRecordsPanelItemList');
                        this.documentItemListPanel = new HP.HPTRIM.App.Panels.ItemList.TrimPagingItemListPanel(this.trimClient, this, "Searching", activityDocumentQuery, pagingSearchCallback, function () { me.searching(false), me.finishedLoading(); });
                        this.documentItemListPanel.setTrimItemListLoader(new HP.HPTRIM.DataLoader.ChildObjectItemListLoader(this.trimClient, "", HPTRIM.BaseObjectTypes.Activity, 'ChildDocuments', true));
                        this.documentItemListPanel.getPagingPlugin().generateEvent = function (page) { me.updatePageHistory(); };
                        var activityDocItemList = this.documentItemListPanel.getItemList();
                        activityDocItemList.templateName('templates/Activity/ActivityDocumentsPanelItemList');
                        activityDocItemList.registerItemExtender(new HP.HPTRIM.App.Panels.ItemList.ActivityDocumentItemExtender(this.trimClient));
                        var updateDataFromResult = function (result) {
                            var items = me.recordItemListPanel.getItemList().items();
                            for (var i = 0; i < items.length; i++) {
                                if (items[i].Fields.Uri == result.Uri) {
                                    var currentItem = items[i];
                                    var newItem = jQuery.extend(true, {}, currentItem);
                                    if (result.RecordTypedTitle && currentItem != result.RecordTypedTitle.Value) {
                                        newItem.Fields.RecordTitle = result.RecordTypedTitle.Value;
                                        me.recordItemListPanel.getItemList().items.replace(currentItem, newItem);
                                        me.recordItemListPanel.getItemList().items.valueHasMutated();
                                    }
                                }
                            }
                            var docItems = me.documentItemListPanel.getItemList().items();
                            for (var i = 0; i < docItems.length; i++) {
                                var rawItemRecord = docItems[i].Fields.ActivityDocumentRecord;
                                if (rawItemRecord) {
                                    if (rawItemRecord.Uri == result.Uri) {
                                        var currentItem = docItems[i];
                                        var newItem = jQuery.extend(true, {}, currentItem);
                                        if (result.RecordTypedTitle && currentItem.Fields.ActivityDocumentRecord.RecordTitle != result.RecordTypedTitle.Value) {
                                            newItem.Fields.ActivityDocumentRecord.RecordTitle = result.RecordTypedTitle.Value;
                                            newItem.Fields.ActivityDocumentTitle = result.RecordTypedTitle.Value;
                                            if (newItem.recordInfo && newItem.recordInfo() && newItem.recordInfo().RecordTitle) {
                                                newItem.recordInfo().RecordTitle.Value = result.RecordTypedTitle.Value;
                                                newItem.recordInfo.valueHasMutated();
                                            }
                                            me.documentItemListPanel.getItemList().items.replace(currentItem, newItem);
                                            me.documentItemListPanel.getItemList().items.valueHasMutated();
                                        }
                                    }
                                }
                            }
                        };
                        this.recordItemListPanel.updateDataFromResult = updateDataFromResult;
                        var activityUpdateList = function (result) {
                            var items = me.activityItemListPanel.getItemList().items();
                            for (var i = 0; i < items.length; i++) {
                                if (items[i].Fields.Uri == result.Uri) {
                                    var currentItem = items[i];
                                    var newItem = jQuery.extend(true, {}, currentItem);
                                    if (result.ActivityAssignedTo) {
                                        newItem.Fields.ActivityAssignedTo = result.ActivityAssignedTo;
                                        me.recordItemListPanel.getItemList().items.replace(currentItem, newItem);
                                        me.recordItemListPanel.getItemList().items.valueHasMutated();
                                    }
                                }
                            }
                        };
                        this.activityItemListPanel.updateDataFromResult = activityUpdateList;
                        this.mainPanel.panels.push(this.activityItemListPanel);
                        var simpleCallback = function () {
                            me.getActiveDetailComponent().refresh();
                        };
                        var returnCallback = function (message, result) {
                            var itemList = me.getActiveItemListPanel();
                            var detailComponent = me.getActiveDetailComponent();
                            if (message) {
                                detailComponent.actionResult(message);
                                detailComponent.actionResultDisplay(true);
                                detailComponent.doFadeInOutOnInformationalText();
                            }
                            if (result) {
                                detailComponent.useCachedResult(result);
                                itemList.updateDataFromResult(result);
                            }
                        };
                        this.activityDetailsCallback = function (uri, simpleCallback, returnCallback) {
                            me.activityDetailComponent.actionResult(HP.HPTRIM.Messages.web_unableToDisplayDetailsNow);
                            me.activityDetailComponent.actionResultDisplay(true);
                        };
                        this.activityDetailComponent.updateOwningItemList = function (uri, name) {
                            me.activityItemListPanel.getItemList().load();
                        };
                        this.activityDetailComponent.updateOwningItemListAssignee = function (uri, assignee) {
                            var currentActivityItems = me.activityItemListPanel.getItemList().items();
                            var itemToUpdate = _.find(currentActivityItems, function (item) {
                                return item.Fields.Uri == uri;
                            });
                            if (itemToUpdate) {
                                var newItem = $.extend(true, {}, itemToUpdate);
                                newItem.Fields.ActivityAssignedTo = assignee;
                                me.activityItemListPanel.getItemList().items.replace(itemToUpdate, newItem);
                                me.activityItemListPanel.getItemList().items.valueHasMutated();
                            }
                        };
                        this.activityDetailComponent.showRecords = function () {
                            var currentPanelId = me.currentPanelId;
                            var currentQuery = me.currentQuery();
                            var currentPage = me.activityItemListPanel.getPagingPlugin().currentPage();
                            var uri = me.selectedUri();
                            var returnToWorkflowTitle = me.workflowCommandPanel.workflowTitle();
                            var returnToWorkflow = me.workflowCommandPanel.returnToWorkflow;
                            var activeItemList = me.getActiveItemListPanel();
                            var canReturnToWorkflow = me.workflowCommandPanel.showingActivitiesForWorkflow();
                            var fullState = {};
                            fullState.showingRecords = true;
                            fullState.showingRecordsFromActivity = true;
                            fullState.returnToPanelId = currentPanelId;
                            fullState.returnToQuery = currentQuery;
                            fullState.returnToPage = currentPage;
                            fullState.returnToUri = uri;
                            fullState.returnToWorkflowTitle = returnToWorkflowTitle;
                            fullState.canReturnToWorkflow = canReturnToWorkflow;
                            _this.historyFullState = fullState;
                            _this.workflowCommandPanel.returnToActivities = function () {
                                me.prepareView();
                                if (canReturnToWorkflow) {
                                    me.workflowCommandPanel.returnToWorkflow = returnToWorkflow;
                                    me.workflowCommandPanel.showingActivitiesForWorkflow(true);
                                }
                                else {
                                    switch (_this.historyFullState.returnToPanelId) {
                                        case WorkflowPanel.ACTIVITIES_DUE_VIEW_ID:
                                            me.workflowCommandPanel.deselectAllButtons();
                                            me.workflowCommandPanel.activitesDueSelected(true);
                                            me.historyFullState = {};
                                            break;
                                        case WorkflowPanel.ACTIVITIES_INCOMPLETE_VIEW_ID:
                                            me.workflowCommandPanel.deselectAllButtons();
                                            me.workflowCommandPanel.activitesIncompleteSelected(true);
                                            me.historyFullState = {};
                                            break;
                                    }
                                }
                                me.currentPanelId = currentPanelId;
                                me.currentQuery(currentQuery);
                                me.updateView(activeItemList, currentQuery);
                                activeItemList.getPagingPlugin().currentPage(currentPage);
                                me.selectedUri(uri);
                            };
                            for (var i = 0; i < me.activityItemListPanel.getItemList().items().length; i++) {
                                if (me.activityItemListPanel.getItemList().items()[i].Fields.Uri == me.selectedUri()) {
                                    me.workflowCommandPanel.activityTitle(me.activityItemListPanel.getItemList().items()[i].Fields.ActivityName);
                                    break;
                                }
                            }
                            var query = "activity:" + me.selectedUri();
                            me.updateView(_this.recordItemListPanel, query);
                            me.prepareView();
                            me.workflowCommandPanel.showingRecords(true);
                            me.workflowCommandPanel.showingRecordsFromActivity(true);
                            me.workflowCommandPanel.showingActivitiesForWorkflow(false);
                            me.currentPanelId = WorkflowPanel.RECORDS_VIEW_ID;
                            me.showingActivityDocuments(true);
                            me.updateHistory(WorkflowPanel.RECORDS_VIEW_ID, query, "", 0, fullState);
                        };
                        this.activityDetailComponent.showDocuments = function () {
                            var currentPanelId = me.currentPanelId;
                            var currentQuery = me.currentQuery();
                            var currentPage = me.activityItemListPanel.getPagingPlugin().currentPage();
                            var uri = me.selectedUri();
                            var returnToWorkflowTitle = me.workflowCommandPanel.workflowTitle();
                            var returnToWorkflow = me.workflowCommandPanel.returnToWorkflow;
                            var activeItemList = me.getActiveItemListPanel();
                            var canReturnToWorkflow = me.workflowCommandPanel.showingActivitiesForWorkflow();
                            _this.showingActivityDocuments(true);
                            if (_this.namedHistoryState["ReturnActivityListFromShowDocuments"] == undefined) {
                                var fullState = {};
                                fullState.showingRecords = true;
                                fullState.showingRecordsFromActivity = true;
                                fullState.returnToPanelId = currentPanelId;
                                fullState.returnToQuery = currentQuery;
                                fullState.returnToPage = currentPage;
                                fullState.returnToUri = uri;
                                fullState.returnToWorkflowTitle = returnToWorkflowTitle;
                                fullState.canReturnToWorkflow = canReturnToWorkflow;
                                _this.namedHistoryState["ReturnActivityListFromShowDocuments"] = fullState;
                                _this.workflowCommandPanel.returnToActivities = function () {
                                    me.prepareView();
                                    var stateToReturn = _this.namedHistoryState["ReturnActivityListFromShowDocuments"];
                                    if (stateToReturn.canReturnToWorkflow) {
                                        me.workflowCommandPanel.returnToWorkflow = returnToWorkflow;
                                        me.workflowCommandPanel.showingActivitiesForWorkflow(true);
                                    }
                                    else {
                                        switch (stateToReturn.returnToPanelId) {
                                            case WorkflowPanel.ACTIVITIES_DUE_VIEW_ID:
                                                me.workflowCommandPanel.deselectAllButtons();
                                                me.workflowCommandPanel.activitesDueSelected(true);
                                                break;
                                            case WorkflowPanel.ACTIVITIES_INCOMPLETE_VIEW_ID:
                                                me.workflowCommandPanel.deselectAllButtons();
                                                me.workflowCommandPanel.activitesIncompleteSelected(true);
                                                break;
                                        }
                                    }
                                    me.currentPanelId = stateToReturn.returnToPanelId;
                                    me.currentQuery(stateToReturn.returnToQuery);
                                    me.updateView(activeItemList, stateToReturn.returnToQuery);
                                    activeItemList.getPagingPlugin().currentPage(stateToReturn.returnToPage);
                                    me.selectedUri(stateToReturn.returnToUri);
                                    _this.namedHistoryState["ReturnActivityListFromShowDocuments"] = undefined;
                                };
                            }
                            for (var i = 0; i < me.activityItemListPanel.getItemList().items().length; i++) {
                                if (me.activityItemListPanel.getItemList().items()[i].Fields.Uri == me.selectedUri()) {
                                    me.workflowCommandPanel.activityTitle(me.activityItemListPanel.getItemList().items()[i].Fields.ActivityName);
                                    break;
                                }
                            }
                            me.currentPanelId = WorkflowPanel.ACTIVITY_DOCUMENT_VIEW_ID;
                            var queryString = 'uri: ' + me.selectedUri();
                            me.documentDetailComponent.setParentUri(me.selectedUri());
                            me.updateView(me.documentItemListPanel, queryString);
                            me.prepareView();
                            me.workflowCommandPanel.showingRecords(true);
                            me.workflowCommandPanel.showingRecordsFromActivity(true);
                            me.workflowCommandPanel.showingActivitiesForWorkflow(false);
                            me.updateHistory(WorkflowPanel.ACTIVITY_DOCUMENT_VIEW_ID, queryString, "", 0, fullState);
                        };
                        this.activityDetailComponent.completeActivity = function () {
                            if (_this.activityDetailComponent.mandatoryPlaceholers() > 0) {
                                var msg = HP.HPTRIM.Messages.wrk_documentNeedsARecordAttached;
                                msg = msg.replace("{0}", _this.activityDetailComponent.firstMandatoryPlaceholderName);
                                me.displayError(msg);
                                return;
                            }
                            else if (!_this.activityDetailComponent.activityResultsComponent.okToComplete()) {
                                var msg = HP.HPTRIM.Messages.wrk_atLeaseOneResultToBeReached;
                                me.displayError(msg);
                                return;
                            }
                            else {
                                _this.completeActivity();
                            }
                        };
                        this.activityDetailComponent.uncompleteActivity = function () {
                            me.uncompleteActivity();
                        };
                        this.workflowDetailsCallback = function (uri, simpleCallback, returnCallback) {
                            me.workflowDetailComponent.actionResult(HP.HPTRIM.Messages.web_unableToDisplayDetailsNow);
                            me.workflowDetailComponent.actionResultDisplay(true);
                        };
                        this.workflowDetailComponent.editDetails = function () {
                            me.workflowDetailsCallback(me.activityDetailComponent.uri, simpleCallback, returnCallback);
                        };
                        this.workflowDetailComponent.showRecords = function () {
                            var currentPanelId = me.currentPanelId;
                            var currentQuery = me.currentQuery();
                            var currentPage = me.workflowItemListPanel.getPagingPlugin().currentPage();
                            var uri = me.selectedUri();
                            var activeItemList = me.getActiveItemListPanel();
                            var fullState = {};
                            fullState.showingRecords = true;
                            fullState.showingRecordsFromWorkflow = true;
                            fullState.returnToPanelId = currentPanelId;
                            fullState.returnToQuery = currentQuery;
                            fullState.returnToPage = currentPage;
                            fullState.returnToUri = uri;
                            _this.historyFullState = fullState;
                            _this.workflowCommandPanel.returnToWorkflow = function () {
                                me.workflowView(currentQuery);
                                activeItemList.getPagingPlugin().currentPage(currentPage);
                                me.selectedUri(uri);
                                me.historyFullState = {};
                                me.updateHistory(WorkflowPanel.WORKFLOW_VIEW_ID, currentQuery, uri, currentPage);
                            };
                            for (var i = 0; i < me.workflowItemListPanel.getItemList().items().length; i++) {
                                if (me.workflowItemListPanel.getItemList().items()[i].Fields.Uri == me.selectedUri()) {
                                    me.workflowCommandPanel.workflowTitle(me.workflowItemListPanel.getItemList().items()[i].Fields.WorkflowName);
                                    break;
                                }
                            }
                            var query = "workflow:" + me.selectedUri();
                            me.updateView(_this.recordItemListPanel, query);
                            me.prepareView();
                            me.workflowCommandPanel.showingRecords(true);
                            me.workflowCommandPanel.showingRecordsFromWorkflow(true);
                            me.currentPanelId = WorkflowPanel.RECORDS_VIEW_ID;
                            me.showingActivityDocuments(false);
                            me.updateHistory(WorkflowPanel.RECORDS_VIEW_ID, query, "", 0, fullState);
                        };
                        this.workflowDetailComponent.showActivities = function () {
                            var currentPanelId = me.currentPanelId;
                            var currentQuery = me.currentQuery();
                            var currentPage = me.workflowItemListPanel.getPagingPlugin().currentPage();
                            var uri = me.selectedUri();
                            var activeItemList = me.getActiveItemListPanel();
                            var fullState = {};
                            fullState.showingActivities = true;
                            fullState.returnToPanelId = currentPanelId;
                            fullState.returnToQuery = currentQuery;
                            fullState.returnToPage = currentPage;
                            fullState.returnToUri = uri;
                            fullState.canReturnToWorkflow = true;
                            _this.historyFullState = fullState;
                            _this.workflowCommandPanel.returnToWorkflow = function () {
                                me.workflowView(currentQuery);
                                activeItemList.getPagingPlugin().currentPage(currentPage);
                                me.selectedUri(uri);
                                me.historyFullState = {};
                                me.updateHistory(WorkflowPanel.WORKFLOW_VIEW_ID, currentQuery, uri, currentPage);
                            };
                            for (var i = 0; i < me.workflowItemListPanel.getItemList().items().length; i++) {
                                if (me.workflowItemListPanel.getItemList().items()[i].Fields.Uri == me.selectedUri()) {
                                    me.workflowCommandPanel.workflowTitle(me.workflowItemListPanel.getItemList().items()[i].Fields.WorkflowName);
                                    break;
                                }
                            }
                            var query = "workflow:" + me.selectedUri();
                            me.updateView(_this.activityItemListPanel, query);
                            me.prepareView();
                            me.workflowCommandPanel.showingActivitiesForWorkflow(true);
                            me.currentPanelId = WorkflowPanel.ACTIVITIES_FOR_WORKFLOW_VIEW_ID;
                            me.updateHistory(WorkflowPanel.ACTIVITIES_FOR_WORKFLOW_VIEW_ID, query, "", 0, fullState);
                        };
                        this.updateGlobalSearchPanelCallback = function (type) { };
                        this.selections.subscribe(function (newValue) {
                            me.reportCommandPanel.selectedCount(newValue.length);
                            if (newValue.length == 1) {
                                if (me.selectedUri() != newValue[0]) {
                                    me.selectedUri(newValue[0]);
                                }
                            }
                        });
                        me.recordsDetailComponent.doReport = function (uri) {
                            uri = "" + uri;
                            if (!_this.selections() || _this.selections.indexOf(uri) == -1) {
                                var currentSelections = _this.selections();
                                currentSelections.push(uri);
                                _this.selections(currentSelections);
                            }
                            me.primaryPanel.panels([_this.reportCommandPanel]);
                        };
                        this.reportCommandPanel.cancel = function () {
                            me.primaryPanel.panels([_this.workflowCommandPanel]);
                        };
                        this.reportCommandPanel.reportUrl = ko.computed(function () {
                            var path = HPTRIM.BaseObjectTypes.Report.path + "/" + me.reportCommandPanel.getSelectedReportUri() + "/PrintToHTML";
                            var fullPath = me.trimClient.getUrl(path);
                            var query = "q=uri=" + me.selections().join(",");
                            return fullPath + "?" + query;
                        });
                        this.reportCommandPanel.doReport = function () {
                            if (me.selections().length == 0) {
                                return false;
                            }
                            if (!me.reportCommandPanel.getSelectedReportName()) {
                                return false;
                            }
                            me.primaryPanel.panels([_this.workflowCommandPanel]);
                            return true;
                        };
                        this.recordsDetailComponent.doActivityDocumentAttach = function (uri) {
                            if (me.currentPanelId == WorkflowPanel.ACTIVITY_DOCUMENT_SUPERCOPY_ID) {
                                _this.selectedSupercopyUri = uri;
                                var requiredProperties = "RecordNumber,RecordRecordType,isElectronic,isContainer,isCheckedOut,RecordContainer,RecordCheckedOutTo,RecordCheckedOutPath,Author,RecordDateModified";
                                var recordInfoRequest = new HPTRIM.TrimRecordInformationRequest(me.trimClient, _this.selectedSupercopyUri, requiredProperties);
                                recordInfoRequest.includePropertiesDef();
                                recordInfoRequest.includeBothStringValueAndRawValue();
                                recordInfoRequest.doRequest().done(function (result) {
                                    var recordInfo = result.Results[0];
                                    var dateCreated = recordInfo.RecordDateModified;
                                    if (me.selectedRtyForSupercopy == undefined || me.selectedRtyForSupercopy == null) {
                                        me.displayError(HP.HPTRIM.Messages.rec_selectRTY);
                                        return;
                                    }
                                    var selectedRtyForSupercopyDataEntryFormDefinition = me.selectedRtyForSupercopy.DataEntryFormDefinition;
                                    var pages = selectedRtyForSupercopyDataEntryFormDefinition.Pages;
                                    for (var i = 0; i < pages.length; i++) {
                                        var pageItems = pages[i].PageItems;
                                        for (var j = 0; j < pageItems.length; j++) {
                                            var item = pageItems[j];
                                            if (item.Caption && item.Caption == "Date Created") {
                                                pageItems.splice(j, 1);
                                                break;
                                            }
                                        }
                                    }
                                    var form = new HP.HPTRIM.Form.RecordDataEntryForm(me.trimClient, me.fileUploadProvider, selectedRtyForSupercopyDataEntryFormDefinition, me.selectedRtyForSupercopy.Uri, null);
                                    form.showFileUploader(false);
                                    if (form.titleDecorator != undefined) {
                                        form.titleDecorator.Value(me.activityDocumentPlaceHolder.Fields.ActivityDocumentTitle);
                                    }
                                    else {
                                        form.freeTextTitle.Value(me.activityDocumentPlaceHolder.Fields.ActivityDocumentTitle);
                                    }
                                    if (form.containerField != undefined) {
                                        var defaultContainer = new HP.HPTRIM.TrimBaseObject(HPTRIM.BaseObjectTypes.Record, me.activityDocumentPlaceHolder.Fields.ActivityDocumentDefaultContainer.Uri, me.activityDocumentPlaceHolder.Fields.ActivityDocumentDefaultContainer.NameString, "");
                                        defaultContainer["iconClass"] = defaultContainer.iconId.toLowerCase() + '_x16 media-object';
                                        form.containerField.setRawValue(defaultContainer.displayValue);
                                        form.containerField.doSearch();
                                        if (form.enclosedField != undefined) {
                                            form.enclosedField.setValue("true");
                                        }
                                    }
                                    else {
                                        form.containerField = null;
                                    }
                                    if (typeof form.dateCreatedField != 'undefined') {
                                        form.dateCreatedField = null;
                                    }
                                    if (form.authorField != undefined) {
                                        form.authorField.setValue(me.trimClient.getDatabase().getCurrentUser());
                                    }
                                    else {
                                        form.preSetKeyValues["RecordAuthor"] = me.trimClient.getDatabase().getCurrentUser();
                                        form.preSetKeyValues["RecordAuthor"].Name = "RecordAuthor";
                                    }
                                    form.forCreatingSupercopyUri(recordInfo.Uri);
                                    var dataEntryFormPanel = new HP.HPTRIM.App.Panels.RecordDataEntryForm.RecordDataEntryPanel(me.trimClient, me.fileUploadProvider);
                                    dataEntryFormPanel.cancel = function () {
                                        me.activityDocumentCommandPanel.finaliseQuery();
                                    };
                                    dataEntryFormPanel.warningHandler = me.warningHandler;
                                    dataEntryFormPanel.setFormDataEntry(form);
                                    dataEntryFormPanel.doneHandler = function (newRecordUri) {
                                        var activityDocumentInfo = me.documentDetailComponent;
                                        var activityUri = activityDocumentInfo.parentUri;
                                        var documentUri = me.selectedUri();
                                        HP.HPTRIM.Utils.TrimHelper.linkRecordToActivityDocument(me.trimClient, newRecordUri, me.activityDocumentParentUri, me.activityDocumentPlaceHolder.Fields.Uri, function () { me.documentView(me.activityDocumentParentUri, true); });
                                    };
                                    me.mainPanel.panels([dataEntryFormPanel]);
                                }).fail(function (errorResponse) {
                                    var errorMsg = HP.HPTRIM.Messages.web_unableToConnectToWebServices;
                                    if (errorResponse.ResponseStatus && errorResponse.ResponseStatus.Message) {
                                        errorMsg = errorResponse.ResponseStatus.Message;
                                    }
                                    if (errorResponse.responseJSON && errorResponse.responseJSON.ResponseStatus && errorResponse.responseJSON.ResponseStatus.Message) {
                                        errorMsg = errorResponse.responseJSON.ResponseStatus.Message;
                                    }
                                    me.displayError(errorMsg);
                                });
                            }
                            if (me.currentPanelId == WorkflowPanel.ACTIVITY_DOCUMENT_ATTACH_RECORD_ID) {
                                var activityDocumentInfo = _this.documentDetailComponent;
                                var activityUri = activityDocumentInfo.parentUri;
                                var documentUri = _this.selectedUri();
                                HP.HPTRIM.Utils.TrimHelper.linkRecordToActivityDocument(me.trimClient, uri, me.activityDocumentParentUri, me.activityDocumentPlaceHolder.Fields.Uri, function () { me.documentView(me.activityDocumentParentUri, true); });
                            }
                        };
                        this.recordsDetailComponent.doCheckIn = function (recordDetails, options) {
                            me.checkinHandler(recordDetails, options);
                        };
                        this.recordsDetailComponent.doCheckOut = function (uri, successCallback) {
                            me.checkoutHandler(uri, successCallback);
                        };
                        this.recordsDetailComponent.doWebDavEdit = function (uri, successCallback, failCallback) {
                            me.webdavEditHandler(uri, successCallback, failCallback);
                        };
                        this.recordsDetailComponent.doWOPILink = function (uri, action, successCallback, failCallback) {
                            me.wopiLinkHandler(uri, action, successCallback, failCallback);
                        };
                        this.recordsDetailComponent.doConfirmWOPIConversion = function (convDetails) {
                            me.wopiConfirmConversionHandler(convDetails);
                        };
                        this.recordsDetailComponent.doDetach = function (index) {
                            var me = _this;
                            HP.HPTRIM.Utils.TrimHelper.linkRecordToActivityDocument(me.trimClient, 0, me.documentDetailComponent.parentUri, me.activityDetailComponent.documentUris[index()], function () { me.documentView(me.documentDetailComponent.parentUri); });
                        };
                        this.recordsDetailComponent.displayError = function (message) {
                            me.displayError(message);
                        };
                        var simpleCallback = function () {
                            me.recordsDetailComponent.refresh();
                        };
                        this.showItem = function (data, item) {
                            var itemUri = "";
                            me.currentItemListItem = data;
                            if ((me.currentPanelId == WorkflowPanel.ACTIVITY_DOCUMENT_VIEW_ID) && (item != undefined)) {
                                var activityDocumentsArray = me.documentItemListPanel.itemList.items();
                                var activityDocumentsContainsDuplicate = false;
                                var activityDocumentsContainingRecord = activityDocumentsArray.filter(function (arr) { return arr.Fields.hasOwnProperty('ActivityDocumentRecord'); });
                                if (activityDocumentsContainingRecord.filter(function (arr) { return arr.Fields.ActivityDocumentRecord.Uri == item.recordInfo().Uri; }).length > 1)
                                    activityDocumentsContainsDuplicate = true;
                                if (activityDocumentsContainsDuplicate) {
                                    for (var _i = 0, activityDocumentsArray_1 = activityDocumentsArray; _i < activityDocumentsArray_1.length; _i++) {
                                        var activityRecordValue = activityDocumentsArray_1[_i];
                                        activityRecordValue.isDuplicateActivityRecord = ko.observable(false);
                                        if ((item.Fields.ActivityDocumentDocumentId != activityRecordValue.Fields.ActivityDocumentDocumentId)
                                            && (activityRecordValue.Fields.hasOwnProperty('ActivityDocumentRecord'))
                                            && (item.Fields.ActivityDocumentRecord.Uri == activityRecordValue.Fields.ActivityDocumentRecord.Uri)) {
                                            activityRecordValue.isDuplicateActivityRecord = ko.observable(true);
                                        }
                                    }
                                }
                            }
                            if (data.Uri) {
                                itemUri = data.Uri;
                            }
                            if (data.Fields) {
                                itemUri = data.Fields.Uri;
                            }
                            var bypassUnlinkedDocument = false;
                            if (data.Fields && data.Fields.ActivityDocumentStatus && data.Fields.ActivityDocumentStatus == "Unlinked") {
                                bypassUnlinkedDocument = true;
                            }
                            if (!bypassUnlinkedDocument) {
                                if (me.documentDetailComponent == me.getActiveDetailComponent()) {
                                    me.recordsDetailComponent.updateModel(itemUri);
                                }
                            }
                            me.selectedUri(itemUri);
                            me.historySelectUri(itemUri);
                        };
                        this.koShowItem = function (data) {
                            return function () {
                                me.showItem(data);
                            };
                        };
                        this.koHandleViewClick = function (item) {
                            var uriFromTmpl;
                            var extFromTmpl;
                            var recNo;
                            var recTitle;
                            var recordRevisionCount;
                            var recordIsCheckedOut;
                            if (item.Fields) {
                                if (item.Fields.TrimType == 'ActivityDocument') {
                                    uriFromTmpl = item.Fields.ActivityDocumentRecord.Uri;
                                    extFromTmpl = item.Fields.ActivityDocumentRecord.RecordExtension.Value;
                                    recNo = item.Fields.ActivityDocumentRecord.NameString;
                                    recTitle = item.Fields.ActivityDocumentTitle;
                                    recordRevisionCount = 0;
                                    recordIsCheckedOut = item.Fields.RecordIsCheckedOut;
                                }
                                else {
                                    uriFromTmpl = item.Fields.Uri;
                                    extFromTmpl = item.Fields.RecordExtension;
                                    recNo = item.Fields.RecordNumber;
                                    recTitle = item.Fields.RecordTitle;
                                    recordRevisionCount = 0;
                                    recordIsCheckedOut = item.Fields.RecordIsCheckedOut;
                                }
                                _this.handleViewClick(uriFromTmpl, extFromTmpl, recNo, recTitle, recordRevisionCount, recordIsCheckedOut);
                            }
                        };
                        this.closeDetails = function () {
                            me.selectedUri("");
                            me.historySelectUri("");
                        };
                        var hidePropertiesPanel = function () {
                            $('.as-spa-content-main').css({ width: '100%' });
                            me.objectPropertiesPanel.visible(false);
                        };
                        this.displayError = function () {
                        };
                        this.updatePropertiesViewPanel = function (trimObject, additionalInfo) {
                        };
                        this.workflowCommandPanel.showActivitiesDue = function () {
                            me.activitiesDueView();
                            me.updateHistory(WorkflowPanel.ACTIVITIES_DUE_VIEW_ID, WorkflowPanel.GET_ASSIGNED_TO_ME_QUERY());
                        };
                        this.workflowCommandPanel.showWorkflows = function () {
                            me.workflowView(WorkflowPanel.GET_ALL_WORKFLOW_QUERY());
                            me.updateHistory(WorkflowPanel.WORKFLOW_VIEW_ID, WorkflowPanel.GET_ALL_WORKFLOW_QUERY());
                        };
                        this.workflowCommandPanel.showActivitiesIncomplete = function () {
                            me.activitiesIncompleteView();
                            me.updateHistory(WorkflowPanel.ACTIVITIES_INCOMPLETE_VIEW_ID, WorkflowPanel.GET_ACTIVITIES_INCOMPLETE_QUERY());
                        };
                        var searchCallback = function (result) {
                            _this.searching(false);
                            if (me.getActiveItemListPanel().getItemList().items().length == 0) {
                                me.noResults(true);
                            }
                            else {
                                me.noResults(false);
                                if (me.getActiveItemListPanel().getItemList().items().length == 1) {
                                    me.showItem({ Fields: { Uri: me.getActiveItemListPanel().getItemList().items()[0].Fields.Uri } });
                                }
                            }
                            if (result && result.SearchTitle) {
                                me.queryDisplayString(result.SearchTitle);
                            }
                        };
                        this.workflowCommandPanel.executeQuery = function (query, clearResults, sortBy, purpose) {
                            if (query.trim().length == 0) {
                                return;
                            }
                            _this.noResults(false);
                            _this.searching(true);
                            _this.workflowCommandPanel.deselectAllButtons();
                            _this.searchingString(HP.HPTRIM.Messages.web_searching + "...");
                            var isearchQuery = { searchString: query, baseObjectType: me.getActiveItemListPanel().getCurrentType(), sortBy: sortBy };
                            _this.getActiveItemListPanel().updateQuery(isearchQuery, searchCallback, clearResults);
                            _this.queryDisplayString(HP.HPTRIM.Messages.web_query + ": " + "'" + query + "'");
                            _this.currentQuery(query);
                        };
                        this.workflowCommandPanel.addQueryToHistory = function (queryString) {
                            me.updateHistory(me.currentPanelId, me.currentQuery(), me.selectedUri(), _this.getActiveItemListPanel().getPagingPlugin().currentPage(), me.historyFullState);
                        };
                        var selectAll = function () {
                            var items = me.activityItemListPanel.getItemList().items();
                            for (var i = 0; i < items.length; i++) {
                                if (_this.selections().indexOf(String(items[i].Fields.Uri)) == -1) {
                                    _this.selections().push(String(items[i].Fields.Uri));
                                }
                            }
                            _this.selections.valueHasMutated();
                        };
                        var selectNone = function () {
                            var selectionArray = _this.selections();
                            var items = me.activityItemListPanel.getItemList().items();
                            for (var i = 0; i < items.length; i++) {
                                var index = selectionArray.indexOf(String(items[i].Fields.Uri));
                                if (index != -1) {
                                    selectionArray.splice(index, 1);
                                }
                            }
                            _this.selections(selectionArray);
                        };
                        this.selectAllCheckbox.subscribe(function (newValue) {
                            if (me.showSelected()) {
                                if (newValue) {
                                    selectAll();
                                }
                                else {
                                    selectNone();
                                }
                            }
                        });
                        me.priorityCaptions = {};
                        var path = "EnumItem";
                        var requestData = { Enums: "Priority" };
                        me.trimClient.doGet(path, requestData).done(function (data) {
                            var priorities = data.EnumItems.Priority;
                            _.each(priorities, function (priority) {
                                me.priorityCaptions[priority.Name] = priority.Caption;
                            });
                        });
                        me.statusCaptions = {};
                        var path = "EnumItem";
                        var requestData = { Enums: "ActivityStates" };
                        me.trimClient.doGet(path, requestData).done(function (data) {
                            var states = data.EnumItems.ActivityStates;
                            _.each(states, function (state) {
                                me.statusCaptions[state.Name] = state.Caption;
                            });
                        });
                        this.historySelectUri = function (uri) {
                            me.updateHistory(me.currentPanelId, me.currentQuery(), uri, _this.getActiveItemListPanel().getPagingPlugin().currentPage(), me.historyFullState);
                        };
                        this.updatePageHistory = function () {
                            me.updateHistory(me.currentPanelId, me.currentQuery(), "", _this.getActiveItemListPanel().getPagingPlugin().currentPage());
                        };
                        this.selectedUri.subscribe(function (newUri) {
                            var detailComp = me.getActiveDetailComponent();
                            detailComp.updateModel(newUri);
                            if (newUri == "") {
                                hidePropertiesPanel();
                                return;
                            }
                            if (me.recordsDetailComponent.canDetachFromActivity()) {
                                var canDetach = me.documentDetailComponent.currentActivityDocumentUsage(newUri) == "Working";
                                me.recordsDetailComponent.canDetachFromActivity(canDetach);
                            }
                            if (me.currentPanelId == WorkflowPanel.RECORDS_VIEW_ID) {
                                var trimObject = new HPTRIM.TrimBaseObject(HPTRIM.BaseObjectTypes.Record, newUri);
                                me.updatePropertiesViewPanel(trimObject);
                                me.objectPropertiesPanel.visible(true);
                            }
                            else if (me.currentPanelId == WorkflowPanel.ACTIVITIES_DUE_VIEW_ID
                                || me.currentPanelId == WorkflowPanel.ACTIVITIES_FOR_WORKFLOW_VIEW_ID
                                || me.currentPanelId == WorkflowPanel.ACTIVITIES_INCOMPLETE_VIEW_ID) {
                                var trimObject = new HPTRIM.TrimBaseObject(HPTRIM.BaseObjectTypes.Activity, newUri);
                                me.updatePropertiesViewPanel(trimObject);
                                me.objectPropertiesPanel.visible(true);
                            }
                            else if (me.currentPanelId == WorkflowPanel.WORKFLOW_VIEW_ID) {
                                var trimObject = new HPTRIM.TrimBaseObject(HPTRIM.BaseObjectTypes.Workflow, newUri);
                                me.updatePropertiesViewPanel(trimObject);
                                me.objectPropertiesPanel.visible(true);
                            }
                            else if (me.currentPanelId == WorkflowPanel.ACTIVITY_DOCUMENT_VIEW_ID) {
                                var trimObject = new HPTRIM.TrimBaseObject(HPTRIM.BaseObjectTypes.Record, newUri);
                                me.updatePropertiesViewPanel(trimObject);
                                me.objectPropertiesPanel.visible(true);
                            }
                            me.objectPropertiesPanel.visible(true);
                        });
                        me.activityDocumentCommandPanel.showDataEntryForm = function (form) { _this.showDataEntryForm(form); };
                        me.activityDocumentCommandPanel.executeQuery = function (query, clearResults, sortBy, purpose) {
                            if (query.trim().length == 0) {
                                return;
                            }
                            if (clearResults) {
                                me.recordItemListPanel.itemList.items([]);
                            }
                            if (purpose != undefined && purpose == Panels.AttachingActivityDocumentCommandPanel.ATTACH_SUPERCOPY) {
                                me.currentPanelId = WorkflowPanel.ACTIVITY_DOCUMENT_SUPERCOPY_ID;
                            }
                            else if (purpose != undefined && purpose == Panels.AttachingActivityDocumentCommandPanel.ATTACH_TRIMRECORD) {
                                me.currentPanelId = WorkflowPanel.ACTIVITY_DOCUMENT_ATTACH_RECORD_ID;
                            }
                            else {
                                me.currentPanelId = WorkflowPanel.RECORDS_VIEW_ID;
                            }
                            me.updateView(me.recordItemListPanel, query);
                        };
                        me.activityDocumentCommandPanel.returnSelectedRecordType = function (rtyData) {
                            me.selectedRtyForSupercopy = rtyData;
                        };
                        var db = this.trimClient.getDatabase();
                        this.workflowCommandPanel.hasWorkflowCreatePrm(db.currentUserPermissions()["WorkflowCreate"]);
                        db.currentUserPermissions.subscribe(function (obj) {
                            _this.workflowCommandPanel.hasWorkflowCreatePrm(obj.WorkflowCreate);
                        });
                    }
                    WorkflowPanel.prototype.getClassName = function () {
                        return WorkflowPanel.CLASS_NAME;
                    };
                    WorkflowPanel.formatDate = function (dateObject) {
                        if (dateObject.StringValue) {
                            return dateObject.StringValue;
                        }
                        else {
                            var rawDateString = dateObject.DateTime;
                            if (rawDateString) {
                                var date = new Date(Date.parse(rawDateString.substr(0, 23)));
                                return date.toDateString();
                            }
                            return "-";
                        }
                    };
                    WorkflowPanel.getWorkflowName = function (Fields) {
                        return HP.HPTRIM.Messages.web_workflow.toUpperCase() + ": " + ((Fields.WorkflowName && Fields.WorkflowName.Value) ? Fields.WorkflowName.Value : HP.HPTRIM.Messages.web_unknownWorkflow);
                    };
                    WorkflowPanel.prototype.getActiveItemListPanel = function () {
                        switch (this.currentPanelId) {
                            case WorkflowPanel.ACTIVITIES_DUE_VIEW_ID:
                            case WorkflowPanel.ACTIVITIES_FOR_WORKFLOW_VIEW_ID:
                                return this.activityItemListPanel;
                            case WorkflowPanel.WORKFLOW_VIEW_ID:
                                return this.workflowItemListPanel;
                            case WorkflowPanel.RECORDS_VIEW_ID:
                                return this.recordItemListPanel;
                            case WorkflowPanel.ACTIVITY_DOCUMENT_VIEW_ID:
                                return this.documentItemListPanel;
                            case WorkflowPanel.ACTIVITY_DOCUMENT_SUPERCOPY_ID:
                            case WorkflowPanel.ACTIVITY_DOCUMENT_ATTACH_RECORD_ID:
                                return this.recordItemListPanel;
                        }
                        return this.activityItemListPanel;
                    };
                    WorkflowPanel.prototype.updateDataFromResult = function (result) {
                        this.recordItemListPanel.updateDataFromResult(result);
                    };
                    WorkflowPanel.prototype.getActiveDetailComponent = function () {
                        var me = this;
                        this.recordsDetailComponent.canAlwaysBeSelected(false);
                        this.recordsDetailComponent.canDetachFromActivity(false);
                        switch (this.currentPanelId) {
                            case WorkflowPanel.ACTIVITIES_DUE_VIEW_ID:
                            case WorkflowPanel.ACTIVITIES_FOR_WORKFLOW_VIEW_ID:
                                return this.activityDetailComponent;
                            case WorkflowPanel.RECORDS_VIEW_ID:
                                this.recordsDetailComponent.canDetachFromActivity(false);
                                return this.recordsDetailComponent;
                            case WorkflowPanel.WORKFLOW_VIEW_ID:
                                return this.workflowDetailComponent;
                            case WorkflowPanel.ACTIVITY_DOCUMENT_VIEW_ID:
                                this.activityDocumentParentUri = this.documentDetailComponent.parentUri;
                                this.recordsDetailComponent.showActions(true);
                                this.recordsDetailComponent.showSelectRecordButton(false);
                                this.recordsDetailComponent.canReturn(false);
                                this.recordsDetailComponent.canCheckIn(true);
                                this.recordsDetailComponent.canCheckOut(true);
                                this.recordsDetailComponent.canDetachFromActivity(!this.activityDetailComponent.activityCompleted());
                                return this.documentDetailComponent;
                            case WorkflowPanel.ACTIVITY_DOCUMENT_SUPERCOPY_ID:
                            case WorkflowPanel.ACTIVITY_DOCUMENT_ATTACH_RECORD_ID:
                                this.recordsDetailComponent.showActions(false);
                                this.recordsDetailComponent.showSelectRecordButton(true);
                                this.recordsDetailComponent.canAlwaysBeSelected(this.currentPanelId == WorkflowPanel.ACTIVITY_DOCUMENT_ATTACH_RECORD_ID);
                                this.recordsDetailComponent.canReturn(true);
                                this.recordsDetailComponent.canCheckIn(false);
                                this.recordsDetailComponent.canCheckOut(false);
                                return this.recordsDetailComponent;
                        }
                        return this.activityDetailComponent;
                    };
                    WorkflowPanel.prototype.view = function () {
                    };
                    WorkflowPanel.prototype.updateActivityList = function (result) {
                        this.activityItemListPanel.itemList.refresh();
                    };
                    WorkflowPanel.prototype.getTypeForPanel = function () {
                        if (this.currentPanelId == WorkflowPanel.WORKFLOW_VIEW_ID) {
                            return HPTRIM.BaseObjectTypes.Workflow;
                        }
                        else if (this.currentPanelId == WorkflowPanel.ACTIVITIES_INCOMPLETE_VIEW_ID) {
                            return HPTRIM.BaseObjectTypes.Activity;
                        }
                        else if (this.currentPanelId == WorkflowPanel.ACTIVITIES_DUE_VIEW_ID) {
                            return HPTRIM.BaseObjectTypes.Activity;
                        }
                        return HPTRIM.BaseObjectTypes.Workflow;
                    };
                    WorkflowPanel.prototype.attach = function (currItem) {
                        var _this = this;
                        this.activityDocumentPlaceHolder = currItem;
                        var me = this;
                        me.activityDocumentCommandPanel.warningHandler = me.warningHandler;
                        var updateActivityInfo = function () {
                            if (_this.currentItemListItem) {
                                if (currItem.Fields.ActivityDocumentTitle) {
                                    _this.activityDocumentCommandPanel.currentActivityDocumentName(currItem.Fields.ActivityDocumentTitle);
                                    _this.activityDocumentCommandPanel.currentActivityDocumentAction(currItem.Fields.ActivityDocumentAction);
                                    _this.activityDocumentCommandPanel.currentActivityDocumentUsage(currItem.Fields.ActivityDocumentUsage);
                                    _this.activityDocumentCommandPanel.currentActivityDocumentStatus(currItem.Fields.ActivityDocumentStatus);
                                    _this.activityDocumentCommandPanel.currentActivityDocumentMandatory(currItem.Fields.ActivityDocumentMandatory);
                                    _this.activityDocumentCommandPanel.currentActivityDocumentRecordType(currItem.Fields.ActivityDocumentRecordType);
                                    _this.activityDocumentCommandPanel.currentActivityDocumentSuperCopy(currItem.Fields.ActivityDocumentSupercopy);
                                    _this.activityDocumentCommandPanel.currentActivityDocumentDefaultContainer(currItem.Fields.ActivityDocumentDefaultContainer);
                                }
                                else {
                                    _this.activityDocumentCommandPanel.currentActivityDocumentName(currItem.ActivityDocumentTitle);
                                }
                            }
                            _this.activityDocumentCommandPanel.currentActivityName(_this.activityDetailComponent.activityInfoObject.ActivityName.Value);
                        };
                        this.selectedUri.subscribe(function (newUri) {
                            if (newUri == '') {
                                return;
                            }
                            updateActivityInfo();
                            _this.objectPropertiesPanel.visible(true);
                        });
                        updateActivityInfo();
                        this.activityDocumentCommandPanel.rtyField.setRawValue('all');
                        this.activityDocumentCommandPanel.setOption();
                        this.selectedRtyForSupercopy = null;
                        this.activityDocumentCommandPanel.queryString("");
                        this.primaryPanel.panels([this.activityDocumentCommandPanel]);
                        var fullState = {};
                        fullState.returnToUri = me.activityDocumentParentUri;
                        fullState.currentActivityDocumentCommandPanel = "activityDocumentCommandPanel";
                        this.historyFullState = fullState;
                        this.activityDocumentCommandPanel.returnToActivityDocuments = function () {
                            var currentPage = me.getActiveItemListPanel().getPagingPlugin().currentPage();
                            me.prepareView();
                            me.workflowCommandPanel.deselectAllButtons();
                            me.workflowCommandPanel.showingRecordsFromActivity(true);
                            me.workflowCommandPanel.showingActivitiesForWorkflow(false);
                            me.workflowCommandPanel.showingRecordsFromWorkflow(false);
                            me.workflowCommandPanel.showingRecords(true);
                            me.workflowCommandPanel.showingActivityDocumentsFromActivity(false);
                            var currQuery = 'uri: ' + me.historyFullState.returnToUri;
                            me.currentQuery(currQuery);
                            me.updateView(me.documentItemListPanel, currQuery);
                            me.getActiveItemListPanel().getPagingPlugin().currentPage(currentPage);
                            me.selectedUri(me.historyFullState.returnToUri);
                            me.historyFullState = {};
                            _this.primaryPanel.panels([me.workflowCommandPanel]);
                        };
                        this.activityDocumentCommandPanel.returnToAttachTypeSelection = function () {
                            _this.activityDocumentCommandPanel.setOption();
                            _this.primaryPanel.panels([_this.activityDocumentCommandPanel]);
                        };
                    };
                    WorkflowPanel.prototype.showWorkflowCommandPanel = function () {
                        this.primaryPanel.panels([this.workflowCommandPanel]);
                    };
                    WorkflowPanel.prototype.showDataEntryForm = function (form) {
                        var _this = this;
                        form.cancel = function () {
                            var activityDocumentInfo = _this.documentDetailComponent;
                            var activityUri = activityDocumentInfo.parentUri;
                            _this.documentView(activityUri);
                            _this.activityDocumentCommandPanel.returnToActivityDocuments();
                        };
                        form.displayError = this.displayError;
                        form.doneHandler = function (newRecordUri) {
                            var me = _this;
                            var activityDocumentInfo = _this.documentDetailComponent;
                            var activityUri = activityDocumentInfo.parentUri;
                            var documentUri = _this.selectedUri();
                            HP.HPTRIM.Utils.TrimHelper.linkRecordToActivityDocument(me.trimClient, newRecordUri, activityUri, documentUri, function () { me.documentView(activityUri, true); });
                        };
                        this.mainPanel.panels([form]);
                    };
                    WorkflowPanel.prototype.getPriorityName = function (priority) {
                        if (this.priorityCaptions[priority]) {
                            return this.priorityCaptions[priority];
                        }
                        if (priority) {
                            return priority;
                        }
                        return HP.HPTRIM.Messages.web_unknownActivityState;
                    };
                    WorkflowPanel.prototype.getStateName = function (state) {
                        if (this.statusCaptions[state]) {
                            return this.statusCaptions[state];
                        }
                        if (state) {
                            return state;
                        }
                        return HP.HPTRIM.Messages.web_unknownActivityState;
                    };
                    WorkflowPanel.prototype.getAssigneeName = function (activityAssignedTo) {
                        if (!activityAssignedTo) {
                            return "";
                        }
                        if (activityAssignedTo.LocationFormattedName && activityAssignedTo.LocationFormattedName.Value) {
                            return activityAssignedTo.LocationFormattedName.Value;
                        }
                        return "";
                    };
                    WorkflowPanel.prototype.formatDate = function (dateObject) {
                        if (!dateObject) {
                            return "";
                        }
                        if (dateObject.IsClear) {
                            return "";
                        }
                        if (dateObject.StringValue) {
                            return dateObject.StringValue;
                        }
                        else {
                            var rawDateString = dateObject.DateTime;
                            var date = new Date(Date.parse(rawDateString.substr(0, 23)));
                            return date.toDateString();
                        }
                    };
                    WorkflowPanel.prototype.finishedLoading = function () {
                    };
                    WorkflowPanel.prototype.updateList = function () {
                        var currentPage = this.getActiveItemListPanel().getPagingPlugin().currentPage();
                        var uri = this.selectedUri();
                        switch (this.currentPanelId) {
                            case WorkflowPanel.WORKFLOW_VIEW_ID:
                                this.workflowView();
                                break;
                            case WorkflowPanel.ACTIVITIES_DUE_VIEW_ID:
                                this.activitiesDueView();
                                break;
                            case WorkflowPanel.ACTIVITIES_INCOMPLETE_VIEW_ID:
                                this.activitiesIncompleteView();
                                break;
                            case WorkflowPanel.RECORDS_VIEW_ID:
                            case WorkflowPanel.ACTIVITIES_FOR_WORKFLOW_VIEW_ID:
                                this.getActiveItemListPanel().getItemList().refresh();
                                break;
                        }
                        this.getActiveItemListPanel().getPagingPlugin().currentPage(currentPage);
                        this.selectedUri(uri);
                    };
                    WorkflowPanel.prototype.showViewAndSearch = function (id, query, filterString, sortString, searchOptions) {
                        switch (id) {
                            case WorkflowPanel.WORKFLOW_VIEW_ID:
                                this.workflowView(query, filterString, sortString, searchOptions);
                                break;
                            case WorkflowPanel.ACTIVITIES_DUE_VIEW_ID:
                                this.activitiesDueView(query, filterString, sortString, searchOptions);
                                break;
                            case WorkflowPanel.ACTIVITIES_INCOMPLETE_VIEW_ID:
                                this.activitiesIncompleteView(query);
                                break;
                            case WorkflowPanel.RECORDS_VIEW_ID:
                                this.recordsDueView(query);
                                break;
                            case WorkflowPanel.ACTIVITIES_FOR_WORKFLOW_VIEW_ID:
                                this.allActivitiesView(query);
                                break;
                            case WorkflowPanel.ACTIVITY_DOCUMENT_VIEW_ID:
                                this.documentView(query);
                                break;
                            default:
                                this.activitiesDueView(query);
                                break;
                        }
                        ;
                    };
                    WorkflowPanel.prototype.prepareView = function (uri) {
                        this.workflowCommandPanel.resetView();
                        this.workflowCommandPanel.deselectAllButtons();
                        if (uri) {
                            this.selectedUri(uri);
                        }
                        else {
                            this.selectedUri("");
                        }
                    };
                    WorkflowPanel.prototype.activitiesDueView = function (query, filterString, sortString, searchOptions) {
                        var sortBy = WorkflowPanel.ACTIVITY_DUE_SORTBY;
                        if (sortString) {
                            sortBy = sortString;
                        }
                        var myQuery = WorkflowPanel.GET_ASSIGNED_TO_ME_QUERY();
                        if (query) {
                            myQuery = query;
                        }
                        if (searchOptions == undefined) {
                            searchOptions = WorkflowPanel.GET_SEARCH_OPTIONS();
                        }
                        this.updateView(this.activityItemListPanel, myQuery, sortBy, filterString, searchOptions);
                        this.prepareView();
                        this.workflowCommandPanel.activitesDueSelected(true);
                        this.currentPanelId = WorkflowPanel.ACTIVITIES_DUE_VIEW_ID;
                        this.updateGlobalSearchPanelCallback(HPTRIM.BaseObjectTypes.Activity);
                    };
                    WorkflowPanel.prototype.activitiesIncompleteView = function (query) {
                        var myQuery = WorkflowPanel.GET_ACTIVITIES_INCOMPLETE_QUERY();
                        if (query) {
                            myQuery = query;
                        }
                        this.updateView(this.activityItemListPanel, myQuery, WorkflowPanel.ACTIVITY_DUE_SORTBY);
                        this.prepareView();
                        this.workflowCommandPanel.activitesIncompleteSelected(true);
                        this.currentPanelId = WorkflowPanel.ACTIVITIES_INCOMPLETE_VIEW_ID;
                        this.updateGlobalSearchPanelCallback(HPTRIM.BaseObjectTypes.Activity);
                    };
                    WorkflowPanel.prototype.recordsDueView = function (query) {
                        this.updateView(this.recordItemListPanel, query, WorkflowPanel.SORTBY);
                        this.prepareView();
                        this.currentPanelId = WorkflowPanel.RECORDS_VIEW_ID;
                    };
                    WorkflowPanel.prototype.allActivitiesView = function (query) {
                        this.updateView(this.activityItemListPanel, query, WorkflowPanel.SORTBY);
                        this.prepareView();
                        this.currentPanelId = WorkflowPanel.ACTIVITIES_FOR_WORKFLOW_VIEW_ID;
                    };
                    WorkflowPanel.prototype.documentView = function (query, refreshAttachPanel) {
                        if (refreshAttachPanel === void 0) { refreshAttachPanel = false; }
                        this.currentPanelId = WorkflowPanel.ACTIVITY_DOCUMENT_VIEW_ID;
                        this.updateView(this.documentItemListPanel, query);
                        this.prepareView();
                        this.selectedUri(query);
                        this.activityDetailComponent.renderActivityDetails(true);
                        this.activityDetailComponent.showDocuments();
                        if (refreshAttachPanel) {
                            this.activityDocumentCommandPanel.setOption();
                            this.workflowCommandPanel.showingRecords(true);
                            this.workflowCommandPanel.showingRecordsFromActivity(true);
                            this.workflowCommandPanel.showingActivitiesForWorkflow(false);
                            this.primaryPanel.panels([this.workflowCommandPanel]);
                        }
                    };
                    WorkflowPanel.prototype.workflowView = function (query, filterString, sortString, searchOptions) {
                        var sortBy = WorkflowPanel.SORTBY;
                        if (sortString) {
                            sortBy = sortString;
                        }
                        if (query) {
                            this.updateView(this.workflowItemListPanel, query, sortBy, filterString, searchOptions);
                        }
                        else {
                            this.updateView(this.workflowItemListPanel, WorkflowPanel.ALL_ACTIVITIES_QUERY, sortBy);
                        }
                        this.prepareView();
                        this.workflowCommandPanel.workflowsSelected(true);
                        this.currentPanelId = WorkflowPanel.WORKFLOW_VIEW_ID;
                        this.updateGlobalSearchPanelCallback(HPTRIM.BaseObjectTypes.Workflow);
                    };
                    WorkflowPanel.prototype.refresh = function () {
                    };
                    WorkflowPanel.prototype.updateView = function (itemList, query, sortBy, filterString, searchOptions) {
                        var _this = this;
                        this.mainPanel.panels([itemList]);
                        var me = this;
                        var callback = function (result) {
                            me.searching(false);
                            me.noResults(itemList.getItemList().items().length == 0);
                            if (result && result.SearchTitle) {
                                _this.queryDisplayString(result.SearchTitle);
                            }
                        };
                        var bobType = itemList.getCurrentType();
                        if (itemList == this.activityItemListPanel || itemList == this.workflowItemListPanel) {
                            this.searchBarQueryUpdater(query, bobType);
                        }
                        var isearchQuery = { searchString: query, baseObjectType: bobType, sortBy: sortBy, filter: filterString, searchOptions: searchOptions };
                        this.searching(true);
                        this.noResults(false);
                        this.currentQuery(query);
                        itemList.updateQuery(isearchQuery, callback, true);
                        this.queryDisplayString(HP.HPTRIM.Messages.web_query + ": " + "'" + query + "'");
                    };
                    WorkflowPanel.prototype.setContext = function (context) {
                        var me = this;
                        this.workflowCommandPanel.resetView();
                        if (context.id) {
                            this.showViewAndSearch(context.id, context.query);
                        }
                        else {
                            this.showViewAndSearch(WorkflowPanel.ACTIVITIES_DUE_VIEW_ID, context.query);
                        }
                        if (context.page) {
                            this.getActiveItemListPanel().getPagingPlugin().currentPage(context.page);
                        }
                        else {
                            this.activityItemListPanel.getPagingPlugin().currentPage(0);
                            this.workflowItemListPanel.getPagingPlugin().currentPage(0);
                            this.recordItemListPanel.getPagingPlugin().currentPage(0);
                        }
                        if (context.uri) {
                            this.selectedUri(context.uri);
                        }
                        else {
                            this.selectedUri("");
                        }
                        this.historyFullState = context.fullState;
                        if (context.fullState) {
                            if (context.fullState.showingRecords) {
                                this.workflowCommandPanel.showingRecords(true);
                            }
                            if (context.fullState.showingActivities) {
                                this.workflowCommandPanel.showingActivitiesForWorkflow(true);
                            }
                            if (context.fullState.showingRecordsFromWorkflow) {
                                this.workflowCommandPanel.showingRecordsFromWorkflow(true);
                            }
                            else {
                                this.workflowCommandPanel.showingRecordsFromActivity(true);
                            }
                            if (context.fullState.showingRecordsFromWorkflow || context.fullState.showingActivities) {
                                this.workflowCommandPanel.returnToWorkflow = function () {
                                    me.workflowCommandPanel.resetView();
                                    me.workflowCommandPanel.workflowsSelected(true);
                                    me.currentPanelId = context.fullState.returnToPanelId;
                                    me.currentQuery(context.fullState.returnToQuery);
                                    me.updateView(me.getActiveItemListPanel(), me.currentQuery());
                                    me.prepareView();
                                    me.getActiveItemListPanel().getPagingPlugin().currentPage(context.fullState.returnToPage);
                                    me.selectedUri(context.fullState.returnToUri);
                                };
                            }
                            if (context.fullState.showingRecordsFromActivity) {
                                this.workflowCommandPanel.returnToActivities = function () {
                                    me.workflowCommandPanel.resetView();
                                    if (context.fullState.canReturnToWorkflow) {
                                        me.workflowCommandPanel.showingActivitiesForWorkflow(true);
                                        me.workflowCommandPanel.returnToWorkflowDefaultBehaviour = function () {
                                            me.workflowView();
                                        };
                                    }
                                    else {
                                        switch (context.fullState.returnToPanelId) {
                                            case WorkflowPanel.ACTIVITIES_DUE_VIEW_ID:
                                                me.workflowCommandPanel.deselectAllButtons();
                                                me.workflowCommandPanel.activitesDueSelected(true);
                                                me.historyFullState = {};
                                                break;
                                            case WorkflowPanel.ACTIVITIES_INCOMPLETE_VIEW_ID:
                                                me.workflowCommandPanel.deselectAllButtons();
                                                me.workflowCommandPanel.activitesIncompleteSelected(true);
                                                me.historyFullState = {};
                                                break;
                                        }
                                    }
                                    me.currentPanelId = context.fullState.returnToPanelId;
                                    me.currentQuery(context.fullState.returnToQuery);
                                    me.updateView(me.getActiveItemListPanel(), me.currentQuery());
                                    me.getActiveItemListPanel().getPagingPlugin().currentPage(context.fullState.returnToPage);
                                    me.selectedUri(context.fullState.returnToUri);
                                };
                            }
                        }
                    };
                    WorkflowPanel.CLASS_NAME = "WorkflowPanel";
                    WorkflowPanel.GET_ASSIGNED_TO_ME_QUERY = function () { return "assignee:" + HPTRIM.Messages.bob_sbMe + " " + HPTRIM.Messages.core_and + " canStart"; };
                    WorkflowPanel.GET_ACTIVITIES_INCOMPLETE_QUERY = function () { return "assignee:" + HPTRIM.Messages.bob_sbMe + " " + HPTRIM.Messages.core_and + " " + HPTRIM.Messages.web_Not + " done"; };
                    WorkflowPanel.RECORDS_DUE_QUERY = "all";
                    WorkflowPanel.ALL_ACTIVITIES_QUERY = "all";
                    WorkflowPanel.GET_SEARCH_OPTIONS = function () { return (HPRM_userSearchOptions.SearchUserOptionsAssigneeSearchIncludesPosition.Value) ? "SearchUserOptionsAssigneeSearchIncludesPosition" : ""; };
                    WorkflowPanel.SORTBY = "ActivityDateDue-";
                    WorkflowPanel.DATEDUE_SORTBY = "dateDue-";
                    WorkflowPanel.ACTIVITY_DUE_SORTBY = "dueOn";
                    WorkflowPanel.GET_ALL_WORKFLOW_QUERY = function () { return "supervisor:" + HPTRIM.Messages.bob_sbMe + " " + HPTRIM.Messages.web_or + " creator:" + HPTRIM.Messages.bob_sbMe; };
                    WorkflowPanel.WORKFLOW_SORTBY = "";
                    WorkflowPanel.WORKFLOW_VIEW_ID = 1;
                    WorkflowPanel.ACTIVITIES_DUE_VIEW_ID = 2;
                    WorkflowPanel.RECORDS_VIEW_ID = 3;
                    WorkflowPanel.ACTIVITIES_FOR_WORKFLOW_VIEW_ID = 4;
                    WorkflowPanel.ACTIVITIES_INCOMPLETE_VIEW_ID = 5;
                    WorkflowPanel.ACTIVITY_DOCUMENT_VIEW_ID = 6;
                    WorkflowPanel.ACTIVITY_DOCUMENT_SUPERCOPY_ID = 7;
                    WorkflowPanel.ACTIVITY_DOCUMENT_ATTACH_RECORD_ID = 8;
                    return WorkflowPanel;
                }(HP.HPTRIM.Framework.Components.Layouts.SinglePage.ContentPanel));
                Panels.WorkflowPanel = WorkflowPanel;
            })(Panels = App.Panels || (App.Panels = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Panels;
            (function (Panels) {
                var Workflow;
                (function (Workflow) {
                    "use strict";
                    var WorkflowDetailComponent = (function () {
                        function WorkflowDetailComponent(trimClient) {
                            this.trimClient = trimClient;
                            this.uri = "";
                            this.detailsTemplate = 'templates/Workflow/WorkflowDetailComponent';
                            this.details = ko.observable(false);
                            this.loading = ko.observable(false);
                            this.detailsReady = ko.observable(false);
                            this.actionResultDisplay = ko.observable(false);
                            this.actionResult = ko.observable("");
                            this.assigneeName = ko.observable("");
                            this.dateDue = ko.observable("");
                            this.doFadeInOutOnInformationalText = function () {
                                $("#activityInformationLabel").show("drop", 500);
                                $("#workflowInformationLabel").delay(3000).hide("drop", "down", 500);
                            };
                            this.doFadeInOutOnInformationalTextWithAddedDelay = function () {
                                $("#activityInformationLabel").show("drop", 500);
                                $("#workflowInformationLabel").delay(3000).hide("drop", "down", 500).delay(1500);
                            };
                            var me = this;
                            this.editDetails = function () {
                            };
                            this.showRecords = function () {
                            };
                            this.showActivities = function () {
                            };
                        }
                        WorkflowDetailComponent.prototype.updateModel = function (newUri, actionResult) {
                            this.uri = newUri;
                            this.actionResult("");
                            this.actionResultDisplay(false);
                            if (actionResult) {
                                this.actionResult(actionResult);
                                this.actionResultDisplay(true);
                            }
                            var me = this;
                            if (newUri == "") {
                                me.details(false);
                                me.detailsReady(false);
                            }
                            if (newUri != "") {
                                me.loading(true);
                                var workflowInfoRequest = new HPTRIM.TrimBaseObjectRequest(me.trimClient, new HPTRIM.TrimBaseObject(HPTRIM.BaseObjectTypes.Workflow, newUri, ""), "name,dateDue,assignedTo");
                                workflowInfoRequest.doRequest().done(function (result) {
                                    me.loading(false);
                                    me.details(true);
                                    var workflowInfoObject = result.Results[0];
                                    me.workflowInfoObject = workflowInfoObject;
                                    me.renderWorkflowDetails();
                                }).fail(function (errorResponse) {
                                    var errorMsg = HP.HPTRIM.Messages.web_unableToConnectToWebServices;
                                    if (errorResponse.ResponseStatus && errorResponse.ResponseStatus.Message) {
                                        errorMsg = errorResponse.ResponseStatus.Message;
                                    }
                                    if (errorResponse.responseJSON && errorResponse.responseJSON.ResponseStatus && errorResponse.responseJSON.ResponseStatus.Message) {
                                        errorMsg = errorResponse.responseJSON.ResponseStatus.Message;
                                    }
                                    me.errorHandler(errorMsg);
                                    me.loading(false);
                                    me.detailsReady(false);
                                    me.details(false);
                                });
                            }
                        };
                        WorkflowDetailComponent.prototype.refresh = function (actionResult) {
                            this.updateModel(this.uri, actionResult);
                        };
                        WorkflowDetailComponent.prototype.useCachedResult = function (result) {
                            if (result.name && result.name != "") {
                                this.workflowInfoObject.name = result.name;
                            }
                            this.renderWorkflowDetails();
                        };
                        WorkflowDetailComponent.prototype.renderWorkflowDetails = function () {
                            var me = this;
                            if (this.workflowInfoObject.ActivityAssignedTo) {
                                this.assigneeName(this.workflowInfoObject.ActivityAssignedTo.LocationFormattedName.Value);
                            }
                            else {
                                this.assigneeName("No assignee");
                            }
                            if (this.workflowInfoObject.ActivityDateDue && !this.workflowInfoObject.ActivityDateDue.IsClear) {
                                if (this.workflowInfoObject.ActivityDateDue.StringValue) {
                                    this.dateDue(this.workflowInfoObject.RecordDateRegistered.StringValue);
                                }
                                else {
                                    var rawDateString = this.workflowInfoObject.ActivityDateDue.DateTime;
                                    var date = new Date(Date.parse(rawDateString.substr(0, 23)));
                                    this.dateDue(date.toDateString());
                                }
                            }
                            else {
                                this.dateDue("");
                            }
                        };
                        return WorkflowDetailComponent;
                    }());
                    Workflow.WorkflowDetailComponent = WorkflowDetailComponent;
                })(Workflow = Panels.Workflow || (Panels.Workflow = {}));
            })(Panels = App.Panels || (App.Panels = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Panels;
            (function (Panels) {
                var Workflow;
                (function (Workflow) {
                    "use strict";
                    var WorkflowInformation = (function () {
                        function WorkflowInformation() {
                        }
                        WorkflowInformation.Filters = [
                            {
                                caption: HP.HPTRIM.Messages.web_priority,
                                format: "enum",
                                enumName: "Priority",
                                clauseId: "WorkflowPriority",
                                clauseString: "priority",
                                name: "Priority"
                            },
                            {
                                caption: "",
                                name: "done",
                                clauseId: "WorkflowDone",
                                clauseString: "done",
                                format: 'boolean',
                                oneInGroupMustBeOn: false,
                                reversed: false,
                                defaultUnchecked: true,
                                options: [
                                    { "caption": HP.HPTRIM.Messages.web_excludeCompletedOrSkippedWorkflows, "name": 'done', "negated": true },
                                ]
                            },
                        ];
                        return WorkflowInformation;
                    }());
                    Workflow.WorkflowInformation = WorkflowInformation;
                    var AcitivyInformation = (function () {
                        function AcitivyInformation() {
                        }
                        AcitivyInformation.Filters = [
                            {
                                caption: HP.HPTRIM.Messages.web_priority,
                                format: "enum",
                                enumName: "Priority",
                                clauseId: "ActivityPriority",
                                clauseString: "priority",
                                name: "Priority"
                            },
                            {
                                caption: "",
                                name: "done",
                                clauseId: "ActivityDone",
                                clauseString: "done",
                                format: 'boolean',
                                oneInGroupMustBeOn: false,
                                reversed: false,
                                defaultUnchecked: true,
                                options: [
                                    { "caption": HP.HPTRIM.Messages.web_excludeCompletedOrSkippedActivities, "name": 'done', "negated": true },
                                ]
                            },
                            {
                                caption: "",
                                name: "canStart",
                                clauseId: "ActivityCanStart",
                                clauseString: "canStart",
                                format: 'boolean',
                                oneInGroupMustBeOn: false,
                                reversed: false,
                                defaultUnchecked: true,
                                options: [
                                    { "caption": HP.HPTRIM.Messages.web_excludeNotReadyStartActivities, "name": '', "negated": false },
                                ]
                            },
                            {
                                caption: "",
                                name: "top",
                                clauseId: "Top",
                                clauseString: "top",
                                format: 'boolean',
                                oneInGroupMustBeOn: false,
                                reversed: false,
                                defaultUnchecked: true,
                                options: [
                                    { "caption": HP.HPTRIM.Messages.web_excludeParentActivities, "name": 'top', "negated": true },
                                ]
                            },
                            {
                                caption: "",
                                name: "child",
                                clauseId: "ActivityChild",
                                clauseString: "child",
                                format: 'boolean',
                                oneInGroupMustBeOn: false,
                                reversed: false,
                                defaultUnchecked: true,
                                options: [
                                    { "caption": HP.HPTRIM.Messages.web_excludeChildActivities, "name": 'child', "negated": true },
                                ]
                            },
                        ];
                        return AcitivyInformation;
                    }());
                    Workflow.AcitivyInformation = AcitivyInformation;
                })(Workflow = Panels.Workflow || (Panels.Workflow = {}));
            })(Panels = App.Panels || (App.Panels = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Panels;
            (function (Panels) {
                "use strict";
                var MainObjectPanel = (function (_super) {
                    __extends(MainObjectPanel, _super);
                    function MainObjectPanel(trimClient, objectDefinition, childObjectDefList, supportedTypes) {
                        var _this = this;
                        _super.call(this);
                        this.updateCallback = function (infoObject) { };
                        var me = this;
                        this.supportedTypes = supportedTypes;
                        var toggleVisibleFunction = function (event) {
                            $('#' + me.id + ' .as-spa-content-additional').toggleClass('active');
                            if ($('#' + me.id + ' .as-spa-content-additional').hasClass('active')) {
                                $("#" + me.id + " .as-spa-content-primary").css('width', "15%");
                                $("#" + me.id + " .as-spa-content-additional").css('width', "25%");
                                $("#" + me.id + " .as-spa-content-additional").closest(".active").css('height', "calc(100% - 95px)");
                                $("#" + me.id + " .as-spa-content-main").css('width', "60%");
                            }
                            else {
                                $("#" + me.id + " .as-spa-content-primary").css('width', "15%");
                                $("#" + me.id + " .as-spa-content-main").css('width', "85%");
                                $("#" + me.id + " .as-spa-content-additional").css('width', "");
                            }
                        };
                        this.objectPropertiesPanel = new HP.HPTRIM.App.Panels.Plugins.ObjectPropertiesPanel(trimClient, toggleVisibleFunction);
                        this.initialiseAdditionalPanel(this.objectPropertiesPanel);
                        this.objectPropertiesPanel.visible(false);
                        this.executedQuery = "";
                        this.trimClient = trimClient;
                        this.objectDefinition = objectDefinition;
                        var me = this;
                        this.searching = ko.observable(false);
                        this.searchingString = ko.observable(HP.HPTRIM.Messages.web_retrievingResults + "...");
                        this.noResults = ko.observable(false);
                        this.displayQuery = true;
                        this.queryDisplayString = ko.observable("");
                        this.currentQuery = ko.observable("");
                        this.selectedUri = ko.observable("");
                        this.filter = "";
                        this.count = ko.observable("");
                        this.isLoading = ko.observable(false);
                        this.countEnabled = ko.observable(false);
                        this.showSelected = ko.observable(false);
                        this.selectAllCheckbox = ko.observable(false);
                        this.selections = ko.observableArray([]);
                        this.selectedInfoObjects = ko.observableArray([]);
                        this.commandPanel = new Panels.MainObject.MainObjectCommandPanel(trimClient, objectDefinition);
                        this.primaryPanel.visible(true);
                        this.primaryPanel.panels([this.commandPanel]);
                        var pagingSearchCallback = function () {
                            me.searching(true);
                            me.mainObjectListPanel.getItemList().items([]);
                        };
                        var requiredListProperties = objectDefinition.requiredProperties;
                        var objectQuery = { searchString: "", baseObjectType: this.objectDefinition.type, sortBy: "" };
                        this.mainObjectListPanel = new HP.HPTRIM.App.Panels.ItemList.TrimScrollspyItemListPanel(this.trimClient, this, HP.HPTRIM.Messages.web_searching, objectQuery, pagingSearchCallback, function () { me.searching(false); }, this.id);
                        this.mainObjectListPanel.getTrimItemListLoader().properties = requiredListProperties;
                        this.mainObjectListPanel.getPlugin().generateEvent = function (page) { me.updatePageHistory(); me.selectAllCheckbox(false); };
                        this.mainObjectListPanel.getItemList().templateName('templates/MainObject/MainObjectItemList');
                        this.mainPanel.panels.push(this.mainObjectListPanel);
                        this.mainObjectListPanel.getPlugin().onPageFetched = function (fetchedObjectUris) {
                            if (_this.selectAllCheckbox() == true) {
                                for (var idx in fetchedObjectUris) {
                                    _this.selections().push(fetchedObjectUris[idx]);
                                }
                                _this.selections.valueHasMutated();
                            }
                        };
                        this.hasTopLeft = ko.observable(false);
                        if (this.objectDefinition.listPropertyByLocation.TopLeft) {
                            this.hasTopLeft(true);
                        }
                        this.hasTopRight = ko.observable(false);
                        if (this.objectDefinition.listPropertyByLocation.TopRight) {
                            this.hasTopRight(true);
                        }
                        this.hasHierachy = ko.observable(this.objectDefinition.type.HasHierarchy);
                        if (this.objectDefinition.type.HierarchySearchClauseId != "Unknown") {
                            this.hasHierachy(true);
                            this.trimClient.getAndProcessSearchClauseDefinition(me.objectDefinition.type.name, function (searchClauses) {
                                var heiarachyClause = _.find(searchClauses, function (clause) {
                                    return clause.Id == me.objectDefinition.type.HierarchySearchClauseId;
                                });
                                _this.handleExpandClick = function (uri, parents) {
                                    var itemToExpand;
                                    if (parents) {
                                        var currentItems = (me.mainObjectListPanel.itemList.items());
                                        _.each(parents, function (uri) {
                                            var parentObject = _.find(currentItems, function (item) {
                                                return item.Fields.Uri == uri;
                                            });
                                            currentItems = parentObject.subordinateList.items();
                                        });
                                        itemToExpand = _.find(currentItems, function (item) {
                                            return item.Fields.Uri == uri;
                                        });
                                    }
                                    else {
                                        itemToExpand = _.find(me.mainObjectListPanel.itemList.items(), function (item) {
                                            return item.Fields.Uri == uri;
                                        });
                                    }
                                    if (itemToExpand) {
                                        itemToExpand.Expanding(true);
                                    }
                                    var searchString = heiarachyClause.Name + ":" + uri;
                                    var searchQueryObject = {
                                        baseObjectType: _this.getTypeForPanel(),
                                        filter: "",
                                        searchOptions: "",
                                        searchString: searchString,
                                        sortBy: ""
                                    };
                                    var mainObjectListPanel = new HP.HPTRIM.App.Panels.ItemList.TrimItemListPanel(_this.trimClient, _this, searchQueryObject);
                                    mainObjectListPanel.getTrimItemListLoader().properties = objectDefinition.requiredProperties;
                                    mainObjectListPanel.refresh(function (result) {
                                        var retrievedItems = mainObjectListPanel.itemList.items();
                                        var retrievedItemParents = [];
                                        if (parents) {
                                            _.each(parents, function (uri) {
                                                retrievedItemParents.push(uri);
                                            });
                                        }
                                        retrievedItemParents.push(uri);
                                        _.each(retrievedItems, function (item) {
                                            item.ParentUris = retrievedItemParents;
                                        });
                                        if (retrievedItemParents.length >= 4) {
                                            _.each(retrievedItems, function (item) {
                                                var nameString = me.render(item, me.objectDefinition.listPropertyByLocation.Title, true);
                                                var caption = HPTRIM.Messages.web_moreItemShowAll + " " + heiarachyClause.Caption + " " + nameString;
                                                item.moreItemsCaption(caption);
                                            });
                                        }
                                        var moreItems = result.HasMoreItems;
                                        if (itemToExpand) {
                                            itemToExpand.Expanding(false);
                                            if (retrievedItems.length > 0) {
                                                itemToExpand.subordinateList = { items: ko.observableArray(retrievedItems) };
                                                itemToExpand.Expanded(true);
                                                var subordinateUris = HP.HPTRIM.Utils.TrimHelper.pluckUrisFromItemsArray(retrievedItems);
                                                if (_this.selectAllCheckbox() == true) {
                                                    _this.selectSomeMore(subordinateUris);
                                                }
                                            }
                                            else {
                                                itemToExpand.Fields.PossiblyHasSubordinates = false;
                                                itemToExpand.NoChildren(true);
                                            }
                                        }
                                        if (result.HasMoreItems === true) {
                                            itemToExpand.subordinateListHasMoreItems(true);
                                            var nameString = me.render(itemToExpand, me.objectDefinition.listPropertyByLocation.Title, true);
                                            var captionStart = HPTRIM.Messages.web_moreItemsToShowNoCount;
                                            var totalResults = result['TotalResults'];
                                            if (totalResults) {
                                                var remainingResults = totalResults - retrievedItems.length;
                                            }
                                            if (remainingResults && remainingResults > 0) {
                                                captionStart = '+' + remainingResults + ' ' + HPTRIM.Messages.web_moreItemsToShow;
                                            }
                                            var caption = captionStart + ": " + HPTRIM.Messages.web_moreItemShowAll + " " + heiarachyClause.Caption + " " + nameString;
                                            itemToExpand.moreItemsCaption(caption);
                                        }
                                    });
                                };
                                _this.handleMoreItemsClick = function (uri) {
                                    var searchString = heiarachyClause.Name + ":" + uri;
                                    me.searchHandler(searchString, "", me.getTypeForPanel());
                                };
                            });
                        }
                        else {
                            this.hasHierachy(false);
                        }
                        this.handleMinimiseClick = function (uri, parents) {
                            var itemToMinimise;
                            if (parents) {
                                var currentItems = (me.mainObjectListPanel.itemList.items());
                                _.each(parents, function (uri) {
                                    var parentObject = _.find(currentItems, function (item) {
                                        return item.Fields.Uri == uri;
                                    });
                                    currentItems = parentObject.subordinateList.items();
                                });
                                itemToMinimise = _.find(currentItems, function (item) {
                                    return item.Fields.Uri == uri;
                                });
                            }
                            else {
                                itemToMinimise = _.find(me.mainObjectListPanel.itemList.items(), function (item) {
                                    return item.Fields.Uri == uri;
                                });
                            }
                            if (itemToMinimise) {
                                itemToMinimise.subordinateList.items([]);
                                itemToMinimise.Expanded(false);
                            }
                        };
                        this.detailComponent = new Panels.MainObject.MainObjectDetailComponent(trimClient, objectDefinition, supportedTypes);
                        this.detailComponent.updateCallback = function (infoObject) {
                            me.updateCallback(infoObject);
                        };
                        this.detailComponent.deleteCallback = function () {
                            me.refresh();
                        };
                        this.icon = ko.observable(this.objectDefinition.icon);
                        this.childObjectListArray = [];
                        this.getHighlight = function (rawItem, renderInformation) {
                            var rawData = rawItem.Fields ? rawItem.Fields : rawItem;
                            if (renderInformation.highlightConditions && renderInformation.highlightConditions.length > 0) {
                                var showHighlight = _.reduce(renderInformation.highlightConditions, function (memo, highLightCondition) {
                                    var itemValue = rawData[highLightCondition.propertyName];
                                    if (itemValue.Value !== undefined) {
                                        itemValue = itemValue.Value;
                                    }
                                    return memo = memo && (itemValue == highLightCondition.value);
                                }, true);
                                if (showHighlight) {
                                    return "HPRM-deluxe-title";
                                }
                            }
                            return "";
                        };
                        this.render = function (rawItem, renderInformation, defaultClear, returnToolTips) {
                            var rawData = rawItem.Fields ? rawItem.Fields : rawItem;
                            var returnValue = "";
                            if (renderInformation) {
                                if (renderInformation.preconditions) {
                                    var preconditionsMet = true;
                                    _.each(renderInformation.preconditions, function (preCondition) {
                                        var propertyCheckOK = true;
                                        var propertyToCheck = (rawData[preCondition.property]);
                                        if (propertyToCheck && preCondition.subProperty) {
                                            propertyToCheck = propertyToCheck[preCondition.subProperty];
                                        }
                                        if (propertyToCheck) {
                                            var propertyToCheckValue = propertyToCheck;
                                            if (propertyToCheckValue.StringValue) {
                                                propertyToCheckValue = propertyToCheckValue.StringValue;
                                            }
                                            else if (propertyToCheckValue.Value || propertyToCheckValue.Value === false || propertyToCheckValue.Value === "" || propertyToCheckValue.Value === 0) {
                                                propertyToCheckValue = propertyToCheckValue.Value;
                                            }
                                            if (preCondition.value || preCondition.value === "" || preCondition.value === false || preCondition.value === 0) {
                                                preconditionsMet = preconditionsMet && (propertyToCheckValue === preCondition.value);
                                            }
                                            else {
                                                preconditionsMet = preconditionsMet && (propertyToCheckValue != undefined);
                                            }
                                        }
                                    });
                                    if (!preconditionsMet) {
                                        return "";
                                    }
                                }
                                if (!defaultClear) {
                                    returnValue = "-";
                                }
                                if (returnToolTips) {
                                    var toolTips = "";
                                    if (renderInformation.propertyDef && renderInformation.propertyDef.Property) {
                                        toolTips = renderInformation.propertyDef.Property.Caption;
                                    }
                                    else {
                                        var objectCacheEntry = _.find(trimClient.mainObjectPropertyCache, function (cacheEntry) {
                                            return (cacheEntry.objectName == me.objectDefinition.type.Name);
                                        });
                                        if (objectCacheEntry) {
                                            var displayPropertyDefinition = _.find(objectCacheEntry.properties, function (property) {
                                                return property.Id == renderInformation.property;
                                            });
                                        }
                                        renderInformation.propertyDef = displayPropertyDefinition;
                                        if (renderInformation.propertyDef && renderInformation.propertyDef.Property) {
                                            toolTips = renderInformation.propertyDef.Property.Caption;
                                        }
                                        else {
                                            if (renderInformation.property) {
                                                toolTips = renderInformation.property;
                                            }
                                        }
                                    }
                                    return toolTips;
                                }
                                if (renderInformation.defaultValue || renderInformation.defaultValue === "") {
                                    returnValue = renderInformation.defaultValue;
                                    if (renderInformation.showCaption) {
                                        var caption = "";
                                        if (renderInformation.propertyDef && renderInformation.propertyDef.Property) {
                                            caption = renderInformation.propertyDef.Property.Caption;
                                            if (renderInformation.capitaliseCaption && caption) {
                                                caption = caption.toUpperCase();
                                            }
                                            returnValue = caption + ": " + returnValue;
                                        }
                                    }
                                }
                                if (renderInformation.value) {
                                    returnValue = renderInformation.value;
                                }
                                if (renderInformation.objectListPropertyOptionsList.length > 0) {
                                    var renderText = "";
                                    for (var i = 0; i < renderInformation.objectListPropertyOptionsList.length; i++) {
                                        renderText = me.render(rawItem, renderInformation.objectListPropertyOptionsList[i], true);
                                        if (renderText) {
                                            returnValue = renderText;
                                            break;
                                        }
                                    }
                                }
                                if (renderInformation.property) {
                                    var valueToDisplay = rawData[renderInformation.property];
                                    var caption = "";
                                    if (renderInformation.propertyDef && renderInformation.propertyDef.Property) {
                                        caption = renderInformation.propertyDef.Property.Caption;
                                        if (renderInformation.capitaliseCaption && caption) {
                                            caption = caption.toUpperCase();
                                        }
                                        if (caption) {
                                            caption = caption + ": ";
                                        }
                                    }
                                    if (typeof valueToDisplay != "undefined") {
                                        if (renderInformation.subProperty) {
                                            valueToDisplay = valueToDisplay[renderInformation.subProperty];
                                            if (valueToDisplay && (valueToDisplay.Value !== undefined)) {
                                                returnValue = valueToDisplay.Value;
                                                if (renderInformation.showCaption) {
                                                    returnValue = caption + returnValue;
                                                }
                                            }
                                            else if (valueToDisplay) {
                                                returnValue = valueToDisplay;
                                                if (renderInformation.showCaption) {
                                                    returnValue = caption + returnValue;
                                                }
                                            }
                                        }
                                        else {
                                            if (renderInformation.propertyDef) {
                                                var format = renderInformation.propertyDef.PFFormat;
                                                if (format == "String" || format == "Decimal" || format == "Number" || format == "BigNumber" || format == "Decimal" || format == "Currency" || format == "Text") {
                                                    var valueUpdated = false;
                                                    if (valueToDisplay.StringValue || valueToDisplay.StringValue === "") {
                                                        if (valueToDisplay.StringValue) {
                                                            valueUpdated = true;
                                                            returnValue = valueToDisplay.StringValue;
                                                        }
                                                    }
                                                    else if (valueToDisplay.Value || valueToDisplay.Value === "") {
                                                        if (valueToDisplay.Value) {
                                                            valueUpdated = true;
                                                            returnValue = valueToDisplay.Value;
                                                        }
                                                    }
                                                    else {
                                                        valueUpdated = true;
                                                        returnValue = valueToDisplay;
                                                    }
                                                    if (valueUpdated && renderInformation.showCaption === true) {
                                                        returnValue = caption + returnValue;
                                                    }
                                                }
                                                else if (format == "Boolean") {
                                                    var value = "";
                                                    var rawValue = valueToDisplay;
                                                    if (rawValue.StringValue !== undefined) {
                                                        value = rawValue.StringValue;
                                                    }
                                                    else {
                                                        if (rawValue.Value !== undefined) {
                                                            rawValue = rawValue.Value;
                                                        }
                                                        value = rawValue ? renderInformation.propertyDef.Property.TrueString : renderInformation.propertyDef.Property.FalseString;
                                                    }
                                                    if (renderInformation.showCaption === false) {
                                                        returnValue = value;
                                                    }
                                                    else {
                                                        returnValue = caption + value;
                                                    }
                                                }
                                                else if (format == "Enum") {
                                                    var enumValue = valueToDisplay;
                                                    if (valueToDisplay.Value || valueToDisplay.Value === "") {
                                                        enumValue = valueToDisplay.Value;
                                                    }
                                                    var enumName = renderInformation.propertyDef.Property.EnumType;
                                                    returnValue = _this.trimClient.getEnumItemCaption(enumName, enumValue);
                                                    if (renderInformation.showCaption) {
                                                        returnValue = caption + returnValue;
                                                    }
                                                }
                                                else if (format == "Date" || format == "Datetime") {
                                                    if (valueToDisplay.IsClear) {
                                                        if (renderInformation.showCaption !== false) {
                                                            returnValue = caption;
                                                        }
                                                        if (renderInformation.defaultValue) {
                                                            returnValue = caption + renderInformation.defaultValue;
                                                        }
                                                    }
                                                    else {
                                                        if (format == "Datetime" && valueToDisplay.IsTimeClear == false) {
                                                            returnValue = HP.HPTRIM.Utils.String.formatDateTime(valueToDisplay, _this.trimClient.getDateFormat());
                                                            ;
                                                        }
                                                        else {
                                                            returnValue = HP.HPTRIM.Utils.String.formatDate(valueToDisplay, _this.trimClient.getDateFormat());
                                                        }
                                                        if (renderInformation.showCaption !== false) {
                                                            returnValue = caption + returnValue;
                                                        }
                                                    }
                                                }
                                            }
                                            else {
                                                if (!valueToDisplay.Value) {
                                                    if (valueToDisplay.Date) {
                                                        returnValue = valueToDisplay.Date;
                                                    }
                                                    else {
                                                        if (valueToDisplay.DateTime) {
                                                            returnValue = HP.HPTRIM.Utils.String.formatDateTime(valueToDisplay.DateTime, _this.trimClient.getDateFormat());
                                                        }
                                                        else {
                                                            returnValue = valueToDisplay;
                                                        }
                                                    }
                                                }
                                                else {
                                                    returnValue = valueToDisplay.Value;
                                                }
                                                if (renderInformation.showCaption) {
                                                    if (caption.length < 1) {
                                                        caption = renderInformation.property + ": ";
                                                    }
                                                    returnValue = caption + returnValue;
                                                }
                                            }
                                        }
                                    }
                                }
                                if (renderInformation.capitaliseText) {
                                    if (returnValue) {
                                        returnValue = returnValue.toUpperCase();
                                    }
                                }
                            }
                            return returnValue;
                        };
                        _.each(this.objectDefinition.childObjects, function (currentChildObjectInfo) {
                            var childObjectDef = _.find(childObjectDefList, function (childObjectDef) {
                                return (childObjectDef.type.name == currentChildObjectInfo.childObjectTypeName);
                            });
                            if (childObjectDef) {
                                var childObjectComponent = new Panels.MainObject.MainObjectChildComponent(trimClient, childObjectDef, currentChildObjectInfo, objectDefinition);
                                childObjectComponent.childObjectCommandPanel.back = function () {
                                    me.primaryPanel.panels([me.commandPanel]);
                                    me.mainPanel.panels([me.mainObjectListPanel]);
                                };
                                childObjectComponent.render = function (item, renderInfo) {
                                    return me.render(item, renderInfo);
                                };
                                childObjectComponent.getHighlight = me.getHighlight;
                                var searchCompleteCallback = function () {
                                    me.searching(false);
                                    if (me.currentChildObject.childObjectItemListPanel.getItemList().items().length > 0) {
                                        me.currentChildObject.noResults(false);
                                    }
                                    else {
                                        me.currentChildObject.noResults(true);
                                    }
                                    if (me.currentChildObject.childObjectItemListPanel.getItemList().items().length == 1) {
                                        me.currentChildObject.koShowChildItem(me.currentChildObject.childObjectItemListPanel.getItemList().items()[0]);
                                    }
                                };
                                var childObjectPagingSearchCallback = function () {
                                    me.searching(true);
                                    if (me.currentChildObject != undefined && me.currentChildObject.childObjectItemListPanel != undefined) {
                                        me.currentChildObject.childObjectItemListPanel.getItemList().items([]);
                                    }
                                };
                                var objectQuery = { searchString: "", baseObjectType: me.objectDefinition.type, sortBy: "" };
                                var childItemListPanel = new HP.HPTRIM.App.Panels.ItemList.TrimPagingItemListPanel(me.trimClient, me, HP.HPTRIM.Messages.web_searching, objectQuery, childObjectPagingSearchCallback, searchCompleteCallback);
                                childItemListPanel.setTrimItemListLoader(new HP.HPTRIM.DataLoader.ChildObjectItemListLoader(_this.trimClient, "", me.objectDefinition.type, currentChildObjectInfo.propertyName, true));
                                childItemListPanel.getPagingPlugin().generateEvent = function (page) { me.updatePageHistory(); };
                                childItemListPanel.getItemList().templateName('templates/MainObject/MainObjectChildItemList');
                                childObjectComponent.childObjectItemListPanel = childItemListPanel;
                                childObjectComponent.showChildObjects = function () {
                                    me.currentChildObject = childObjectComponent;
                                    var parentType = me.objectDefinition.type.name;
                                    var currentUri = me.detailComponent.uri;
                                    var childType = childObjectDef.type.name;
                                    childObjectComponent.parentUri = currentUri;
                                    childObjectComponent.noResults(false);
                                    var query = {
                                        searchString: "uri:" + me.detailComponent.uri,
                                        baseObjectType: HPTRIM.BaseObjectTypes.TodoItem,
                                        sortBy: "",
                                    };
                                    childItemListPanel.updateQuery(query, function (result) { });
                                    var description = HP.HPTRIM.Messages.web_showingChildObjectsForObjectTypeAndTitle;
                                    description = HPTRIM.Utils.String.format(description, [childObjectDef.CaptionPlural, objectDefinition.Caption, me.detailComponent.currentObjectTitle]);
                                    childObjectComponent.queryDisplayString(description);
                                    childObjectComponent.newChildForm.parentType = objectDefinition.type;
                                    childObjectComponent.newChildForm.parentUri = currentUri;
                                    childObjectComponent.newChildForm.childObjectProperty = currentChildObjectInfo.propertyName;
                                    me.primaryPanel.panels([childObjectComponent.childObjectCommandPanel]);
                                    me.mainPanel.panels([childItemListPanel]);
                                };
                                childObjectComponent.detailComponent.refreshCallback = function () {
                                    me.currentChildObject.childObjectItemListPanel.refresh();
                                };
                                if (currentChildObjectInfo.contsructorArguments && currentChildObjectInfo.contsructorArguments.length > 0) {
                                    var addChildForm = new Panels.Plugins.AddChildForm(trimClient, currentChildObjectInfo.contsructorArguments);
                                    childObjectComponent.newChildForm = addChildForm;
                                }
                            }
                            me.childObjectListArray.push(childObjectComponent);
                            me.detailComponent.childObjectArray.push(childObjectComponent);
                        });
                        this.commandPanel.executeQuery = function (query, clearResults, sortBy, filter) {
                            if (query.trim().length == 0) {
                                return;
                            }
                            if (clearResults) {
                                _this.mainObjectListPanel.itemList.items([]);
                            }
                            _this.localSearchHandler(query, "", _this.objectDefinition.type, filter, sortBy);
                        };
                        this.searchHandler = function (queryString, uri, baseObjectType, filterString, sortString) { };
                        this.localSearchHandler = function (queryString, uri, baseObjectType, filterString, sortString) { };
                        if (objectDefinition.hasFavorites) {
                            this.showSelected(true);
                        }
                        if (!this.showSelected()) {
                            _.each(objectDefinition.navigationTasks, function (navigationTask) {
                                if (navigationTask.supportsTagged) {
                                    _this.showSelected(true);
                                }
                            });
                        }
                        if (!this.showSelected()) {
                            _.each(objectDefinition.updateTasks, function (navigationTask) {
                                if (navigationTask.supportsTagged) {
                                    _this.showSelected(true);
                                }
                            });
                        }
                        this.commandPanel.clearSelections = function () {
                            me.selectAllCheckbox(false);
                            me.selections([]);
                        };
                        this.commandPanel.doNavTask = function (navTask) {
                            if (me.selections().length == 0) {
                                return;
                            }
                            var query = navTask.query;
                            var uriString = "";
                            if (navTask.objectPropertiesForQuery.length > 0) {
                                var uriArray = _.map(me.selectedInfoObjects(), function (infoObject) {
                                    var value = infoObject.Fields[navTask.objectPropertiesForQuery[0].property];
                                    if (value) {
                                        if (navTask.objectPropertiesForQuery[0].type == "Object") {
                                            value = value.Uri;
                                        }
                                        else if (value.StringValue) {
                                            value = value;
                                        }
                                        else if (value.Value) {
                                            value = value.Value;
                                        }
                                    }
                                    else {
                                        value = "";
                                    }
                                    return value;
                                });
                                uriString = uriArray.join(',');
                            }
                            else {
                                if (me.selections().length > 1) {
                                    uriString = me.selections().join(',');
                                }
                                else {
                                    uriString = me.selections()[0];
                                }
                            }
                            query = query.replace("{0}", uriString);
                            me.searchHandler(query, "", navTask.returnedType);
                        };
                        var updateItemListPanelItem = function (infoObject) {
                            if (_this.selectedUri() == infoObject.Uri) {
                                _this.objectPropertiesPanel.refresh();
                            }
                            var items = _this.mainObjectListPanel.itemList.items();
                            var item = _.find(items, function (item) {
                                return item.Fields.Uri == infoObject.Uri;
                            });
                            var updateRequired = false;
                            if (item) {
                                var properties = requiredListProperties;
                                _.each(properties, function (propertyName) {
                                    if (propertyName in infoObject) {
                                        if (propertyName != "Uri") {
                                            if (infoObject[propertyName].Value !== undefined) {
                                                if (item.Fields[propertyName] != infoObject[propertyName].Value) {
                                                    updateRequired = true;
                                                    item.Fields[propertyName] = infoObject[propertyName].Value;
                                                }
                                            }
                                            else {
                                                if (item.Fields[propertyName] != infoObject[propertyName]) {
                                                    updateRequired = true;
                                                    item.Fields[propertyName] = infoObject[propertyName];
                                                }
                                            }
                                        }
                                    }
                                });
                                if (updateRequired) {
                                    _this.mainObjectListPanel.itemList.items([]);
                                    _this.mainObjectListPanel.itemList.items(items);
                                }
                            }
                        };
                        this.updateItemListPanelItem = updateItemListPanelItem;
                        this.commandPanel.doUpdateTask = function (updateTask) {
                            var shouldContinue = true;
                            var pauseOnError = true;
                            var startCallback = function () {
                                me.taggedStartHandler(updateTask.caption, me.objectDefinition.type);
                            };
                            var updateCallback = function (infoObject, nameProperty, processedCount, total, continueCallback, completeCallback) {
                                if (me.selectedUri() && infoObject.Uri == me.selectedUri()) {
                                    me.detailComponent.updateMainObject(infoObject);
                                    me.detailComponent.renderMainObjectDetails(infoObject);
                                }
                                updateItemListPanelItem(infoObject);
                                var objectName = "-";
                                var processedInfoObject = _.find(me.selectedInfoObjects(), function (selectedInfoObject) {
                                    return selectedInfoObject.Fields.Uri == infoObject.Uri;
                                });
                                var objectName = me.render(processedInfoObject, nameProperty, true);
                                if (!objectName) {
                                    objectName = infoObject.Uri;
                                }
                                var cancelCallback = function () {
                                    shouldContinue = false;
                                };
                                me.taggedUpdateProgess(objectName, processedCount, total, cancelCallback);
                                if (shouldContinue) {
                                    continueCallback();
                                }
                                else {
                                    completeCallback();
                                }
                            };
                            var warningsToSkip = [];
                            var warningsToIgnore = [];
                            var warningCallback = function (warningMessage, warningCodes, uri, nameProperty, processedCount, total, continueCallback, skipCallback, cancelCallback) {
                                var processedInfoObject = _.find(me.selectedInfoObjects(), function (selectedInfoObject) {
                                    return (selectedInfoObject.Fields.Uri == uri);
                                });
                                var cancelProcessing = function () {
                                    shouldContinue = false;
                                    cancelCallback();
                                };
                                var skipCurrentObject = function () {
                                    skipCallback();
                                };
                                var skipAllWarnings = function () {
                                    if (warningCodes.length > 0) {
                                        warningsToSkip = warningsToSkip.concat(warningCodes);
                                        _.uniq(warningsToSkip);
                                    }
                                    skipCallback();
                                };
                                var ignoreWarning = function () {
                                    continueCallback();
                                };
                                var ignoreAllWarnings = function () {
                                    if (warningCodes.length > 0) {
                                        warningsToIgnore = warningsToIgnore.concat(warningCodes);
                                        _.uniq(warningsToIgnore);
                                    }
                                    continueCallback();
                                };
                                var warningCodeToCheck = warningCodes.length > 0 ? warningCodes[0] : "";
                                var pauseForThisObject = true;
                                var ignoreWarningsForThisObject = false;
                                if (warningCodes.length <= 1) {
                                    if (_.contains(warningsToSkip, warningCodeToCheck)) {
                                        pauseForThisObject = false;
                                    }
                                    if (_.contains(warningsToIgnore, warningCodeToCheck)) {
                                        pauseForThisObject = false;
                                        ignoreWarningsForThisObject = true;
                                    }
                                }
                                else {
                                    var anySkipFound = false;
                                    _.each(warningCodes, function (code) {
                                        if (_.contains(warningsToSkip, code)) {
                                            anySkipFound = true;
                                        }
                                    });
                                    if (anySkipFound) {
                                        pauseForThisObject = false;
                                        ignoreWarningsForThisObject = false;
                                    }
                                    else {
                                        if (!anySkipFound) {
                                            var ignore = true;
                                            _.each(warningCodes, function (code) {
                                                if (_.contains(warningsToIgnore, code)) {
                                                    ignore = ignore && true;
                                                }
                                                else {
                                                    ignore = false;
                                                }
                                            });
                                            if (ignore) {
                                                pauseForThisObject = false;
                                                ignoreWarningsForThisObject = true;
                                            }
                                        }
                                    }
                                }
                                var objectName = "-";
                                var objectName = me.render(processedInfoObject, nameProperty, true);
                                if (!objectName) {
                                    objectName = processedInfoObject.Uri;
                                }
                                me.taggedUpdateProgressWarning(objectName, uri, warningMessage, processedCount, total, cancelCallback, pauseForThisObject, ignoreWarningsForThisObject, skipCurrentObject, skipAllWarnings, ignoreWarning, ignoreAllWarnings, cancelProcessing);
                            };
                            var completeCallback = function (successCount, total, extraMsg) {
                                me.taggedCompleteProgess(successCount, total, extraMsg);
                            };
                            var failureCallback = function (rawError, uri, nameProperty, processedCount, total, continueCallback, completeCallback) {
                                var shouldContinue = true;
                                var processedInfoObject = _.find(me.selectedInfoObjects(), function (selectedInfoObject) {
                                    return (selectedInfoObject.Fields.Uri == uri);
                                });
                                var objectName = me.render(processedInfoObject, nameProperty, true);
                                if (!objectName) {
                                    objectName = uri;
                                }
                                var errorMessage = HP.HPTRIM.Messages.web_errorPerformingOperation;
                                if (rawError.ResponseStatus && rawError.ResponseStatus.Message) {
                                    errorMessage = rawError.ResponseStatus.Message;
                                }
                                if (rawError && rawError.ResponseStatus && rawError.ResponseStatus.Errors) {
                                    var error = _.find(rawError.ResponseStatus.Errors, function (currentError) {
                                        return (currentError.Meta && currentError.Meta.Bad == "True");
                                    });
                                    if (error) {
                                        errorMessage = error.Message;
                                    }
                                }
                                var cancelCallback = function () {
                                    shouldContinue = false;
                                };
                                var ignoreErrorsAndContinue = function () {
                                    pauseOnError = false;
                                    continueCallback();
                                };
                                var continueProcessing = function () {
                                    continueCallback();
                                };
                                var cancelProcessing = function () {
                                    shouldContinue = false;
                                    completeCallback();
                                };
                                me.taggedUpdateProgressError(objectName, uri, errorMessage, processedCount, total, cancelCallback, pauseOnError, ignoreErrorsAndContinue, continueCallback, cancelProcessing);
                            };
                            var data = {};
                            if (updateTask.propertiesToUpdate && updateTask.propertiesToUpdate.length != 0) {
                                _.each(updateTask.propertiesToUpdate, function (propToUpdate) {
                                    if (typeof propToUpdate.value != "undefined") {
                                        data[propToUpdate.propertyId] = propToUpdate.value;
                                    }
                                    else if (propToUpdate.clearValue == true) {
                                        data[propToUpdate.propertyId] = "";
                                    }
                                    else {
                                        var propertyDef = _this.trimClient.getMainObjectPropertyDefFromCache(_this.objectDefinition.type, propToUpdate.propertyId);
                                        var valueToSet;
                                        if (propertyDef.PFFormat == "Datetime") {
                                            var date = new Date();
                                            valueToSet = date.toISOString();
                                        }
                                        else if (propertyDef.PFFormat == "Boolean") {
                                            valueToSet = true;
                                        }
                                        data[propToUpdate.propertyId] = valueToSet;
                                    }
                                });
                                if (_.find(updateTask.propertiesToUpdate, function (propToUpdate) { return propToUpdate.requiresInput; })) {
                                    me.taggedUpdatePropertyDialogHandler(me.selections(), "", "", me.objectDefinition.type, updateTask, data, startCallback, updateCallback, completeCallback, warningCallback, failureCallback);
                                }
                                else {
                                    me.taggedUpdatePropertyHandler(me.selections(), "", "", me.objectDefinition.type, updateTask, data, startCallback, updateCallback, completeCallback, warningCallback, failureCallback);
                                }
                            }
                            else if (updateTask.serviceActionParameters.length > 0) {
                                me.taggedUpdateTaskDialogHandler(me.selections(), "", "", me.objectDefinition.type, updateTask, data, startCallback, updateCallback, completeCallback, warningCallback, failureCallback);
                            }
                            else {
                                me.taggedUpdateTaskHandler(me.selections(), "", "", me.objectDefinition.type, updateTask, data, startCallback, updateCallback, completeCallback, warningCallback, failureCallback);
                            }
                        };
                        this.showItem = function (data) {
                            $(".itemlist-ul li").removeClass('active');
                            var itemUri = "";
                            me.selectedUri("");
                            if (data.Uri) {
                                itemUri = data.Uri;
                            }
                            if (data.Fields) {
                                itemUri = data.Fields.Uri;
                            }
                            me.selectedUri(itemUri);
                            me.historySelectUri(itemUri);
                            $('#' + itemUri + '_li').addClass('active');
                        };
                        this.koShowItem = function (data) {
                            return function () {
                                me.showItem(data);
                            };
                        };
                        this.closeDetails = function (data) {
                            $(".itemlist-ul li").removeClass('active');
                            me.selectedUri("");
                            me.historySelectUri("");
                        };
                        this.detailComponent.getHighlight = this.getHighlight;
                        this.detailComponent.render = this.render;
                        this.detailComponent.deleteButtonClick = function () {
                            var uriToDelete = me.detailComponent.uri;
                            me.deleteObject(me.detailComponent.uri, me.objectDefinition.type, me.objectDefinition.Caption, me.detailComponent.currentObjectTitle, function () {
                                var callback = function (result) {
                                    me.searching(false);
                                    me.noResults(me.mainObjectListPanel.getItemList().items().length == 0);
                                    if (me.mainObjectListPanel.getItemList().items().length == 1) {
                                        me.selectedUri(me.mainObjectListPanel.getItemList().items()[0].Fields.Uri);
                                    }
                                    if (result && result.SearchTitle) {
                                        _this.queryDisplayString(result.SearchTitle);
                                    }
                                };
                                me.mainObjectListPanel.refresh(callback);
                                if (_.contains(me.selections(), uriToDelete)) {
                                    var updatedSelections = _.filter(me.selections(), function (selectedUri) {
                                        return (selectedUri != uriToDelete);
                                    });
                                    me.selections(updatedSelections);
                                }
                            });
                        };
                        this.updatePropertiesViewPanel = function (trimObject, additionalInfo) {
                        };
                        this.deleteObject = function () {
                        };
                        this.createCallback = function (uri) {
                            _this.mainObjectListPanel.refresh();
                        };
                        this.detailComponent.updateParentItemList = updateItemListPanelItem;
                        if (this.objectDefinition.showReports) {
                            this.showSelected(true);
                            this.reportCommandPanel = new Panels.MainObject.MainObjectReportCommandPanel(trimClient, objectDefinition);
                            me.mainObjectListPanel.itemList.items.subscribe(function (newValue) {
                                if (newValue.length > 0) {
                                    me.commandPanel.showReportsButton(true);
                                }
                                else {
                                    me.commandPanel.showReportsButton(false);
                                }
                            });
                            me.commandPanel.handleReportButtonClick = function () {
                                me.primaryPanel.panels([_this.reportCommandPanel]);
                            };
                            me.detailComponent.doReport = function (uri) {
                                uri = "" + uri;
                                if (!_this.selections() || _this.selections.indexOf(uri) == -1) {
                                    var currentSelections = _this.selections();
                                    currentSelections.push(uri);
                                    _this.selections(currentSelections);
                                }
                                me.primaryPanel.panels([_this.reportCommandPanel]);
                            };
                            me.reportCommandPanel.cancel = function () {
                                me.resetView();
                            };
                            me.reportCommandPanel.printRequestsUrl = ko.computed(function () {
                                var path = HPTRIM.BaseObjectTypes.Report.path + "/" + me.reportCommandPanel.getSelectedReportUri() + "/PrintToHTML";
                                var fullPath = me.trimClient.getUrl(path);
                                var query = "q=uri=";
                                for (var i = 0; i < me.selections().length; i++) {
                                    if (i > 0) {
                                        query += ",";
                                    }
                                    query += me.selections()[i];
                                }
                                return fullPath + "?" + query;
                            });
                            me.reportCommandPanel.doPrintRequests = function () {
                                if (me.selections().length == 0) {
                                    return false;
                                }
                                if (!me.reportCommandPanel.getSelectedReportName()) {
                                    return false;
                                }
                                me.resetView();
                                return true;
                            };
                        }
                        this.commandPanel.clearSelections = function () {
                            me.selectAllCheckbox(false);
                            me.selections([]);
                        };
                        this.selections.subscribe(function (newValue) {
                            me.commandPanel.bulkSelect(false);
                            if (newValue.length == 1) {
                                me.selectedUri(newValue[0]);
                            }
                            if (newValue.length > 1) {
                                me.commandPanel.showActions(true);
                            }
                            else {
                                me.commandPanel.showActions(false);
                            }
                            _.each(newValue, function (newUri) {
                                if (!_.find(me.selectedInfoObjects(), function (infoObject) { return infoObject.Fields.Uri == newUri; })) {
                                    me.selectedInfoObjects.push(_.find(me.mainObjectListPanel.itemList.items(), function (infoObject) {
                                        return infoObject.Fields.Uri == newUri;
                                    }));
                                }
                            });
                            var updatedSelectedInfoObject = _.filter(me.selectedInfoObjects(), function (infoObject) {
                                return _.contains(me.selections(), infoObject.Fields.Uri + "");
                            });
                            me.selectedInfoObjects(updatedSelectedInfoObject);
                        });
                        var selectAll = function () {
                            var items = me.mainObjectListPanel.getItemList().items();
                            for (var i = 0; i < items.length; i++) {
                                if (_this.selections().indexOf(String(items[i].Fields.Uri)) == -1) {
                                    _this.selections().push(String(items[i].Fields.Uri));
                                }
                            }
                            _this.selections.valueHasMutated();
                        };
                        var selectNone = function () {
                            var selectionArray = _this.selections();
                            var items = me.mainObjectListPanel.getItemList().items();
                            for (var i = 0; i < items.length; i++) {
                                var index = selectionArray.indexOf(String(items[i].Fields.Uri));
                                if (index != -1) {
                                    selectionArray.splice(index, 1);
                                }
                            }
                            _this.selections(selectionArray);
                        };
                        this.selectAllCheckbox.subscribe(function (newValue) {
                            if (me.showSelected()) {
                                if (newValue) {
                                    selectAll();
                                }
                                else {
                                    selectNone();
                                }
                            }
                        });
                        this.isSelected = function (uri) {
                            uri = "" + uri;
                            if (_this.selections().indexOf(uri) != -1) {
                                return true;
                            }
                            return false;
                        };
                        this.bulkSelect = function () {
                            _this.selections([]);
                            _this.selectAllCheckbox(false);
                            _this.commandPanel.bulkSelect(true);
                            _this.commandPanel.bulkQuery(_this.currentQuery());
                            _this.commandPanel.bulkCount(_this.mainObjectListPanel.getPlugin().totalItems());
                            _this.commandPanel.showActions(true);
                        };
                        this.historySelectUri = function (uri) {
                            me.updateHistory(me.objectDefinition.Caption, _this.getSelectedTrayId(), me.currentQuery(), uri, _this.mainObjectListPanel.getPlugin().currentPage(), me.historyFullState);
                        };
                        this.updatePageHistory = function () {
                            me.updateHistory(me.objectDefinition.Caption, _this.getSelectedTrayId(), me.currentQuery(), "", _this.mainObjectListPanel.getPlugin().currentPage());
                        };
                        this.commandPanel.updateTrayHistory = function (tray) {
                            me.updateHistory(me.objectDefinition.Caption, tray.id, tray.query);
                        };
                        this.selectedUri.subscribe(function (newUri) {
                            me.detailComponent.updateModel(newUri);
                            if (newUri == "") {
                                return;
                            }
                            var trimObject = new HPTRIM.TrimBaseObject(me.objectDefinition.type, newUri);
                            me.updatePropertiesViewPanel(trimObject);
                            me.objectPropertiesPanel.visible(true);
                        });
                        this.updateHistory = function (objectName, trayId, query, uri, page, fullState) {
                        };
                    }
                    MainObjectPanel.prototype.getClassName = function () {
                        return MainObjectPanel.CLASS_NAME;
                    };
                    MainObjectPanel.prototype.getIconClickHandler = function (item) {
                        return function () { };
                    };
                    MainObjectPanel.prototype.getTypeForPanel = function () {
                        return this.objectDefinition.type;
                    };
                    MainObjectPanel.prototype.getType = function () {
                        return this.objectDefinition.type.Caption;
                    };
                    MainObjectPanel.prototype.getSelectedTrayId = function () {
                        var retVal = "";
                        if (this.commandPanel.selectedTray()) {
                            retVal = this.commandPanel.selectedTray().id;
                        }
                        return retVal;
                    };
                    MainObjectPanel.prototype.getTopRight = function (item) {
                        return this.render(item, this.objectDefinition.listPropertyByLocation.TopRight);
                    };
                    MainObjectPanel.prototype.getTopRightToolTips = function (item) {
                        return this.render(item, this.objectDefinition.listPropertyByLocation.TopRight, false, true);
                    };
                    MainObjectPanel.prototype.getTopRightHighlight = function (item) {
                        return this.getHighlight(item, this.objectDefinition.listPropertyByLocation.TopRight);
                    };
                    MainObjectPanel.prototype.getTopLeft = function (item) {
                        return this.render(item, this.objectDefinition.listPropertyByLocation.TopLeft);
                    };
                    MainObjectPanel.prototype.getTopLeftToolTips = function (item) {
                        return this.render(item, this.objectDefinition.listPropertyByLocation.TopLeft, true, false);
                    };
                    MainObjectPanel.prototype.getTopLeftHighlight = function (item) {
                        return this.getHighlight(item, this.objectDefinition.listPropertyByLocation.TopLeft);
                    };
                    MainObjectPanel.prototype.getTitle = function (item) {
                        return this.render(item, this.objectDefinition.listPropertyByLocation.Title);
                    };
                    MainObjectPanel.prototype.getTitleToolTips = function (item) {
                        return this.render(item, this.objectDefinition.listPropertyByLocation.Title, false, true) + ': ' + this.getTitle(item);
                    };
                    MainObjectPanel.prototype.isElectronic = function (item) {
                        var returnVal = false;
                        if (this.detailComponent.viewTask()) {
                            var recordObject = item.Fields[this.detailComponent.viewTask().objectRecordProperty];
                            if (recordObject) {
                                returnVal = recordObject.RecordIsElectronic;
                                if (recordObject.RecordIsElectronic.Value || recordObject.RecordIsElectronic.Value === false) {
                                    returnVal = recordObject.RecordIsElectronic.Value;
                                }
                            }
                        }
                        return returnVal;
                    };
                    MainObjectPanel.prototype.getExtension = function (item) {
                        var returnVal = "";
                        if (this.detailComponent.viewTask()) {
                            var recordObject = item.Fields[this.detailComponent.viewTask().objectRecordProperty];
                            if (recordObject) {
                                returnVal = recordObject.RecordExtension;
                                if (recordObject.RecordExtension.Value || recordObject.RecordExtension.Value === "") {
                                    returnVal = recordObject.RecordExtension.Value;
                                }
                            }
                        }
                        return returnVal;
                    };
                    MainObjectPanel.prototype.getIcon = function (item) {
                        var returnValue = "";
                        var iconProperty = this.objectDefinition.listPropertyByLocation.Icon;
                        if (iconProperty) {
                            if (iconProperty.value) {
                                returnValue = iconProperty.value;
                            }
                            else if (iconProperty.property) {
                                returnValue = item.Fields[iconProperty.property];
                                if (iconProperty.subProperty) {
                                    returnValue = returnValue[iconProperty.subProperty];
                                }
                                if (returnValue) {
                                    returnValue = returnValue.toLowerCase() + "_x24";
                                }
                            }
                            else if (iconProperty.customisedValue) {
                                if (this.objectDefinition.type == HPTRIM.BaseObjectTypes.SavedSearch) {
                                    var savedSearchTypeName = item.Fields.SavedSearchObjectType;
                                    returnValue = HPTRIM.Utils.TrimHelper.getSavedSearchIconName(savedSearchTypeName, "_24");
                                }
                            }
                        }
                        return returnValue;
                    };
                    MainObjectPanel.prototype.getTitleHighlight = function (item) {
                        return this.getHighlight(item, this.objectDefinition.listPropertyByLocation.Title);
                    };
                    MainObjectPanel.prototype.getData = function (rawItem) {
                        var _this = this;
                        var rawData = rawItem;
                        if (rawItem.Fields) {
                            rawData = rawItem.Fields;
                        }
                        var me = this;
                        var dataList = [];
                        if (this.objectDefinition.listPropertyData) {
                            _.each(this.objectDefinition.listPropertyData, function (data) {
                                if (data.propertyDef != undefined) {
                                    dataList.push({ text: me.render(rawData, data), caption: data.propertyDef.Property.Caption, highlight: _this.getHighlight(rawData, data), isEmail: data.isEmail, onlyShownInDetailPanel: data.onlyShownInDetailPanel, toolTips: me.render(rawData, data, false, true) });
                                }
                                else {
                                    var textToShow = me.render(rawData, data);
                                    dataList.push({ text: textToShow, caption: textToShow, highlight: _this.getHighlight(rawData, data), isEmail: data.isEmail, onlyShownInDetailPanel: data.onlyShownInDetailPanel, toolTips: me.render(rawData, data, false, true) });
                                }
                            });
                        }
                        return dataList;
                    };
                    MainObjectPanel.prototype.showDefaultView = function () {
                        this.commandPanel.selectedTray(null);
                        this.commandPanel.openPageId(this.commandPanel.defaultPageId);
                        this.showView();
                    };
                    MainObjectPanel.prototype.showSelectedSubMenuItemView = function (id, trayPage) {
                        this.commandPanel.selectedTray(trayPage.pageItems[0]);
                        this.commandPanel.openPageId(trayPage.pageId);
                        this.showView();
                    };
                    MainObjectPanel.prototype.resetView = function () {
                        this.primaryPanel.panels([this.commandPanel]);
                        this.mainPanel.panels([this.mainObjectListPanel]);
                    };
                    MainObjectPanel.prototype.showView = function (uri) {
                        this.primaryPanel.panels([this.commandPanel]);
                        this.mainPanel.panels([this.mainObjectListPanel]);
                        if (this.commandPanel.selectedTray()) {
                            this.localSearchHandler(this.commandPanel.defaultTray.query, "", this.objectDefinition.type, "", this.commandPanel.defaultTray.sortBy);
                            this.commandPanel.selectedTray(this.commandPanel.defaultTray);
                            this.commandPanel.selectedTrayCaption(this.commandPanel.defaultTray.caption);
                        }
                        else if (this.commandPanel.defaultTray) {
                            this.localSearchHandler(this.commandPanel.defaultTray.query, "", this.objectDefinition.type, "", this.commandPanel.defaultTray.sortBy);
                            this.commandPanel.selectedTray(this.commandPanel.defaultTray);
                            this.commandPanel.selectedTrayCaption(this.commandPanel.defaultTray.caption);
                        }
                        if (uri) {
                            this.selectedUri(uri);
                        }
                        else {
                            this.selectedUri("");
                        }
                    };
                    MainObjectPanel.prototype.doSearch = function (query, uri, filterString, sort, searchOptions) {
                        this.primaryPanel.panels([this.commandPanel]);
                        this.mainPanel.panels([this.mainObjectListPanel]);
                        this.commandPanel.selectedTray(null);
                        this.commandPanel.selectedTrayCaption("");
                        this.updateView(query, sort, filterString, searchOptions);
                        if (uri) {
                            this.selectedUri(uri);
                        }
                        else {
                            this.selectedUri("");
                        }
                    };
                    MainObjectPanel.prototype.setFilterClause = function (filter) {
                        this.filter = filter;
                    };
                    MainObjectPanel.prototype.refresh = function () {
                        this.mainObjectListPanel.refresh();
                    };
                    MainObjectPanel.prototype.updateView = function (query, sortBy, filterString, searchOptions) {
                        var _this = this;
                        this.selectedUri("");
                        this.selections([]);
                        this.selectAllCheckbox(false);
                        var me = this;
                        var callback = function (result) {
                            me.searching(false);
                            me.noResults(me.mainObjectListPanel.getItemList().items().length == 0);
                            if (me.mainObjectListPanel.getItemList().items().length == 1) {
                                me.selectedUri(me.mainObjectListPanel.getItemList().items()[0].Fields.Uri);
                            }
                            if (result && result.SearchTitle) {
                                _this.queryDisplayString(result.SearchTitle);
                            }
                            var responseStatus = result.responseStatus;
                            if (result.errorThrown || (responseStatus && responseStatus.Message)) {
                                var errorMessage = result.errorThrown;
                                if (responseStatus && responseStatus.Message) {
                                    errorMessage = responseStatus.Message;
                                }
                                _this.queryDisplayString(errorMessage);
                            }
                            if (result.MinimumCount >= 500) {
                                _this.countEnabled(true);
                                _this.count("Count");
                            }
                            else {
                                _this.countEnabled(false);
                                _this.count(" ");
                            }
                        };
                        this.currentQuery(query);
                        if (this.filter) {
                            query = "(" + query + ") and (" + me.filter + ")";
                        }
                        var isearchQuery = { searchString: query, baseObjectType: me.mainObjectListPanel.getCurrentType(), sortBy: sortBy, filter: filterString, searchOptions: searchOptions };
                        this.searching(true);
                        this.noResults(false);
                        this.mainObjectListPanel.updateQuery(isearchQuery, callback, true);
                        var currentSortBy = this.mainObjectListPanel.trimItemListLoader._sortOrder;
                        var sortInfo = "";
                        if (currentSortBy && currentSortBy.length > 0) {
                            sortInfo = ", " + HP.HPTRIM.Messages.web_sort + ": ";
                            if (currentSortBy[currentSortBy.length - 1] == "+") {
                                sortInfo += currentSortBy.substring(0, currentSortBy.length - 1);
                                sortInfo += " ";
                                sortInfo += HP.HPTRIM.Messages.web_asc;
                            }
                            else if (currentSortBy[currentSortBy.length - 1] == "-") {
                                sortInfo += currentSortBy.substring(0, currentSortBy.length - 1);
                                sortInfo += " ";
                                sortInfo += HP.HPTRIM.Messages.web_desc;
                            }
                            else {
                                sortInfo += currentSortBy;
                                sortInfo += " ";
                                sortInfo += HP.HPTRIM.Messages.web_asc;
                            }
                        }
                        this.queryDisplayString(HP.HPTRIM.Messages.web_query + ": " + "'" + query + sortInfo + "'");
                        this.count("Count");
                    };
                    MainObjectPanel.prototype.getCount = function () {
                        var me = this;
                        if (me.countEnabled()) {
                            var search = new HPTRIM.TrimMainObjectSearch(this.trimClient, me.mainObjectListPanel.getCurrentType());
                            search.setSearchString(me.currentQuery());
                            search.setExcludeCount(true);
                            search.setCountResults(true);
                            var me = this;
                            this.isLoading(true);
                            var currentRequestXhr = search.page().done(function (result) {
                                me.isLoading(false);
                                me.count("[" + HPTRIM.Messages.web_totalResults + ":" + result.Count + "]");
                                me.countEnabled(false);
                            }).fail(function (jqXHR, responseStatus, errorThrown) {
                                if (errorThrown || (responseStatus && responseStatus.Message)) {
                                    var errorMessage = errorThrown;
                                    if (responseStatus && responseStatus.Message) {
                                        errorMessage = responseStatus.Message;
                                    }
                                    this.queryDisplayString(errorMessage);
                                }
                                me.isLoading(false);
                            });
                        }
                    };
                    MainObjectPanel.prototype.selectSomeMore = function (objectUris) {
                        if (!objectUris) {
                            return;
                        }
                        if (objectUris.length == 0) {
                            return;
                        }
                        for (var idx in objectUris) {
                            var uri = objectUris[idx];
                            if (!_.contains(this.selections(), uri)) {
                                this.selections().push(uri);
                            }
                        }
                        this.selections.valueHasMutated();
                    };
                    MainObjectPanel.prototype.setContext = function (context) {
                        var me = this;
                        if (context.trayId) {
                            _.find(me.commandPanel.trayPages(), function (trayPage) {
                                var matchingTray = _.find(trayPage.pageItems, function (tray) {
                                    if (tray.id == context.trayId) {
                                        return true;
                                    }
                                });
                                if (matchingTray) {
                                    me.commandPanel.selectedTray(matchingTray);
                                    me.commandPanel.selectedTrayCaption(matchingTray.caption);
                                    me.commandPanel.openPageId(trayPage.pageId);
                                    return true;
                                }
                            });
                        }
                        if (context.query) {
                            me.updateView(context.query);
                        }
                        if (context.page) {
                            this.mainObjectListPanel.getPlugin().currentPage(context.page);
                        }
                        if (context.uri) {
                            me.selectedUri(context.uri);
                        }
                        else {
                            me.selectedUri("");
                        }
                    };
                    MainObjectPanel.CLASS_NAME = "MainObjectPanel";
                    return MainObjectPanel;
                }(HP.HPTRIM.Framework.Components.Layouts.SinglePage.ContentPanel));
                Panels.MainObjectPanel = MainObjectPanel;
            })(Panels = App.Panels || (App.Panels = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Panels;
            (function (Panels) {
                var MainObject;
                (function (MainObject) {
                    var DummyPropery = (function () {
                        function DummyPropery() {
                        }
                        DummyPropery.Property = {
                            "Id": "Uri",
                            "IsEMailAddress": false,
                            "IsHyperlink": false,
                            "DefaultColumnCharacters": 20,
                            "ColumnWidth": 134,
                            "IsDefaultDataGridColumn": false,
                            "BestFitColumn": false,
                            "IconAndOrTextMode": "Text",
                            "StringAlignment": "Right",
                            "SortMode": "Numeric",
                            "Caption": "Unique Identifier",
                            "ObjectType": "Unknown",
                            "PFFormat": "BigNumber",
                            "Property": {
                                "CanView": true,
                                "SearchClauseId": "Uri",
                                "IsDefaultDataGridColumn": false,
                                "IsDataGridColumn": true,
                                "FalseString": "",
                                "TrueString": "",
                                "Length": 0,
                                "PFFormat": "BigNumber",
                                "IsExposedInSDK": true,
                                "InternalName": "uri",
                                "IsNameProperty": false,
                                "EnumType": "Unknown",
                                "ObjectType": "Unknown",
                                "Format": "BigNumber",
                                "IsOkForDataEntry": false,
                                "IsDefaultForViewPane": false,
                                "IsOkForViewPane": true,
                                "IsReadOnly": true,
                                "IconDefaultMode": "Text",
                                "StringAlignment": "Right",
                                "SortMode": "Numeric",
                                "CaptionShort": "Unique Identifier",
                                "Caption": "Unique Identifier",
                                "Id": "Uri",
                                "CanModify": false
                            },
                            "PropertyId": "Uri",
                            "IsAField": false,
                            "IsAProperty": true,
                            "IsMandatory": false,
                        };
                        return DummyPropery;
                    }());
                    MainObject.DummyPropery = DummyPropery;
                    var MainObjectDefinitions = (function () {
                        function MainObjectDefinitions(trimClient, retrievedObjectDefs, requiredObjectIds, objectPropertyCache) {
                            var _this = this;
                            this.definitions = [];
                            this.childDefinitions = [];
                            var me = this;
                            var rawHandCodedApplicationDefinition = HP.HPTRIM.App.RawApplicationDefinition.getDefinition();
                            _.each(rawHandCodedApplicationDefinition.ObjectDef, function (rawObjectDef) {
                                if (!_.contains(requiredObjectIds, rawObjectDef.Id)) {
                                    return;
                                }
                                var rawServiceObjectDef = _.find(retrievedObjectDefs, function (rawServiceObjectDef) {
                                    if (rawServiceObjectDef.Id == rawObjectDef.Id) {
                                        return true;
                                    }
                                });
                                if (rawServiceObjectDef) {
                                    $.extend(rawObjectDef, rawServiceObjectDef);
                                }
                                var newDef = {
                                    Id: rawObjectDef.Id,
                                    type: HPTRIM.Utils.TrimHelper.toBaseObjectType(rawObjectDef.Name),
                                    isChild: rawObjectDef.IsChild,
                                    ButtonCaption: rawObjectDef.ButtonCaption,
                                    ToolTip: rawObjectDef.ButtonToolTip,
                                    CanAnybodyCreate: rawObjectDef.CanAnybodyCreate,
                                    CreatePermissions: rawObjectDef.CreatePermissions,
                                    DataEntryFormDefinition: "",
                                    CanAnybodyUpdate: rawObjectDef.CanAnybodyUpdate,
                                    UpdatePermission: rawObjectDef.UpdatePermission,
                                    CanAnybodyDelete: rawObjectDef.CanAnybodyDelete,
                                    DeletePermission: rawObjectDef.DeletePermission,
                                    Caption: rawObjectDef.Caption,
                                    CaptionPlural: rawObjectDef.CaptionPlural || HP.HPTRIM.Messages.web_loading + ' ...',
                                    icon: rawObjectDef.WebIcon,
                                    navIcon: rawObjectDef.Name,
                                    navCaptionOverride: rawObjectDef.NavCaptionOverride,
                                    UpdateDescription: rawObjectDef.UpdateCaption,
                                    RequiredProductFeatureNames: rawObjectDef.RequiredProductFeatureName,
                                    RequiredFeaturePermissions: [],
                                    RequiredObjectOnCreate: rawObjectDef.RequiredObjectOnCreate,
                                    panelCaptionOverride: rawObjectDef.PanelCaptionOverride,
                                    description: rawObjectDef.Description ? rawObjectDef.Description : "",
                                    hasNotes: rawObjectDef.HasNotes,
                                    notesPropertyName: rawObjectDef.NotesPropertyName,
                                    notesPropertyReadOnly: rawObjectDef.NotesPropertyReadOnly,
                                    canUpdateNotes: rawObjectDef.CanUpdateNotes,
                                    showSearch: rawObjectDef.showSearch,
                                    hasFavorites: rawObjectDef.HasFavorites,
                                    showReports: rawObjectDef.HasReports,
                                    mandatoryDetailProperties: [],
                                    trayPages: [],
                                    requiredProperties: ["PossiblyHasSubordinates"],
                                    requiredDetailProperties: [],
                                    requiredCommandIds: [],
                                    listPropertyByLocation: {},
                                    listPropertyData: [],
                                    listPropertyDetailData: [],
                                    createTasks: [],
                                    navigationTasks: [],
                                    taggedNavigationTasks: [],
                                    updateTasks: [],
                                    taggedUpdateTasks: [],
                                    childObjects: [],
                                    isHiddenInNavPanel: rawObjectDef.isHiddenInNavPanel,
                                    hasFilters: rawObjectDef.hasFilters,
                                    rawFilters: rawObjectDef.filterList,
                                };
                                if (rawObjectDef.DataEntryFormDefinition && rawObjectDef.DataEntryFormDefinition.length > 0) {
                                    newDef.DataEntryFormDefinition = rawObjectDef.DataEntryFormDefinition[rawObjectDef.DataEntryFormDefinition.length - 1];
                                }
                                if (!newDef.type) {
                                    newDef.type = {
                                        name: rawObjectDef.Id,
                                        path: rawObjectDef.Id,
                                        nameProperty: rawObjectDef.NamePropertyId,
                                    };
                                }
                                if (rawObjectDef.RequiredPermissions) {
                                    newDef.RequiredFeaturePermissions = rawObjectDef.RequiredPermissions;
                                }
                                if (rawObjectDef.RequiredObjectOnCreate) {
                                    newDef.RequiredObjectOnCreate = rawObjectDef.RequiredObjectOnCreate;
                                }
                                var pageCount = 0;
                                _.each(rawObjectDef.Trays, function (rawTrayPage) {
                                    var trayPage = {
                                        pageCaption: (rawTrayPage.pageCaption ? rawTrayPage.pageCaption : "-"),
                                        pageId: (rawTrayPage.pageId ? rawTrayPage.pageId : "page_" + pageCount),
                                        pageItems: [],
                                    };
                                    _.each(rawTrayPage.pageItems, function (rawPageItem) {
                                        var searchTray = {
                                            caption: rawPageItem.caption,
                                            query: rawPageItem.query,
                                            sortBy: rawPageItem.sortBy,
                                            isDefault: rawPageItem.isDefault,
                                            id: rawPageItem.name
                                        };
                                        trayPage.pageItems.push(searchTray);
                                    });
                                    newDef.trayPages.push(trayPage);
                                });
                                var processRawObjectProperty = function (currentRawItemListProperty, existingObjectProperty) {
                                    var objectProperty = {
                                        location: currentRawItemListProperty.location,
                                        highlightConditions: [],
                                        objectListPropertyOptionsList: []
                                    };
                                    if (currentRawItemListProperty.customisedValue) {
                                        objectProperty.customisedValue = currentRawItemListProperty.customisedValue;
                                    }
                                    if (currentRawItemListProperty.value) {
                                        objectProperty.value = currentRawItemListProperty.value;
                                    }
                                    if (currentRawItemListProperty.showCaption) {
                                        objectProperty.showCaption = currentRawItemListProperty.showCaption;
                                    }
                                    if (currentRawItemListProperty.showCaption === false) {
                                        objectProperty.showCaption = false;
                                    }
                                    objectProperty.capitaliseCaption = currentRawItemListProperty.capitaliseCaption;
                                    objectProperty.capitaliseText = currentRawItemListProperty.capitaliseText;
                                    objectProperty.onlyShownInDetailPanel = currentRawItemListProperty.onlyShownInDetailPanel;
                                    if (currentRawItemListProperty.preConditions) {
                                        objectProperty.preconditions = [];
                                        _.forEach(currentRawItemListProperty.preConditions, function (rawPrecondition) {
                                            objectProperty.preconditions.push({
                                                property: rawPrecondition.property,
                                                subProperty: rawPrecondition.subProperty,
                                                value: rawPrecondition.value,
                                            });
                                        });
                                    }
                                    if (currentRawItemListProperty.property) {
                                        objectProperty.property = currentRawItemListProperty.property;
                                        objectProperty.requiredPermission = currentRawItemListProperty.requiredPermission;
                                        if ((!objectProperty.requiredPermission) ||
                                            (objectProperty.requiredPermission && trimClient.getDatabase().currentUserPermissions()[objectProperty.requiredPermission])) {
                                            var displayPropertyDefinition = trimClient.getMainObjectPropertyDefFromCache(newDef.type, currentRawItemListProperty.property);
                                            if (displayPropertyDefinition) {
                                                objectProperty.propertyDef = displayPropertyDefinition;
                                            }
                                            else {
                                                objectProperty.propertyDef = DummyPropery.Property;
                                            }
                                            if (currentRawItemListProperty.location != "DetailData" && currentRawItemListProperty.location != "DetailDataRight") {
                                                newDef.requiredProperties.push(currentRawItemListProperty.property);
                                            }
                                            if (currentRawItemListProperty.subProperty) {
                                                objectProperty.subProperty = currentRawItemListProperty.subProperty;
                                            }
                                            if (currentRawItemListProperty.defaultValue || currentRawItemListProperty.defaultValue === "") {
                                                objectProperty.defaultValue = currentRawItemListProperty.defaultValue;
                                            }
                                            if (currentRawItemListProperty.highlightProperties) {
                                                _.each(currentRawItemListProperty.highlightProperties, function (rawPropertyHighlight) {
                                                    newDef.requiredProperties.push(rawPropertyHighlight.property);
                                                    var propertyHighlight = {
                                                        propertyName: rawPropertyHighlight.property,
                                                        value: rawPropertyHighlight.value,
                                                        notNull: rawPropertyHighlight.notNull,
                                                        missing: rawPropertyHighlight.missing,
                                                    };
                                                    objectProperty.highlightConditions.push(propertyHighlight);
                                                });
                                            }
                                            if (currentRawItemListProperty.isEmail === true) {
                                                objectProperty.isEmail = true;
                                            }
                                        }
                                    }
                                    if (currentRawItemListProperty.propertyOptions) {
                                        _.forEach(currentRawItemListProperty.propertyOptions, function (propertyOption) {
                                            processRawObjectProperty(propertyOption, objectProperty);
                                        });
                                    }
                                    if (existingObjectProperty) {
                                        existingObjectProperty.objectListPropertyOptionsList.push(objectProperty);
                                    }
                                    else if (currentRawItemListProperty.location == "Data") {
                                        newDef.listPropertyData.push(objectProperty);
                                    }
                                    else if (currentRawItemListProperty.location == "DetailData") {
                                        objectProperty.showCaption = false;
                                        newDef.listPropertyDetailData.push(objectProperty);
                                    }
                                    else if (currentRawItemListProperty.location == "DetailDataRight") {
                                        newDef.propertyDetailDataRight = objectProperty;
                                    }
                                    else {
                                        newDef.listPropertyByLocation[currentRawItemListProperty.location] = (objectProperty);
                                    }
                                };
                                _.each(rawObjectDef.ItemListProperties, function (rawItemListProperty) {
                                    if (rawItemListProperty.location) {
                                        processRawObjectProperty(rawItemListProperty);
                                    }
                                });
                                _.each(rawObjectDef.navigationTasks, function (rawNavTask) {
                                    var navTask = _this.buildNavTask(rawNavTask);
                                    if (navTask.supportsSingle) {
                                        if (navTask.isGroup) {
                                            navTask.subTasks = _.filter(navTask.subTasks, function (task) {
                                                return task.supportsSingle;
                                            });
                                        }
                                        if (!navTask.isGroup || navTask.subTasks.length > 0) {
                                            newDef.navigationTasks.push(navTask);
                                        }
                                        if (navTask.preConditions && navTask.preConditions.length > 0) {
                                            _.forEach(navTask.preConditions, function (preCondition) {
                                                newDef.requiredDetailProperties.push(preCondition.property);
                                            });
                                        }
                                    }
                                    var taggedNavTask = _this.buildNavTask(rawNavTask);
                                    if (taggedNavTask.supportsTagged) {
                                        if (taggedNavTask.isGroup) {
                                            taggedNavTask.subTasks = _.filter(taggedNavTask.subTasks, function (task) {
                                                return task.supportsTagged;
                                            });
                                        }
                                        if (!taggedNavTask.isGroup || taggedNavTask.subTasks.length > 0) {
                                            newDef.taggedNavigationTasks.push(taggedNavTask);
                                        }
                                        _.forEach(taggedNavTask.objectPropertiesForQuery, function (objectProp) {
                                            newDef.requiredProperties.push(objectProp.property);
                                        });
                                    }
                                    if (taggedNavTask.enabledCommandId) {
                                        newDef.requiredCommandIds.push(taggedNavTask.enabledCommandId);
                                    }
                                });
                                if (rawObjectDef.viewTask) {
                                    var viewTask = {
                                        caption: rawObjectDef.viewTask.caption,
                                        id: rawObjectDef.viewTask.id,
                                        objectRecordProperty: rawObjectDef.viewTask.property,
                                        enabledCommandId: rawObjectDef.enabledCommandId
                                    };
                                    newDef.viewTask = viewTask;
                                    newDef.requiredProperties.push(viewTask.objectRecordProperty);
                                    if (viewTask.enabledCommandId) {
                                        newDef.requiredCommandIds.push(viewTask.enabledCommandId);
                                    }
                                }
                                ;
                                if (rawObjectDef.searchTask) {
                                    var searchTask = {
                                        id: rawObjectDef.searchTask.id,
                                        objectSearchQueryProperty: rawObjectDef.searchTask.objectSearchQeryProperty,
                                        objectSearchDescriptionProperty: rawObjectDef.searchTask.objectSearchDescriptionProperty,
                                        objectFilterProperty: rawObjectDef.searchTask.objectFilterProperty,
                                        objectSortProperty: rawObjectDef.searchTask.objectSortProperty,
                                        objectTypeNameProperty: rawObjectDef.searchTask.objectTypeNameProperty,
                                        searchDefinitionProperty: rawObjectDef.searchTask.searchDefinitionProperty,
                                        searchIsOldFormatProperty: rawObjectDef.searchTask.searchIsOldFormatProperty,
                                    };
                                    newDef.searchTask = searchTask;
                                    newDef.requiredProperties.push(searchTask.objectSearchQueryProperty);
                                    newDef.requiredDetailProperties.push(searchTask.objectSearchDescriptionProperty);
                                    newDef.requiredProperties.push(searchTask.objectFilterProperty);
                                    newDef.requiredProperties.push(searchTask.objectSortProperty);
                                    newDef.showSearch = true;
                                }
                                ;
                                _.each(rawObjectDef.createTasks, function (rawCreateTask) {
                                    var createTask = {
                                        id: rawCreateTask.id,
                                        caption: rawCreateTask.caption,
                                        title: rawCreateTask.title ? rawCreateTask.title : rawCreateTask.caption,
                                        titleProperty: rawCreateTask.titleProperty,
                                        toolTip: rawCreateTask.tooltip,
                                        successMessage: rawCreateTask.successMessage,
                                        icon: rawCreateTask.icon,
                                        requiredPermission: rawCreateTask.requiredPermission,
                                        enabledCommandId: rawCreateTask.enabledCommandId,
                                        objectType: HPTRIM.Utils.TrimHelper.toBaseObjectType(rawCreateTask.objectType),
                                        newType: HPTRIM.Utils.TrimHelper.toBaseObjectType(rawCreateTask.returnedType),
                                        defaultParameters: []
                                    };
                                    _.each(rawCreateTask.defaultValues, function (defaultValue) {
                                        var parm = {
                                            name: defaultValue.name,
                                            type: defaultValue.type,
                                            displayProperty: defaultValue.displayProperty,
                                            displayValueExtra: defaultValue.displayValueExtra,
                                            iconProperty: defaultValue.iconProperty,
                                        };
                                        createTask.defaultParameters.push(parm);
                                    });
                                    newDef.createTasks.push(createTask);
                                });
                                _.each(rawObjectDef.updateTasks, function (rawUpdateTask) {
                                    var updateTask = _this.buildUpdateTask(rawUpdateTask, newDef.type);
                                    updateTask.nameProperty = newDef.listPropertyByLocation.Title;
                                    if (updateTask.supportsSingle) {
                                        if (updateTask.isGroup) {
                                            updateTask.subTasks = _.filter(updateTask.subTasks, function (task) {
                                                return task.supportsSingle;
                                            });
                                        }
                                        if (!updateTask.isGroup || updateTask.subTasks.length > 0) {
                                            newDef.updateTasks.push(updateTask);
                                        }
                                    }
                                    var taggedUpdateTask = _this.buildUpdateTask(rawUpdateTask, newDef.type);
                                    taggedUpdateTask.nameProperty = newDef.listPropertyByLocation.Title;
                                    if (taggedUpdateTask.taggedErrorProperty) {
                                        newDef.requiredProperties.push(taggedUpdateTask.taggedErrorProperty);
                                        taggedUpdateTask.nameProperty = {
                                            property: updateTask.taggedErrorProperty,
                                            location: "",
                                            highlightConditions: [],
                                            objectListPropertyOptionsList: [],
                                        };
                                    }
                                    if (taggedUpdateTask.supportsTagged) {
                                        if (taggedUpdateTask.isGroup) {
                                            taggedUpdateTask.subTasks = _.filter(taggedUpdateTask.subTasks, function (task) {
                                                return task.supportsTagged;
                                            });
                                            taggedUpdateTask.subTasks = _.filter(taggedUpdateTask.subTasks, function (task) {
                                                var requiredFeatureEnabled = true;
                                                if (task.requiredFeature) {
                                                    if (!_.contains(trimClient.getDatabase().activeFeatures(), task.requiredFeature)) {
                                                        requiredFeatureEnabled = false;
                                                    }
                                                }
                                                return requiredFeatureEnabled;
                                            });
                                        }
                                    }
                                    if (!taggedUpdateTask.isGroup || taggedUpdateTask.subTasks.length > 0) {
                                        newDef.taggedUpdateTasks.push(taggedUpdateTask);
                                    }
                                    if (updateTask.enabledCommandId) {
                                        newDef.requiredCommandIds.push(updateTask.enabledCommandId);
                                    }
                                    _.each(updateTask.subTasks, function (subUpdateTask) {
                                        if (subUpdateTask.enabledCommandId) {
                                            newDef.requiredCommandIds.push(subUpdateTask.enabledCommandId);
                                        }
                                    });
                                });
                                newDef.requiredCommandIds = _.uniq(newDef.requiredCommandIds);
                                _.each(rawObjectDef.ChildObjects, function (rawChildObject) {
                                    var childObject = {
                                        childObjectTypeName: rawChildObject.type,
                                        propertyName: rawChildObject.property,
                                        contsructorArguments: [],
                                        displayConditions: []
                                    };
                                    _.each(rawChildObject.constructorArguments, function (rawConstructorArgument) {
                                        var constructArgument = {
                                            caption: rawConstructorArgument.caption,
                                            type: rawConstructorArgument.type,
                                            propertyName: rawConstructorArgument.propertyName,
                                            enumName: rawConstructorArgument.enumName,
                                            objectType: rawConstructorArgument.objectType,
                                        };
                                        childObject.contsructorArguments.push(constructArgument);
                                    });
                                    _.each(rawChildObject.displayConditions, function (rawCondition) {
                                        var displayCondition = {
                                            missing: rawCondition.missing,
                                            notNull: rawCondition.notNull,
                                            propertyName: rawCondition.property,
                                            value: rawCondition.value,
                                        };
                                        childObject.displayConditions.push(displayCondition);
                                    });
                                    newDef.childObjects.push(childObject);
                                });
                                _.each(rawObjectDef.mandatoryProperties, function (property) {
                                    newDef.mandatoryDetailProperties.push(property);
                                });
                                _.each(newDef.updateTasks, function (updateTask) {
                                    updateTask.requiredCommandIds = newDef.requiredCommandIds;
                                });
                                var features = trimClient.getDatabase().activeFeatures();
                                var enabled = true;
                                _.each(newDef.RequiredProductFeatureNames, function (featureName) {
                                    if (!_.contains(features, featureName)) {
                                        enabled = false;
                                    }
                                    ;
                                });
                                if (newDef.RequiredFeaturePermissions && newDef.RequiredFeaturePermissions.length > 0) {
                                    _.each(newDef.RequiredFeaturePermissions, function (permissionName) {
                                        var hasPermission = trimClient.getDatabase().currentUserPermissions()[permissionName];
                                        if (!hasPermission) {
                                            enabled = false;
                                        }
                                    });
                                }
                                if (enabled) {
                                    if (newDef.isChild) {
                                        me.childDefinitions.push(newDef);
                                    }
                                    else {
                                        me.definitions.push(newDef);
                                    }
                                }
                            });
                        }
                        MainObjectDefinitions.prototype.getMainObjectDef = function (objectType) {
                            return _.find(this.definitions, function (mainObject) {
                                return mainObject.type == objectType;
                            });
                        };
                        MainObjectDefinitions.prototype.removeUnsupportedNavTasks = function (supportedObjects) {
                            var me = this;
                            var currentlySupportedObjects = supportedObjects;
                            _.each(this.definitions, function (mainObject) {
                                currentlySupportedObjects.push(mainObject.type);
                            });
                            _.each(this.definitions, function (mainObject) {
                                var supportedNavTasks = [];
                                _.each(mainObject.navigationTasks, function (navTask) {
                                    if (me.validateNavTask(supportedObjects, navTask)) {
                                        supportedNavTasks.push(navTask);
                                    }
                                });
                                mainObject.navigationTasks = supportedNavTasks;
                            });
                        };
                        MainObjectDefinitions.prototype.validateNavTask = function (supportedObjects, navTask) {
                            var me = this;
                            if (navTask.isGroup) {
                                var enabledSubTasks = [];
                                _.each(navTask.subTasks, function (subTask) {
                                    if (me.validateNavTask(supportedObjects, subTask)) {
                                        enabledSubTasks.push(subTask);
                                    }
                                });
                                if (enabledSubTasks.length > 0) {
                                    navTask.subTasks = enabledSubTasks;
                                    return true;
                                }
                                return false;
                            }
                            else {
                                if (_.contains(supportedObjects, navTask.returnedType)) {
                                    return true;
                                }
                                return false;
                            }
                        };
                        MainObjectDefinitions.prototype.buildUpdateTask = function (rawUpdateTask, objectType) {
                            var _this = this;
                            var updateTask = {
                                id: rawUpdateTask.id,
                                caption: rawUpdateTask.caption,
                                title: rawUpdateTask.title ? rawUpdateTask.title : rawUpdateTask.caption,
                                titleProperty: rawUpdateTask.titleProperty,
                                toolTip: rawUpdateTask.tooltip,
                                successMessage: rawUpdateTask.successMessage,
                                icon: rawUpdateTask.icon,
                                isGroup: rawUpdateTask.isGroup,
                                preConditions: [],
                                requiredPermission: rawUpdateTask.requiredPermission,
                                supportsTagged: rawUpdateTask.supportsTagged,
                                supportsSingle: rawUpdateTask.supportsSingle,
                                enabledCommandId: rawUpdateTask.enabledCommandId,
                                requiredProperties: [],
                                objectType: objectType,
                                serviceAction: rawUpdateTask.serviceAction ? rawUpdateTask.serviceAction.name : "",
                                serviceActionFullType: rawUpdateTask.serviceAction ? rawUpdateTask.serviceAction.fullType : "",
                                serviceActionParameters: [],
                                serviceActionValueParameters: [],
                                requiredCommandIds: [],
                                propertiesToUpdate: [],
                                showConfirmation: rawUpdateTask.requiresConfirm,
                                confirmationString: rawUpdateTask.confirmationString,
                                confirmationTitle: rawUpdateTask.confirmationTitle,
                                taggedErrorProperty: rawUpdateTask.taggedErrorProperty,
                                returnedType: rawUpdateTask.returnedType,
                                updatedProperties: [],
                                objectDeleted: rawUpdateTask.objectDeleted,
                                objectUpdated: rawUpdateTask.objectUdpated,
                                subTasks: [],
                                checkForWarnings: rawUpdateTask.checkForWarnings,
                            };
                            if (!updateTask.isGroup) {
                                _.each(rawUpdateTask.preConditions, function (rawPrecondition) {
                                    var preCondition = {
                                        property: rawPrecondition.property,
                                        subProperty: rawPrecondition.subProperty,
                                        valueType: rawPrecondition.valueType,
                                        valueRequired: rawPrecondition.valueRequired,
                                        value: rawPrecondition.value,
                                    };
                                    updateTask.preConditions.push(preCondition);
                                });
                                if (rawUpdateTask.serviceAction) {
                                    if (rawUpdateTask.serviceAction.valueParameters) {
                                        _.each(rawUpdateTask.serviceAction.valueParameters, function (rawValueParameter) {
                                            var serviceActionValueParameter = {
                                                parameterName: rawValueParameter.name,
                                                type: rawValueParameter.type,
                                                value: rawValueParameter.value
                                            };
                                            updateTask.serviceActionValueParameters.push(serviceActionValueParameter);
                                        });
                                    }
                                    _.each(rawUpdateTask.serviceAction.requiredParameters, function (rawServiceActionParameter) {
                                        var serviceActionParameter = {
                                            parameterName: rawServiceActionParameter.name,
                                            caption: rawServiceActionParameter.caption,
                                            type: rawServiceActionParameter.type,
                                            enumName: rawServiceActionParameter.enumName,
                                            objectPropertyName: rawServiceActionParameter.property,
                                            isMandatory: rawServiceActionParameter.isMandatory === undefined ? true : rawServiceActionParameter.isMandatory,
                                            value: rawServiceActionParameter.value,
                                            defaultClear: rawServiceActionParameter.defaultClear,
                                            objectType: HPTRIM.Utils.TrimHelper.toBaseObjectType(rawServiceActionParameter.objectType),
                                            defaultQuery: rawServiceActionParameter.defaultQuery,
                                            defaultQueryParameters: [],
                                            objectFilter: rawServiceActionParameter.filter,
                                            objectFilterParameters: []
                                        };
                                        if (rawServiceActionParameter.filterParameters) {
                                            _.each(rawServiceActionParameter.filterParameters, function (rawFilterParm) {
                                                var filterParameter = {
                                                    property: rawFilterParm.property,
                                                    type: rawFilterParm.type
                                                };
                                                serviceActionParameter.objectFilterParameters.push(filterParameter);
                                            });
                                        }
                                        if (rawServiceActionParameter.defaultQueryParameters) {
                                            _.each(rawServiceActionParameter.defaultQueryParameters, function (rawDefaultParm) {
                                                var defaultQueryParameter = {
                                                    property: rawDefaultParm.property,
                                                    type: rawDefaultParm.type
                                                };
                                                serviceActionParameter.defaultQueryParameters.push(defaultQueryParameter);
                                            });
                                        }
                                        updateTask.serviceActionParameters.push(serviceActionParameter);
                                    });
                                }
                                _.each(rawUpdateTask.requiredProperties, function (requiredProperty) {
                                    updateTask.requiredProperties.push(requiredProperty);
                                });
                                _.each(rawUpdateTask.updatedProperties, function (property) {
                                    updateTask.updatedProperties.push(property);
                                });
                                _.each(rawUpdateTask.propertiesUpdated, function (rawPropertyToUpdate) {
                                    var propToUpdate = {
                                        propertyId: rawPropertyToUpdate.propertyId,
                                        value: rawPropertyToUpdate.value,
                                        clearValue: rawPropertyToUpdate.clearValue,
                                        requiresInput: rawPropertyToUpdate.requiresInput,
                                        allowClearValue: rawPropertyToUpdate.allowClearValue,
                                        purpose: rawPropertyToUpdate.purpose,
                                    };
                                    updateTask.propertiesToUpdate.push(propToUpdate);
                                });
                            }
                            else if (rawUpdateTask.isGroup) {
                                _.each(rawUpdateTask.subTasks, function (rawSubTask) {
                                    var subTask = _this.buildUpdateTask(rawSubTask, objectType);
                                    updateTask.supportsSingle = updateTask.supportsSingle || subTask.supportsSingle;
                                    updateTask.supportsTagged = updateTask.supportsTagged || subTask.supportsTagged;
                                    updateTask.subTasks.push(subTask);
                                });
                            }
                            updateTask.requiredFeature = rawUpdateTask.requiredFeature;
                            return updateTask;
                        };
                        MainObjectDefinitions.prototype.buildNavTask = function (rawNavTask) {
                            var _this = this;
                            var navTask = {
                                caption: rawNavTask.caption,
                                toolTip: rawNavTask.tooltip,
                                preConditions: [],
                                id: rawNavTask.id,
                                icon: rawNavTask.icon,
                                supportsTagged: rawNavTask.supportsTagged,
                                supportsSingle: rawNavTask.supportsSingle,
                                isGroup: rawNavTask.isGroup,
                                objectPropertiesForQuery: [],
                                subTasks: [],
                                enabledCommandId: rawNavTask.enabledCommandId
                            };
                            if (!navTask.isGroup) {
                                _.each(rawNavTask.preConditions, function (rawPrecondition) {
                                    var preCondition = {
                                        property: rawPrecondition.property,
                                        valueType: rawPrecondition.valueType,
                                        value: rawPrecondition.value,
                                        valueRequired: rawPrecondition.valueRequired,
                                        operator: rawPrecondition.operator,
                                    };
                                    navTask.preConditions.push(preCondition);
                                });
                                navTask.query = rawNavTask.searchData.query,
                                    navTask.returnedType = HPTRIM.Utils.TrimHelper.toBaseObjectType(rawNavTask.returnedType),
                                    _.each(rawNavTask.searchData.parameters, function (parameter) {
                                        navTask.objectPropertiesForQuery.push(parameter);
                                    });
                            }
                            else {
                                _.each(rawNavTask.tasks, function (rawSubTask) {
                                    var subTask = _this.buildNavTask(rawSubTask);
                                    navTask.supportsSingle = navTask.supportsSingle || subTask.supportsSingle;
                                    navTask.supportsTagged = navTask.supportsTagged || subTask.supportsTagged;
                                    navTask.subTasks.push(subTask);
                                });
                            }
                            return navTask;
                        };
                        return MainObjectDefinitions;
                    }());
                    MainObject.MainObjectDefinitions = MainObjectDefinitions;
                    var MainObjectDefinitonsMenu = (function () {
                        function MainObjectDefinitonsMenu() {
                        }
                        return MainObjectDefinitonsMenu;
                    }());
                    MainObject.MainObjectDefinitonsMenu = MainObjectDefinitonsMenu;
                })(MainObject = Panels.MainObject || (Panels.MainObject = {}));
            })(Panels = App.Panels || (App.Panels = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Panels;
            (function (Panels) {
                var MainObject;
                (function (MainObject) {
                    "use strict";
                    var MainObjectCommandPanel = (function (_super) {
                        __extends(MainObjectCommandPanel, _super);
                        function MainObjectCommandPanel(trimClient, mainObject, cssClass) {
                            var _this = this;
                            _super.call(this, 'templates/MainObject/MainObjectCommandPanel', true);
                            this.handleReportButtonClick = function () { };
                            this.showReportsButton = ko.observable(false);
                            this.showUrl = ko.observable(false);
                            this.url = ko.observable("");
                            this.clearSelections = function () { };
                            this.bulkSelect = ko.observable(false);
                            this.bulkQuery = ko.observable("");
                            this.bulkCount = ko.observable(0);
                            if (cssClass) {
                                this.cssClass(cssClass);
                            }
                            var me = this;
                            this.caption = ko.observable(mainObject.CaptionPlural);
                            if (mainObject.panelCaptionOverride) {
                                this.caption(mainObject.panelCaptionOverride);
                            }
                            this.typeName = ko.observable(mainObject.type.Name);
                            this.descriptionText = ko.observable(mainObject.description);
                            this.createTitle = ko.observable(HP.HPTRIM.Messages.web_create + " " + mainObject.Caption);
                            this.createHeader = ko.observable(HP.HPTRIM.Messages.core_new);
                            this.showAddButton = ko.observable(false);
                            if (mainObject.CanAnybodyCreate) {
                                var showAddButton = true;
                                if (mainObject.CreatePermissions) {
                                    showAddButton = false;
                                    _.each(mainObject.CreatePermissions, function (permission) {
                                        if (trimClient.getDatabase().currentUserPermissions()[permission] === true) {
                                            showAddButton = true;
                                        }
                                    });
                                }
                                this.showAddButton(showAddButton);
                            }
                            this.addButtonClick = function () {
                                me.createObject(mainObject);
                            };
                            this.createObject = function (objectDef) {
                            };
                            this.trayPages = ko.observableArray([]);
                            _.each(mainObject.trayPages, function (trayPage) {
                                _.each(trayPage.pageItems, function (pageItem) {
                                    if (pageItem.isDefault) {
                                        me.defaultTray = pageItem;
                                        me.defaultPageId = trayPage.pageId;
                                    }
                                });
                                _this.trayPages.push(trayPage);
                            });
                            if (!this.defaultTray) {
                                var firstTrayPage = this.trayPages()[0];
                                if (firstTrayPage && firstTrayPage.pageItems[0]) {
                                    this.defaultTray = firstTrayPage.pageItems[0];
                                    this.defaultPageId = firstTrayPage.pageId;
                                }
                            }
                            this.openPageId = ko.observable(this.defaultPageId);
                            this.selectedTrayCaption = ko.observable("");
                            this.selectedTray = ko.observable(this.defaultTray);
                            this.executeQuery = function (query, clearResults, sortBy, purpose, filter) {
                            };
                            this.hasActionsToShow = ko.observable(false);
                            this.hasFavorite = ko.observable(false);
                            this.showActions = ko.observable(false);
                            if (mainObject.hasFavorites) {
                                this.hasActionsToShow(true);
                                this.hasFavorite(true);
                            }
                            if (mainObject.showReports) {
                                this.hasActionsToShow(true);
                            }
                            this.navigationTasks = ko.observableArray(mainObject.taggedNavigationTasks);
                            if (this.navigationTasks().length > 0) {
                                this.hasActionsToShow(true);
                            }
                            this.updateTasks = ko.observableArray(mainObject.taggedUpdateTasks);
                            this.doUpdateTask = function (item) {
                            };
                            if (this.updateTasks().length > 0) {
                                this.hasActionsToShow(true);
                            }
                            this.addToFavorites = function () {
                                var favoriteTask = {
                                    id: "addToFavorite",
                                    icon: "favorite_x24",
                                    caption: HPTRIM.Messages.web_addToFavorites,
                                    toolTip: HPTRIM.Messages.web_addToFavorites,
                                    successMessage: HPTRIM.Utils.String.format(HPTRIM.Messages.web_favoriteAdded, [mainObject.type.Caption]),
                                    isGroup: false,
                                    requiredPermission: "",
                                    enabledCommandId: "",
                                    preConditions: [],
                                    supportsTagged: true,
                                    supportsSingle: true,
                                    returnedType: mainObject.type,
                                    objectUpdated: true,
                                    objectDeleted: false,
                                    objectType: mainObject.type,
                                    requiredProperties: ["IsInFavorites"],
                                    serviceAction: "SetUserLabel",
                                    serviceActionFullType: "HP.HPTRIM.ServiceModel.SetUserLabel",
                                    serviceActionParameters: [],
                                    serviceActionValueParameters: [],
                                    updatedProperties: ["IsInFavorites"],
                                    requiredCommandIds: [],
                                    propertiesToUpdate: [],
                                    checkForWarnings: true,
                                };
                                _this.doUpdateTask(favoriteTask);
                                if (mainObject.type.name == "SearchForm") {
                                    ko.postbox.publish("SearchFormAddedOrRemovedFromFavourite", true);
                                }
                            };
                            this.doTraySearch = function (tray) {
                                me.executeQuery(tray.query, true, tray.sortBy);
                                me.selectedTrayCaption(tray.caption);
                                me.selectedTray(tray);
                                me.updateTrayHistory(tray);
                            };
                            this.updateTrayHistory = function (tray) {
                            };
                        }
                        MainObjectCommandPanel.prototype.doAccordionToggle = function (id) {
                            var me = this;
                            $('.panel.panel-default').removeClass("activePanel");
                            _.each(me.trayPages(), function (trayPage) {
                                var ele = '#' + trayPage.pageId;
                                if (id != ele) {
                                    $(ele + '_caret').removeClass("down");
                                    $(ele + '_caret').addClass("down");
                                }
                            });
                            $(id + '_header').addClass('activePanel');
                        };
                        MainObjectCommandPanel.prototype.doAccordionToggleWithId = function (id, parentId) {
                            var me = this;
                            var lcParentId = "";
                            var lcId = "";
                            if (parentId != "" && parentId != undefined) {
                                lcId = '#' + parentId;
                                lcParentId = '_' + parentId;
                                $('#' + parentId).children().closest('.panel.panel-default').removeClass("activePanel");
                            }
                            else {
                                $('.panel.panel-default').removeClass("activePanel");
                            }
                            id = id + lcParentId;
                            _.each(me.trayPages(), function (trayPage) {
                                var ele = '#' + trayPage.pageId + lcParentId;
                                if (id != ele) {
                                    $(ele + '_caret').removeClass("down");
                                    $(ele + '_caret').addClass("down");
                                }
                            });
                            $(id + '_header').addClass('activePanel');
                        };
                        return MainObjectCommandPanel;
                    }(HP.HPTRIM.Framework.Components.Layouts.Panel));
                    MainObject.MainObjectCommandPanel = MainObjectCommandPanel;
                })(MainObject = Panels.MainObject || (Panels.MainObject = {}));
            })(Panels = App.Panels || (App.Panels = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Panels;
            (function (Panels) {
                var MainObject;
                (function (MainObject) {
                    "use strict";
                    var MainObjectReportCommandPanel = (function (_super) {
                        __extends(MainObjectReportCommandPanel, _super);
                        function MainObjectReportCommandPanel(trimClient, objectDef) {
                            _super.call(this, 'templates/MainObject/MainObjectReportCommandPanel');
                            this.selectedReportItem = ko.observable();
                            this.cancel = function () { };
                            this.showPrintRequestsButton = ko.observable(false);
                            this.trimClient = trimClient;
                            this.objectDef = objectDef;
                            var me = this;
                            this.noReportMessage = ko.observable(HP.HPTRIM.Messages.web_noSavedSearchAvailable);
                            this.searchQueryObject = { searchString: "type: " + objectDef.type.name, baseObjectType: HPTRIM.BaseObjectTypes.Report };
                            this.trimItemListLoader = new HP.HPTRIM.DataLoader.ReportItemLoader(trimClient, this.searchQueryObject);
                            var fieldSelector = function (field) {
                                if (field.InternalName == "ReportName") {
                                    return true;
                                }
                                return false;
                            };
                            this.itemList = new HP.HPTRIM.Framework.Components.ItemList.ItemListComponent({ loader: this.trimItemListLoader });
                            this.itemList.templateName('/templates/ItemList/ReportItemListCard');
                            this.itemList.load();
                            this.selectReport = function (report) {
                                me.selectedReportItem(report);
                            };
                        }
                        MainObjectReportCommandPanel.prototype.getClassName = function () {
                            return MainObjectReportCommandPanel.CLASS_NAME;
                        };
                        MainObjectReportCommandPanel.prototype.getSelectedReportUri = function () {
                            if (this.selectedReportItem()) {
                                return this.selectedReportItem().Fields.Uri;
                            }
                            return "";
                        };
                        MainObjectReportCommandPanel.prototype.getSelectedReportName = function () {
                            if (this.selectedReportItem()) {
                                return this.selectedReportItem().Fields.ReportName;
                            }
                            return "";
                        };
                        MainObjectReportCommandPanel.CLASS_NAME = "MainObjectReportCommandPanel";
                        return MainObjectReportCommandPanel;
                    }(HP.HPTRIM.Framework.Components.Layouts.Panel));
                    MainObject.MainObjectReportCommandPanel = MainObjectReportCommandPanel;
                })(MainObject = Panels.MainObject || (Panels.MainObject = {}));
            })(Panels = App.Panels || (App.Panels = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Panels;
            (function (Panels) {
                var MainObject;
                (function (MainObject) {
                    "use strict";
                    var MainObjectDetailComponent = (function () {
                        function MainObjectDetailComponent(trimClient, objectDefinition, supportedTypes) {
                            var _this = this;
                            this.deleteCallback = function () { };
                            this.render = function () { return ""; };
                            this.getHighlight = function () { return ""; };
                            this.updateCallback = function (infoObject) { };
                            this.getNotesHandler = function (objectType, prop, uri) { };
                            var me = this;
                            this.trimClient = trimClient;
                            this.supportedTypes = supportedTypes;
                            this.objectDefinition = objectDefinition;
                            this.objectNameProperty = objectDefinition.listPropertyByLocation.Title.property;
                            this.requiredProperties = this.buildRequiredPropertiesList(objectDefinition);
                            this.requiredCommandIds = this.buildRequiredCommandIds(objectDefinition);
                            this.uri = "";
                            this.currentObjectTitle = "";
                            this.isInFavorites = ko.observable(false);
                            this.detailsTemplate = 'templates/MainObject/MainObjectDetailComponent';
                            this.details = ko.observable(false);
                            this.loading = ko.observable(false);
                            this.detailsReady = ko.observable(false);
                            this.childObjectArray = [];
                            this.actionResultDisplay = ko.observable(false);
                            this.actionResult = ko.observable("");
                            this.doFadeInOutOnInformationalText = function () {
                                $("#mainObjectInformationLabel").show("drop", 500);
                                $("#mainObjectInformationLabel").delay(3000).hide("drop", "down", 500);
                            };
                            this.doFadeInOutOnInformationalTextWithAddedDelay = function () {
                                setTimeout(function () {
                                    $("#mainObjectInformationLabel").show("drop", 500);
                                    $("#mainObjectInformationLabel").delay(3000).hide("drop", "down", 500);
                                }, 1500);
                            };
                            this.dataToDisplay = ko.observableArray([]);
                            this.dataRight = ko.observable(null);
                            this.hasNotes = ko.observable(false);
                            if (objectDefinition.hasNotes == true && this.objectDefinition.notesPropertyName) {
                                this.hasNotes(true);
                            }
                            this.notesButtonClick = function () {
                                if (me.mainObjectInfoObject.TrimType == "Request" && me.mainObjectInfoObject.RequestRecord.Uri == 0) {
                                    me.errorHandler(HP.HPTRIM.Messages.web_accessDenied);
                                    return;
                                }
                                me.getSetNotes();
                            };
                            this.showEditDetailsButton = ko.observable(false);
                            if (me.objectDefinition.CanAnybodyUpdate == true) {
                                var canEdit = true;
                                if (me.objectDefinition.UpdatePermissions) {
                                    canEdit = false;
                                    _.each(me.objectDefinition.UpdatePermissions, function (permission) {
                                        if (_this.trimClient.getDatabase().currentUserPermissions()[permission] == true) {
                                            canEdit = true;
                                        }
                                    });
                                }
                                this.showEditDetailsButton(canEdit);
                            }
                            this.editDetailsButtonClick = function () {
                                me.editDetails(me.mainObjectInfoObject.Uri, me.objectDefinition, _this.requiredProperties, me.requiredCommandIds, me.updateDetailComponentWithCachedResult);
                            };
                            this.editDetails = function (uri, objectDef, requiredProperties, requiredCommandIds, callback) {
                            };
                            this.showReportsButton = ko.observable(objectDefinition.showReports);
                            this.handleReportButtonClick = function () {
                                _this.doReport(_this.uri);
                            };
                            this.doReport = function (uri) {
                            };
                            this.neverShowDeleteButton = ko.observable(false);
                            this.deleteButtonAvailable = ko.observable(false);
                            this.showDeleteButton = ko.observable(false);
                            if (me.objectDefinition.CanAnybodyDelete == true) {
                                if (me.objectDefinition.DeletePermission) {
                                    this.deleteButtonAvailable(this.trimClient.getDatabase().currentUserPermissions()[me.objectDefinition.DeletePermission] == true);
                                }
                                else {
                                    this.deleteButtonAvailable(true);
                                }
                            }
                            this.deleteButtonClick = function () {
                            };
                            this.showFavorite = ko.observable(false);
                            if (me.objectDefinition.hasFavorites == true) {
                                this.showFavorite(true);
                                this.requiredProperties.push("isInFavorites");
                            }
                            this.favoriteButtonClick = function () {
                                me.toggleFavorite();
                            };
                            this.toggleFavoriteCaption = ko.observable("");
                            this.toggleFavoriteToolTip = ko.observable("");
                            this.navigationTasks = ko.observableArray(me.objectDefinition.navigationTasks);
                            this.visibleNavTasks = ko.observableArray([]);
                            this.doNavTask = function (item) {
                                var me = _this;
                                var query = item.query;
                                for (var i = 0; i < item.objectPropertiesForQuery.length; i++) {
                                    var propertyName = item.objectPropertiesForQuery[i].property;
                                    var propertyType = item.objectPropertiesForQuery[i].type;
                                    var requiredProperty = me.mainObjectInfoObject[propertyName];
                                    if (propertyType == "Object") {
                                        requiredProperty = requiredProperty.Uri;
                                    }
                                    query = query.replace("{" + i + "}", requiredProperty);
                                }
                                me.searchHandler(query, "", item.returnedType);
                            };
                            this.getNavHref = function (item) {
                                var me = _this;
                                var query = item.query;
                                for (var i = 0; i < item.objectPropertiesForQuery.length; i++) {
                                    var propertyName = item.objectPropertiesForQuery[i].property;
                                    var propertyType = item.objectPropertiesForQuery[i].type;
                                    var requiredProperty = me.mainObjectInfoObject[propertyName];
                                    if (propertyType == "Object") {
                                        requiredProperty = requiredProperty.Uri;
                                    }
                                    query = query.replace("{" + i + "}", requiredProperty);
                                }
                                return "?q=" + query + "&t=" + item.returnedType.name;
                            };
                            this.showSearchButton = ko.observable(me.objectDefinition.showSearch);
                            this.searchButtonClick = function () {
                                var objectTypeName = me.mainObjectInfoObject[me.objectDefinition.searchTask.objectTypeNameProperty];
                                if (objectDefinition && objectTypeName.Value !== undefined) {
                                    objectTypeName = objectTypeName.Value;
                                }
                                var objectType = HPTRIM.Utils.TrimHelper.toBaseObjectType(objectTypeName);
                                var type = _.find(me.supportedTypes, function (currentType) {
                                    return (currentType.name == objectType.name);
                                });
                                if (!type) {
                                    me.errorHandler(HPTRIM.Messages.web_unsupportedType);
                                    return;
                                }
                                if (me.mainObjectInfoObject.SavedSearchIsOldFormat === true || me.mainObjectInfoObject.SavedSearchIsOldFormat.Value === true) {
                                    me.errorHandler(HPTRIM.Messages.web_oldFormatSavedSearchNotSupported);
                                    return;
                                }
                                var sort = me.mainObjectInfoObject[me.objectDefinition.searchTask.objectSortProperty];
                                if (sort && sort.Value !== undefined) {
                                    sort = sort.Value;
                                }
                                var filter = me.mainObjectInfoObject[me.objectDefinition.searchTask.objectFilterProperty];
                                if (filter && filter.Value !== undefined) {
                                    filter = filter.Value;
                                }
                                var searchDefinition = me.mainObjectInfoObject[me.objectDefinition.searchTask.searchDefinitionProperty];
                                if (searchDefinition && searchDefinition.Value !== undefined) {
                                    searchDefinition = searchDefinition.Value;
                                }
                                var options = "";
                                var searchOptions = trimClient.searchOptionDefinitions;
                                _.forEach(searchOptions[objectType.name], function (searchOption) {
                                    var id = searchOption.Id;
                                    if (id) {
                                        var savedSearchId = id.replace('SearchUserOptions', 'SavedSearch');
                                        if (me.mainObjectInfoObject[savedSearchId] && me.mainObjectInfoObject[savedSearchId].Value) {
                                            if (options) {
                                                options = options + ',';
                                            }
                                            options = options + id;
                                        }
                                    }
                                });
                                if (HP.HPTRIM.Form.Search.ParameterisedSearchForm.hasParameterisedSearch(searchDefinition.SearchStack)) {
                                    _this.paramaterisedSearchHandler(me.mainObjectInfoObject.SearchDefinition, me.searchHandler, objectType, filter, sort, options);
                                    return;
                                }
                                var queryString = me.mainObjectInfoObject[me.objectDefinition.searchTask.objectSearchQueryProperty];
                                if (queryString && queryString.Value !== undefined) {
                                    queryString = queryString.Value;
                                }
                                me.searchHandler(queryString, "", objectType, filter, sort, options);
                            };
                            this.viewTask = ko.observable(me.objectDefinition.viewTask);
                            this.viewTaskVisible = ko.observable(false);
                            this.doViewTask = function () {
                                var me = _this;
                                var record = me.mainObjectInfoObject[_this.viewTask().objectRecordProperty];
                                var errorHandler = function (error) {
                                    me.actionResult(error);
                                    me.actionResultDisplay(true);
                                };
                                me.viewHandler(record.Uri, record.RecordExtension.Value, errorHandler);
                            };
                            this.createTasks = ko.observableArray(me.objectDefinition.createTasks);
                            this.visibleCreateTasks = ko.observableArray([]);
                            this.handleCreateTaskClick = function (item) {
                                var createCallback = function (uri) {
                                    if (item.successMessage) {
                                        _this.actionResult(item.successMessage);
                                    }
                                    else {
                                        _this.actionResult(HPTRIM.Messages.web_udpatedSuccessfully);
                                    }
                                    _this.actionResultDisplay(true);
                                    me.doFadeInOutOnInformationalTextWithAddedDelay();
                                };
                                _this.doCreate(item, _this.mainObjectInfoObject, _this.objectDefinition.type, item.newType, createCallback);
                            };
                            this.updateTasks = ko.observableArray(me.objectDefinition.updateTasks);
                            this.visibleUpdateTasks = ko.observableArray([]);
                            this.handleUpdateTaskClick = function (item) {
                                _this.doUpdate(item, _this.mainObjectInfoObject, _this.objectDefinition.type, _this.handleUpdateResults, _this.handleWarning, _this.handleError, _this.objectDefinition);
                            };
                            this.handleUpdateResults = function (result, task) {
                                if (task.objectDeleted) {
                                    _this.deleteCallback();
                                    return;
                                }
                                _this.updateCallback(result);
                                _this.updateDetailComponentWithCachedResult(result);
                                if (task.successMessage) {
                                    var message = task.successMessage;
                                    if (task.messageProperty) {
                                        if (task.messageProperty) {
                                            var substitutionValue = result[task.messageProperty];
                                            if (substitutionValue && substitutionValue.StringValue) {
                                                substitutionValue = substitutionValue.StringValue;
                                            }
                                            else if (substitutionValue && substitutionValue.Value) {
                                                substitutionValue = substitutionValue.Value;
                                            }
                                            if (!substitutionValue) {
                                                if (task.defaultMessageSubValue || task.defaultMessageSubValue === "") {
                                                    substitutionValue = task.defaultMessageSubValue;
                                                }
                                                else {
                                                    substitutionValue = task.objectType.Caption;
                                                }
                                            }
                                            HPTRIM.Utils.String.format(message, [result[task.messageProperty]]);
                                        }
                                        me.actionResult(message);
                                        me.actionResultDisplay(true);
                                        me.doFadeInOutOnInformationalText();
                                    }
                                }
                            };
                            this.hasChildObjects = ko.observable(false);
                            this.visibleChildObjects = ko.observableArray([]);
                            this.showActions = ko.observable(true);
                            this.showSelectObject = ko.observable(false);
                            this.selectObject = function () {
                                var name = _this.mainObjectInfoObject[_this.objectNameProperty];
                                if (name.Value || name.Value === false) {
                                    name = name.Value;
                                }
                                _this.selectObjectCallback(_this.uri, name);
                            };
                            this.selectObjectCallback = function (uri, title) { };
                            this.updateDetailComponentWithCachedResult = function (result) {
                                if (result.Uri == me.uri) {
                                    me.updateMainObject(result);
                                    me.renderMainObjectDetails(me.mainObjectInfoObject);
                                }
                            };
                        }
                        ;
                        MainObjectDetailComponent.prototype.updateMainObject = function (result) {
                            var me = this;
                            if (result) {
                                if (result.EnabledCommandIds) {
                                    me.mainObjectInfoObject.EnabledCommandIds = result.EnabledCommandIds;
                                }
                                var updatedObject = _.extend({}, me.mainObjectInfoObject, result);
                                me.mainObjectInfoObject = updatedObject;
                            }
                        };
                        MainObjectDetailComponent.prototype.buildRequiredPropertiesList = function (objectDefinition) {
                            var me = this;
                            var properties = [];
                            var nameProperty = objectDefinition.listPropertyByLocation.Title.property;
                            properties.push(nameProperty);
                            properties.push("Icon");
                            _.each(objectDefinition.mandatoryDetailProperties, function (propertyName) {
                                properties.push(propertyName);
                            });
                            _.each(objectDefinition.listPropertyDetailData, function (listProperty) {
                                if (listProperty.property) {
                                    if ((listProperty.requiredPermission && me.trimClient.getDatabase().currentUserPermissions[listProperty.requiredPermission]) || !listProperty.requiredPermission) {
                                        properties.push(listProperty.property);
                                        if (listProperty.highlightConditions.length > 0) {
                                            _.each(listProperty.highlightConditions, function (displayCondition) {
                                                properties.push(displayCondition.propertyName);
                                            });
                                        }
                                    }
                                }
                            });
                            if (objectDefinition.propertyDetailDataRight) {
                                if (objectDefinition.propertyDetailDataRight.property) {
                                    var rightDetailProperty = objectDefinition.propertyDetailDataRight;
                                    if ((rightDetailProperty.requiredPermission && me.trimClient.getDatabase().currentUserPermissions()[rightDetailProperty.requiredPermission]) || !rightDetailProperty.requiredPermission) {
                                        properties.push(rightDetailProperty.property);
                                        if (rightDetailProperty.highlightConditions.length > 0) {
                                            _.each(rightDetailProperty.highlightConditions, function (displayCondition) {
                                                properties.push(displayCondition.propertyName);
                                            });
                                        }
                                    }
                                }
                            }
                            if (objectDefinition.hasNotes) {
                                if (objectDefinition.notesPropertyName) {
                                    properties.push(objectDefinition.notesPropertyName);
                                    properties.push("CanAddToNotes");
                                }
                            }
                            if (objectDefinition.searchTask) {
                                properties.push(objectDefinition.searchTask.objectFilterProperty);
                                properties.push(objectDefinition.searchTask.objectSearchQueryProperty);
                                properties.push(objectDefinition.searchTask.objectTypeNameProperty);
                                properties.push(objectDefinition.searchTask.objectSortProperty);
                                properties.push(objectDefinition.searchTask.searchDefinitionProperty);
                                properties.push(objectDefinition.searchTask.searchIsOldFormatProperty);
                            }
                            _.each(objectDefinition.navigationTasks, function (navTask) {
                                _.each(navTask.objectPropertiesForQuery, function (property) {
                                    properties.push(property.property);
                                });
                                _.each(navTask.preConditions, function (preCondition) {
                                    properties.push(preCondition.property);
                                });
                            });
                            if (objectDefinition.viewTask) {
                                properties.push(objectDefinition.viewTask.objectRecordProperty);
                            }
                            var processUpdateTasksForRequiredProperties = function (updateTask) {
                                if (updateTask.isGroup) {
                                    _.each(updateTask.subTasks, processUpdateTasksForRequiredProperties);
                                    return;
                                }
                                _.each(updateTask.preConditions, function (preCondition) {
                                    properties.push(preCondition.property);
                                });
                                _.each(updateTask.requiredProperties, function (requiredProperty) {
                                    properties.push(requiredProperty);
                                });
                                _.each(updateTask.serviceActionParameters, function (serviceActionParameter) {
                                    if (serviceActionParameter.objectPropertyName) {
                                        properties.push(serviceActionParameter.objectPropertyName);
                                    }
                                });
                            };
                            _.each(objectDefinition.updateTasks, processUpdateTasksForRequiredProperties);
                            _.each(objectDefinition.createTasks, function (createTask) {
                                _.each(createTask.defaultParameters, function (requiredParameter) {
                                    if (requiredParameter.displayProperty) {
                                        properties.push(requiredParameter.displayProperty);
                                    }
                                    if (requiredParameter.displayValueExtra) {
                                        properties.push(requiredParameter.displayValueExtra);
                                    }
                                    if (requiredParameter.iconProperty) {
                                        properties.push(requiredParameter.iconProperty);
                                    }
                                });
                            });
                            _.each(objectDefinition.childObjects, function (chilObject) {
                                _.each(chilObject.displayConditions, function (displayCondition) {
                                    properties.push(displayCondition.propertyName);
                                });
                            });
                            properties.push("EnabledCommandIds");
                            properties = _.uniq(properties);
                            properties = _.filter(properties, function (property) {
                                return property != "" && property != undefined;
                            });
                            return properties;
                        };
                        MainObjectDetailComponent.prototype.buildRequiredCommandIds = function (objectDefinition) {
                            var commandIds = [];
                            commandIds.push("Remove");
                            _.each(objectDefinition.navigationTasks, function (navTask) {
                                if (navTask.enabledCommandId) {
                                    commandIds.push(navTask.enabledCommandId);
                                }
                                if (navTask.isGroup) {
                                    _.each(navTask.subTasks, function (subTask) {
                                        commandIds.push(subTask.enabledCommandId);
                                    });
                                }
                            });
                            if (objectDefinition.viewTask && objectDefinition.viewTask.enabledCommandId) {
                                commandIds.push(objectDefinition.viewTask.enabledCommandId);
                            }
                            _.each(objectDefinition.updateTasks, function (updateTask) {
                                if (updateTask.enabledCommandId) {
                                    commandIds.push(updateTask.enabledCommandId);
                                }
                                if (updateTask.isGroup) {
                                    _.each(updateTask.subTasks, function (subTask) {
                                        commandIds.push(subTask.enabledCommandId);
                                    });
                                }
                            });
                            _.each(objectDefinition.createTasks, function (createTask) {
                                if (createTask.enabledCommandId) {
                                    commandIds.push(createTask.enabledCommandId);
                                }
                            });
                            commandIds = _.uniq(commandIds);
                            return commandIds;
                        };
                        MainObjectDetailComponent.prototype.updateViewTaskVisible = function (mainObjectInfoObject) {
                            var me = this;
                            me.viewTaskVisible(false);
                            if (this.objectDefinition.viewTask) {
                                var record = mainObjectInfoObject[this.objectDefinition.viewTask.objectRecordProperty];
                                if (record) {
                                    if (record.RecordIsElectronic.Value == true) {
                                        me.viewTaskVisible(true);
                                    }
                                }
                            }
                        };
                        MainObjectDetailComponent.prototype.updateVisibleChildLists = function () {
                            var me = this;
                            me.visibleChildObjects(_.filter(me.childObjectArray, function (childComponent) {
                                return childComponent.showChildObjectsButton(me.mainObjectInfoObject);
                            }));
                        };
                        MainObjectDetailComponent.prototype.updateVisibleNavTasks = function () {
                            var me = this;
                            me.visibleNavTasks([]);
                            _.each(me.navigationTasks(), function (navTask) {
                                var displayEnabled = true;
                                if (navTask.preConditions) {
                                    _.each(navTask.preConditions, function (preCondition) {
                                        if (displayEnabled) {
                                            if (preCondition.valueType) {
                                                if (preCondition.valueType == "String") {
                                                    if (preCondition.value) {
                                                        displayEnabled = (me.mainObjectInfoObject[preCondition.property].Value.length > 0);
                                                    }
                                                    else {
                                                        displayEnabled = (me.mainObjectInfoObject[preCondition.property].Value.length < 1);
                                                    }
                                                }
                                                else if (preCondition.valueType == "Uri") {
                                                    if (preCondition.value) {
                                                        displayEnabled = (me.mainObjectInfoObject[preCondition.property].Value > 0);
                                                    }
                                                    else {
                                                        displayEnabled = !(me.mainObjectInfoObject[preCondition.property].Value > 0);
                                                    }
                                                }
                                                else if (preCondition.valueType == "Object") {
                                                    if (preCondition.value) {
                                                        displayEnabled = (me.mainObjectInfoObject[preCondition.property] != undefined && me.mainObjectInfoObject[preCondition.property].Uri > 0);
                                                    }
                                                    else {
                                                        displayEnabled = (me.mainObjectInfoObject[preCondition.property] == undefined);
                                                    }
                                                }
                                                else if (preCondition.valueType == "Number") {
                                                    if ((preCondition.value || preCondition.value === 0) && preCondition.operator == "not equal") {
                                                        displayEnabled = (me.mainObjectInfoObject[preCondition.property].Value != preCondition.value);
                                                    }
                                                    else if (preCondition.operator == "equal") {
                                                        displayEnabled = (me.mainObjectInfoObject[preCondition.property].Value === preCondition.value);
                                                    }
                                                    else {
                                                        displayEnabled = (me.mainObjectInfoObject[preCondition.property] != undefined);
                                                    }
                                                }
                                                else if (preCondition.valueType == "Boolean") {
                                                    if (preCondition.value) {
                                                        displayEnabled = (me.mainObjectInfoObject[preCondition.property] === preCondition.value);
                                                    }
                                                    else {
                                                        displayEnabled = !(me.mainObjectInfoObject[preCondition.property]);
                                                    }
                                                }
                                            }
                                            else {
                                                displayEnabled = (me.mainObjectInfoObject[preCondition.property] == preCondition.value ||
                                                    me.mainObjectInfoObject[preCondition.property].Value == preCondition.value);
                                            }
                                        }
                                    });
                                }
                                if (displayEnabled) {
                                    me.visibleNavTasks.push(navTask);
                                }
                            });
                        };
                        MainObjectDetailComponent.prototype.updateVisibleCreateTasks = function (mainObjectInfoObject) {
                            var _this = this;
                            var me = this;
                            me.visibleCreateTasks([]);
                            _.each(me.createTasks(), function (createTask) {
                                if (createTask.requiredPermission) {
                                    if (_this.trimClient.getDatabase().currentUserPermissions()[createTask.requiredPermission] != true) {
                                        return;
                                    }
                                }
                                if (createTask.enabledCommandId) {
                                    if (!_.contains(mainObjectInfoObject.EnabledCommandIds, createTask.enabledCommandId)) {
                                        return;
                                    }
                                }
                                me.visibleCreateTasks.push(createTask);
                            });
                        };
                        MainObjectDetailComponent.prototype.updateVisibleUpdateTasks = function (mainObjectInfoObject) {
                            var _this = this;
                            var me = this;
                            me.visibleUpdateTasks([]);
                            var checkIfVisible = function (updateTask) {
                                if (updateTask.isGroup) {
                                    return true;
                                }
                                var displayEnabled = true;
                                if (updateTask.requiredFeature) {
                                    if (!_.contains(_this.trimClient.getDatabase().activeFeatures(), updateTask.requiredFeature)) {
                                        return false;
                                    }
                                }
                                if (updateTask.requiredPermission) {
                                    if (_this.trimClient.getDatabase().currentUserPermissions()[updateTask.requiredPermission] != true) {
                                        return false;
                                    }
                                }
                                if (updateTask.enabledCommandId) {
                                    if (!_.contains(mainObjectInfoObject.EnabledCommandIds, updateTask.enabledCommandId)) {
                                        return false;
                                    }
                                }
                                if (displayEnabled && updateTask.preConditions) {
                                    _.each(updateTask.preConditions, function (preCondition) {
                                        if (displayEnabled) {
                                            var propertyToCheck = mainObjectInfoObject[preCondition.property];
                                            if (preCondition.subProperty && propertyToCheck) {
                                                propertyToCheck = propertyToCheck[preCondition.subProperty];
                                            }
                                            if (preCondition.valueType) {
                                                if (preCondition.valueType == "String") {
                                                    if (preCondition.valueRequired) {
                                                        displayEnabled = (propertyToCheck.Value.length > 0);
                                                    }
                                                    else {
                                                        displayEnabled = (propertyToCheck.Value.length < 1);
                                                    }
                                                }
                                                else if (preCondition.valueType == "Uri") {
                                                    if (preCondition.valueRequired) {
                                                        displayEnabled = (propertyToCheck.Value > 0);
                                                    }
                                                    else {
                                                        displayEnabled = !(propertyToCheck.Value > 0);
                                                    }
                                                }
                                                else if (preCondition.valueType == "Object") {
                                                    if (preCondition.valueRequired) {
                                                        displayEnabled = (propertyToCheck != undefined);
                                                    }
                                                    else {
                                                        displayEnabled = (propertyToCheck == undefined);
                                                    }
                                                }
                                            }
                                            else {
                                                if (preCondition.operator == "not equal") {
                                                    displayEnabled = (propertyToCheck.Value !== preCondition.value);
                                                }
                                                else {
                                                    displayEnabled = (propertyToCheck == preCondition.value || propertyToCheck.Value == preCondition.value);
                                                }
                                            }
                                        }
                                    });
                                }
                                return displayEnabled;
                            };
                            _.each(me.updateTasks(), function (updateTask) {
                                var displayEnabled = false;
                                if (!updateTask.isGroup) {
                                    displayEnabled = checkIfVisible(updateTask);
                                    if (displayEnabled) {
                                        me.visibleUpdateTasks.push(updateTask);
                                    }
                                }
                                else {
                                    var newGroup = $.extend({}, updateTask);
                                    newGroup.subTasks = _.filter(updateTask.subTasks, function (subTask) {
                                        return checkIfVisible(subTask);
                                    });
                                    if (newGroup.subTasks.length > 0) {
                                        me.visibleUpdateTasks.push(newGroup);
                                    }
                                }
                            });
                        };
                        MainObjectDetailComponent.prototype.updateModel = function (newUri, actionResult) {
                            this.uri = newUri;
                            var val = parseInt(newUri);
                            if (isNaN(val)) {
                                return;
                            }
                            this.actionResult("");
                            this.actionResultDisplay(false);
                            if (actionResult) {
                                this.actionResult(actionResult);
                                this.actionResultDisplay(true);
                                me.doFadeInOutOnInformationalText();
                            }
                            var me = this;
                            me.loading(true);
                            me.details(true);
                            var additionalData = { 'cid_SelectedIds': me.requiredCommandIds.join(',') };
                            var mainObjectRequest = new HPTRIM.TrimBaseObjectRequest(me.trimClient, new HPTRIM.TrimBaseObject(me.objectDefinition.type, newUri), me.requiredProperties.join(","), additionalData);
                            var promise = mainObjectRequest.doRequest().done(function (result) {
                                me.loading(false);
                                var mainObjectInfoObject = result.Results[0];
                                me.mainObjectInfoObject = mainObjectInfoObject;
                                me.renderMainObjectDetails(me.mainObjectInfoObject);
                            }).fail(function (errorResponse) {
                                var errorMsg = HP.HPTRIM.Messages.web_unableToConnectToWebServices;
                                if (errorResponse.ResponseStatus && errorResponse.ResponseStatus.Message) {
                                    errorMsg = errorResponse.ResponseStatus.Message;
                                }
                                if (errorResponse.responseJSON && errorResponse.responseJSON.ResponseStatus && errorResponse.responseJSON.ResponseStatus.Message) {
                                    errorMsg = errorResponse.responseJSON.ResponseStatus.Message;
                                }
                                me.errorHandler(errorMsg);
                                me.loading(false);
                                me.detailsReady(false);
                                me.details(false);
                            });
                            return promise;
                        };
                        MainObjectDetailComponent.prototype.toggleFavorite = function () {
                            var me = this;
                            if (!me.isInFavorites()) {
                                var favoriteRequest = new HPTRIM.AddToFavoritesRequest(this.trimClient, this.uri, this.objectDefinition.type);
                                favoriteRequest.doRequest().done(function (result) {
                                    me.actionResult(HP.HPTRIM.Messages.web_addedToFavorites);
                                    me.actionResultDisplay(true);
                                    me.doFadeInOutOnInformationalText();
                                    me.isInFavorites(true);
                                    me.toggleFavoriteCaption("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAQWHpUWHRSYXcgcHJvZmlsZSB0eXBlIGV4aWYAAHjarZpZlts4EkX/sYpeAoDAuByM5/QOevl9A6SUysnltMvpspQURQIxvCFYZv3vv9v8hz+h1mJCzCXVlCx/Qg3VN94Ue/25Xp0N59/rl8dn7v1x8/zAc0h4levXtO7zG8fj2xdyuI/398dNHvd1yn2h+4PHBUXv7Hlzn1fuC4m/jrv7d1Pv77Xwsp37vz7vY/F6+fh7yARjRq4n3vglTiz/nrsIK5AijdfIv06S1yPuHNHjIuHr2Jnn2w/Be777EDvb7uPyPhTGpvuE9CFG93EXv47didC7rL3d+d0H2TpvX/+8xG7vWfZe1+5aSEQqmXtTj62cd5zYCaWcryV+Mv9F3ufzU/kpbHGQsUk2Oz/DuOo80d4uuOma226d1+EGSwx++cyr98PLOVYk++rHSUrQH7d9lirTkAsvg6yRD/HPtbhz33ruNyjaaafjTO+4mOMbn37MVwf/5Od5ob21dJ2z5Rkr1uU14CxDM6f/chYJcfuOaTzxPT/mpW7sS2KFDMYT5sIGm+3XJXp0b7UlJ8/CedEGY6/WcHneFyBE3DuyGCo6OJucRJeczd5n54hjIT+NlXsJvpMBF6OfzmxyI3RC9sXrvflOdudcH/11GGghEVGSZFJTpZGsECL1k0OhhlqUGEyMMcUcS6yxJUkhxZRSTopRLUsOOeaUcy655lakhBJLKrmUUkurvgoQFmuq2dRSa22NmzYu3fh244zWuu/SQ4899dxLr70NymeEEUcaeZRRR5t+yqT9Z5rZzDLrbMstSmmFFVdaeZVVV9vU2pYddtxp51123e2ZtTur77PmPmTu11lzd9Y0Y+Gcl9+yxuGcH5dwCidRc0bGfHBkPGsGKGivObPFheA1c5ozWz1NET1Zc1GTM51mjAyG5Xzc7pm7t8z9Mm8mhh/lzX+XOaOp+zcyZzR1d+Y+5+2LrM12GEVOgrQLNaZWNsDGSc0X/oLHP37tdW1XVp8mR2poAl2991CWy9UtMuQcEQ7Jtu7WCFmGZcWyl0t59bi3rN7yBgXm7ufVsKHeiKvzLcayJeQk1XeiXqOr2YedZSZWsH3SL5TYXJv6buy26tZ3ec1tzoe98Xa43nacZIOc1rT4IyX6EOqgFkOgfkDqlnuVwVVL6yU0Ui+DgBfjy9KbJ705VULqdP+9su8fhcz8WYzPq7Dfcm3OezMjwZp5gbWr2B0X6V4dNhE9YYXY+olN2yOe4Fq3+qjkaQ4asPg85kp5m7Xtpj0ooyVECSUwZQ+ZbL2z32znlFE2zEYPe8AQaI0h031j29RLbtFN35tp1GaZ5MvzRfJV5pUuGURs9gxxUSd1L89dMnUeSlqVFJQxWhittYvsTRfqproIceWqa7G6gepIW95sYnb9nSYlo8TEZpdJVCB7flApq+oKqRzT9Oas/A+T9Xw1v3Oi1mKBzjd4NE9uajupKEkzI2RoGtIzMhkJPZ16pWfPZoCtmdM6mRqJRY9Bx865W5NCcM+5QfZcrdWYvVkjr1Xy7jOG1VffoOoQWZESLjH2Hq+v5PsrnsaTQLrojDi2gGTLrmxN9y7EWeuitGy/aifFXq/akXTVDgmeKZG2uWnTUsGX4CcI2VsnBzZnQ2uNFMgC+URa7eRFy6L+qkHv/ty1kjiKKXA1M93akIXj8tTPipr2NibLdJHqXAv25j0U8etXY3/zxOerG5Hk+EE/UGh55ngqz/SdzjYGAMK6BQLxkVaqbWhtJ9a2SumJ/kPbNeSfd7UQgTxTt4vws9WmImItQFuW3ZZkSEwLcA6Dt2w8lqydAyzWmWIAjUiQ1JVa183nDn+CpB3NZzYIdtYcUZuVi+6pS8ypTQriTj6oOmfrZDqzlF0Ki0HYNllasoDJELPmOAXc1I78xat5f2DlPFK8EJdWLxyBGUDcFXIdsGtoNHTxbeTuFEh8L0hu6sScQrnLRKlpnbrZCuO1RUXlSINMN8sKDQJsEHUc6OGxfGqNO2qo92JrbkOtGyjkVPQwZCkAUFmehlkl2jpQGCkPcD7U5uoJKMBWy2thGK0M4IQePh1ysJXFgax0B7jqwdXtrs+HfPX5SgKImWXrIixAoAorxEO/7lhCnv63ixTp13aiHzt0212AbXsBystcKm2V1cMKAHyvbgDbvc5nD1IGGlqFKe1AM+VuQVkeNBmlRwWmSLjZgBUF4JhbLWF4vGAPmxzA+KqVHOeC99wqDZPb/Nw6V9/QNXo7ohOoy0pNAGQLPQLZu6zERQjC3ilPJwbA5y7OTRpl0PdfNeRLP+qGvDoc+fC5eTQsumuhvEBCvYHdCzqDvuLObl2N8lgaHPNucWobQjFwLDqucDh+2FamYiT2RsuJX83ORY++3mDSZJNOmA1sMF3tQULc2Qi7tsjGiCvSD97z4MQYihfcqEefEaQEZ6+mBylrAkycXfQlGgEDCvINZTmpJgn9wXF9rPQdRXkC1BZbTXs0SmZbg1zVb6MAEsBFK83Z51K6l1qDK9UpmEcIfhao1EEInbuU1ZZNb1yvsobmy9qI8MMg0gWa7wmFJRhiFK5MkTHuuIV6hV119vuwm0fcQXraA7Y/J0BnBBCJsCsqpIQ1YERgcroxcQSTD1EvU7+gqpLiNUdWUtJzX5dAU5arDVDD/kFFj0Z49gHemg0CH3zqYYNkKmKV48Qr/s4Fwj/3mvr3ieco112cVlsp69MeOPvdJo4sdtPA4Fq57Lug5maD2tHX1Tu1GgBFxmfLhBYEEbXsPLrwC2QyCk21O/CnoaC0kDLadtsIqvZItFHaSXh3amt0AUDRDNiVrNrr1t5xm2uv1Om111uEKuojMxOmDCootEQu6l98QG5ILjpbQX07tCI82qFfk2kEBBMxb1raKuiyippOVYPq1CXFJZV9H4bzlyICotK2KznytlGobZt0C6Kx64MpEaD2emd//9X84As4TWwE1M12AtRNT7SUJVqWJyYQjHiEXKMSoEOAA0dq4b+J/kXjZAlbJRcKl1/pps4loQa3I4BScIAASlGhdSKpjJp6DAXuOC6rixVoDkr1V+5pZhepNkTZwMygV4T0ozsaUq0bqBiS0PETKyPrCS/qUoVaJ/24U6FjxJaBwqCaRrX4LgRZjaPnWeOeERaiIswrdZCVfdXukz4QdKrRsc8hUfFH7HFXxN4l2CVdeiSbsFG7/4IcMV99AO0CG4vKJk9BnCe6I6nC8lUpqGrtS22dBZFU4G0i/YKqb0cYcUQRmWDRt1iRqrPlqvOkghJ5+JWDCpTfPK2BG9e2PYRkynkzKJNbRFwi+5LYT4GNz4+0eaOG6+hceStbFPXBt5kxN9KPguJ5WsOVvXKE2iOIDrhcavJsG3JxbrvwlXbcupnhdjEQExibGzQodvaIIwPolM8OLQ3kUU2JNdhNtzeqbwmFQx9W1EtF7gO8LWLXseojO2IYAR2WS1x03DEoQkAkqsZMcICWE8ByCRm65CNBmR+5sq4Toe6p2KTzUBYQhfshkDsaMmb47FbFIJLq4rQzHw5Ud6Z3yHLkIHtu3kcdWJCcAQYVkj8JUOSkIyKWi1nd0RaOHTAeN6NwtUC+NCrcQD1UIrtcl7hrrzmieva6jdgMXX4r7bIjuHyXhTr8MZB9higVaeGFpR3FPIZdJggWaEAYS6UqMU/1XXujjpugoR2SF5MI6pZK6igf2BjcVhSOpMEIBn9g5r1Xd+CBYaKBmc9+7gTzUXE7hcvS6sTh88Bhxg0sGVwTUB1d74IKpV4ytN/mKd8xr2rVGcL6h7Sab/NN1XZIg9bdFQkmy7Ubrii96eOYXeEKC0ZZjmLwW4VE4hoSJ2NQ83cUeMS7ghA9N1A0hK0AVvgzYKIb1AaWibTkAg1a1UmQIpw7B6W/XR826bBeSxBHePDxSO6eD6LVoWgTo0EYQXywPcnB7fEXOJ031g3w/jdQTT2V+TNT9dlTmd81VVvylcIFdJfPOTS/O70C7ie6BiF/uCLLsRlqjC1Cq2JF/XXCTSYfTkA80lyDKi0IEWhfVhhr3tRhsbXhH+vobZJWf13XauVcMHe5fDVHax/naNcYzdXb0k1oRR79bn48iCAfHytWl2DGPY85nnMRL/mzeJnXgP1NvMxrwP4mXuY1YCcOsRRMcY3YM3fIpDSkwwwQLZKnE6GigUmhoET6Bs/WgJkMsmJltDodChoOGCtzsQ6EIFyxVqW/fAP9BFZj/fVi/d3FjHLauVhQC1ZL9tDaBehTn0Y8cvU2GrgHr3e2Hskymq2ELwxErKu0Ksr0/QHJ9fKE7SByCl51kiKydbPqeBU8LQv/HY2irBdcj5LPEVC4t0SXJpXaGLSp49uA/8SrP8a3rWEOrDt+LpZDcEYN3XakZeFZVTzgR6JXvc0lgYRCofAXuS23n1S+/Fwf5vFmZTTHPd8l4SugJrrOd5cqV4Bp6GQw6YOZjtUFT5/j3UOmZut8d/Yz3wUiArCzKpvWkbJqIa/QhJPWmWC7bCYWqKosPhdwFnkBzRlEmhBTSB0Fg0qLMdgBW2gw2U/RB10gNd4DxamTUYpJfaxOjvGR8Rrz64wtvynTACkTr5RCGpY76gTVP0Rw+ThvG8o3Yzn16aGYEVFh4UcU9iWDmc+A8IoH65XGZuf7ghbFG0eVZ3J5bpQJMbpMt/oQFYVypKlzQWcp8J1a0Hw77933cb2kKeY2dAR7vC+VS90Zzhx4Nww/dhwguO7Rd+zf3ALOwQ/Oyy7eg+Dt7ic1RDrWpr54slB8MRo7QzuLvNVbipXrmdGOj2dGI99irAIqzvzihD4VMnS+xC6x9gqQNG5XS8JtMEOo1dPt1QeALe6xaBDkGxtD1BVANXvvCy5AAvWtGhjFM/ThYPbr3E4HRFyHJKdoa6/D+EU+1ZyRNba82gnoGdw3ndfrjF99azhD2iR0Tc79TvWLSzAPm3DmjTfua7/eDxLm9SChnTxl2lzxn6LWxyKsKe96P/4wKgvC91KDy/d7HDi+ek7RhjZuHsTocIKLLw88zuOO2es1x6HjtojePbPvpQ/WIpnyOmVaSUfPZHzrM0idI3w7RtCnhbcI10eWLzJc06qPQRBQyO9sNKtAjCerOPBbbVxBukJ0B2hmvA7FCFQoE6m900nKBEzA0ZQMeUa5oY8DRqvejy2LoqrK3QuU5jFo2apYCul6MPnxYZP5Kx1CKYEKksiHcTrr1arzST1/cL6cR7iLVEovQm1es96PobwCebpLbC2mX9Oeg/UYzrR0tpLY2tbHA1g1WslRjaRamYR2KgfgzpOtcao8166PDkuqj0db1Ku9nmx9WZBIVqGZYQh0xxEkc18FoDGCu+YvVIhSG4Vs15PasLqpqtFSarM694oVwDMUvWYLqC5KbeXwWjzUdoZb4KE+d4Fo0ba61zOyv8Yyr2hlXhDxsvPfISLwwLdmU2QKL2h4SZloBp7q52On+1X58YwUujUvsHwmCi8DhSewfw26KiWPWTy4bVTpH0R8Q24dL0k/4yW1Fsjx84Q88a7Mdf6HNCdyBnUtdxpZ4G8zr+dSglNEW3WvcwCU13RqQHGp+mDg2glN2Z57YlWzmv8DMtp/4pbSBlUAAAAGYktHRAD/AP8A/6C9p5MAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAAHdElNRQfiBRABCCT6ucwoAAAB3klEQVRIx7VWvYvUQBT/vfHWDw70rBKEzE6KRZHzDsEisRFEq7PSSrBQC9FKwaQTbKycYOXfofXBLVo5sbAQO9HLF+JGsFALi9vLs/EgxD13s5d71fB47/3mffzeDDEz9lNEG2MVxYtSm1P7BgDgDgCtonhhVoeZDaU2dlG6zwDAsZILAIadZiCI7u6ci9LdkNr0OgNQUexkI/W4ob7SGUDF/LCpK0r3hdRG7BlAaqOK0r2/S9luTPOnHR5IbYQgUgBUxTwQRO54a2nty/el5WlBHCt5Log+AfhcMW8KoiQNvN8AQM7TN07v4Hi4WQwGXZPMsZLLIg/9Ynurd7vr4H07vQfgVb1Ey0Xpfujo5tcAvMxDn6m+i1QUy2yksj0Gv5SH/vCfJtdA7Gykvs5ZFi8NvLcTp6gxmkeL0v3RMvjJNPA+zsSDPPR/tr19xfxrZqJJbQ633vtEK22YfHqOFpxtA7A6R4laZbAyoYlX+3Z6xLGShb6dnnNPJKax/K6rKD409cFRUUwAztTmek0QraeBt10zewfgvIriVQAPspG6+Vd/DMC3/wJUzIsAcsdKLgJ4nYf+rr+CNPDeA7gltXkC4FHFON4EmEQ0qpgP5KE/bvkhEACokelkonUpfwBZxLngNJYt1AAAAABJRU5ErkJggg==");
                                    me.toggleFavoriteToolTip(HP.HPTRIM.Messages.web_removeFromFavorites);
                                }).fail(function () {
                                    me.actionResult(HP.HPTRIM.Messages.web_errorAddingToFavorites);
                                    me.actionResultDisplay(true);
                                    me.doFadeInOutOnInformationalText();
                                    me.isInFavorites(false);
                                });
                            }
                            else if (me.isInFavorites()) {
                                var removeFavoriteRequest = new HPTRIM.RemoveFromFavoritesRequest(me.trimClient, this.uri, this.objectDefinition.type);
                                removeFavoriteRequest.doRequest().done(function (result) {
                                    me.actionResult(HP.HPTRIM.Messages.web_removedFromFavorites);
                                    me.actionResultDisplay(true);
                                    me.doFadeInOutOnInformationalText();
                                    me.isInFavorites(false);
                                    me.toggleFavoriteCaption("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAI2SURBVEhLtZU9SFxREIV3VVYlEKMWi2LAYEJU0MZ0NoqFkCAWktoIFhZJFXY7kaRLEX8qwSYQop2lIIiVKFgkgppgQIkK2giiBmJQcf2OjPL2uW/3PliLw8y9d2bOffNzXySVSkXuE6GCJ5PJ8kQiURfmQmEJBiH4AlHUlcSZgMBVBE4J6M15JyDwELgk+Dnya14JCBgHe2ABginkX2STC4lTigj2wVLTht4AjsBkXggIVG65n0UWKihy3Pbqc5GkfQFOMfCUoJ3It2AMfcmCtd0EY/3c9tZFhs17ZDdoRC/xkkbYKAKjloILdBVSOPN0zWfZeR1Zc3zdUdvg1ON3afvf2Ht4/QVsPGOxZgFn0DvQa0EFeiwoDZwXgUfY1CBbwYSIkNvghfxuU8RBNVgB/8CbXLn1n+PzChyAfXA7J/4aqB3VihfId6DAhQj7Lmz/g5/oT9Jq4A+AUSVG6hjVADWRlQSbPmxOkN+Van+8jHOg4mC8DA7RH2epQQk2O9hsIeOZ7AIHDadp8AcUZ0sT54vgR5BNIAE32gBzXkfWMYKl9Tl7moPToHoFpagUBxV6xDNc7dbGelF7bmqjZrDWbHBOEQ4tcgL9QO/PvIIjd8FvO1tFvgQdtn4dhqDXbvsLZ7Wfbq3nOs66DDmA3LROW7Mv+BiGYNiCHuOsl/ROh7CvR1Dvhb5M0zvtRIBx1Jw+oWdsPd+b9AA7PXYiKs05BxhGdTuXCfZ1mL7ozlA6/XDCknntrwCBz+v5PC5oxQAAAABJRU5ErkJggg==");
                                    me.toggleFavoriteToolTip(HP.HPTRIM.Messages.web_addToFavorites);
                                }).fail(function () {
                                    me.actionResult(HP.HPTRIM.Messages.web_errorRemovingFromFavorites);
                                    me.actionResultDisplay(true);
                                    me.doFadeInOutOnInformationalText();
                                    me.isInFavorites(true);
                                });
                            }
                            if (this.objectDefinition.type.name == "SearchForm") {
                                ko.postbox.publish("SearchFormAddedOrRemovedFromFavourite", me.isInFavorites());
                            }
                        };
                        MainObjectDetailComponent.prototype.refresh = function (actionResult) {
                            this.updateModel(this.uri, actionResult);
                        };
                        MainObjectDetailComponent.prototype.getSetNotes = function () {
                            var me = this;
                            this.getNotesHandler(me.objectDefinition.type, me.objectDefinition.notesPropertyName, me.mainObjectInfoObject.Uri, me.mainObjectInfoObject.CanAddToNotes);
                        };
                        MainObjectDetailComponent.prototype.renderMainObjectDetails = function (mainObjectInfoObject) {
                            var _this = this;
                            var me = this;
                            this.updateVisibleNavTasks();
                            this.updateVisibleCreateTasks(mainObjectInfoObject);
                            this.updateVisibleUpdateTasks(mainObjectInfoObject);
                            this.updateViewTaskVisible(mainObjectInfoObject);
                            this.updateVisibleChildLists();
                            me.currentObjectTitle = "-";
                            var titleProperty = me.objectDefinition.listPropertyByLocation.Title;
                            var valueToRender = {};
                            if (titleProperty.property) {
                                valueToRender = mainObjectInfoObject[titleProperty.property];
                            }
                            if (titleProperty.subProperty && valueToRender) {
                                valueToRender = valueToRender[titleProperty.subProperty];
                            }
                            if (valueToRender) {
                                if (valueToRender.Value) {
                                    me.currentObjectTitle = valueToRender.Value;
                                }
                                else {
                                    me.currentObjectTitle = valueToRender;
                                }
                            }
                            me.dataToDisplay([]);
                            _.each(me.objectDefinition.listPropertyDetailData, function (propertyToRender) {
                                if (propertyToRender.propertyDef) {
                                    me.dataToDisplay.push({ "text": me.render(mainObjectInfoObject, propertyToRender), caption: propertyToRender.propertyDef.Property.Caption, highlight: _this.getHighlight(mainObjectInfoObject, propertyToRender) });
                                }
                            });
                            me.dataRight(null);
                            if (me.objectDefinition.propertyDetailDataRight) {
                                if (me.objectDefinition.propertyDetailDataRight.propertyDef) {
                                    me.dataRight({ "text": me.render(mainObjectInfoObject, me.objectDefinition.propertyDetailDataRight), caption: me.objectDefinition.propertyDetailDataRight.propertyDef.Property.Caption, highlight: this.getHighlight(mainObjectInfoObject, me.objectDefinition.propertyDetailDataRight) });
                                }
                            }
                            if (me.showFavorite()) {
                                if (mainObjectInfoObject.IsInFavorites !== undefined) {
                                    this.mainObjectInfoObject.IsInFavorites = mainObjectInfoObject.IsInFavorites;
                                }
                                this.isInFavorites(this.mainObjectInfoObject.IsInFavorites);
                                if (this.mainObjectInfoObject.IsInFavorites == true) {
                                    this.toggleFavoriteCaption("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAQWHpUWHRSYXcgcHJvZmlsZSB0eXBlIGV4aWYAAHjarZpZlts4EkX/sYpeAoDAuByM5/QOevl9A6SUysnltMvpspQURQIxvCFYZv3vv9v8hz+h1mJCzCXVlCx/Qg3VN94Ue/25Xp0N59/rl8dn7v1x8/zAc0h4levXtO7zG8fj2xdyuI/398dNHvd1yn2h+4PHBUXv7Hlzn1fuC4m/jrv7d1Pv77Xwsp37vz7vY/F6+fh7yARjRq4n3vglTiz/nrsIK5AijdfIv06S1yPuHNHjIuHr2Jnn2w/Be777EDvb7uPyPhTGpvuE9CFG93EXv47didC7rL3d+d0H2TpvX/+8xG7vWfZe1+5aSEQqmXtTj62cd5zYCaWcryV+Mv9F3ufzU/kpbHGQsUk2Oz/DuOo80d4uuOma226d1+EGSwx++cyr98PLOVYk++rHSUrQH7d9lirTkAsvg6yRD/HPtbhz33ruNyjaaafjTO+4mOMbn37MVwf/5Od5ob21dJ2z5Rkr1uU14CxDM6f/chYJcfuOaTzxPT/mpW7sS2KFDMYT5sIGm+3XJXp0b7UlJ8/CedEGY6/WcHneFyBE3DuyGCo6OJucRJeczd5n54hjIT+NlXsJvpMBF6OfzmxyI3RC9sXrvflOdudcH/11GGghEVGSZFJTpZGsECL1k0OhhlqUGEyMMcUcS6yxJUkhxZRSTopRLUsOOeaUcy655lakhBJLKrmUUkurvgoQFmuq2dRSa22NmzYu3fh244zWuu/SQ4899dxLr70NymeEEUcaeZRRR5t+yqT9Z5rZzDLrbMstSmmFFVdaeZVVV9vU2pYddtxp51123e2ZtTur77PmPmTu11lzd9Y0Y+Gcl9+yxuGcH5dwCidRc0bGfHBkPGsGKGivObPFheA1c5ozWz1NET1Zc1GTM51mjAyG5Xzc7pm7t8z9Mm8mhh/lzX+XOaOp+zcyZzR1d+Y+5+2LrM12GEVOgrQLNaZWNsDGSc0X/oLHP37tdW1XVp8mR2poAl2991CWy9UtMuQcEQ7Jtu7WCFmGZcWyl0t59bi3rN7yBgXm7ufVsKHeiKvzLcayJeQk1XeiXqOr2YedZSZWsH3SL5TYXJv6buy26tZ3ec1tzoe98Xa43nacZIOc1rT4IyX6EOqgFkOgfkDqlnuVwVVL6yU0Ui+DgBfjy9KbJ705VULqdP+9su8fhcz8WYzPq7Dfcm3OezMjwZp5gbWr2B0X6V4dNhE9YYXY+olN2yOe4Fq3+qjkaQ4asPg85kp5m7Xtpj0ooyVECSUwZQ+ZbL2z32znlFE2zEYPe8AQaI0h031j29RLbtFN35tp1GaZ5MvzRfJV5pUuGURs9gxxUSd1L89dMnUeSlqVFJQxWhittYvsTRfqproIceWqa7G6gepIW95sYnb9nSYlo8TEZpdJVCB7flApq+oKqRzT9Oas/A+T9Xw1v3Oi1mKBzjd4NE9uajupKEkzI2RoGtIzMhkJPZ16pWfPZoCtmdM6mRqJRY9Bx865W5NCcM+5QfZcrdWYvVkjr1Xy7jOG1VffoOoQWZESLjH2Hq+v5PsrnsaTQLrojDi2gGTLrmxN9y7EWeuitGy/aifFXq/akXTVDgmeKZG2uWnTUsGX4CcI2VsnBzZnQ2uNFMgC+URa7eRFy6L+qkHv/ty1kjiKKXA1M93akIXj8tTPipr2NibLdJHqXAv25j0U8etXY3/zxOerG5Hk+EE/UGh55ngqz/SdzjYGAMK6BQLxkVaqbWhtJ9a2SumJ/kPbNeSfd7UQgTxTt4vws9WmImItQFuW3ZZkSEwLcA6Dt2w8lqydAyzWmWIAjUiQ1JVa183nDn+CpB3NZzYIdtYcUZuVi+6pS8ypTQriTj6oOmfrZDqzlF0Ki0HYNllasoDJELPmOAXc1I78xat5f2DlPFK8EJdWLxyBGUDcFXIdsGtoNHTxbeTuFEh8L0hu6sScQrnLRKlpnbrZCuO1RUXlSINMN8sKDQJsEHUc6OGxfGqNO2qo92JrbkOtGyjkVPQwZCkAUFmehlkl2jpQGCkPcD7U5uoJKMBWy2thGK0M4IQePh1ysJXFgax0B7jqwdXtrs+HfPX5SgKImWXrIixAoAorxEO/7lhCnv63ixTp13aiHzt0212AbXsBystcKm2V1cMKAHyvbgDbvc5nD1IGGlqFKe1AM+VuQVkeNBmlRwWmSLjZgBUF4JhbLWF4vGAPmxzA+KqVHOeC99wqDZPb/Nw6V9/QNXo7ohOoy0pNAGQLPQLZu6zERQjC3ilPJwbA5y7OTRpl0PdfNeRLP+qGvDoc+fC5eTQsumuhvEBCvYHdCzqDvuLObl2N8lgaHPNucWobQjFwLDqucDh+2FamYiT2RsuJX83ORY++3mDSZJNOmA1sMF3tQULc2Qi7tsjGiCvSD97z4MQYihfcqEefEaQEZ6+mBylrAkycXfQlGgEDCvINZTmpJgn9wXF9rPQdRXkC1BZbTXs0SmZbg1zVb6MAEsBFK83Z51K6l1qDK9UpmEcIfhao1EEInbuU1ZZNb1yvsobmy9qI8MMg0gWa7wmFJRhiFK5MkTHuuIV6hV119vuwm0fcQXraA7Y/J0BnBBCJsCsqpIQ1YERgcroxcQSTD1EvU7+gqpLiNUdWUtJzX5dAU5arDVDD/kFFj0Z49gHemg0CH3zqYYNkKmKV48Qr/s4Fwj/3mvr3ieco112cVlsp69MeOPvdJo4sdtPA4Fq57Lug5maD2tHX1Tu1GgBFxmfLhBYEEbXsPLrwC2QyCk21O/CnoaC0kDLadtsIqvZItFHaSXh3amt0AUDRDNiVrNrr1t5xm2uv1Om111uEKuojMxOmDCootEQu6l98QG5ILjpbQX07tCI82qFfk2kEBBMxb1raKuiyippOVYPq1CXFJZV9H4bzlyICotK2KznytlGobZt0C6Kx64MpEaD2emd//9X84As4TWwE1M12AtRNT7SUJVqWJyYQjHiEXKMSoEOAA0dq4b+J/kXjZAlbJRcKl1/pps4loQa3I4BScIAASlGhdSKpjJp6DAXuOC6rixVoDkr1V+5pZhepNkTZwMygV4T0ozsaUq0bqBiS0PETKyPrCS/qUoVaJ/24U6FjxJaBwqCaRrX4LgRZjaPnWeOeERaiIswrdZCVfdXukz4QdKrRsc8hUfFH7HFXxN4l2CVdeiSbsFG7/4IcMV99AO0CG4vKJk9BnCe6I6nC8lUpqGrtS22dBZFU4G0i/YKqb0cYcUQRmWDRt1iRqrPlqvOkghJ5+JWDCpTfPK2BG9e2PYRkynkzKJNbRFwi+5LYT4GNz4+0eaOG6+hceStbFPXBt5kxN9KPguJ5WsOVvXKE2iOIDrhcavJsG3JxbrvwlXbcupnhdjEQExibGzQodvaIIwPolM8OLQ3kUU2JNdhNtzeqbwmFQx9W1EtF7gO8LWLXseojO2IYAR2WS1x03DEoQkAkqsZMcICWE8ByCRm65CNBmR+5sq4Toe6p2KTzUBYQhfshkDsaMmb47FbFIJLq4rQzHw5Ud6Z3yHLkIHtu3kcdWJCcAQYVkj8JUOSkIyKWi1nd0RaOHTAeN6NwtUC+NCrcQD1UIrtcl7hrrzmieva6jdgMXX4r7bIjuHyXhTr8MZB9higVaeGFpR3FPIZdJggWaEAYS6UqMU/1XXujjpugoR2SF5MI6pZK6igf2BjcVhSOpMEIBn9g5r1Xd+CBYaKBmc9+7gTzUXE7hcvS6sTh88Bhxg0sGVwTUB1d74IKpV4ytN/mKd8xr2rVGcL6h7Sab/NN1XZIg9bdFQkmy7Ubrii96eOYXeEKC0ZZjmLwW4VE4hoSJ2NQ83cUeMS7ghA9N1A0hK0AVvgzYKIb1AaWibTkAg1a1UmQIpw7B6W/XR826bBeSxBHePDxSO6eD6LVoWgTo0EYQXywPcnB7fEXOJ031g3w/jdQTT2V+TNT9dlTmd81VVvylcIFdJfPOTS/O70C7ie6BiF/uCLLsRlqjC1Cq2JF/XXCTSYfTkA80lyDKi0IEWhfVhhr3tRhsbXhH+vobZJWf13XauVcMHe5fDVHax/naNcYzdXb0k1oRR79bn48iCAfHytWl2DGPY85nnMRL/mzeJnXgP1NvMxrwP4mXuY1YCcOsRRMcY3YM3fIpDSkwwwQLZKnE6GigUmhoET6Bs/WgJkMsmJltDodChoOGCtzsQ6EIFyxVqW/fAP9BFZj/fVi/d3FjHLauVhQC1ZL9tDaBehTn0Y8cvU2GrgHr3e2Hskymq2ELwxErKu0Ksr0/QHJ9fKE7SByCl51kiKydbPqeBU8LQv/HY2irBdcj5LPEVC4t0SXJpXaGLSp49uA/8SrP8a3rWEOrDt+LpZDcEYN3XakZeFZVTzgR6JXvc0lgYRCofAXuS23n1S+/Fwf5vFmZTTHPd8l4SugJrrOd5cqV4Bp6GQw6YOZjtUFT5/j3UOmZut8d/Yz3wUiArCzKpvWkbJqIa/QhJPWmWC7bCYWqKosPhdwFnkBzRlEmhBTSB0Fg0qLMdgBW2gw2U/RB10gNd4DxamTUYpJfaxOjvGR8Rrz64wtvynTACkTr5RCGpY76gTVP0Rw+ThvG8o3Yzn16aGYEVFh4UcU9iWDmc+A8IoH65XGZuf7ghbFG0eVZ3J5bpQJMbpMt/oQFYVypKlzQWcp8J1a0Hw77933cb2kKeY2dAR7vC+VS90Zzhx4Nww/dhwguO7Rd+zf3ALOwQ/Oyy7eg+Dt7ic1RDrWpr54slB8MRo7QzuLvNVbipXrmdGOj2dGI99irAIqzvzihD4VMnS+xC6x9gqQNG5XS8JtMEOo1dPt1QeALe6xaBDkGxtD1BVANXvvCy5AAvWtGhjFM/ThYPbr3E4HRFyHJKdoa6/D+EU+1ZyRNba82gnoGdw3ndfrjF99azhD2iR0Tc79TvWLSzAPm3DmjTfua7/eDxLm9SChnTxl2lzxn6LWxyKsKe96P/4wKgvC91KDy/d7HDi+ek7RhjZuHsTocIKLLw88zuOO2es1x6HjtojePbPvpQ/WIpnyOmVaSUfPZHzrM0idI3w7RtCnhbcI10eWLzJc06qPQRBQyO9sNKtAjCerOPBbbVxBukJ0B2hmvA7FCFQoE6m900nKBEzA0ZQMeUa5oY8DRqvejy2LoqrK3QuU5jFo2apYCul6MPnxYZP5Kx1CKYEKksiHcTrr1arzST1/cL6cR7iLVEovQm1es96PobwCebpLbC2mX9Oeg/UYzrR0tpLY2tbHA1g1WslRjaRamYR2KgfgzpOtcao8166PDkuqj0db1Ku9nmx9WZBIVqGZYQh0xxEkc18FoDGCu+YvVIhSG4Vs15PasLqpqtFSarM694oVwDMUvWYLqC5KbeXwWjzUdoZb4KE+d4Fo0ba61zOyv8Yyr2hlXhDxsvPfISLwwLdmU2QKL2h4SZloBp7q52On+1X58YwUujUvsHwmCi8DhSewfw26KiWPWTy4bVTpH0R8Q24dL0k/4yW1Fsjx84Q88a7Mdf6HNCdyBnUtdxpZ4G8zr+dSglNEW3WvcwCU13RqQHGp+mDg2glN2Z57YlWzmv8DMtp/4pbSBlUAAAAGYktHRAD/AP8A/6C9p5MAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAAHdElNRQfiBRABCCT6ucwoAAAB3klEQVRIx7VWvYvUQBT/vfHWDw70rBKEzE6KRZHzDsEisRFEq7PSSrBQC9FKwaQTbKycYOXfofXBLVo5sbAQO9HLF+JGsFALi9vLs/EgxD13s5d71fB47/3mffzeDDEz9lNEG2MVxYtSm1P7BgDgDgCtonhhVoeZDaU2dlG6zwDAsZILAIadZiCI7u6ci9LdkNr0OgNQUexkI/W4ob7SGUDF/LCpK0r3hdRG7BlAaqOK0r2/S9luTPOnHR5IbYQgUgBUxTwQRO54a2nty/el5WlBHCt5Log+AfhcMW8KoiQNvN8AQM7TN07v4Hi4WQwGXZPMsZLLIg/9Ynurd7vr4H07vQfgVb1Ey0Xpfujo5tcAvMxDn6m+i1QUy2yksj0Gv5SH/vCfJtdA7Gykvs5ZFi8NvLcTp6gxmkeL0v3RMvjJNPA+zsSDPPR/tr19xfxrZqJJbQ633vtEK22YfHqOFpxtA7A6R4laZbAyoYlX+3Z6xLGShb6dnnNPJKax/K6rKD409cFRUUwAztTmek0QraeBt10zewfgvIriVQAPspG6+Vd/DMC3/wJUzIsAcsdKLgJ4nYf+rr+CNPDeA7gltXkC4FHFON4EmEQ0qpgP5KE/bvkhEACokelkonUpfwBZxLngNJYt1AAAAABJRU5ErkJggg==");
                                    this.toggleFavoriteToolTip(HP.HPTRIM.Messages.web_removeFromFavorites);
                                }
                                else {
                                    this.toggleFavoriteCaption("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAI2SURBVEhLtZU9SFxREIV3VVYlEKMWi2LAYEJU0MZ0NoqFkCAWktoIFhZJFXY7kaRLEX8qwSYQop2lIIiVKFgkgppgQIkK2giiBmJQcf2OjPL2uW/3PliLw8y9d2bOffNzXySVSkXuE6GCJ5PJ8kQiURfmQmEJBiH4AlHUlcSZgMBVBE4J6M15JyDwELgk+Dnya14JCBgHe2ABginkX2STC4lTigj2wVLTht4AjsBkXggIVG65n0UWKihy3Pbqc5GkfQFOMfCUoJ3It2AMfcmCtd0EY/3c9tZFhs17ZDdoRC/xkkbYKAKjloILdBVSOPN0zWfZeR1Zc3zdUdvg1ON3afvf2Ht4/QVsPGOxZgFn0DvQa0EFeiwoDZwXgUfY1CBbwYSIkNvghfxuU8RBNVgB/8CbXLn1n+PzChyAfXA7J/4aqB3VihfId6DAhQj7Lmz/g5/oT9Jq4A+AUSVG6hjVADWRlQSbPmxOkN+Van+8jHOg4mC8DA7RH2epQQk2O9hsIeOZ7AIHDadp8AcUZ0sT54vgR5BNIAE32gBzXkfWMYKl9Tl7moPToHoFpagUBxV6xDNc7dbGelF7bmqjZrDWbHBOEQ4tcgL9QO/PvIIjd8FvO1tFvgQdtn4dhqDXbvsLZ7Wfbq3nOs66DDmA3LROW7Mv+BiGYNiCHuOsl/ROh7CvR1Dvhb5M0zvtRIBx1Jw+oWdsPd+b9AA7PXYiKs05BxhGdTuXCfZ1mL7ozlA6/XDCknntrwCBz+v5PC5oxQAAAABJRU5ErkJggg==");
                                    this.toggleFavoriteToolTip(HP.HPTRIM.Messages.web_addToFavorites);
                                }
                            }
                            this.showDeleteButton(false);
                            if (!this.neverShowDeleteButton() &&
                                _.contains(this.mainObjectInfoObject.EnabledCommandIds, "Remove") &&
                                this.deleteButtonAvailable() == true) {
                                this.showDeleteButton(true);
                            }
                            if (me.objectDefinition.type == HPTRIM.BaseObjectTypes.Location) {
                                var permissions = me.trimClient.getDatabase().currentUserPermissions();
                                me.showEditDetailsButton(false);
                                if (permissions['LimitedModInternalLocation'] == true && permissions['ModifyExternalLocation'] == true) {
                                    me.showEditDetailsButton(true);
                                }
                                else {
                                    if (me.mainObjectInfoObject.LocationIsWithin) {
                                        if (me.mainObjectInfoObject.LocationIsWithin.Value == true) {
                                            if (permissions['LimitedModInternalLocation'] == true) {
                                                me.showEditDetailsButton(true);
                                            }
                                        }
                                        else {
                                            if (permissions['ModifyExternalLocation'] == true) {
                                                me.showEditDetailsButton(true);
                                            }
                                        }
                                    }
                                }
                            }
                        };
                        return MainObjectDetailComponent;
                    }());
                    MainObject.MainObjectDetailComponent = MainObjectDetailComponent;
                })(MainObject = Panels.MainObject || (Panels.MainObject = {}));
            })(Panels = App.Panels || (App.Panels = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Panels;
            (function (Panels) {
                var MainObject;
                (function (MainObject) {
                    "use strict";
                    var CreateOrModifyMainObjectFormPanel = (function (_super) {
                        __extends(CreateOrModifyMainObjectFormPanel, _super);
                        function CreateOrModifyMainObjectFormPanel(trimClient, objectDef, hideReadOnlyFields) {
                            _super.call(this, 'templates/MainObject/MainObjectFormPanel');
                            this.form = ko.observable(null);
                            this.allowSave = true;
                            this.updated = false;
                            this.displayError = function (message) { };
                            this.displaySuccess = ko.observable(false);
                            this.alertDetails = ko.observable('');
                            this.doneHandler = function (reuslt) { };
                            this.updateHandler = function (reuslt) { };
                            this.clearErrorCallback = function () { };
                            this.cancel = function () { };
                            this.editingObjectUri = ko.observable("");
                            this.trimClient = trimClient;
                            this.displaySuccess = ko.observable(false);
                            this.objectDef = objectDef;
                            if (objectDef) {
                                this.loadFormFromObjectDef(hideReadOnlyFields);
                            }
                        }
                        CreateOrModifyMainObjectFormPanel.prototype.update = function (objectDef, uri, requiredCommandIds, requiredProperties) {
                            var isLocation = false;
                            if (objectDef.type == HPTRIM.BaseObjectTypes.Location) {
                                isLocation = true;
                            }
                            var me = this;
                            me.objectDef = objectDef;
                            me.allowSave = true;
                            me.editingObjectUri(uri);
                            var baseObjectRequest = new HPTRIM.TrimBaseObjectRequest(me.trimClient, new HPTRIM.TrimBaseObject(me.objectDef.type, uri));
                            baseObjectRequest.addProperty('DataEntryFormDefinition');
                            if (isLocation) {
                                baseObjectRequest.addProperty('ChildAddresses');
                            }
                            baseObjectRequest.doRequest().done(function (result) {
                                var formFromServer = result.Results[0].DataEntryFormDefinition;
                                var extraData = {};
                                if (result.Results[0].ChildAddresses && result.Results[0].ChildAddresses[0] && result.Results[0].ChildAddresses[0].Uri) {
                                    extraData['ChildAddresses'] = result.Results[0].ChildAddresses;
                                }
                                me.allowSave = false;
                                var pages = formFromServer.Pages;
                                _.each(pages, function (page) {
                                    if (page.Type == "LocationAddress") {
                                        return _.each(page.PageItems, function (pageItem) {
                                            if (pageItem.Name == "LocationAddressAddressType") {
                                                pageItem.Format = "PlainText";
                                            }
                                        });
                                    }
                                });
                                for (var i = 0; i < pages.length && !me.allowSave; i++) {
                                    var currentPage = pages[i];
                                    for (var j = 0; j < currentPage.PageItems.length && !me.allowSave; j++) {
                                        if (currentPage.PageItems[j].Readonly === false) {
                                            me.allowSave = true;
                                        }
                                    }
                                }
                                me.setAndInitialiseForm(new HP.HPTRIM.Form.DataEntryForm(me.trimClient, formFromServer, uri, me.objectDef.type, false, extraData, requiredCommandIds, requiredProperties));
                            }).fail(function (errorResponse) {
                                var errorMsg = HP.HPTRIM.Messages.web_unableToConnectToWebServices;
                                if (errorResponse.ResponseStatus && errorResponse.ResponseStatus.Message) {
                                    errorMsg = errorResponse.ResponseStatus.Message;
                                }
                                if (errorResponse.responseJSON && errorResponse.responseJSON.ResponseStatus && errorResponse.responseJSON.ResponseStatus.Message) {
                                    errorMsg = errorResponse.responseJSON.ResponseStatus.Message;
                                }
                                me.displayError(errorMsg);
                            });
                        };
                        CreateOrModifyMainObjectFormPanel.prototype.loadFormFromObjectDef = function (hideReadOnlyFields) {
                            this.setAndInitialiseForm(new HP.HPTRIM.Form.DataEntryForm(this.trimClient, this.objectDef.DataEntryFormDefinition, null, this.objectDef.type, hideReadOnlyFields));
                        };
                        CreateOrModifyMainObjectFormPanel.prototype.setAndInitialiseForm = function (form) {
                            var me = this;
                            this.form(form);
                            this.form().afterSaveHandler = function (result) {
                                me.doneHandler(result.Results[0]);
                            };
                            this.form().errorHandler = function (err) {
                                var errorMessage = err;
                                if (err['ResponseStatus']) {
                                    errorMessage = err['ResponseStatus']['Message'];
                                }
                                me.displayError(errorMessage);
                            };
                        };
                        CreateOrModifyMainObjectFormPanel.prototype.focusFirstControl = function (focus) {
                        };
                        CreateOrModifyMainObjectFormPanel.prototype.validate = function (errorCallback) {
                            var retVal = true;
                            return retVal;
                        };
                        return CreateOrModifyMainObjectFormPanel;
                    }(HP.HPTRIM.Framework.Components.Layouts.Panel));
                    MainObject.CreateOrModifyMainObjectFormPanel = CreateOrModifyMainObjectFormPanel;
                })(MainObject = Panels.MainObject || (Panels.MainObject = {}));
            })(Panels = App.Panels || (App.Panels = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Panels;
            (function (Panels) {
                var MainObject;
                (function (MainObject) {
                    "use strict";
                    var CreateOrModifyMainObjectPanel = (function (_super) {
                        __extends(CreateOrModifyMainObjectPanel, _super);
                        function CreateOrModifyMainObjectPanel(trimClient, objectDef, hideReadOnlyFields) {
                            var _this = this;
                            _super.call(this);
                            this.trimClient = trimClient;
                            var me = this;
                            this.objectDefinition = objectDef;
                            this.configureCommandPanel();
                            this.primaryPanel.panels([this.commandPanel]);
                            if (objectDef) {
                                this.commandPanel.title(objectDef.Caption);
                            }
                            this.createOrModifyMainObjectFormPanel = new MainObject.CreateOrModifyMainObjectFormPanel(this.trimClient, objectDef, hideReadOnlyFields);
                            this.mainPanel.panels([this.createOrModifyMainObjectFormPanel]);
                            this.createOrModifyMainObjectFormPanel.cancel = function () {
                                _this.cancelAction();
                            };
                            this.createOrModifyMainObjectFormPanel.doneHandler = function (result) {
                                _this.returnAction(result);
                            };
                            this.createOrModifyMainObjectFormPanel.displayError = function (message) {
                                _this.errorAction(message);
                            };
                        }
                        CreateOrModifyMainObjectPanel.prototype.getClassName = function () {
                            return CreateOrModifyMainObjectPanel.CLASS_NAME;
                        };
                        CreateOrModifyMainObjectPanel.prototype.configureCommandPanel = function () {
                            var _this = this;
                            this.commandPanel = ModifyMainObjectCommandPanel.create(this.objectDefinition, this.trimClient);
                            if (this.commandPanel['onRecordTypeSelected']) {
                                var setDataEntryFormDelegate = function (checkinStyleObject) {
                                    var form = new HP.HPTRIM.Form.DataEntryForm(_this.trimClient, checkinStyleObject.DataEntryFormDefinition, null, _this.objectDefinition.type, true);
                                    form.extraFormData = { "CheckinStyleRecordType": checkinStyleObject.CheckinStyleRecordType.Uri };
                                    _this.createOrModifyMainObjectFormPanel.setAndInitialiseForm(form);
                                };
                                this.commandPanel.onRecordTypeSelected = setDataEntryFormDelegate;
                            }
                            this.commandPanel.cancelAction = function () {
                                _this.cancelAction();
                            };
                        };
                        CreateOrModifyMainObjectPanel.prototype.resetPanels = function (clearForm) {
                            if (clearForm) {
                                this.createOrModifyMainObjectFormPanel.form().clear();
                                this.createOrModifyMainObjectFormPanel.loadFormFromObjectDef(true);
                            }
                        };
                        CreateOrModifyMainObjectPanel.prototype.clearForm = function () {
                            this.createOrModifyMainObjectFormPanel.form(null);
                        };
                        CreateOrModifyMainObjectPanel.prototype.updateObjectDef = function (objectDef) {
                            this.objectDefinition = objectDef;
                            this.commandPanel.title(objectDef.Caption);
                            this.commandPanel.description(objectDef.UpdateDescription);
                        };
                        CreateOrModifyMainObjectPanel.CLASS_NAME = "CreateOrModifyMainObjectPanel";
                        return CreateOrModifyMainObjectPanel;
                    }(HP.HPTRIM.Framework.Components.Layouts.SinglePage.ContentPanel));
                    MainObject.CreateOrModifyMainObjectPanel = CreateOrModifyMainObjectPanel;
                    var ModifyMainObjectCommandPanel = (function (_super) {
                        __extends(ModifyMainObjectCommandPanel, _super);
                        function ModifyMainObjectCommandPanel(title, description) {
                            _super.call(this, 'templates/MainObject/ModifyMainObjectCommandPanel', true);
                            this.cancelAction = function () { };
                            this.title = ko.observable(title);
                            this.description = ko.observable(description);
                        }
                        ModifyMainObjectCommandPanel.create = function (objectDef, trimClient, title, description) {
                            if (objectDef) {
                                if (objectDef.Id == HPTRIM.BaseObjectTypes.CheckinStyle.Id) {
                                    return new NewCheckinStyleCommandPanel(trimClient, objectDef, title, description);
                                }
                            }
                            return new ModifyMainObjectCommandPanel(title, description);
                        };
                        return ModifyMainObjectCommandPanel;
                    }(HP.HPTRIM.Framework.Components.Layouts.Panel));
                    MainObject.ModifyMainObjectCommandPanel = ModifyMainObjectCommandPanel;
                    var NewCheckinStyleCommandPanel = (function (_super) {
                        __extends(NewCheckinStyleCommandPanel, _super);
                        function NewCheckinStyleCommandPanel(trimClient, objectDef, title, description) {
                            _super.call(this, title, description);
                            this.onRecordTypeSelected = function (checkinStyleObject) { };
                            this.dataEntrySource = new HP.HPTRIM.Field.RecordTypePicker(trimClient, HP.HPTRIM.Messages.rec_select + " " + HP.HPTRIM.Messages.web_recordType, false, false);
                            this.dataEntrySource.enableClickToExpand = true;
                            this.dataEntrySource.setRawValue('all');
                            this.dataEntrySource.setPurpose(5);
                            this.dataEntrySource.doSearch();
                            var me = this;
                            var func = function (field, value) {
                                HPTRIM.Utils.Form.resetThesaurusOverlayPanel();
                                var rty = value;
                                var additionalData = {};
                                var payload = {
                                    "CheckinStyleRecordType": rty.Uri,
                                    "ByPassSave": true,
                                    "Properties": "DataEntryFormDefinition"
                                };
                                trimClient.doPost(objectDef.Id, payload).done(function (response) {
                                    var checkinStyleObject = response.Results[0];
                                    me.onRecordTypeSelected(checkinStyleObject);
                                }).fail(function (xhr, status, statusInfo) {
                                    var details = "";
                                    if (xhr.responseJSON && xhr.responseJSON.ResponseStatus) {
                                        var response = xhr.responseJSON.ResponseStatus;
                                        details = response.Message;
                                    }
                                });
                            };
                            this.dataEntrySource.on({ 'afterItemClicked': func });
                        }
                        return NewCheckinStyleCommandPanel;
                    }(ModifyMainObjectCommandPanel));
                    MainObject.NewCheckinStyleCommandPanel = NewCheckinStyleCommandPanel;
                })(MainObject = Panels.MainObject || (Panels.MainObject = {}));
            })(Panels = App.Panels || (App.Panels = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Panels;
            (function (Panels) {
                var MainObject;
                (function (MainObject) {
                    "use strict";
                    var MainObjectChildComponent = (function () {
                        function MainObjectChildComponent(trimClient, objectDef, childObjectPropertyInfo, parentObjectDefinition) {
                            var _this = this;
                            var me = this;
                            this.objectDef = objectDef;
                            this.trimClient = trimClient;
                            this.childPropertyCaption = ko.observable("");
                            this.detailComponent = new MainObject.MainObjectChildDetailComponent(trimClient, objectDef, childObjectPropertyInfo, parentObjectDefinition.type);
                            this.newChildForm = new Panels.Plugins.AddChildForm(trimClient, childObjectPropertyInfo.contsructorArguments);
                            this.displayConditions = childObjectPropertyInfo.displayConditions;
                            this.childObjectCommandPanel = new MainObject.MainObjectChildCommandPanel();
                            this.childObjectCommandPanel.title(objectDef.CaptionPlural);
                            this.childObjectCommandPanel.returnToParentTypeName(HPTRIM.Utils.String.format(HP.HPTRIM.Messages.web_returnToObject, [parentObjectDefinition.Caption]));
                            this.childObjectCommandPanel.childDescription(HPTRIM.Utils.String.format(HPTRIM.Messages.web_viewAddOrRemoveChildObjectForObjectType, [objectDef.CaptionPlural, parentObjectDefinition.Caption]));
                            var createTitle = HP.HPTRIM.Messages.web_createNewObject;
                            createTitle = HPTRIM.Utils.String.format(createTitle, [objectDef.Caption]);
                            this.childObjectCommandPanel.createCaption(createTitle);
                            var buttonCaption = objectDef.CaptionPlural;
                            if (objectDef.ButtonCaption) {
                                buttonCaption = objectDef.ButtonCaption;
                            }
                            var toolTip = buttonCaption;
                            if (objectDef.ToolTip) {
                                toolTip = objectDef.ToolTip;
                            }
                            this.parentDetailComponentButtonNameCaption = ko.observable(buttonCaption);
                            this.parentDetailComponentButtonNameToolTip = ko.observable(toolTip);
                            this.showChildObjects = function () {
                            };
                            this.queryDisplayString = ko.observable("");
                            this.noResults = ko.observable(false);
                            this.noResultString = ko.observable(HPTRIM.Utils.String.format(HP.HPTRIM.Messages.bob_noBobsFoundPossibleFilter, [objectDef.CaptionPlural]));
                            this.noObjectsFoundMessage = ko.observable(HP.HPTRIM.Messages.web_noMatchfound);
                            this.selectedChildUri = ko.observable("");
                            this.closeDetails = function () {
                                me.selectedChildUri("");
                                me.detailComponent.details(false);
                            };
                            this.koShowChildItem = function (data) {
                                return function () {
                                    me.showItem(data);
                                };
                            };
                            this.showItem = function (data) {
                                me.selectedChildUri("");
                                var itemUri = "";
                                if (data.Uri) {
                                    itemUri = data.Uri;
                                }
                                if (data.Fields) {
                                    itemUri = data.Fields.Uri;
                                }
                                me.selectedChildUri(itemUri);
                                me.detailComponent.updateModel(itemUri, _this.parentUri, data);
                            };
                            this.render = function (item, renderInformation) { return ""; };
                            this.getHighlight = function (item, renderInformation) { return ""; };
                        }
                        MainObjectChildComponent.prototype.getChildTopRight = function (item) {
                            return this.render(item, this.objectDef.listPropertyByLocation.TopRight);
                        };
                        MainObjectChildComponent.prototype.getChildTopRightHighlight = function (item) {
                            return this.getHighlight(item, this.objectDef.listPropertyByLocation.TopRight);
                        };
                        MainObjectChildComponent.prototype.getChildTopLeft = function (item) {
                            return this.render(item, this.objectDef.listPropertyByLocation.TopLeft);
                        };
                        MainObjectChildComponent.prototype.getChildTopLeftHighlight = function (item) {
                            return this.getHighlight(item, this.objectDef.listPropertyByLocation.TopLeft);
                        };
                        MainObjectChildComponent.prototype.getChildTitle = function (item) {
                            return this.render(item, this.objectDef.listPropertyByLocation.Title);
                        };
                        MainObjectChildComponent.prototype.getChildTitleHighlight = function (item) {
                            return this.getHighlight(item, this.objectDef.listPropertyByLocation.Title);
                        };
                        MainObjectChildComponent.prototype.getChildData = function (item) {
                            var _this = this;
                            var me = this;
                            var dataList = [];
                            if (this.objectDef.listPropertyData) {
                                _.each(this.objectDef.listPropertyData, function (data) {
                                    dataList.push({ "text": me.render(item, data), "highlight": _this.getHighlight(item, data) });
                                });
                            }
                            return dataList;
                        };
                        MainObjectChildComponent.prototype.getChildIcon = function (item) {
                            var returnVal = "";
                            var me = this;
                            var iconDef = this.objectDef.listPropertyByLocation["Icon"];
                            if (iconDef) {
                                if (iconDef.value) {
                                    returnVal = iconDef.value;
                                }
                                else {
                                    if (iconDef.property) {
                                        var iconProperty = item.Fields[iconDef.property];
                                        if (iconProperty && iconDef.subProperty) {
                                            iconProperty = iconProperty[iconDef.subProperty];
                                        }
                                        if (iconProperty && iconProperty.Id) {
                                            returnVal = iconProperty.Id;
                                            if (returnVal == "Unknown") {
                                                returnVal = iconDef.defaultValue;
                                            }
                                            else {
                                                returnVal = returnVal.toLowerCase() + "_x32";
                                            }
                                        }
                                    }
                                }
                            }
                            return returnVal;
                        };
                        MainObjectChildComponent.prototype.isElectronic = function (item) {
                            var returnVal = false;
                            if (this.detailComponent.viewTask()) {
                                var recordObject = item.Fields[this.detailComponent.viewTask().objectRecordProperty];
                                if (recordObject) {
                                    returnVal = recordObject.RecordIsElectronic;
                                    if (recordObject.RecordIsElectronic.Value || recordObject.RecordIsElectronic.Value === false) {
                                        returnVal = recordObject.RecordIsElectronic.Value;
                                    }
                                }
                            }
                            return returnVal;
                        };
                        MainObjectChildComponent.prototype.getExtension = function (item) {
                            var returnVal = "";
                            if (this.detailComponent.viewTask()) {
                                var recordObject = item.Fields[this.detailComponent.viewTask().objectRecordProperty];
                                if (recordObject) {
                                    returnVal = recordObject.RecordExtension;
                                    if (recordObject.RecordExtension.Value || recordObject.RecordExtension.Value === "") {
                                        returnVal = recordObject.RecordExtension.Value;
                                    }
                                }
                            }
                            return returnVal;
                        };
                        MainObjectChildComponent.prototype.showChildObjectsButton = function (item) {
                            if (this.displayConditions.length == 0) {
                                return true;
                            }
                            var display = _.reduce(this.displayConditions, function (memo, displayCondition) {
                                var conditionMet = true;
                                var property = item[displayCondition.propertyName];
                                if (displayCondition.value) {
                                    if (property.Value) {
                                        property = property.Value;
                                    }
                                    conditionMet = (property == displayCondition.value);
                                }
                                return conditionMet && memo;
                            }, true);
                            return display;
                        };
                        return MainObjectChildComponent;
                    }());
                    MainObject.MainObjectChildComponent = MainObjectChildComponent;
                })(MainObject = Panels.MainObject || (Panels.MainObject = {}));
            })(Panels = App.Panels || (App.Panels = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Panels;
            (function (Panels) {
                var MainObject;
                (function (MainObject) {
                    "use strict";
                    var MainObjectChildCommandPanel = (function (_super) {
                        __extends(MainObjectChildCommandPanel, _super);
                        function MainObjectChildCommandPanel(cssClass) {
                            _super.call(this, 'templates/MainObject/MainObjectChildCommandPanel', true);
                            if (cssClass) {
                                this.cssClass(cssClass);
                            }
                            var me = this;
                            this.showAddButton = ko.observable(true);
                            this.title = ko.observable("");
                            this.returnToParentTypeName = ko.observable("");
                            this.childDescription = ko.observable("");
                            this.createCaption = ko.observable("");
                            this.back = function () { };
                            this.addChildHandler = function () { };
                            this.addChildObjectButtonClick = function () {
                                me.addChildHandler();
                            };
                        }
                        return MainObjectChildCommandPanel;
                    }(HP.HPTRIM.Framework.Components.Layouts.Panel));
                    MainObject.MainObjectChildCommandPanel = MainObjectChildCommandPanel;
                })(MainObject = Panels.MainObject || (Panels.MainObject = {}));
            })(Panels = App.Panels || (App.Panels = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Panels;
            (function (Panels) {
                var MainObject;
                (function (MainObject) {
                    "use strict";
                    var MainObjectChildDetailComponent = (function () {
                        function MainObjectChildDetailComponent(trimClient, objectDef, childObjectProperty, parentObjectType) {
                            var _this = this;
                            this.trimClient = trimClient;
                            this.objectDef = objectDef;
                            this.uri = "";
                            this.parentObjectType = parentObjectType;
                            this.detailsTemplate = 'templates/MainObject/MainObjectChildDetailComponent';
                            this.details = ko.observable(false);
                            this.loading = ko.observable(false);
                            this.detailsReady = ko.observable(false);
                            this.actionResultDisplay = ko.observable(false);
                            this.actionResult = ko.observable("");
                            this.nameProperty = objectDef.listPropertyByLocation.Title.property;
                            this.doFadeInOutOnInformationalText = function () {
                                $("#activityInformationLabel").show("drop", 500);
                                $("#activityInformationLabel").delay(3000).hide("drop", "down", 500);
                            };
                            this.doFadeInOutOnInformationalTextWithAddedDelay = function () {
                                $("#activityInformationLabel").show("drop", 500);
                                $("#activityInformationLabel").delay(3000).hide("drop", "down", 500).delay(1500);
                            };
                            var me = this;
                            this.deleteButtonClick = function () {
                                me.deleteChild(me.objectDef.Caption, _this.itemListInfoObject.Fields[_this.nameProperty], _this.uri, childObjectProperty.propertyName, _this.parentUri, _this.parentObjectType, me.refreshCallback);
                            };
                            this.deleteChild = function (propertyCaption, name, uri, propertyName, parentUri, parentType, returnCallback) {
                            };
                            this.navigationTasks = ko.observableArray(me.objectDef.navigationTasks);
                            this.navTaskVisible = function (item) {
                                return true;
                            };
                            this.doNavTask = function (item) {
                                var me = _this;
                                var query = item.query;
                                for (var i = 0; i < item.objectPropertiesForQuery.length; i++) {
                                    var propertyName = item.objectPropertiesForQuery[i].property;
                                    var propertyType = item.objectPropertiesForQuery[i].type;
                                    var requiredProperty = me.itemListInfoObject.Fields[propertyName];
                                    if (propertyType == "Object") {
                                        requiredProperty = requiredProperty.Uri;
                                    }
                                    query = query.replace("{" + i + "}", requiredProperty);
                                }
                                me.searchHandler(query, "", item.returnedType);
                            };
                            this.getNavHref = function (item) {
                                var me = _this;
                                var query = item.query;
                                for (var i = 0; i < item.objectPropertiesForQuery.length; i++) {
                                    var propertyName = item.objectPropertiesForQuery[i].property;
                                    var propertyType = item.objectPropertiesForQuery[i].type;
                                    var requiredProperty = me.itemListInfoObject.Fields[propertyName];
                                    if (propertyType == "Object") {
                                        requiredProperty = requiredProperty.Uri;
                                    }
                                    query = query.replace("{" + i + "}", requiredProperty);
                                }
                                return "?q=" + query + "&t=" + item.returnedType.name;
                            };
                            this.viewTask = ko.observable(me.objectDef.viewTask);
                            this.viewTaskVisible = ko.observable(false);
                            this.doViewTask = function () {
                                var me = _this;
                                var record = me.itemListInfoObject.Fields[_this.viewTask().objectRecordProperty];
                                var errorHandler = function (error) {
                                    me.actionResult(error);
                                    me.actionResultDisplay(true);
                                };
                                if (record) {
                                    me.viewHandler(record.Uri, record.RecordExtension.Value, errorHandler);
                                }
                                else {
                                    errorHandler(HPTRIM.Messages.web_error);
                                }
                            };
                        }
                        MainObjectChildDetailComponent.prototype.useCachedResult = function (result) {
                        };
                        MainObjectChildDetailComponent.prototype.refresh = function () {
                        };
                        MainObjectChildDetailComponent.prototype.updateViewTaskVisible = function () {
                            this.viewTaskVisible(false);
                            if (this.objectDef.viewTask) {
                                if (this.itemListInfoObject) {
                                    var record = this.itemListInfoObject.Fields[this.objectDef.viewTask.objectRecordProperty];
                                    if (record) {
                                        if (record.RecordIsElectronic.Value == true) {
                                            this.viewTaskVisible(true);
                                        }
                                    }
                                }
                            }
                        };
                        MainObjectChildDetailComponent.prototype.updateModel = function (newUri, parentUri, itemListInfoObject) {
                            this.uri = newUri;
                            this.itemListInfoObject = itemListInfoObject;
                            this.parentUri = parentUri;
                            if (this.uri) {
                                this.details(true);
                            }
                            else {
                                this.details(false);
                            }
                            var me = this;
                            this.updateViewTaskVisible();
                        };
                        return MainObjectChildDetailComponent;
                    }());
                    MainObject.MainObjectChildDetailComponent = MainObjectChildDetailComponent;
                })(MainObject = Panels.MainObject || (Panels.MainObject = {}));
            })(Panels = App.Panels || (App.Panels = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Panels;
            (function (Panels) {
                var MainObject;
                (function (MainObject) {
                    "use strict";
                    var SavedSearchMainObjectPanel = (function (_super) {
                        __extends(SavedSearchMainObjectPanel, _super);
                        function SavedSearchMainObjectPanel(trimClient, objectDefinition, childObjectDefList, supportedTypes) {
                            _super.call(this, trimClient, objectDefinition, childObjectDefList, supportedTypes);
                        }
                        SavedSearchMainObjectPanel.prototype.getIconClickHandler = function (item) {
                            var _this = this;
                            var f = function () {
                                var obj = item.Fields;
                                var tempDetailComponent = new MainObject.MainObjectDetailComponent(_this.trimClient, _this.objectDefinition, _this.supportedTypes);
                                tempDetailComponent.searchHandler = _this.searchHandler;
                                tempDetailComponent.paramaterisedSearchHandler = root.showParameterisedSearch;
                                var promise = tempDetailComponent.updateModel(obj.Uri);
                                promise.done(function (result) {
                                    tempDetailComponent.searchButtonClick();
                                });
                            };
                            return f;
                        };
                        SavedSearchMainObjectPanel.prototype.getIcon = function (item) {
                            var iconString = _super.prototype.getIcon.call(this, item);
                            iconString += " cursor-pointer";
                            return iconString;
                        };
                        return SavedSearchMainObjectPanel;
                    }(Panels.MainObjectPanel));
                    MainObject.SavedSearchMainObjectPanel = SavedSearchMainObjectPanel;
                })(MainObject = Panels.MainObject || (Panels.MainObject = {}));
            })(Panels = App.Panels || (App.Panels = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Panels;
            (function (Panels) {
                "use strict";
                var TrimHandlerMixin = (function () {
                    function TrimHandlerMixin() {
                    }
                    TrimHandlerMixin.prototype.createRecordFromClassification = function (classification) {
                        var handler = HP.HPTRIM.App.ActionHandlers.CreateNewRecordHandlerFromClassification.getHandler(TrimHandlerMixin.s_app);
                        handler(false, "", "", classification);
                    };
                    return TrimHandlerMixin;
                }());
                Panels.TrimHandlerMixin = TrimHandlerMixin;
                var BrowseViaClassificationsPanel = (function (_super) {
                    __extends(BrowseViaClassificationsPanel, _super);
                    function BrowseViaClassificationsPanel(trimClient) {
                        _super.call(this, HP.HPTRIM.Messages.web_browseViaClassification, "BrowseViaClassificationTree-Template");
                        this.classificationChange = function (uri) { };
                        this.initialized = false;
                        this.isInFavouriteView = false;
                        this.selectedClassification = HPTRIM.TrimBaseObject.makeEmpty();
                        this.topButtonClass = ko.observable(HPTRIM.Utils.UIConstants.PRIMARY_BUTTON_CLASS);
                        this.favoriteButtonClass = ko.observable(HPTRIM.Utils.UIConstants.DEFAULT_BUTTON_CLASS);
                        this.treeNodesRequest = new HP.HPTRIM.ClassificationTreeNodesRequest(trimClient);
                        this.trimClient = trimClient;
                        this.setupToolbarButtons();
                    }
                    BrowseViaClassificationsPanel.prototype.setupToolbarButtons = function () {
                        var _this = this;
                        var me = this;
                        this.newRecordFromClassification = new HP.HPTRIM.Framework.Components.ActionManager.ActionBase({
                            id: "addNewRecord",
                            caption: "",
                            tooltip: "Add New Record",
                            icon: "addnew_24",
                            enabled: ko.observable(true),
                            visible: ko.observable(true),
                            active: true,
                            actionHandler: function (action) {
                                if (_this.selectedClassification.Uri !== HPTRIM.TrimBaseObject.makeEmpty().Uri) {
                                    _this.createRecordFromClassification(_this.selectedClassification);
                                }
                            }
                        });
                        this.toggleFavourite = new HP.HPTRIM.Framework.Components.ActionManager.ActionBase({
                            id: "toggleFavouriteClassification",
                            caption: "",
                            tooltip: "Toggle Favourite",
                            icon: "navfavorites_light_x24",
                            enabled: ko.observable(true),
                            visible: ko.observable(true),
                            active: true,
                            actionHandler: function (action) {
                                var isInFav = _this.selectedClassification['sourceObject'].IsInFavorites;
                                var refreshIfInFavouriteView = function () {
                                    var searchString = "favorite";
                                    if (me.isInFavouriteView) {
                                        me.load(searchString);
                                        me.actionPanel.visible(false);
                                    }
                                };
                                if (isInFav === true) {
                                    var favoriteRequest = new HPTRIM.RemoveFromFavoritesRequest(_this.trimClient, _this.selectedClassification.Uri, HPTRIM.BaseObjectTypes.Classification);
                                    favoriteRequest.doRequest().done(function (result) {
                                        refreshIfInFavouriteView();
                                    }).fail(function (errorResponse) {
                                        var errorMsg = HP.HPTRIM.Messages.web_unableToConnectToWebServices;
                                        if (errorResponse.ResponseStatus && errorResponse.ResponseStatus.Message) {
                                            errorMsg = errorResponse.ResponseStatus.Message;
                                        }
                                        if (errorResponse.responseJSON && errorResponse.responseJSON.ResponseStatus && errorResponse.responseJSON.ResponseStatus.Message) {
                                            errorMsg = errorResponse.responseJSON.ResponseStatus.Message;
                                        }
                                        ko.postbox.publish(App.TRIMApp.NOTIFICATION_ERROR_TOPIC, errorMsg);
                                    });
                                    _this.toggleFavourite.icon("navfavorites_light_x24");
                                }
                                else {
                                    var removeFavoriteRequest = new HPTRIM.AddToFavoritesRequest(_this.trimClient, _this.selectedClassification.Uri, HPTRIM.BaseObjectTypes.Classification);
                                    removeFavoriteRequest.doRequest().done(function (result) {
                                        refreshIfInFavouriteView();
                                    }).fail(function (errorResponse) {
                                        var errorMsg = HP.HPTRIM.Messages.web_unableToConnectToWebServices;
                                        if (errorResponse.ResponseStatus && errorResponse.ResponseStatus.Message) {
                                            errorMsg = errorResponse.ResponseStatus.Message;
                                        }
                                        if (errorResponse.responseJSON && errorResponse.responseJSON.ResponseStatus && errorResponse.responseJSON.ResponseStatus.Message) {
                                            errorMsg = errorResponse.responseJSON.ResponseStatus.Message;
                                        }
                                        ko.postbox.publish(App.TRIMApp.NOTIFICATION_ERROR_TOPIC, errorMsg);
                                    });
                                    _this.toggleFavourite.icon("favorite_24");
                                }
                            }
                        });
                        this.removeFromFavorite = new HP.HPTRIM.Framework.Components.ActionManager.ActionBase({
                            id: "removeClassificationFromFavourite",
                            caption: HP.HPTRIM.Messages.web_removeFromFavorites,
                            tooltip: HP.HPTRIM.Messages.web_removeFromFavorites,
                            icon: "removefromfavorites_x24",
                            enabled: ko.observable(true),
                            visible: ko.observable(true),
                            active: true,
                            actionHandler: function (action) {
                                var favoriteRequest = new HPTRIM.RemoveFromFavoritesRequest(_this.trimClient, _this.selectedClassification.Uri, HPTRIM.BaseObjectTypes.Classification);
                                favoriteRequest.doRequest().done(function (result) {
                                }).fail(function (errorResponse) {
                                    var errorMsg = HP.HPTRIM.Messages.web_unableToConnectToWebServices;
                                    if (errorResponse.ResponseStatus && errorResponse.ResponseStatus.Message) {
                                        errorMsg = errorResponse.ResponseStatus.Message;
                                    }
                                    if (errorResponse.responseJSON && errorResponse.responseJSON.ResponseStatus && errorResponse.responseJSON.ResponseStatus.Message) {
                                        errorMsg = errorResponse.responseJSON.ResponseStatus.Message;
                                    }
                                    ko.postbox.publish(App.TRIMApp.NOTIFICATION_ERROR_TOPIC, errorMsg);
                                });
                            }
                        });
                        this.showRecords = new HP.HPTRIM.Framework.Components.ActionManager.ActionBase({
                            id: "showRecords",
                            caption: "Show Records",
                            tooltip: "Show Records",
                            icon: "show_records_browse_x24",
                            enabled: ko.observable(true),
                            visible: ko.observable(true),
                            active: true,
                            actionHandler: function (action) {
                                _this.classificationChange(_this.selectedClassification.Uri.toString());
                            }
                        });
                        this.actionPanel = new HP.HPTRIM.Framework.Components.ActionManager.ActionManagerComponent("Command", [this.showRecords, this.newRecordFromClassification, this.toggleFavourite]);
                        this.actionPanel.templateName('ActionIconTemplate');
                        this.actionPanel.visible(false);
                    };
                    BrowseViaClassificationsPanel.prototype.selectAll = function () {
                        this.load("all");
                        this.topButtonClass(HPTRIM.Utils.UIConstants.PRIMARY_BUTTON_CLASS);
                        this.favoriteButtonClass(HPTRIM.Utils.UIConstants.DEFAULT_BUTTON_CLASS);
                    };
                    BrowseViaClassificationsPanel.prototype.selectTop = function () {
                        this.load("top");
                        this.topButtonClass(HPTRIM.Utils.UIConstants.PRIMARY_BUTTON_CLASS);
                        this.favoriteButtonClass(HPTRIM.Utils.UIConstants.DEFAULT_BUTTON_CLASS);
                    };
                    BrowseViaClassificationsPanel.prototype.selectFavorite = function () {
                        this.load("favorite");
                        this.topButtonClass(HPTRIM.Utils.UIConstants.DEFAULT_BUTTON_CLASS);
                        this.favoriteButtonClass(HPTRIM.Utils.UIConstants.PRIMARY_BUTTON_CLASS);
                    };
                    BrowseViaClassificationsPanel.prototype.onNodeSelect = function (treeNode) {
                        this.actionPanel.visible(true);
                        var rawObject = treeNode.sourceObject;
                        if (!rawObject) {
                            return;
                        }
                        var iconId = rawObject.Icon.Id;
                        ;
                        this.selectedClassification = new HPTRIM.TrimBaseObject(HPTRIM.BaseObjectTypes.Classification, rawObject.Uri, rawObject.ClassificationTitle.Value, rawObject.ClassificationName.Value, iconId);
                        this.selectedClassification['sourceObject'] = rawObject;
                        if (treeNode.isExpanded()) {
                            treeNode.collapse();
                        }
                        else {
                            treeNode.expand();
                        }
                        var classification = treeNode.sourceObject;
                        var classRecPattern = classification.ClassificationRecordPattern.Value;
                        if (classRecPattern === "") {
                            this.newRecordFromClassification.visible(false);
                            this.showRecords.visible(false);
                        }
                        else {
                            this.newRecordFromClassification.visible(true);
                            this.showRecords.visible(true);
                        }
                        var isInFav = rawObject.IsInFavorites;
                        if (isInFav === true) {
                            this.toggleFavourite.icon("favorite_24");
                        }
                        else {
                            this.toggleFavourite.icon("navfavorites_light_x24");
                        }
                    };
                    BrowseViaClassificationsPanel.prototype.onNodeUnSelect = function (treeNode) {
                        this.actionPanel.visible(false);
                        this.selectedClassification = HPTRIM.TrimBaseObject.makeEmpty();
                    };
                    BrowseViaClassificationsPanel.prototype.load = function (searchString) {
                        this.actionPanel.visible(false);
                        if (searchString) {
                            this.treeNodesRequest.setRootSearchString(searchString);
                            if (searchString == 'favorite') {
                                this.isInFavouriteView = true;
                            }
                            else {
                                this.isInFavouriteView = false;
                            }
                        }
                        this.initialized = true;
                        var draggable = false;
                        var multipleRoots = true;
                        var id = '#' + 'BrowseViaClassificationTree' + this.id;
                        var ele = $(id);
                        ele.html('');
                        ele.data('bs.gtreetable', null);
                        var classes = {
                            node: 'node',
                            loading: 'node-loading',
                            hovered: 'node-hovered',
                            expanded: 'node-expanded',
                            collapsed: 'node-collapsed',
                            name: 'node-name',
                            icon: 'node-icon',
                            ceIcon: 'node-icon-ce',
                            typeIcon: 'node-icon-type',
                            indent: 'node-indent',
                            number: 'node-number',
                        };
                        var template = '<table class="table gtreetable">' +
                            '  <tr  class="' + classes.node + ' ' + classes.collapsed + '">' +
                            '    <td>' +
                            '      <div class="node-container category_node_container" tabindex="0">${indent}${ecIcon}${typeIcon}${number}\t${name}</div>' +
                            '    </td> ' +
                            '  </tr>' +
                            '</table>';
                        var templateParts = {
                            indent: '<span class="node-indent">&zwnj;</span>',
                            ecIcon: '<span class="node-icon-ce icon"></span>',
                            typeIcon: '<span class="node-icon-type" style="width: 20px; display:inline-block">&nbsp;</span>',
                            name: '<span class="node-name"></span>',
                            number: '<span class="node-number"></span>',
                        };
                        $(id).gtreetable({
                            nodesWrapper: 'Results',
                            nodeLevel: 0,
                            template: template,
                            templateParts: templateParts,
                            cache: 1,
                            actions: null,
                            showExpandIconOnEmpty: true,
                            'types': {
                                'fpplans': 'fpplans_x16',
                                'navcontents': 'navcontents_x16'
                            },
                            "source": _.bind(this.treeNodesRequest.getNodes, this.treeNodesRequest),
                            onSelect: _.bind(this.onNodeSelect, this),
                            onUnselect: _.bind(this.onNodeUnSelect, this),
                            "language": "en-US",
                            "manyroots": multipleRoots,
                            "draggable": draggable,
                            defaultActions: null
                        });
                    };
                    return BrowseViaClassificationsPanel;
                }(HP.HPTRIM.Framework.Components.Layouts.CollapsiblePanel));
                Panels.BrowseViaClassificationsPanel = BrowseViaClassificationsPanel;
            })(Panels = App.Panels || (App.Panels = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Panels;
            (function (Panels) {
                "use strict";
                var BrowseViaUserLabelPanel = (function (_super) {
                    __extends(BrowseViaUserLabelPanel, _super);
                    function BrowseViaUserLabelPanel(trimClient) {
                        _super.call(this, HP.HPTRIM.Messages.web_browseViaUserLabel, "BrowseViaUserLabelTree-Template");
                        this.initialized = false;
                        this.recordUri = ko.observable("");
                        this.userLabelChange = function (uri) { };
                        this.trimClient = trimClient;
                        if (this.initialise) {
                            this.initialise();
                        }
                    }
                    BrowseViaUserLabelPanel.prototype.initializeUri = function (uri) {
                        this.recordUri = ko.observable(uri);
                    };
                    return BrowseViaUserLabelPanel;
                }(HP.HPTRIM.Framework.Components.Layouts.CollapsiblePanel));
                Panels.BrowseViaUserLabelPanel = BrowseViaUserLabelPanel;
                var UserLabelTreePanel = (function (_super) {
                    __extends(UserLabelTreePanel, _super);
                    function UserLabelTreePanel(trimClient) {
                        _super.call(this, "BrowseViaUserLabelTree-Template");
                        this.userLabelChange = function (uri) { };
                        this.initialized = false;
                        this.recordUri = ko.observable("");
                        this.trimClient = trimClient;
                        this.initialise();
                    }
                    UserLabelTreePanel.prototype.initialise = function () {
                        this.templateConfiguration.afterRender = _.bind(this.load, this);
                        this.treeNodesRequest = new HP.HPTRIM.UserLabelTreeNodesRequest(this.trimClient);
                        this.nodeSelected = ko.observable(null);
                    };
                    UserLabelTreePanel.prototype.initializeUri = function (uri) {
                        this.recordUri = ko.observable(uri);
                    };
                    UserLabelTreePanel.prototype.onNodeSelect = function (treeNode) {
                        if (treeNode.uri < 0) {
                            this.nodeSelected(null);
                        }
                        else {
                            this.nodeSelected(treeNode);
                        }
                        this.userLabelChange(treeNode.uri);
                        if (treeNode.isExpanded()) {
                            treeNode.collapse();
                        }
                        else {
                            treeNode.expand();
                        }
                    };
                    UserLabelTreePanel.prototype.load = function () {
                        this.initialized = true;
                        var draggable = false;
                        var multipleRoots = true;
                        var id = '#' + 'BrowseViaUserLabelTree' + this.id;
                        var iconsTypes = this.makeIconsTypes();
                        this.treeNodesRequest.recordUri = this.recordUri();
                        $(id).gtreetable({
                            nodesWrapper: 'Results',
                            nodeLevel: 0,
                            cache: 1,
                            actions: null,
                            showExpandIconOnEmpty: true,
                            'types': iconsTypes,
                            "source": _.bind(this.treeNodesRequest.getNodes, this.treeNodesRequest),
                            onSelect: _.bind(this.onNodeSelect, this),
                            "language": "en-US",
                            "manyroots": multipleRoots,
                            "draggable": draggable,
                            defaultActions: null
                        });
                    };
                    UserLabelTreePanel.prototype.makeIconsTypes = function () {
                        var icons = {};
                        var iconsTypes = {};
                        this.trimClient.getEnumDefinition('Icons').done(function (trimIcons) {
                            icons = trimIcons;
                        });
                        _.each(icons, function (iconObject) {
                            var iconName = iconObject.Icon.toLocaleLowerCase();
                            iconsTypes[iconName] = iconName + "_x16";
                            ;
                        });
                        return iconsTypes;
                    };
                    return UserLabelTreePanel;
                }(HP.HPTRIM.Framework.Components.Layouts.Panel));
                Panels.UserLabelTreePanel = UserLabelTreePanel;
                var KeywordTreePanel = (function (_super) {
                    __extends(KeywordTreePanel, _super);
                    function KeywordTreePanel(trimClient) {
                        _super.call(this, "ThesaurusTree-Template");
                        this.keywordSelected = function (uri) { };
                        this.initialized = false;
                        this.trimClient = trimClient;
                        this.initialise();
                    }
                    KeywordTreePanel.prototype.initialise = function () {
                        this.templateConfiguration.afterRender = _.bind(this.load, this);
                        this.treeNodesRequest = new HP.HPTRIM.KeywordTreeNodesRequest(this.trimClient);
                        this.nodeSelected = ko.observable(null);
                    };
                    KeywordTreePanel.prototype.onNodeSelect = function (treeNode) {
                        if (treeNode.uri < 0) {
                            this.nodeSelected(null);
                        }
                        else {
                            this.nodeSelected(treeNode);
                        }
                        this.keywordSelected(treeNode.uri);
                        if (treeNode.isExpanded()) {
                            treeNode.collapse();
                        }
                        else {
                            treeNode.expand();
                        }
                    };
                    KeywordTreePanel.prototype.load = function () {
                        this.initialized = true;
                        var draggable = false;
                        var multipleRoots = true;
                        var id = '#' + 'ThesaurusTree' + this.id;
                        var iconsTypes = this.makeIconsTypes();
                        var classes = {
                            node: 'node',
                            loading: 'node-loading',
                            hovered: 'node-hovered',
                            expanded: 'node-expanded',
                            collapsed: 'node-collapsed',
                            name: 'node-name',
                            icon: 'node-icon',
                            ceIcon: 'node-icon-ce',
                            typeIcon: 'node-icon-type',
                            indent: 'node-indent',
                        };
                        var template = '<table class="table gtreetable">' +
                            '  <tr class="' + classes.node + ' ' + classes.collapsed + '">' +
                            '    <td>' +
                            '      <div class="node-container" tabindex="0">${indent}${ecIcon}${typeIcon}${name}</div>' +
                            '    </td> ' +
                            '  </tr>' +
                            '</table>';
                        var templateParts = {
                            indent: '<span class="node-indent">&zwnj;</span>',
                            ecIcon: '<span class="node-icon-ce icon"></span>',
                            typeIcon: '<span class="node-icon-type" style="width: 20px; display:inline-block">&nbsp;</span>',
                            name: '<span class="node-name"></span>',
                        };
                        $(id).gtreetable({
                            nodesWrapper: 'Results',
                            nodeLevel: 0,
                            template: template,
                            templateParts: templateParts,
                            cache: 1,
                            actions: null,
                            showExpandIconOnEmpty: true,
                            'types': iconsTypes,
                            "source": _.bind(this.treeNodesRequest.getNodes, this.treeNodesRequest),
                            onSelect: _.bind(this.onNodeSelect, this),
                            "language": "en-US",
                            "manyroots": multipleRoots,
                            "draggable": draggable,
                            defaultActions: null
                        });
                    };
                    KeywordTreePanel.prototype.makeIconsTypes = function () {
                        var icons = {};
                        var iconsTypes = {};
                        this.trimClient.getEnumDefinition('Icons').done(function (trimIcons) {
                            icons = trimIcons;
                        });
                        _.each(icons, function (iconObject) {
                            var iconName = iconObject.Icon.toLocaleLowerCase();
                            iconsTypes[iconName] = iconName + "_x16";
                            ;
                        });
                        return iconsTypes;
                    };
                    return KeywordTreePanel;
                }(HP.HPTRIM.Framework.Components.Layouts.Panel));
                Panels.KeywordTreePanel = KeywordTreePanel;
            })(Panels = App.Panels || (App.Panels = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Panels;
            (function (Panels) {
                "use strict";
                var MultipleJurisdictionPanel = (function (_super) {
                    __extends(MultipleJurisdictionPanel, _super);
                    function MultipleJurisdictionPanel(trimClient, callingControl) {
                        _super.call(this, 'templates/Framework/Overlays/MainObjectUpdateTaskForm');
                        this.recordNumber = ko.observable("");
                        this.recordTitle = ko.observable("");
                        this.recordUri = "";
                        this.itemPickers = [];
                        this.fieldDecorators = [];
                        this.rawControls = ko.observableArray([]);
                        this.title = ko.observable(HP.HPTRIM.Messages.web_customizeJurisdiction);
                        this.caption = ko.observable('');
                        this.loading = ko.observable(false);
                        this.hasJurisdiction = ko.observable(true);
                        this.okText = ko.observable(HP.HPTRIM.Messages.web_save);
                        this.errorVisible = ko.observable(false);
                        this.alertDetails = ko.observable("");
                        this.showMessage = ko.observable(false);
                        this.chosenItemNames = ko.observable("");
                        this.selectedItems = ko.observableArray();
                        this.callback = function () { };
                        this.cancelHandler = function () {
                        };
                        this.cssClass('as-spa-saved-search-form');
                        this.trimClient = trimClient;
                        this.callingControl = callingControl;
                        this.chosenItemNames('');
                        this.labelForSeletedItems = HP.HPTRIM.Messages.web_selectedJurisdictions;
                        this.saveHandler = function (uri, infoObject, objectType, task, requiredCommandIds, parameterList, successCallback, failCallback) { };
                        this.jurisditionControl = new HP.HPTRIM.App.Panels.JurisdictionTreePanel(trimClient, [], this);
                    }
                    MultipleJurisdictionPanel.prototype.prepareForm = function (taskId) { };
                    ;
                    MultipleJurisdictionPanel.prototype.setInfoObject = function (infoObject) { };
                    ;
                    MultipleJurisdictionPanel.prototype.appliesToTask = function (objectType, taskId) {
                        return false;
                    };
                    MultipleJurisdictionPanel.prototype.resetPanel = function () {
                        this.okText(HP.HPTRIM.Messages.web_save);
                        this.alertDetails("");
                        this.errorVisible(false);
                        this.jurisditionControl.initialise();
                    };
                    MultipleJurisdictionPanel.prototype.preparePanel = function (title, caption, okText) {
                        this.resetPanel();
                        this.title(title);
                        this.caption(caption);
                        if (okText) {
                            this.okText(okText);
                        }
                        else {
                            this.okText(HP.HPTRIM.Messages.web_save);
                        }
                    };
                    MultipleJurisdictionPanel.prototype.setChosenItemNames = function (chosenNames) {
                        this.chosenItemNames(chosenNames);
                    };
                    MultipleJurisdictionPanel.prototype.doTask = function () {
                        if (this.callingControl != undefined && this.callingControl != null) {
                            var selValueStr = '';
                            var selItems = this.getSelectedItems();
                            _.each(selItems, function (selItem) {
                                if (selValueStr.length < 1) {
                                    selValueStr = selValueStr + selItem.displayValue;
                                }
                                else {
                                    selValueStr = selValueStr + ';' + selItem.displayValue;
                                }
                            });
                            this.callingControl.setValue({ displayValue: selValueStr });
                        }
                        this.cancelHandler();
                    };
                    MultipleJurisdictionPanel.prototype.setCallingControl = function (callingControl) {
                        this.callingControl = callingControl;
                        this.setChosenItemNames(callingControl.Value());
                    };
                    MultipleJurisdictionPanel.prototype.setSelectedItems = function (seletedItems) {
                        this.jurisditionControl.selectedItems(seletedItems);
                    };
                    MultipleJurisdictionPanel.prototype.getSelectedItems = function () {
                        return this.jurisditionControl.selectedItems();
                    };
                    MultipleJurisdictionPanel.prototype.validateAndHandleErrors = function () {
                        var allGood = true;
                        _.each(this.itemPickers, function (itemPicker) {
                            if (!itemPicker.getValue()) {
                                allGood = false;
                            }
                            else if (itemPicker.getValue().Uri == "0") {
                                allGood = false;
                            }
                        });
                        if (!allGood) {
                            this.alertDetails(HP.HPTRIM.Messages.web_makeValidSelection);
                            this.errorVisible(true);
                        }
                        return allGood;
                    };
                    ;
                    return MultipleJurisdictionPanel;
                }(HP.HPTRIM.Framework.Components.Layouts.Panel));
                Panels.MultipleJurisdictionPanel = MultipleJurisdictionPanel;
                var JurisdictionTreePanel = (function (_super) {
                    __extends(JurisdictionTreePanel, _super);
                    function JurisdictionTreePanel(trimClient, selectedItems, parentPanel) {
                        _super.call(this, "MultipleJurisdiction-Template");
                        this.initialized = false;
                        this.selectedItems = ko.observableArray();
                        this.cancelHandler = function () {
                        };
                        this.saveRequired = ko.observable(false);
                        this.trimClient = trimClient;
                        this.treeId = '#' + 'MultipleJurisdictionTree' + this.id;
                        this.secondColWidth = "";
                        this.firstColPaddingRight = "20px";
                        this.selectedItems(selectedItems);
                        this.originalSelectedItems = this.selectedItems().slice();
                        this.saveRequired = ko.observable(false);
                        this.allJurisItems = [];
                        this.parentPanel = parentPanel;
                        this.autoTimingOut = 10000;
                        this.autoRepeatFunction = null;
                        this.allJrisdictionsCount = 0;
                        this.originalBkColor = '';
                        this.initialise();
                    }
                    JurisdictionTreePanel.prototype.initialise = function () {
                        var me = this;
                        this.templateConfiguration.afterRender = _.bind(this.load, this);
                        this.treeNodesRequest = new HP.HPTRIM.JurisdictionTreeNodesRequest(this.trimClient);
                        this.load();
                        this.nodeSelected = ko.observable(null);
                        var search = new HPTRIM.TrimMainObjectSearch(this.trimClient, HPTRIM.BaseObjectTypes.Jurisdiction);
                        search.setProperties(["name", "icon"]);
                        var searchString = 'all' + ' ' + HP.HPTRIM.Messages.core_and + ' ' + HP.HPTRIM.Messages.bob_objectIsActive;
                        search.setSearchString(searchString);
                        search.page().done(function (result) {
                            me.allJrisdictionsCount = result.MinimumCount;
                        }).fail(function (result) {
                            me.allJrisdictionsCount = -1;
                        });
                    };
                    JurisdictionTreePanel.prototype.load = function () {
                        var me = this;
                        this.initialized = true;
                        var draggable = false;
                        var multipleRoots = true;
                        me.originalSelectedItems = me.selectedItems().slice();
                        me.parentPanel.loading(true);
                        me.parentPanel.hasJurisdiction(true);
                        me.parentPanel.setChosenItemNames('');
                        var iconsTypes = me.makeIconsTypes();
                        var template = '<table attr:{id: "MultipleJurisdictionTree" + $data.id } class="table gtreetable  gtreetable-fullAccess"> ' +
                            '  <tbody></tbody> ' +
                            '  <tr class="node  node-saved" data-id="$data.uri" data-level="0" style="margin-top: 5px; width: 522px; height: 30px;">' +
                            '    <td style="vertical-align: middle;width:200px">' +
                            '      <div class="node-container-non-width">${indent}${ecIcon}${typeIcon}${name}</div>' +
                            '    </td> ' +
                            '    <td style="border-left: 1px solid #eaeaea">' +
                            '      <div class="node-container-col-2" style="width: 350px; white-space: pre-wrap;  word-wrap: normal; position: relative; top: 2px">${close}</div>' +
                            '    </td> ' +
                            '  </tr>' +
                            '</table>';
                        var templateParts = {
                            indent: '<span class="node-indent">&zwnj;</span>',
                            ecIcon: '<span class="node-icon-ce icon"></span>',
                            typeIcon: '<span class="node-icon-type" style="width: 20px; margin-top: 6px; display:inline-block">&nbsp;</span>',
                            name: '<span class="node-name" style="cursor: default; position: relative; top: -2px;"></span>',
                            close: '<a id="closeButton" style= "position: absolute; left: 300px; margin-top: 4px; display:none; width:12px; height:12px; cursor: pointer;" data-bind="event: { click: function() {$parent.deSelectThis($data, null); }, clickBubble:false" tabindex= "0" class="panelclose-dk-grey" aria-hidden="true"></a>',
                        };
                        $(me.treeId).gtreetable({
                            nodesWrapper: 'Results',
                            nodeLevel: 0,
                            template: template,
                            templateParts: templateParts,
                            cache: 1,
                            actions: null,
                            showExpandIconOnEmpty: true,
                            'types': iconsTypes,
                            "source": _.bind(this.treeNodesRequest.getNodes, this.treeNodesRequest),
                            onSelect: _.bind(this.onNodeSelect, this),
                            onUnselect: _.bind(this.onNodeUnSelect, this),
                            "language": "en-US",
                            "manyroots": multipleRoots,
                            "draggable": draggable,
                            divider: true,
                            defaultActions: null
                        });
                        me.allJurisItems = [];
                        if (me.allJrisdictionsCount > 0) {
                            me.stopAutoFunction();
                            me.autoRepeatFunction = setInterval(function () { me.initializeTree(0); }, 500);
                        }
                        else {
                            me.parentPanel.hasJurisdiction(false);
                        }
                    };
                    JurisdictionTreePanel.prototype.initializeTree = function (nodeLevel) {
                        var me = this;
                        if (me.autoTimingOut > 0) {
                            me.autoTimingOut = me.autoTimingOut - 500;
                        }
                        else {
                            me.stopAutoFunction();
                        }
                        var rootNodes = $(me.treeId).children('tr[data-level=' + nodeLevel.toString() + ']');
                        if (nodeLevel == 0) {
                            if (rootNodes.length < me.allJrisdictionsCount) {
                                return;
                            }
                        }
                        else {
                            if (rootNodes.length == 0) {
                                me.parentPanel.loading(false);
                                me.stopAutoFunction();
                                me.parentPanel.setChosenItemNames(me.getChosenItemNames());
                                $(me.treeId).on('mousemove', '.node', function (mouseEvent) {
                                    this.style.backgroundColor = "#eaeaea";
                                    var nodeIconEle = mouseEvent.target.getElementsByClassName('node-icon-ce')[0];
                                    if (nodeIconEle != undefined && mouseEvent.offsetX > (nodeIconEle.offsetLeft - 20) && mouseEvent.offsetX < nodeIconEle.offsetLeft) {
                                        $("body").css("cursor", "pointer");
                                    }
                                    var closeButton = mouseEvent.currentTarget.getElementsByClassName('panelclose-dk-grey')[0];
                                    if (me.showCloseButton(mouseEvent.currentTarget.id)) {
                                        closeButton.style.display = 'inline-block';
                                    }
                                    else {
                                        closeButton.style.display = 'none';
                                    }
                                });
                                $(me.treeId).on('mouseout', '.node', function (mouseEvent) {
                                    if (me.nodeIsSelected(this.id)) {
                                        this.style.backgroundColor = '#d6f1eb';
                                    }
                                    else {
                                        this.style.backgroundColor = '';
                                    }
                                    $("body").css("cursor", "default");
                                });
                                $(me.treeId).on('click', '.node-saved', function (mouseEvent) {
                                    me.onNodeClicked($(this), mouseEvent);
                                    mouseEvent.stopImmediatePropagation();
                                });
                                $(me.treeId).css({
                                    width: '525px',
                                    'border-collapse': 'collapse',
                                });
                                return;
                            }
                        }
                        for (var i = 0; i < rootNodes.length; i++) {
                            var ele = rootNodes[i];
                            var node = $(me.treeId).gtreetable('getNode', $(ele));
                            me.refreshOneNode(node, i, nodeLevel);
                            if (nodeLevel == 0) {
                                me.allJurisItems.push(node.name);
                            }
                        }
                        me.stopAutoFunction();
                        me.autoRepeatFunction = setInterval(function () { me.initializeTree(nodeLevel + 1); }, 500);
                    };
                    JurisdictionTreePanel.prototype.onNodeSelect = function (treeNode) {
                        var me = this;
                        if (treeNode.uri < 0) {
                            me.nodeSelected(null);
                        }
                        else {
                            me.nodeSelected(treeNode);
                        }
                    };
                    JurisdictionTreePanel.prototype.changeSelectedItems = function (treeNode) {
                        var me = this;
                        if (me.nodeIsSelected(treeNode)) {
                            me.removedAnItemFromSelectedItems(treeNode);
                        }
                        else {
                            var selArray = me.selectedItems();
                            var addedItem = { displayValue: treeNode.name, JurisdictionName: treeNode.name };
                            if (!me.parentPanel.callingControl.multiSelect) {
                                selArray = [];
                            }
                            selArray.push(addedItem);
                            me.selectedItems(selArray);
                        }
                        me.updateSaveRequired();
                    };
                    JurisdictionTreePanel.prototype.showCloseButton = function (nodeId) {
                        var me = this;
                        var retValue = false;
                        for (var i = 0; i < me.selectedItems().length; i++) {
                            var oneItem = me.selectedItems()[i];
                            if (oneItem.JurisdictionName == nodeId) {
                                retValue = true;
                                break;
                            }
                        }
                        return retValue;
                    };
                    JurisdictionTreePanel.prototype.updateSaveRequired = function () {
                        var me = this;
                        var currSelectedItems = me.selectedItems().slice();
                        if (currSelectedItems.length != me.originalSelectedItems.length) {
                            me.saveRequired(true);
                            return;
                        }
                        if (currSelectedItems.length > 0) {
                            for (var i = me.originalSelectedItems.length - 1; i >= 0; i--) {
                                if (currSelectedItems.length < 1) {
                                    break;
                                }
                                for (var j = currSelectedItems.length - 1; j >= 0; j--) {
                                    var v1 = me.originalSelectedItems[i].JurisdictionName;
                                    var v2 = currSelectedItems[j].JurisdictionName;
                                    if (v1 == v2) {
                                        currSelectedItems.splice(j, 1);
                                    }
                                }
                            }
                        }
                        me.saveRequired(currSelectedItems.length > 0);
                    };
                    JurisdictionTreePanel.prototype.onNodeUnSelect = function (treeNode) {
                        this.onNodeSelect(treeNode);
                    };
                    JurisdictionTreePanel.prototype.onNodeExpandIconClick = function (nodeClicked) {
                        nodeClicked.expand();
                    };
                    JurisdictionTreePanel.prototype.refreshChildern = function (parentNode, nodeNumberBeforeExpanding) {
                        var me = this;
                        var childLevel = parentNode.level + 1;
                        var levelNodes = $(me.treeId).children('tr[data-level=' + childLevel.toString() + ']');
                        var childJuris = parentNode.sourceObject.JurisdictionMembers.Value.split(";");
                        if (levelNodes.length < (nodeNumberBeforeExpanding + childJuris.length)) {
                            return;
                        }
                        ;
                        me.stopAutoFunction();
                        me.refreshAllNodes();
                    };
                    JurisdictionTreePanel.prototype.hasActiveChildren = function (parentNode) {
                        var me = this;
                        if (parentNode.sourceObject.JurisdictionMembers.Value.length > 0) {
                            var childJuris = parentNode.sourceObject.JurisdictionMembers.Value.split(";");
                            if (childJuris.length > 0) {
                                for (var i = childJuris.length - 1; i >= 0; i--) {
                                    for (var j = 0; j < me.allJurisItems.length; j++) {
                                        if (childJuris[i] == me.allJurisItems[j]) {
                                            return true;
                                        }
                                        if (j >= me.allJurisItems.length) {
                                            childJuris.splice(i, 1);
                                        }
                                    }
                                }
                            }
                            return childJuris.length > 0;
                        }
                        return false;
                    };
                    JurisdictionTreePanel.prototype.refreshAllNodes = function () {
                        var me = this;
                        me.secondColWidth = '';
                        var currLevel = 0;
                        var levelNodes = $(me.treeId).children('tr[data-level=' + currLevel.toString() + ']');
                        while (levelNodes.length > 0) {
                            for (var i = 0; i < levelNodes.length; i++) {
                                var ele = levelNodes[i];
                                var node = $(me.treeId).gtreetable('getNode', $(ele));
                                me.refreshOneNode(node, i, currLevel);
                            }
                            currLevel++;
                            levelNodes = $(me.treeId).children('tr[data-level=' + currLevel.toString() + ']');
                        }
                        me.parentPanel.setChosenItemNames(me.getChosenItemNames());
                    };
                    JurisdictionTreePanel.prototype.deSelectThis = function (node, mouseEvent) {
                        this.onNodeClicked(node, mouseEvent);
                    };
                    JurisdictionTreePanel.prototype.onNodeClicked = function (node, mouseEvent) {
                        var me = this;
                        var nodeIconEle = node[0].getElementsByClassName('node-icon-ce')[0];
                        var thisNodeIsSelected = me.nodeIsSelected(node[0].id);
                        if (mouseEvent.target != undefined && mouseEvent.target.id == 'closeButton') {
                            if (thisNodeIsSelected) {
                                me.changeSelectedItems(me.nodeSelected());
                                me.refreshAllNodes();
                            }
                            return;
                        }
                        if (nodeIconEle != undefined && mouseEvent.offsetX > (nodeIconEle.offsetLeft - 20) && mouseEvent.offsetX < nodeIconEle.offsetLeft) {
                            if (me.nodeSelected()) {
                                if (me.nodeSelected().isExpanded()) {
                                    me.nodeSelected().collapse();
                                    me.refreshAllNodes();
                                }
                                else {
                                    var childLevel = me.nodeSelected().level + 1;
                                    var levelNodes = $(me.treeId).children('tr[data-level=' + childLevel.toString() + ']');
                                    me.nodeSelected().expand();
                                    me.stopAutoFunction();
                                    me.autoRepeatFunction = setInterval(function () { me.refreshChildern(me.nodeSelected(), levelNodes.length); }, 20);
                                }
                            }
                        }
                        else {
                            if (!thisNodeIsSelected) {
                                me.changeSelectedItems(me.nodeSelected());
                                me.refreshAllNodes();
                            }
                        }
                    };
                    JurisdictionTreePanel.prototype.refreshOneNode = function (theNode, nodeIndex, currentLevel) {
                        var me = this;
                        if (theNode.name != null && theNode.name != undefined && theNode.name != "" && theNode.uri != "-1") {
                            var nodeDiv = theNode.$node[0];
                            var secondColWidthNumber = 330;
                            if (me.secondColWidth.length < 3) {
                                var firstContainer = nodeDiv.getElementsByClassName('node-container-non-width')[0];
                                secondColWidthNumber = 520 - firstContainer.clientWidth;
                                if (secondColWidthNumber > 350) {
                                    me.firstColPaddingRight = (secondColWidthNumber - 350 + 20).toString() + 'px';
                                    secondColWidthNumber = 350;
                                }
                                me.secondColWidth = secondColWidthNumber.toString() + 'px';
                            }
                            var aSpan1 = nodeDiv.getElementsByClassName("node-name")[0];
                            var secondContainer = nodeDiv.getElementsByClassName("node-container-col-2")[0];
                            if (secondContainer != undefined) {
                                secondContainer.style.width = me.secondColWidth;
                                var existingSpan = secondContainer.getElementsByClassName("node-name-normal-cursor")[0];
                                if (existingSpan == null) {
                                    var aSpan2 = document.createElement('span');
                                    aSpan2.classList.add('node-name-normal-cursor');
                                    aSpan2.textContent = theNode.sourceObject.JurisdictionDescription.Value;
                                    aSpan2.setAttribute('title', theNode.sourceObject.JurisdictionDescription.Value);
                                    aSpan2.style.paddingLeft = '8px';
                                    aSpan2.style.width = (secondColWidthNumber - 25).toString() + 'px';
                                    aSpan2.style.display = 'block';
                                    secondContainer.appendChild(aSpan2);
                                }
                            }
                            nodeDiv.id = theNode.sourceObject.JurisdictionName.Value;
                            var nodeIconEle = nodeDiv.getElementsByClassName('node-icon-ce')[0];
                            if (nodeIconEle == undefined) {
                                nodeIconEle = nodeDiv.getElementsByClassName('node-icon-blank')[0];
                            }
                            var closeButton = nodeDiv.getElementsByClassName('panelclose-dk-grey')[0];
                            if (me.showCloseButton(nodeDiv.id)) {
                                closeButton.style.display = 'inline-block';
                            }
                            else {
                                closeButton.style.display = 'none';
                            }
                            if (me.hasActiveChildren(theNode)) {
                                nodeIconEle.classList.remove('node-icon-blank');
                                nodeIconEle.classList.add('node-icon-ce');
                            }
                            else {
                                nodeIconEle.classList.add('node-icon-blank');
                                nodeIconEle.classList.remove('node-icon-ce');
                            }
                            if (currentLevel < 1) {
                                nodeDiv.style.borderBottom = '0.25px solid #eaeaea';
                            }
                            else {
                                nodeDiv.style.borderBottom = '';
                            }
                            if (me.nodeIsSelected(theNode)) {
                                theNode.isSelected(true);
                                nodeDiv.style.backgroundColor = '#d6f1eb';
                            }
                            else {
                                theNode.isSelected(false);
                                nodeDiv.style.backgroundColor = '';
                            }
                        }
                    };
                    JurisdictionTreePanel.prototype.removedAnItemFromSelectedItems = function (anItem) {
                        var me = this;
                        var afterRemoveArray = me.selectedItems();
                        for (var i = afterRemoveArray.length - 1; i >= 0; i--) {
                            if (afterRemoveArray[i].displayValue == anItem.name) {
                                afterRemoveArray.splice(i, 1);
                                me.selectedItems(afterRemoveArray);
                                me.updateSaveRequired();
                                return;
                            }
                        }
                    };
                    JurisdictionTreePanel.prototype.setSelectedItems = function (seletedItems) {
                        this.selectedItems(seletedItems);
                        this.originalSelectedItems = this.selectedItems().slice();
                        this.saveRequired(false);
                    };
                    JurisdictionTreePanel.prototype.getSelectedItems = function () {
                        return this.selectedItems();
                    };
                    JurisdictionTreePanel.prototype.getChosenItemNames = function () {
                        var selValueStr = '';
                        _.each(this.selectedItems(), function (selItem) {
                            if (selValueStr.length < 1) {
                                selValueStr = selValueStr + selItem.displayValue;
                            }
                            else {
                                selValueStr = selValueStr + ', ' + selItem.displayValue;
                            }
                        });
                        return selValueStr;
                    };
                    JurisdictionTreePanel.prototype.nodeIsSelected = function (anode) {
                        var me = this;
                        var returnValue = false;
                        var checkString = '';
                        if (anode.name != undefined) {
                            checkString = anode.name;
                        }
                        else {
                            checkString = anode;
                        }
                        checkString = checkString.trim();
                        _.each(me.selectedItems(), function (selItem) {
                            if (selItem.displayValue == checkString) {
                                returnValue = true;
                                return true;
                            }
                        });
                        return returnValue;
                    };
                    JurisdictionTreePanel.prototype.stopAutoFunction = function () {
                        var me = this;
                        clearInterval(me.autoRepeatFunction);
                        me.autoRepeatFunction = null;
                        me.autoTimingOut = 10000;
                    };
                    JurisdictionTreePanel.prototype.makeIconsTypes = function () {
                        var icons = {};
                        var iconsTypes = {};
                        this.trimClient.getEnumDefinition('Icons').done(function (trimIcons) {
                            icons = trimIcons;
                        });
                        _.each(icons, function (iconObject) {
                            var iconName = iconObject.Icon.toLocaleLowerCase();
                            iconsTypes[iconName] = iconName + "_x16";
                            ;
                        });
                        return iconsTypes;
                    };
                    return JurisdictionTreePanel;
                }(HP.HPTRIM.Framework.Components.Layouts.Panel));
                Panels.JurisdictionTreePanel = JurisdictionTreePanel;
            })(Panels = App.Panels || (App.Panels = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Panels;
            (function (Panels) {
                "use strict";
                (function (InitializationStates) {
                    InitializationStates[InitializationStates["none"] = 0] = "none";
                    InitializationStates[InitializationStates["started"] = 1] = "started";
                    InitializationStates[InitializationStates["inProgress"] = 2] = "inProgress";
                    InitializationStates[InitializationStates["completed"] = 3] = "completed";
                })(Panels.InitializationStates || (Panels.InitializationStates = {}));
                var InitializationStates = Panels.InitializationStates;
                var MultipleLookupItemPanel = (function (_super) {
                    __extends(MultipleLookupItemPanel, _super);
                    function MultipleLookupItemPanel(trimClient, callingControl) {
                        var _this = this;
                        _super.call(this, 'templates/Framework/Overlays/MainObjectUpdateTaskForm');
                        this.recordNumber = ko.observable("");
                        this.recordTitle = ko.observable("");
                        this.displayAttachEventsLoader = ko.observable(false);
                        this.recordUri = "";
                        this.itemPickers = [];
                        this.fieldDecorators = [];
                        this.rawControls = ko.observableArray([]);
                        this.title = ko.observable("Customise Lookup Set: ");
                        this.caption = ko.observable('');
                        this.infoMessage = ko.observable('');
                        this.loading = ko.observable(false);
                        this.okText = ko.observable(HP.HPTRIM.Messages.web_save);
                        this.errorVisible = ko.observable(false);
                        this.alertDetails = ko.observable("");
                        this.filterVisible = ko.observable(false);
                        this.showMessage = ko.observable(false);
                        this.filterStringJustChanged = false;
                        this.chosenItemNames = ko.observable("");
                        this.selectedItems = ko.observableArray();
                        this.currentText = ko.observable("");
                        this.filteringString = ko.observable("");
                        this.callback = function () { };
                        this.cancelHandler = function () {
                        };
                        this.cssClass('as-spa-saved-search-form');
                        this.trimClient = trimClient;
                        this.callingControl = callingControl;
                        this.displayAttachEventsLoader = ko.observable(false);
                        this.chosenItemNames('');
                        this.labelForSeletedItems = HP.HPTRIM.Messages.web_selectedLookupItems;
                        this.saveHandler = function (uri, infoObject, objectType, task, requiredCommandIds, parameterList, successCallback, failCallback) { };
                        this.lookupItemControl = new HP.HPTRIM.App.Panels.LookupItemTreePanel(this.trimClient, [], '', this);
                        this.textAreaKeyUp = function (context, event) {
                            if (event && event.target) {
                                var v = event.target.value;
                                if (v == null) {
                                    v = '';
                                }
                                _this.currentText(v);
                            }
                            _this.lookupItemControl.refineSelectedItems();
                            _this.lookupItemControl.updateSaveRequired();
                        };
                    }
                    MultipleLookupItemPanel.prototype.prepareForm = function (taskId) { };
                    ;
                    MultipleLookupItemPanel.prototype.setInfoObject = function (infoObject) { };
                    ;
                    MultipleLookupItemPanel.prototype.appliesToTask = function (objectType, taskId) {
                        return false;
                    };
                    MultipleLookupItemPanel.prototype.resetPanel = function () {
                        this.okText(HP.HPTRIM.Messages.web_save);
                        this.alertDetails("");
                        this.errorVisible(false);
                        this.lookupItemControl.initialise();
                    };
                    MultipleLookupItemPanel.prototype.preparePanel = function (title, caption, okText) {
                        this.resetPanel();
                        this.title(title);
                        this.caption(caption);
                        if (okText) {
                            this.okText(okText);
                        }
                        else {
                            this.okText(HP.HPTRIM.Messages.web_save);
                        }
                    };
                    MultipleLookupItemPanel.prototype.setChosenItemNames = function (chosenNames) {
                        if (chosenNames == null) {
                            chosenNames = '';
                        }
                        this.currentText(chosenNames);
                        this.chosenItemNames(chosenNames);
                    };
                    MultipleLookupItemPanel.prototype.doTask = function () {
                        var me = this;
                        if (me.callingControl != undefined && me.callingControl != null) {
                            if (me.lookupItemControl.returnTextOnly) {
                                me.callingControl.setValue(me.chosenItemNames());
                            }
                            else {
                                var retItems = [];
                                var selItems = me.getSelectedItems();
                                _.each(selItems, function (item) {
                                    var idex = me.lookupItemControl.lookupSetObject.LookupItemFullNames.indexOf(item);
                                    if (idex > -1) {
                                        retItems.push({ NameString: item, Uri: me.lookupItemControl.lookupSetObject.LookupItemUris[idex] });
                                    }
                                });
                                if (retItems.length > 0) {
                                    me.callingControl.setSelectedIndex(retItems[0]);
                                }
                                else {
                                    me.callingControl.setSelectedIndex(null);
                                }
                            }
                        }
                        this.cancelHandler();
                    };
                    MultipleLookupItemPanel.prototype.setCallingControl = function (callingControl, multiSelect, returnTextOnly) {
                        var me = this;
                        me.filterVisible(false);
                        me.filteringString('');
                        me.callingControl = callingControl;
                        if (callingControl !== undefined && callingControl.lookupSetUri != undefined && callingControl.lookupSetUri > 0) {
                            var returnSet = {};
                            me.loading(true);
                            me.trimClient.getAndLoadLookupSet(callingControl.lookupSetUri, function (returnSet) { me.lookupItemControl.lookupSetObject = returnSet; me.title(HP.HPTRIM.Messages.web_editValueWithLookupSet + " " + me.lookupItemControl.lookupSetObject.LookupSetName); });
                            me.lookupItemControl.returnTextOnly = returnTextOnly;
                            me.lookupItemControl.multiSelect = multiSelect;
                            me.setChosenItemNames('');
                            me.lookupItemControl.setSelectedItemsAndText(callingControl.getSelectedItems(), callingControl.getValueEx());
                            me.lookupItemControl.topLookupItemCount = 0;
                            if (me.lookupItemControl && me.lookupItemControl.lookupSetObject && me.lookupItemControl.lookupSetObject.LookupItemFullNames) {
                                _.each(me.lookupItemControl.lookupSetObject.LookupItemFullNames, function (item) {
                                    var itemStringValue = item;
                                    if (item.Name != undefined) {
                                        itemStringValue = item.Name;
                                    }
                                    if (itemStringValue.toString().length > 0 && itemStringValue.toString().indexOf(' - ') < 0) {
                                        me.lookupItemControl.topLookupItemCount++;
                                    }
                                });
                            }
                            me.lookupItemControl.initializingState = InitializationStates.none;
                            me.autoRepeatFunction = setInterval(function () { me.initializeTreeControl(); }, 500);
                        }
                    };
                    MultipleLookupItemPanel.prototype.updateParentSingleSelect = function () {
                        var me = this;
                        if (this.callingControl != undefined && this.callingControl != null) {
                            if (this.lookupItemControl.lookupSetObject.LookupItemFullNames.length > this.callingControl.LookupValues.length) {
                                this.callingControl.LookupValues = this.lookupItemControl.lookupSetObject.LookupItemFullNames;
                                this.callingControl.items(this.lookupItemControl.lookupSetObject.LookupItemFullNames);
                            }
                        }
                    };
                    MultipleLookupItemPanel.prototype.initializeTreeControl = function () {
                        var me = this;
                        if (me.lookupItemControl.initializingState == InitializationStates.completed) {
                            clearInterval(me.autoRepeatFunction);
                            me.autoRepeatFunction = null;
                        }
                        else {
                            if (me.lookupItemControl.initializingState == InitializationStates.none) {
                                this.lookupItemControl.initialise();
                            }
                        }
                    };
                    MultipleLookupItemPanel.prototype.toggleFilter = function () {
                        this.filterVisible(!this.filterVisible());
                    };
                    MultipleLookupItemPanel.prototype.filterStringChanged = function (context, event) {
                        if (event != undefined) {
                            this.filteringString(event.currentTarget.value);
                            this.lookupItemControl.refreshTreeWithFilter();
                            this.filterStringJustChanged = true;
                        }
                    };
                    MultipleLookupItemPanel.prototype.filterStringCleared = function (context, event) {
                        if (event != undefined) {
                            this.filteringString("");
                            this.lookupItemControl.refreshTreeWithFilter();
                        }
                        if (this.lookupItemControl.returnTextOnly) {
                            $('#text-lu').focus();
                        }
                        else {
                            $('#lookupItemFilter').focus();
                        }
                        this.filterStringJustChanged = true;
                    };
                    MultipleLookupItemPanel.prototype.setSelectedItems = function (seletedItems) {
                        this.lookupItemControl.selectedItems(seletedItems);
                    };
                    MultipleLookupItemPanel.prototype.getSelectedItems = function () {
                        return this.lookupItemControl.selectedItems();
                    };
                    MultipleLookupItemPanel.prototype.getLookupSetUri = function () {
                        return this.lookupItemControl.lookupSetObject.LookupSetUri;
                    };
                    MultipleLookupItemPanel.prototype.validateAndHandleErrors = function () {
                        var allGood = true;
                        _.each(this.itemPickers, function (itemPicker) {
                            if (!itemPicker.getValue()) {
                                allGood = false;
                            }
                            else if (itemPicker.getValue().Uri == "0") {
                                allGood = false;
                            }
                        });
                        if (!allGood) {
                            this.alertDetails(HP.HPTRIM.Messages.web_makeValidSelection);
                            this.errorVisible(true);
                        }
                        return allGood;
                    };
                    ;
                    return MultipleLookupItemPanel;
                }(HP.HPTRIM.Framework.Components.Layouts.Panel));
                Panels.MultipleLookupItemPanel = MultipleLookupItemPanel;
                var LookupItemTreePanel = (function (_super) {
                    __extends(LookupItemTreePanel, _super);
                    function LookupItemTreePanel(trimClient, selectedItems, lookupSetUri, parentPanel) {
                        _super.call(this, "MultipleLookupItem-Template");
                        this.initializingState = InitializationStates.none;
                        this.selectedItems = ko.observableArray();
                        this.pendingRequest = ko.observable(false);
                        this.saveRequired = ko.observable(false);
                        this.cancelHandler = function () {
                        };
                        this.allHidenTreeRows = [];
                        this.leftRowsIds = [];
                        this.hiddenItems = [];
                        this.rowsIdsToBeExpaned = [];
                        this.rowsIdsPendingExpansion = [];
                        this.focusRowId = '';
                        this.currHighlightedStart = -1;
                        this.currHighlightedLength = 0;
                        this.currHighlightedText = '';
                        this.currHighlightCursorX = -1;
                        this.trimClient = trimClient;
                        this.treeId = '#' + 'MultipleLookupItemTree' + this.id;
                        this.selectedItems(selectedItems);
                        this.originalSelectedItems = this.selectedItems().slice();
                        this.originalText = '';
                        this.saveRequired = ko.observable(false);
                        this.autoTimingOut = 10000;
                        this.parentPanel = parentPanel;
                        this.autoRepeatFunction = null;
                        this.autoClearPrevNodefunction = null;
                        this.topLookupItemCount = 0;
                        this.multiSelect = true;
                        this.returnTextOnly = false;
                        this.lookupSetObject = null;
                        this.expandTheirChildren = [];
                        this.originalBkColor = '';
                        this.prevClickedNodeUri = 0;
                        this.initialise();
                    }
                    LookupItemTreePanel.prototype.initialise = function () {
                        if (this.lookupSetObject == null) {
                            return;
                        }
                        var me = this;
                        me.initializingState = InitializationStates.started;
                        this.treeNodesRequest = new HP.HPTRIM.LookupItemTreeNodesRequest(this.trimClient, this.lookupSetObject.LookupSetUri, this.lookupSetObject.HasShortValue, this.lookupSetObject.HasLongValue, this.lookupSetObject.LookupSetDisplayStyle);
                        this.treeNodesRequest.setRootSearchString(this.originalText);
                        this.load();
                        this.nodeSelected = ko.observable(null);
                    };
                    LookupItemTreePanel.prototype.load = function () {
                        var me = this;
                        this.pendingRequest(true);
                        me.parentPanel.loading(true);
                        $(document).on("treeRenderingCompleted", function (event) {
                            me.pendingRequest(false);
                            me.parentPanel.loading(false);
                            $(document).off("treeRenderingCompleted", this);
                            me.parentPanel.displayAttachEventsLoader(true);
                        });
                        $(document).on("treeDataLoaded", function (event) {
                            var length = 0;
                            var evt = event;
                            if (evt && evt['message'])
                                length = evt['message'];
                            if (length < me.lookupSetObject.LookupItemFullNames.length)
                                me.topLookupItemCount = length;
                            if (!me.returnTextOnly) {
                                me.parentPanel.updateParentSingleSelect();
                            }
                            $(document).off("treeDataLoaded", this);
                        });
                        $(document).on("eventAttachmentCompleted", function (event) {
                            me.parentPanel.displayAttachEventsLoader(false);
                            $(document).off("eventAttachmentCompleted", this);
                        });
                        if (me.lookupSetObject == undefined) {
                            return;
                        }
                        var draggable = false;
                        var multipleRoots = true;
                        me.parentPanel.infoMessage('');
                        me.refineSelectedItems();
                        var iconsTypes = me.makeIconsTypes();
                        var template = '<table attr:{id: "MultipleLookupItemTree" + $data.id } class="table gtreetable  gtreetable-fullAccess"> ' +
                            '  <tbody></tbody> ' +
                            '  <!-- ko if: false -->  ' +
                            '  <tr class="node  node-saved" data-id="$data.uri" data-level="0" style="margin-top: 5px; margin-left: 5px; width: 522px;">' +
                            '    <td>' +
                            '      <div class="node-container-non-width" style="width: 522px; height: 30px">${indent}${ecIcon}${typeIcon}${name}${close}</div>' +
                            '    </td> ' +
                            '  </tr>' +
                            '  <!-- /ko --> ' +
                            '</table>';
                        var templateParts = {
                            indent: '<span class="node-indent">&zwnj;</span>',
                            ecIcon: '<span class="node-icon-ce icon"></span>',
                            typeIcon: '<span class="node-icon-type" style="width: 20px; margin-top: 6px; display:inline-block">&nbsp;</span>',
                            name: '<span class="node-name" style="cursor: pointer; position: relative; top: -2px; padding-right: 5px"></span>',
                            close: '<a id="closeButton" style= "position: absolute; left: 510px; margin-top: 10px; display:none; width:12px; height:12px; cursor: pointer;" data-bind="event: { click: function() {$parent.deSelectThis($data, null); }, clickBubble:false" tabindex= "0" class="panelclose-dk-grey" aria-hidden="true"></a>',
                        };
                        if (me.returnTextOnly) {
                            if (me.parentPanel.getSelectedItems().length > 0) {
                                me.treeNodesRequest.hasSelectedItems = true;
                            }
                        }
                        else if (me.getRefindedSelectedItemFromSelect()) {
                            me.treeNodesRequest.hasSelectedItems = true;
                        }
                        $(me.treeId).gtreetable({
                            nodesWrapper: 'Results',
                            nodeLevel: 0,
                            template: template,
                            templateParts: templateParts,
                            cache: 1,
                            actions: null,
                            showExpandIconOnEmpty: true,
                            'types': iconsTypes,
                            "source": _.bind(me.treeNodesRequest.getNodes, me.treeNodesRequest),
                            onSelect: _.bind(me.onNodeSelect, me),
                            onUnselect: _.bind(me.onNodeUnSelect, me),
                            "language": "en-US",
                            "manyroots": multipleRoots,
                            "draggable": draggable,
                            divider: true,
                            defaultActions: null,
                            'sort': function (a, b) {
                                var aName = a.name.toLowerCase();
                                var bName = b.name.toLowerCase();
                                return ((aName < bName) ? -1 : ((aName > bName) ? 1 : 0));
                            }
                        });
                        me.stopAutoFunction();
                        me.autoRepeatFunction = setInterval(function () { me.initializeTree(0); }, 500);
                    };
                    LookupItemTreePanel.prototype.showCloseButton = function (nodeId) {
                        var me = this;
                        var retValue = false;
                        for (var i = 0; i < me.selectedItems().length; i++) {
                            var oneItem = me.selectedItems()[i];
                            if (oneItem == nodeId) {
                                retValue = true;
                                break;
                            }
                        }
                        return retValue;
                    };
                    LookupItemTreePanel.prototype.refineSelectedItems = function () {
                        var me = this;
                        if (me.returnTextOnly) {
                            var selItems = [];
                            var currentText = me.parentPanel.currentText();
                            if (currentText == null) {
                                currentText = '';
                            }
                            var currentItems = me.lookupSetObject.LookupItemFullNames;
                            for (var i = currentItems.length - 1; i > -1; i--) {
                                var currItem = currentItems[i];
                                var oldText = currentText;
                                currentText = currentText.replace(currItem, '');
                                if (oldText != currentText) {
                                    selItems.push(currItem);
                                }
                            }
                            me.selectedItems(selItems);
                            me.refreshAllNodes(0, false);
                        }
                    };
                    LookupItemTreePanel.prototype.getRefindedSelectedItemFromSelect = function () {
                        var me = this;
                        var selItem = "";
                        var currentText = me.parentPanel.currentText();
                        if (currentText == null) {
                            currentText = '';
                        }
                        var currentItems = me.lookupSetObject.LookupItemFullNames;
                        for (var i = currentItems.length - 1; i > -1; i--) {
                            var currItem = currentItems[i];
                            var oldText = currentText;
                            currentText = currentText.replace(currItem, '');
                            if (oldText != currentText) {
                                selItem = currItem;
                            }
                        }
                        if (selItem.length > 0)
                            return true;
                        else
                            return false;
                    };
                    LookupItemTreePanel.prototype.sortRows = function (a, b) {
                        var aName = a.name.toLowerCase();
                        var bName = b.name.toLowerCase();
                        return ((aName < bName) ? -1 : ((aName > bName) ? 1 : 0));
                    };
                    LookupItemTreePanel.prototype.initializeTree = function (nodeLevel) {
                        var me = this;
                        if (me.autoTimingOut > 0) {
                            me.autoTimingOut = me.autoTimingOut - 500;
                        }
                        else {
                            me.initializingState == InitializationStates.none;
                            me.stopAutoFunction();
                        }
                        me.leftRowsIds = [];
                        me.rowsIdsToBeExpaned = [];
                        me.rowsIdsPendingExpansion = [];
                        me.currHighlightedStart = -1;
                        me.currHighlightedLength = 0;
                        me.currHighlightedText = '';
                        me.currHighlightCursorX = -1;
                        me.initializingState == InitializationStates.inProgress;
                        var rootNodes = $(this.treeId + ' > [data-level=' + nodeLevel.toString() + ']');
                        if (nodeLevel == 0) {
                            if (rootNodes.length < me.topLookupItemCount) {
                                return;
                            }
                        }
                        else {
                            if (rootNodes.length == 0) {
                                me.stopAutoFunction();
                                if (me.returnTextOnly) {
                                    $('#text-lu').focus();
                                }
                                else {
                                    $('#lookupItemFilter').focus();
                                }
                                me.parentPanel.setChosenItemNames(me.getChosenItemNames());
                                $(me.treeId).on('mousemove', '.node', function (mouseEvent) {
                                    this.style.backgroundColor = "#eaeaea";
                                    var nodeIconEle = mouseEvent.target.getElementsByClassName('node-icon-ce')[0];
                                    if (nodeIconEle != undefined && mouseEvent.offsetX > (nodeIconEle.offsetLeft - 20) && mouseEvent.offsetX < nodeIconEle.offsetLeft) {
                                        $("body").css("cursor", "pointer");
                                        if (me.returnTextOnly == true && nodeIconEle.nextSibling != undefined && nodeIconEle.nextSibling.nextSibling != undefined) {
                                            me.highlightItemInTextarea(nodeIconEle.nextSibling.nextSibling.innerText, mouseEvent.offsetX);
                                        }
                                    }
                                    else {
                                        if (me.lookupSetObject.SelectLowestLevelOnly == true && mouseEvent.currentTarget.id.substr(mouseEvent.currentTarget.id.length - 3, 3) == '---') {
                                            $("body").css("cursor", "not-allowed");
                                        }
                                        if (me.returnTextOnly == true) {
                                            me.highlightItemInTextarea(me.getId(mouseEvent.currentTarget.id), mouseEvent.offsetX);
                                        }
                                    }
                                    var closeButton = mouseEvent.currentTarget.getElementsByClassName('panelclose-dk-grey')[0];
                                    if (me.showCloseButton(mouseEvent.currentTarget.id)) {
                                        closeButton.style.display = 'inline-block';
                                    }
                                    else {
                                        closeButton.style.display = 'none';
                                    }
                                });
                                $(me.treeId).on('mouseout', '.node', function (mouseEvent) {
                                    if (me.nodeIsSelected(me.getId(this.id))) {
                                        this.style.backgroundColor = '#d6f1eb';
                                    }
                                    else {
                                        this.style.backgroundColor = '';
                                    }
                                    $("body").css("cursor", "default");
                                });
                                $(me.treeId).on('click', '.node-saved', function (mouseEvent) {
                                    me.onNodeClicked($(this), mouseEvent);
                                    mouseEvent.stopImmediatePropagation();
                                });
                                $(me.treeId).css({
                                    width: '525px',
                                    'border-collapse': 'collapse',
                                });
                                me.initializingState = InitializationStates.completed;
                                return;
                            }
                        }
                        for (var i = 0; i < rootNodes.length; i++) {
                            var ele = rootNodes[i];
                            var node = $(me.treeId).gtreetable('getNode', $(ele));
                            me.refreshOneNode(node, i, nodeLevel);
                        }
                        me.stopAutoFunction();
                        if (rootNodes.length == 0)
                            me.autoRepeatFunction = setInterval(function () { me.initializeTree(0); }, 500);
                        else {
                            me.autoRepeatFunction = setInterval(function () { me.initializeTree(nodeLevel + 1); }, 500);
                        }
                    };
                    LookupItemTreePanel.prototype.focusedItem = function (wholeString, focusPos) {
                        if (wholeString.length <= focusPos || focusPos < 1) {
                            return '';
                        }
                        return '';
                    };
                    LookupItemTreePanel.prototype.containThisItem = function (anArray, checkItem) {
                        var retVal = false;
                        _.each(anArray, function (selItem) {
                            if (selItem == checkItem) {
                                retVal = true;
                                return false;
                            }
                        });
                        return retVal;
                    };
                    LookupItemTreePanel.prototype.addIfNotInAlready = function (anArray, checkItem) {
                        if (!this.containThisItem(anArray, checkItem)) {
                            anArray.push(checkItem);
                        }
                    };
                    LookupItemTreePanel.prototype.onNodeSelect = function (treeNode) {
                        var me = this;
                        if (treeNode.uri < 0) {
                            me.nodeSelected(null);
                        }
                        else {
                            me.nodeSelected(treeNode);
                        }
                    };
                    LookupItemTreePanel.prototype.changeSelectedItems = function (treeNode) {
                        var me = this;
                        if (me.returnTextOnly) {
                            var curText = me.parentPanel.currentText();
                            var addOrRemoveStr = me.getItemValue(treeNode);
                            var selArray = me.selectedItems();
                            var i = selArray.indexOf(addOrRemoveStr);
                            if (i < 0) {
                                var newText = curText + ' ' + addOrRemoveStr;
                                me.parentPanel.currentText(newText);
                                selArray.push(me.getItemValue(treeNode));
                                me.selectedItems(selArray);
                                me.refreshAllNodes(0, false);
                                me.currHighlightedStart = curText.length + 1;
                                me.highlightItemInTextarea(addOrRemoveStr, me.currHighlightedStart);
                            }
                            else {
                                if (me.currHighlightedStart > -1) {
                                    var frontPart = curText.substr(0, me.currHighlightedStart);
                                    var backPart = curText.substr(me.currHighlightedStart + me.currHighlightedLength);
                                    var newText = frontPart + backPart;
                                    me.parentPanel.currentText(newText);
                                    selArray.splice(i, 1);
                                    me.selectedItems(selArray);
                                }
                            }
                            $('#text-lu').focus();
                        }
                        else {
                            if (me.lookupSetObject.SelectLowestLevelOnly) {
                                if (treeNode.sourceObject.LookupItemHasChildItems.Value == true) {
                                    alert(HP.HPTRIM.Messages.web_allowToSelectDeSelectLowestNode);
                                    return;
                                }
                            }
                            if (me.nodeIsSelected(treeNode)) {
                                me.removedAnItemFromSelectedItems(treeNode);
                            }
                            else {
                                var selArray = me.selectedItems();
                                if (!me.multiSelect) {
                                    selArray = [];
                                }
                                selArray.push(me.getItemValue(treeNode));
                                me.selectedItems(selArray);
                            }
                        }
                        me.updateSaveRequired();
                    };
                    LookupItemTreePanel.prototype.getItemValue = function (treeNode) {
                        var me = this;
                        var retVal = '';
                        if (treeNode != undefined && treeNode.sourceObject != undefined) {
                            return treeNode.sourceObject.LookupItemFullDescription.Value;
                        }
                        return retVal;
                    };
                    LookupItemTreePanel.prototype.updateSaveRequired = function () {
                        var me = this;
                        if (me.returnTextOnly) {
                            var origText = me.originalText.trim();
                            var curText = me.parentPanel.currentText().trim();
                            me.saveRequired(origText != curText);
                        }
                        else {
                            var currSelectedItems = me.selectedItems().slice();
                            if (currSelectedItems.length != me.originalSelectedItems.length) {
                                me.saveRequired(true);
                                return;
                            }
                            if (currSelectedItems.length > 0) {
                                for (var i = me.originalSelectedItems.length - 1; i >= 0; i--) {
                                    if (currSelectedItems.length < 1) {
                                        break;
                                    }
                                    for (var j = currSelectedItems.length - 1; j >= 0; j--) {
                                        if (me.originalSelectedItems[i] == currSelectedItems[j]) {
                                            currSelectedItems.splice(j, 1);
                                        }
                                    }
                                }
                            }
                            me.saveRequired(currSelectedItems.length > 0);
                        }
                    };
                    LookupItemTreePanel.prototype.onNodeUnSelect = function (treeNode) {
                        this.onNodeSelect(treeNode);
                    };
                    LookupItemTreePanel.prototype.onNodeExpandIconClick = function (nodeClicked) {
                        nodeClicked.expand();
                    };
                    LookupItemTreePanel.prototype.shouldShowItemAccordingToFilters = function (itemStr) {
                        var me = this;
                        var checkStr = itemStr.toLowerCase();
                        var filterStr = me.parentPanel.filteringString().trim();
                        var checkLen = filterStr.length;
                        if (checkLen > 2) {
                            if (checkStr.indexOf(filterStr.toLowerCase()) > -1) {
                                return true;
                            }
                        }
                        else {
                            if (checkLen > 0) {
                                if (checkStr.substr(0, checkLen) == filterStr.toLowerCase()) {
                                    return true;
                                }
                            }
                        }
                        return false;
                    };
                    LookupItemTreePanel.prototype.refreshTreeWithFilter = function () {
                        var me = this;
                        me.parentPanel.infoMessage('');
                        if (me.parentPanel.filteringString().trim().length < 1) {
                            me.treeNodesRequest.setFilterString('');
                            _.each(me.allHidenTreeRows, function (row) {
                                row.show();
                            });
                            me.allHidenTreeRows = [];
                            me.leftRowsIds = [];
                            me.hiddenItems = [];
                            me.treeNodesRequest.setHiddenItems(me.hiddenItems);
                            me.rowsIdsToBeExpaned = [];
                            me.refreshAllNodes(0, false);
                            return;
                        }
                        var oneItemAdded = false;
                        me.leftRowsIds = [];
                        me.rowsIdsToBeExpaned = [];
                        {
                            for (var i = 0; i < me.lookupSetObject.LookupItemFullNames.length; i++) {
                                var allRelNodes = me.lookupSetObject.LookupItemFullNames[i].split(' - ');
                                oneItemAdded = false;
                                for (var j = allRelNodes.length - 1; j >= 0; j--) {
                                    if (me.shouldShowItemAccordingToFilters(allRelNodes[j])) {
                                        var nodeStr = '';
                                        for (var k = 0; k <= j; k++) {
                                            if (nodeStr == '') {
                                                nodeStr = allRelNodes[k];
                                            }
                                            else {
                                                nodeStr = nodeStr + ' - ' + allRelNodes[k];
                                            }
                                            if (me.leftRowsIds.indexOf(nodeStr) < 0) {
                                                me.leftRowsIds.push(nodeStr);
                                                me.rowsIdsToBeExpaned.push(nodeStr);
                                                oneItemAdded = true;
                                            }
                                        }
                                    }
                                }
                                if (oneItemAdded) {
                                    me.rowsIdsToBeExpaned.pop();
                                }
                            }
                        }
                        if (me.leftRowsIds.length < 1) {
                            me.parentPanel.infoMessage(HP.HPTRIM.Messages.web_thereAreNoMatchingResults);
                        }
                        {
                            me.hiddenItems = [];
                            for (var i = 0; i < me.lookupSetObject.LookupItemFullNames.length; i++) {
                                var it = me.lookupSetObject.LookupItemFullNames[i];
                                if (me.leftRowsIds.indexOf(it) < 0) {
                                    me.hiddenItems.push(it);
                                }
                            }
                            me.treeNodesRequest.setHiddenItems(me.hiddenItems);
                        }
                        var newHidenTreeRows = [];
                        var currLevel = 0;
                        var levelNodes = $(this.treeId + ' > [data-level=' + currLevel.toString() + ']');
                        while (levelNodes.length > 0) {
                            for (var i = 0; i < levelNodes.length; i++) {
                                var ele = levelNodes[i];
                                var eleId = me.getId(ele.id);
                                if (me.leftRowsIds.indexOf(eleId) < 0) {
                                    var tmpId = "[id='" + ele.id + "']";
                                    newHidenTreeRows.push($(tmpId));
                                    $(tmpId).hide();
                                }
                            }
                            currLevel++;
                            levelNodes = $(this.treeId + ' > [data-level=' + currLevel.toString() + ']');
                        }
                        _.each(me.allHidenTreeRows, function (row) {
                            if (row[0] != undefined && row[0].id != undefined) {
                                if (me.leftRowsIds.indexOf(me.getId(row[0].id)) > -1) {
                                    row.show();
                                }
                                else {
                                    newHidenTreeRows.push(row);
                                }
                            }
                        });
                        me.allHidenTreeRows = newHidenTreeRows;
                        me.refreshAllNodes(0, false);
                    };
                    LookupItemTreePanel.prototype.getId = function (anId) {
                        if (anId != undefined && anId.length > 3 && anId.substr(anId.length - 3, 3) == '---') {
                            return anId.substr(0, anId.length - 3);
                        }
                        return anId;
                    };
                    LookupItemTreePanel.prototype.refreshAllNodes = function (startLevel, thisIsRepeatedCall) {
                        var me = this;
                        if (!thisIsRepeatedCall) {
                            me.rowsIdsPendingExpansion = [];
                        }
                        var currLevel = startLevel;
                        var levelNodes = $(this.treeId + ' > [data-level=' + currLevel.toString() + ']');
                        while (levelNodes.length > 0) {
                            for (var i = 0; i < levelNodes.length; i++) {
                                var ele = levelNodes[i];
                                var node = $(me.treeId).gtreetable('getNode', $(ele));
                                me.refreshOneNode(node, i, currLevel);
                            }
                            currLevel++;
                            levelNodes = $(this.treeId + ' > [data-level=' + currLevel.toString() + ']');
                        }
                        if (me.leftRowsIds.length > 0) {
                            var allRows = $(me.treeId)[0].childNodes;
                            for (var i = 1; i < allRows.length; i++) {
                                var nd = allRows[i];
                                var ndId = me.getId(nd.id);
                                if (me.leftRowsIds.indexOf(ndId) < 0) {
                                    var tmpId = "[id='" + nd.id + "']";
                                    $(tmpId).hide();
                                }
                            }
                        }
                        me.parentPanel.setChosenItemNames(me.getChosenItemNames());
                    };
                    LookupItemTreePanel.prototype.refreshOneNode = function (theNode, nodeIndex, currentLevel) {
                        var me = this;
                        if (theNode.name != null && theNode.name != undefined && theNode.name != "" && theNode.uri != "-1") {
                            var nodeDiv = theNode.$node[0];
                            nodeDiv.id = theNode.sourceObject.LookupItemFullDescription.Value;
                            if (me.lookupSetObject.SelectLowestLevelOnly) {
                                if (theNode.sourceObject.LookupItemHasChildItems.Value == true) {
                                    nodeDiv.id = nodeDiv.id + '---';
                                }
                            }
                            var nodeIconEle = nodeDiv.getElementsByClassName('node-icon-ce')[0];
                            if (nodeIconEle == undefined) {
                                nodeIconEle = nodeDiv.getElementsByClassName('node-icon-blank')[0];
                            }
                            var closeButton = nodeDiv.getElementsByClassName('panelclose-dk-grey')[0];
                            if (me.showCloseButton(nodeDiv.id)) {
                                closeButton.style.display = 'inline-block';
                            }
                            else {
                                closeButton.style.display = 'none';
                            }
                            if (theNode.sourceObject.LookupItemHasChildItems.Value) {
                                nodeIconEle.classList.remove('node-icon-blank');
                                nodeIconEle.classList.add('node-icon-ce');
                            }
                            else {
                                nodeIconEle.classList.add('node-icon-blank');
                                nodeIconEle.classList.remove('node-icon-ce');
                            }
                            if (currentLevel < 1) {
                                nodeDiv.style.borderBottom = '0.25px solid #eaeaea';
                            }
                            else {
                                nodeDiv.style.borderBottom = '';
                            }
                            if (me.nodeIsSelected(theNode)) {
                                theNode.isSelected(true);
                                nodeDiv.style.backgroundColor = '#d6f1eb';
                            }
                            else {
                                theNode.isSelected(false);
                                nodeDiv.style.backgroundColor = '';
                            }
                            var nodeNameEle = nodeDiv.getElementsByClassName('node-name')[0];
                            if (me.parentPanel.filteringString().trim().length > 0 && me.shouldShowItemAccordingToFilters(theNode.name)) {
                                nodeNameEle.style.backgroundColor = "#C8E1FE";
                            }
                            else {
                                nodeNameEle.style.backgroundColor = "";
                            }
                            if (me.parentPanel.filterStringJustChanged == true && me.parentPanel.filteringString().trim().length > 0 && !theNode.isExpanded()) {
                                if (me.rowsIdsToBeExpaned.indexOf(me.getId(nodeDiv.id)) > -1) {
                                    me.expandOneNode(theNode);
                                }
                            }
                            else {
                                if (me.expandTheirChildren.length > 0 && theNode.sourceObject && theNode.sourceObject.LookupItemParentItem && theNode.sourceObject.LookupItemHasChildItems.Value == true) {
                                    if (me.expandTheirChildren.indexOf(theNode.sourceObject.LookupItemParentItem.Uri) > -1) {
                                        me.expandTheirChildren.push(theNode.sourceObject.Uri);
                                        if (!theNode.isExpanded()) {
                                            me.expandOneNode(theNode);
                                        }
                                        return;
                                    }
                                }
                                if (!theNode.isExpanded()) {
                                    if ((me.initializingState != InitializationStates.completed) && me.hasSelectedChildren(theNode)) {
                                        me.expandOneNode(theNode);
                                    }
                                    else {
                                    }
                                }
                            }
                        }
                    };
                    LookupItemTreePanel.prototype.expandOneNode = function (aNode) {
                        var me = this;
                        if (me.rowsIdsPendingExpansion.indexOf(aNode.sourceObject.LookupItemFullDescription.Value) < 0 && !aNode.hasClickedForExpanding) {
                            aNode.hasClickedForExpanding = true;
                            me.rowsIdsPendingExpansion.push(aNode.sourceObject.LookupItemFullDescription.Value);
                            var childLevel = aNode.level + 1;
                            var levelNodes = $(this.treeId + ' > [data-level=' + childLevel.toString() + ']');
                            aNode.expand();
                            me.stopAutoFunction();
                            me.autoRepeatFunction = setInterval(function () { me.waitForCompletionOfExpansion(levelNodes.length, childLevel); }, 20);
                        }
                    };
                    LookupItemTreePanel.prototype.waitForCompletionOfExpansion = function (currChildrenCount, level) {
                        var me = this;
                        if (me.autoTimingOut > 0) {
                            me.autoTimingOut = me.autoTimingOut - 500;
                        }
                        else {
                            me.stopAutoFunction();
                        }
                        var levelNodes = $(this.treeId + ' > [data-level=' + level.toString() + ']');
                        if (levelNodes.length > currChildrenCount) {
                            me.stopAutoFunction();
                            me.refreshAllNodes(0, true);
                        }
                    };
                    LookupItemTreePanel.prototype.highlightItemInTextarea = function (itemText, cursorX) {
                        var me = this;
                        if (itemText != undefined) {
                            var checkStr = itemText.toString().trim().toLowerCase();
                            if (checkStr.length < 1) {
                                return;
                            }
                            var checkDirection = 0;
                            if (me.currHighlightedText == checkStr) {
                                var movePixel = me.currHighlightCursorX - cursorX;
                                if (movePixel < 40 && movePixel > -40) {
                                    return;
                                }
                                if (movePixel < 0) {
                                    checkDirection = 1;
                                }
                                else {
                                    checkDirection = -1;
                                }
                            }
                            var currText = this.parentPanel.currentText().toLowerCase();
                            var pos1 = -1;
                            if (checkDirection == 0) {
                                pos1 = currText.indexOf(checkStr);
                            }
                            else {
                                if (checkDirection > 0) {
                                    pos1 = currText.indexOf(checkStr, me.currHighlightedStart + 1);
                                }
                                else {
                                    pos1 = currText.lastIndexOf(checkStr, me.currHighlightedStart - 1);
                                }
                            }
                            me.currHighlightedStart = -1;
                            me.currHighlightedLength = 0;
                            me.currHighlightedText = '';
                            me.currHighlightCursorX = -1;
                            if (pos1 > -1) {
                                $('#text-lu').prop("selectionStart", pos1);
                                $('#text-lu').prop("selectionEnd", pos1 + checkStr.length);
                                me.currHighlightedStart = pos1;
                                me.currHighlightedLength = checkStr.length;
                                me.currHighlightedText = checkStr;
                                me.currHighlightCursorX = cursorX;
                                $('#text-lu').focus();
                            }
                        }
                    };
                    ;
                    LookupItemTreePanel.prototype.highlightFocusedRow = function (cursorPos, boxText, highlightOnly) {
                        var me = this;
                        if (!highlightOnly && me.focusRowId != '') {
                            var pos = boxText.indexOf(me.focusRowId);
                            if (pos > -1) {
                                if (pos <= cursorPos && (pos + me.focusRowId.length) >= cursorPos) {
                                    var str1 = boxText.substring(0, pos);
                                    var str2 = boxText.substr(pos + me.focusRowId.length);
                                    me.parentPanel.currentText(str1 + str2);
                                    me.focusRowId = '';
                                    return;
                                }
                            }
                        }
                        var maxLen = 0;
                        {
                            for (var i = 0; i < me.lookupSetObject.LookupItemFullNames.length; i++) {
                                if (me.lookupSetObject.LookupItemFullNames[i].length > maxLen) {
                                    maxLen = me.lookupSetObject.LookupItemFullNames[i].length;
                                }
                            }
                        }
                        me.focusRowId = '';
                        {
                            for (var i = 0; i < me.lookupSetObject.LookupItemFullNames.length; i++) {
                                var checkThis = me.lookupSetObject.LookupItemFullNames[i];
                                var pos = boxText.indexOf(checkThis);
                                if (pos > -1) {
                                    if (pos < cursorPos) {
                                        if (pos + checkThis.length <= cursorPos) {
                                            while (pos > -1) {
                                                pos = boxText.indexOf(checkThis, pos + 1);
                                                if (pos > -1) {
                                                    if (pos < cursorPos) {
                                                        if (pos + checkThis.length > cursorPos) {
                                                            me.focusRowId = checkThis;
                                                            pos = -1;
                                                        }
                                                    }
                                                    else {
                                                        pos = -1;
                                                    }
                                                }
                                            }
                                            if (me.focusRowId != '') {
                                                break;
                                            }
                                        }
                                        else {
                                            me.focusRowId = checkThis;
                                            break;
                                        }
                                    }
                                }
                            }
                        }
                        if (me.focusRowId != '') {
                            var startPos = cursorPos - me.focusRowId.length;
                            if (startPos < 0) {
                                startPos = 0;
                            }
                            var pos = boxText.indexOf(me.focusRowId, startPos);
                            if (pos > -1) {
                                var inputBox = document.getElementById("text-lu");
                                $('#text-lu').prop("selectionStart", pos);
                                $('#text-lu').prop("selectionEnd", pos + me.focusRowId.length);
                                $('#text-lu').focus();
                                me.refreshAllNodes(0, false);
                            }
                        }
                    };
                    LookupItemTreePanel.prototype.deSelectThis = function (node, mouseEvent) {
                        this.onNodeClicked(node, mouseEvent);
                    };
                    LookupItemTreePanel.prototype.onNodeClicked = function (node, mouseEvent) {
                        var me = this;
                        me.parentPanel.filterStringJustChanged = false;
                        var nodeSelected = me.nodeSelected();
                        this.expandTheirChildren = [];
                        var thisNodeIsSelected = me.nodeIsSelected(node[0].id);
                        if (nodeSelected != null && nodeSelected != undefined) {
                            if (mouseEvent.target != undefined && mouseEvent.target.id == 'closeButton') {
                                if (thisNodeIsSelected) {
                                    me.changeSelectedItems(nodeSelected);
                                    me.refreshAllNodes(0, false);
                                }
                                return;
                            }
                            var nodeIconEle = node[0].getElementsByClassName('node-icon-ce')[0];
                            if (nodeIconEle != undefined && mouseEvent.offsetX > (nodeIconEle.offsetLeft - 20) && mouseEvent.offsetX < (nodeIconEle.offsetLeft + 10)) {
                                if (nodeSelected.isExpanded()) {
                                    nodeSelected.collapse();
                                    nodeSelected.hasClickedForExpanding = false;
                                }
                                else {
                                    if (me.prevClickedNodeUri != 0 && me.prevClickedNodeUri == nodeSelected.uri) {
                                        me.expandTheirChildren = [nodeSelected.sourceObject.Uri];
                                    }
                                    else {
                                        if (me.parentPanel.filteringString().trim().length > 0) {
                                            me.expandTheirChildren = [nodeSelected.sourceObject.Uri];
                                        }
                                        else {
                                            clearTimeout(me.autoClearPrevNodefunction);
                                            me.autoClearPrevNodefunction = setTimeout(function () { me.resetPrevClickedNode(); }, 4000);
                                            me.prevClickedNodeUri = nodeSelected.uri;
                                        }
                                    }
                                    me.rowsIdsPendingExpansion = [];
                                    me.expandOneNode(nodeSelected);
                                    me.refreshAllNodes(0, true);
                                    return;
                                }
                            }
                            else {
                                if (me.lookupSetObject.SelectLowestLevelOnly == true && mouseEvent.currentTarget.id.substr(mouseEvent.currentTarget.id.length - 3, 3) == '---') {
                                    return;
                                }
                                else {
                                    if (!thisNodeIsSelected) {
                                        me.changeSelectedItems(nodeSelected);
                                    }
                                }
                            }
                            me.refreshAllNodes(0, false);
                        }
                    };
                    LookupItemTreePanel.prototype.getCurrentLevelParentItemsOfChosenItems = function (level) {
                        var me = this;
                        var retVal = [];
                        if (level < 0 || me.selectedItems().length < 1) {
                            return retVal;
                        }
                        _.each(me.selectedItems(), function (selItem) {
                            var levelNames = selItem.split(" - ");
                            if (levelNames.length < (level + 2)) {
                                return true;
                            }
                            else {
                                retVal.push(levelNames[level]);
                            }
                        });
                        return retVal;
                    };
                    LookupItemTreePanel.prototype.hasSelectedChildren = function (aNode) {
                        var me = this;
                        var retVal = false;
                        var currentLevelRelatedParents = this.getCurrentLevelParentItemsOfChosenItems(aNode.level);
                        _.each(currentLevelRelatedParents, function (aParent) {
                            var valueIsSame = false;
                            if (me.treeNodesRequest.lookupSetDisplayStyle == HPTRIM.LookupItemFieldStyle.ShortThenLongValue || me.treeNodesRequest.lookupSetDisplayStyle.toString() == HPTRIM.LookupItemFieldStyle[HPTRIM.LookupItemFieldStyle.ShortThenLongValue]) {
                                valueIsSame = (aParent == aNode.sourceObject.LookupItemAbbreviation.Value + ': ' + aNode.sourceObject.LookupItemName.Value);
                            }
                            else {
                                if (me.treeNodesRequest.lookupSetDisplayStyle == HPTRIM.LookupItemFieldStyle.LongValueOnly || me.treeNodesRequest.lookupSetDisplayStyle.toString() == HPTRIM.LookupItemFieldStyle[HPTRIM.LookupItemFieldStyle.LongValueOnly]) {
                                    valueIsSame = (aParent == aNode.sourceObject.LookupItemName.Value);
                                }
                                else {
                                    valueIsSame = (aParent == aNode.sourceObject.LookupItemAbbreviation.Value);
                                }
                            }
                            if (valueIsSame) {
                                retVal = true;
                                return false;
                            }
                        });
                        return retVal;
                    };
                    LookupItemTreePanel.prototype.removedAnItemFromSelectedItems = function (anItem) {
                        var me = this;
                        var afterRemoveArray = me.selectedItems();
                        for (var i = afterRemoveArray.length - 1; i >= 0; i--) {
                            if (afterRemoveArray[i] == me.getItemValue(anItem)) {
                                afterRemoveArray.splice(i, 1);
                                me.selectedItems(afterRemoveArray);
                                me.updateSaveRequired();
                                return;
                            }
                        }
                    };
                    LookupItemTreePanel.prototype.setSelectedItemsAndText = function (seletedItems, setText) {
                        if (setText == undefined || setText == null) {
                            setText = '';
                        }
                        this.parentPanel.currentText(setText);
                        this.originalText = setText;
                        var tempArray = [];
                        _.each(seletedItems, function (selItem) {
                            if (selItem.Name != undefined) {
                                tempArray.push(selItem.Name);
                            }
                            else {
                                tempArray.push(selItem);
                            }
                        });
                        this.selectedItems(tempArray);
                        this.originalSelectedItems = this.selectedItems().slice();
                        this.saveRequired(false);
                    };
                    LookupItemTreePanel.prototype.getSelectedItems = function () {
                        return this.selectedItems();
                    };
                    LookupItemTreePanel.prototype.getChosenItemNames = function () {
                        if (this.returnTextOnly) {
                            return this.parentPanel.currentText();
                        }
                        else {
                            var selValueStr = '';
                            if (this.returnTextOnly) {
                                selValueStr = this.selectedItems()[0];
                            }
                            else {
                                _.each(this.selectedItems(), function (selItem) {
                                    if (selValueStr.length < 1) {
                                        selValueStr = selItem;
                                    }
                                    else {
                                        selValueStr = selValueStr + ', ' + selItem;
                                    }
                                });
                            }
                            return selValueStr;
                        }
                    };
                    LookupItemTreePanel.prototype.nodeIsSelected = function (anode) {
                        var me = this;
                        var returnValue = false;
                        var checkString = '';
                        var itemVal = me.getItemValue(anode);
                        if (anode.sourceObject != undefined && itemVal != undefined) {
                            checkString = itemVal;
                        }
                        else {
                            checkString = anode;
                        }
                        if (checkString.substr(checkString.length - 3, 3) == '---') {
                            checkString = checkString.substring(0, checkString.length - 3);
                        }
                        checkString = checkString.trim();
                        _.each(me.selectedItems(), function (selItem) {
                            if (selItem.toString().toLowerCase() == checkString.toLowerCase()) {
                                returnValue = true;
                                return false;
                            }
                        });
                        return returnValue;
                    };
                    LookupItemTreePanel.prototype.resetPrevClickedNode = function () {
                        this.prevClickedNodeUri = 0;
                    };
                    LookupItemTreePanel.prototype.stopAutoFunction = function () {
                        var me = this;
                        clearInterval(me.autoRepeatFunction);
                        me.autoRepeatFunction = null;
                        me.autoTimingOut = 10000;
                    };
                    LookupItemTreePanel.prototype.makeIconsTypes = function () {
                        var icons = {};
                        var iconsTypes = {};
                        this.trimClient.getEnumDefinition('Icons').done(function (trimIcons) {
                            icons = trimIcons;
                        });
                        _.each(icons, function (iconObject) {
                            var iconName = iconObject.Icon.toLocaleLowerCase();
                            iconsTypes[iconName] = iconName + "_x16";
                            ;
                        });
                        return iconsTypes;
                    };
                    return LookupItemTreePanel;
                }(HP.HPTRIM.Framework.Components.Layouts.Panel));
                Panels.LookupItemTreePanel = LookupItemTreePanel;
            })(Panels = App.Panels || (App.Panels = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Panels;
            (function (Panels) {
                var ItemKiwiSelectPanel = (function (_super) {
                    __extends(ItemKiwiSelectPanel, _super);
                    function ItemKiwiSelectPanel(trimClient, title, trimType, query, filter, sort, purpose, itempicker) {
                        var _this = this;
                        _super.call(this, "templates/ItemList/ItemKiwiSelectPanel", true);
                        this.iconProperty = ko.observable(null);
                        this.propertiesAndFieldsDefintion = ko.observableArray([]);
                        this.searchingString = ko.observable(HP.HPTRIM.Messages.web_retrievingResults + "...");
                        this.showSearchTitle = ko.observable(HP.HPTRIM.Messages.web_searchBuilder);
                        this.itemTitle = ko.observable("");
                        this.searchFieldClass = ko.observable("");
                        this.searchField = ko.observable("");
                        this.onSearchEnter = function () { };
                        this.onSearchEscape = function () { };
                        this.executeSearch = function () { };
                        this.okHandler = function () { };
                        this.cancelHandler = function () { };
                        this.selectedItem = ko.observable(null);
                        this.selectedItems = ko.observableArray();
                        this.selectedItemList = [];
                        this.chosenItemNames = ko.observable("");
                        var me = this;
                        this.title = ko.observable(title);
                        this.searching = ko.observable(false);
                        this.currentType = trimType;
                        this.searchField(query);
                        this.additionalQueryParams = "";
                        this.activeFilter = filter;
                        this.activeSort = sort;
                        this.activePurpose = purpose;
                        this.defaultSelectedValue = "";
                        this.chosenItemNames('');
                        this.labelForSeletedItems = HP.HPTRIM.Messages.web_itemsSelected;
                        var itemTitle = HP.HPTRIM.Messages.web_itemTitle;
                        this.itemTitle = ko.observable(HP.HPTRIM.Utils.String.format(itemTitle, [title]));
                        this.searchingString = ko.observable(HP.HPTRIM.Messages.web_retrievingResults + "...");
                        this.noResults = ko.observable(false);
                        var msg = HP.HPTRIM.Messages.web_noMathingTopics;
                        var noMatchFound = HP.HPTRIM.Utils.String.format(msg, [trimType.name]);
                        this.noResultsDescription = ko.observable(noMatchFound);
                        msg = HP.HPTRIM.Messages.web_noMatchTopicsFound;
                        noMatchFound = HP.HPTRIM.Utils.String.format(msg, [trimType.name]);
                        this.noMatchFound = ko.observable(noMatchFound);
                        this.isLoading = ko.observable(false);
                        this.showSelected = ko.observable(true);
                        this.selectAllCheckbox = ko.observable(false);
                        this.selections = ko.observableArray([]);
                        this.selectedInfoObjects = ko.observableArray([]);
                        this.selectedItemList = [];
                        this.itempicker = itempicker();
                        this.trimClient = trimClient;
                        var overlayAdditionalPanelClass = 'as-spa-overlay-content-additional';
                        var toggleVisible = function (event) {
                            var overlayAdditionalPanelClassSelector = $('.' + overlayAdditionalPanelClass);
                            overlayAdditionalPanelClassSelector.toggleClass('active');
                            $('#overlayPropOvrlyMinMax').toggleClass('doublechevron_right').toggleClass('doublechevron_left');
                            $('#' + me.id + ' .as-spa-content-additional').toggleClass('active');
                            if ($('#' + me.id + ' .as-spa-content-additional').hasClass('active')) {
                                $("#" + me.id + " .as-spa-content-primary").css('width', "15%");
                                $("#" + me.id + " .as-spa-content-additional").css('width', "25%");
                                $("#" + me.id + " .as-spa-content-main").css('width', "60%");
                            }
                            else {
                                $("#" + me.id + " .as-spa-content-primary").css('width', "15%");
                                $("#" + me.id + " .as-spa-content-main").css('width', "85%");
                                $("#" + me.id + " .as-spa-content-additional").css('width', "");
                            }
                        };
                        this.objectPropertiesPanel = new App.Panels.Plugins.ObjectPropertiesPanel(trimClient, toggleVisible, overlayAdditionalPanelClass, "templates/Widgets/OverlayPropertiesPanel");
                        var currentSelections = [];
                        me.selections([]);
                        this.selectItem = function (item, event) {
                            var me = _this;
                            var e = event;
                            if (item) {
                                _this.selectedItem(item);
                                var uri = item.Fields['Uri'];
                                var nameString = "";
                                var icon = "";
                                if (item.Fields['NameString'] != "") {
                                    nameString = item.Fields['NameString'];
                                }
                                if (item.Fields['Icon'] != "") {
                                    icon = item.Fields['Icon'];
                                }
                                var baseObject_1 = new HPTRIM.TrimBaseObject(me.currentType, uri, nameString, nameString);
                                if (me.itempicker.multiSelect == false) {
                                    currentSelections = [];
                                    me.selectedItemList = [];
                                    me.selections([]);
                                }
                                HPTRIM.Utils.TrimHelper.loadObject(trimClient, baseObject_1, function (loadedObject) {
                                    me.selectedItemList = _.filter(me.selectedItemList, function (bob) {
                                        if (bob.Uri == baseObject_1.Uri) {
                                            return false;
                                        }
                                        return true;
                                    });
                                    me.selectedItemList.push(loadedObject);
                                    if (!me.selections() || me.selections.indexOf(String(uri)) == -1) {
                                        currentSelections.push(String(uri));
                                        me.selections(currentSelections);
                                        me.selections.valueHasMutated();
                                        me.selectedItems.push(loadedObject);
                                    }
                                    else {
                                        if (me.itempicker.multiSelect == true) {
                                            if (!e) {
                                                return;
                                            }
                                            var targetElement = e.target;
                                            if (targetElement['className'] == "" || targetElement['className'] == undefined) {
                                                return;
                                            }
                                            if (me.selections.indexOf(String(uri)) > -1) {
                                                currentSelections = _.filter(currentSelections, function (selection) {
                                                    if (selection == uri) {
                                                        return false;
                                                    }
                                                    return true;
                                                });
                                                me.selections(currentSelections);
                                                me.selectedItemList = _.filter(me.selectedItemList, function (bob) {
                                                    if (bob.Uri == baseObject_1.Uri) {
                                                        return false;
                                                    }
                                                    return true;
                                                });
                                            }
                                        }
                                    }
                                });
                                _this.setChosenItemNames(item.Fields.NameString);
                            }
                        };
                        this.selections.subscribe(function (newValue) {
                        });
                        var requestData = this.itempicker.getRequestData(undefined, query);
                        query = this.appendAdditionalQueryParms(requestData["q"], requestData["filter"]);
                        var searchQuery = {
                            baseObjectType: trimType,
                            filter: filter,
                            sortBy: sort,
                            searchString: query
                        };
                        var pagingSearchCallback = function () {
                            me.searching(true);
                            me.itemScrollListPanel.getItemList().items([]);
                            me.objectPropertiesPanel.visible(false);
                        };
                        var pagerResponseCallback = function () {
                            me.searching(false);
                            me.objectPropertiesPanel.visible(false);
                            var items = _this.itemScrollListPanel.getItemList().items();
                            var newitem = _.filter(items, function (item) {
                                _this.selections([]);
                                if (item.Fields.Uri == _this.defaultSelectedValue.Uri) {
                                    _this.selectItem(item);
                                }
                                var selectedItems = _this.itempicker.selectedItems();
                                if (selectedItems.length > 0) {
                                    _.each(selectedItems, function (anItem) {
                                        if (item.Fields.Uri == anItem.Uri) {
                                            me.selectItem(item);
                                        }
                                    });
                                }
                                return false;
                            });
                        };
                        this.objectPropertiesPanel.visible(false);
                        this.itemScrollListPanel = new HP.HPTRIM.App.Panels.ItemList.TrimScrollspyItemListPanel(trimClient, me, title, searchQuery, pagingSearchCallback, pagerResponseCallback, this.id);
                        this.itemScrollListPanel.getTrimItemListLoader().properties = HPTRIM.Utils.TrimHelper.getKwikSelectPropertyNames(trimType);
                        this.itemScrollListPanel.getItemList().templateName('/templates/ItemList/KwikSelectListCard');
                        this.searching(true);
                        this.itemScrollListPanel.getItemList().items([]);
                        this.itemScrollListPanel.updateQuery(searchQuery, function (result) {
                            if (result.PropertiesAndFields) {
                                _this.selections([]);
                                var props = _.filter(result.PropertiesAndFields[trimType.name], function (prop) {
                                    return (_.contains(HPTRIM.Utils.TrimHelper.getKwikSelectPropertyNames(trimType), prop.Id));
                                });
                                _this.propertiesAndFieldsDefintion(props);
                                _this.defaultSelectedValue = _this.itempicker.getValue();
                                if (_this.defaultSelectedValue) {
                                    var newitem = _.filter(result.Items, function (item) {
                                        if (item.Fields.Uri == _this.defaultSelectedValue.Uri) {
                                            _this.selectItem(item);
                                        }
                                        var selectedItems = _this.itempicker.selectedItems();
                                        if (selectedItems.length > 0) {
                                            _.each(selectedItems, function (anItem) {
                                                if (item.Fields.Uri == anItem.Uri) {
                                                    me.selectItem(item);
                                                }
                                            });
                                        }
                                        return false;
                                    });
                                }
                            }
                        }, true);
                        this.handleMinimiseClick = function (uri, parents) {
                            var itemToMinimise;
                            if (parents.length > 0) {
                                var currentItems = (me.itemScrollListPanel.itemList.items());
                                _.each(parents, function (uri) {
                                    var parentObject = _.find(currentItems, function (item) {
                                        return item.Fields.Uri == uri;
                                    });
                                    currentItems = parentObject.subordinateList.items();
                                });
                                itemToMinimise = _.find(currentItems, function (item) {
                                    return item.Fields.Uri == uri;
                                });
                            }
                            else {
                                itemToMinimise = _.find(me.itemScrollListPanel.itemList.items(), function (item) {
                                    return item.Fields.Uri == uri;
                                });
                            }
                            if (itemToMinimise) {
                                itemToMinimise.subordinateList.items([]);
                                itemToMinimise.Expanded(false);
                                itemToMinimise.Expanding(false);
                            }
                        };
                        this.handleExpandClick = function (uri, parents) {
                            var itemToExpand;
                            if (parents.length > 0) {
                                var currentItems = (me.itemScrollListPanel.itemList.items());
                                _.each(parents, function (uri) {
                                    var parentObject = _.find(currentItems, function (item) {
                                        return item.Fields.Uri == uri;
                                    });
                                    currentItems = parentObject.subordinateList.items();
                                });
                                itemToExpand = _.find(currentItems, function (item) {
                                    return item.Fields.Uri == uri;
                                });
                            }
                            else {
                                itemToExpand = _.find(me.itemScrollListPanel.itemList.items(), function (item) {
                                    return item.Fields.Uri == uri;
                                });
                            }
                            itemToExpand.Expanding(true);
                            var currentBaseObject = new HPTRIM.TrimBaseObject(me.currentType, uri, uri);
                            var requestData = _this.itempicker.getRequestData(currentBaseObject);
                            query = _this.appendAdditionalQueryParms(requestData["q"], requestData["filter"]);
                            var searchQueryObject = {
                                baseObjectType: trimType,
                                filter: filter,
                                sortBy: sort,
                                searchString: query
                            };
                            var trimItemList = new HP.HPTRIM.App.Panels.ItemList.TrimItemListPanel(me.trimClient, me, searchQueryObject);
                            trimItemList.getTrimItemListLoader().properties = HPTRIM.Utils.TrimHelper.getKwikSelectPropertyNames(trimType);
                            trimItemList.refresh(function (result) {
                                var retrievedItems = trimItemList.itemList.items();
                                var retrievedItemParents = [];
                                if (parents) {
                                    _.each(parents, function (uri) {
                                        retrievedItemParents.push(uri);
                                    });
                                }
                                retrievedItemParents.push(uri);
                                _.each(retrievedItems, function (item) {
                                    item.ParentUris = retrievedItemParents;
                                });
                                if (retrievedItemParents.length >= 4) {
                                    _.each(retrievedItems, function (item) {
                                        var nameString = itemToExpand.Fields["namString"];
                                        var clauseCaption = HPTRIM.Messages.web_containedRecords;
                                        var caption = HPTRIM.Messages.web_moreItemShowAll + " " + clauseCaption + " " + nameString;
                                        item.moreItemsCaption(caption);
                                    });
                                }
                                if (itemToExpand) {
                                    itemToExpand.Expanding(false);
                                    if (retrievedItems.length > 0) {
                                        itemToExpand.subordinateList = { items: ko.observableArray(retrievedItems) };
                                        itemToExpand.Expanded(true);
                                        var subordinateUris = HP.HPTRIM.Utils.TrimHelper.pluckUrisFromItemsArray(retrievedItems);
                                    }
                                    else {
                                        itemToExpand.Fields.PossiblyHasSubordinates = false;
                                        itemToExpand.NoChildren(true);
                                    }
                                }
                                if (result.HasMoreItems === true) {
                                    itemToExpand.subordinateListHasMoreItems(true);
                                    var nameString = itemToExpand.Fields["nameString"];
                                    var clauseCaption = HPTRIM.Messages.web_containedRecords;
                                    var captionStart = HPTRIM.Messages.web_moreItemsToShowNoCount;
                                    var totalResults = result['TotalResults'];
                                    if (totalResults) {
                                        var remainingResults = totalResults - retrievedItems.length;
                                    }
                                    if (remainingResults && remainingResults > 0) {
                                        captionStart = '+' + remainingResults + ' ' + HPTRIM.Messages.web_moreItemsToShow;
                                    }
                                    var caption = captionStart + ": " + HPTRIM.Messages.web_moreItemShowAll + " " + clauseCaption + " " + nameString;
                                    itemToExpand.moreItemsCaption(caption);
                                }
                            });
                        };
                        this.handleMoreItemsClick = function (uri) {
                        };
                        me.onSearchEnter = function () {
                            me.doSearch(trimType, me.searchField());
                        };
                        me.executeSearch = function () {
                            me.doSearch(trimType, me.searchField());
                        };
                        this.searchFieldClass = ko.observable('');
                        var isIEBrowser = window['ActiveXObject'] !== undefined ? true : false;
                        if (isIEBrowser) {
                            this.searchFieldClass("clearable");
                        }
                        else {
                            this.searchFieldClass("clearable x");
                            $(document).on('mousemove', '.x', function (mouseEvent) {
                                if (this.offsetWidth - 18 < mouseEvent.clientX - this.getBoundingClientRect().left) {
                                    $(this).addClass('onX');
                                }
                                else {
                                    $(this).removeClass('onX');
                                }
                            });
                            $(document).on('click', '.onX', function () {
                                $(this).val('').change();
                            });
                            $(document).on('touchstart', '.onX, .x', function (touchStartEvent) {
                                var touchXVal = 99999;
                                if (touchStartEvent.originalEvent &&
                                    touchStartEvent.originalEvent.changedTouches &&
                                    touchStartEvent.originalEvent.changedTouches[0]) {
                                    touchXVal = touchStartEvent.originalEvent.changedTouches[0].clientX;
                                }
                                if ((this.offsetWidth - 24) < (touchXVal - this.getBoundingClientRect().left - 8)) {
                                    touchStartEvent.preventDefault();
                                    $(this).val('').change();
                                }
                            });
                        }
                    }
                    ItemKiwiSelectPanel.prototype.getRequiredProperties = function () {
                        HPTRIM.Utils.TrimHelper.getSearchPreviewPropertyNames(this.currentType);
                    };
                    ItemKiwiSelectPanel.prototype.hasIcon = function (item) {
                        return false;
                    };
                    ItemKiwiSelectPanel.prototype.getIconClass = function (item) {
                        return "";
                    };
                    ItemKiwiSelectPanel.prototype.doSearch = function (trimType, query, filter, sort, purpose) {
                        var _this = this;
                        if (query) {
                            var requestData = this.itempicker.getRequestData(undefined, query);
                            query = this.appendAdditionalQueryParms(requestData["q"], requestData["filter"]);
                            var searchQuery = {
                                baseObjectType: trimType,
                                filter: filter ? filter : this.activeFilter,
                                sortBy: sort ? sort : this.activeSort,
                                searchString: query
                            };
                            this.searching(true);
                            this.itemScrollListPanel.getItemList().items([]);
                            this.itemScrollListPanel.updateQuery(searchQuery, function (result) {
                                if (result.PropertiesAndFields) {
                                    _this.selections([]);
                                    var props = _.filter(result.PropertiesAndFields[trimType.name], function (prop) {
                                        return (_.contains(HPTRIM.Utils.TrimHelper.getKwikSelectPropertyNames(trimType), prop.Id));
                                    });
                                    _this.propertiesAndFieldsDefintion(props);
                                    if (_this.defaultSelectedValue) {
                                        var newitem = _.filter(result.Items, function (item) {
                                            if (item.Fields.Uri == _this.defaultSelectedValue.Uri) {
                                                _this.selectItem(item);
                                            }
                                            var selectedItems = _this.itempicker.selectedItems();
                                            if (selectedItems.length > 1) {
                                                _.each(selectedItems, function (anItem) {
                                                    if (item.Fields.Uri == anItem.Uri) {
                                                        _this.selectItem(item);
                                                    }
                                                });
                                            }
                                            return false;
                                        });
                                    }
                                }
                            });
                        }
                    };
                    ItemKiwiSelectPanel.prototype.renderData = function (property, item) {
                        if (property.PFFormat == "Boolean") {
                            if (item.Fields[property.Id] === true || item.Fields[property.Id].Value === true) {
                                return property.Property.TrueString;
                            }
                            else {
                                return property.Property.FalseString;
                            }
                        }
                        if (item.Fields[property.Id]) {
                            if (item.Fields[property.Id].StringValue || item.Fields[property.Id].StringValue === "") {
                                return item.Fields[property.Id].StringValue;
                            }
                            else if (item.Fields[property.Id].Value || item.Fields[property.Id].Value === "") {
                                return item.Fields[property.Id].Value;
                            }
                            else {
                                return item.Fields[property.Id];
                            }
                        }
                        return "";
                    };
                    ItemKiwiSelectPanel.prototype.isIconProperty = function (property) {
                        if (property.Id == "RecordRecordType") {
                            return true;
                        }
                        return false;
                    };
                    ItemKiwiSelectPanel.prototype.appendAdditionalQueryParms = function (query, filter) {
                        if (filter) {
                            return query + " " + HPTRIM.Messages.core_and + " " + filter;
                        }
                        return query;
                    };
                    ItemKiwiSelectPanel.prototype.setChosenItemNames = function (chosenNames) {
                        this.chosenItemNames(chosenNames);
                    };
                    return ItemKiwiSelectPanel;
                }(HP.HPTRIM.Framework.Components.Layouts.Panel));
                Panels.ItemKiwiSelectPanel = ItemKiwiSelectPanel;
            })(Panels = App.Panels || (App.Panels = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Panels;
            (function (Panels) {
                "use strict";
                var MultipleFilesUploadStatus;
                (function (MultipleFilesUploadStatus) {
                    MultipleFilesUploadStatus[MultipleFilesUploadStatus["Running"] = 0] = "Running";
                    MultipleFilesUploadStatus[MultipleFilesUploadStatus["Ready"] = 1] = "Ready";
                    MultipleFilesUploadStatus[MultipleFilesUploadStatus["Finished"] = 2] = "Finished";
                })(MultipleFilesUploadStatus || (MultipleFilesUploadStatus = {}));
                var MultiFileUploadPanel = (function (_super) {
                    __extends(MultiFileUploadPanel, _super);
                    function MultiFileUploadPanel(trimClient, fileUploader, cssClass) {
                        var _this = this;
                        _super.call(this, 'templates/Framework/FileUpload/FileUploadManager', true);
                        this.panelTitle = ko.observable("");
                        this.cancel = function () { };
                        this.close = function () { };
                        this.status = MultipleFilesUploadStatus.Ready;
                        this.createdRecords = [];
                        this.showRecords = function (searchString) { };
                        this.newRecordInModal = function () { };
                        this.statusMessage = ko.observable('');
                        this.afterDone = function () { };
                        this.cssClass(cssClass);
                        this.trimClient = trimClient;
                        this.fileUploader = fileUploader;
                        this.fileUploader.templateName("templates/Widgets/TRIMMultiFileUpload");
                        this.fileUploader.onPostXhrLoad = this.onFilesUploaded;
                        this.configureRecordTypeField();
                        var displayDataEntry = {
                            Caption: HP.HPTRIM.Messages.web_suppressDataEntryForm,
                            Format: "Boolean",
                            Name: "",
                            Value: ko.observable(false),
                        };
                        this.chkDisplayDataEntry = new HPTRIM.Form.BooleanDecorator(displayDataEntry);
                        this.chkDisplayDataEntry.Value(true);
                        ko.postbox.subscribe("RECORD_CREATED", function (recUri) {
                            _this.createdRecords.push(recUri);
                        });
                        ko.postbox.subscribe("NEW_RECORD_IN_MODAL_CANCEL", function () {
                            _this.status = MultipleFilesUploadStatus.Ready;
                        });
                        this.btnCheckInDocuments = new ActionManager.Button({
                            id: "processDocuments",
                            caption: HP.HPTRIM.Messages.web_checkIn,
                            enabled: ko.observable(true),
                            visible: ko.observable(true),
                            icon: ko.observable(""),
                            active: ko.observable(true),
                            actionHandler: _.bind(this.processDocuments, this)
                        });
                        this.btnCheckInDocuments.setAsPrimary();
                        this.btnCancel = new ActionManager.Button({
                            id: "cancelMultiFileUpload",
                            caption: HP.HPTRIM.Messages.web_dp_cancelText,
                            enabled: ko.observable(true),
                            visible: ko.observable(true),
                            icon: ko.observable(""),
                            active: ko.observable(true),
                            actionHandler: function () {
                                _this.cancel();
                                _this.m_queue.clear();
                                _this.status = MultipleFilesUploadStatus.Ready;
                            }
                        });
                    }
                    MultiFileUploadPanel.prototype.onFilesUploaded = function () { };
                    MultiFileUploadPanel.prototype.removeFile = function () {
                    };
                    MultiFileUploadPanel.prototype.done = function () {
                        var uris = this.createdRecords.join(',');
                        var searchString = "uri:" + uris;
                        this.showRecords(searchString);
                        this.close();
                        this.afterDone();
                        this.cleanUp();
                    };
                    MultiFileUploadPanel.prototype.cleanUp = function () {
                        this.statusMessage('');
                        this.createdRecords = [];
                        this.fileUploader.files([]);
                        this.status = MultipleFilesUploadStatus.Ready;
                    };
                    MultiFileUploadPanel.prototype.addRecord = function (uri, title, number) {
                        this.createdRecords.push(uri);
                    };
                    MultiFileUploadPanel.prototype.processDocuments = function () {
                        var _this = this;
                        if (this.status == MultipleFilesUploadStatus.Running) {
                            return;
                        }
                        if (this.status == MultipleFilesUploadStatus.Ready) {
                            this.status = MultipleFilesUploadStatus.Running;
                        }
                        if (this.m_queue) {
                            if (!this.m_queue.isDone()) {
                                this.m_queue.run();
                                return;
                            }
                        }
                        var documents = this.fileUploader.uploadedFiles();
                        var tasks = [];
                        var presetRty = this.rtyField.getValue();
                        var useThisRecordType = presetRty;
                        var suppressDataEntryForm = this.chkDisplayDataEntry.Value();
                        if (suppressDataEntryForm) {
                            if (!useThisRecordType) {
                                this.rtyField.error(HP.HPTRIM.Messages.rec_selectRTY);
                                this.status = MultipleFilesUploadStatus.Ready;
                                return;
                            }
                        }
                        else {
                            this.rtyField.error("");
                        }
                        var index = 0;
                        _.each(documents, function (file) {
                            var fileName = file.OriginalFileName;
                            if (!fileName) {
                                return;
                            }
                            var task = function (callback) {
                                var fileName = file.OriginalFileName.substring(1, file.OriginalFileName.length - 1);
                                if (HP.HPTRIM.Utils.DomHelper.isIEBeforeEdge()) {
                                    var parts = fileName.split('\\');
                                    fileName = _.last(parts);
                                }
                                var title = fileName;
                                if (suppressDataEntryForm == true) {
                                    if (!useThisRecordType) {
                                        return;
                                    }
                                    var hasExtension = fileName.lastIndexOf(".");
                                    if (hasExtension > 0) {
                                        title = fileName.substr(0, hasExtension);
                                    }
                                    var recordPayload = {
                                        RecordRecordType: useThisRecordType.Uri,
                                        RecordFilePath: file.UploadedFileName,
                                        RecordTitle: title
                                    };
                                    var dispatcher = new HP.HPTRIM.TrimObjectSave(_this.trimClient, HPTRIM.BaseObjectTypes.Record);
                                    var promise = dispatcher.doRequestEx(recordPayload);
                                    promise.done(function (response) {
                                        var record = response.Results[0];
                                        _this.createdRecords.push(record.Uri);
                                        callback();
                                    }).fail(function (response) {
                                        _this.newRecordInModal(callback, file, useThisRecordType);
                                        if (_this.m_queue.isDone()) {
                                            _this.done();
                                        }
                                    });
                                }
                                else {
                                    _this.newRecordInModal(callback, file, useThisRecordType);
                                }
                                var status = HPTRIM.Utils.String.format(HP.HPTRIM.Messages.core_processingFile, [fileName]);
                                _this.statusMessage(status);
                            };
                            if (index == documents.length - 1) {
                                task.callback = function () {
                                    _this.done();
                                };
                            }
                            tasks.push(task);
                            index++;
                        });
                        this.m_queue = new Queue(function (task, callback) {
                            task(function () {
                                if (task.callback) {
                                    task.callback();
                                }
                                callback();
                            });
                        });
                        for (var i = 0; i < tasks.length; i++) {
                            this.m_queue.append(tasks[i]);
                        }
                    };
                    MultiFileUploadPanel.prototype.configureRecordTypeField = function () {
                        var defaultRecType = this.trimClient.getFileDropDefaultRecordType();
                        this.rtyField = new HP.HPTRIM.Field.RecordTypePicker(this.trimClient, "Default " + HP.HPTRIM.Messages.web_recordType, false, false);
                        this.rtyField.setPurpose(3);
                        if (defaultRecType != null) {
                            this.rtyField.enableClickToExpand = true;
                            this.rtyField.setValue(defaultRecType);
                            this.rtyField.enable(true);
                            this.rtyField.purpose = 4;
                        }
                        else {
                            this.rtyField.enableClickToExpand = true;
                            this.rtyField.filterClause('haselecdocsupport');
                            this.rtyField.setRawValue('all');
                            this.rtyField.doSearch();
                        }
                    };
                    return MultiFileUploadPanel;
                }(HP.HPTRIM.Framework.Components.Layouts.Panel));
                Panels.MultiFileUploadPanel = MultiFileUploadPanel;
                var Queue = (function () {
                    function Queue(handler) {
                        this.queue = [];
                        this.handler = function () { };
                        this.handler = handler;
                    }
                    Queue.prototype.run = function () {
                        var _this = this;
                        var callback = function () {
                            _this.queue.shift();
                            if (_this.queue.length > 0) {
                                _this.run();
                            }
                        };
                        this.handler(this.queue[0], callback);
                    };
                    Queue.prototype.append = function (task) {
                        this.queue.push(task);
                        if (this.queue.length === 1) {
                            this.run();
                        }
                    };
                    Queue.prototype.isDone = function () {
                        return this.queue.length == 0;
                    };
                    Queue.prototype.clear = function () {
                        this.queue = [];
                    };
                    return Queue;
                }());
                Panels.Queue = Queue;
            })(Panels = App.Panels || (App.Panels = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Panels;
            (function (Panels) {
                var Framework;
                (function (Framework) {
                    "use strict";
                    var MenuPanel = (function (_super) {
                        __extends(MenuPanel, _super);
                        function MenuPanel(trimClient, order) {
                            _super.call(this);
                            this.profileUsername = ko.observable('');
                            this.profileUserType = ko.observable('');
                            this.profileDatasetId = ko.observable('');
                            this.profileServerName = ko.observable('');
                            this.showLogout = ko.observable(false);
                            this.logoutLocation = ko.observable('');
                            this.panelSelected = ko.observable('');
                            MenuPanel.HOME_CAPTION = HP.HPTRIM.Messages.web_home;
                            MenuPanel.RECORD_CAPTION = HP.HPTRIM.Messages.web_records;
                            MenuPanel.WORKFLOW_CAPTION = HP.HPTRIM.BaseObjectTypes.Workflow.CaptionPlural;
                            MenuPanel.HELP_CAPTION = HP.HPTRIM.Messages.dp_cap_Help;
                            MenuPanel.WORKLISTS_CAPTION = HP.HPTRIM.Messages.web_workLists;
                            this.trimClient = trimClient;
                            this.order = [];
                            if (order) {
                                this.order = order;
                            }
                            var db = trimClient.getDatabase();
                            var wgs = db.workgroupServerName();
                            var currentUser = db.currentLoggedInUser().displayValue;
                            var dbID = db.id();
                            var datasets = [];
                            this.showLogout(HPTRIM.Config.useADFS);
                            this.logoutLocation(this.trimClient.getADFSLogoutURL());
                            this.profileUserType(trimClient.currentUserType());
                            this.profileUsername(currentUser);
                            this.profileDatasetId(dbID);
                            this.profileServerName(wgs);
                            this.panelSelected(HP.HPTRIM.Messages.web_home.toUpperCase());
                            var me = this;
                            this.templateName('templates/Framework/MenuPanel');
                            this.visible(true);
                        }
                        MenuPanel.prototype.getActionByType = function (type) {
                            return this.mainObjectPanelsByName[type.name];
                        };
                        MenuPanel.prototype.getActionByTypeName = function (name) {
                            return this.mainObjectPanelsByName[name];
                        };
                        MenuPanel.prototype.getActionByName = function (actionName) {
                            var returnAction = _.find(this.actions(), function (action) {
                                return action.caption == actionName;
                            });
                            if (!returnAction) {
                                _.each(this.actions(), function (action) {
                                    if (action.childActions) {
                                        returnAction = _.find(action.childActions(), function (action) {
                                            return action.caption == actionName;
                                        });
                                    }
                                });
                            }
                            if (!returnAction) {
                                returnAction = this.actions()[0];
                            }
                            return returnAction;
                        };
                        MenuPanel.prototype.setActionActive = function (action) {
                            if (!action) {
                                return;
                            }
                            var deactivateAction = function (action) {
                                action.active(false);
                                if (action.childActions) {
                                    _.each(action.childActions(), deactivateAction);
                                }
                            };
                            _.each(this.actions(), deactivateAction);
                            action.active(true);
                        };
                        MenuPanel.HOME_CAPTION = HP.HPTRIM.Messages.web_home;
                        MenuPanel.HOME_ICON = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAACeSURBVDhPtdDBCoJAFEbhoaWE7/92pdW6CCFo4fR773FwGpQp6oNBPPeOC8NfxRivOg+dQWdHrqMLN52lPc87K+u09H55afsDWjj43jpWS5p1vrLpyXpOg5PPqxy55hQu3j/SzZfP/v6V3j4y0UvrrUrLtRzDWUOeeuPJkUvMDSkhG1KJuSElZEMqMTekhGxIJc1GXzHZj6IZ0i+E8AKWpOolNP8P9AAAAABJRU5ErkJggg==';
                        MenuPanel.RECORD_CAPTION = HP.HPTRIM.Messages.web_records;
                        MenuPanel.FILE_UPLOAD_MANAGER = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAADZ3pUWHRSYXcgcHJvZmlsZSB0eXBlIGV4aWYAAHja7ZdRttsoDIbfWUWXgCSEYDlg4JzZwSy/P5gkN7lpZ3rrl55TkxgsC0noA2y7/u8/w33Dwd6zC2op5hg9jpBD5oJG8udx1uTDOu8Lf2s8yd39BkMkqOW8jH3rF8j10cHCltdnubNj20nb0M3yNijTM2L3Wy9tQ8KnnPa1y7tfCR+Gs/+1bZme1et1MCSjKewJO+5C4nFO04sgAslSUAecRaYSrXZYchJ+nzt3b74k7956yZ0vWy7PqXA+boX4kqMtJ32fu5WhF2o3z083ar27+JS7MVoao5+jKyEiU9HtQd2GslpQrEilrG4RxfBXtG2VjJIwxAPEGmhWlMNRJka2BwVqVGhQX/VBB0IM3NlQMx8sS5bEOPMhJwIUGmzA0JwksDpATSDmeyy0/Obl76AEz42gyQRjIPe5uHfCr5S7oTHm1CXy6Z4rxMVz1iCMSW6eoQUgNHZOdeV3Ffdh3vgPYAUEdaU5YYDF19NEVXrMLVmcBXrqg/Pn0iBr2wBSBN+KYEhAwEcSpUjemI0IeUzgUxA5S+AKAqTKjdwAG5EIOImnb/QxWrqsfIqxtQCEShQDGiwUwApBMX8sJMyhoqLBqWpU06RZS5QYosYYLc49qphYMLVoZsmylSQpJE0xWUopp5I5C7YwzTGbyynnXAqcFpgu6F2gUUrlKjVUrbFaTTXXcmD6HOHQIx52pCMfpXGThuXfYjPXUsutdOqYSj107bFbTz33MjDXhowwdMRhI408yp3apvpMjV7I/ZwabWqTWFh69qAGsdnNBM3tRCczEONAIG6TACY0T2Y+UQg8yU1mPjMWhTKokU44jSYxEAydWAfd2T3I/ZSb0/BL3PhH5NxEdwU5N9Ftcp+5vaHWynqiyAI0V+HMqZeBjQ1KhRN+2I+/XrvfNfDX0F9Df44h6ZFXs44QpfuwxFhko2BXmM1x9DBq/9DRpYtCem/oCyE5vigk9z9Dea0/hebKRSG5clFIzl8UknuEYvUMpfdj5CRUlsNe5Ug/6s1NKShpzs1Fa2xhXlu3Yi2ndQ+PzV+r3X8q0hA6/Q68+OMtaInxEWENz6odAeMlYvivhfBSu3BRSM4uCsnRRSE5vigk9/tp/qMN4cthNHz8uu9VPp9PJkcHVAAAAAZiS0dEAAEAkwDTJKwXCAAAAAlwSFlzAAAOxAAADsQBlSsOGwAAAAd0SU1FB+MEHgQxDj+ux4kAAACFSURBVDjLY/z//z8DJYAFjY/NtH8MDAxMWMQZsRnAiMey/4RcgMsvjEg0hhomIr36H8mQP+QYgGwIK75AhFhT9QGio02AYNiwkGAzVsOYcNmOzsYFmBgoBCgG2LV+xFAgW4vfFYxISfk/nkBED4P/sLCgrhdIAIzYvPCPQF7AGo0slLoGAB9AITnfruAbAAAAAElFTkSuQmCC';
                        MenuPanel.RECORD_ICON = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAT0lEQVQ4y+2RSw4AMAQFadz/yrqSCNX0se3sNIxPiYawD1RVnwuZOQluRHkSVN0tMebY+0K6e5mx0BWiRJCDnZDu8eAVKr6gKfA/MZ5gzAYUNRwmN05++wAAAABJRU5ErkJggg==';
                        MenuPanel.RECORD_TYPES_CAPTION = HP.HPTRIM.Messages.web_recordType;
                        MenuPanel.WORKLISTS_CAPTION = HP.HPTRIM.Messages.web_workLists;
                        MenuPanel.WORKLISTS_ICON = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAADdSURBVDhPtZM9DoJAFIQJJBriMSxM6Kg9jq2FhEtIwlGs7L2NZ7BdZ94O6/4EK/2SF5jvDYhRqr/gnLthch5ar4PSyXeNM2aH2WIuFKJTPQWL1u/dXapAe9JLfQfFwffdIBVuomii9iqSQtqQMqSmOCzc5DY6Fk9AkEdKxXCTI+YZ5eSiGOwaFhTDBU10btgyA/qF4YcVNxh1njw2jz6GnPxH6CinEDLoF6RiV0t9pGIAyp5AcR10ehaJVAFWs2+4VioFi87vDX6tA2aPsZ9NzKqvgxLfg5yr1r+kqt75W4k3SfRNOAAAAABJRU5ErkJggg==';
                        MenuPanel.REQUEST_ICON = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAACKSURBVDhPvdPRDYMwDEXRdAN2Z48OwWImfrmgmISmIMSRouBnG4kP0mvMbMonoNXHzMiH8RYDPzFakMmxPqNFR73rZT1adnWxPfs9ogVXF9uz3yNacHURGv/ypTtYf+4FC2X3hbSEqP3UOtQEiEK/oUkQBbSEKMr5Uto2EwU5/5a2zfmc/wPXpLQC2T35gnCv1fMAAAAASUVORK5CYII=';
                        MenuPanel.LOCATION_ICON = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAADySURBVDhPpdLNasJAFIZhlQiKiy4EobfhnRTFm8smEMgFFKF4Ad3rIpCN4NqfUlpKi9XG94McGZuMBD3wMMPMmS+TkEae53exybawr2kH1UWAzetSnQOU6m420cMjhhigA7dHVQ4Iw7DFqMMz/OEXLwjiONaendF6OSBJkjbjBG9QgKwxiqIoYLwekGWZrjrCCjp8xBJPaZq6r1EdUNAtpvjBN56h7/EA6/EG6PpzdJ21PhYYO2vegC9oU+NnQfMDPmB93gA12cf77x3W5w2wv6yqNrA+b8Arqp4u2rO+iwCVzesqBej9tFiXbnQOuFHeOAH0RlwsI/iHHgAAAABJRU5ErkJggg==';
                        MenuPanel.SAVEDSEARCH_ICON = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAADDSURBVDhPhZLBDcIwEARTCG3QJoVQCC8ayJc3EhJvJHNzeK21ZYeRJj72DgfibKUU9x6KZ/j5lZmPs6mKc8jwK4RHeK0rkNNnbroBzT28haeaST6T02fOe7kBP487MNQ1B+lD93e4iPHOo/RFy7mIFh4o2rPw0AdXikuYGRcdlQ+uhO5BevOfegbTDY7QzPIUEFpoAqu+DN2MiiPo6w0V0w28dpTjm6CumakBXjvKZbeJQvDaUe5yEnkaCsBrR/nEsn0B6nRermnD7zMAAAAASUVORK5CYII=';
                        MenuPanel.CHECKINSTYLE_ICON = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAClSURBVDhPpZLRDcMgDEQZoZOzBf/8swVbMIXTszhkEZuozUnOEYMfRpBE5FW4yV/CTdqotX6+7knnbwVOnLQAoXLOMAtMvXfkoBgwxoDtBVJKgaXWmnoI4M4WxGLmVBjgzxHzupsFYQAPAWxvtm7n2Tr0DKDjM6XQxyNw561tDQsPAVO6iAXmOKuLI4AFuI05VqGQt3EEQFjsPSTk9g7+itcAEUkXLMI26YaodLkAAAAASUVORK5CYII=';
                        MenuPanel.CLASSIFICATION_ICON = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAsklEQVRIidVVQQ6DMAyzJQ77/2s5TPMuy5R0TSnQSp1PFNzaiYEAk0EAkCQAsnV2TZIfbsZ5AtiMC1t4sZvYCuEg8FX1cI5LMOG/SsXR4M/CXLYq8M8aVUUlkjMqCOgWkKTiLRorUENPS2e0SABoFXcLmKOzbfrfkGdmEAwt0SLB/XeWCbmWQdPV3S/51KYrAjwSWS4DQ5gHyKvIZnLJsXushbwDeLjNfqA3DfqDD/jj8QYJcGhfGkCFewAAAABJRU5ErkJggg==';
                        MenuPanel.USERLABEL_ICON = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAAA7EAAAOxAGVKw4bAAABs0lEQVRYhcWWsUpDQRBFz2qKqBEipEhhGUGwDIKN2Nil8APyCZZWYmFr5xek9gcU0oqN/oGFgp2NiEUKRc21yCZ5xuxm9/lWL4RkN/NmLnfmzQz8M4ykPM+VgSbQsOc74Ab4iApuDEiK+ZQldeTGkaRSqL9YBerAY6DtMtALUSCGQGyuTAiBUqCzvcjgADvA5UwSgQrkqdQ+MO8NHqFAHsyFGKUkEIRQAiKgqCZwXiSBQ+AkBYHQIqwCz4SrIGARePUGjyjCF2AbuAogIWBzVvCxdVwrbkrqe1pxX9JGilZcB54YDJsS0AJ2gXX7/y3QBS7suQxU7DNOhA6jVUmfkt4k7UuqeGxrkg6s/buk+m8VqDDI/2RH6wLXwIM9N4Atq0oWPWAFx5gOUeDMk+9QnPoU8AVvFxB8iJaLgCsFVSt9Hkxz2AeWmHg1sykoCj5fxz4Fci2GDhiPv4WsCqnG8XBwTSPRBjrZixQKjHxP8XvPeJP+thOmIOAiMZolSVJgjDFyvFoWNTItunACM4LDYE6M8Nc1MLwf/Ei4lLqC/7hLQcDXB9ZSEzAT3zMxJBC78RaGL/ZF3d1j2HfVAAAAAElFTkSuQmCC';
                        MenuPanel.CONSIGMENTS_ICON = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAq0lEQVQ4y2NgoBAwElLw//////jkWZAVMDIyMhJja/xGCL3Qnwib/mMBDAwMDFrTEGwUA/4TAFrTUNURZQCyJgYGBoa4DaiuwWoAuhfiNmCK4TQAVxig2/7/////LKTEObaAZiEn7hmopgk5JZJiAHKCY0KXXLFqzQZGKEDWgC5GsndwuZARn0KYjfjyC4YXtmzdMYOBgYHh9p273TCx3gmTGmBicUlpKAYAAGtG9b05Y9j3AAAAAElFTkSuQmCC';
                        MenuPanel.RECORDACTIONS_ICON = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAeklEQVQ4y2NkIAD+////H588EwMZIHAVBKPYgg3Ep2QwYhNnYGBgUJ6MYOM0AJuc8mRUcaIMQNbEwMDAELASVQ1RLqjciwhMdDVEewHd9v////9nISX0sUUpQQMYGRkZ8cpDaWMiHXGWKglpcBnASEyGwRegFLuAYgAACN8EnZs89EMAAAAASUVORK5CYII=';
                        MenuPanel.WORKFLOW_ICON = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAADdSURBVDhPtZM9DoJAFIQJJBriMSxM6Kg9jq2FhEtIwlGs7L2NZ7BdZ94O6/4EK/2SF5jvDYhRqr/gnLthch5ar4PSyXeNM2aH2WIuFKJTPQWL1u/dXapAe9JLfQfFwffdIBVuomii9iqSQtqQMqSmOCzc5DY6Fk9AkEdKxXCTI+YZ5eSiGOwaFhTDBU10btgyA/qF4YcVNxh1njw2jz6GnPxH6CinEDLoF6RiV0t9pGIAyp5AcR10ehaJVAFWs2+4VioFi87vDX6tA2aPsZ9NzKqvgxLfg5yr1r+kqt75W4k3SfRNOAAAAABJRU5ErkJggg==';
                        MenuPanel.TODOITEM_ICON = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAA7EAAAOxAGVKw4bAAABE0lEQVQ4y62RPU7EMBSEx3uAdG5p9giRUECCiBNQIRpOkBtQbZUsP+0u0lKBKIjERThAWho6U7m0ZNlDgYWyTpxQMJJl6c3T9/4EEiK5BHAA4FMI8YG/Km/rzDjbOHrFIEevjLNN3tZZnC+iqmcebAFgAfEG4D1YhQcvQvx4tKOTx3WmrVGOvjvdrWXsF8+1dPQdSZW/DjuBcbYhqcvtvUyNd/RUS+udNs42A1Nbo0hu5nZEckNSxcFJnd/clr3cqxBe7gFw/fNSSgEWqVaFECJhFQC+9i4RiA/h/VaMOyh3jSSpSa7GdjALINmR1Icv0RmnZr5c3YkRu0oCJs5HktUoJFU9BoS/GuTNna4P6EPwH/oGwz6ScCz0+VYAAAAASUVORK5CYII=';
                        MenuPanel.HELP_CAPTION = HP.HPTRIM.Messages.dp_cap_Help;
                        MenuPanel.HELP_ICON = '';
                        MenuPanel.WORKFLOW_CAPTION = HP.HPTRIM.BaseObjectTypes.Workflow.CaptionPlural;
                        return MenuPanel;
                    }(HP.HPTRIM.Framework.Components.Layouts.SinglePage.NavPanel));
                    Framework.MenuPanel = MenuPanel;
                    var MenuNavPanel = (function (_super) {
                        __extends(MenuNavPanel, _super);
                        function MenuNavPanel(trimClient, mainObjectDefs, order, activeFeatures) {
                            _super.call(this, trimClient, order);
                            this.mainObjectDefsMenuPanel = [];
                            this.showFileUploadManager = function () { };
                            var me = this;
                            this.workflowEnabled = _.contains(activeFeatures, "Workflow");
                            this.configureActions(mainObjectDefs);
                            this.configureMenuObjects(mainObjectDefs);
                            this.configureMenuActions(mainObjectDefs, this.mainObjectDefsMenuPanel);
                            this.addRecord = function () {
                                me.addRecord();
                            };
                        }
                        MenuNavPanel.prototype.configureActions = function (mainObjectDefs) {
                            var _this = this;
                            var me = this;
                            var showHomeFunction = function (action) {
                                me.showHomeFunction();
                            };
                            var showRecordsFunction = function (action) {
                                me.showRecordsFunction();
                            };
                            var showWorkflowFunction = function (action) {
                                me.showWorkflowFunction();
                            };
                            var showHelpFunction = function (action) {
                                var virtualDirectory = HPRMWebConfig.virtualDirectory;
                                var languageCode = me.trimClient.getCurrentLanguageCode();
                                var url = virtualDirectory + "Content/help/" + languageCode + "/WebClient.htm";
                                window.open(url, "_blank");
                            };
                            var homeAction = new HP.HPTRIM.Framework.Components.ActionManager.ActionBase({ tooltip: Framework.NavPanel.HOME_CAPTION, caption: Framework.NavPanel.HOME_CAPTION, icon: Framework.NavPanel.HOME_ICON, actionHandler: showHomeFunction, active: true, id: "HOME" });
                            var recordAction = new HP.HPTRIM.Framework.Components.ActionManager.ActionBase({
                                tooltip: Framework.NavPanel.RECORD_CAPTION, url: 'q=favorite&t=record', caption: Framework.NavPanel.RECORD_CAPTION, icon: Framework.NavPanel.RECORD_ICON, actionHandler: showRecordsFunction, id: "RECORDS"
                            });
                            var actions = [];
                            actions.push(homeAction);
                            actions.push(recordAction);
                            this.navigateToSubMenuItems = function (menuItem, subMenuItem) {
                                if (menuItem.Id == "REQUEST")
                                    me.showSelectedSubMenuHandler(menuItem.type, subMenuItem.pageId, subMenuItem);
                                else
                                    me.showRecordsFunction(parseInt(subMenuItem.pageId), null);
                            };
                            var metisMenuInitialised = false;
                            var worklistsId = "WORKLISTS";
                            var workItemAction = new HP.HPTRIM.Framework.Components.ActionManager.ActionBase({
                                tooltip: MenuPanel.WORKLISTS_CAPTION, caption: MenuPanel.WORKLISTS_CAPTION, icon: MenuPanel.WORKLISTS_ICON, actionHandler: function () {
                                    if (!metisMenuInitialised) {
                                        metisMenuInitialised = true;
                                        var jQueryNavMenu = $('#side-menu');
                                        jQueryNavMenu.metisMenu();
                                        var navItemId = "#NAV_" + worklistsId;
                                        $(navItemId).addClass("active selected");
                                        var navSecondLevel = navItemId + " .nav-second-level";
                                        var jQueryNavSecondLevel = $(navSecondLevel);
                                        jQueryNavSecondLevel.collapse('show');
                                    }
                                }, id: worklistsId
                            });
                            var workflowAction = new HP.HPTRIM.Framework.Components.ActionManager.ActionBase({ tooltip: MenuPanel.WORKFLOW_CAPTION, caption: MenuPanel.WORKFLOW_CAPTION, icon: "", actionHandler: showWorkflowFunction, id: "WORKFLOW" });
                            if (this.workflowEnabled) {
                                actions.push(workflowAction);
                            }
                            this.mainObjectPanelsByName = {};
                            _.each(mainObjectDefs, function (mainObjectDef) {
                                if (mainObjectDef.isHiddenInNavPanel) {
                                    return;
                                }
                                if (mainObjectDef.RequiredFeaturePermissions && mainObjectDef.RequiredFeaturePermissions.length > 0) {
                                    var havePermissions = true;
                                    _.each(mainObjectDef.RequiredFeaturePermissions, function (permissionName) {
                                        var hasPermission = _this.trimClient.getDatabase().currentUserPermissions()[permissionName];
                                        if (!hasPermission) {
                                            havePermissions = false;
                                        }
                                    });
                                    if (!havePermissions) {
                                        return;
                                    }
                                }
                                var defaultTray;
                                var query = 'all';
                                _.each(mainObjectDef.trayPages, function (trayPage) {
                                    _.each(trayPage.pageItems, function (pageItem) {
                                        if (pageItem.isDefault) {
                                            defaultTray = pageItem;
                                        }
                                    });
                                });
                                if (!defaultTray) {
                                    var firstTrayPage = mainObjectDef.trayPages[0];
                                    if (firstTrayPage && firstTrayPage.pageItems[0]) {
                                        defaultTray = firstTrayPage.pageItems[0];
                                    }
                                }
                                if (defaultTray) {
                                    query = defaultTray.query;
                                }
                                var caption = mainObjectDef.CaptionPlural;
                                if (mainObjectDef.navCaptionOverride) {
                                    caption = mainObjectDef.navCaptionOverride;
                                }
                                var workListItems = [
                                    HPTRIM.BaseObjectTypes.RecordAction,
                                    HPTRIM.BaseObjectTypes.TodoItem,
                                    HPTRIM.BaseObjectTypes.ConsignmentApprover,
                                ];
                                var mainObjectPanelAction = new HP.HPTRIM.Framework.Components.ActionManager.ActionBase({
                                    url: 't=' + mainObjectDef.type.Name + '&q=' + mainObjectDef.trayPages[0].pageItems[0].query,
                                    tooltip: caption,
                                    caption: caption,
                                    icon: "",
                                    actionHandler: function () {
                                        if (mainObjectDef.Id == "WORKFLOW") {
                                            me.showWorkflowFunction();
                                        }
                                        else {
                                            me.actionHandler(mainObjectDef.type);
                                        }
                                    }
                                });
                                var iconName = (mainObjectDef.navIcon + "_icon").toUpperCase();
                                if (Framework.NavPanel[iconName]) {
                                    mainObjectPanelAction.icon(Framework.NavPanel[iconName]);
                                }
                                mainObjectPanelAction.id = mainObjectDef.type.name.toUpperCase();
                                _this.mainObjectPanelsByName[mainObjectDef.type.name] = mainObjectPanelAction;
                                if (_.contains(workListItems, mainObjectDef.type)) {
                                    actions.push(mainObjectPanelAction);
                                }
                                else {
                                    actions.push(mainObjectPanelAction);
                                }
                            });
                            if (workItemAction.childActions().length > 0) {
                                actions.push(workItemAction);
                            }
                            var orderedActions = [];
                            _.each(this.order, function (id) {
                                _.each(actions, function (action) {
                                    if (action.id && action.id.toLowerCase() == id.toLowerCase()) {
                                        orderedActions.push(action);
                                    }
                                    if (action.id && action.id.toLowerCase() == ("MainObject_" + id).toLowerCase()) {
                                        orderedActions.push(action);
                                    }
                                });
                            });
                            _.each(actions, function (action) {
                                if (!_.contains(orderedActions, action)) {
                                    orderedActions.push(action);
                                }
                            });
                            this.actions(orderedActions);
                        };
                        MenuNavPanel.prototype.configureMenuObjects = function (mainObjectDefs) {
                            var _this = this;
                            var me = this;
                            _.each(this.actions(), function (actionsBase) {
                                _this.objectmenu = new HP.HPTRIM.App.Panels.MainObject.MainObjectDefinitonsMenu();
                                if (actionsBase.id != "HOME") {
                                    if (actionsBase) {
                                        _this.objectmenu.Id = actionsBase.id;
                                        _this.objectmenu.Caption = actionsBase.caption;
                                        _this.objectmenu.targetUrl = actionsBase.targetUrl;
                                        _this.objectmenu.action = actionsBase;
                                        switch (_this.objectmenu.Id) {
                                            case "HOME":
                                                _this.objectmenu.icon = MenuNavPanel.HOME_ICON;
                                                break;
                                            case "RECORDS":
                                                _this.objectmenu.icon = MenuNavPanel.RECORD_ICON;
                                                break;
                                            case "REQUEST":
                                                _this.objectmenu.icon = MenuNavPanel.REQUEST_ICON;
                                                break;
                                            case "LOCATION":
                                                _this.objectmenu.icon = MenuNavPanel.LOCATION_ICON;
                                                break;
                                            case "SAVEDSEARCH":
                                                _this.objectmenu.icon = MenuNavPanel.SAVEDSEARCH_ICON;
                                                break;
                                            case "CHECKINSTYLE":
                                                _this.objectmenu.icon = MenuNavPanel.CHECKINSTYLE_ICON;
                                                break;
                                            case "USERLABEL":
                                                _this.objectmenu.icon = MenuNavPanel.USERLABEL_ICON;
                                                break;
                                            case "WORKFLOW":
                                                _this.objectmenu.icon = MenuNavPanel.WORKLISTS_ICON;
                                                break;
                                            case "CONSIGNMENTAPPROVER":
                                                _this.objectmenu.icon = MenuNavPanel.CONSIGMENTS_ICON;
                                                break;
                                            case "TODOITEM":
                                                _this.objectmenu.icon = MenuNavPanel.TODOITEM_ICON;
                                                break;
                                            case "RECORDACTION":
                                                _this.objectmenu.icon = MenuNavPanel.RECORDACTIONS_ICON;
                                                break;
                                        }
                                        _this.mainObjectDef = _this.getMatchingMainDef(actionsBase.id, mainObjectDefs);
                                        if (_this.mainObjectDef) {
                                            if (_this.objectmenu.Id == "REQUEST") {
                                                _this.objectmenu.trayPages = _this.mainObjectDef.trayPages;
                                                _this.objectmenu.type = _this.mainObjectDef.type;
                                            }
                                            else {
                                                _this.objectmenu.trayPages = undefined;
                                                _this.objectmenu.type = _this.mainObjectDef.type;
                                            }
                                        }
                                        else {
                                            if (_this.objectmenu.Id == "RECORDS") {
                                                var recordPageTray = new Array();
                                                var trayPage = {
                                                    pageCaption: (HP.HPTRIM.Messages.web_checkedOut),
                                                    pageId: (Panels.RecordsPanel.CHECKED_OUT_VIEW_ID.toString()),
                                                    pageItems: [],
                                                };
                                                recordPageTray.push(trayPage);
                                                trayPage = {
                                                    pageCaption: (HP.HPTRIM.Messages.web_recentRecords),
                                                    pageId: (Panels.RecordsPanel.RECENTS_VIEW_ID.toString()),
                                                    pageItems: [],
                                                };
                                                recordPageTray.push(trayPage);
                                                trayPage = {
                                                    pageCaption: (HP.HPTRIM.Messages.web_favorites),
                                                    pageId: (Panels.RecordsPanel.FAVORITE_VIEW_ID.toString()),
                                                    pageItems: [],
                                                };
                                                recordPageTray.push(trayPage);
                                                trayPage = {
                                                    pageCaption: (HP.HPTRIM.Messages.web_createdRecords),
                                                    pageId: (Panels.RecordsPanel.CREATED_VIEW_ID.toString()),
                                                    pageItems: [],
                                                };
                                                recordPageTray.push(trayPage);
                                                _this.objectmenu.trayPages = recordPageTray;
                                            }
                                            else {
                                                _this.objectmenu.trayPages = undefined;
                                            }
                                            _this.objectmenu.type = undefined;
                                        }
                                        _this.mainObjectDefsMenuPanel.push(_this.objectmenu);
                                    }
                                }
                            });
                        };
                        MenuNavPanel.prototype.getMatchingMainDef = function (actionBaseId, mainObjectDefs) {
                            var mainObject = _.filter(mainObjectDefs, function (mainObjectDef) {
                                return mainObjectDef.Id.toLowerCase() == actionBaseId.toLowerCase();
                            });
                            return mainObject[0];
                        };
                        MenuNavPanel.prototype.configureMenuActions = function (mainObjectDefs, mainObjectDefsMenuPanel) {
                            var me = this;
                            _.each(mainObjectDefsMenuPanel, function (mainObjectDefsMenu) {
                                var actionHandler = function (type) {
                                    if (type.Id == "Records") {
                                        me.showRecordsFunction();
                                    }
                                    me.actionHandler(type);
                                };
                            });
                        };
                        return MenuNavPanel;
                    }(MenuPanel));
                    Framework.MenuNavPanel = MenuNavPanel;
                })(Framework = Panels.Framework || (Panels.Framework = {}));
            })(Panels = App.Panels || (App.Panels = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var History;
        (function (History) {
            var TRIMStateObject = (function () {
                function TRIMStateObject() {
                }
                return TRIMStateObject;
            }());
            History.TRIMStateObject = TRIMStateObject;
            var TRIM_URLStateObject = (function () {
                function TRIM_URLStateObject(stateString) {
                    if (stateString) {
                        if (stateString.indexOf('/') == -1) {
                            this.panelName = stateString;
                        }
                        else {
                            var parts = stateString.split('/');
                            this.panelName = parts[0].replace('/', '');
                            if (parts.length > 1) {
                                try {
                                    var contextString = stateString.substr(this.panelName.length + 1);
                                    var urlInfoObject = JSON.parse(contextString);
                                    this.context = urlInfoObject;
                                }
                                catch (e) {
                                }
                            }
                        }
                    }
                }
                TRIM_URLStateObject.prototype.toURLHash = function () {
                    var contextString = JSON.stringify(this.context);
                    if (contextString != '{}') {
                        return this.panelName + '/' + JSON.stringify(this.context);
                    }
                    return this.panelName;
                };
                return TRIM_URLStateObject;
            }());
            History.TRIM_URLStateObject = TRIM_URLStateObject;
            var TRIMHistory = (function () {
                function TRIMHistory(TRIMApp) {
                    this.historyStateHandler = function () { };
                    this.popStateEventCounter = 0;
                    this.popDiscardCount = 0;
                    this.TRIMApp = TRIMApp;
                    this.historyStateHandler = TRIMApp.trimHistoryHandler;
                    var me = this;
                    var isIpad = navigator.userAgent.match(/iPad/i) != null;
                    var isIphone = navigator.userAgent.match(/iPhone/i) != null;
                    var isIpod = navigator.userAgent.match(/iPod/i) != null;
                    if (isIpad || isIphone || isIpad) {
                        me.popDiscardCount = 2;
                    }
                    this.urlHandler = function (suppliedState) {
                        try {
                            var actualState = new TRIMStateObject();
                            if (suppliedState.panelName) {
                                var message;
                                if (TRIMApp.getPanelIdByName) {
                                    actualState.panel_id = me.TRIMApp.getPanelIdByName(suppliedState.panelName);
                                    if (actualState.panel_id == "") {
                                        message = HP.HPTRIM.Messages.web_invalidURL;
                                    }
                                }
                                actualState.context = suppliedState.context;
                                me.historyStateHandler(actualState, message);
                            }
                        }
                        catch (ex) {
                            console.log(ex);
                        }
                    };
                    this.navigationHandler = function () {
                        me.popStateEventCounter++;
                        if (me.popStateEventCounter <= me.popDiscardCount) {
                            return;
                        }
                        var state = null;
                        if (history.state) {
                            state = JSON.parse(history.state);
                        }
                        me.historyStateHandler(state);
                    };
                    this.init(TRIMApp);
                }
                TRIMHistory.prototype.stateHandler = function (TRIMApp, context, title) {
                    if (title) {
                        window.document.title = title;
                    }
                    if (!this.supports_history_api()) {
                        return;
                    }
                    else {
                        var currentTrimContext = new TRIMStateObject();
                        currentTrimContext.panel_id = TRIMApp.getBodyPanel().currentActiveTabPanel().panel().id;
                        currentTrimContext.action_caption = TRIMApp.historyCaption;
                        currentTrimContext.context = context;
                        currentTrimContext.title = title;
                        var urlStateObject = new TRIM_URLStateObject();
                        var panelName = TRIMApp.getBodyPanel().currentActiveTabPanel().panel().getClassName();
                        urlStateObject.panelName = panelName;
                        urlStateObject.context = context;
                        try {
                            history.pushState(JSON.stringify(currentTrimContext), title);
                        }
                        catch (e) {
                        }
                        return "#" + urlStateObject.toURLHash();
                    }
                };
                TRIMHistory.prototype.emptyStateHandler = function () {
                    history.pushState(null, null, null);
                };
                TRIMHistory.prototype.supports_history_api = function () {
                    return !!(window.history && history.pushState);
                };
                TRIMHistory.prototype.init = function (TRIMApp) {
                    if (!this.supports_history_api()) {
                        return;
                    }
                    $(window).bind('statechange', this.stateHandler);
                    $(window).bind('popstate', this.navigationHandler);
                };
                return TRIMHistory;
            }());
            History.TRIMHistory = TRIMHistory;
        })(History = HPTRIM.History || (HPTRIM.History = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Panels;
            (function (Panels) {
                var Plugins;
                (function (Plugins) {
                    "use strict";
                    var CustomUpdateTaskForm = (function (_super) {
                        __extends(CustomUpdateTaskForm, _super);
                        function CustomUpdateTaskForm(template) {
                            _super.call(this, template);
                            this.cancelHandler = function () { };
                            this.executeTask = function (userSuppliedParameterList, overridingTask) { };
                            this.rawControls = ko.observableArray([]);
                            this.title = ko.observable("");
                            this.caption = ko.observable("");
                        }
                        CustomUpdateTaskForm.prototype.resetPanel = function () { };
                        ;
                        CustomUpdateTaskForm.prototype.prepareForm = function (taskId) { };
                        ;
                        CustomUpdateTaskForm.prototype.setInfoObject = function (infoObject, uriArray) { };
                        ;
                        CustomUpdateTaskForm.prototype.doTask = function () { };
                        CustomUpdateTaskForm.prototype.appliesToTask = function (objectType, taskId) {
                            return false;
                        };
                        return CustomUpdateTaskForm;
                    }(HP.HPTRIM.Framework.Components.Layouts.Panel));
                    Plugins.CustomUpdateTaskForm = CustomUpdateTaskForm;
                    var MainObjectUpdateTaskForm = (function (_super) {
                        __extends(MainObjectUpdateTaskForm, _super);
                        function MainObjectUpdateTaskForm(trimClient) {
                            _super.call(this, 'templates/Framework/Overlays/MainObjectUpdateTaskForm');
                            this.itemPickers = [];
                            this.fieldDecorators = [];
                            this.rawControls = ko.observableArray([]);
                            this.title = ko.observable("");
                            this.caption = ko.observable("");
                            this.okText = ko.observable(HP.HPTRIM.Messages.web_save);
                            this.errorVisible = ko.observable(false);
                            this.alertDetails = ko.observable("");
                            this.showMessage = ko.observable(false);
                            this.message = ko.observable("");
                            this.actionView = ko.observable(false);
                            this.infoObject = {};
                            this.objectRecordDetailComponent = {};
                            this.handleViewClick = function (uriFromTemplate, extensionFromTemplate, passedInRecNumber, passedInRecTitle, revisionCount, recordIsCheckedOut, recordSpURL, recordInfoData) { };
                            this.saveHandler = function (parameterList) {
                            };
                            this.cancelHandler = function () {
                            };
                            this.cssClass('as-spa-saved-search-form');
                            this.trimClient = trimClient;
                        }
                        MainObjectUpdateTaskForm.prototype.renderForm = function (updateTask, infoObject, updateObjectType) {
                            var _this = this;
                            var me = this;
                            me.fieldDecorators = [];
                            me.itemPickers = [];
                            me.rawControls([]);
                            var errorSubscription = function (newValue) {
                                me.errorVisible(newValue.length != 0);
                                me.alertDetails(newValue);
                            };
                            var title = updateTask.caption;
                            var caption = "";
                            if (updateTask.title) {
                                title = updateTask.title;
                                var titleSubstitution = "";
                                if (updateTask.titleProperty) {
                                    titleSubstitution = infoObject[updateTask.titleProperty];
                                    if (titleSubstitution && titleSubstitution.Value) {
                                        titleSubstitution = titleSubstitution.Value;
                                    }
                                }
                                if (titleSubstitution) {
                                    title = HPTRIM.Utils.String.format(title, [titleSubstitution]);
                                }
                                else {
                                    title = HPTRIM.Utils.String.format(title, [updateObjectType.name]);
                                }
                                caption = updateTask.caption;
                            }
                            if (me.objectRecordDetailComponent !== undefined)
                                me.objectRecordDetailComponent = updateTask.objectRecordDetailComponent;
                            me.infoObject = infoObject;
                            if (updateTask.actionView) {
                                me.actionView(updateTask.actionView);
                            }
                            this.preparePanel(title, caption);
                            _.each(updateTask.serviceActionParameters, function (serviceActionParameter) {
                                var currentItem = undefined;
                                var currentField = undefined;
                                switch (serviceActionParameter.type) {
                                    case "object":
                                        var itemPicker = HP.HPTRIM.Form.TrimObjectDecorator.makeTrimItemPicker(_this.trimClient, serviceActionParameter.objectType.name, serviceActionParameter.caption, serviceActionParameter.parameterName, serviceActionParameter.isMandatory);
                                        itemPicker.submitPropertyName = serviceActionParameter.parameterName;
                                        if (serviceActionParameter.purpose || serviceActionParameter.purpose === 0) {
                                            itemPicker.purpose = serviceActionParameter.purpose;
                                        }
                                        if (serviceActionParameter.objectPropertyName) {
                                            itemPicker.setValue(infoObject[serviceActionParameter.objectPropertyName]);
                                        }
                                        if (serviceActionParameter.allowNewLocations && serviceActionParameter.objectType == HPTRIM.BaseObjectTypes.Location) {
                                            var createNewLocationPlugin = new HP.HPTRIM.Field.Plugin.CreatingLocationPickerPlugin(_this.trimClient);
                                            itemPicker.addPlugin(createNewLocationPlugin);
                                            itemPicker['Readonly'] = false;
                                        }
                                        if (serviceActionParameter.defaultQuery) {
                                            var defaultQueryOk = true;
                                            var defaultQuery = serviceActionParameter.defaultQuery;
                                            for (var i = 0; i < serviceActionParameter.defaultQueryParameters.length; i++) {
                                                var propertyName = serviceActionParameter.defaultQueryParameters[i].property;
                                                var propertyType = serviceActionParameter.defaultQueryParameters[i].type;
                                                var requiredProperty = infoObject[propertyName];
                                                if (propertyType == "Object") {
                                                    requiredProperty = requiredProperty.Uri;
                                                }
                                                if (requiredProperty) {
                                                    defaultQuery = defaultQuery.replace("{" + i + "}", requiredProperty);
                                                }
                                                else {
                                                    defaultQueryOk = false;
                                                }
                                            }
                                            if (defaultQueryOk) {
                                                itemPicker.setRawValue(defaultQuery);
                                            }
                                        }
                                        if (serviceActionParameter.objectFilter) {
                                            var filter = serviceActionParameter.objectFilter;
                                            var filterOk = true;
                                            if (serviceActionParameter.objectFilterParameters) {
                                                for (var i = 0; i < serviceActionParameter.objectFilterParameters.length; i++) {
                                                    var propertyName = serviceActionParameter.objectFilterParameters[i].property;
                                                    var propertyType = serviceActionParameter.objectFilterParameters[i].type;
                                                    var requiredProperty = infoObject[propertyName];
                                                    if (propertyType == "Object") {
                                                        requiredProperty = requiredProperty.Uri;
                                                    }
                                                    if (requiredProperty) {
                                                        filter = filter.replace("{" + i + "}", requiredProperty);
                                                    }
                                                    else {
                                                        filterOk = false;
                                                    }
                                                }
                                            }
                                            if (filterOk) {
                                                itemPicker.filterClause(filter);
                                            }
                                        }
                                        me.itemPickers.push(itemPicker);
                                        me.rawControls.push(itemPicker);
                                        currentItem = itemPicker;
                                        break;
                                    case "string":
                                    case "text":
                                        {
                                            var dummyPageItem = {
                                                Caption: serviceActionParameter.caption,
                                                Format: "String",
                                                Name: "",
                                                Value: ko.observable(null),
                                            };
                                            if (serviceActionParameter.isMandatory) {
                                                dummyPageItem.Mandatory = true;
                                            }
                                            if (serviceActionParameter.type == "text") {
                                                dummyPageItem.CharacterLimit = HPTRIM.Form.StringDecorator.TEXT_AREA_SIZE;
                                            }
                                            var stringDecorator = new HP.HPTRIM.Form.StringDecorator(dummyPageItem);
                                            stringDecorator.submitPropertyName = serviceActionParameter.parameterName;
                                            me.fieldDecorators.push(stringDecorator);
                                            if (serviceActionParameter.objectPropertyName) {
                                                var previousValue = infoObject[serviceActionParameter.objectPropertyName];
                                                if (previousValue && previousValue.StringValue) {
                                                    stringDecorator.Value(previousValue.StringValue);
                                                }
                                                else if (previousValue && previousValue.Value) {
                                                    stringDecorator.Value(previousValue.Value);
                                                }
                                                else if (previousValue) {
                                                    stringDecorator.Value(previousValue);
                                                }
                                            }
                                            if (serviceActionParameter.readonly) {
                                                stringDecorator.enabled(false);
                                            }
                                            me.rawControls.push(stringDecorator);
                                            currentField = stringDecorator;
                                            break;
                                        }
                                    case "enum":
                                        {
                                            var dummyPageItem = {
                                                Caption: serviceActionParameter.caption,
                                                Format: "Enum",
                                                Name: ""
                                            };
                                            var enumPicker = new HP.HPTRIM.Form.EnumDecorator(_this.trimClient, dummyPageItem);
                                            var comboBox = HP.HPTRIM.Field.TrimEnumComboBoxFactory.makeComboBox(_this.trimClient, serviceActionParameter.enumName, undefined, infoObject);
                                            comboBox.enumName = serviceActionParameter.enumName;
                                            comboBox.Caption = serviceActionParameter.caption;
                                            comboBox.getData();
                                            enumPicker = $.extend(enumPicker, comboBox);
                                            enumPicker.submitPropertyName = serviceActionParameter.parameterName;
                                            me.fieldDecorators.push(enumPicker);
                                            me.rawControls.push(enumPicker);
                                            currentField = enumPicker;
                                            break;
                                        }
                                    case "Datetime":
                                    case "Date":
                                        {
                                            var dummyPageItem = {
                                                Caption: serviceActionParameter.caption,
                                                Format: serviceActionParameter.type,
                                                Name: "",
                                                Value: ko.observable(null),
                                            };
                                            if (serviceActionParameter.isMandatory) {
                                                dummyPageItem.Mandatory = true;
                                            }
                                            var datePicker = new HP.HPTRIM.Form.DateDecorator(dummyPageItem, _this.trimClient.getDateFormat());
                                            datePicker.submitPropertyName = serviceActionParameter.parameterName;
                                            if (serviceActionParameter.defaultClear != true) {
                                                datePicker.setByDate(new Date());
                                            }
                                            if (serviceActionParameter.objectPropertyName) {
                                                var previousValue = infoObject[serviceActionParameter.objectPropertyName];
                                                if (previousValue && !previousValue.IsClear) {
                                                    var returnValue = void 0;
                                                    if (serviceActionParameter.type == "Datetime") {
                                                        returnValue = HP.HPTRIM.Utils.String.formatDateTime(previousValue, _this.trimClient.getDateFormat());
                                                        ;
                                                    }
                                                    else {
                                                        returnValue = HP.HPTRIM.Utils.String.formatDate(previousValue, _this.trimClient.getDateFormat());
                                                    }
                                                    datePicker.Value({ DateTime: returnValue });
                                                }
                                            }
                                            me.fieldDecorators.push(datePicker);
                                            me.rawControls.push(datePicker);
                                            currentField = datePicker;
                                            break;
                                        }
                                    case "Boolean":
                                    case "boolean":
                                        {
                                            var dummyPageItem = {
                                                Caption: serviceActionParameter.caption,
                                                Format: "Boolean",
                                                Name: "",
                                                Value: ko.observable(null),
                                                enable: true
                                            };
                                            var boolPicker = new HP.HPTRIM.Form.BooleanDecorator(dummyPageItem);
                                            boolPicker.submitPropertyName = serviceActionParameter.parameterName;
                                            if (serviceActionParameter.defaultClear != true) {
                                                boolPicker.Value(true);
                                            }
                                            if (serviceActionParameter.objectPropertyName) {
                                                var previousValue = infoObject[serviceActionParameter.objectPropertyName];
                                                if (previousValue === true || previousValue.Value === true) {
                                                    boolPicker.Value(true);
                                                }
                                                else {
                                                    boolPicker.Value(false);
                                                }
                                            }
                                            me.fieldDecorators.push(boolPicker);
                                            me.rawControls.push(boolPicker);
                                            currentField = boolPicker;
                                            break;
                                        }
                                    case "currency":
                                        {
                                            var dummyPageItem = {
                                                Caption: serviceActionParameter.caption,
                                                Format: "currency",
                                                Name: "",
                                                Value: ko.observable(null),
                                            };
                                            var decimalDecorator = new HP.HPTRIM.Form.DecimalDecorator(dummyPageItem);
                                            decimalDecorator.submitPropertyName = serviceActionParameter.parameterName;
                                            me.fieldDecorators.push(decimalDecorator);
                                            if (serviceActionParameter.objectPropertyName) {
                                                var previousValue = infoObject[serviceActionParameter.objectPropertyName];
                                                if (previousValue && (previousValue.Value || previousValue.Value === 0)) {
                                                    decimalDecorator.Value(previousValue.Value);
                                                }
                                                else if (previousValue || previousValue === 0) {
                                                    decimalDecorator.Value(previousValue);
                                                }
                                            }
                                            if (serviceActionParameter.readonly) {
                                                decimalDecorator.enabled(false);
                                            }
                                            me.rawControls.push(decimalDecorator);
                                            currentField = decimalDecorator;
                                            break;
                                        }
                                    case "file":
                                        {
                                            var dummyPageItem = {
                                                Caption: serviceActionParameter.caption,
                                                Format: "FileUpload",
                                                Name: "",
                                                Value: ko.observable(null),
                                            };
                                            if (serviceActionParameter.isMandatory) {
                                                dummyPageItem.Mandatory = true;
                                            }
                                            var fileInputDecorator = new HP.HPTRIM.Form.FileUploadDecorator(_this.trimClient, dummyPageItem);
                                            fileInputDecorator.submitPropertyName = serviceActionParameter.parameterName;
                                            me.fieldDecorators.push(fileInputDecorator);
                                            if (serviceActionParameter.readonly) {
                                                fileInputDecorator.enabled(false);
                                            }
                                            me.rawControls.push(fileInputDecorator);
                                            currentField = fileInputDecorator;
                                            me.visible.subscribe(function (newValue) {
                                                if (newValue) {
                                                    me.cancelHandler();
                                                }
                                            });
                                            break;
                                        }
                                    default:
                                        {
                                        }
                                }
                                if (serviceActionParameter.dependsOn) {
                                    var dependsOnParameter = serviceActionParameter.dependsOn.parameterName;
                                    var dependentItemPicker = _.find(me.itemPickers, function (itemPicker) {
                                        return itemPicker.submitPropertyName == dependsOnParameter;
                                    });
                                    if (dependentItemPicker) {
                                        dependentItemPicker.value.subscribe(function (newValue) {
                                            if (newValue == serviceActionParameter.dependsOn.parameterValue) {
                                            }
                                        });
                                    }
                                    var dependentField = _.find(me.fieldDecorators, function (fieldDecorator) {
                                        return fieldDecorator.submitPropertyName == dependsOnParameter;
                                    });
                                    if (dependentField) {
                                        if (currentField) {
                                            var currentFieldMandatory = false;
                                            if (currentField["Mandatory"])
                                                currentFieldMandatory = currentField["Mandatory"];
                                            dependentField.Value.subscribe(function (newValue) {
                                                if (newValue == serviceActionParameter.dependsOn.parameterValue) {
                                                    currentField.enabled(true);
                                                    if (currentFieldMandatory === true)
                                                        currentField["Mandatory"] = true;
                                                }
                                                else {
                                                    currentField.enabled(false);
                                                    currentField.error('');
                                                    if (currentFieldMandatory === true)
                                                        currentField["Mandatory"] = false;
                                                }
                                            });
                                        }
                                    }
                                }
                            });
                            _.each(updateTask.propertiesToUpdate, function (propertyToUpdate) {
                                if (propertyToUpdate.requiresInput) {
                                    var propertyDef = _this.trimClient.getMainObjectPropertyDefFromCache(updateObjectType, propertyToUpdate.propertyId);
                                    switch (propertyDef.PFFormat) {
                                        case "Object":
                                            var itemPicker = HP.HPTRIM.Form.TrimObjectDecorator.makeTrimItemPicker(_this.trimClient, propertyDef.ObjectType, propertyDef.Property.Caption, propertyDef.Property.Caption, propertyToUpdate.isMandatory);
                                            itemPicker.submitPropertyName = propertyToUpdate.propertyId;
                                            if (propertyToUpdate.purpose || propertyToUpdate.purpose === 0) {
                                                itemPicker.purpose = propertyToUpdate.purpose;
                                            }
                                            if (propertyToUpdate.allowNewLocation && propertyDef.ObjectType == HPTRIM.BaseObjectTypes.Location.name) {
                                                var createNewLocationPlugin = new HP.HPTRIM.Field.Plugin.CreatingLocationPickerPlugin(_this.trimClient);
                                                itemPicker.addPlugin(createNewLocationPlugin);
                                                itemPicker['Readonly'] = false;
                                            }
                                            if (infoObject[propertyDef.Id]) {
                                                var propertyType = HPTRIM.Utils.TrimHelper.toBaseObjectType(propertyDef.ObjectType);
                                                if (propertyType == HPTRIM.BaseObjectTypes.Record) {
                                                    var recordNameValue = infoObject[propertyDef.Id].RecordTypedTitle;
                                                    if (recordNameValue && recordNameValue.Value !== undefined) {
                                                        recordNameValue = recordNameValue.Value;
                                                    }
                                                    if (!recordNameValue) {
                                                        recordNameValue = infoObject[propertyDef.Id].RecordNumber;
                                                        if (recordNameValue && recordNameValue.Value !== undefined) {
                                                            recordNameValue = recordNameValue.Value;
                                                        }
                                                    }
                                                    var currentPropertyValue = new HPTRIM.TrimBaseObject(HPTRIM.BaseObjectTypes.Record, infoObject[propertyDef.Id].Uri, recordNameValue);
                                                    if (infoObject[propertyDef.Id].Uri != 0) {
                                                        currentPropertyValue.hasIcon = true;
                                                        currentPropertyValue.iconId = infoObject.RecordContainer.Icon.Id;
                                                        itemPicker.setValue(currentPropertyValue);
                                                        itemPicker.isEditing(false);
                                                    }
                                                    else {
                                                        itemPicker.setValue(currentPropertyValue);
                                                    }
                                                }
                                                else {
                                                    var nameValue = infoObject[propertyDef.Id].name;
                                                    if (!nameValue) {
                                                        if (infoObject[propertyDef.Id].LocationFormattedName) {
                                                            nameValue = infoObject[propertyDef.Id].LocationFormattedName.Value ? infoObject[propertyDef.Id].LocationFormattedName.Value : infoObject[propertyDef.Id].LocationFormattedName;
                                                        }
                                                    }
                                                    if (!nameValue) {
                                                        infoObject[propertyDef.Id].Uri;
                                                    }
                                                    if (nameValue) {
                                                        var currentPropertyValue = new HPTRIM.TrimBaseObject(propertyType, infoObject[propertyDef.Id].Uri, nameValue);
                                                        currentPropertyValue.hasIcon = true;
                                                        currentPropertyValue.iconId = infoObject[propertyDef.Id].Icon.Id;
                                                        itemPicker.setValue(currentPropertyValue);
                                                        itemPicker.isEditing(false);
                                                    }
                                                }
                                            }
                                            if (propertyToUpdate.objectFilter) {
                                                var filter = propertyToUpdate.objectFilter;
                                                var filterOk = true;
                                                for (var i = 0; i < propertyToUpdate.objectFilterParameters.length; i++) {
                                                    var propertyFilterName = propertyToUpdate.objectFilterParameters[i].property;
                                                    var propertyFilterType = propertyToUpdate.objectFilterParameters[i].type;
                                                    var requiredProperty = infoObject[propertyFilterName];
                                                    if (requiredProperty !== undefined) {
                                                        if (propertyFilterType == "Object") {
                                                            if (propertyToUpdate.objectFilterParameters[i].subProperty) {
                                                                requiredProperty = requiredProperty[propertyToUpdate.objectFilterParameters[i].subProperty];
                                                                if (requiredProperty.Value !== undefined) {
                                                                    requiredProperty = requiredProperty.Value;
                                                                }
                                                            }
                                                            else {
                                                                requiredProperty = requiredProperty.Uri;
                                                            }
                                                        }
                                                    }
                                                    if (requiredProperty) {
                                                        filter = filter.replace("{" + i + "}", requiredProperty);
                                                    }
                                                    else {
                                                        filterOk = false;
                                                    }
                                                }
                                                if (filterOk) {
                                                    itemPicker.filterClause(filter);
                                                }
                                            }
                                            me.itemPickers.push(itemPicker);
                                            me.rawControls.push(itemPicker);
                                            break;
                                        case "String":
                                            var dummyPageItem = {
                                                Caption: propertyDef.Property.Caption,
                                                Format: "String",
                                                Name: "",
                                                Mandatory: propertyToUpdate.isMandatory,
                                                Value: ko.observable(null)
                                            };
                                            var stringDecorator = new HP.HPTRIM.Form.StringDecorator(dummyPageItem);
                                            if (infoObject[propertyDef.Id]) {
                                                var currentStringValue = infoObject[propertyDef.Id].Value ? infoObject[propertyDef.Id].Value : infoObject[propertyDef.Id];
                                                stringDecorator.Value(currentStringValue);
                                            }
                                            stringDecorator.submitPropertyName = propertyToUpdate.propertyId;
                                            me.fieldDecorators.push(stringDecorator);
                                            me.rawControls.push(stringDecorator);
                                            break;
                                        case "Enum":
                                            var dummyPageItem = {
                                                Caption: propertyDef.Property.Caption,
                                                Format: "Enum",
                                                Name: ""
                                            };
                                            var enumPicker = new HP.HPTRIM.Form.EnumDecorator(_this.trimClient, dummyPageItem);
                                            var comboBox = HP.HPTRIM.Field.TrimEnumComboBoxFactory.makeComboBox(_this.trimClient, propertyDef.Property.EnumType, undefined, infoObject);
                                            comboBox.enumName = propertyDef.Property.EnumType;
                                            comboBox.Caption = propertyDef.Property.Caption;
                                            comboBox.getData();
                                            enumPicker = $.extend(enumPicker, comboBox);
                                            if (infoObject[propertyDef.Id]) {
                                                enumPicker.Value(infoObject[propertyDef.Id].Value);
                                            }
                                            enumPicker.submitPropertyName = propertyToUpdate.propertyId;
                                            me.fieldDecorators.push(enumPicker);
                                            me.rawControls.push(enumPicker);
                                            break;
                                        case "Date":
                                        case "Datetime":
                                            var dummyPageItem = {
                                                Caption: propertyDef.Property.Caption,
                                                Format: "Datetime",
                                                Name: "",
                                                Value: ko.observable(null),
                                            };
                                            var datePicker = new HP.HPTRIM.Form.DateDecorator(dummyPageItem, _this.trimClient.getDateFormat());
                                            datePicker.submitPropertyName = propertyToUpdate.propertyId;
                                            me.fieldDecorators.push(datePicker);
                                            me.rawControls.push(datePicker);
                                            if (propertyToUpdate.propertyId) {
                                                var previousValue = infoObject[propertyToUpdate.propertyId];
                                                if (previousValue && !previousValue.IsClear) {
                                                    if (previousValue.StringValue) {
                                                        datePicker.Value({ DateTime: previousValue.StringValue });
                                                    }
                                                }
                                            }
                                            break;
                                        case "Boolean":
                                            var dummyPageItem = {
                                                Caption: propertyDef.Property.Caption,
                                                Format: "Boolean",
                                                Name: "",
                                                Value: ko.observable(null),
                                                enable: true
                                            };
                                            var boolPicker = new HP.HPTRIM.Form.BooleanDecorator(dummyPageItem);
                                            boolPicker.submitPropertyName = propertyToUpdate.propertyId;
                                            if (propertyToUpdate.clearValue != true) {
                                                boolPicker.Value(true);
                                            }
                                            if (propertyToUpdate.propertyId) {
                                                var previousValue = infoObject[propertyToUpdate.propertyId];
                                                if (previousValue === true || (previousValue && previousValue.Value === true)) {
                                                    boolPicker.Value(true);
                                                }
                                                else {
                                                    boolPicker.Value(false);
                                                }
                                            }
                                            me.fieldDecorators.push(boolPicker);
                                            me.rawControls.push(boolPicker);
                                            break;
                                        case "Currency":
                                            var dummyPageItem = {
                                                Caption: propertyDef.Property.Caption,
                                                Format: "Currency",
                                                Name: "",
                                                Value: ko.observable(null),
                                                enable: true
                                            };
                                            var currencyDecorator = new HP.HPTRIM.Form.CurrencyDecorator(dummyPageItem);
                                            currencyDecorator.submitPropertyName = propertyToUpdate.propertyId;
                                            if (infoObject[propertyDef.Id]) {
                                                var currentMoneyValue = infoObject[propertyDef.Id].Value ? infoObject[propertyDef.Id].Value : infoObject[propertyDef.Id];
                                                currencyDecorator.Value(currentMoneyValue);
                                            }
                                            me.fieldDecorators.push(currencyDecorator);
                                            me.rawControls.push(currencyDecorator);
                                            break;
                                        case "Geography":
                                            var dummyPageItem = {
                                                Caption: propertyDef.Property.Caption,
                                                Format: "Geography",
                                                Id: propertyToUpdate.propertyId,
                                                Value: ko.observable(null),
                                                enable: true
                                            };
                                            var geographyDecorator = new HP.HPTRIM.Form.GeographyDecorator(_this.trimClient, dummyPageItem);
                                            geographyDecorator.submitPropertyName = propertyToUpdate.propertyId;
                                            if (infoObject[propertyDef.Id]) {
                                                var currentGPSLocationValue = infoObject[propertyDef.Id].Value;
                                                geographyDecorator.setValue(currentGPSLocationValue);
                                            }
                                            me.fieldDecorators.push(geographyDecorator);
                                            me.rawControls.push(geographyDecorator);
                                            break;
                                    }
                                }
                            });
                        };
                        MainObjectUpdateTaskForm.prototype.resetPanel = function () {
                            this.okText(HP.HPTRIM.Messages.web_save);
                            this.alertDetails("");
                            this.errorVisible(false);
                        };
                        MainObjectUpdateTaskForm.prototype.preparePanel = function (title, caption, okText) {
                            this.resetPanel();
                            this.title(title);
                            this.caption(caption);
                            if (okText) {
                                this.okText(okText);
                            }
                            else {
                                this.okText(HP.HPTRIM.Messages.web_save);
                            }
                        };
                        MainObjectUpdateTaskForm.prototype.doTask = function () {
                            var me = this;
                            if (this.validateAndHandleErrors()) {
                                var parameterList = [];
                                _.each(me.fieldDecorators, function (fieldDecorator) {
                                    if (fieldDecorator.submitPropertyName) {
                                        if (fieldDecorator.Format == "Date" || fieldDecorator.Format == "Datetime") {
                                            parameterList.push({
                                                "name": fieldDecorator.submitPropertyName,
                                                "value": fieldDecorator.getValueEx()
                                            });
                                        }
                                        else if (fieldDecorator.Format == "FileUpload") {
                                            var fileuploaderField = fieldDecorator.Value();
                                            if (fileuploaderField !== undefined && fileuploaderField !== null && fileuploaderField.uploadedFiles() !== null && fileuploaderField.uploadedFiles().length != undefined && fileuploaderField.uploadedFiles().length > 0) {
                                                var uploadedFileName = fileuploaderField.uploadedFiles()[0].UploadedFileName;
                                                var checkInAs = fileuploaderField.uploadedFiles()[0].OriginalFileName;
                                                checkInAs = checkInAs.replace(/(^")|("$)/g, '');
                                                parameterList.push({
                                                    "name": fieldDecorator.submitPropertyName,
                                                    "value": uploadedFileName
                                                });
                                                parameterList.push({
                                                    "name": "CheckInAs",
                                                    "value": 'ServiceUpload/' + checkInAs,
                                                });
                                            }
                                        }
                                        else {
                                            parameterList.push({
                                                "name": fieldDecorator.submitPropertyName,
                                                "value": fieldDecorator.Value()
                                            });
                                        }
                                    }
                                });
                                _.each(me.itemPickers, function (itemPicker) {
                                    if (itemPicker.submitPropertyName) {
                                        parameterList.push({
                                            "name": itemPicker.submitPropertyName,
                                            "value": itemPicker.getValue()
                                        });
                                    }
                                });
                                this.saveHandler(parameterList);
                            }
                        };
                        MainObjectUpdateTaskForm.prototype.viewHandler = function () {
                            var me = this;
                            var uriFromTmpl;
                            var extFromTmpl;
                            var recNo;
                            var recTitle;
                            var showRevisionButton;
                            var revisionCount = 0;
                            var showRenditionButton = false;
                            var recordIsCheckedOut;
                            me.wireUpDocumentViewLookup(me.objectRecordDetailComponent);
                            var field = me.infoObject;
                            if (field) {
                                if (field.TrimType == 'Record') {
                                    if (field.ChildRenditions != null && field.ChildRenditions.length > 0)
                                        showRenditionButton = true;
                                    uriFromTmpl = field.Uri;
                                    extFromTmpl = field.RecordExtension.Value;
                                    recNo = field.RecordNumber.Value;
                                    recTitle = field.RecordTitle.Value;
                                    if (field.RecordRevisionCount.Value) {
                                        revisionCount = field.RecordRevisionCount.Value;
                                    }
                                    else {
                                        revisionCount = field.RecordRevisionCount;
                                    }
                                    recordIsCheckedOut = field.RecordIsCheckedOut.Value;
                                }
                                me.handleViewClick(uriFromTmpl, extFromTmpl, recNo, recTitle, revisionCount, recordIsCheckedOut, field.RecordSpURL.Value, field);
                            }
                        };
                        MainObjectUpdateTaskForm.prototype.validateAndHandleErrors = function () {
                            var allGood = true;
                            var errorToShow = false;
                            var errors = [];
                            _.each(this.itemPickers, function (itemPicker) {
                                if (!itemPicker.getValue()) {
                                    errors.push(HPTRIM.Utils.String.format(HP.HPTRIM.Messages.core_fieldBlank, [itemPicker.label()]));
                                    errorToShow = true;
                                    allGood = false;
                                }
                                else if (itemPicker.getValue().Uri == "0") {
                                    errors.push(HPTRIM.Utils.String.format(HP.HPTRIM.Messages.core_fieldBlank, [itemPicker.label()]));
                                    errorToShow = true;
                                    allGood = false;
                                }
                            });
                            _.each(this.fieldDecorators, function (fieldDecorator) {
                                if (fieldDecorator["Mandatory"] === true) {
                                    var fieldValue = fieldDecorator.Value();
                                    if (fieldValue === undefined || fieldValue === null || fieldValue === "") {
                                        var errMessage = HPTRIM.Utils.String.format(HPTRIM.Messages.web_mandatoryFieldNeedsValue, [fieldDecorator.Caption]);
                                        errors.push(errMessage);
                                        fieldDecorator.setError(errMessage);
                                        allGood = false;
                                    }
                                    if (fieldValue && fieldValue.IsClear === true) {
                                        allGood = false;
                                        var errMessage = HPTRIM.Utils.String.format(HPTRIM.Messages.web_mandatoryFieldNeedsValue, [fieldDecorator.Caption]);
                                        errors.push(errMessage);
                                        fieldDecorator.setError(errMessage);
                                    }
                                }
                            });
                            if (!allGood && errors.length > 0 && errorToShow) {
                                this.alertDetails(errors[0]);
                                this.errorVisible(true);
                            }
                            return allGood;
                        };
                        return MainObjectUpdateTaskForm;
                    }(HP.HPTRIM.Framework.Components.Layouts.Panel));
                    Plugins.MainObjectUpdateTaskForm = MainObjectUpdateTaskForm;
                })(Plugins = Panels.Plugins || (Panels.Plugins = {}));
            })(Panels = App.Panels || (App.Panels = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Panels;
            (function (Panels) {
                var Plugins;
                (function (Plugins) {
                    "use strict";
                    var CheckInForm = (function (_super) {
                        __extends(CheckInForm, _super);
                        function CheckInForm(trimClient, trimApp) {
                            var _this = this;
                            _super.call(this, 'templates/Framework/Overlays/CheckInOverlay');
                            this.checkInSource = ko.observable(App.ActionHandlers.CheckInSource.localFile);
                            this.showMakeNewRevision = ko.observable(true);
                            this.checkedOutToURI = ko.observable("");
                            this.recordNumber = ko.observable("");
                            this.fileName = ko.observable("");
                            this.fileSize = ko.observable(0);
                            this.errorVisible = ko.observable(false);
                            this.alertDetails = ko.observable("");
                            this.comments = this.comments = ko.observable("");
                            this.makeNewRevision = ko.observable(true);
                            this.discardChanges = ko.observable(false);
                            this.previewURL = ko.observable("");
                            this.doUpload = function () { };
                            this.afterRenderCallback = function () { };
                            this.successCallback = null;
                            this.failCallback = null;
                            this.requestHandler = function () {
                            };
                            this.finishHandler = function () {
                            };
                            this.cancelHandler = function () {
                            };
                            this.trimClient = trimClient;
                            this._trimApp = trimApp;
                            this.cssClass('as-spa-check-in-form');
                            var me = this;
                            var errorSubscription = function (newValue) {
                                me.errorVisible(newValue.length != 0);
                                me.alertDetails(newValue);
                            };
                            this.uri = ko.observable("");
                            this.keepCheckedOut = ko.observable(false);
                            this.keepCheckedOutCheckbox = this.initialiseCheckBox(this.keepCheckedOut, HPTRIM.Messages.web_checkInKeepCheckedOut);
                            this.keepCheckedOut.subscribe(function (newValue) {
                                if (newValue) {
                                    me.discardChanges(false);
                                }
                            });
                            this.showDiscardChanges = ko.computed(function () {
                                return me.checkedOutToURI() != "";
                            });
                            this.discardChangesCheckbox = this.initialiseCheckBox(this.discardChanges, HPTRIM.Messages.web_discardMods);
                            this.discardChangesCheckbox.hide(!this.showDiscardChanges());
                            this.showFileUpload = ko.computed(function () {
                                return !me.discardChanges() && me.checkInSource() == App.ActionHandlers.CheckInSource.localFile;
                            });
                            this.showWebDAVFileInfo = ko.computed(function () {
                                return !me.discardChanges() && me.checkInSource() == App.ActionHandlers.CheckInSource.webdav;
                            });
                            this.isCheckedOutToOtherUser = ko.computed(function () {
                                return me.checkedOutToURI() != "" && me.checkedOutToURI() != me.trimClient.getDatabase().getCurrentUser().Uri;
                            });
                            this.checkInCommentField = new HP.HPTRIM.Form.StringDecorator({
                                Value: this.comments,
                                CharacterLimit: 250,
                                Caption: HP.HPTRIM.Messages.web_checkInComments
                            });
                            this.isCheckedOutToOtherUser.subscribe(function (newvalue) {
                                if (newvalue) {
                                    me.discardChanges(true);
                                }
                            });
                            me.makeNewRevisionCheckbox = this.initialiseCheckBox(this.makeNewRevision, HPTRIM.Messages.web_checkInMakeNewRevision);
                            this.makeNewRevision.subscribe(function (newValue) {
                                if (newValue) {
                                    me.discardChanges(false);
                                }
                            });
                            this.discardChanges.subscribe(function (newValue) {
                                if (newValue) {
                                    me.makeNewRevision(false);
                                    me.keepCheckedOut(false);
                                    me.fileUploader.clearForm();
                                    me.fileUploader.uploadedFiles([]);
                                    me.fileUploader.files([]);
                                }
                            });
                            this.fileUploader = this._trimApp.trimFileUploadComponent;
                            this.fileUploader.clearForm();
                            this.fileUploader.uploadedFiles([]);
                            this.fileUploader.files([]);
                            this.afterRenderCallback = function (elements) {
                                _this.fileUploader.templateConfiguration.afterRender();
                            };
                            this.doUpload = function () {
                                if (me.fileUploader.files().length == 0) {
                                    return;
                                }
                                if (me.fileUploader.files().length == 1 && me.fileUploader.uploadedFiles().length == 1) {
                                    return;
                                }
                                me.fileUploader.start();
                            };
                        }
                        CheckInForm.prototype.resetPanel = function () {
                            this.uri("");
                            this.comments("");
                            this.recordNumber("");
                            this.fileName("");
                            this.fileSize(0);
                            this.discardChanges(false);
                            this.keepCheckedOut(false);
                            this.showMakeNewRevision(true);
                            this.checkInSource(App.ActionHandlers.CheckInSource.localFile);
                            this.checkedOutToURI("");
                            this.makeNewRevision(true);
                            this.fileUploader.files([]);
                            this.fileUploader.uploadedFiles([]);
                            this.alertDetails("");
                            this.errorVisible(false);
                            this.previewURL("");
                        };
                        CheckInForm.prototype.validateAndHandleErrors = function () {
                            var result = true;
                            if (this.showFileUpload() && this.fileUploader.uploadedFiles().length == 0) {
                                this.alertDetails(HP.HPTRIM.Messages.web_pleaseUploadFile);
                                this.errorVisible(true);
                                result = false;
                            }
                            return result;
                        };
                        CheckInForm.prototype.createLocalCheckinRequest = function () {
                            var me = this;
                            var data = {};
                            data.keepBookedOut = me.keepCheckedOut();
                            data.makeNewRevision = me.makeNewRevision();
                            if (!me.discardChanges() && me.fileUploader.uploadedFiles().length != 0) {
                                data.RecordFilePath = me.fileUploader.uploadedFiles()[0].UploadedFileName;
                            }
                            return new HPTRIM.CheckInRequest(me.trimClient, me.uri(), data, me.discardChanges(), me.comments());
                        };
                        CheckInForm.prototype.updatePreview = function () {
                            var me = this;
                            if (me.checkInSource() == App.ActionHandlers.CheckInSource.webdav) {
                                var previewRequest = new HPTRIM.WebdavPreviewRequest(me.trimClient, me.uri());
                                previewRequest.doRequest().done(function (result) {
                                    me.previewURL(result.previewURL);
                                }).fail(function (errorResponse) {
                                    var errorMsg = HP.HPTRIM.Messages.web_unableToConnectToWebServices;
                                    if (errorResponse.responseJSON && errorResponse.responseJSON.ResponseStatus && errorResponse.responseJSON.ResponseStatus.Message) {
                                        errorMsg = errorResponse.responseJSON.ResponseStatus.Message;
                                    }
                                    ko.postbox.publish(App.TRIMApp.NOTIFICATION_ERROR_TOPIC, errorMsg);
                                });
                            }
                        };
                        CheckInForm.prototype.checkIn = function () {
                            var me = this;
                            var createWOPICommitRequest = function () {
                                return new HPTRIM.WOPICommitRequest(me.trimClient, me.uri(), me.keepCheckedOut(), me.makeNewRevision(), me.comments());
                            };
                            var createWebdavCommitRequest = function () {
                                return new HPTRIM.WebdavCommitRequest(me.trimClient, me.uri(), me.keepCheckedOut(), me.makeNewRevision(), me.comments());
                            };
                            var createWebdavDiscardRequest = function () {
                                return new HPTRIM.WebdavDiscardRequest(me.trimClient, me.uri(), me.keepCheckedOut(), me.comments());
                            };
                            var createWOPIDiscardRequest = function () {
                                return new HPTRIM.WOPIDiscardRequest(me.trimClient, me.uri(), me.keepCheckedOut(), me.comments());
                            };
                            if (me.validateAndHandleErrors()) {
                                var source = me.checkInSource();
                                var request = null;
                                if (source == App.ActionHandlers.CheckInSource.webdav) {
                                    request = me.discardChanges() ? createWebdavDiscardRequest() : createWebdavCommitRequest();
                                }
                                else if (source == App.ActionHandlers.CheckInSource.wopi) {
                                    request = me.discardChanges() ? createWOPIDiscardRequest() : createWOPICommitRequest();
                                }
                                else {
                                    request = me.createLocalCheckinRequest();
                                }
                                request.doRequest().done(function (result) {
                                    me.finishHandler();
                                    if (me.successCallback) {
                                        var resultObj = null;
                                        try {
                                            resultObj = result.Results[0];
                                        }
                                        catch (iDontCareWhatThisIs) {
                                            resultObj = null;
                                        }
                                        me.successCallback(me.keepCheckedOut(), resultObj);
                                    }
                                    else {
                                        if (me.failCallback) {
                                            me.failCallback(result);
                                        }
                                        else {
                                            me.finishHandler();
                                        }
                                    }
                                }).fail(function (result) {
                                    if (me.failCallback) {
                                        me.failCallback(result);
                                    }
                                    else {
                                        me.finishHandler();
                                    }
                                });
                            }
                        };
                        CheckInForm.prototype.initialiseCheckBox = function (backingObservable, caption) {
                            var checkBoxPageItem = {
                                Caption: caption,
                                Format: "Boolean",
                                Name: "",
                                Value: backingObservable,
                            };
                            return new HPTRIM.Form.BooleanDecorator(checkBoxPageItem);
                        };
                        return CheckInForm;
                    }(HP.HPTRIM.Framework.Components.Layouts.Panel));
                    Plugins.CheckInForm = CheckInForm;
                })(Plugins = Panels.Plugins || (Panels.Plugins = {}));
            })(Panels = App.Panels || (App.Panels = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Panels;
            (function (Panels) {
                var Plugins;
                (function (Plugins) {
                    "use strict";
                    var UncompleteActivityForm = (function (_super) {
                        __extends(UncompleteActivityForm, _super);
                        function UncompleteActivityForm() {
                            _super.call(this, 'templates/Framework/Overlays/UncompleteOverlay');
                            this.errorVisible = ko.observable(false);
                            this.alertDetails = ko.observable("");
                            this.finishHandler = function () {
                            };
                            this.uncompleteHandler = function (reason) {
                            };
                            this.cssClass('as-spa-check-in-form');
                            var me = this;
                            this.reason = ko.observable("");
                            this.reasonField = new HP.HPTRIM.Form.StringDecorator({
                                Value: this.reason,
                                CharacterLimit: 250,
                                Caption: HP.HPTRIM.Messages.web_reason
                            });
                        }
                        UncompleteActivityForm.prototype.resetPanel = function () {
                            this.reason("");
                            this.alertDetails("");
                            this.errorVisible(false);
                        };
                        UncompleteActivityForm.prototype.onUncomplete = function () {
                            if (this.validate()) {
                                this.uncompleteHandler(this.reason());
                            }
                        };
                        UncompleteActivityForm.prototype.validate = function () {
                            var me = this;
                            if (this.reason().trim().length == 0) {
                                me.errorVisible(true);
                                me.alertDetails(HP.HPTRIM.Messages.core_fieldBlank.replace("{0}", HP.HPTRIM.Messages.web_reason));
                                return false;
                            }
                            return true;
                        };
                        return UncompleteActivityForm;
                    }(HP.HPTRIM.Framework.Components.Layouts.Panel));
                    Plugins.UncompleteActivityForm = UncompleteActivityForm;
                })(Plugins = Panels.Plugins || (Panels.Plugins = {}));
            })(Panels = App.Panels || (App.Panels = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Panels;
            (function (Panels) {
                var Plugins;
                (function (Plugins) {
                    "use strict";
                    var CreateAdditionalRequestForm = (function (_super) {
                        __extends(CreateAdditionalRequestForm, _super);
                        function CreateAdditionalRequestForm(trimClient) {
                            _super.call(this, 'templates/Framework/Overlays/AdditionalRequestOverlay');
                            this.errorVisible = ko.observable(false);
                            this.alertDetails = ko.observable("");
                            this.requestHandler = function (locationUri) {
                            };
                            this.cancelHandler = function () {
                            };
                            this.cssClass('as-spa-saved-search-form');
                            var me = this;
                            var errorSubscription = function (newValue) {
                                me.errorVisible(newValue.length != 0);
                                me.alertDetails(newValue);
                            };
                            this.requestor = new HP.HPTRIM.Field.LocationPicker(trimClient, HP.HPTRIM.Messages.web_requestSelectRequestorInputLabel, false, errorSubscription);
                            this.requestor.purpose = HPTRIM.LocationPurpose.Requester;
                        }
                        CreateAdditionalRequestForm.prototype.resetPanel = function () {
                            this.requestor.clear();
                            this.alertDetails("");
                            this.errorVisible(false);
                        };
                        CreateAdditionalRequestForm.prototype.validateAndHandleErrors = function () {
                            var result = false;
                            if (this.requestor.getValue()) {
                                result = true;
                            }
                            else {
                                this.alertDetails(HP.HPTRIM.Messages.web_selectLocationForRequest);
                                this.errorVisible(true);
                            }
                            return result;
                        };
                        CreateAdditionalRequestForm.prototype.doRequest = function () {
                            var me = this;
                            if (this.validateAndHandleErrors()) {
                                this.requestHandler(this.requestor.getValue().Uri);
                            }
                        };
                        return CreateAdditionalRequestForm;
                    }(HP.HPTRIM.Framework.Components.Layouts.Panel));
                    Plugins.CreateAdditionalRequestForm = CreateAdditionalRequestForm;
                })(Plugins = Panels.Plugins || (Panels.Plugins = {}));
            })(Panels = App.Panels || (App.Panels = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Panels;
            (function (Panels) {
                var Plugins;
                (function (Plugins) {
                    "use strict";
                    var LocationForm = (function (_super) {
                        __extends(LocationForm, _super);
                        function LocationForm() {
                            _super.call(this, 'templates/Framework/Overlays/CreateLocationOverlay');
                            this.locationDataEntryForm = ko.observable(null);
                            this.close = function () { };
                            this.typeOfLocation = ko.observable("");
                            this.showMessage = ko.observable(false);
                            this.message = ko.observable("");
                            this.cssClass('as-spa-location-form');
                            this.topicToPublishOnFormSubmit = ko.observable("");
                            var me = this;
                            this.locationDataEntryForm.subscribe(function (newValue) {
                                me.locationDataEntryForm().afterSaveHandler = function (result) {
                                    var location = result.Results[0];
                                    ko.postbox.publish(me.topicToPublishOnFormSubmit(), location);
                                    me.close();
                                };
                                me.locationDataEntryForm().errorHandler = function (err) {
                                    me.showMessage(true);
                                    if (err.ResponseStatus && err.ResponseStatus.Message) {
                                        me.message(err.ResponseStatus.Message);
                                    }
                                    else if (err != undefined) {
                                        me.message(err);
                                    }
                                    else {
                                        me.message(HP.HPTRIM.Messages.web_errorCreatingLocation);
                                    }
                                };
                            });
                        }
                        LocationForm.prototype.setDataEntryForm = function (form) {
                            this.locationDataEntryForm(form);
                        };
                        LocationForm.prototype.submit = function () {
                            if (this.locationDataEntryForm() == null) {
                                return;
                            }
                            this.locationDataEntryForm().submit();
                        };
                        return LocationForm;
                    }(HP.HPTRIM.Framework.Components.Layouts.Panel));
                    Plugins.LocationForm = LocationForm;
                })(Plugins = Panels.Plugins || (Panels.Plugins = {}));
            })(Panels = App.Panels || (App.Panels = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Panels;
            (function (Panels) {
                var Plugins;
                (function (Plugins) {
                    "use strict";
                    var SavedSearchForm = (function (_super) {
                        __extends(SavedSearchForm, _super);
                        function SavedSearchForm(trimClient) {
                            _super.call(this, 'templates/Framework/Overlays/SavedSearchOverlay');
                            this.title = ko.observable("");
                            this.queryLabel = HP.HPTRIM.Messages.web_searchQueryInputLabel;
                            this.queryString = ko.observable("");
                            this.sortLabel = HP.HPTRIM.Messages.web_sort;
                            this.sort = ko.observable("");
                            this.filterLabel = HP.HPTRIM.Messages.web_filter;
                            this.filter = ko.observable("");
                            this.searchNameInputLabel = HP.HPTRIM.Messages.web_enterSearchName;
                            this.searchName = ko.observable("");
                            this.searchDescriptionName = ko.observable("");
                            this.searchDescriptionInputLabel = HP.HPTRIM.Messages.web_enterSearchDescription;
                            this.showFavorite = ko.observable(true);
                            this.searchFavorite = ko.observable(false);
                            this.errorVisible = ko.observable(false);
                            this.alertDetails = ko.observable("");
                            this.buttonsEnabled = ko.observable(true);
                            this.searchObject = HPTRIM.BaseObjectTypes.Record;
                            this.uri = ko.observable("");
                            this.saveCallback = function (result) { };
                            this.successCallback = function () { };
                            this.cancelHandler = function () { };
                            this.cssClass('as-spa-saved-search-form');
                            this.trimClient = trimClient;
                            var me = this;
                            var errorSubscription = function (newValue) {
                                me.errorVisible(newValue.length != 0);
                                me.alertDetails(newValue);
                            };
                            this.searchOwnerField = new HP.HPTRIM.Field.LocationPicker(trimClient, HP.HPTRIM.Messages.web_searchSelectOwnerInputLabel, false, errorSubscription);
                            var favoriteCheckboxItem = {
                                Caption: HP.HPTRIM.Messages.web_addToFavorites,
                                Format: "Boolean",
                                Name: "",
                                Value: this.searchFavorite,
                            };
                            this.searchFavoriteCheckbox = new HPTRIM.Form.BooleanDecorator(favoriteCheckboxItem);
                            this.title(HP.HPTRIM.Messages.web_newSavedSearch);
                        }
                        SavedSearchForm.prototype.populatePanel = function (rawSavedSearch, saveCallback) {
                            this.resetPanel(true);
                            this.uri(rawSavedSearch.Uri);
                            this.searchName(rawSavedSearch.SavedSearchName.Value);
                            this.searchDescriptionName(rawSavedSearch.SavedSearchDescription.Value);
                            this.queryString(rawSavedSearch.SavedSearchQueryString.Value);
                            this.filter(rawSavedSearch.SavedSearchFilterString.Value);
                            this.sort(rawSavedSearch.SavedSearchSortString.Value);
                            this.searchFavorite(rawSavedSearch.IsInFavorites);
                            this.title(HPTRIM.Messages.web_update + " " + HPTRIM.BaseObjectTypes.SavedSearch.Caption);
                            this.showFavorite(false);
                            var rawOwner = rawSavedSearch.SavedSearchOwner;
                            if (rawOwner && rawOwner.Uri !== 0 && rawOwner.LocationFormattedName.Value) {
                                var owner = new HPTRIM.TrimBaseObject(HPTRIM.BaseObjectTypes.Location, rawOwner.Uri, rawOwner.LocationFormattedName ? rawOwner.LocationFormattedName.Value : "");
                                if (rawOwner.Icon) {
                                    owner.hasIcon = true;
                                    owner.iconId = rawOwner.Icon.Id;
                                }
                                this.searchOwnerField.setValue(owner);
                            }
                            if (this.searchOwnerField.isEditing()) {
                                this.searchOwnerField.toggleEdit();
                            }
                            this.saveCallback = saveCallback;
                        };
                        SavedSearchForm.prototype.resetPanel = function (clearOwner) {
                            this.title(HP.HPTRIM.Messages.web_newSavedSearch);
                            this.uri("");
                            this.searchName("");
                            this.searchDescriptionName("");
                            var database = this.trimClient.getDatabase();
                            this.queryString("");
                            this.sort("");
                            this.filter("");
                            this.showFavorite(true);
                            if (clearOwner) {
                                this.searchOwnerField.clear();
                            }
                            else {
                                var currentUser = database.currentLoggedInUser();
                                currentUser.hasIcon = true;
                                currentUser.iconId = "locperson";
                                this.searchOwnerField.setDefaultValue(currentUser);
                                if (this.searchOwnerField.isEditing()) {
                                    this.searchOwnerField.isEditing(false);
                                }
                            }
                            this.searchFavorite(false);
                            this.alertDetails("");
                            this.errorVisible(false);
                        };
                        SavedSearchForm.prototype.validateAndHandleErrors = function () {
                            var result = true;
                            if (this.queryString().trim() == "") {
                                this.alertDetails(HP.HPTRIM.Messages.core_fieldBlank.replace("{0}", HP.HPTRIM.Messages.web_searchQueryInputLabel));
                                this.errorVisible(true);
                                result = false;
                                return result;
                            }
                            if (this.searchName().trim() == "") {
                                this.alertDetails(HP.HPTRIM.Messages.core_fieldBlank.replace("{0}", HP.HPTRIM.Messages.web_name));
                                this.errorVisible(true);
                                result = false;
                                return result;
                            }
                            if (this.searchOwnerField.rawValue() && !this.searchOwnerField.getValue()) {
                                this.alertDetails(HP.HPTRIM.Messages.web_invalidSavedSearchOwner);
                                this.errorVisible(true);
                                result = false;
                                return result;
                            }
                            return result;
                        };
                        SavedSearchForm.prototype.saveHandler = function () {
                            if (this.validateAndHandleErrors()) {
                                this.saveSearch();
                            }
                        };
                        SavedSearchForm.prototype.saveSearch = function () {
                            var me = this;
                            var isUpdate = false;
                            me.buttonsEnabled(false);
                            var searchName = this.searchName();
                            var searchDescriptionName = this.searchDescriptionName();
                            var data = {};
                            if (this.uri()) {
                                data.Uri = this.uri();
                                isUpdate = true;
                            }
                            data.SavedSearchName = this.searchName();
                            data.SavedSearchDescription = this.searchDescriptionName();
                            data.SavedSearchOwner = null;
                            data.SavedSearchQueryString = this.queryString();
                            data.SavedSearchSortString = this.sort();
                            data.SavedSearchFilterString = this.filter();
                            if (this.searchOwnerField.getRawValue()) {
                                var owner = this.searchOwnerField.getValue();
                                if (owner) {
                                    data.SavedSearchOwner = owner.Uri;
                                }
                            }
                            data.SavedSearchObjectType = {
                                "Value": this.searchObject.name
                            };
                            data.properties = "SavedSearchName,SavedSearchDescription,SavedSearchOwner,SavedSearchQueryString,SavedSearchSortString,SavedSearchFilterString,SavedSearchObjectType,isInFavorites";
                            data.propertyValue = "Both";
                            var saveSearchRequest = new HPTRIM.SaveSearchRequest(me.trimClient, data);
                            saveSearchRequest.doRequest().done(function (result) {
                                if (me.searchFavorite() && result) {
                                    if (result.Results[0]) {
                                        var favoriteData = {
                                            "Uri": result.Results[0].Uri,
                                            'ActionsToCall': [{
                                                    '__type': 'HP.HPTRIM.ServiceModel.SetUserLabel'
                                                }]
                                        };
                                        var favoriteSaveSearchRequest = new HPTRIM.SaveSearchRequest(me.trimClient, favoriteData);
                                        favoriteSaveSearchRequest.doRequest().done(function (favoriteResult) {
                                            me.successCallback();
                                            if (isUpdate) {
                                                me.saveCallback(result);
                                            }
                                            me.buttonsEnabled(true);
                                        }).fail(function (result) {
                                            me.buttonsEnabled(true);
                                            if (result.ResponseStatus.Message) {
                                                me.alertDetails(HPTRIM.Messages.web_savedSearchCreatedButNotFavorited + " " + result.ResponseStatus.Message);
                                                me.errorVisible(true);
                                            }
                                            else {
                                                me.alertDetails();
                                                me.errorVisible(true);
                                            }
                                        });
                                    }
                                }
                                else {
                                    me.successCallback();
                                    if (isUpdate) {
                                        me.saveCallback(result);
                                    }
                                    me.buttonsEnabled(true);
                                }
                            }).fail(function (result) {
                                me.buttonsEnabled(true);
                                if (result.ResponseStatus.Message) {
                                    me.alertDetails(result.ResponseStatus.Message);
                                    me.errorVisible(true);
                                }
                                else {
                                    me.alertDetails();
                                    me.errorVisible(true);
                                }
                            });
                        };
                        return SavedSearchForm;
                    }(HP.HPTRIM.Framework.Components.Layouts.Panel));
                    Plugins.SavedSearchForm = SavedSearchForm;
                })(Plugins = Panels.Plugins || (Panels.Plugins = {}));
            })(Panels = App.Panels || (App.Panels = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Panels;
            (function (Panels) {
                var Plugins;
                (function (Plugins) {
                    "use strict";
                    var RecordSetAssigneeForm = (function (_super) {
                        __extends(RecordSetAssigneeForm, _super);
                        function RecordSetAssigneeForm(trimClient) {
                            var _this = this;
                            _super.call(this, 'templates/Framework/Overlays/RecordSetAssigneeOverlay');
                            this.errorVisible = ko.observable(false);
                            this.alertDetails = ko.observable("");
                            this.cssClass('as-spa-saved-search-form');
                            this.trimClient = trimClient;
                            var me = this;
                            var errorSubscription = function (newValue) {
                                me.errorVisible(newValue.length != 0);
                                me.alertDetails(newValue);
                            };
                            this.setToLocation = ko.observable(true);
                            var setToLocationCheclboxItem = {
                                Caption: HP.HPTRIM.Messages.web_setToLocation,
                                Format: "Boolean",
                                Name: "",
                                Value: this.setToLocation,
                            };
                            this.setToLocationCheckBox = new HPTRIM.Form.BooleanDecorator(setToLocationCheclboxItem);
                            this.newLocationField = new HP.HPTRIM.Field.LocationPicker(trimClient, HP.HPTRIM.Messages.web_setAssignee, false, errorSubscription);
                            this.newLocationField.submitPropertyName = "SetAssigneeNewAssignee";
                            this.newLocationField.purpose = HPTRIM.LocationPurpose.Current;
                            var locationDueForReturnByItem = {
                                Caption: HP.HPTRIM.Messages.web_dueForReturnBy,
                                Format: "Datetime",
                                Name: "",
                                Value: ko.observable(null),
                            };
                            this.locationDueForReturnBy = new HP.HPTRIM.Form.DateDecorator(locationDueForReturnByItem, this.trimClient.getDateFormat());
                            this.locationDueForReturnBy.submitPropertyName = "SetAssigneeDueForReturnByDate";
                            this.setToHomeLocation = ko.observable(false);
                            var setToHomeLocationCheckboxItem = {
                                Caption: HP.HPTRIM.Messages.web_setToHomeLocation,
                                Format: "Boolean",
                                Name: "",
                                Value: this.setToHomeLocation,
                            };
                            this.setToHomeLocationCheckBox = new HPTRIM.Form.BooleanDecorator(setToHomeLocationCheckboxItem);
                            this.homeLocationName = ko.observable("");
                            this.HomeLocationIcon = ko.observable("");
                            var homeLocationPageItem = {
                                Caption: HP.HPTRIM.Messages.web_homeLocationLabel,
                                Format: "String",
                                Name: "",
                                Value: this.homeLocationName,
                                Icon: this.HomeLocationIcon,
                            };
                            this.homeLocationField = new HP.HPTRIM.Form.StringDecorator(homeLocationPageItem);
                            this.homeLocationField.enabled(false);
                            this.setToEarliestRequestor = ko.observable(false);
                            var setAsEarliestRequestCheckboxItem = {
                                Caption: HP.HPTRIM.Messages.web_setToEarliestRequester,
                                Format: "Boolean",
                                Name: "",
                                Value: this.setToEarliestRequestor,
                            };
                            this.setToEarliestRequestorCheckBox = new HPTRIM.Form.BooleanDecorator(setAsEarliestRequestCheckboxItem);
                            this.earliestRequestorName = ko.observable("");
                            var requestorDueForReturnByItem = {
                                Caption: HP.HPTRIM.Messages.web_dueForReturnBy,
                                Format: "Datetime",
                                Name: "",
                                Value: ko.observable(null),
                            };
                            this.requestorDueForReturnBy = new HP.HPTRIM.Form.DateDecorator(requestorDueForReturnByItem, this.trimClient.getDateFormat());
                            this.requestorDueForReturnBy.submitPropertyName = "SetAssigneeDueForReturnByDate";
                            this.setAsMissing = ko.observable(false);
                            var setAsMissingCheckboxItem = {
                                Caption: HP.HPTRIM.Messages.web_SetAsMissing,
                                Format: "Boolean",
                                Name: "",
                                Value: this.setAsMissing,
                            };
                            this.setAsMissingCheckBox = new HPTRIM.Form.BooleanDecorator(setAsMissingCheckboxItem);
                            var dateEffectivePageItem = {
                                Caption: HP.HPTRIM.Messages.web_effectiveFrom,
                                Format: "Datetime",
                                Name: "",
                                Value: ko.observable(null),
                            };
                            this.effectiveFrom = new HP.HPTRIM.Form.DateDecorator(dateEffectivePageItem, this.trimClient.getDateFormat());
                            this.effectiveFrom.submitPropertyName = "SetAssigneeActualTimeChangeOccurred";
                            if (this.trimClient.getDatabase().currentUserPermissions().RecordAdmin) {
                                this.effectiveFrom.enabled(false);
                            }
                            var me = this;
                            var checkAllCheckboxes = function () {
                                if (_this.setToHomeLocation() || _this.setToLocation() || _this.setAsMissing() || _this.setToEarliestRequestor()) {
                                    return;
                                }
                                _this.setToLocation(true);
                            };
                            this.setToLocation.subscribe(function (newValue) {
                                if (newValue) {
                                    me.switchOffCheckboxes(me.setToLocation);
                                }
                                checkAllCheckboxes();
                            });
                            this.setToHomeLocation.subscribe(function (newValue) {
                                if (newValue) {
                                    me.switchOffCheckboxes(me.setToHomeLocation);
                                }
                                checkAllCheckboxes();
                            });
                            this.setAsMissing.subscribe(function (newValue) {
                                if (newValue) {
                                    me.switchOffCheckboxes(me.setAsMissing);
                                }
                                checkAllCheckboxes();
                            });
                            this.setToEarliestRequestor.subscribe(function (newValue) {
                                if (newValue) {
                                    me.switchOffCheckboxes(me.setToEarliestRequestor);
                                }
                                checkAllCheckboxes();
                            });
                        }
                        RecordSetAssigneeForm.prototype.appliesToTask = function (objectType, taskId) {
                            if (objectType == HPTRIM.BaseObjectTypes.Record && taskId == Panels.RecordDetails.RecordTasks.SetAssigneeTaskId) {
                                return true;
                            }
                            return false;
                        };
                        RecordSetAssigneeForm.prototype.switchOffCheckboxes = function (oneToSkip) {
                            if (this.setToHomeLocation != oneToSkip) {
                                this.setToHomeLocation(false);
                            }
                            if (this.setToLocation != oneToSkip) {
                                this.setToLocation(false);
                            }
                            if (this.setAsMissing != oneToSkip) {
                                this.setAsMissing(false);
                            }
                            if (this.setToEarliestRequestor != oneToSkip) {
                                this.setToEarliestRequestor(false);
                            }
                        };
                        RecordSetAssigneeForm.prototype.setInfoObject = function (infoObject) {
                            if (infoObject) {
                                if (infoObject.RecordAssignee && infoObject.RecordAssigneeStatus) {
                                    var assigneeStatus = HPTRIM.Utils.EnumHelper.toValue(HPTRIM.RecLocSubTypes, infoObject.RecordAssigneeStatus.Value);
                                    if (assigneeStatus == HPTRIM.RecLocSubTypes.AtLocation) {
                                        this.setToLocation(true);
                                        if (infoObject.RecordAssignee && infoObject.RecordAssignee.Uri) {
                                            var rawAssignee = infoObject.RecordAssignee;
                                            var assignee = new HPTRIM.TrimBaseObject(HPTRIM.BaseObjectTypes.Location, rawAssignee.Uri, rawAssignee.LocationFormattedName.Value, rawAssignee.LocationFormattedName);
                                            assignee.hasIcon = true;
                                            assignee.iconId = rawAssignee.Icon.Id;
                                            this.newLocationField.setValue(assignee);
                                            this.newLocationField.isEditing(false);
                                            if (infoObject.RecordReturnDueDateTime && !infoObject.RecordReturnDueDateTime.isClear) {
                                                this.locationDueForReturnBy.setByDateTime(infoObject.RecordReturnDueDateTime.DateTime);
                                            }
                                        }
                                    }
                                    else if (assigneeStatus == HPTRIM.RecLocSubTypes.AtHome) {
                                        this.setToHomeLocation(true);
                                    }
                                    else if (assigneeStatus == HPTRIM.RecLocSubTypes.Unknown) {
                                        this.setAsMissing(true);
                                    }
                                    if (infoObject.RecordDateAssigned && infoObject.RecordDateAssigned.DateTime && !infoObject.RecordDateAssigned.isClear) {
                                        this.effectiveFrom.setByDateTime(infoObject.RecordDateAssigned.DateTime);
                                    }
                                }
                                if (infoObject.RecordHomeLocation) {
                                    this.homeLocationName(infoObject.RecordHomeLocation.StringValue);
                                    if (infoObject.RecordHomeLocation.Icon) {
                                        this.HomeLocationIcon(infoObject.RecordHomeLocation.Icon);
                                    }
                                    else {
                                        this.HomeLocationIcon(infoObject.RecordContainer.Icon);
                                    }
                                }
                                if (infoObject.RecordRequests && infoObject.RecordRequests.Value) {
                                    this.setToEarliestRequestorCheckBox.enabled(true);
                                    var rawRequests = infoObject.RecordRequests.Value;
                                    var firstRequest = this.getFirstRequest(rawRequests);
                                    this.earliestRequestorName(firstRequest);
                                }
                                else {
                                    this.setToEarliestRequestorCheckBox.enabled(false);
                                }
                            }
                        };
                        RecordSetAssigneeForm.prototype.getFirstRequest = function (rawRequest) {
                            if (rawRequest.indexOf(';') > 0) {
                                return rawRequest.substr(0, rawRequest.indexOf(';'));
                            }
                            return rawRequest;
                        };
                        RecordSetAssigneeForm.prototype.resetPanel = function () {
                            this.errorVisible(false);
                            this.alertDetails("");
                            this.setToLocation(true);
                            this.setToLocationCheckBox.enabled(true);
                            this.newLocationField.isEditing(true);
                            this.newLocationField.clear();
                            this.locationDueForReturnBy.reset();
                            this.setToHomeLocationCheckBox.enabled(true);
                            this.homeLocationName("");
                            this.HomeLocationIcon("");
                            this.setToEarliestRequestorCheckBox.enabled(true);
                            this.earliestRequestorName("");
                            this.requestorDueForReturnBy.reset();
                            this.effectiveFrom.reset();
                        };
                        RecordSetAssigneeForm.prototype.validateAndHandleErrors = function () {
                            var result = true;
                            if (this.setToLocation()) {
                                if (this.newLocationField.getValue() == null) {
                                    this.errorVisible(true);
                                    this.alertDetails(HPTRIM.Utils.String.format(HP.HPTRIM.Messages.core_fieldBlank, [HPTRIM.BaseObjectTypes.Location.Caption]));
                                    result = false;
                                    return result;
                                }
                            }
                            return result;
                        };
                        RecordSetAssigneeForm.prototype.save = function () {
                            if (this.validateAndHandleErrors()) {
                                var userSuppliedParameterList = [];
                                var task = App.Panels.RecordDetails.RecordTasks.setAssigneeTask();
                                if (this.setToLocation()) {
                                    userSuppliedParameterList.push({
                                        "name": "SetAssigneeAssigneeType",
                                        "value": "AtLocation"
                                    });
                                    userSuppliedParameterList.push({
                                        "name": this.newLocationField.submitPropertyName,
                                        "value": this.newLocationField.getValue()
                                    });
                                    userSuppliedParameterList.push({
                                        "name": this.locationDueForReturnBy.submitPropertyName,
                                        "value": this.locationDueForReturnBy.getValueEx()
                                    });
                                }
                                else if (this.setToHomeLocation()) {
                                    userSuppliedParameterList.push({
                                        "name": "SetAssigneeAssigneeType",
                                        "value": "AtHome"
                                    });
                                }
                                else if (this.setAsMissing()) {
                                    userSuppliedParameterList.push({
                                        "name": "SetAssigneeAssigneeType",
                                        "value": "Missing"
                                    });
                                }
                                else if (this.setToEarliestRequestor()) {
                                    userSuppliedParameterList.push({
                                        "name": "SetAssigneeAssigneeType",
                                        "value": "EarliestRequestor"
                                    });
                                    userSuppliedParameterList.push({
                                        "name": this.locationDueForReturnBy.submitPropertyName,
                                        "value": this.requestorDueForReturnBy.getValueEx()
                                    });
                                }
                                if (this.trimClient.getDatabase().currentUserPermissions()['RecordAdmin'] == true) {
                                    userSuppliedParameterList.push({
                                        "name": this.effectiveFrom.submitPropertyName,
                                        "value": this.effectiveFrom.getValueEx()
                                    });
                                }
                                this.executeTask(userSuppliedParameterList, task);
                            }
                        };
                        return RecordSetAssigneeForm;
                    }(Plugins.CustomUpdateTaskForm));
                    Plugins.RecordSetAssigneeForm = RecordSetAssigneeForm;
                })(Plugins = Panels.Plugins || (Panels.Plugins = {}));
            })(Panels = App.Panels || (App.Panels = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Panels;
            (function (Panels) {
                var Plugins;
                (function (Plugins) {
                    "use strict";
                    var RecordSetContainerForm = (function (_super) {
                        __extends(RecordSetContainerForm, _super);
                        function RecordSetContainerForm(trimClient) {
                            _super.call(this, 'templates/Framework/Overlays/RecordSetContainerOverlay');
                            this.errorVisible = ko.observable(false);
                            this.alertDetails = ko.observable("");
                            this.cssClass('as-spa-saved-search-form');
                            this.trimClient = trimClient;
                            var me = this;
                            var errorSubscription = function (newValue) {
                                me.errorVisible(newValue.length != 0);
                                me.alertDetails(newValue);
                            };
                            this.enclosed = ko.observable(true);
                            var enclosedPageItem = {
                                Caption: HPTRIM.Messages.web_encloseRecordOption,
                                Format: "Boolean",
                                Name: "",
                                Value: this.enclosed,
                            };
                            this.enclosedCheckBox = new HPTRIM.Form.BooleanDecorator(enclosedPageItem);
                            this.enclosedCheckBox.submitPropertyName = "SetContainerSetCurrentLocationToHome";
                            this.containerField = new HP.HPTRIM.Field.ContainerPicker(trimClient, HP.HPTRIM.Messages.web_setContainer, true, false, errorSubscription);
                            this.containerField.submitPropertyName = "SetContainerNewContainer";
                        }
                        RecordSetContainerForm.prototype.appliesToTask = function (objectType, taskId) {
                            if (objectType == HPTRIM.BaseObjectTypes.Record && taskId == Panels.RecordDetails.RecordTasks.SetContainerTaskId) {
                                return true;
                            }
                            return false;
                        };
                        RecordSetContainerForm.prototype.setInfoObject = function (infoObject) {
                            this.containerField.clear();
                            this.enclosed(false);
                            this.enclosedCheckBox.setEnabled(true);
                            if (infoObject) {
                                if (infoObject.RecordContainer) {
                                    var rawContainer = infoObject.RecordContainer;
                                    if (rawContainer.Uri != 0 && rawContainer.RecordNumber) {
                                        var displayString = rawContainer.RecordNumber.Value;
                                        var icon = rawContainer.Icon ? rawContainer.Icon.Id : "";
                                        var trimBaseObject = new HPTRIM.TrimBaseObject(HPTRIM.BaseObjectTypes.Record, rawContainer.Uri, displayString, displayString, icon);
                                        trimBaseObject["iconClass"] = trimBaseObject.iconId.toLowerCase() + '_x16 media-object';
                                        this.containerField.setValue(trimBaseObject);
                                        this.containerField.isEditing(false);
                                    }
                                }
                                if (infoObject.RecordIsEnclosed) {
                                    this.enclosed(infoObject.RecordIsEnclosed.Value);
                                }
                                if (this.trimClient.getDatabase().currentUserPermissions()["RecordModify"] !== true) {
                                }
                                if (!infoObject.RecordContainer || infoObject.RecordContainer.Uri == 0) {
                                    this.enclosed(true);
                                }
                            }
                        };
                        RecordSetContainerForm.prototype.validateAndHandleErrors = function () {
                            var result = true;
                            if (this.containerField.getValue() == null) {
                                this.errorVisible(true);
                                this.alertDetails(HP.HPTRIM.Messages.core_fieldBlank.replace("{0}", HP.HPTRIM.Messages.web_NewContainer));
                                result = false;
                            }
                            return result;
                        };
                        RecordSetContainerForm.prototype.save = function () {
                            var me = this;
                            if (this.validateAndHandleErrors()) {
                                var userSuppliedParameterList = [];
                                var task = App.Panels.RecordDetails.RecordTasks.setContainerTask();
                                userSuppliedParameterList.push({
                                    "name": me.containerField.submitPropertyName,
                                    "value": me.containerField.getValue()
                                });
                                if (this.enclosedCheckBox.enable()) {
                                    userSuppliedParameterList.push({
                                        "name": this.enclosedCheckBox.submitPropertyName,
                                        "value": this.enclosed()
                                    });
                                }
                                this.executeTask(userSuppliedParameterList, task);
                            }
                        };
                        return RecordSetContainerForm;
                    }(Plugins.CustomUpdateTaskForm));
                    Plugins.RecordSetContainerForm = RecordSetContainerForm;
                })(Plugins = Panels.Plugins || (Panels.Plugins = {}));
            })(Panels = App.Panels || (App.Panels = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Panels;
            (function (Panels) {
                var Plugins;
                (function (Plugins) {
                    "use strict";
                    (function (AdditionalFieldListOrderTypes) {
                        AdditionalFieldListOrderTypes[AdditionalFieldListOrderTypes["AlphabeticAll"] = 1] = "AlphabeticAll";
                        AdditionalFieldListOrderTypes[AdditionalFieldListOrderTypes["AlphabeticSection"] = 2] = "AlphabeticSection";
                        AdditionalFieldListOrderTypes[AdditionalFieldListOrderTypes["Category"] = 3] = "Category";
                    })(Plugins.AdditionalFieldListOrderTypes || (Plugins.AdditionalFieldListOrderTypes = {}));
                    var AdditionalFieldListOrderTypes = Plugins.AdditionalFieldListOrderTypes;
                    var ModifyRecordAdditionalFieldsPanel = (function (_super) {
                        __extends(ModifyRecordAdditionalFieldsPanel, _super);
                        function ModifyRecordAdditionalFieldsPanel(trimClient, cssClass) {
                            var _this = this;
                            _super.call(this, 'templates/Framework/Overlays/RecordAdditionalFieldOverlay');
                            this.panelTitle = ko.observable(HP.HPTRIM.Messages.web_recordAdditionalField);
                            this.currentAdvQuery = "";
                            this.setupPanel = function () { };
                            this.errorVisible = ko.observable(false);
                            this.alertDetails = ko.observable("");
                            this.formDefinition = ko.observable({ Pages: [] });
                            this.showError = function (message) { };
                            this.showMessage = ko.observable(true);
                            this.message = ko.observable("");
                            this.focusCallback = function () { };
                            this.cancelHandler = function () { };
                            this.cssClass(cssClass);
                            this.trimClient = trimClient;
                            var me = this;
                            this.formBeingOpenedOnce = false;
                            this.currentRecordFormLoaded = false;
                            this.listOrderType = ko.observable(AdditionalFieldListOrderTypes.AlphabeticSection);
                            this.showMessage = ko.observable(true);
                            this.message = ko.observable(HP.HPTRIM.Messages.web_loadingAdditionalFields);
                            this.currentRecord = undefined;
                            this.showMessage.subscribe(function (newState) {
                                if (_this.currentRecord != undefined) {
                                    if (_this.currentRecordFormLoaded) {
                                        _this.refreshAdditionalFieldForm();
                                    }
                                }
                                else {
                                    if (_this.formBeingOpenedOnce) {
                                        _this.refreshAdditionalFieldForm();
                                    }
                                }
                            });
                            this.loadedAdditionalFieldsPage = 0;
                            this.allChosenAdditionalFields = [];
                            this.allNotChosenAdditionalFields = [];
                            this.loadOnePageAdditionalFields(this.loadedAdditionalFieldsPage);
                            var errorSubscription = function (newValue) {
                                me.errorVisible(newValue.length != 0);
                                me.alertDetails(newValue);
                            };
                            var classificationResultExpansionOverlay = false;
                            var containerResultExpansionOverlay = false;
                            var bindings = ko.bindingHandlers;
                            this.executeTask = function (userSuppliedParameterList) {
                            };
                            this.prepareForm = function (taskId) {
                                if (!Panels.RecordDetails.RecordTasks.modifyAdditionalFieldsForMultiple) {
                                    if (_this.currentRecord == undefined) {
                                        return;
                                    }
                                }
                                _this.refreshAdditionalFieldForm(true);
                            };
                            this.saveCallback = function () {
                            };
                            this.changeChosenState = function (item) {
                                var me = _this;
                                var done = false;
                                if (item.Type == "Field") {
                                    for (var i = 0; i < me.allChosenAdditionalFields.length; i++) {
                                        if (me.allChosenAdditionalFields[i].FieldDefinitionName.Value == item.FieldDefinitionName.Value) {
                                            me.allChosenAdditionalFields.splice(i, 1);
                                            break;
                                        }
                                    }
                                    item.Type = "NameOnlyField";
                                    item.ChosenForEdit = false;
                                    me.allNotChosenAdditionalFields.push(item);
                                    _this.refreshAdditionalFieldForm(true);
                                }
                                else {
                                    if (item.FieldDefinitionLookupSet != undefined && item.lookupSetObject == undefined) {
                                        me.trimClient.getAndLoadLookupSet(item.FieldDefinitionLookupSet.Uri, function (returnSet) { item.lookupSetObject = returnSet; item.LookupValues = returnSet.LookupItemFullNames.slice(); item.LookupSetUri = item.FieldDefinitionLookupSet.Uri; item.lookupSetUri = item.FieldDefinitionLookupSet.Uri; me.changeChosenState(item); });
                                        return;
                                    }
                                    for (var i = 0; i < me.allNotChosenAdditionalFields.length; i++) {
                                        if (me.allNotChosenAdditionalFields[i].FieldDefinitionName.Value == item.FieldDefinitionName.Value) {
                                            me.allNotChosenAdditionalFields.splice(i, 1);
                                            break;
                                        }
                                    }
                                    item.Type = "Field";
                                    item.ChosenForEdit = true;
                                    me.allChosenAdditionalFields.push(item);
                                    {
                                        var removed = false;
                                        var focusedItem = undefined;
                                        for (var i = 1; i < me.formDefinition().Pages.length; i++) {
                                            var page = me.formDefinition().Pages[i];
                                            page.NotRefresh = false;
                                            if (removed) {
                                                continue;
                                            }
                                            for (var j = 0; j < page.PageItems.length; j++) {
                                                if (page.PageItems[j].Caption == item.FieldDefinitionName.Value) {
                                                    if (j < page.PageItems.length) {
                                                        focusedItem = page.PageItems[j + 1];
                                                    }
                                                    else {
                                                        if (j > 0) {
                                                            focusedItem = page.PageItems[j - 1];
                                                        }
                                                    }
                                                    page.PageItems.splice(j, 1);
                                                    page.NotRefresh = true;
                                                    removed = true;
                                                    break;
                                                }
                                            }
                                        }
                                    }
                                    var chosenPageIten = me.createDecoratedPage(item);
                                    me.formDefinition().Pages[0].PageItems.splice(me.formDefinition().Pages[0].PageItems.length - 1, 0, chosenPageIten);
                                    me.formDefinition.valueHasMutated();
                                    {
                                        var page = me.formDefinition().Pages[0];
                                        for (var j = 0; j < page.PageItems.length; j++) {
                                            var decoratedPageItem = page.PageItems[j];
                                            if (decoratedPageItem.Format == "Date" || decoratedPageItem.Format == "Datetime" || decoratedPageItem.Format == "Daterange") {
                                                if (decoratedPageItem.doAfterRender) {
                                                    decoratedPageItem.doAfterRender(true);
                                                }
                                            }
                                        }
                                    }
                                    var focusItem = me.formDefinition().Pages[0].PageItems[me.formDefinition().Pages[0].PageItems.length - 2];
                                    focusItem.focus();
                                }
                            };
                            this.resetPanel = function () {
                                _this.currentRecord = undefined;
                                if (me.allChosenAdditionalFields.length > 0) {
                                    for (var i = me.allChosenAdditionalFields.length - 1; i > -1; i--) {
                                        {
                                            var item = me.allChosenAdditionalFields[i];
                                            item.Type = "NameOnlyField";
                                            me.allNotChosenAdditionalFields.push(item);
                                            me.allChosenAdditionalFields.splice(i, 1);
                                        }
                                    }
                                }
                                var form = me.formDefinition();
                                if (form.Pages) {
                                    for (var i = 0; i < form.Pages.length; i++) {
                                        var page = form.Pages[i];
                                        for (var j = 0; j < page.PageItems.length; j++) {
                                            var pageItem = page.PageItems[j];
                                            if (pageItem.doAfterRender) {
                                                pageItem.doAfterRender(true);
                                            }
                                            if (pageItem.getValueEx) {
                                                if (pageItem.getValueEx()) {
                                                    page.forceShow();
                                                    continue;
                                                }
                                            }
                                        }
                                    }
                                }
                                var currFields = _this.formDefinition().Pages;
                                if (currFields) {
                                    var additionalFields = { Fields: {} };
                                    for (var i = 0; i < currFields.length; i++) {
                                        var page = currFields[i];
                                        for (var j = 0; j < page.PageItems.length; j++) {
                                            var pageItem = page.PageItems[j];
                                            if (pageItem.LookupValues) {
                                                if (pageItem.selectedValue) {
                                                    pageItem.selectedValue('');
                                                }
                                                else {
                                                    if (pageItem.selectedItems) {
                                                        pageItem.selectedItems([]);
                                                    }
                                                }
                                            }
                                            else {
                                                if (pageItem.Format == "Object") {
                                                    if (pageItem.value) {
                                                        pageItem.value = undefined;
                                                    }
                                                }
                                                else {
                                                    if (pageItem.Value) {
                                                        pageItem.Value = undefined;
                                                    }
                                                    if (pageItem.computedValue) {
                                                        pageItem.computedValue('');
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            };
                        }
                        ModifyRecordAdditionalFieldsPanel.prototype.appliesToTask = function (objectType, taskId) {
                            if (objectType == HPTRIM.BaseObjectTypes.Record && taskId == Panels.RecordDetails.RecordTasks.modifyAdditionalFieldsRecordsTaskId) {
                                return true;
                            }
                            return false;
                        };
                        ModifyRecordAdditionalFieldsPanel.prototype.loadAndSetLocationValue = function (uri, aField) {
                            var me = this;
                            var search = new HPTRIM.TrimMainObjectSearch(this.trimClient, HPTRIM.BaseObjectTypes.Location);
                            search.setProperties(["LocationSortName"]);
                            search.setSearchString("uri:" + uri.toString());
                            search.page().done(function (result) {
                                var locObj = new HPTRIM.TrimBaseObject(HPTRIM.BaseObjectTypes.Location, uri, result.Results[0].LocationSortName.Value);
                                aField.setValue(locObj);
                            }).fail(function (errorResponse) {
                                aField.setValue(null);
                            });
                        };
                        ModifyRecordAdditionalFieldsPanel.prototype.loadAndSetLookupValue = function (uri, aField) {
                            var me = this;
                            var search = new HPTRIM.TrimMainObjectSearch(this.trimClient, HPTRIM.BaseObjectTypes.LookupItem);
                            search.setProperties(["icon", "name", "NameString", "LookupItemParentSet", "LookupItemParentItem", "LookupItemHasChildItems", "LookupItemFullDescription", "LookupItemAbbreviation", "LookupItemName", "RecordLastNumber"]);
                            search.setSearchString("uri:" + uri.toString());
                            search.page().done(function (result) {
                                var locObj = new HPTRIM.TrimBaseObject(HPTRIM.BaseObjectTypes.LookupItem, result.Results[0].Uri, result.Results[0].NameString, result.Results[0].NameString, result.Results[0].Icon.Id);
                                aField.setValue(locObj);
                                aField.isEditing(false);
                            }).fail(function (errorResponse) {
                                aField.setValue(null);
                            });
                        };
                        ModifyRecordAdditionalFieldsPanel.prototype.loadFieldValuesForCurrentRecord = function () {
                            var me = this;
                            me.showMessage(true);
                            var propertiesSetStrings = ["Uri"];
                            for (var m = 0; m < me.currentRecordAdditionalFields.length; m++) {
                                propertiesSetStrings.push('"f_' + me.currentRecordAdditionalFields[m].FieldDefinitionSearchClauseName.Value + '"');
                            }
                            var search = new HPTRIM.TrimMainObjectSearch(this.trimClient, HPTRIM.BaseObjectTypes.Record);
                            search.setProperties(propertiesSetStrings);
                            search.setSearchString("uri:" + me.currentRecord.Uri.toString());
                            search.page().done(function (result) {
                                var foundFields = result.Results[0].Fields;
                                for (var j = 0; j < me.currentRecordAdditionalFields.length; j++) {
                                    var currentField = me.currentRecordAdditionalFields[j];
                                    var k = currentField.FieldDefinitionSearchClauseName.Value;
                                    var foundValue = foundFields[k];
                                    if (foundValue.Value) {
                                        if ((currentField.Format == 'String' || currentField.Format == 'Text') && currentField.LookupValues && currentField.LookupValues.length > 0) {
                                            if (currentField.ObjectType == "LookupItem") {
                                                if (currentField.Format == 'Text') {
                                                    if (foundValue.Value) {
                                                        var defaultLookupItem = { displayValue: foundValue.Value };
                                                        currentField.setValue(defaultLookupItem);
                                                    }
                                                }
                                                else {
                                                    var i = currentField.lookupSetObject.LookupItemFullNames.indexOf(foundValue.Value);
                                                    if (i > -1) {
                                                        me.loadAndSetLookupValue(currentField.lookupSetObject.LookupItemUris[i], currentField);
                                                    }
                                                }
                                            }
                                            else {
                                                currentField.setValue(foundValue.Value);
                                            }
                                        }
                                        else {
                                            currentField.setValue(foundValue.Value);
                                        }
                                    }
                                    else {
                                        if (foundValue.TrimType) {
                                            if (foundValue.TrimType == "LookupItem") {
                                                var i = currentField.lookupSetObject.LookupItemUris.indexOf(foundValue.Uri);
                                                if (i > -1) {
                                                    if (foundValue.Uri != undefined && foundValue.Uri != "" && foundValue.Uri > 0) {
                                                        me.loadAndSetLookupValue(foundValue.Uri, currentField);
                                                    }
                                                }
                                                else {
                                                    currentField.setValue('');
                                                }
                                            }
                                            else {
                                                if (foundValue.TrimType == "Location") {
                                                    if (foundValue.Uri != undefined && foundValue.Uri != "" && foundValue.Uri > 0) {
                                                        me.loadAndSetLocationValue(foundValue.Uri, currentField);
                                                    }
                                                }
                                                else {
                                                    currentField.setValue(null);
                                                }
                                            }
                                        }
                                        else {
                                            if (foundValue.DateTime) {
                                                if (foundValue.IsClear) {
                                                    currentField.setValue('');
                                                }
                                                else {
                                                    var momentDate = moment(foundValue.DateTime);
                                                    currentField.setByDateTime(momentDate.toDate(), foundValue.IsTimeClear);
                                                }
                                            }
                                            else {
                                                currentField.setValue('');
                                            }
                                        }
                                    }
                                }
                                me.buildCurrentRecordFormDefinition();
                                me.showMessage(false);
                            }).fail(function (errorResponse) {
                                var errorMsg = HP.HPTRIM.Messages.web_unableToConnectToWebServices;
                                if (errorResponse.responseJSON && errorResponse.responseJSON.ResponseStatus && errorResponse.responseJSON.ResponseStatus.Message) {
                                    errorMsg = errorResponse.responseJSON.ResponseStatus.Message;
                                }
                                ko.postbox.publish(App.TRIMApp.NOTIFICATION_ERROR_TOPIC, errorMsg);
                                me.showMessage(false);
                            });
                        };
                        ModifyRecordAdditionalFieldsPanel.prototype.generatePageItemFromBaseItem = function (baseItem, currentList, currentIndex, maxItemNumber) {
                            var me = this;
                            baseItem.Type = "Field";
                            var chosenPageIten = me.createDecoratedPage(baseItem);
                            chosenPageIten.Name = baseItem.Caption;
                            chosenPageIten.ClauseName = baseItem.FieldDefinitionSearchClauseName.Value;
                            delete chosenPageIten.ChosenForEdit;
                            if (chosenPageIten.viewModel) {
                                delete chosenPageIten.viewModel.ChosenForEdit;
                            }
                            me.currentRecordAdditionalFields.push(chosenPageIten);
                            if (me.currentRecordAdditionalFields.length >= maxItemNumber) {
                                try {
                                    me.loadCurrentRecordAccessRight();
                                    me.loadFieldValuesForCurrentRecord();
                                }
                                catch (ex) {
                                    me.showMessage(false);
                                }
                            }
                            else {
                                me.generateCurrentRecordUDFitems(currentList, currentIndex + 1);
                            }
                        };
                        ModifyRecordAdditionalFieldsPanel.prototype.generateCurrentRecordUDFitems = function (foundFields, currentIndex) {
                            var me = this;
                            for (var k = currentIndex; k < foundFields.length; k++) {
                                var pageItem = foundFields[k];
                                for (var i = 0; i < me.allNotChosenAdditionalFields.length; i++) {
                                    if (me.allNotChosenAdditionalFields[i].Uri == pageItem.Uri) {
                                        var baseItem = {};
                                        $.extend(baseItem, me.allNotChosenAdditionalFields[i]);
                                        if (baseItem.FieldDefinitionLookupSet != undefined) {
                                            me.trimClient.getAndLoadLookupSet(baseItem.FieldDefinitionLookupSet.Uri, function (returnSet) { baseItem.lookupSetObject = returnSet; baseItem.LookupValues = returnSet.LookupItemFullNames.slice(); baseItem.LookupSetUri = baseItem.FieldDefinitionLookupSet.Uri; baseItem.lookupSetUri = baseItem.FieldDefinitionLookupSet.Uri; me.generatePageItemFromBaseItem(baseItem, foundFields, currentIndex, foundFields.length); });
                                        }
                                        else {
                                            me.generatePageItemFromBaseItem(baseItem, foundFields, currentIndex, foundFields.length);
                                        }
                                        return;
                                    }
                                }
                            }
                        };
                        ModifyRecordAdditionalFieldsPanel.prototype.loadCurrentRecordFields = function () {
                            var me = this;
                            if (me.currentRecord == undefined) {
                                me.currentRecordAdditionalFields = [];
                            }
                            else {
                                me.showMessage(true);
                                var search = new HPTRIM.TrimMainObjectSearch(this.trimClient, HPTRIM.BaseObjectTypes.FieldDefinition);
                                search.setProperties(["FieldDefinitionSearchClauseName"]);
                                search.setSearchString("forRecords:" + me.currentRecord.RecordRecordType.Uri.toString());
                                search.page(0).done(function (result) {
                                    me.currentRecordAdditionalFields = [];
                                    me.generateCurrentRecordUDFitems(result.Results, 0);
                                }).fail(function (errorResponse) {
                                    var errorMsg = HP.HPTRIM.Messages.web_unableToConnectToWebServices;
                                    if (errorResponse.responseJSON && errorResponse.responseJSON.ResponseStatus && errorResponse.responseJSON.ResponseStatus.Message) {
                                        errorMsg = errorResponse.responseJSON.ResponseStatus.Message;
                                    }
                                    ko.postbox.publish(App.TRIMApp.NOTIFICATION_ERROR_TOPIC, errorMsg);
                                });
                            }
                        };
                        ModifyRecordAdditionalFieldsPanel.prototype.loadOnePageAdditionalFields = function (pageNo) {
                            var me = this;
                            var search = new HPTRIM.TrimMainObjectSearch(this.trimClient, HPTRIM.BaseObjectTypes.FieldDefinition);
                            search.setProperties([
                                "FieldDefinitionName",
                                "FieldDefinitionFormat",
                                "FieldDefinitionSearchClauseName",
                                "FieldDefinitionObjectType",
                                "FieldDefinitionLookupSet",
                                "FieldDefinitionUpperLimit",
                                "FieldDefinitionLowerLimit",
                                "FieldDefinitionLength",
                            ]);
                            search.setSearchString("visible");
                            search.setPageSize(20);
                            search.page(pageNo).done(function (result) {
                                try {
                                    me.buildInitialAdditionalFieldArray(result);
                                    if (result.HasMoreItems) {
                                        me.loadedAdditionalFieldsPage++;
                                        me.loadOnePageAdditionalFields(me.loadedAdditionalFieldsPage);
                                    }
                                    else {
                                        me.buildCategoryFormDefinition();
                                        me.buildAlphSectionFormDefinition();
                                        me.buildAlphAllFormDefinition();
                                        me.loadLookupItems();
                                    }
                                }
                                catch (ex) {
                                    me.showMessage(false);
                                }
                            }).fail(function (errorResponse) {
                                me.showMessage(false);
                                var errorMsg = HP.HPTRIM.Messages.web_unableToConnectToWebServices;
                                if (errorResponse.responseJSON && errorResponse.responseJSON.ResponseStatus && errorResponse.responseJSON.ResponseStatus.Message) {
                                    errorMsg = errorResponse.responseJSON.ResponseStatus.Message;
                                }
                                ko.postbox.publish(App.TRIMApp.NOTIFICATION_ERROR_TOPIC, errorMsg);
                            });
                        };
                        ModifyRecordAdditionalFieldsPanel.prototype.createDecoratedPage = function (pageItem) {
                            var me = this;
                            pageItem.enabled = undefined;
                            var cap = pageItem.Caption;
                            var decoratedPageItem = HP.HPTRIM.Form.DecoratorFactory.make(me.trimClient, pageItem, false);
                            decoratedPageItem.Caption = cap;
                            if (decoratedPageItem.isHidden) {
                                decoratedPageItem.isHidden = false;
                            }
                            ;
                            if (decoratedPageItem.label) {
                                decoratedPageItem.label(decoratedPageItem.Caption);
                            }
                            ;
                            if (decoratedPageItem.Format == "Object") {
                                decoratedPageItem.baseObjectType = decoratedPageItem.FieldDefinitionObjectType;
                                if (decoratedPageItem.baseObjectType == undefined) {
                                    decoratedPageItem.baseObjectType = HPTRIM.BaseObjectTypes.Location;
                                }
                                if (decoratedPageItem.baseObjectType == HPTRIM.BaseObjectTypes.Location) {
                                    decoratedPageItem.displayProperty = "LocationSortName";
                                    decoratedPageItem.additionalPropperties = ["AllMembers", "Icon"];
                                }
                                decoratedPageItem.appendAsterisk = true;
                            }
                            if (decoratedPageItem.Format == "Date" || decoratedPageItem.Format == "Datetime" || decoratedPageItem.Format == "Daterange") {
                                if (decoratedPageItem.doAfterRender) {
                                    decoratedPageItem.doAfterRender(true);
                                }
                            }
                            decoratedPageItem.Readonly = false;
                            if (decoratedPageItem.FieldDefinitionUpperLimit && decoratedPageItem.FieldDefinitionUpperLimit.Value != "") {
                                decoratedPageItem.setMaxValue(decoratedPageItem.FieldDefinitionUpperLimit.Value);
                            }
                            if (decoratedPageItem.FieldDefinitionLowerLimit && decoratedPageItem.FieldDefinitionLowerLimit.Value != "") {
                                decoratedPageItem.setMinValue(decoratedPageItem.FieldDefinitionLowerLimit.Value);
                            }
                            if (decoratedPageItem.FieldDefinitionLength && decoratedPageItem.FieldDefinitionLength.Value != "") {
                                if (decoratedPageItem.setMaxLength) {
                                    decoratedPageItem.setMaxLength(decoratedPageItem.FieldDefinitionLength.Value);
                                }
                            }
                            if (decoratedPageItem.Type == "Field" && decoratedPageItem.FieldDefinitionLookupSet && decoratedPageItem.Format != "Text") {
                                if (decoratedPageItem.viewModel) {
                                    if (me.currentRecord == undefined) {
                                        decoratedPageItem.viewModel.ChosenForEdit = true;
                                    }
                                    decoratedPageItem.viewModel.Caption = decoratedPageItem.Caption;
                                    if (decoratedPageItem.viewModel.multiSelect) {
                                        decoratedPageItem.viewModel.template = "templates/Field/MultiItemPicker";
                                    }
                                    else {
                                        decoratedPageItem.viewModel.template = "templates/Field/ComboBox";
                                    }
                                }
                            }
                            if (me.currentRecord != undefined) {
                                if (decoratedPageItem.LookupValues) {
                                    if (!decoratedPageItem.MultiLine) {
                                        if (decoratedPageItem.viewModel) {
                                            decoratedPageItem.viewModel.Caption = decoratedPageItem.Caption;
                                            decoratedPageItem.viewModel.Value(decoratedPageItem.Value());
                                            decoratedPageItem.viewModel.selectedValue(decoratedPageItem.Value());
                                        }
                                    }
                                }
                            }
                            decoratedPageItem.focusCallback = me.focusCallback;
                            return decoratedPageItem;
                        };
                        ModifyRecordAdditionalFieldsPanel.prototype.refreshAdditionalFieldForm = function (rebuildForm) {
                            var me = this;
                            try {
                                var pageCount = 0;
                                var mapping = {
                                    'PageItems': {
                                        create: function (options) {
                                            var pageItem = options.data;
                                            var decoratedPageItem = me.createDecoratedPage(pageItem);
                                            return decoratedPageItem;
                                        }
                                    },
                                    'Pages': {
                                        create: function (options) {
                                            var page = options.data;
                                            var pageObject = ko.mapping.fromJS(page, mapping);
                                            $.extend(pageObject, new HP.HPTRIM.Form.PageDecorator());
                                            pageObject.NotRefresh = options.data.NotRefresh;
                                            pageObject.HideChevron = options.data.HideChevron;
                                            pageObject.id = "FormPage" + _.uniqueId();
                                            if (me.currentRecord != undefined) {
                                                pageObject.Caption = undefined;
                                            }
                                            ;
                                            pageObject.pageIndex = pageCount++;
                                            return pageObject;
                                        }
                                    },
                                    'observe': ["Value"]
                                };
                                if (Panels.RecordDetails.RecordTasks.modifyAdditionalFieldsForMultiple) {
                                    if (me.listOrderType() == AdditionalFieldListOrderTypes.AlphabeticSection) {
                                        if (rebuildForm) {
                                            me.buildAlphSectionFormDefinition();
                                        }
                                        me.formDefinition(ko.mapping.fromJS(me.formAdditionalFieldDefinitionAlphOrder, mapping));
                                    }
                                    else {
                                        if (me.listOrderType() == AdditionalFieldListOrderTypes.AlphabeticAll) {
                                            if (rebuildForm) {
                                                me.buildAlphAllFormDefinition();
                                            }
                                            me.formDefinition(ko.mapping.fromJS(me.formAdditionalFieldDefinitionAllAlphOrder, mapping));
                                        }
                                        else {
                                            if (rebuildForm) {
                                                me.buildCategoryFormDefinition();
                                            }
                                            me.formDefinition(ko.mapping.fromJS(me.formAdditionalFieldDefinitionCatOrder, mapping));
                                        }
                                    }
                                    ;
                                }
                                else {
                                    if (rebuildForm) {
                                        me.buildCurrentRecordFormDefinition();
                                    }
                                    me.formDefinition(ko.mapping.fromJS(me.formCurrentRecordAdditionalFieldDefinition, mapping));
                                }
                            }
                            catch (ex) {
                                throw ex;
                            }
                        };
                        ModifyRecordAdditionalFieldsPanel.prototype.loadCurrentRecordAccessRight = function () {
                            var me = this;
                            var entryFormRequest = new HPTRIM.TrimRecordInformationRequest(me.trimClient, me.currentRecord.Uri);
                            entryFormRequest.addProperty('DataEntryFormDefinition');
                            entryFormRequest.doRequest().done(function (result) {
                                var formDef = result.Results[0];
                                for (var m = 0; m < me.currentRecordAdditionalFields.length; m++) {
                                    var currField = me.currentRecordAdditionalFields[m];
                                    var thisFieldDone = false;
                                    var pages = formDef.DataEntryFormDefinition.Pages;
                                    for (var i = 0; i < pages.length; i++) {
                                        if (thisFieldDone) {
                                            break;
                                        }
                                        var currentPage = pages[i];
                                        for (var j = 0; j < currentPage.PageItems.length; j++) {
                                            var currItem = currentPage.PageItems[j];
                                            if (currItem.Name == currField.Id) {
                                                currField.Mandatory = currItem.Mandatory;
                                                if (currItem.Readonly === true) {
                                                    currField.Readonly = true;
                                                    currField.fieldDisabled(true);
                                                    if (currField.enabled) {
                                                        currField.enabled(false);
                                                        thisFieldDone = true;
                                                        break;
                                                    }
                                                }
                                            }
                                        }
                                    }
                                }
                            }).fail(function (errorResponse) {
                                var errorMsg = HP.HPTRIM.Messages.web_unableToConnectToWebServices;
                                if (errorResponse.responseJSON && errorResponse.responseJSON.ResponseStatus && errorResponse.responseJSON.ResponseStatus.Message) {
                                    errorMsg = errorResponse.responseJSON.ResponseStatus.Message;
                                }
                                ko.postbox.publish(App.TRIMApp.NOTIFICATION_ERROR_TOPIC, errorMsg);
                            });
                        };
                        ModifyRecordAdditionalFieldsPanel.prototype.loadLookupItems = function () {
                            var me = this;
                            var pages = [];
                            var parentSets = [];
                            var lookupItemsByset = [];
                            var multipleSetSearchString = "";
                            me.showMessage(true);
                            {
                                for (var i = 0; i < me.allNotChosenAdditionalFields.length; i++) {
                                    if (me.allNotChosenAdditionalFields[i].FieldDefinitionLookupSet) {
                                        var setUri = me.allNotChosenAdditionalFields[i].FieldDefinitionLookupSet.Uri;
                                        if (parentSets.indexOf(setUri) < 0) {
                                            parentSets.push(setUri);
                                            if (multipleSetSearchString.length < 1) {
                                                multipleSetSearchString = setUri.toString();
                                            }
                                            else {
                                                multipleSetSearchString = multipleSetSearchString + "," + setUri.toString();
                                            }
                                            lookupItemsByset.push([]);
                                        }
                                    }
                                }
                            }
                            me.showMessage(false);
                        };
                        ModifyRecordAdditionalFieldsPanel.prototype.buildCurrentRecordFormDefinition = function () {
                            var me = this;
                            var pageNo = 0;
                            this.currentRecordFormLoaded = true;
                            var pages = [{ Caption: HP.HPTRIM.Messages.web_additionalFieldsToBeUpdated, PageItems: [], NotRefresh: false }];
                            {
                                me.currentRecordAdditionalFields.sort(function (leftSide, rightSide) {
                                    if (leftSide.Name.toLowerCase() < rightSide.Name.toLowerCase())
                                        return -1;
                                    if (leftSide.Name.toLowerCase() > rightSide.Name.toLowerCase())
                                        return 1;
                                    return 0;
                                });
                                for (var i = 0; i < me.currentRecordAdditionalFields.length; i++) {
                                    pages[0].PageItems.push(me.currentRecordAdditionalFields[i]);
                                }
                            }
                            me.formCurrentRecordAdditionalFieldDefinition = { Pages: pages };
                        };
                        ModifyRecordAdditionalFieldsPanel.prototype.buildInitialAdditionalFieldArray = function (result) {
                            var me = this;
                            var allNotChosenAdditionalFields1 = result.Results;
                            {
                                for (var i = 0; i < allNotChosenAdditionalFields1.length; i++) {
                                    allNotChosenAdditionalFields1[i].Caption = allNotChosenAdditionalFields1[i].FieldDefinitionName.Value;
                                    allNotChosenAdditionalFields1[i].Format = allNotChosenAdditionalFields1[i].FieldDefinitionFormat.Value;
                                    allNotChosenAdditionalFields1[i].Id = allNotChosenAdditionalFields1[i].FieldDefinitionSearchClauseName.Value;
                                    allNotChosenAdditionalFields1[i].ObjectType = allNotChosenAdditionalFields1[i].FieldDefinitionObjectType.Value;
                                    allNotChosenAdditionalFields1[i].ClauseName = allNotChosenAdditionalFields1[i].FieldDefinitionSearchClauseName.Value;
                                    allNotChosenAdditionalFields1[i].Type = "NameOnlyField";
                                    allNotChosenAdditionalFields1[i].ChosenForEdit = false;
                                    if (allNotChosenAdditionalFields1[i].Format == "Object") {
                                        allNotChosenAdditionalFields1[i].FieldDefinitionObjectType.path = allNotChosenAdditionalFields1[i].FieldDefinitionObjectType.Value;
                                    }
                                }
                            }
                            {
                                for (var i = 0; i < allNotChosenAdditionalFields1.length; i++) {
                                    me.allNotChosenAdditionalFields.push(allNotChosenAdditionalFields1[i]);
                                }
                            }
                            if (me.allNotChosenAdditionalFields.length < 31) {
                                me.listOrderType(AdditionalFieldListOrderTypes.AlphabeticAll);
                            }
                        };
                        ModifyRecordAdditionalFieldsPanel.prototype.buildAlphAllFormDefinition = function () {
                            var me = this;
                            var pageNo = 0;
                            this.formBeingOpenedOnce = true;
                            var pages = [
                                { HideChevron: true, Caption: HP.HPTRIM.Messages.web_selectedAdditionalFields, PageItems: [], NotRefresh: false },
                                { HideChevron: true, Caption: '', PageItems: [], NotRefresh: true }];
                            {
                                me.allChosenAdditionalFields.sort(function (leftSide, rightSide) {
                                    if (leftSide.FieldDefinitionName.Value.toLowerCase() < rightSide.FieldDefinitionName.Value.toLowerCase())
                                        return -1;
                                    if (leftSide.FieldDefinitionName.Value.toLowerCase() > rightSide.FieldDefinitionName.Value.toLowerCase())
                                        return 1;
                                    return 0;
                                });
                                for (var i = 0; i < me.allChosenAdditionalFields.length; i++) {
                                    pages[0].PageItems.push(me.allChosenAdditionalFields[i]);
                                }
                                pages[0].PageItems.push({ Type: "ThinLine" });
                            }
                            {
                                me.allNotChosenAdditionalFields.sort(function (leftSide, rightSide) {
                                    if (leftSide.FieldDefinitionName.Value.toLowerCase() < rightSide.FieldDefinitionName.Value.toLowerCase())
                                        return -1;
                                    if (leftSide.FieldDefinitionName.Value.toLowerCase() > rightSide.FieldDefinitionName.Value.toLowerCase())
                                        return 1;
                                    return 0;
                                });
                                for (var i = 0; i < me.allNotChosenAdditionalFields.length; i++) {
                                    pages[1].PageItems.push(me.allNotChosenAdditionalFields[i]);
                                }
                            }
                            me.formAdditionalFieldDefinitionAllAlphOrder = { Pages: pages };
                        };
                        ModifyRecordAdditionalFieldsPanel.prototype.buildAlphSectionFormDefinition = function () {
                            var me = this;
                            var pageNo = 0;
                            this.formBeingOpenedOnce = true;
                            var pages = [
                                { HideChevron: true, Caption: HP.HPTRIM.Messages.web_selectedAdditionalFields, PageItems: [], NotRefresh: false },
                                { HideChevron: false, Caption: 'A - E', PageItems: [], NotRefresh: false },
                                { HideChevron: false, Caption: 'F - J', PageItems: [], NotRefresh: false },
                                { HideChevron: false, Caption: 'K - O', PageItems: [], NotRefresh: false },
                                { HideChevron: false, Caption: 'P - T', PageItems: [], NotRefresh: false },
                                { HideChevron: false, Caption: 'U - Z', PageItems: [], NotRefresh: false }];
                            {
                                me.allChosenAdditionalFields.sort(function (leftSide, rightSide) {
                                    if (leftSide.FieldDefinitionName.Value.toLowerCase() < rightSide.FieldDefinitionName.Value.toLowerCase())
                                        return -1;
                                    if (leftSide.FieldDefinitionName.Value.toLowerCase() > rightSide.FieldDefinitionName.Value.toLowerCase())
                                        return 1;
                                    return 0;
                                });
                                for (var i = 0; i < me.allChosenAdditionalFields.length; i++) {
                                    pages[0].PageItems.push(me.allChosenAdditionalFields[i]);
                                }
                                pages[0].PageItems.push({ Type: "ThinLine" });
                            }
                            {
                                me.allNotChosenAdditionalFields.sort(function (leftSide, rightSide) {
                                    if (leftSide.FieldDefinitionName.Value.toLowerCase() < rightSide.FieldDefinitionName.Value.toLowerCase())
                                        return -1;
                                    if (leftSide.FieldDefinitionName.Value.toLowerCase() > rightSide.FieldDefinitionName.Value.toLowerCase())
                                        return 1;
                                    return 0;
                                });
                                for (var i = 0; i < me.allNotChosenAdditionalFields.length; i++) {
                                    var codeOfFirstChar = me.allNotChosenAdditionalFields[i].Caption.charCodeAt(0);
                                    var pos = 0;
                                    if (codeOfFirstChar < 123 && codeOfFirstChar > 96) {
                                        codeOfFirstChar = codeOfFirstChar - 97;
                                        pos = Math.floor(codeOfFirstChar / 5);
                                    }
                                    else {
                                        if (codeOfFirstChar < 91 && codeOfFirstChar > 64) {
                                            codeOfFirstChar = codeOfFirstChar - 65;
                                            pos = Math.floor(codeOfFirstChar / 5);
                                        }
                                    }
                                    if (pos > 4) {
                                        pos = 4;
                                    }
                                    pages[pos + 1].PageItems.push(me.allNotChosenAdditionalFields[i]);
                                }
                            }
                            me.formAdditionalFieldDefinitionAlphOrder = { Pages: pages };
                        };
                        ModifyRecordAdditionalFieldsPanel.prototype.buildCategoryFormDefinition = function () {
                            var me = this;
                            var pages = [{ HideChevron: true, Caption: HP.HPTRIM.Messages.web_selectedAdditionalFields, Value: HP.HPTRIM.Messages.web_selectedAdditionalFields, PageItems: [], NotRefresh: false },
                                { HideChevron: false, Caption: '', Value: HP.HPTRIM.Messages.web_textStringGeography, PageItems: [], NotRefresh: false },
                                { HideChevron: false, Caption: '', Value: HP.HPTRIM.Messages.web_dateDatetime, PageItems: [], NotRefresh: false },
                                { HideChevron: false, Caption: '', Value: HP.HPTRIM.Messages.web_numberDecimalCurrencyBigNumber, PageItems: [], NotRefresh: false },
                                { HideChevron: false, Caption: '', Value: HP.HPTRIM.Messages.web_object, PageItems: [], NotRefresh: false },
                                { HideChevron: false, Caption: '', Value: HP.HPTRIM.Messages.web_boolean, PageItems: [], NotRefresh: false },
                                { HideChevron: false, Caption: '', Value: HP.HPTRIM.Messages.web_xml, PageItems: [], NotRefresh: false }];
                            {
                                me.allChosenAdditionalFields.sort(function (leftSide, rightSide) {
                                    if (leftSide.FieldDefinitionName.Value.toLowerCase() < rightSide.FieldDefinitionName.Value.toLowerCase())
                                        return -1;
                                    if (leftSide.FieldDefinitionName.Value.toLowerCase() > rightSide.FieldDefinitionName.Value.toLowerCase())
                                        return 1;
                                    return 0;
                                });
                                for (var i = 0; i < me.allChosenAdditionalFields.length; i++) {
                                    pages[0].PageItems.push(me.allChosenAdditionalFields[i]);
                                }
                                pages[0].PageItems.push({ Type: "ThinLine" });
                            }
                            {
                                me.allNotChosenAdditionalFields.sort(function (leftSide, rightSide) {
                                    if (leftSide.FieldDefinitionName.Value.toLowerCase() < rightSide.FieldDefinitionName.Value.toLowerCase())
                                        return -1;
                                    if (leftSide.FieldDefinitionName.Value.toLowerCase() > rightSide.FieldDefinitionName.Value.toLowerCase())
                                        return 1;
                                    return 0;
                                });
                                for (var i = 0; i < me.allNotChosenAdditionalFields.length; i++) {
                                    var currField = me.allNotChosenAdditionalFields[i];
                                    for (var j = 1; j < pages.length; j++) {
                                        var currPage = pages[j];
                                        if (pages[j].Value.search(currField.FieldDefinitionFormat.Value) >= 0) {
                                            if (pages[j].Caption.search(currField.FieldDefinitionFormat.StringValue) < 0) {
                                                if (pages[j].Caption.length > 0) {
                                                    pages[j].Caption = pages[j].Caption + ', ' + currField.FieldDefinitionFormat.StringValue;
                                                }
                                                else {
                                                    pages[j].Caption = currField.FieldDefinitionFormat.StringValue;
                                                }
                                            }
                                            pages[j].PageItems.push(currField);
                                            break;
                                        }
                                    }
                                    ;
                                }
                            }
                            me.formAdditionalFieldDefinitionCatOrder = { Pages: pages };
                        };
                        ModifyRecordAdditionalFieldsPanel.prototype.changeAdditionalFieldOrder = function (buttonId) {
                            if (buttonId == 'alphabeticSection') {
                                this.listOrderType(AdditionalFieldListOrderTypes.AlphabeticSection);
                                this.buildAlphSectionFormDefinition();
                            }
                            else {
                                if (buttonId == 'addFieldCategory') {
                                    this.listOrderType(AdditionalFieldListOrderTypes.Category);
                                    this.buildCategoryFormDefinition();
                                }
                                else {
                                    this.listOrderType(AdditionalFieldListOrderTypes.AlphabeticAll);
                                    this.buildAlphAllFormDefinition();
                                }
                            }
                            this.refreshAdditionalFieldForm();
                        };
                        ModifyRecordAdditionalFieldsPanel.prototype.saveAllChanges = function () {
                            var me = this;
                            var currFields = me.formDefinition().Pages;
                            var page = currFields[0];
                            var additionalFields = { IgnoreIrrelevantFields: (me.currentRecord == undefined), Fields: {} };
                            var itemCounts = page.PageItems.length;
                            if (itemCounts < 1) {
                                return;
                            }
                            if (me.currentRecord == undefined) {
                                itemCounts--;
                            }
                            if (itemCounts < 1) {
                                return;
                            }
                            for (var j = 0; j < itemCounts; j++) {
                                var pageItem = page.PageItems[j];
                                if (!pageItem.Readonly) {
                                    if (pageItem.LookupValues) {
                                        var value = pageItem.getValueEx();
                                        if (pageItem.viewModel && pageItem.viewModel.lookupSetUri > 0 && _.isArray(value)) {
                                            value = value[0];
                                        }
                                        if (_.isObject(value)) {
                                            if (value.Uri == -1 || value.Uri == 0 || value.Uri === undefined)
                                                return;
                                        }
                                        if (value != undefined && (pageItem.Format == 'String' || pageItem.Format == 'Text') && pageItem.LookupValues && pageItem.LookupValues.length > 0) {
                                            if (value.displayValue) {
                                                value = value.displayValue;
                                            }
                                        }
                                        additionalFields["Fields"][pageItem.ClauseName] = { "Value": value };
                                    }
                                    else {
                                        if (pageItem.Format == "Object") {
                                            additionalFields['Fields'][pageItem.ClauseName] = { Value: pageItem.value() };
                                        }
                                        else {
                                            if (pageItem.Value() != undefined) {
                                                if (pageItem.Value().IsClear == undefined || pageItem.Value().IsClear == false) {
                                                    if (pageItem.Format == "Currency") {
                                                        var value = pageItem.getCurrencyValueEx();
                                                    }
                                                    else {
                                                        var value = pageItem.Value();
                                                    }
                                                    if (pageItem.Format == "Datetime" || pageItem.Format == "Date") {
                                                        value = pageItem.getValueEx();
                                                    }
                                                    additionalFields['Fields'][pageItem.ClauseName] = { Value: value };
                                                }
                                            }
                                        }
                                    }
                                    if (pageItem.Mandatory) {
                                        if (additionalFields['Fields'][pageItem.ClauseName] == undefined) {
                                            var msg = HP.HPTRIM.Messages.web_mandatoryFieldNeedsValue;
                                            msg = msg.replace("{0}", pageItem.Caption);
                                            pageItem.setError(msg);
                                            var ele = document.getElementById(pageItem.viewModel.Id);
                                            ele.focus();
                                            return;
                                        }
                                        var newValue = additionalFields['Fields'][pageItem.ClauseName].Value;
                                        if (newValue == undefined || newValue == '') {
                                            var msg = HP.HPTRIM.Messages.web_mandatoryFieldNeedsValue;
                                            msg = msg.replace("{0}", pageItem.Caption);
                                            pageItem.setError(msg);
                                            var ele = document.getElementById(pageItem.viewModel.Id);
                                            ele.focus();
                                            return;
                                        }
                                    }
                                }
                            }
                            var task = App.Panels.RecordDetails.RecordTasks.modifyAdditionalFieldsRecordsTask();
                            me.executeTask([additionalFields], task);
                        };
                        ModifyRecordAdditionalFieldsPanel.prototype.getFieldsValue = function () {
                            var keyValue = {};
                            var pages = this.formDefinition().Pages;
                            _.each(pages, function (page) {
                                _.each(page.PageItems, function (pageItem) {
                                    if (pageItem.ClauseName) {
                                        var value = pageItem.getValueForSearchForm();
                                        if (value === undefined) {
                                        }
                                        if (_.isObject(value)) {
                                            if (value.Uri == -1 || value.Uri == 0 || value.Uri === undefined) {
                                                return;
                                            }
                                            else {
                                                keyValue[pageItem.ClauseName] = value.Uri;
                                            }
                                        }
                                        else {
                                            if (_.isBoolean(value) || value == "true") {
                                                value = " ";
                                            }
                                            if (pageItem['LookupValues']) {
                                                if (value !== '') {
                                                    keyValue[pageItem.ClauseName] = '"' + value + '"';
                                                }
                                                return;
                                            }
                                            if ((pageItem.Format != "Datetime") && (_.isString(value) && value != "")) {
                                                value = value.replace('"', '\\"');
                                                value = '"' + value + '"';
                                            }
                                            keyValue[pageItem.ClauseName] = value;
                                        }
                                    }
                                });
                            });
                            return keyValue;
                        };
                        ModifyRecordAdditionalFieldsPanel.prototype.setInfoObject = function (infoObject) {
                            if (this.currentRecord != undefined) {
                                if (infoObject == undefined) {
                                    this.currentRecord = undefined;
                                    this.currentRecordFormLoaded = false;
                                    this.refreshAdditionalFieldForm(true);
                                }
                                else {
                                    this.currentRecord = infoObject;
                                    this.currentRecordFormLoaded = false;
                                    this.loadCurrentRecordFields();
                                }
                            }
                            else {
                                if (infoObject != undefined) {
                                    this.currentRecord = infoObject;
                                    this.currentRecordFormLoaded = false;
                                    this.loadCurrentRecordFields();
                                }
                            }
                        };
                        ModifyRecordAdditionalFieldsPanel.prototype.validateFormAndShowErrors = function () {
                            var errors = "";
                            var me = this;
                            var isValid = true;
                            var pages = this.formDefinition().Pages;
                            _.each(pages, function (page) {
                                _.each(page.PageItems, function (pageItem) {
                                    var itemValid = pageItem.isValid();
                                    if (!itemValid) {
                                        if (errors) {
                                            errors += ", ";
                                        }
                                        errors += pageItem.Caption;
                                    }
                                    isValid = isValid && itemValid;
                                });
                            });
                            if (!isValid) {
                                var errorMsg = HPTRIM.Messages.web_invalidFields + errors;
                                this.showError(errorMsg);
                            }
                            return isValid;
                        };
                        return ModifyRecordAdditionalFieldsPanel;
                    }(Plugins.CustomUpdateTaskForm));
                    Plugins.ModifyRecordAdditionalFieldsPanel = ModifyRecordAdditionalFieldsPanel;
                })(Plugins = Panels.Plugins || (Panels.Plugins = {}));
            })(Panels = App.Panels || (App.Panels = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Panels;
            (function (Panels) {
                var Plugins;
                (function (Plugins) {
                    "use strict";
                    var RecordSetHomeLocationForm = (function (_super) {
                        __extends(RecordSetHomeLocationForm, _super);
                        function RecordSetHomeLocationForm(trimClient) {
                            _super.call(this, 'templates/Framework/Overlays/RecordSetHomeLocationOverlay');
                            this.errorVisible = ko.observable(false);
                            this.alertDetails = ko.observable("");
                            this.cssClass('as-spa-saved-search-form');
                            this.trimClient = trimClient;
                            var me = this;
                            var errorSubscription = function (newValue) {
                                me.errorVisible(newValue.length != 0);
                                me.alertDetails(newValue);
                            };
                            this.setToLocation = ko.observable(true);
                            var setToLocationCheclboxItem = {
                                Caption: HP.HPTRIM.Messages.web_setToLocation,
                                Format: "Boolean",
                                Name: "",
                                Value: this.setToLocation,
                            };
                            this.setToLocationCheckBox = new HPTRIM.Form.BooleanDecorator(setToLocationCheclboxItem);
                            this.newLocationField = new HP.HPTRIM.Field.LocationPicker(trimClient, HP.HPTRIM.Messages.web_newHomeLocation, false, errorSubscription);
                            this.newLocationField.submitPropertyName = "SetHomeLocationNewHomeLocation";
                            this.newLocationField.setPurpose(HPTRIM.LocationPurpose.Home);
                            this.alsoSetAssignee = ko.observable(true);
                            var alsoSetAssigneeCheckboxItem = {
                                Caption: HP.HPTRIM.Messages.web_setHomeAndAssignee,
                                Format: "Boolean",
                                Name: "",
                                Value: this.alsoSetAssignee,
                            };
                            this.alsoSetAssigneeCheckbox = new HPTRIM.Form.BooleanDecorator(alsoSetAssigneeCheckboxItem);
                            this.alsoSetAssigneeCheckbox.submitPropertyName = "SetHomeLocationNewHomeAlsoSetAssignee";
                            this.setToSpace = ko.observable(false);
                            var setToSpaceCheckboxItem = {
                                Caption: HP.HPTRIM.Messages.web_setToHomeLocation,
                                Format: "Boolean",
                                Name: "",
                                Value: this.setToSpace,
                            };
                            this.setToSpaceCheckbox = new HPTRIM.Form.BooleanDecorator(setToSpaceCheckboxItem);
                            var spacePickerOptions = {
                                baseObjectType: HPTRIM.BaseObjectTypes.Space,
                                multiSelect: false,
                                label: HP.HPTRIM.Messages.web_setHomeAsSpace,
                                appendAsterisk: true,
                                supportHierarchy: true,
                                resultExpansionOverlay: true,
                            };
                            this.spaceField = new HPTRIM.Field.TrimItemPicker(trimClient, spacePickerOptions);
                            this.spaceField.submitPropertyName = "SetHomeLocationNewHomeSpace";
                            this.spaceField.purpose = HPTRIM.SpacePurposes.RecordHome;
                            var me = this;
                            this.setToLocation.subscribe(function (newValue) {
                                if (newValue) {
                                    me.setToSpace(false);
                                }
                            });
                            this.setToSpace.subscribe(function (newValue) {
                                if (newValue) {
                                    me.setToLocation(false);
                                }
                            });
                        }
                        RecordSetHomeLocationForm.prototype.appliesToTask = function (objectType, taskId) {
                            if (objectType == HPTRIM.BaseObjectTypes.Record && taskId == Panels.RecordDetails.RecordTasks.SetHomeLocationTaskId) {
                                return true;
                            }
                            return false;
                        };
                        RecordSetHomeLocationForm.prototype.setInfoObject = function (infoObject) {
                            if (infoObject) {
                                if (infoObject.RecordAssignee) {
                                    if (infoObject.RecordHomeLocation.Uri) {
                                        var rawHomeLocation = infoObject.RecordHomeLocation;
                                        var homeLocation = new HPTRIM.TrimBaseObject(HPTRIM.BaseObjectTypes.Location, rawHomeLocation.Uri, rawHomeLocation.StringValue, rawHomeLocation.LocationFormattedName);
                                        homeLocation.hasIcon = true;
                                        homeLocation.iconId = infoObject.RecordHomeLocation.Icon.Id;
                                        this.newLocationField.setValue(homeLocation);
                                        this.newLocationField.isEditing(false);
                                    }
                                }
                            }
                        };
                        RecordSetHomeLocationForm.prototype.getFirstRequest = function (rawRequest) {
                            if (rawRequest.indexOf(';') > 0) {
                                return rawRequest.substr(0, rawRequest.indexOf(';'));
                            }
                            return rawRequest;
                        };
                        RecordSetHomeLocationForm.prototype.resetPanel = function () {
                            this.setToLocation(true);
                            this.setToLocationCheckBox.enabled(true);
                            this.newLocationField.clear();
                        };
                        RecordSetHomeLocationForm.prototype.validateAndHandleErrors = function () {
                            var result = true;
                            if (this.newLocationField.getValue() == null) {
                                this.errorVisible(true);
                                this.alertDetails(HP.HPTRIM.Messages.core_fieldBlank.replace("{0}", HP.HPTRIM.Messages.web_newHomeLocation));
                                result = false;
                                return result;
                            }
                            return result;
                        };
                        RecordSetHomeLocationForm.prototype.save = function () {
                            if (this.validateAndHandleErrors()) {
                                var userSuppliedParameterList = [];
                                var task = App.Panels.RecordDetails.RecordTasks.setHomeLocationTask();
                                if (this.setToLocation()) {
                                    userSuppliedParameterList.push({
                                        "name": this.newLocationField.submitPropertyName,
                                        "value": this.newLocationField.getValue()
                                    });
                                    userSuppliedParameterList.push({
                                        "name": this.alsoSetAssigneeCheckbox.submitPropertyName,
                                        "value": this.alsoSetAssigneeCheckbox.Value()
                                    });
                                }
                                else if (this.setToSpace()) {
                                    userSuppliedParameterList.push({
                                        "name": this.spaceField.submitPropertyName,
                                        "value": this.spaceField.getValue()
                                    });
                                }
                                this.executeTask(userSuppliedParameterList, task);
                            }
                        };
                        return RecordSetHomeLocationForm;
                    }(Plugins.CustomUpdateTaskForm));
                    Plugins.RecordSetHomeLocationForm = RecordSetHomeLocationForm;
                })(Plugins = Panels.Plugins || (Panels.Plugins = {}));
            })(Panels = App.Panels || (App.Panels = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Panels;
            (function (Panels) {
                var Plugins;
                (function (Plugins) {
                    "use strict";
                    var ObjectPropertiesPanel = (function (_super) {
                        __extends(ObjectPropertiesPanel, _super);
                        function ObjectPropertiesPanel(trimClient, toggleVisibleFunction, cssClass, template) {
                            _super.call(this);
                            this.currentlySelectedPropertiesCallback = function (selectedViewPanepropertyOrFieldDefs, additionalDataForSelector) {
                            };
                            var me = this;
                            this.propertyOrFieldListView = new PropertiesOrFieldListViewPanel(trimClient, toggleVisibleFunction);
                            this.propertyOrFieldListView.currentlySelectedPropertiesCallback = function (trimObject, selectedViewPanepropertyOrFieldDefs, additionalDataForSelector) {
                                me.currentlySelectedPropertiesCallback(trimObject, selectedViewPanepropertyOrFieldDefs, additionalDataForSelector);
                            };
                            if (cssClass) {
                                this.cssClass(cssClass);
                            }
                            this.panels([this.propertyOrFieldListView]);
                        }
                        ObjectPropertiesPanel.prototype.updatedPropertiesSelected = function (trimBaseObject, selectedPofds) {
                            this.propertyOrFieldListView.updatedPropertiesSelected(trimBaseObject, selectedPofds);
                        };
                        ObjectPropertiesPanel.prototype.updateObject = function (trimObject, additionalDataForSelectorPanel) {
                            this.propertyOrFieldListView.setObject(trimObject, additionalDataForSelectorPanel);
                        };
                        ObjectPropertiesPanel.prototype.refresh = function () {
                            this.propertyOrFieldListView.refresh();
                        };
                        return ObjectPropertiesPanel;
                    }(HP.HPTRIM.Framework.Components.Layouts.SinglePage.ContentAdditionalPanel));
                    Plugins.ObjectPropertiesPanel = ObjectPropertiesPanel;
                    var RenditionObjectPropertiesPanel = (function (_super) {
                        __extends(RenditionObjectPropertiesPanel, _super);
                        function RenditionObjectPropertiesPanel(trimClient, toggleVisibleFunction, cssClass, template) {
                            _super.call(this);
                            this.currentlySelectedPropertiesCallback = function (selectedViewPanepropertyOrFieldDefs, additionalDataForSelector) {
                            };
                            var me = this;
                            this.propertiesRenditionListView = new RenditionPropertiesListViewPanel(trimClient, toggleVisibleFunction);
                            this.propertiesRenditionListView.currentlySelectedPropertiesCallback = function (trimObject, selectedViewPanepropertyOrFieldDefs) {
                                me.currentlySelectedPropertiesCallback(trimObject, selectedViewPanepropertyOrFieldDefs);
                            };
                            if (cssClass) {
                                this.cssClass(cssClass);
                            }
                            this.panels([this.propertiesRenditionListView]);
                        }
                        RenditionObjectPropertiesPanel.prototype.updatedRenditionPropertiesSelected = function (trimBaseObject, selectedPofds) {
                            this.propertiesRenditionListView.updatedPropertiesSelected(trimBaseObject, selectedPofds);
                        };
                        return RenditionObjectPropertiesPanel;
                    }(HP.HPTRIM.Framework.Components.Layouts.SinglePage.ContentAdditionalPanel));
                    Plugins.RenditionObjectPropertiesPanel = RenditionObjectPropertiesPanel;
                    var PropertiesOrFieldListViewPanel = (function (_super) {
                        __extends(PropertiesOrFieldListViewPanel, _super);
                        function PropertiesOrFieldListViewPanel(trimClient, toggleVisibleFunction) {
                            var _this = this;
                            _super.call(this, "templates/Widgets/OverlayPropertiesPanel");
                            this.showingRevisions = ko.observable(false);
                            this.promoteRevision = function () { };
                            this.deleteRevision = function () { };
                            this.showCurrentDocument = function () { };
                            this.revisionActionsEnabled = ko.observable(false);
                            this.revisionActionsVisible = ko.observable(false);
                            this.deleteEnabled = ko.observable(false);
                            this.promoteRevisionEnabled = ko.observable(false);
                            this.iconClass = ko.observable("");
                            this.nameString = ko.observable("");
                            this.forObject = ko.observable({});
                            this.currentlySelectedPropertiesCallback = function (trimObject, selectedViewPanepropertyOrFieldDefs, additionalData) {
                            };
                            this.searchCallback = function () {
                            };
                            this.updateSelectorCallbackClosure = function () { };
                            this.updateSelectedPropertiesClosure = function () {
                            };
                            this.updateAndShowPropertiesOverlay = function () {
                                _this.updateSelectorCallbackClosure();
                                _this.updateSelectedPropertiesClosure();
                                _this.showRecordPropertiesOverlay();
                            };
                            this.showRecordPropertiesOverlay = function () {
                            };
                            this.propertyOrFieldList = new HP.HPTRIM.App.Widgets.PropertyOrFieldList();
                            this.trimClient = trimClient;
                            this.toggleVisible = toggleVisibleFunction;
                            var me = this;
                            this.search = function (koContext) {
                                var baseObjectType = HPTRIM.Utils.TrimHelper.toBaseObjectType(koContext.objectType);
                                me.searchCallback("Uri:" + koContext.Uri, koContext.Uri, baseObjectType);
                            };
                            this.showMap = function (koContext) {
                                var gpsValue = koContext.gpsValue;
                                $(window).data('currentGpsValue', gpsValue);
                                $(window).data('activeGpsFieldId', undefined);
                                $(window).data('showMapReadOnly', true);
                                if (_this.trimClient.getDatabase().googleGISKeySet()) {
                                    $('#GISModal').modal('show');
                                }
                                else {
                                    ko.postbox.publish(HP.HPTRIM.App.TRIMApp.NOTIFICATION_ERROR_TOPIC, HPTRIM.Messages.web_GPSErrorNoKey);
                                }
                            };
                        }
                        PropertiesOrFieldListViewPanel.prototype.updatedPropertiesSelected = function (trimBaseObject, selectedPofds) {
                            var me = this;
                            var propertyPath = trimBaseObject.baseObjectType.path;
                            var uri = trimBaseObject.Uri;
                            var baseObject = this.forObject();
                            var requestData = {};
                            requestData.q = "uri:" + uri;
                            requestData.IncludePropertyDefs = true;
                            requestData.PropertyValue = 'Both';
                            requestData.stringDisplayType = 'ViewPane';
                            requestData.format = 'json';
                            var properties = "";
                            var pofdList = selectedPofds;
                            if (pofdList.length > 0) {
                                for (var i = 0; i < pofdList.length; i++) {
                                    if (i > 0) {
                                        properties += ",";
                                    }
                                    properties += pofdList[i];
                                }
                            }
                            requestData.properties = properties;
                            requestData.format = "json";
                            me.trimClient.doGet(propertyPath, requestData).done(function (result) {
                                var propertyOrFieldList = me.makePropertyOrFieldList(result);
                                me.propertyOrFieldList.propertyOrFields(propertyOrFieldList);
                                var selectedViewPanepropertyOrFieldDefs = [];
                                if (result.PropertiesAndFields[baseObject.baseObjectType.name]) {
                                    selectedViewPanepropertyOrFieldDefs = result.PropertiesAndFields[baseObject.baseObjectType.name];
                                }
                                me.currentlySelectedPropertiesCallback(baseObject, selectedViewPanepropertyOrFieldDefs);
                                me.updateSelectedPropertiesClosure = function () {
                                    me.currentlySelectedPropertiesCallback(baseObject, selectedViewPanepropertyOrFieldDefs);
                                };
                            });
                        };
                        PropertiesOrFieldListViewPanel.prototype.makePropertyOrFieldList = function (response) {
                            var me = this;
                            var returnPropertyOrFieldArray = [];
                            var trimObject = response.Results[0];
                            if (trimObject) {
                                var propertyOrFieldDefs = response.PropertiesAndFields[trimObject.TrimType];
                                _.each(propertyOrFieldDefs, function (propertyOrFieldDef) {
                                    var prop = HP.HPTRIM.Utils.TrimHelper.makePropertyOrFieldDisplayItem(propertyOrFieldDef, trimObject, me.trimClient);
                                    prop.renderer = PropertyRenderer.make(prop);
                                    returnPropertyOrFieldArray.push(prop);
                                });
                            }
                            return returnPropertyOrFieldArray;
                        };
                        PropertiesOrFieldListViewPanel.prototype.setObject = function (baseObject, additionalDataForPropertySelector) {
                            this.setObjectInfo(baseObject, additionalDataForPropertySelector);
                            this.forObject(baseObject);
                            this.refresh(additionalDataForPropertySelector);
                        };
                        PropertiesOrFieldListViewPanel.prototype.setObjectInfo = function (trimObject) {
                            var params = [];
                            for (var _i = 1; _i < arguments.length; _i++) {
                                params[_i - 1] = arguments[_i];
                            }
                            if (trimObject.iconId != "") {
                                var iconClass = "mixin-24px-icon " + trimObject.iconId.toLowerCase() + "_x24";
                                this.iconClass(iconClass);
                            }
                            if (trimObject.displayValue != "") {
                                if (trimObject.displayValueExtra != "") {
                                    this.nameString(trimObject.displayValueExtra);
                                }
                            }
                        };
                        PropertiesOrFieldListViewPanel.prototype.refresh = function (additionalDataForPropertySelector) {
                            var me = this;
                            var uri = this.forObject().Uri;
                            var baseObject = this.forObject();
                            var path = baseObject.baseObjectType.name;
                            var requestData = {};
                            requestData.q = "uri:" + uri;
                            requestData.propertySets = "Detailed";
                            requestData.PropertyValue = "Both";
                            requestData.stringDisplayType = "ViewPane";
                            requestData.IncludePropertyDefs = true;
                            requestData.format = 'json';
                            me.trimClient.doGet(path, requestData).done(function (result) {
                                var propertyOrFieldList = me.makePropertyOrFieldList(result);
                                me.propertyOrFieldList.propertyOrFields(propertyOrFieldList);
                                var selectedViewPanepropertyOrFieldDefs = [];
                                if (result.PropertiesAndFields[baseObject.baseObjectType.name]) {
                                    selectedViewPanepropertyOrFieldDefs = result.PropertiesAndFields[baseObject.baseObjectType.name];
                                }
                                me.currentlySelectedPropertiesCallback(baseObject, selectedViewPanepropertyOrFieldDefs, additionalDataForPropertySelector);
                                me.updateSelectedPropertiesClosure = function () {
                                    me.currentlySelectedPropertiesCallback(baseObject, selectedViewPanepropertyOrFieldDefs, additionalDataForPropertySelector);
                                };
                                requestData.properties = 'Icon';
                                if (path == 'Record')
                                    requestData.properties += ',RecordRecordType';
                                else if (path == 'Location')
                                    requestData.properties += ',LocationTypeOfLocation';
                                me.trimClient.doGet(path, requestData).done(function (result) {
                                    me.setIcon(result, baseObject.baseObjectType.Caption);
                                });
                            });
                        };
                        PropertiesOrFieldListViewPanel.prototype.setIcon = function (response, caption) {
                            var trimObject = response.Results[0];
                            if (trimObject != undefined) {
                                var iconId = trimObject.Icon.Id;
                                var displayValueExtra = '';
                                var trimType = trimObject.TrimType;
                                if (trimType == 'Record') {
                                    iconId = trimObject.RecordRecordType.Icon.Id;
                                    displayValueExtra = trimObject.RecordRecordType.StringValue;
                                }
                                else if (trimType == 'Location') {
                                    displayValueExtra = trimObject.LocationTypeOfLocation.StringValue;
                                }
                                else {
                                    displayValueExtra = caption;
                                }
                                if (iconId != "") {
                                    var iconClass = "mixin-24px-icon " + iconId.toLowerCase() + "_x24";
                                    this.iconClass(iconClass);
                                    this.visible(true);
                                }
                                if (displayValueExtra != "") {
                                    this.nameString(displayValueExtra);
                                }
                            }
                        };
                        return PropertiesOrFieldListViewPanel;
                    }(HP.HPTRIM.Framework.Components.Layouts.Panel));
                    Plugins.PropertiesOrFieldListViewPanel = PropertiesOrFieldListViewPanel;
                    var RenditionPropertiesListViewPanel = (function (_super) {
                        __extends(RenditionPropertiesListViewPanel, _super);
                        function RenditionPropertiesListViewPanel(trimClient, toggleVisibleFunction) {
                            var _this = this;
                            _super.call(this, "templates/Widgets/OverlayRenditionPropertiesPanel");
                            this.showingRenditions = ko.observable(false);
                            this.showCurrentDocument = function () { };
                            this.renditionActionsEnabled = ko.observable(false);
                            this.iconClass = ko.observable("");
                            this.nameString = ko.observable("");
                            this.forObject = ko.observable({});
                            this.currentlySelectedPropertiesCallback = function (trimObject, selectedViewPanepropertyOrFieldDefs) {
                            };
                            this.updateSelectorCallbackClosure = function () { };
                            this.updateSelectedPropertiesClosure = function () {
                            };
                            this.updateAndShowPropertiesOverlay = function () {
                                _this.updateSelectorCallbackClosure();
                                _this.updateSelectedPropertiesClosure();
                                _this.showRecordPropertiesOverlay();
                            };
                            this.showRecordPropertiesOverlay = function () {
                            };
                            this.propertyOrFieldList = new HP.HPTRIM.App.Widgets.PropertyOrFieldList();
                            this.trimClient = trimClient;
                            this.toggleVisible = toggleVisibleFunction;
                        }
                        RenditionPropertiesListViewPanel.prototype.updatedPropertiesSelected = function (trimBaseObject, selectedPofds) {
                            var me = this;
                            var propertyPath = trimBaseObject.baseObjectType.path;
                            var uri = trimBaseObject.Uri;
                            var baseObject = this.forObject();
                            var requestData = {};
                            requestData.q = "uri:" + uri;
                            requestData.IncludePropertyDefs = true;
                            requestData.PropertyValue = 'Both';
                            requestData.stringDisplayType = 'ViewPane';
                            requestData.format = 'json';
                            var properties = "";
                            var pofdList = selectedPofds;
                            if (pofdList.length > 0) {
                                for (var i = 0; i < pofdList.length; i++) {
                                    if (i > 0) {
                                        properties += ",";
                                    }
                                    properties += pofdList[i];
                                }
                            }
                            requestData.properties = properties;
                            requestData.format = "json";
                            me.trimClient.doGet(propertyPath, requestData).done(function (result) {
                                var propertyOrFieldList = me.makePropertyOrFieldList(result);
                                me.propertyOrFieldList.propertyOrFields(propertyOrFieldList);
                                var selectedViewPanepropertyOrFieldDefs = [];
                                if (result.PropertiesAndFields[baseObject.baseObjectType.name]) {
                                    selectedViewPanepropertyOrFieldDefs = result.PropertiesAndFields[baseObject.baseObjectType.name];
                                }
                                me.currentlySelectedPropertiesCallback(baseObject, selectedViewPanepropertyOrFieldDefs);
                                me.updateSelectedPropertiesClosure = function () {
                                    me.currentlySelectedPropertiesCallback(baseObject, selectedViewPanepropertyOrFieldDefs);
                                };
                            });
                        };
                        RenditionPropertiesListViewPanel.prototype.makePropertyOrFieldList = function (response) {
                            var me = this;
                            var returnPropertyOrFieldArray = [];
                            var trimObject = response.Results[0];
                            if (trimObject) {
                                var propertyOrFieldDefs = response.PropertiesAndFields[trimObject.TrimType];
                                _.each(propertyOrFieldDefs, function (propertyOrFieldDef) {
                                    var prop = HP.HPTRIM.Utils.TrimHelper.makePropertyOrFieldDisplayItem(propertyOrFieldDef, trimObject, me.trimClient);
                                    prop.renderer = PropertyRenderer.make(prop);
                                    returnPropertyOrFieldArray.push(prop);
                                });
                            }
                            return returnPropertyOrFieldArray;
                        };
                        return RenditionPropertiesListViewPanel;
                    }(HP.HPTRIM.Framework.Components.Layouts.Panel));
                    Plugins.RenditionPropertiesListViewPanel = RenditionPropertiesListViewPanel;
                    var PropertyRenderer = (function () {
                        function PropertyRenderer(propertyOrFieldDisplayItem) {
                            this.pofdValue = propertyOrFieldDisplayItem;
                        }
                        PropertyRenderer.prototype.format = function () {
                            var formattedString = this.pofdValue.displayValue;
                            return formattedString;
                        };
                        PropertyRenderer.make = function (property) {
                            return new PropertyRenderer(property);
                        };
                        return PropertyRenderer;
                    }());
                    Plugins.PropertyRenderer = PropertyRenderer;
                })(Plugins = Panels.Plugins || (Panels.Plugins = {}));
            })(Panels = App.Panels || (App.Panels = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Panels;
            (function (Panels) {
                var Plugins;
                (function (Plugins) {
                    "use strict";
                    var SettingsPanel = (function (_super) {
                        __extends(SettingsPanel, _super);
                        function SettingsPanel(trimClient) {
                            var _this = this;
                            _super.call(this, 'templates/Framework/Overlays/SettingsPanel');
                            this.hasSystemOptionPrm = ko.observable(false);
                            this.cancel = function () {
                                _this.close();
                            };
                            this.close = function () {
                                _this.m_alert().clear();
                                _this.dismiss();
                            };
                            this.returnToSettings = function () { };
                            this.dismiss = function () { };
                            this.loading = function () { };
                            this.sendBackToHome = function () { };
                            this.settingsCaption = HP.HPTRIM.Messages.web_setting;
                            this.documentViewerCaption = HP.HPTRIM.Messages.web_documentViewer;
                            this.globalSettingsCaption = HP.HPTRIM.Messages.web_globalSettings;
                            this.dashboardConfigurationCaption = HP.HPTRIM.Messages.web_dashboardConfiguration;
                            this.localeCaption = HP.HPTRIM.Messages.web_locale;
                            this.localeTabPanel = new HP.HPTRIM.App.Panels.Settings.LocaleTabPanel(trimClient);
                            this.dashboardConfigurationTabPanel = new HP.HPTRIM.App.Panels.Settings.DashboardConfigurationTabPanel(trimClient);
                            this.viewerOptionsTabPanel = new HP.HPTRIM.App.Panels.Settings.ViewerOptionsTabPanel(trimClient);
                            this.dashboardConfigurationTabPanel.onError = _.bind(this.onError, this);
                            this.viewerOptionsTabPanel.onError = _.bind(this.onError, this);
                            this.trimClient = trimClient;
                            this.m_alert = ko.observable(new HP.HPTRIM.Form.Alert());
                            var prm = trimClient.getDatabase().currentUserPermissions();
                            if (prm) {
                                this.hasSystemOptionPrm(prm.SystemOptions);
                            }
                            this.saveAsGlobalSetting = new HP.HPTRIM.Form.TickCheckBox({
                                Caption: HP.HPTRIM.Messages.web_setAsGlobalSettings,
                                Value: ko.observable(false),
                                Name: "SetGlobal"
                            });
                        }
                        SettingsPanel.prototype.onError = function (error) {
                            this.m_alert(new HP.HPTRIM.Form.Alert());
                            this.m_alert().setAlert(HP.HPTRIM.Messages.web_error, error);
                        };
                        SettingsPanel.prototype.onOk = function () {
                            var _this = this;
                            var bypassFileTypesArray = $(this.viewerOptionsTabPanel.bypassFileTypeFieldId).val();
                            var onstreamFileTypesArray = $(this.viewerOptionsTabPanel.onstreamFileTypeFieldId).val();
                            var errorHandler = function (message) {
                                _this.returnToSettings();
                                _this.m_alert().header(HPTRIM.Messages.web_error);
                                _this.m_alert().message(message);
                                _this.m_alert().isWarning(false);
                                _this.m_alert().isError(true);
                            };
                            if (!this.viewerOptionsTabPanel.validateSettings(bypassFileTypesArray, onstreamFileTypesArray)) {
                                var errorMessage = this.viewerOptionsTabPanel.getErrors(bypassFileTypesArray, onstreamFileTypesArray);
                                errorHandler(errorMessage);
                                return;
                            }
                            var saveAsGlobal = this.saveAsGlobalSetting.Value();
                            var saveViewerOptions = function () {
                                setTimeout(function () {
                                    _this.viewerOptionsTabPanel.save(bypassFileTypesArray, onstreamFileTypesArray, saveAsGlobal, saveDashBoardConfig, errorHandler);
                                }, 1000);
                            };
                            var saveDashBoardConfig = function () {
                                setTimeout(function () {
                                    _this.dashboardConfigurationTabPanel.save(saveAsGlobal, saveLocaleData, errorHandler);
                                }, 1000);
                            };
                            var saveLocaleData = function () {
                                setTimeout(function () {
                                    _this.localeTabPanel.save(saveAsGlobal, finalCallback, errorHandler);
                                }, 1000);
                            };
                            var finalCallback = function () {
                                _this.sendBackToHome();
                                if (_this.localeTabPanel.isDirty || _this.localeTabPanel.timezoneDirty) {
                                    setTimeout(function () {
                                        window.location.reload();
                                    }, 1000);
                                }
                                else {
                                    _this.dismiss();
                                }
                            };
                            this.loading();
                            saveViewerOptions();
                        };
                        SettingsPanel.prototype.getGlobalSettings = function () {
                            var alert = this.m_alert();
                            alert.setAlert("Get WebClient Settings", HP.HPTRIM.Messages.web_getGlobalSettingConfirmation);
                            alert.isError(false);
                            alert.isWarning(true);
                            alert.onOk = _.bind(this.getGlobalSettingsInternal, this);
                        };
                        SettingsPanel.prototype.getGlobalSettingsInternal = function () {
                            var _this = this;
                            var data = {
                                "LoadFromGlobalSetting": true
                            };
                            var path = "UserOptions/WebClient";
                            var userOption = this.trimClient.getUserOptions();
                            this.trimClient.doPost(path, data).done(function (response) {
                                try {
                                    var wcOpt = _this.trimClient.getUserOptions().webclientOptions();
                                    wcOpt.WebClientUserOptionsBypassFileTypes.Value = response.UserOptions.WebClientUserOptionsBypassFileTypes.Value;
                                    wcOpt.WebClientUserOptionsOnstreamFileTypes.Value = response.UserOptions.WebClientUserOptionsOnstreamFileTypes.Value;
                                    wcOpt.WebClientUserOptionsTimezone.Value = response.UserOptions.WebClientUserOptionsTimezone.Value;
                                    wcOpt.WebClientUserOptionsPageSize.Value = response.UserOptions.WebClientUserOptionsPageSize.Value;
                                    _this.localeTabPanel.timezonesOption.Value(wcOpt.WebClientUserOptionsTimezone.Value);
                                    _this.localeTabPanel.pageSizeOption.Value(wcOpt.WebClientUserOptionsPageSize.Value);
                                    _this.viewerOptionsTabPanel.afterRender();
                                    var startup = {
                                        "LoadFromGlobalSetting": true
                                    };
                                    _this.trimClient.doPost("UserOptions/Startup", startup).done(function (startupResponse) {
                                        _this.trimClient.setStartupOptions(startupResponse.UserOptions);
                                        _this.updateCheckboxes(startupResponse.UserOptions);
                                    });
                                    var alert = _this.m_alert();
                                    alert.clear();
                                }
                                catch (e) {
                                }
                            }).fail(function (response) {
                                alert('Encountered when error setting timezone and onstream/bypass file types');
                            });
                            this.trimClient.doPost("UserOptions/Reporter", data).done(function (reponse) {
                            });
                        };
                        SettingsPanel.prototype.updateCheckboxes = function (startupResponse) {
                            var wcPanes = [startupResponse.StartupUserOptionsWebClientPane1.Value,
                                startupResponse.StartupUserOptionsWebClientPane2.Value,
                                startupResponse.StartupUserOptionsWebClientPane3.Value];
                            var checkBoxes = this.dashboardConfigurationTabPanel.startupCheckboxes;
                            _.each(checkBoxes, function (checkBox) {
                                checkBox.Value(false);
                                _.each(wcPanes, function (pane) {
                                    if (checkBox.Id == pane) {
                                        checkBox.Value(true);
                                    }
                                });
                            });
                        };
                        return SettingsPanel;
                    }(HP.HPTRIM.Framework.Components.Layouts.Panel));
                    Plugins.SettingsPanel = SettingsPanel;
                })(Plugins = Panels.Plugins || (Panels.Plugins = {}));
            })(Panels = App.Panels || (App.Panels = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Panels;
            (function (Panels) {
                var Plugins;
                (function (Plugins) {
                    "use strict";
                    var ReassignActivityForm = (function (_super) {
                        __extends(ReassignActivityForm, _super);
                        function ReassignActivityForm(trimClient) {
                            _super.call(this, 'templates/Framework/Overlays/ReassignActivityOverlay');
                            this.reassignCaptionLabel = HP.HPTRIM.Messages.web_setAssignee;
                            this.errorVisible = ko.observable(false);
                            this.alertDetails = ko.observable("");
                            this.arrActivityUri = [];
                            this.LocationPickers = [];
                            this.numResultsTicked = ko.observable(0);
                            this.cancelButtonText = ko.observable(HP.HPTRIM.Messages.web_dp_cancelText);
                            this.activityUri = ko.observable("");
                            this.cssClass('as-spa-saved-search-form');
                            this.trimClient = trimClient;
                            var me = this;
                            var errorSubscription = function (newValue) {
                                me.errorVisible(newValue.length != 0);
                                me.alertDetails(newValue);
                            };
                            this.reassignField = new HP.HPTRIM.Field.LocationPicker(trimClient, HP.HPTRIM.Messages.web_setAssignee, false, errorSubscription);
                            this.reassignField.purpose = HPTRIM.LocationPurpose.WorkflowAssignee;
                        }
                        ReassignActivityForm.prototype.createLocationPickers = function (results) {
                            var me = this;
                            var errorSubscription = function (newValue) {
                                me.errorVisible(newValue.length != 0);
                                me.alertDetails(newValue);
                            };
                            var lcReassignField;
                            this.LocationPickers = [];
                            var setAssigneeForText = '';
                            for (var i = 0; i < results.length; i++) {
                                setAssigneeForText = HP.HPTRIM.Messages.web_setAssignee + ' for ' + results[i].ActivityName.Value;
                                lcReassignField = new HP.HPTRIM.Field.LocationPicker(this.trimClient, setAssigneeForText, false, errorSubscription);
                                lcReassignField.purpose = HPTRIM.LocationPurpose.WorkflowAssignee;
                                this.LocationPickers.push(lcReassignField);
                            }
                        };
                        ReassignActivityForm.prototype.createActivityUri = function (resultUri) {
                            this.arrActivityUri = [];
                            for (var i = 0; i < resultUri.length; i++) {
                                this.arrActivityUri.push(resultUri[i]);
                            }
                        };
                        ReassignActivityForm.prototype.resetPanel = function () {
                            var me = this;
                            this.activityUri("");
                            this.reassignField.clear();
                            this.alertDetails("");
                            this.errorVisible(false);
                            me.LocationPickers = [];
                            _.each(me.LocationPickers, function (locationPicker) {
                                locationPicker.clear();
                            });
                        };
                        ReassignActivityForm.prototype.validateAndHandleErrors = function () {
                            var result = true;
                            return result;
                        };
                        ReassignActivityForm.prototype.saveHandler = function () {
                            var me = this;
                            if (this.validateAndHandleErrors()) {
                                if (this.activityUri()) {
                                    var data = {};
                                    if (this.LocationPickers.length > 0) {
                                        var arrNewLocation = [];
                                        _.each(me.LocationPickers, function (locationPicker) {
                                            arrNewLocation.push(locationPicker.getValue());
                                        });
                                        var hasAllReassigneeSet = true;
                                        for (var k = 0; k < arrNewLocation.length; k++) {
                                            if (!arrNewLocation[k]) {
                                                hasAllReassigneeSet = false;
                                                break;
                                            }
                                        }
                                        if (!hasAllReassigneeSet) {
                                            me.errorVisible(true);
                                            me.alertDetails(HP.HPTRIM.Messages.core_fieldBlank.replace("{0}", HP.HPTRIM.Messages.web_reassign));
                                            return;
                                        }
                                        for (var j = 0; j < this.arrActivityUri.length; j++) {
                                            data["ActivityAssignedTo"] = arrNewLocation[j].Uri;
                                            me.saveActivityLocation(data, me.arrActivityUri[j]);
                                        }
                                    }
                                    else if (me.LocationPickers.length <= 0) {
                                        var newLocation = me.reassignField.getValue();
                                        var uri = null;
                                        if (newLocation) {
                                            uri = newLocation.Uri;
                                        }
                                        if (!uri) {
                                            me.errorVisible(true);
                                            me.alertDetails(HP.HPTRIM.Messages.core_fieldBlank.replace("{0}", HP.HPTRIM.Messages.web_reassign));
                                            return;
                                        }
                                        data["ActivityAssignedTo"] = uri;
                                        me.saveActivityLocation(data, me.activityUri());
                                    }
                                }
                            }
                        };
                        ReassignActivityForm.prototype.saveActivityLocation = function (data, activityUri) {
                            var me = this;
                            var saveRequest = new HPTRIM.TrimObjectSave(me.trimClient, HPTRIM.BaseObjectTypes.Activity, parseInt(activityUri));
                            saveRequest.doRequestEx(data).done(function (response) {
                                me.dismiss();
                                var result = response.Results[0];
                                if (me.successCallback) {
                                    me.successCallback(result);
                                }
                            }).fail(function (error) {
                                var message = HP.HPTRIM.Messages.web_couldNotSaveActivity;
                                if (error.ResponseStatus.Message) {
                                    message = error.ResponseStatus.Message;
                                }
                                if (me.errorHandler) {
                                    me.errorHandler(error);
                                }
                                else {
                                    me.alertDetails(message);
                                    me.errorVisible(true);
                                }
                            });
                        };
                        ReassignActivityForm.prototype.saveClickHandler = function () {
                            this.saveHandler();
                        };
                        ReassignActivityForm.prototype.cancelClickHandler = function () {
                            this.cancelHandler();
                            this.dismiss();
                        };
                        ReassignActivityForm.prototype.dismiss = function () {
                        };
                        ReassignActivityForm.prototype.cancelHandler = function () {
                        };
                        return ReassignActivityForm;
                    }(HP.HPTRIM.Framework.Components.Layouts.Panel));
                    Plugins.ReassignActivityForm = ReassignActivityForm;
                })(Plugins = Panels.Plugins || (Panels.Plugins = {}));
            })(Panels = App.Panels || (App.Panels = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Panels;
            (function (Panels) {
                var Plugins;
                (function (Plugins) {
                    "use strict";
                    var RemoveContactForm = (function (_super) {
                        __extends(RemoveContactForm, _super);
                        function RemoveContactForm(trimClient) {
                            _super.call(this, 'templates/Framework/Overlays/RecordRemoveContactOverlay');
                            this.recordNumber = ko.observable("");
                            this.recordTitle = ko.observable("");
                            this.recordUri = "";
                            this.showControls = ko.observable(true);
                            this.errorVisible = ko.observable(false);
                            this.alertDetails = ko.observable("");
                            this.pageCaption = ko.observable(HP.HPTRIM.Messages.web_removeContactLabel);
                            this.cancelHandler = function () { };
                            this.selections = ko.observableArray([]);
                            this.selectedSearchItem = ko.observable("");
                            this.isLoading = ko.observable(true);
                            this.callback = function () { };
                            this.noContactsMessage = ko.observable(HP.HPTRIM.Messages.web_noSavedSearchAvailable);
                            this.trimClient = trimClient;
                            this.trimItemListLoader = new HP.HPTRIM.DataLoader.ChildObjectItemListLoader(trimClient, "", HPTRIM.BaseObjectTypes.Record, "ChildLocations", false);
                            this.trimItemListLoader.loadFilterer = function (item) {
                                if (item.Fields.RecordLocationTypeOfRecordLocation == "Contact") {
                                    return true;
                                }
                                return false;
                            };
                            this.isLoading = this.trimItemListLoader.loading;
                            this.itemList = new HP.HPTRIM.Framework.Components.ItemList.ItemListComponent({});
                            this.itemList.templateName('/templates/ItemList/RecordContactItemListCard');
                            var me = this;
                            this.saveHandler = function (uriArray, propertyName, parentUri, parentType, returnCallback) { };
                            this.selections.subscribe(function (newValue) {
                                if (newValue.length > 0) {
                                    me.errorVisible(false);
                                }
                            });
                        }
                        RemoveContactForm.prototype.refresh = function () {
                            this.itemList.load();
                        };
                        RemoveContactForm.prototype.resetPanel = function () {
                            this.selections([]);
                            this.itemList.items([]);
                            this.errorVisible(false);
                        };
                        RemoveContactForm.prototype.updateQuery = function (query) {
                            this.trimItemListLoader._searchString = query;
                            this.itemList.updateLoader(this.trimItemListLoader);
                            this.itemList.load();
                        };
                        RemoveContactForm.prototype.validateAndHandleErrors = function () {
                            var result = true;
                            return result;
                        };
                        RemoveContactForm.prototype.save = function () {
                            var _this = this;
                            if (this.selections().length > 0) {
                                this.saveHandler(this.selections(), "ChildLocations", this.recordUri, HPTRIM.BaseObjectTypes.Record, function () {
                                    _this.callback();
                                    _this.cancelHandler();
                                });
                            }
                            else {
                                this.alertDetails(HP.HPTRIM.Messages.web_makeValidSelection);
                                this.errorVisible(true);
                            }
                        };
                        return RemoveContactForm;
                    }(HP.HPTRIM.Framework.Components.Layouts.Panel));
                    Plugins.RemoveContactForm = RemoveContactForm;
                })(Plugins = Panels.Plugins || (Panels.Plugins = {}));
            })(Panels = App.Panels || (App.Panels = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Panels;
            (function (Panels) {
                var Plugins;
                (function (Plugins) {
                    "use strict";
                    var RemoveRelatedRecordForm = (function (_super) {
                        __extends(RemoveRelatedRecordForm, _super);
                        function RemoveRelatedRecordForm(trimClient) {
                            _super.call(this, 'templates/Framework/Overlays/RecordRemoveContactOverlay');
                            this.recordNumber = ko.observable("");
                            this.recordTitle = ko.observable("");
                            this.recordUri = "";
                            this.errorVisible = ko.observable(false);
                            this.alertDetails = ko.observable("");
                            this.pageCaption = ko.observable(HP.HPTRIM.Messages.web_remove + ' ' + HP.HPTRIM.Messages.dp_cap_relatedRecords);
                            this.showControls = ko.observable(true);
                            this.cancelHandler = function () { };
                            this.selections = ko.observableArray([]);
                            this.selectedSearchItem = ko.observable("");
                            this.isLoading = ko.observable(true);
                            this.callback = function () { };
                            this.noContactsMessage = ko.observable(HP.HPTRIM.Messages.web_noSavedSearchAvailable);
                            this.trimClient = trimClient;
                            this.trimItemListLoader = new HP.HPTRIM.DataLoader.ChildObjectItemListLoader(trimClient, "", HPTRIM.BaseObjectTypes.Record, "ChildRelationships", false);
                            this.isLoading = this.trimItemListLoader.loading;
                            this.itemList = new HP.HPTRIM.Framework.Components.ItemList.ItemListComponent({});
                            this.itemList.templateName('/templates/ItemList/RelatedRecordsItemListCard');
                            var me = this;
                            this.saveHandler = function (uriArray, propertyName, parentUri, parentType, returnCallback) { };
                            this.selections.subscribe(function (newValue) {
                                if (newValue.length > 0) {
                                    me.errorVisible(false);
                                }
                            });
                        }
                        RemoveRelatedRecordForm.prototype.refresh = function () {
                            this.itemList.load();
                        };
                        RemoveRelatedRecordForm.prototype.resetPanel = function () {
                            this.selections([]);
                            this.itemList.items([]);
                            this.errorVisible(false);
                        };
                        RemoveRelatedRecordForm.prototype.updateQuery = function (query) {
                            this.trimItemListLoader._searchString = query;
                            this.itemList.updateLoader(this.trimItemListLoader);
                            this.itemList.load();
                        };
                        RemoveRelatedRecordForm.prototype.validateAndHandleErrors = function () {
                            var result = true;
                            return result;
                        };
                        RemoveRelatedRecordForm.prototype.save = function () {
                            var _this = this;
                            if (this.selections().length > 0) {
                                this.cancelHandler();
                                this.saveHandler(this.selections(), "ChildRelationships", this.recordUri, HPTRIM.BaseObjectTypes.Record, function () {
                                    _this.callback();
                                });
                            }
                            else {
                                this.alertDetails(HP.HPTRIM.Messages.web_makeValidSelection);
                                this.errorVisible(true);
                            }
                        };
                        return RemoveRelatedRecordForm;
                    }(HP.HPTRIM.Framework.Components.Layouts.Panel));
                    Plugins.RemoveRelatedRecordForm = RemoveRelatedRecordForm;
                })(Plugins = Panels.Plugins || (Panels.Plugins = {}));
            })(Panels = App.Panels || (App.Panels = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Panels;
            (function (Panels) {
                var Plugins;
                (function (Plugins) {
                    "use strict";
                    var AddRelatedRecordForm = (function (_super) {
                        __extends(AddRelatedRecordForm, _super);
                        function AddRelatedRecordForm(trimClient) {
                            var _this = this;
                            _super.call(this, 'templates/Framework/Overlays/MainObjectUpdateTaskForm');
                            this.recordNumber = ko.observable("");
                            this.recordTitle = ko.observable("");
                            this.recordUri = "";
                            this.itemPickers = [];
                            this.fieldDecorators = [];
                            this.rawControls = ko.observableArray([]);
                            this.errorHandler = function (title, error) { };
                            this.title = ko.observable(HP.HPTRIM.Messages.web_Add + ' ' + HP.HPTRIM.Messages.dp_cap_relatedRecords);
                            this.caption = ko.observable("");
                            this.okText = ko.observable(HP.HPTRIM.Messages.web_save);
                            this.errorVisible = ko.observable(false);
                            this.alertDetails = ko.observable("");
                            this.showMessage = ko.observable(false);
                            this.callback = function () { };
                            this.cancelHandler = function () {
                            };
                            this.cssClass('as-spa-saved-search-form');
                            this.trimClient = trimClient;
                            var itemPicker = HP.HPTRIM.Form.TrimObjectDecorator.makeTrimItemPicker(this.trimClient, 'Record', HP.HPTRIM.Messages.dp_cap_relatedRecords, HP.HPTRIM.Messages.dp_cap_relatedRecords, false);
                            itemPicker.submitPropertyName = "RecordRelationshipRelatedRecord";
                            this.itemPickers.push(itemPicker);
                            this.rawControls.push(itemPicker);
                            var dummyPageItem = {
                                Caption: HP.HPTRIM.Messages.web_releationshipType,
                                Format: "Enum",
                                Name: ""
                            };
                            var enumPicker = new HP.HPTRIM.Form.EnumDecorator(this.trimClient, dummyPageItem);
                            var items = [];
                            var comboBox = HP.HPTRIM.Field.TrimEnumComboBoxFactory.makeComboBox(this.trimClient, "RecordRelationshipType", items);
                            enumPicker = $.extend(enumPicker, comboBox);
                            enumPicker.submitPropertyName = "RecordRelationshipRelationType";
                            itemPicker.rawValue.subscribe(function (newValue) {
                                if (newValue) {
                                    _this.alertDetails('');
                                    _this.errorVisible(false);
                                }
                            });
                            this.fieldDecorators.push(enumPicker);
                            this.rawControls.push(enumPicker);
                        }
                        AddRelatedRecordForm.prototype.resetPanel = function () {
                            this.okText(HP.HPTRIM.Messages.web_save);
                            this.alertDetails("");
                            this.errorVisible(false);
                            _.each(this.fieldDecorators, function (fieldDecorator) {
                                fieldDecorator.reset();
                            });
                            _.each(this.itemPickers, function (itemPicker) {
                                itemPicker.reset();
                            });
                        };
                        AddRelatedRecordForm.prototype.preparePanel = function (title, caption, okText) {
                            this.resetPanel();
                            this.title(title);
                            this.caption(caption);
                            if (okText) {
                                this.okText(okText);
                            }
                            else {
                                this.okText(HP.HPTRIM.Messages.web_save);
                            }
                        };
                        AddRelatedRecordForm.prototype.doTask = function () {
                            var _this = this;
                            var me = this;
                            if (this.validateAndHandleErrors()) {
                                var parameterList = [];
                                _.each(me.fieldDecorators, function (fieldDecorator) {
                                    if (fieldDecorator.submitPropertyName) {
                                        parameterList.push({
                                            "name": fieldDecorator.submitPropertyName,
                                            "value": fieldDecorator.Value()
                                        });
                                    }
                                });
                                _.each(me.itemPickers, function (itemPicker) {
                                    if (itemPicker.submitPropertyName) {
                                        parameterList.push({
                                            "name": itemPicker.submitPropertyName,
                                            "value": itemPicker.getValue()
                                        });
                                    }
                                });
                                this.saveHandler(me.recordUri, null, HPTRIM.BaseObjectTypes.Record, HP.HPTRIM.App.Panels.RecordDetails.RecordTasks.addRelatedRecordTask(), "", parameterList, function () {
                                    _this.callback();
                                }, this.warningHandler, this.errorHandler);
                            }
                        };
                        AddRelatedRecordForm.prototype.validateAndHandleErrors = function () {
                            var allGood = true;
                            _.each(this.itemPickers, function (itemPicker) {
                                if (!itemPicker.getValue()) {
                                    allGood = false;
                                }
                                else if (itemPicker.getValue().Uri == "0") {
                                    allGood = false;
                                }
                            });
                            if (!allGood) {
                                this.alertDetails(HP.HPTRIM.Messages.web_makeValidSelection);
                                this.errorVisible(true);
                            }
                            return allGood;
                        };
                        ;
                        return AddRelatedRecordForm;
                    }(HP.HPTRIM.Framework.Components.Layouts.Panel));
                    Plugins.AddRelatedRecordForm = AddRelatedRecordForm;
                })(Plugins = Panels.Plugins || (Panels.Plugins = {}));
            })(Panels = App.Panels || (App.Panels = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Panels;
            (function (Panels) {
                var Plugins;
                (function (Plugins) {
                    "use strict";
                    var RemoveFromUserLabelsForm = (function (_super) {
                        __extends(RemoveFromUserLabelsForm, _super);
                        function RemoveFromUserLabelsForm(trimClient) {
                            _super.call(this, 'templates/Framework/Overlays/RecordRemoveContactOverlay');
                            this.title = ko.observable(HP.HPTRIM.Messages.web_removeUserLabel);
                            this.caption = ko.observable("");
                            this.recordNumber = ko.observable("");
                            this.recordTitle = ko.observable("");
                            this.recordUri = "";
                            this.errorVisible = ko.observable(false);
                            this.alertDetails = ko.observable("");
                            this.pageCaption = ko.observable(HP.HPTRIM.Messages.web_removeUserLabel);
                            this.cancelHandler = function () { };
                            this.errorHandler = function (error) { };
                            this.showControls = ko.observable(true);
                            this.selections = ko.observableArray([]);
                            this.selectedSearchItem = ko.observable("");
                            this.isLoading = ko.observable(true);
                            this.callback = function () { };
                            this.noUserLabelMessage = ko.observable(HP.HPTRIM.Messages.web_noUserLabelBeingFound);
                            this.trimClient = trimClient;
                            this.trimItemListLoader = new HP.HPTRIM.DataLoader.TrimItemListLoader(trimClient, "", HPTRIM.BaseObjectTypes.UserLabel, this);
                            this.isLoading = this.trimItemListLoader.loading;
                            this.itemList = new HP.HPTRIM.Framework.Components.ItemList.ItemListComponent({});
                            this.itemList.templateName('/templates/ItemList/UserLabeltemListCard');
                            var me = this;
                            this.saveHandler = function (uri, infoObject, objectType, task, requiredCommandIds, parameterList, successCallback, failCallback) { };
                            this.selections.subscribe(function (newValue) {
                                if (newValue.length > 0) {
                                    me.errorVisible(false);
                                }
                            });
                        }
                        RemoveFromUserLabelsForm.prototype.doTask = function () { };
                        RemoveFromUserLabelsForm.prototype.prepareForm = function (taskId) {
                            this.updateQuery("all");
                        };
                        ;
                        RemoveFromUserLabelsForm.prototype.setInfoObject = function (infoObject) { };
                        ;
                        RemoveFromUserLabelsForm.prototype.appliesToTask = function (objectType, taskId) {
                            if (taskId == 'RemoveFromUserLabels') {
                                return true;
                            }
                            return false;
                        };
                        RemoveFromUserLabelsForm.prototype.refresh = function () {
                            this.itemList.load();
                        };
                        RemoveFromUserLabelsForm.prototype.resetPanel = function () {
                            this.selections([]);
                            this.itemList.items([]);
                            this.errorVisible(false);
                        };
                        RemoveFromUserLabelsForm.prototype.updateQuery = function (query) {
                            this.trimItemListLoader._searchString = query;
                            this.trimItemListLoader.properties = ['UserLabelLabelType', 'UserLabelFullName', 'UserLabelOwner'];
                            this.itemList.updateLoader(this.trimItemListLoader);
                            this.itemList.load();
                        };
                        RemoveFromUserLabelsForm.prototype.validateAndHandleErrors = function () {
                            var result = true;
                            return result;
                        };
                        RemoveFromUserLabelsForm.prototype.save = function () {
                            var _this = this;
                            var me = this;
                            if (me.selections().length > 0) {
                                var parameterList = [];
                                _.each(me.selections(), function (selection) {
                                    parameterList.push({
                                        "name": 'RemoveUserLabelUserLabelToDetach',
                                        "value": Number(selection)
                                    });
                                });
                                if (this.executeTask) {
                                    this.executeTask(parameterList);
                                }
                                else {
                                    this.saveHandler(me.recordUri, null, HPTRIM.BaseObjectTypes.Record, HP.HPTRIM.App.Panels.RecordDetails.RecordTasks.removeFromUserLabelsTask(), "", parameterList, function () {
                                        _this.callback();
                                    }, me.warningHandler, me.errorHandler);
                                }
                            }
                            else {
                                this.alertDetails(HP.HPTRIM.Messages.web_makeValidSelection);
                                this.errorVisible(true);
                            }
                        };
                        return RemoveFromUserLabelsForm;
                    }(HP.HPTRIM.Framework.Components.Layouts.Panel));
                    Plugins.RemoveFromUserLabelsForm = RemoveFromUserLabelsForm;
                })(Plugins = Panels.Plugins || (Panels.Plugins = {}));
            })(Panels = App.Panels || (App.Panels = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Panels;
            (function (Panels) {
                var Plugins;
                (function (Plugins) {
                    "use strict";
                    var AddToUserLabelForm = (function (_super) {
                        __extends(AddToUserLabelForm, _super);
                        function AddToUserLabelForm(trimClient) {
                            _super.call(this, 'templates/Framework/Overlays/MainObjectUpdateTaskForm');
                            this.recordNumber = ko.observable("");
                            this.recordTitle = ko.observable("");
                            this.recordUri = "";
                            this.itemPickers = [];
                            this.fieldDecorators = [];
                            this.rawControls = ko.observableArray([]);
                            this.errorHandler = function (error) { };
                            this.title = ko.observable(HP.HPTRIM.Messages.web_addToUserLabel);
                            this.caption = ko.observable('');
                            this.okText = ko.observable(HP.HPTRIM.Messages.web_save);
                            this.errorVisible = ko.observable(false);
                            this.alertDetails = ko.observable("");
                            this.callback = function () { };
                            this.cancelHandler = function () {
                            };
                            this.cssClass('as-spa-saved-search-form');
                            this.trimClient = trimClient;
                            this.saveHandler = function (uri, infoObject, objectType, task, requiredCommandIds, parameterList, successCallback, failCallback) { };
                            this.userLabelControl = new HP.HPTRIM.App.Panels.UserLabelTreePanel(trimClient);
                        }
                        AddToUserLabelForm.prototype.prepareForm = function (taskId) { };
                        ;
                        AddToUserLabelForm.prototype.setInfoObject = function (infoObject) { };
                        ;
                        AddToUserLabelForm.prototype.appliesToTask = function (objectType, taskId) {
                            if (taskId == "AddToUserLabel") {
                                return true;
                            }
                            return false;
                        };
                        AddToUserLabelForm.prototype.resetPanel = function () {
                            this.okText(HP.HPTRIM.Messages.web_save);
                            this.alertDetails("");
                            this.errorVisible(false);
                            this.userLabelControl.initialise();
                        };
                        AddToUserLabelForm.prototype.initializeRecordUri = function (recordUri) {
                            this.userLabelControl.initializeUri(recordUri);
                        };
                        AddToUserLabelForm.prototype.preparePanel = function (title, caption, okText) {
                            this.resetPanel();
                            this.title(title);
                            this.caption(caption);
                            if (okText) {
                                this.okText(okText);
                            }
                            else {
                                this.okText(HP.HPTRIM.Messages.web_save);
                            }
                        };
                        AddToUserLabelForm.prototype.doTask = function () {
                            var me = this;
                            if (me.userLabelControl.nodeSelected()) {
                                var parameterList = [{ name: 'SetUserLabelUserLabelToApply', 'value': me.userLabelControl.nodeSelected().uri }];
                                var task = HP.HPTRIM.App.Panels.RecordDetails.RecordTasks.addToUserLabelTask();
                                if (this.executeTask) {
                                    this.executeTask(parameterList, task);
                                }
                                else {
                                    this.saveHandler(me.recordUri, me.userLabelControl.nodeSelected(), HPTRIM.BaseObjectTypes.Record, HP.HPTRIM.App.Panels.RecordDetails.RecordTasks.addToUserLabelTask(), "", parameterList, function () {
                                        me.callback();
                                    }, me.warningHandler, me.errorHandler);
                                }
                            }
                        };
                        AddToUserLabelForm.prototype.validateAndHandleErrors = function () {
                            var allGood = true;
                            _.each(this.itemPickers, function (itemPicker) {
                                if (!itemPicker.getValue()) {
                                    allGood = false;
                                }
                                else if (itemPicker.getValue().Uri == "0") {
                                    allGood = false;
                                }
                            });
                            if (!allGood) {
                                this.alertDetails(HP.HPTRIM.Messages.web_makeValidSelection);
                                this.errorVisible(true);
                            }
                            return allGood;
                        };
                        ;
                        return AddToUserLabelForm;
                    }(HP.HPTRIM.Framework.Components.Layouts.Panel));
                    Plugins.AddToUserLabelForm = AddToUserLabelForm;
                })(Plugins = Panels.Plugins || (Panels.Plugins = {}));
            })(Panels = App.Panels || (App.Panels = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Panels;
            (function (Panels) {
                var Plugins;
                (function (Plugins) {
                    "use strict";
                    var KeywordSelectOverlay = (function (_super) {
                        __extends(KeywordSelectOverlay, _super);
                        function KeywordSelectOverlay(trimClient) {
                            var _this = this;
                            _super.call(this, 'templates/Framework/Overlays/KeywordSelectOverlay', true);
                            this.isActionPanelVisible = ko.observable(false);
                            this.isRemoveAllVisible = ko.observable(false);
                            this.hide = function () { };
                            this.keywordNotes = ko.observable("");
                            this.titlingMethod = HP.HPTRIM.TitlingMethods.FreeText;
                            this.selectedKeywords = ko.observableArray([]);
                            this.promptTerm = ko.observable(null);
                            this.promptTermPrompt = ko.observable("");
                            this.keywordTreePanel = new HP.HPTRIM.App.Panels.KeywordTreePanel(trimClient);
                            this.keywordTreePanel.nodeSelected.subscribe(function (value) {
                                if (!value) {
                                    return;
                                }
                                _this.isActionPanelVisible(true);
                                var notes = value.sourceObject.KeywordNotes.Value;
                                _this.keywordNotes(notes);
                            });
                            this.m_alert = ko.observable(new HP.HPTRIM.Form.Alert());
                            this.setupToolbarButtons();
                            this.selectedKeywords.subscribe(function (newValue) {
                                var removeAllAvailable = newValue.length > 0;
                                _this.isRemoveAllVisible(removeAllAvailable);
                                if (_this.isDescriptorTitling()) {
                                    _this.showRemoveIconOnTopTerm(newValue.length == 1);
                                }
                            });
                            ko.postbox.subscribe("KeywordOverlayReset", function () {
                                _this.reset();
                            });
                        }
                        KeywordSelectOverlay.prototype.isDescriptorTitling = function () {
                            return this.titlingMethod == HP.HPTRIM.TitlingMethods.Keyword_Descriptor;
                        };
                        KeywordSelectOverlay.prototype.reset = function () {
                            this.selectedKeywords([]);
                            this.keywordTreePanel.nodeSelected(null);
                            this.keywordNotes('');
                        };
                        KeywordSelectOverlay.prototype.setupToolbarButtons = function () {
                            var _this = this;
                            var newRecordFromClassification = new HP.HPTRIM.Framework.Components.ActionManager.ActionBase({
                                id: "addNewRecord",
                                caption: HP.HPTRIM.Messages.web_Add,
                                tooltip: HP.HPTRIM.Messages.web_Add,
                                enabled: ko.observable(true),
                                visible: ko.observable(true),
                                active: true,
                                actionHandler: function (action) {
                                    _this.cancelAddPromptTerm();
                                    _this.updateNodes();
                                }
                            });
                            this.actionPanel = new HP.HPTRIM.Framework.Components.ActionManager.ActionManagerComponent("Command", [newRecordFromClassification]);
                            this.actionPanel.templateName(HP.HPTRIM.Framework.Components.ActionManager.ActionManagerComponent.templates.buttonGroup);
                            this.actionPanel.visible(true);
                        };
                        KeywordSelectOverlay.prototype.updateNodes = function () {
                            var gtreeNode = this.keywordTreePanel.nodeSelected();
                            if (!gtreeNode) {
                                return;
                            }
                            gtreeNode.sourceObject.NameString = gtreeNode.sourceObject.KeywordName.Value;
                            if (this.titlingMethod == HP.HPTRIM.TitlingMethods.Keyword_Descriptor) {
                                if (this.selectedKeywords().length == 0) {
                                    if (gtreeNode.sourceObject.KeywordIsAPrimaryTerm.Value !== true) {
                                        var msg = HPTRIM.Utils.String.format(HP.HPTRIM.Messages.web_selectTopTerm, [gtreeNode.sourceObject.NameString]);
                                        this.onError(msg);
                                        return;
                                    }
                                }
                            }
                            if (gtreeNode.sourceObject.KeywordIsPrompt.Value == true) {
                                this.promptTerm(gtreeNode);
                                var name = this.promptTerm().sourceObject.NameString;
                                var start = name.indexOf('[');
                                var end = name.indexOf(']') + 1;
                                var promptMessage = name.substring(start, end);
                                this.promptTermPrompt(promptMessage);
                                this.highlightPromptParameter();
                                return;
                            }
                            if (this.titlingMethod == HP.HPTRIM.TitlingMethods.Keyword_ISO) {
                                this.handleAddIsoKeyword(gtreeNode);
                                return;
                            }
                            this.addKeyword(gtreeNode);
                        };
                        KeywordSelectOverlay.prototype.handleAddIsoKeyword = function (gtreeNode) {
                            this.selectedKeywords([]);
                            var parentStack = [];
                            var currentNode = gtreeNode;
                            do {
                                parentStack.push(currentNode);
                                currentNode = currentNode.parent;
                                if (!currentNode) {
                                    break;
                                }
                            } while (currentNode.parent);
                            parentStack.push(currentNode);
                            while (parentStack.length > 0) {
                                var node = parentStack.pop();
                                if (node) {
                                    if (node.sourceObject) {
                                        if (!node.sourceObject.NameString) {
                                            node.sourceObject.NameString = node.sourceObject.KeywordName.Value;
                                        }
                                    }
                                    this.addKeyword(node);
                                }
                            }
                            ;
                        };
                        KeywordSelectOverlay.prototype.addKeyword = function (gtreeNode) {
                            var keywordTrimPropertyValue = gtreeNode.sourceObject;
                            var keyword = HPTRIM.TrimBaseObject.make(keywordTrimPropertyValue);
                            var hasBeenAddedObject = null;
                            if (this.titlingMethod == HP.HPTRIM.TitlingMethods.Keyword_Descriptor) {
                                hasBeenAddedObject = _.find(this.selectedKeywords(), function (item) {
                                    var rc = item.Uri == keyword.Uri;
                                    return rc;
                                });
                            }
                            if (!hasBeenAddedObject) {
                                this.selectedKeywords.push(keyword);
                            }
                        };
                        KeywordSelectOverlay.prototype.initialise = function () {
                            this.keywordTreePanel.initialise();
                        };
                        KeywordSelectOverlay.prototype.cancelHandler = function () {
                            this.hide();
                            this.keywordNotes("");
                        };
                        KeywordSelectOverlay.prototype.remove = function (keywordName, index) {
                            if (this.titlingMethod == HP.HPTRIM.TitlingMethods.Keyword_ISO) {
                                var end = this.selectedKeywords().length;
                                this.selectedKeywords.splice(index, end);
                            }
                            else {
                                this.selectedKeywords.remove(function (item) {
                                    if (item.displayValue == keywordName) {
                                        return true;
                                    }
                                    return false;
                                });
                                if (this.titlingMethod == HP.HPTRIM.TitlingMethods.Keyword_Descriptor) {
                                    this.showRemoveIconOnTopTerm(this.selectedKeywords().length == 1);
                                }
                            }
                        };
                        KeywordSelectOverlay.prototype.showRemoveIconOnTopTerm = function (show) {
                            var ele = $('.hp-remove').get(0);
                            if (ele) {
                                if (show) {
                                    $(ele).css('display', 'block');
                                }
                                else {
                                    $(ele).css('display', 'none');
                                }
                            }
                        };
                        KeywordSelectOverlay.prototype.setTitleDecorator = function (thesaurusTitle) {
                            this.keywordTitleDecorator = thesaurusTitle;
                            this.updateSelectedKeywords();
                        };
                        KeywordSelectOverlay.prototype.updateSelectedKeywords = function () {
                            var selectedKeywords = this.keywordTitleDecorator.keywords;
                            var parsedKeywords = [];
                            for (var i = 0; i < selectedKeywords.length; i++) {
                                var obj = selectedKeywords[i];
                                var value = {
                                    TrimType: "keyword",
                                    NameString: obj.RecordKeywordKeyword.KeywordName.Value,
                                    Uri: obj.Uri,
                                    Icon: obj.RecordKeywordKeyword.Icon
                                };
                                var keyword = HPTRIM.TrimBaseObject.make(value);
                                parsedKeywords.push(keyword);
                            }
                            if (parsedKeywords.length != 0 && this.selectedKeywords().length == 0) {
                                this.selectedKeywords(parsedKeywords);
                            }
                        };
                        KeywordSelectOverlay.prototype.setTitlingMethod = function (keywordTitlingMethod) {
                            this.titlingMethod = keywordTitlingMethod;
                        };
                        KeywordSelectOverlay.prototype.okHandler = function () {
                            if (this.keywordTitleDecorator) {
                                var value = this.getValue();
                                this.keywordTitleDecorator.Value(value);
                            }
                            this.cancelHandler();
                        };
                        KeywordSelectOverlay.prototype.getValue = function () {
                            var keywords = this.selectedKeywords();
                            var value = _.pluck(keywords, 'displayValue').join('-');
                            return value;
                        };
                        KeywordSelectOverlay.prototype.clear = function () {
                            this.selectedKeywords([]);
                            this.isRemoveAllVisible(false);
                        };
                        KeywordSelectOverlay.prototype.addPromptTerm = function () {
                            var promptParam = $('#keywordPromptInput').val();
                            if (promptParam.trim() == "") {
                                var errorMesage = HPTRIM.Utils.String.format(HP.HPTRIM.Messages.sui_suggestedParameterCaption, [this.promptTerm().sourceObject.NameString]);
                                this.onError(errorMesage);
                                $('#keywordPromptInput').get(0).focus();
                                return;
                            }
                            var promptTermString = this.promptTerm().sourceObject.NameString;
                            var start = promptTermString.indexOf('[') + 1;
                            var end = promptTermString.indexOf(']');
                            var startString = promptTermString.substring(0, start);
                            var endString = promptTermString.substring(end, promptTermString.length);
                            var completeTerm = startString + promptParam + endString;
                            this.promptTerm().sourceObject.NameString = completeTerm;
                            if (this.titlingMethod == HP.HPTRIM.TitlingMethods.Keyword_ISO) {
                                this.handleAddIsoKeyword(this.promptTerm());
                            }
                            else {
                                this.addKeyword(this.promptTerm());
                            }
                            this.cancelAddPromptTerm();
                        };
                        KeywordSelectOverlay.prototype.cancelAddPromptTerm = function () {
                            this.promptTerm(null);
                            this.m_alert().clear();
                        };
                        KeywordSelectOverlay.prototype.highlightPromptParameter = function () {
                            setTimeout(function () {
                                var inputId = 'keywordPromptInput';
                                document.getElementById('keywordPromptInput').focus();
                            }, 200);
                        };
                        KeywordSelectOverlay.prototype.onError = function (error) {
                            this.m_alert(new HP.HPTRIM.Form.Alert());
                            this.m_alert().setAlert(HP.HPTRIM.Messages.web_error, error);
                        };
                        return KeywordSelectOverlay;
                    }(HP.HPTRIM.Framework.Components.Layouts.Panel));
                    Plugins.KeywordSelectOverlay = KeywordSelectOverlay;
                })(Plugins = Panels.Plugins || (Panels.Plugins = {}));
            })(Panels = App.Panels || (App.Panels = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Panels;
            (function (Panels) {
                var Plugins;
                (function (Plugins) {
                    "use strict";
                    var RecordMakeRequest = (function (_super) {
                        __extends(RecordMakeRequest, _super);
                        function RecordMakeRequest(trimClient) {
                            var _this = this;
                            _super.call(this, 'templates/Framework/Overlays/RecordRequestOverlay');
                            this.hasInfoObject = ko.observable(false);
                            this.errorVisible = ko.observable(false);
                            this.alertDetails = ko.observable("");
                            this.cssClass('as-spa-saved-search-form');
                            this.trimClient = trimClient;
                            var me = this;
                            var errorSubscription = function (newValue) {
                                me.errorVisible(newValue.length != 0);
                                me.alertDetails(newValue);
                            };
                            this.isRetrieveTemporary = ko.observable(false);
                            this.isRetrievePermanent = ko.observable(false);
                            this.isRetrieveRecurring = ko.observable(false);
                            this.isPickupNew = ko.observable(false);
                            this.isPickupReturn = ko.observable(false);
                            this.isBasicRequest = ko.observable(false);
                            this.requestTypeName = ko.observable("");
                            this.recordTitle = ko.observable("");
                            this.recordNumber = ko.observable("");
                            this.currentHomeLocationName = ko.observable("");
                            this.currentHomeLocationIcon = ko.observable("");
                            var homeLocationPageItem = {
                                Caption: HP.HPTRIM.Messages.web_homeLocationLabel,
                                Format: "String",
                                Name: "",
                                Value: this.currentHomeLocationName,
                                Icon: this.currentHomeLocationIcon,
                            };
                            this.currentHomeLocationField = new HP.HPTRIM.Form.StringDecorator(homeLocationPageItem);
                            this.currentHomeLocationField.enabled(false);
                            this.requestorField = new HP.HPTRIM.Field.LocationPicker(trimClient, HP.HPTRIM.Messages.web_requestedBy, false, errorSubscription);
                            this.requestorField.submitPropertyName = "RequestRecordRequestor";
                            this.requestorField.purpose = HPTRIM.LocationPurpose.Requester;
                            this.newHomeField = new HP.HPTRIM.Field.LocationPicker(trimClient, HP.HPTRIM.Messages.web_newHomeLocation, false, errorSubscription);
                            this.newHomeField.submitPropertyName = "RequestRecordRequestor";
                            this.newHomeField.purpose = HPTRIM.LocationPurpose.Home;
                            this.serviceLocationField = new HP.HPTRIM.Field.LocationPicker(trimClient, HP.HPTRIM.Messages.web_newHomeLocation, false, errorSubscription);
                            this.serviceLocationField.submitPropertyName = "RequestRecordServiceLocation";
                            this.serviceLocationField.purpose = HPTRIM.LocationPurpose.NoPurpose;
                            this.currentAssigneeLocationName = ko.observable("");
                            this.currentAssigneeLocationIcon = ko.observable("");
                            var assigneeLocationPageItem = {
                                Caption: HP.HPTRIM.Messages.web_assignee,
                                Format: "String",
                                Name: "",
                                Value: this.currentAssigneeLocationName,
                                Icon: this.currentAssigneeLocationIcon,
                            };
                            this.currentAssigneeLocationField = new HP.HPTRIM.Form.StringDecorator(assigneeLocationPageItem);
                            this.currentAssigneeLocationField.enabled(false);
                            var priorityPageItem = {
                                Caption: HP.HPTRIM.Messages.web_priority,
                                Format: "Enum",
                                Name: ""
                            };
                            this.requestPriorityField = new HP.HPTRIM.Form.EnumDecorator(this.trimClient, priorityPageItem);
                            var comboBox = HP.HPTRIM.Field.TrimEnumComboBoxFactory.makeComboBox(this.trimClient, "RequestPriority");
                            comboBox.enumName = "RequestPriority";
                            comboBox.Caption = HP.HPTRIM.Messages.web_priority;
                            comboBox.getData();
                            this.requestPriorityField = $.extend(this.requestPriorityField, comboBox);
                            this.requestPriorityField.submitPropertyName = "RequestRecordPriority";
                            var dateRequiredPageItem = {
                                Caption: HP.HPTRIM.Messages.web_dateRequired,
                                Format: "Datetime",
                                Name: "",
                                Value: ko.observable(null),
                            };
                            this.dateRequiredFromField = new HP.HPTRIM.Form.DateDecorator(dateRequiredPageItem, this.trimClient.getDateFormat());
                            this.dateRequiredFromField.submitPropertyName = "RequestRecordDateRequired";
                            this.showDateRequired = ko.observable(true);
                            this.requestPriorityField.Value.subscribe(function (newValue) {
                                if (newValue == "Low") {
                                    _this.showDateRequired(true);
                                    _this.dateRequiredFromField.reinitaliseDatePicker();
                                }
                                else {
                                    _this.showDateRequired(false);
                                }
                            });
                            this.visible.subscribe(function (newValue) {
                                if (_this.requestPriorityField.Value() == "Low") {
                                    _this.showDateRequired(true);
                                    _this.dateRequiredFromField.reinitaliseDatePicker();
                                }
                                _this.recurUntilField.reinitaliseDatePicker();
                            });
                            this.recurranceCount = ko.observable(1);
                            var recurranceCountPageItem = {
                                Caption: HP.HPTRIM.Messages.web_every,
                                Format: "Number",
                                Name: "",
                                Value: this.recurranceCount,
                            };
                            this.recurranceCountField = new HP.HPTRIM.Form.NumberDecorator(recurranceCountPageItem);
                            this.recurranceCountField.submitPropertyName = "RequestRecordFrequency";
                            var recurrTypePageItem = {
                                Caption: "",
                                Format: "Enum",
                                Name: ""
                            };
                            this.recurranceTypeField = new HP.HPTRIM.Form.EnumDecorator(this.trimClient, recurrTypePageItem);
                            var frequencyComboBox = HP.HPTRIM.Field.TrimEnumComboBoxFactory.makeComboBox(this.trimClient, "DateInterval");
                            frequencyComboBox.enumName = "DateInterval";
                            frequencyComboBox.getData();
                            this.recurranceTypeField = $.extend(this.recurranceTypeField, frequencyComboBox);
                            this.recurranceTypeField.submitPropertyName = "RequestRecordFrequencyType";
                            var recurUntilPageItem = {
                                Caption: HP.HPTRIM.Messages.web_until,
                                Format: "Datetime",
                                Name: "",
                                Value: ko.observable(null),
                            };
                            this.recurUntilField = new HP.HPTRIM.Form.DateDecorator(recurUntilPageItem, this.trimClient.getDateFormat());
                            this.recurUntilField.submitPropertyName = "RequestRecordEndDate";
                            var notesPageItem = {
                                Caption: HPTRIM.Messages.web_notes,
                                Format: "string",
                                Name: "",
                                CharacterLimit: 999,
                                Value: ko.observable(""),
                            };
                            this.notesField = new HPTRIM.Form.StringDecorator(notesPageItem);
                            this.notesField.submitPropertyName = "RequestRecordNotes";
                        }
                        RecordMakeRequest.prototype.appliesToTask = function (objectType, taskId) {
                            if (objectType == HPTRIM.BaseObjectTypes.Record) {
                                if (taskId == Panels.RecordDetails.RecordTasks.makeRequestRetrieveTemporaryTaskId) {
                                    return true;
                                }
                                if (taskId == Panels.RecordDetails.RecordTasks.makeRequestRetrieveRecurringTaskId) {
                                    return true;
                                }
                                if (taskId == Panels.RecordDetails.RecordTasks.makeRequestRetrievePermanentTaskId) {
                                    return true;
                                }
                                if (taskId == Panels.RecordDetails.RecordTasks.makeRequestPickUpNewTaskId) {
                                    return true;
                                }
                                if (taskId == Panels.RecordDetails.RecordTasks.makeRequestPickUpReturnTaskId) {
                                    return true;
                                }
                                if (taskId == Panels.RecordDetails.RecordTasks.makeBasicRequestTaskId) {
                                    return true;
                                }
                            }
                            return false;
                        };
                        RecordMakeRequest.prototype.prepareForm = function (taskId) {
                            this.isBasicRequest(false);
                            this.isRetrieveTemporary(false);
                            this.isRetrievePermanent(false);
                            this.isRetrieveRecurring(false);
                            this.isPickupNew(false);
                            this.isPickupReturn(false);
                            switch (taskId) {
                                case Panels.RecordDetails.RecordTasks.makeRequestRetrieveTemporaryTaskId:
                                    this.isRetrieveTemporary(true);
                                    this.requestTypeName(HPTRIM.Messages.web_requestRetrieveTemporary);
                                    break;
                                case Panels.RecordDetails.RecordTasks.makeRequestRetrieveRecurringTaskId:
                                    this.isRetrieveRecurring(true);
                                    this.requestTypeName(HPTRIM.Messages.web_requestRetrieveRecurring);
                                    break;
                                case Panels.RecordDetails.RecordTasks.makeRequestRetrievePermanentTaskId:
                                    this.isRetrievePermanent(true);
                                    this.requestTypeName(HPTRIM.Messages.web_requestRetrievePermanent);
                                    break;
                                case Panels.RecordDetails.RecordTasks.makeRequestPickUpNewTaskId:
                                    this.isPickupNew(true);
                                    this.requestTypeName(HPTRIM.Messages.web_requestRetrievePickupNew);
                                    break;
                                case Panels.RecordDetails.RecordTasks.makeRequestPickUpReturnTaskId:
                                    this.isPickupReturn(true);
                                    this.requestTypeName(HPTRIM.Messages.web_requestRetrievePickupReturn);
                                    break;
                                case Panels.RecordDetails.RecordTasks.makeBasicRequestTaskId:
                                    this.isBasicRequest(true);
                                    this.requestTypeName(HPTRIM.Messages.web_request);
                                    break;
                            }
                            ;
                            this.requestType = taskId;
                        };
                        RecordMakeRequest.prototype.setInfoObject = function (infoObject) {
                            this.hasInfoObject(false);
                            if (infoObject) {
                                this.hasInfoObject(true);
                                if (infoObject.RecordHomeLocation) {
                                    this.currentHomeLocationName(infoObject.RecordHomeLocation.StringValue);
                                    if (infoObject.RecordHomeLocation.Icon) {
                                        this.currentHomeLocationIcon(infoObject.RecordHomeLocation.Icon);
                                    }
                                    else {
                                        this.currentHomeLocationIcon(infoObject.RecordContainer.Icon);
                                    }
                                }
                                this.recordTitle(infoObject.RecordTitle ? infoObject.RecordTitle.Value : "");
                                this.recordNumber(infoObject.RecordNumber.Value);
                                this.currentAssigneeLocationName("");
                                if (infoObject.RecordAssignee && infoObject.RecordAssignee.LocationFormattedName) {
                                    this.currentAssigneeLocationName(infoObject.RecordAssignee.LocationFormattedName.Value);
                                }
                                else if (infoObject.RecordAssignee && infoObject.RecordAssignee.StringValue) {
                                    this.currentAssigneeLocationName(infoObject.RecordAssignee.StringValue);
                                }
                                this.currentAssigneeLocationIcon("");
                                if (infoObject.RecordAssignee.Icon) {
                                    this.currentAssigneeLocationIcon(infoObject.RecordAssignee.Icon);
                                }
                            }
                        };
                        RecordMakeRequest.prototype.getFirstRequest = function (rawRequest) {
                            if (rawRequest.indexOf(';') > 0) {
                                return rawRequest.substr(0, rawRequest.indexOf(';'));
                            }
                            return rawRequest;
                        };
                        RecordMakeRequest.prototype.resetPanel = function () {
                            this.hasInfoObject(false);
                            this.requestorField.clear();
                            var currentUser = this.trimClient.getDatabase().currentLoggedInUser();
                            currentUser.hasIcon = true;
                            currentUser.iconId = "locperson";
                            this.requestorField.setValue(currentUser);
                            this.requestPriorityField.Value("Low");
                            this.alertDetails("");
                            this.errorVisible(false);
                            this.currentHomeLocationName("");
                            this.currentHomeLocationIcon("");
                            this.newHomeField.clear();
                            this.serviceLocationField.clear();
                            this.dateRequiredFromField.reset();
                            this.notesField.Value("");
                            this.recurUntilField.reset();
                            this.recurranceCount(1);
                            this.recurranceTypeField.Value("Months");
                        };
                        RecordMakeRequest.prototype.validateAndHandleErrors = function () {
                            var isValid = true;
                            var me = this;
                            var requiredItems = [];
                            switch (this.requestType) {
                                case Panels.RecordDetails.RecordTasks.makeBasicRequestTaskId:
                                    requiredItems.push(this.requestorField);
                                    break;
                                case Panels.RecordDetails.RecordTasks.makeRequestRetrieveTemporaryTaskId:
                                    requiredItems.push(this.requestorField);
                                    break;
                                case Panels.RecordDetails.RecordTasks.makeRequestRetrieveRecurringTaskId:
                                    requiredItems.push(this.requestorField);
                                    break;
                                case Panels.RecordDetails.RecordTasks.makeRequestRetrievePermanentTaskId:
                                    requiredItems.push(this.newHomeField);
                                    break;
                                case Panels.RecordDetails.RecordTasks.makeRequestPickUpNewTaskId:
                                    requiredItems.push(this.serviceLocationField);
                                    break;
                                case Panels.RecordDetails.RecordTasks.makeRequestPickUpReturnTaskId:
                                    break;
                            }
                            ;
                            _.each(requiredItems, function (item) {
                                item.label();
                                if (!item.getValue()) {
                                    me.alertDetails(HPTRIM.Utils.String.format(HPTRIM.Messages.web_mandatoryFieldNeedsValue, [item.label()]));
                                    me.errorVisible(true);
                                    isValid = false;
                                }
                            });
                            return isValid;
                        };
                        RecordMakeRequest.prototype.save = function () {
                            var _this = this;
                            if (this.validateAndHandleErrors()) {
                                var isValid = true;
                                var userSuppliedParameterList = [];
                                var task = App.Panels.RecordDetails.RecordTasks.makeBasicRequestTask();
                                var requiredFields = [];
                                var requiredItems = [];
                                if (!this.isBasicRequest()) {
                                    userSuppliedParameterList.push({
                                        "name": "RequestRecordRequestType",
                                        "value": this.requestType
                                    });
                                    requiredFields.push(this.requestPriorityField);
                                    if (this.requestPriorityField.Value() == "Low") {
                                        requiredFields.push(this.dateRequiredFromField);
                                    }
                                    requiredFields.push(this.notesField);
                                }
                                switch (this.requestType) {
                                    case Panels.RecordDetails.RecordTasks.makeBasicRequestTaskId:
                                        requiredItems.push(this.requestorField);
                                        task = App.Panels.RecordDetails.RecordTasks.makeBasicRequestTask();
                                        break;
                                    case Panels.RecordDetails.RecordTasks.makeRequestRetrieveTemporaryTaskId:
                                        requiredItems.push(this.requestorField);
                                        task = App.Panels.RecordDetails.RecordTasks.makeRequestRetrieveTemporaryTask();
                                        break;
                                    case Panels.RecordDetails.RecordTasks.makeRequestRetrieveRecurringTaskId:
                                        requiredItems.push(this.requestorField);
                                        requiredFields.push(this.recurranceCountField);
                                        requiredFields.push(this.recurranceTypeField);
                                        requiredFields.push(this.recurUntilField);
                                        task = App.Panels.RecordDetails.RecordTasks.makeRequestRetrieveRecurringTask();
                                        break;
                                    case Panels.RecordDetails.RecordTasks.makeRequestRetrievePermanentTaskId:
                                        requiredItems.push(this.newHomeField);
                                        task = App.Panels.RecordDetails.RecordTasks.makeRequestRetrievePermanentTask();
                                        break;
                                    case Panels.RecordDetails.RecordTasks.makeRequestPickUpNewTaskId:
                                        requiredItems.push(this.serviceLocationField);
                                        task = App.Panels.RecordDetails.RecordTasks.makeRequestPickUpNewTask();
                                        break;
                                    case Panels.RecordDetails.RecordTasks.makeRequestPickUpReturnTaskId:
                                        task = App.Panels.RecordDetails.RecordTasks.makeRequestPickUpReturnTask();
                                        break;
                                }
                                ;
                                _.each(requiredFields, function (field) {
                                    var value = field.Value();
                                    if (field.Format == "Datetime" || field.Format == "Date") {
                                        value = field.getValueEx();
                                        if (value == null || value == '' || value == undefined) {
                                            _this.alertDetails(HPTRIM.Utils.String.format(HPTRIM.Messages.web_mandatoryFieldNeedsValue, [field.Caption]));
                                            _this.errorVisible(true);
                                            isValid = false;
                                        }
                                    }
                                    userSuppliedParameterList.push({
                                        "name": field.submitPropertyName,
                                        "value": value
                                    });
                                });
                                _.each(requiredItems, function (item) {
                                    userSuppliedParameterList.push({
                                        "name": item.submitPropertyName,
                                        "value": item.getValue()
                                    });
                                });
                                if (isValid)
                                    this.executeTask(userSuppliedParameterList, task);
                            }
                        };
                        return RecordMakeRequest;
                    }(Plugins.CustomUpdateTaskForm));
                    Plugins.RecordMakeRequest = RecordMakeRequest;
                })(Plugins = Panels.Plugins || (Panels.Plugins = {}));
            })(Panels = App.Panels || (App.Panels = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Panels;
            (function (Panels) {
                var Plugins;
                (function (Plugins) {
                    "use strict";
                    var RecordMakeFinal = (function (_super) {
                        __extends(RecordMakeFinal, _super);
                        function RecordMakeFinal(trimClient) {
                            _super.call(this, 'templates/Framework/Overlays/MainObjectUpdateTaskForm');
                            this.radioButtons = [];
                            this.errorVisible = ko.observable(false);
                            this.alertDetails = ko.observable("");
                            this.showMessage = ko.observable(false);
                            this.message = ko.observable("");
                            this.okText = ko.observable(HP.HPTRIM.Messages.web_save);
                            this.cssClass('as-spa-saved-search-form');
                            this.trimClient = trimClient;
                            var me = this;
                            var errorSubscription = function (newValue) {
                                me.errorVisible(newValue.length != 0);
                                me.alertDetails(newValue);
                            };
                            var task = App.Panels.RecordDetails.RecordTasks.setRecordAsFinal();
                            this.title(task.title);
                            this.setAsDraft = this.makeControl(HPTRIM.Messages.web_draftWorkingDocument, "SetAsDraft");
                            this.setAsFinal = this.makeControl(HPTRIM.Messages.web_final, "SetAsFinal");
                            this.setAsFinalRemoveOldRevisions = this.makeControl(HPTRIM.Messages.web_finalCheckBoxMesssage, "SetAsFinalRemoveOldRevisions");
                            this.setAsDraft.onClick = function (currentCheckbox, evt) {
                                me.setAsDraft.Value(true);
                                me.setAsFinal.Value(false);
                                me.setAsFinalRemoveOldRevisions.Value(false);
                                return true;
                            };
                            this.setAsFinal.onClick = function (currentCheckbox, evt) {
                                me.setAsDraft.Value(false);
                                me.setAsFinal.Value(true);
                                me.setAsFinalRemoveOldRevisions.Value(false);
                                return true;
                            };
                            this.setAsFinalRemoveOldRevisions.onClick = function (currentCheckbox, evt) {
                                me.setAsDraft.Value(false);
                                me.setAsFinal.Value(false);
                                me.setAsFinalRemoveOldRevisions.Value(true);
                                return true;
                            };
                        }
                        RecordMakeFinal.prototype.appliesToTask = function (objectType, taskId) {
                            if (objectType == HPTRIM.BaseObjectTypes.Record) {
                                if (taskId == Panels.RecordDetails.RecordTasks.setRecordAsFinal().id) {
                                    return true;
                                }
                            }
                            return false;
                        };
                        RecordMakeFinal.prototype.makeControl = function (caption, submitName) {
                            var dummyPageItem = {
                                Caption: caption,
                                Format: "Boolean",
                                Name: "",
                                Value: ko.observable(false),
                                enable: true
                            };
                            var radioPicker = new HP.HPTRIM.Form.DotCheckBox(dummyPageItem, this.radioButtons);
                            radioPicker.submitPropertyName = submitName;
                            this.radioButtons.push(radioPicker);
                            radioPicker.Value.subscribe(function (newValue) {
                                if (newValue === false) {
                                }
                                ;
                            });
                            return radioPicker;
                        };
                        RecordMakeFinal.prototype.setTaggedInfoObject = function () {
                            this.rawControls([]);
                            this.rawControls.push(this.setAsFinal);
                            this.rawControls.push(this.setAsDraft);
                            this.rawControls.push(this.setAsFinalRemoveOldRevisions);
                        };
                        RecordMakeFinal.prototype.setInfoObject = function (infoObject) {
                            this.rawControls([]);
                            if (infoObject) {
                                if (infoObject.RecordDocumentStatus && infoObject.RecordDocumentStatus.Value != "Finalized") {
                                    this.rawControls.push(this.setAsFinal);
                                }
                                else {
                                    this.rawControls.push(this.setAsDraft);
                                }
                                if ((infoObject.RecordRevisionCount && infoObject.RecordRevisionCount.Value > 1) && (infoObject.RecordDocumentStatus && infoObject.RecordDocumentStatus.Value != "Finalized"))
                                    this.rawControls.push(this.setAsFinalRemoveOldRevisions);
                            }
                            else {
                                this.setTaggedInfoObject();
                            }
                            if (this.rawControls().length)
                                this.rawControls()[0].Value(true);
                        };
                        RecordMakeFinal.prototype.resetPanel = function () {
                            this.setAsDraft.Value(false);
                            this.setAsFinal.Value(false);
                            this.setAsFinalRemoveOldRevisions.Value(false);
                        };
                        RecordMakeFinal.prototype.validateAndHandleErrors = function () {
                            var result = true;
                            var me = this;
                            return result;
                        };
                        RecordMakeFinal.prototype.doTask = function () {
                            if (this.validateAndHandleErrors()) {
                                var userSuppliedParameterList = [];
                                var requiredFields = [];
                                var task = App.Panels.RecordDetails.RecordTasks.setRecordAsFinal();
                                if (this.setAsDraft.Value()) {
                                    task = App.Panels.RecordDetails.RecordTasks.setRecordAsDraft();
                                }
                                else if (this.setAsFinalRemoveOldRevisions.Value()) {
                                    userSuppliedParameterList.push({
                                        "name": this.setAsFinalRemoveOldRevisions.submitPropertyName,
                                        "value": true
                                    });
                                }
                                this.executeTask(userSuppliedParameterList, task);
                            }
                        };
                        return RecordMakeFinal;
                    }(Plugins.CustomUpdateTaskForm));
                    Plugins.RecordMakeFinal = RecordMakeFinal;
                })(Plugins = Panels.Plugins || (Panels.Plugins = {}));
            })(Panels = App.Panels || (App.Panels = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Panels;
            (function (Panels) {
                var Plugins;
                (function (Plugins) {
                    "use strict";
                    var ConfirmForm = (function (_super) {
                        __extends(ConfirmForm, _super);
                        function ConfirmForm() {
                            _super.call(this, 'templates/Framework/Overlays/ConfirmForm');
                            this.cssClass('as-spa-check-in-form');
                            var me = this;
                            this.title = ko.observable("");
                            this.confirmMessage = ko.observable("");
                            this.buttonsActive = ko.observable(true);
                            this.confirmHandler = function () { };
                            this.cancelHandler = function () { };
                            this.dismissHandler = function () { };
                        }
                        ConfirmForm.prototype.reset = function () {
                            this.title("");
                            this.confirmMessage("");
                            this.buttonsActive(true);
                            this.cancelHandler = this.dismissHandler;
                        };
                        ConfirmForm.prototype.setUp = function (title, confirmMessage, confirmCallback) {
                            this.title(title);
                            this.confirmMessage(confirmMessage);
                            this.confirmHandler = confirmCallback;
                            this.buttonsActive(true);
                        };
                        return ConfirmForm;
                    }(HP.HPTRIM.Framework.Components.Layouts.Panel));
                    Plugins.ConfirmForm = ConfirmForm;
                })(Plugins = Panels.Plugins || (Panels.Plugins = {}));
            })(Panels = App.Panels || (App.Panels = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Panels;
            (function (Panels) {
                var Plugins;
                (function (Plugins) {
                    "use strict";
                    var CompletingOperationOverlay = (function (_super) {
                        __extends(CompletingOperationOverlay, _super);
                        function CompletingOperationOverlay(trimClient) {
                            _super.call(this, 'templates/Framework/Overlays/CompletingOperation');
                            this.showingMessage = ko.observable(false);
                            this.message = ko.observable("");
                            this.title = ko.observable("");
                            this.allowCancel = ko.observable(false);
                            this.cancelHandler = function () { };
                        }
                        return CompletingOperationOverlay;
                    }(HP.HPTRIM.Framework.Components.Layouts.Panel));
                    Plugins.CompletingOperationOverlay = CompletingOperationOverlay;
                })(Plugins = Panels.Plugins || (Panels.Plugins = {}));
            })(Panels = App.Panels || (App.Panels = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Panels;
            (function (Panels) {
                var Plugins;
                (function (Plugins) {
                    "use strict";
                    var RecordAttachActionForm = (function (_super) {
                        __extends(RecordAttachActionForm, _super);
                        function RecordAttachActionForm(trimClient) {
                            _super.call(this, 'templates/Framework/Overlays/RecordAttachActionOverlay');
                            this.errorVisible = ko.observable(false);
                            this.alertDetails = ko.observable("");
                            this.locationControlsEnabled = false;
                            this.assignOnlyIfNoDefault = ko.observable(false);
                            this.assignToThisAndSubordinate = ko.observable(false);
                            this.specificDate = ko.observable(false);
                            this.beforeAllExistingActions = ko.observable(false);
                            this.afterAllExistingActions = ko.observable(false);
                            this.recordActionSupplied = ko.observable(false);
                            this.beforeSpecifiedAction = ko.observable(false);
                            this.afterSpecifiedAction = ko.observable(false);
                            this.assignCheckBoxes = [];
                            this.scheduleCheckBoxes = [];
                            this.cssClass('as-spa-saved-search-form');
                            this.trimClient = trimClient;
                            var me = this;
                            var errorSubscription = function (newValue) {
                                me.errorVisible(newValue.length != 0);
                                me.alertDetails(newValue);
                            };
                            this.locationControlsEnabled = trimClient.currentUserTypeValue() && trimClient.currentUserTypeValue() != "Contributor" && trimClient.currentUserTypeValue() != "EnquiryUser";
                            this.actionToAttachField = new HP.HPTRIM.Field.ActionDefPicker(trimClient, HP.HPTRIM.BaseObjectTypes.ActionDef.Caption, true);
                            this.actionToAttachField.errorHandler = errorSubscription;
                            this.actionToAttachField.filterClause("assignable");
                            this.actionToAttachField.value.subscribe(function (newValue) {
                                if (newValue) {
                                    me.responsibleLocationField.clear();
                                    if (newValue.ActionDefAssignee != null) {
                                        var defaultAssignee = newValue.ActionDefAssignee;
                                        defaultAssignee.hasIcon = true;
                                        defaultAssignee.iconId = newValue.ActionDefAssignee.Icon.Id;
                                        me.responsibleLocationField.setValue(defaultAssignee);
                                        me.responsibleLocationField.isEditing(false);
                                    }
                                }
                            });
                            this.responsibleLocationField = new HP.HPTRIM.Field.LocationPicker(trimClient, HPTRIM.Messages.web_responsibleLoc, true, errorSubscription, false);
                            this.responsibleLocationField.purpose = HPTRIM.LocationPurpose.WorkflowAssignee;
                            this.responsibleLocationField.submitPropertyName = "AttachActionNewAssignee";
                            this.responsibleLocationField.enable(this.locationControlsEnabled);
                            this.assignOnlyIfNoDefaultCheckbox = this.initialiseCheckBox(this.assignOnlyIfNoDefault, HPTRIM.Messages.web_insertActionAssignIfNoLoc);
                            this.assignOnlyIfNoDefaultCheckbox.enabled(this.locationControlsEnabled);
                            this.assignToThisAndSubordinateCheckbox = this.initialiseCheckBox(this.assignToThisAndSubordinate, HPTRIM.Messages.web_insertActionAssignToActionAndSubordinate);
                            this.assignToThisAndSubordinateCheckbox.enabled(this.locationControlsEnabled);
                            this.assignCheckBoxes = [this.assignOnlyIfNoDefaultCheckbox, this.assignToThisAndSubordinateCheckbox];
                            this.specificDateCheckBox = this.initialiseCheckBox(this.specificDate, HPTRIM.Messages.web_insertActionOnASpecificDate);
                            var specificDateItem = {
                                Format: "Datetime",
                                Name: "",
                                Value: ko.observable(null),
                            };
                            this.specificDateField = new HP.HPTRIM.Form.DateDecorator(specificDateItem, this.trimClient.getDateFormat());
                            this.beforeAllExistingActionsCheckbox = this.initialiseCheckBox(this.beforeAllExistingActions, HPTRIM.Messages.web_insertActionInsertAtBegining);
                            this.afterAllExistingActionsCheckbox = this.initialiseCheckBox(this.afterAllExistingActions, HPTRIM.Messages.web_insertActionInsertAtEnd);
                            this.beforeSpecifiedActionCheckBox = this.initialiseCheckBox(this.beforeSpecifiedAction, HPTRIM.Messages.web_insertActionInsertBeforeNominatedAct);
                            this.afterSpecifiedActionCheckBox = this.initialiseCheckBox(this.afterSpecifiedAction, HPTRIM.Messages.web_insertActionInsertAfterNominatedAct);
                            this.specifiedActionField = new HP.HPTRIM.Field.TrimItemPicker(trimClient, {
                                baseObjectType: HPTRIM.BaseObjectTypes.ActionDef,
                                isMandatory: false,
                                label: '',
                                errorHandler: errorSubscription,
                            });
                            this.specifiedActionField.enable(false);
                            this.scheduleCheckBoxes = [
                                this.specificDateCheckBox,
                                this.beforeAllExistingActionsCheckbox,
                                this.afterAllExistingActionsCheckbox,
                                this.beforeSpecifiedActionCheckBox,
                                this.afterSpecifiedActionCheckBox
                            ];
                            this.setupCheckboxSubscription(this.assignCheckBoxes);
                            this.setupCheckboxSubscription(this.scheduleCheckBoxes);
                        }
                        RecordAttachActionForm.prototype.appliesToTask = function (objectType, taskId) {
                            if (objectType == HPTRIM.BaseObjectTypes.Record && taskId == "RecordAttachAction") {
                                return true;
                            }
                            return false;
                        };
                        RecordAttachActionForm.prototype.setupCheckboxSubscription = function (checkBoxList) {
                            var switchOffCheckboxes = function (checkBoxList, oneToSkip) {
                                _.each(checkBoxList, function (checkBox) {
                                    if (checkBox != oneToSkip) {
                                        checkBox.Value(false);
                                    }
                                });
                            };
                            _.each(checkBoxList, function (currentCheckBox) {
                                currentCheckBox.Value.subscribe(function (newValue) {
                                    if (newValue) {
                                        switchOffCheckboxes(checkBoxList, currentCheckBox);
                                    }
                                    else {
                                        if (!_.find(checkBoxList, function (checkBox) {
                                            return checkBox.Value();
                                        })) {
                                            currentCheckBox.Value(true);
                                        }
                                        ;
                                    }
                                });
                            });
                        };
                        RecordAttachActionForm.prototype.initialiseCheckBox = function (backingObservable, caption) {
                            var checkBoxPageItem = {
                                Caption: caption,
                                Format: "Boolean",
                                Name: "",
                                Value: backingObservable,
                            };
                            return new HPTRIM.Form.BooleanDecorator(checkBoxPageItem);
                        };
                        RecordAttachActionForm.prototype.setInfoObject = function (infoObject) {
                            this.recordInfoObject = infoObject;
                            if (infoObject) {
                                if (infoObject.recordAction) {
                                    this.recordActionSupplied(true);
                                    this.specifiedActionField.setValue(infoObject.recordAction);
                                    this.afterSpecifiedAction(true);
                                }
                                else {
                                    this.afterAllExistingActions(true);
                                }
                            }
                        };
                        RecordAttachActionForm.prototype.resetPanel = function () {
                            this.errorVisible(false);
                            this.alertDetails("");
                            this.actionToAttachField.clear();
                            this.actionToAttachField.isEditing(true);
                            this.responsibleLocationField.clear();
                            this.responsibleLocationField.isEditing(true);
                            this.assignOnlyIfNoDefault(true);
                            this.assignToThisAndSubordinate(false);
                            this.specificDate(false);
                            this.specificDateField.reinitaliseDatePicker();
                            this.specificDateField.setByDateTime(new Date());
                            this.beforeAllExistingActions(false);
                            this.afterAllExistingActions(true);
                            this.afterSpecifiedAction(false);
                            this.beforeSpecifiedAction(false);
                            this.recordActionSupplied(false);
                        };
                        RecordAttachActionForm.prototype.validateAndHandleErrors = function () {
                            var result = true;
                            if (this.actionToAttachField.getValue() == null) {
                                this.errorVisible(true);
                                this.alertDetails(HP.HPTRIM.Messages.core_fieldBlank.replace("{0}", HP.HPTRIM.BaseObjectTypes.ActionDef.Caption));
                                result = false;
                                return result;
                            }
                            if (this.responsibleLocationField.getValue() == null) {
                                this.errorVisible(true);
                                this.alertDetails(HP.HPTRIM.Messages.core_fieldBlank.replace("{0}", HP.HPTRIM.Messages.web_responsibleLocation));
                                result = false;
                                return result;
                            }
                            return result;
                        };
                        RecordAttachActionForm.prototype.save = function () {
                            if (this.validateAndHandleErrors()) {
                                var parameterList = [];
                                parameterList.push({
                                    "name": "AttachActionActionToAttach",
                                    "value": this.actionToAttachField.getValue()
                                });
                                parameterList.push({
                                    "name": this.responsibleLocationField.submitPropertyName,
                                    "value": this.responsibleLocationField.getValue()
                                });
                                if (this.assignOnlyIfNoDefault()) {
                                    parameterList.push({
                                        "name": "AttachActionAssigneeOption",
                                        "value": "OnlyIfNoneSpecified",
                                    });
                                }
                                else if (this.assignToThisAndSubordinate()) {
                                    parameterList.push({
                                        "name": "AttachActionAssigneeOption",
                                        "value": "OverrideExisting",
                                    });
                                }
                                if (this.beforeAllExistingActions()) {
                                    parameterList.push({
                                        "name": "AttachActionInsertPos",
                                        "value": "Before",
                                    });
                                }
                                else if (this.afterAllExistingActions()) {
                                    parameterList.push({
                                        "name": "AttachActionInsertPos",
                                        "value": "After",
                                    });
                                }
                                else if (this.beforeSpecifiedAction()) {
                                    parameterList.push({
                                        "name": "AttachActionInsertPos",
                                        "value": "Before",
                                    });
                                    parameterList.push({
                                        "name": "AttachActionRecordActionUri",
                                        "value": this.recordInfoObject.recordAction.Uri
                                    });
                                }
                                else if (this.afterSpecifiedAction()) {
                                    parameterList.push({
                                        "name": "AttachActionInsertPos",
                                        "value": "After",
                                    });
                                    parameterList.push({
                                        "name": "AttachActionRecordActionUri",
                                        "value": this.recordInfoObject.recordAction.Uri
                                    });
                                }
                                else if (this.specificDate) {
                                    var dateValue = this.specificDateField.getValueEx();
                                    parameterList.push({
                                        "name": "AttachActionScheduleStartDate",
                                        "value": dateValue
                                    });
                                }
                                this.executeTask(parameterList);
                            }
                        };
                        return RecordAttachActionForm;
                    }(Plugins.CustomUpdateTaskForm));
                    Plugins.RecordAttachActionForm = RecordAttachActionForm;
                })(Plugins = Panels.Plugins || (Panels.Plugins = {}));
            })(Panels = App.Panels || (App.Panels = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Panels;
            (function (Panels) {
                var Plugins;
                (function (Plugins) {
                    "use strict";
                    var RecordStartReviewAuthorizerForm = (function (_super) {
                        __extends(RecordStartReviewAuthorizerForm, _super);
                        function RecordStartReviewAuthorizerForm(trimClient) {
                            var _this = this;
                            _super.call(this, 'templates/Framework/Overlays/RecordStartReviewAuthorizerOverlay');
                            this.errorHandler = function (title, error) { };
                            this.enableCommandIds = [];
                            this.load = function (uri, updateCallback) { };
                            this.error = ko.observable(false);
                            this.errorVisible = ko.observable(false);
                            this.alertDetails = ko.observable("");
                            this.taskCaption = ko.observable("");
                            this.taskTitle = ko.observable("");
                            this.saveBtnClass = ko.observable("");
                            this.fieldDecorators = [];
                            this.dueDateFieldCaption = ko.observable("");
                            this.constEditor = "Editor";
                            this.constReviewer = "Reviewer";
                            this.constAuthorizer = "Authorizer";
                            this.objectRecordDetailComponent = {};
                            this.currentLocationType = "";
                            this.actionView = ko.observable(false);
                            this.handleViewClick = function (uriFromTemplate, extensionFromTemplate, passedInRecNumber, passedInRecTitle, revisionCount, recordIsCheckedOut, recordSpURL, recordInfoData) { };
                            this.save = function (data, refresh, updateCallback) { };
                            this.cssClass('as-spa-saved-search-form');
                            this.trimClient = trimClient;
                            var me = this;
                            this.loading = ko.observable(false);
                            this.loadingMessage = ko.observable(HPTRIM.Messages.web_loading);
                            var errorSubscription = function (newValue) {
                                me.errorVisible(newValue.length != 0);
                                me.alertDetails(newValue);
                            };
                            var dueDateItem = {
                                Format: "Datetime",
                                Name: "",
                                Value: ko.observable(null),
                            };
                            me.dueDateField = new HP.HPTRIM.Form.DateDecorator(dueDateItem, this.trimClient.getDateFormat());
                            me.dueDateField.setOptions({ minDate: moment(new Date(), 'MM-DD-YYYY hh:mm A') });
                            me.fieldDecorators.push(me.dueDateField);
                            this.save = function (data, refresh, updateCallback) {
                                me.saveBtnClass('disabled');
                                var saveRequest = new HPTRIM.TrimObjectSave(me.trimClient, HPTRIM.BaseObjectTypes.Record, parseInt(me.recordInfoObject.Uri));
                                saveRequest.doRequestEx(data).done(function (rawResult) {
                                    if (rawResult.ResponseStatus && rawResult.ResponseStatus.Message) {
                                        me.alertDetails(rawResult.ResponseStatus.Message);
                                        me.errorVisible(true);
                                        me.saveBtnClass("");
                                    }
                                    else if (rawResult) {
                                        me.load(me.recordInfoObject.Uri, updateCallback);
                                        me.saveBtnClass("");
                                        me.errorVisible(false);
                                        me.cancelHandler();
                                    }
                                    else {
                                        me.alertDetails(HPTRIM.Messages.web_errorPerformingOperation);
                                        me.errorVisible(true);
                                    }
                                }).fail(function (errorResult) {
                                    me.alertDetails(errorResult.ResponseStatus.Message);
                                    me.errorVisible(true);
                                    me.saveBtnClass("");
                                });
                            };
                            this.load = function (uri, updateCallback) {
                                if (uri) {
                                    _this.loading(true);
                                    _this.error(false);
                                    var search = new HPTRIM.TrimMainObjectSearch(_this.trimClient, HPTRIM.BaseObjectTypes.Record);
                                    search.setProperties(me.currentTask.requiredProperties);
                                    search.setDescendantProperties([
                                        "",
                                    ]);
                                    var commandIds = [];
                                    commandIds = _.uniq(me.enableCommandIds);
                                    search.setSelectedCommandIds(commandIds);
                                    search.setSearchString("uri:" + uri);
                                    search.setPageSize(Plugins.RecordDocumentsComponent.MAX_RESULTS);
                                    search.page().done(function (result) {
                                        var rawRecordDocument = result.Results[0];
                                        me.updateHandlerForRecord(rawRecordDocument);
                                        if (updateCallback != undefined) {
                                            updateCallback(rawRecordDocument, me.currentTask);
                                        }
                                        _this.loading(false);
                                    }).fail(function (errorResponse) {
                                        me.error(true);
                                        _this.loading(false);
                                        var errorMsg = HP.HPTRIM.Messages.web_unableToConnectToWebServices;
                                        if (errorResponse.responseJSON && errorResponse.responseJSON.ResponseStatus && errorResponse.responseJSON.ResponseStatus.Message) {
                                            errorMsg = errorResponse.responseJSON.ResponseStatus.Message;
                                        }
                                        ko.postbox.publish(App.TRIMApp.NOTIFICATION_ERROR_TOPIC, errorMsg);
                                    });
                                }
                            };
                            this.updateHandlerForRecord = function (infoObject, task) {
                                var returnValue;
                                if (me.currentTask.actionView) {
                                    me.actionView(me.currentTask.actionView);
                                }
                                if (me.objectRecordDetailComponent !== undefined) {
                                    me.objectRecordDetailComponent = me.currentTask.objectRecordDetailComponent;
                                }
                                if (me.currentTask.id == Panels.RecordDetails.RecordTasks.startReviewTask().id) {
                                    _this.currentLocationType = _this.constReviewer;
                                    if (infoObject.RecordReviewDueDate != "" && infoObject.RecordReviewDueDate != undefined && infoObject.RecordReviewDueDate.DateTime != undefined) {
                                        returnValue = HP.HPTRIM.Utils.String.formatDateTime(infoObject.RecordReviewDueDate, _this.trimClient.getDateFormat());
                                    }
                                }
                                else if (me.currentTask.id == Panels.RecordDetails.RecordTasks.startAuthorizationTask().id) {
                                    _this.currentLocationType = _this.constAuthorizer;
                                    if (infoObject.RecordAuthorizationDueDate != "" && infoObject.RecordAuthorizationDueDate != undefined && infoObject.RecordAuthorizationDueDate.DateTime != undefined) {
                                        returnValue = HP.HPTRIM.Utils.String.formatDateTime(infoObject.RecordAuthorizationDueDate, _this.trimClient.getDateFormat());
                                    }
                                }
                                if (returnValue != undefined) {
                                    me.dueDateField.Value({ DateTime: returnValue });
                                }
                                else {
                                    me.dueDateField.Value("");
                                }
                                if (me.dueDateField.doAfterRender) {
                                    me.dueDateField.doAfterRender(true);
                                }
                                me.dueDateFieldCaption(HPTRIM.Utils.String.format(HPTRIM.Messages.web_startReviewAuthorizationDueDateCaption, [_this.currentLocationType]));
                                me.taskTitle(me.currentTask.title);
                                me.taskCaption(me.currentTask.caption);
                                me.currentInfoObject = infoObject;
                            };
                        }
                        RecordStartReviewAuthorizerForm.prototype.formatDate = function (rawDateObject) {
                            return HP.HPTRIM.Utils.String.formatDateTime(rawDateObject, this.trimClient.getDateFormat());
                        };
                        RecordStartReviewAuthorizerForm.prototype.appliesToTask = function (objectType, taskId) {
                            if (objectType == HPTRIM.BaseObjectTypes.Record && (taskId == Panels.RecordDetails.RecordTasks.startReviewTask().id || taskId == Panels.RecordDetails.RecordTasks.startAuthorizationTask().id)) {
                                if (taskId == Panels.RecordDetails.RecordTasks.startReviewTask().id) {
                                    this.enableCommandIds = Panels.RecordDetails.RecordTasks.startReviewTask().requiredCommandIds;
                                }
                                else if (taskId == Panels.RecordDetails.RecordTasks.startAuthorizationTask().id) {
                                    this.enableCommandIds = Panels.RecordDetails.RecordTasks.startAuthorizationTask().requiredCommandIds;
                                }
                                return true;
                            }
                            return false;
                        };
                        RecordStartReviewAuthorizerForm.prototype.setInfoObject = function (infoObject) {
                            this.recordInfoObject = infoObject;
                            if (infoObject) {
                                this.load(infoObject.Uri);
                            }
                        };
                        RecordStartReviewAuthorizerForm.prototype.viewHandler = function () {
                            var me = this;
                            var uriFromTmpl;
                            var extFromTmpl;
                            var recNo;
                            var recTitle;
                            var showRevisionButton = false;
                            var revisionCount = 0;
                            var showRenditionButton = false;
                            var recordIsCheckedOut;
                            me.wireUpViewDocumentPanel(me.objectRecordDetailComponent);
                            var item = me.recordInfoObject;
                            if (item) {
                                if (item.TrimType == 'Record') {
                                    if (item.ChildRenditions != null && item.ChildRenditions.length > 0)
                                        showRenditionButton = true;
                                    uriFromTmpl = item.Uri;
                                    extFromTmpl = item.RecordExtension.Value;
                                    recNo = item.RecordNumber.Value;
                                    recTitle = item.RecordTitle.Value;
                                    if (item.RecordRevisionCount.Value) {
                                        revisionCount = item.RecordRevisionCount.Value;
                                    }
                                    else {
                                        revisionCount = item.RecordRevisionCount;
                                    }
                                    recordIsCheckedOut = item.RecordIsCheckedOut.Value;
                                }
                                this.handleViewClick(uriFromTmpl, extFromTmpl, recNo, recTitle, revisionCount, recordIsCheckedOut, item.RecordSpURL.Value, item);
                            }
                        };
                        RecordStartReviewAuthorizerForm.prototype.resetPanel = function () {
                            this.errorVisible(false);
                            this.alertDetails("");
                        };
                        RecordStartReviewAuthorizerForm.prototype.validateAndHandleErrors = function () {
                            var dueDate = this.dueDateField.getValueEx();
                            var dueDateGetTimeValue = this.dueDateField.getTimeValue();
                            var todayGetTimeValue = moment((new Date()).toDateString()).toDate().getTime();
                            this.errorVisible(false);
                            this.alertDetails("");
                            this.dueDateField.isValidDateTime();
                            if (this.dueDateField.error() != "") {
                                this.errorVisible(true);
                                this.alertDetails(this.dueDateField.error());
                                return false;
                            }
                            if (dueDate != undefined && dueDate != "") {
                                if (dueDateGetTimeValue) {
                                    if (dueDateGetTimeValue < todayGetTimeValue) {
                                        this.errorVisible(true);
                                        this.alertDetails(HP.HPTRIM.Messages.web_documentReviewDueDateInThePast);
                                        return false;
                                    }
                                }
                            }
                            return true;
                        };
                        RecordStartReviewAuthorizerForm.prototype.doTask = function () {
                            var _this = this;
                            var me = this;
                            if (this.validateAndHandleErrors()) {
                                var me = this;
                                var lcArray_1 = [];
                                var data = {};
                                var dateValue = this.dueDateField.getValueEx();
                                _.each(me.currentInfoObject.ChildLocations, function (item) {
                                    if (item.RecordLocationTypeOfRecordLocation.Value == _this.currentLocationType) {
                                        lcArray_1.push({
                                            'RecordLocationDueDate': dateValue,
                                            'Uri': item.Uri
                                        });
                                    }
                                });
                                data["ChildLocations"] = lcArray_1;
                                data['Uri'] = me.recordInfoObject.Uri;
                                data['properties'] = me.currentTask.requiredProperties;
                                if (me.currentTask.requiredCommandIds) {
                                    data['cid_SelectedIds'] = me.currentTask.requiredCommandIds;
                                }
                                if (this.currentTask.serviceActionValueParameters) {
                                    _.each(this.currentTask.serviceActionValueParameters, function (valueParameter) {
                                        if (valueParameter.value) {
                                            data[valueParameter.parameterName] = valueParameter.value;
                                        }
                                    });
                                }
                                me.save(data, true, me.updateCallback);
                            }
                        };
                        return RecordStartReviewAuthorizerForm;
                    }(Plugins.CustomUpdateTaskForm));
                    Plugins.RecordStartReviewAuthorizerForm = RecordStartReviewAuthorizerForm;
                })(Plugins = Panels.Plugins || (Panels.Plugins = {}));
            })(Panels = App.Panels || (App.Panels = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Panels;
            (function (Panels) {
                var Plugins;
                (function (Plugins) {
                    "use strict";
                    var AddChildForm = (function (_super) {
                        __extends(AddChildForm, _super);
                        function AddChildForm(trimClient, constructorObjectList) {
                            _super.call(this, 'templates/Framework/Overlays/AddChildFormOverlay');
                            this.itemPickers = [];
                            this.fieldDecorators = [];
                            this.title = ko.observable("");
                            this.caption = ko.observable("");
                            this.okText = ko.observable(HP.HPTRIM.Messages.web_ok);
                            this.errorVisible = ko.observable(false);
                            this.alertDetails = ko.observable("");
                            this.saveHandler = function (data, parentType) {
                            };
                            this.cancelHandler = function () {
                            };
                            this.cssClass('as-spa-saved-search-form');
                            var me = this;
                            var errorSubscription = function (newValue) {
                                me.errorVisible(newValue && newValue.length != 0);
                                me.alertDetails(newValue);
                            };
                            _.each(constructorObjectList, function (constructorObject) {
                                if (constructorObject.type == "object") {
                                    var itemPicker = new HP.HPTRIM.Field.RecordPicker(trimClient, constructorObject.caption, false, true, errorSubscription);
                                    itemPicker['submitPropertyName'] = constructorObject.propertyName;
                                    me.itemPickers.push(itemPicker);
                                }
                                else if (constructorObject.type == "enum") {
                                    var dummyPageItem = {
                                        Caption: constructorObject.caption,
                                        Format: "Enum",
                                        Name: ""
                                    };
                                    var enumPicker = new HP.HPTRIM.Form.EnumDecorator(trimClient, dummyPageItem);
                                    var comboBox = new HP.HPTRIM.Field.TrimEnumComboBox(trimClient);
                                    comboBox.enumName = constructorObject.enumName;
                                    comboBox.getData();
                                    enumPicker = $.extend(enumPicker, comboBox);
                                    enumPicker['submitPropertyName'] = constructorObject.propertyName;
                                    me.fieldDecorators.push(enumPicker);
                                }
                            });
                        }
                        AddChildForm.prototype.resetPanel = function () {
                            var me = this;
                            _.each(me.fieldDecorators, function (fieldDecorator) {
                                fieldDecorator.reset();
                            });
                            _.each(me.itemPickers, function (itemPicker) {
                                itemPicker.clear();
                            });
                            this.okText(HP.HPTRIM.Messages.web_ok);
                            this.alertDetails("");
                            this.errorVisible(false);
                        };
                        AddChildForm.prototype.preparePanel = function (title, caption, okText) {
                            this.resetPanel();
                            this.title(title);
                            this.caption(caption);
                        };
                        AddChildForm.prototype.doRequest = function () {
                            var me = this;
                            if (this.validateAndHandleErrors()) {
                                var data = {};
                                data['uri'] = me.parentUri;
                                var newChildItem = {};
                                _.each(me.itemPickers, function (itemPicker) {
                                    newChildItem[itemPicker['submitPropertyName']] = itemPicker.getValue().Uri;
                                });
                                _.each(me.fieldDecorators, function (fieldDecorator) {
                                    newChildItem[fieldDecorator['submitPropertyName']] = fieldDecorator.getValueEx();
                                });
                                data[this.childObjectProperty] = [];
                                data[this.childObjectProperty][0] = newChildItem;
                                this.saveHandler(data, this.parentType);
                            }
                        };
                        AddChildForm.prototype.validateAndHandleErrors = function () {
                            var allGood = true;
                            _.each(this.itemPickers, function (itemPicker) {
                                if (!itemPicker.getValue()) {
                                    allGood = false;
                                }
                                ;
                            });
                            if (!allGood) {
                                this.alertDetails(HP.HPTRIM.Messages.web_makeValidSelection);
                                this.errorVisible(true);
                            }
                            return allGood;
                        };
                        return AddChildForm;
                    }(HP.HPTRIM.Framework.Components.Layouts.Panel));
                    Plugins.AddChildForm = AddChildForm;
                })(Plugins = Panels.Plugins || (Panels.Plugins = {}));
            })(Panels = App.Panels || (App.Panels = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Panels;
            (function (Panels) {
                var Plugins;
                (function (Plugins) {
                    "use strict";
                    var CustomizeAccessControlPanel = (function (_super) {
                        __extends(CustomizeAccessControlPanel, _super);
                        function CustomizeAccessControlPanel(trimClient, aclFunction) {
                            _super.call(this, 'templates/Framework/Overlays/CustomizeAccessControlOverlay');
                            this.cancel = function () { };
                            this.showMessage = ko.observable(false);
                            this.message = ko.observable("");
                            this.customiseAccess = HP.HPTRIM.Messages.loc_customizeAccess;
                            this.cssClass('as-spa-location-form');
                            this.aclFunction = aclFunction;
                            this.locationPicker = new HP.HPTRIM.Field.MultiLocationPicker(trimClient, this.customiseAccess);
                            this.locationPicker.enableMultiItemPickerSearch(true);
                            this.locationPicker.setPurpose(21);
                            this.locationPicker.focus();
                            if (aclFunction) {
                                if (aclFunction.AccessLocations && aclFunction.AccessLocations.length > 0) {
                                    var selectedLocations = [];
                                    _.each(aclFunction.AccessLocations, function (item) {
                                        if (item.FindBy) {
                                            if (item.FindBy == "me") {
                                                var db = trimClient.getDatabase();
                                                item = db.getCurrentUser();
                                            }
                                        }
                                        selectedLocations.push({ displayValue: item.displayValue || item.LocationSortName.Value, Uri: item.Uri });
                                    });
                                    this.locationPicker.selectedItems(selectedLocations);
                                }
                            }
                        }
                        CustomizeAccessControlPanel.prototype.ok = function () {
                            var locs = this.locationPicker.selectedItems();
                            this.aclFunction.AccessLocations = locs;
                            var PRIVATE = "Private";
                            if (locs.length > 0) {
                                this.aclFunction.AsString = _.pluck(locs, 'displayValue').join(';');
                                this.aclFunction.Setting = PRIVATE;
                            }
                            if (locs.length == 0) {
                                this.aclFunction.AsString = HP.HPTRIM.Messages.web_public;
                            }
                            this.aclFunction.syncData();
                            this.close();
                        };
                        CustomizeAccessControlPanel.prototype.close = function () {
                            this.cancel();
                        };
                        return CustomizeAccessControlPanel;
                    }(HP.HPTRIM.Framework.Components.Layouts.Panel));
                    Plugins.CustomizeAccessControlPanel = CustomizeAccessControlPanel;
                })(Plugins = Panels.Plugins || (Panels.Plugins = {}));
            })(Panels = App.Panels || (App.Panels = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Widgets;
            (function (Widgets) {
                'use strict';
                var TrimFileUploadComponent = (function (_super) {
                    __extends(TrimFileUploadComponent, _super);
                    function TrimFileUploadComponent(options) {
                        var _this = this;
                        _super.call(this, TrimFileUploadComponent.templates.default);
                        this.showDropZone = ko.observable(true);
                        this.loaded = ko.observable(0);
                        this.total = ko.observable(0);
                        this.files = ko.observableArray([]);
                        this.uploadedFiles = ko.observableArray([]);
                        this.statusMessage = ko.observable("");
                        this.onPostXhrLoad = function () { };
                        this.clearForm = function () {
                        };
                        this.statusMessage("");
                        this.options = options;
                        this.trimClient = options.trimClient;
                        var me = this;
                        me.isDragAndDropSupported = ko.observable(false);
                        this.templateConfiguration.afterRender = function (elements) {
                            me.configure();
                        };
                        this.templateConfiguration.beforeRemove = function (elements) {
                            me.destroy();
                        };
                        this.pending = ko.computed(function () {
                            var pending = false;
                            _.each(me.files(), function (file) {
                                if (file !== "" && !pending && (file.state !== 'complete' || file.state !== undefined)) {
                                    pending = true;
                                }
                            });
                            return pending;
                        });
                        this.uploadFile = function (uploadUrl, files) {
                            var formData = new FormData();
                            _.each(files, function (file) {
                                formData.append(file.name, file);
                            });
                            var xhr = new XMLHttpRequest();
                            if (xhr.upload) {
                                $('#' + me.id + " " + "#uploadprogress").removeClass("progress-bar-danger");
                                $('#' + me.id + " " + "#uploadprogress").addClass("progress-bar-success");
                                xhr.upload.onprogress = function (event) {
                                    if (event.lengthComputable) {
                                        var complete = (event.loaded / event.total * 100 | 0);
                                        if (complete > 100) {
                                            complete = 100;
                                        }
                                        var uploadProgress = $('#' + me.id + " " + "#uploadprogress").get(0);
                                        if (uploadProgress) {
                                            uploadProgress.setAttribute("value", complete.toString());
                                            uploadProgress.setAttribute("aria-valuenow", complete.toString());
                                            uploadProgress.innerHTML = complete + "%";
                                            uploadProgress.style.width = complete.toString() + "%";
                                        }
                                    }
                                };
                            }
                            xhr.onload = function (e) {
                                $('#' + me.id + " " + '#cancelContainer').addClass('hidden');
                                $('#' + me.id + " " + "#uploadprogress").removeClass("progress-bar-danger");
                                $('#' + me.id + " " + "#uploadprogress").addClass("progress-bar-success");
                                $('#' + me.id + " " + "#dropZone").removeAttr('style');
                                if (!this['response'] || !this['response'].length) {
                                    _.each(me.files(), function (file) {
                                        file.state('error');
                                        file.error(HP.HPTRIM.Messages.web_noResponseReceivedFromServer);
                                    });
                                    return;
                                }
                                var exceptionMessage = $(this['responseXML']).find('ExceptionMessage,Message').text();
                                if (exceptionMessage.length > 0) {
                                    _.each(me.files(), function (file) {
                                        file.state('error');
                                        file.error(exceptionMessage);
                                    });
                                    return;
                                }
                                var text = this['response'];
                                var json = me.parseResponse(text);
                                if (json.ExceptionMessage) {
                                    me.displayError(json.ExceptionMessage);
                                    return;
                                }
                                me.uploadedFiles(json);
                                _.each(me.files(), function (file) {
                                    if (file.state !== undefined) {
                                        file.state('complete');
                                        file.state.valueHasMutated();
                                        if (file.error) {
                                            file.error(null);
                                        }
                                    }
                                    else {
                                        if (file.error) {
                                            file.error(HP.HPTRIM.Messages.web_noResponseReceivedFromServer);
                                        }
                                    }
                                });
                                var acceptedTypes = {
                                    'image/png': true,
                                    'image/jpeg': true,
                                    'image/gif': true
                                };
                                var type = files[0].type || "";
                                if (acceptedTypes[type] === true) {
                                    var reader = new FileReader();
                                    reader.onload = function (event) {
                                        var image = new Image();
                                        image.src = event.target['result'];
                                        image.width = 100;
                                        var previous = $('#' + me.id + " " + "#imagePreview").get(0);
                                        if (previous) {
                                            if (previous.childElementCount != 0) {
                                                previous.removeChild(previous.childNodes[0]);
                                            }
                                            $('#' + me.id + " " + "#imagePreview").get(0).appendChild(image);
                                            document.getElementById('imagePreview').appendChild(image);
                                        }
                                    };
                                    reader.readAsDataURL(files[0]);
                                }
                                if (me.onPostXhrLoad) {
                                    me.onPostXhrLoad();
                                }
                            };
                            xhr.onerror = function (e) {
                                $('#' + me.id + " " + "#uploadprogress").removeClass("progress-bar-success");
                                $('#' + me.id + " " + "#uploadprogress").addClass("progress-bar-danger");
                                var exceptionMessage = "";
                                if (e.response) {
                                    var jqueryExceptionSelector = $(e.response[0]);
                                    if (jqueryExceptionSelector) {
                                        exceptionMessage = jqueryExceptionSelector.find('ExceptionMessage,Message').text();
                                    }
                                }
                                if (!exceptionMessage || (exceptionMessage.length == 0)) {
                                    _.each(me.files(), function (file) {
                                        file.state('error');
                                        file.error(HP.HPTRIM.Messages.web_errorUploadingYourFile);
                                    });
                                }
                                else {
                                    _.each(me.files(), function (file) {
                                        file.state('error');
                                        file.error(HP.HPTRIM.Messages.web_errorUploadingYourFile);
                                    });
                                }
                            };
                            xhr.onreadystatechange = function (oEvent) {
                                if (xhr.readyState === 0 || xhr.readyState === 1 || xhr.readyState === 2 || xhr.readyState === 3) {
                                    $('#saveBtn').addClass('disabled');
                                }
                                if (xhr.readyState === 4) {
                                    if (xhr.status === 200) {
                                        var uploadProgress = $('#' + me.id + " " + "#uploadprogress").get(0);
                                        if (uploadProgress) {
                                            uploadProgress.setAttribute("value", "100");
                                            uploadProgress.setAttribute("aria-valuenow", "100");
                                            uploadProgress.innerHTML = "100%";
                                            uploadProgress.style.width = "100%";
                                        }
                                        $('#saveBtn').removeClass('disabled');
                                    }
                                    if (xhr.status === 0) {
                                        files[0].state('error');
                                        files[0].error(HP.HPTRIM.Messages.web_errorUploadingYourFile);
                                        var errorElement = $('#' + me.id + " " + "#FileUploadErrorMessage").get(0);
                                        errorElement.innerHTML = HP.HPTRIM.Messages.web_errorUploadingYourFile;
                                        $('#saveBtn').addClass('disabled');
                                    }
                                }
                            };
                            var cancelBtn = $('#' + me.id + " " + "#cancelUpload").get(0);
                            if (cancelBtn) {
                                cancelBtn.addEventListener('click', function () {
                                    xhr.abort();
                                    $('#' + me.id + " " + "#uploadprogress").addClass("progress-bar-danger");
                                    var errorElement = $('#' + me.id + " " + "#uploadCancelled").get(0);
                                    errorElement.innerHTML = "File upload cancelled by user.";
                                    $('#' + me.id + " " + '#fileUploadError').removeClass('hidden');
                                }, false);
                            }
                            ;
                            _.each(me.files(), function (file) {
                                if (file !== "" && file.state !== undefined) {
                                    file.state('inprogress');
                                }
                            });
                            xhr.open("post", uploadUrl, true);
                            if (HPRMWebConfig.requireAntiForgeryToken === true) {
                                xhr.setRequestHeader("__RequestVerificationToken", HPRMWebConfig.antiForgeryToken);
                            }
                            if (HPRMWebConfig.delayUploadedFileTransferTime) {
                                var connectionId = HP.HPTRIM.MessageService.WebHub.getConnectionId();
                                xhr.setRequestHeader("__connectionId", connectionId);
                            }
                            xhr.send(formData);
                        };
                        if (typeof (new XMLHttpRequest().upload) !== 'undefined') {
                            this.start = function () {
                                var uploader = $('#' + me.id + "_fileUploader")[0];
                                if (uploader.files.length == 0) {
                                    return;
                                }
                                else {
                                    _this.uploadFile(options.url, uploader.files);
                                }
                            };
                        }
                    }
                    TrimFileUploadComponent.prototype.start = function () {
                        this._element.find('form').submit();
                    };
                    TrimFileUploadComponent.prototype.cancel = function () {
                    };
                    TrimFileUploadComponent.fileNameFromPath = function (path) {
                        if (path != undefined) {
                            return path.replace(/^.*(\\|\/|\:)/, '');
                        }
                        return "";
                    };
                    TrimFileUploadComponent.formatFileSize = function (bytes) {
                        if (!bytes) {
                            return '';
                        }
                        if (bytes >= 1000000000) {
                            return (bytes / 1000000000).toFixed(2) + ' GB';
                        }
                        if (bytes >= 1000000) {
                            return (bytes / 1000000).toFixed(2) + ' MB';
                        }
                        return (bytes / 1000).toFixed(2) + ' KB';
                    };
                    TrimFileUploadComponent.prototype.determineIfDragAndDropSupported = function () {
                        var rv = -1;
                        if (navigator.appName == 'Microsoft Internet Explorer') {
                            var ua = navigator.userAgent;
                            var re = new RegExp("MSIE ([0-9]{1,}[\.0-9]{0,})");
                            if (re.exec(ua) != null)
                                rv = parseFloat(RegExp.$1);
                            if (rv >= 10.0) {
                                this.isDragAndDropSupported(true);
                            }
                            else {
                                this.isDragAndDropSupported(false);
                            }
                        }
                        else {
                            if (Modernizr.draganddrop) {
                                this.isDragAndDropSupported(true);
                            }
                            else {
                                this.isDragAndDropSupported(false);
                            }
                        }
                    };
                    TrimFileUploadComponent.prototype.configure = function () {
                        var _this = this;
                        var me = this;
                        var doConfiguration = function () {
                            _this.determineIfDragAndDropSupported();
                            if (typeof (new XMLHttpRequest().upload) !== 'undefined') {
                                me._element = $('#' + me.id);
                                me._progressElement = $('#' + me.id + " " + '#uploadprogress');
                                var form = me._element.find('form');
                                form.find(':file').unbind('change');
                                form.find(':file').bind('change', function (e) {
                                    var fileInput = $(this)[0];
                                    var files;
                                    if (fileInput.files) {
                                        files = fileInput.files;
                                    }
                                    else {
                                        files = [{
                                                name: TrimFileUploadComponent.fileNameFromPath(fileInput.value),
                                                size: null
                                            }];
                                    }
                                    _.each(files, function (file) {
                                        try {
                                            file.state = ko.observable('pending');
                                            file.error = ko.observable(null);
                                        }
                                        catch (e) {
                                            return;
                                        }
                                    });
                                    me.files(files);
                                    me.uploadedFiles([]);
                                    if (me.options.autoUpload) {
                                        me.start();
                                    }
                                });
                                me.clearForm = function () {
                                    var fileInput = form.find(':file')[0];
                                    if (fileInput) {
                                        fileInput.value = null;
                                        if (form[0]) {
                                            form[0].reset();
                                        }
                                        me.files([]);
                                        $('#' + me.id + " " + '#notSupported').addClass('hidden');
                                        $('#' + me.id + " " + '#fileUploadError').addClass('hidden');
                                        $('#' + me.id + " " + '#cancelContainer').removeClass('hidden');
                                        $('#' + me.id + " " + '#progressBar').removeClass('hidden');
                                    }
                                    $('#saveBtn').addClass('disabled');
                                };
                                form.submit(function () {
                                    _.each(me.files(), function (file) {
                                        file.state('inprogress');
                                    });
                                    return false;
                                });
                            }
                            else {
                                me._element = $('#' + me.id);
                                var form = me._element.find('form');
                                form.find(':file').bind('change', function (e) {
                                    var fileInput = $(this)[0];
                                    var files;
                                    if (fileInput.files) {
                                        files = fileInput.files;
                                    }
                                    else {
                                        files = [{
                                                name: TrimFileUploadComponent.fileNameFromPath(fileInput.value),
                                                size: null
                                            }];
                                    }
                                    _.each(files, function (file) {
                                        file.state = ko.observable('pending');
                                        file.error = ko.observable(null);
                                    });
                                    me.files(files);
                                    me.uploadedFiles([]);
                                    if (me.options.autoUpload) {
                                        me.start();
                                    }
                                });
                                me.clearForm = function () {
                                    var fileControl = form.find(':file');
                                    var item = fileControl.wrap('<form>').closest('form').get(0);
                                    if (item) {
                                        item.reset();
                                    }
                                    fileControl.unwrap();
                                    me.files([]);
                                };
                                form.submit(function () {
                                    _.each(me.files(), function (file) {
                                        file.state('inprogress');
                                    });
                                });
                                var iframe = $('<iframe src="javascript:false;" name="iframe-transport-' + me.id + ' title="iframe-transport-' + me.id + '"></iframe>');
                                iframe.width(0);
                                iframe.height(0);
                                iframe.css('border', '0px solid #fff');
                                iframe.css('z-order', '-1');
                                iframe.css('display', 'none');
                                iframe.bind('load', function (e) {
                                    var response = null;
                                    try {
                                        response = $(this).contents();
                                    }
                                    catch (ex) {
                                    }
                                    if (!response || !response.length || !response[0].firstChild) {
                                        _.each(me.files(), function (file) {
                                            file.state('error');
                                            file.error(HP.HPTRIM.Messages.web_errorUploadingYourFile);
                                        });
                                        return;
                                    }
                                    var exceptionMessage = $(response[0]).find('ExceptionMessage,Message').text();
                                    if (exceptionMessage.length > 0) {
                                        _.each(me.files(), function (file) {
                                            file.state('error');
                                            file.error(exceptionMessage);
                                        });
                                        return;
                                    }
                                    var text, json;
                                    text = $(response[0]).text();
                                    json = me.parseResponse(text);
                                    me.uploadedFiles(json);
                                    _.each(me.files(), function (file) {
                                        file.state('complete');
                                        file.error(null);
                                    });
                                });
                                iframe.appendTo(form);
                            }
                            var dropZone = $('#' + me.id + " " + "#dropZone").get(0);
                            if (dropZone != null) {
                                dropZone.addEventListener('dragover', _this.handleDragOver, false);
                                dropZone.addEventListener('dragleave', _this.handleDragOut, false);
                                dropZone.addEventListener('drop', function (evt) {
                                    evt.stopPropagation();
                                    evt.preventDefault();
                                    var _files = evt.dataTransfer;
                                    var files;
                                    var fileInput = $(this)[0];
                                    if (_files.files && _files.files[0].size > 0) {
                                        files = _files.files;
                                    }
                                    else {
                                        $(this).removeAttr('style');
                                        return;
                                    }
                                    _.each(files, function (file) {
                                        file.state = ko.observable('pending');
                                        file.error = ko.observable(null);
                                    });
                                    me.files(files);
                                    me.uploadedFiles([]);
                                    if (me.options.autoUpload) {
                                        me.uploadFile(me.options.url, _files.files);
                                    }
                                }, false);
                                if (!dropZone.dummyClick) {
                                    dropZone.addEventListener('click', _.bind(me.handleClick, me));
                                    dropZone.dummyClick = function () { console.log(''); };
                                }
                            }
                        };
                        setTimeout(doConfiguration, 500);
                    };
                    TrimFileUploadComponent.prototype.handleClick = function () {
                        var me = this;
                        var inputElement = $('#' + me.id + "_fileUploader").get(0);
                        inputElement.click();
                    };
                    TrimFileUploadComponent.prototype.handleDragOver = function (evt) {
                        if (Modernizr.draganddrop) {
                            if (evt.dataTransfer.files != undefined && evt.dataTransfer.files.length > 1
                                || evt.dataTransfer.items != undefined && evt.dataTransfer.items.length > 1) {
                                evt.dataTransfer.dropEffect = 'none';
                                evt.stopPropagation();
                                evt.preventDefault();
                                return;
                            }
                            else {
                                evt.stopPropagation();
                                evt.preventDefault();
                                evt.dataTransfer.dropEffect = 'link';
                                $(this).attr('style', 'background-color: rgba(245,245,245,0.5)');
                            }
                        }
                    };
                    TrimFileUploadComponent.prototype.handleDragOut = function (evt) {
                        $(this).removeAttr('style');
                    };
                    TrimFileUploadComponent.prototype.destroy = function () {
                        var me = this;
                        var element = $('#' + me.id);
                        element.find(':file').unbind('change');
                    };
                    TrimFileUploadComponent.prototype.parseResponse = function (text) {
                        var json = null;
                        try {
                            json = $.parseJSON(text);
                            if (_.isString(json)) {
                                json = $.parseJSON(json);
                            }
                        }
                        catch (ex) {
                            this.displayError();
                        }
                        return json;
                    };
                    TrimFileUploadComponent.prototype.displayError = function (message) {
                        var me = this;
                        var useThisMessage = message ? message : HP.HPTRIM.Messages.web_errorUploadingYourFile;
                        $('#' + me.id + " " + "#uploadprogress").addClass("progress-bar-danger");
                        $('#' + me.id + " " + "#uploadprogress").removeClass("progress-bar-success");
                        var uploadProgress = $('#' + me.id + " " + "#uploadprogress").get(0);
                        if (uploadProgress) {
                            uploadProgress.setAttribute("value", "0");
                            uploadProgress.setAttribute("aria-valuenow", "0");
                            uploadProgress.innerHTML = useThisMessage;
                            uploadProgress.style.width = "100%";
                        }
                        $('#saveBtn').removeClass('disabled');
                    };
                    TrimFileUploadComponent.templates = {
                        'default': 'templates/Framework/FileUpload/Simple'
                    };
                    return TrimFileUploadComponent;
                }(HP.HPTRIM.Framework.Components.Layouts.Panel));
                Widgets.TrimFileUploadComponent = TrimFileUploadComponent;
            })(Widgets = App.Widgets || (App.Widgets = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Widgets;
            (function (Widgets) {
                var PropertyOrFieldList = (function () {
                    function PropertyOrFieldList() {
                        this.propertyOrFields = ko.observableArray([]);
                        this.templateName = ko.observable("templates/Widgets/PropertyOrFieldListView");
                    }
                    return PropertyOrFieldList;
                }());
                Widgets.PropertyOrFieldList = PropertyOrFieldList;
            })(Widgets = App.Widgets || (App.Widgets = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Widgets;
            (function (Widgets) {
                var TrimNotificationWindow = (function (_super) {
                    __extends(TrimNotificationWindow, _super);
                    function TrimNotificationWindow() {
                        _super.call(this, "templates/Widgets/TRIMNotificationWindow");
                        this.messageHeader = ko.observable("");
                        this.messageBody = ko.observable("");
                        this.messages = ko.observableArray([]);
                        this.cssClass("alert alert-fixed-top");
                        this.id = "";
                        this.visible(false);
                        var me = this;
                        var showError = function (error) {
                            me.messageHeader(HPTRIM.Messages.web_error);
                            me.messageBody(error);
                            me.visible(true);
                        };
                    }
                    TrimNotificationWindow.prototype.message = function (messageHeader, messageBody) {
                        this.messageHeader(messageHeader);
                        this.messageBody(messageBody);
                    };
                    TrimNotificationWindow.prototype.showNotification = function () {
                        this.visible(true);
                    };
                    TrimNotificationWindow.prototype.hideNotification = function () {
                        var me = this;
                        var timeoutID = window.setTimeout(function () {
                            me.visible(false);
                        }, 0.5);
                    };
                    return TrimNotificationWindow;
                }(HP.HPTRIM.Framework.Components.Layouts.Panel));
                Widgets.TrimNotificationWindow = TrimNotificationWindow;
            })(Widgets = App.Widgets || (App.Widgets = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Widgets;
            (function (Widgets) {
                var TrimProgressNotificationWindow = (function (_super) {
                    __extends(TrimProgressNotificationWindow, _super);
                    function TrimProgressNotificationWindow() {
                        var _this = this;
                        _super.call(this, "templates/Widgets/TRIMProgressNotificationWindow");
                        this.showing = ko.observable(false);
                        this.heading = ko.observable("");
                        this.headingIcon = ko.observable("");
                        this.finished = ko.observable(false);
                        this.errorList = ko.observableArray([]);
                        this.progressMessage = ko.observable("");
                        this.progress = ko.observable("");
                        this.progressValue = ko.observable(0);
                        this.currentItemName = ko.observable("");
                        this.currentItemMessage = ko.observable("");
                        this.currentItemWarning = ko.observable(false);
                        this.currentItemError = ko.observable(false);
                        this.cancelCallback = function () { };
                        this.showWarningControls = ko.observable(false);
                        this.skipWarning = function () { };
                        this.skipAllWarnings = function () { };
                        this.ignoreWarning = function () { };
                        this.IgnoreAllWarnings = function () { };
                        this.showErrorControls = ko.observable(false);
                        this.ignoreErrors = function () { };
                        this.continueAfterError = function () { };
                        this.cancelProcessing = function () { };
                        this.successCountMessage = ko.observable("");
                        this.warningCountMessage = ko.observable("");
                        this.warnings = ko.observable(false);
                        this.errors = ko.observable(false);
                        this.failedCountMessage = ko.observable("");
                        this.processLogText = ko.observable("");
                        this.logTextFocus = ko.observable(false);
                        this.prettyView = ko.observable(true);
                        this.searched = false;
                        this.cssClass("progress-fixed-bottom");
                        this.id = "";
                        this.visible(false);
                        var self = this;
                        this.processLogComputedText = ko.computed(function () {
                            var logtxt = "";
                            logtxt = _this.heading() + '\n';
                            logtxt = logtxt + self.successCountMessage() + '\n';
                            if (self.failedCountMessage()) {
                                logtxt = logtxt + self.failedCountMessage() + '\n';
                            }
                            if (self.warningCountMessage()) {
                                logtxt = logtxt + self.warningCountMessage() + '\n';
                            }
                            var errors = self.errorList();
                            if (self.errors()) {
                                logtxt = logtxt + HPTRIM.Messages.web_errors + '\n';
                            }
                            for (var i = 0; i < errors.length; i++) {
                                if (!errors[i].warning) {
                                    logtxt = logtxt + errors[i].name + '\n' + errors[i].message + '\n';
                                }
                            }
                            if (self.warnings()) {
                                logtxt = logtxt + HPTRIM.Messages.web_warnings + '\n';
                            }
                            for (var i = 0; i < errors.length; i++) {
                                if (errors[i].warning) {
                                    logtxt = logtxt + errors[i].name + '\n' + errors[i].message + '\n';
                                }
                            }
                            return logtxt;
                        }, this);
                    }
                    TrimProgressNotificationWindow.prototype.fullReset = function () {
                        this.heading("");
                        this.headingIcon("");
                        this.finished(false);
                        this.showErrorControls(false);
                        this.showWarningControls(false);
                        this.progressMessage("");
                        this.progress("");
                        this.progressValue(0);
                        this.currentItemName("");
                        this.currentItemMessage("");
                        this.currentItemWarning(false);
                        this.currentItemError(false);
                        this.successCountMessage("");
                        this.failedCountMessage("");
                        this.processLogText("");
                        this.errorList([]);
                    };
                    TrimProgressNotificationWindow.prototype.reset = function () {
                        this.finished(false);
                        this.showErrorControls(false);
                        this.showWarningControls(false);
                        this.progressMessage("");
                        this.currentItemName("");
                        this.currentItemMessage("");
                        this.currentItemWarning(false);
                        this.currentItemError(false);
                        this.successCountMessage("");
                        this.warningCountMessage("");
                        this.failedCountMessage("");
                        this.processLogText("");
                        this.warnings(false);
                        this.errors(false);
                    };
                    TrimProgressNotificationWindow.prototype.copyToClipboard = function () {
                        this.prettyView(false);
                        HP.HPTRIM.Utils.TrimHelper.copyToClipboard('#processLogComputedText');
                        setTimeout(function () {
                            HP.HPTRIM.Utils.TrimHelper.copyToClipboard('#processLogComputedText');
                        }, 500);
                    };
                    TrimProgressNotificationWindow.prototype.addError = function (uri, name, errorMessage) {
                        var newError = {
                            uri: uri,
                            name: name,
                            message: errorMessage,
                            warning: false
                        };
                        this.errorList.push(newError);
                    };
                    TrimProgressNotificationWindow.prototype.addWarning = function (uri, name, errorMessage) {
                        var newError = {
                            uri: uri,
                            name: name,
                            message: errorMessage,
                            warning: true
                        };
                        this.errorList.push(newError);
                    };
                    TrimProgressNotificationWindow.prototype.updateProgress = function (currentCount, total) {
                        var percent = Math.round((currentCount / total) * 100);
                        this.progressValue(percent);
                        this.progress(percent + " % " + HPTRIM.Messages.web_complete);
                    };
                    TrimProgressNotificationWindow.prototype.finish = function (successCount, total, extraMsg) {
                        this.reset();
                        this.showErrorControls(false);
                        this.finished(true);
                        var errorCount = _.reduce(this.errorList(), function (memo, error) {
                            return memo + (error.warning ? 0 : 1);
                        }, 0);
                        var warningCount = _.reduce(this.errorList(), function (memo, error) {
                            return memo + (error.warning ? 1 : 0);
                        }, 0);
                        this.successCountMessage(successCount + " " + HP.HPTRIM.Messages.web_GPSof + " " + total + " " + HP.HPTRIM.Messages.trm_irmRecordProcessed);
                        if (warningCount != 0) {
                            this.warnings(true);
                            this.warningCountMessage(warningCount + " " + HPTRIM.Messages.web_warningsDuringProcessing);
                        }
                        else {
                            this.warningCountMessage("");
                        }
                        if (errorCount != 0) {
                            this.errors(true);
                            this.failedCountMessage(errorCount + " " + HPTRIM.Messages.web_couldNotBeProcessed);
                        }
                        else {
                            this.failedCountMessage("");
                        }
                        if (extraMsg != undefined && extraMsg != "") {
                            this.processLogText(extraMsg);
                        }
                    };
                    TrimProgressNotificationWindow.prototype.showNotification = function () {
                        if (!this.showing()) {
                            $('#hprm-dynamic-modal-progress').modal('show');
                        }
                        this.visible(true);
                        this.showing(true);
                    };
                    TrimProgressNotificationWindow.prototype.hideNotification = function () {
                        if (this.showing()) {
                            $('#hprm-dynamic-modal-progress').modal('hide');
                        }
                        this.showing(false);
                        var me = this;
                        var timeoutID = window.setTimeout(function () {
                            me.visible(false);
                        }, 0.5);
                    };
                    TrimProgressNotificationWindow.prototype.searchErrors = function () {
                        if (!this.searched) {
                            this.searched = true;
                            var uriList = _.reduce(this.errorList(), function (memo, currentError) {
                                if (currentError.warning) {
                                    return memo;
                                }
                                if (memo.length > 0) {
                                    return memo + "," + currentError.uri;
                                }
                                return currentError.uri;
                            }, "");
                            this.searchHandler("uri:" + uriList, "", this.currentObjectType, "", "");
                        }
                    };
                    return TrimProgressNotificationWindow;
                }(HP.HPTRIM.Framework.Components.Layouts.Panel));
                Widgets.TrimProgressNotificationWindow = TrimProgressNotificationWindow;
            })(Widgets = App.Widgets || (App.Widgets = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Widgets;
            (function (Widgets) {
                var TrimProfileWidget = (function () {
                    function TrimProfileWidget(trimClient) {
                        var _this = this;
                        this.templateName = ko.observable("templates/Widgets/TrimProfileWidget");
                        this.profileUsername = ko.observable('');
                        this.profileUserType = ko.observable('');
                        this.profileServerName = ko.observable('');
                        this.profileDatasetId = ko.observable('');
                        this.trimClient = trimClient;
                        this.isVisible = ko.observable(false);
                        var db = trimClient.getDatabase();
                        var wgs = db.workgroupServerName();
                        var currentUser = db.currentLoggedInUser().displayValue;
                        var dbName = db.name();
                        var dbID = db.id();
                        trimClient.currentUserType.subscribe(function (newValue) {
                            _this.profileUserType(newValue);
                        });
                        this.profileUsername(currentUser);
                        this.profileServerName(wgs);
                        this.profileDatasetId(dbID);
                        this.profileUserType(trimClient.currentUserType());
                    }
                    TrimProfileWidget.prototype.toggle = function () {
                        this.isVisible() ? this.isVisible(false) : this.isVisible(true);
                    };
                    TrimProfileWidget.prototype.animate = function () {
                        this.toggle();
                        if (!this.isVisible()) {
                            $("#profilePanelMaximised").animate({ opacity: "0" }, 500);
                            $("#profilePanel").animate({ height: "30px" }, 500);
                            $("#profilePanelMinimised").animate({ opacity: "1" }, 500);
                        }
                        else if (this.isVisible()) {
                            $("#profilePanelMinimised").animate({ opacity: "0" }, 500);
                            $("#profilePanelMinimised").animate({ height: "0" }, 0);
                            $("#profilePanel").animate({ height: "100px" }, 500);
                            $("#profilePanelMaximised").animate({ opacity: "1" }, 500);
                        }
                    };
                    TrimProfileWidget.PROFILE_INFO_RECEIVED = "PROFILE_INFO_RECEIVED";
                    return TrimProfileWidget;
                }());
                Widgets.TrimProfileWidget = TrimProfileWidget;
            })(Widgets = App.Widgets || (App.Widgets = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Widgets;
            (function (Widgets) {
                var Sort;
                (function (Sort) {
                    Sort[Sort["Ascending"] = 0] = "Ascending";
                    Sort[Sort["Descending"] = 1] = "Descending";
                })(Sort || (Sort = {}));
                "use strict";
                var ObjectPropertiesSelectorForm = (function (_super) {
                    __extends(ObjectPropertiesSelectorForm, _super);
                    function ObjectPropertiesSelectorForm(trimClient) {
                        _super.call(this, 'templates/Framework/Overlays/RecordPropertiesOverlay');
                        this.uri = ko.observable("0");
                        this.closeBehaviour = function () {
                        };
                        this.cssClass('as-spa-record-properties');
                        this.propertyOrFieldDefSelector = new HP.HPTRIM.App.Widgets.PropertyOrFieldSelector(trimClient);
                        var me = this;
                    }
                    ObjectPropertiesSelectorForm.prototype.updateSelector = function (currentTRIMobject, viewPanePropertyOrFieldDefArray, additionalData, fieldsStatus) {
                        this.propertyOrFieldDefSelector.updateCurrentTrimObject(currentTRIMobject, viewPanePropertyOrFieldDefArray, additionalData, fieldsStatus);
                    };
                    ObjectPropertiesSelectorForm.prototype.close = function () {
                        this.closeBehaviour();
                    };
                    ObjectPropertiesSelectorForm.prototype.ok = function () {
                        this.propertyOrFieldDefSelector.onOK();
                        this.close();
                    };
                    ObjectPropertiesSelectorForm.FIELD_PREFIX = 'f_';
                    return ObjectPropertiesSelectorForm;
                }(HP.HPTRIM.Framework.Components.Layouts.Panel));
                Widgets.ObjectPropertiesSelectorForm = ObjectPropertiesSelectorForm;
                var PropertyOrFieldSelector = (function () {
                    function PropertyOrFieldSelector(trimClient) {
                        var _this = this;
                        this.loaded = ko.observable(false);
                        this.properties = ko.observableArray([]);
                        this.fields = ko.observableArray([]);
                        this.addedProperties = ko.observableArray([]);
                        this.templateName = ko.observable("templates/Widgets/PropertyOrFieldSelector");
                        this.loading = ko.observable(true);
                        this.selectedPropertyOrFields = ko.observableArray([]);
                        this.sortState = ko.observable(Sort.Ascending);
                        this.placeHolderText = HPTRIM.Messages.web_FindAProperty_placeHolderTxt;
                        this.filterValue = ko.observable("");
                        this.isDisabled = ko.observable(true);
                        this.isUpDisabled = ko.observable(true);
                        this.isDownDisabled = ko.observable(true);
                        this.trimClient = trimClient;
                        var db = trimClient.getDatabase();
                        var wgs = db.workgroupServerName();
                        this.currentUserName = db.currentLoggedInUser().displayValue;
                        this.filterValue.subscribe(function (newValue) {
                            _.each(_this.properties(), function (prop) {
                                if (newValue == "") {
                                    prop.IsVisible(true);
                                    return;
                                }
                                if (prop.Caption.toLowerCase().indexOf(newValue) > -1) {
                                    prop.IsVisible(true);
                                }
                                else {
                                    prop.IsVisible(false);
                                }
                            });
                        });
                    }
                    PropertyOrFieldSelector.prototype.updateCallback = function (trimBaseObject, selectedPofds) {
                    };
                    PropertyOrFieldSelector.prototype.updateCurrentTrimObject = function (currentTRIMobject, viewPanePropertyOrFieldDefArray, additionalData, fieldsStatus) {
                        this.setupDragDrop();
                        if (this.currentTrimObject) {
                            if ((this.currentTrimObject.Uri == currentTRIMobject.Uri) && (this.currentTrimObject.baseObjectType == currentTRIMobject.baseObjectType)) {
                                setTimeout(function () {
                                    $('#added-properties').sortable({
                                        containment: 'parent',
                                        cursor: "move",
                                        items: "tr"
                                    });
                                }, 500);
                                return;
                            }
                        }
                        this.clear();
                        this.loaded(false);
                        this.loading(true);
                        this.currentTrimObject = currentTRIMobject;
                        this.currentAdditionalData = additionalData;
                        this.currentViewPanelDefArray = viewPanePropertyOrFieldDefArray.slice(0);
                        this.currentFieldStatus = fieldsStatus;
                        for (var i = 0; i < viewPanePropertyOrFieldDefArray.length; i++) {
                            var pofd = viewPanePropertyOrFieldDefArray[i];
                            if (pofd.IsAField) {
                                var id = viewPanePropertyOrFieldDefArray[i].Id;
                                if (id.indexOf('f_') !== 0) {
                                    viewPanePropertyOrFieldDefArray[i].Id = "f_" + pofd.Id;
                                }
                            }
                        }
                        this.selectedPropertyOrFields(viewPanePropertyOrFieldDefArray);
                        var me = this;
                        this.loaded(false);
                        this.trimClient.getPropertyAndFieldDefs(currentTRIMobject.baseObjectType, HPTRIM.PropertySets.ViewPanel, function (result) { me.cachedResult = result; me.processPropertyOrFieldDef(result, fieldsStatus); });
                    };
                    PropertyOrFieldSelector.prototype.processPropertyOrFieldDef = function (result, fieldsStatus) {
                        var me = this;
                        me.toggleSelectedPropertyOrFieldDefs(result.PropertiesAndFields);
                        me.properties(result.PropertiesAndFields);
                        var fieldPath = "FieldDefinition";
                        var requestData = {};
                        requestData.format = 'json';
                        var requestForProperties = "name, SearchClauseName, AccessControlList";
                        if (this.currentTrimObject.baseObjectType.name == HP.HPTRIM.BaseObjectTypes.Record.name) {
                            requestData.q = "usedFor:" + this.currentTrimObject.baseObjectType.name;
                            requestData.properties = requestForProperties;
                        }
                        else {
                            requestData.q = "usedFor:" + this.currentTrimObject.baseObjectType.name;
                            requestData.properties = requestForProperties;
                        }
                        requestData.pageSize = 300;
                        var currentStart = 0;
                        me.fields([]);
                        var processor = function (result) {
                            var fields = me.fields();
                            _.each(result.Results, function (fld) {
                                var canModify = me.trimClient.getAccessControlValue(fld.AccessControlList.FunctionProfiles.ModifyValue);
                                var canView = me.trimClient.getAccessControlValue(fld.AccessControlList.FunctionProfiles.ViewValue);
                                var obj = {
                                    Caption: fld.FieldDefinitionName.Value,
                                    Id: ObjectPropertiesSelectorForm.FIELD_PREFIX + fld.FieldDefinitionSearchClauseName.Value,
                                    IsAdded: ko.observable(false),
                                    IsVisible: ko.observable(true),
                                    Readonly: !canModify,
                                    Visible: canView
                                };
                                fields.push(obj);
                            });
                            me.fields(fields);
                            if (fieldsStatus) {
                                fieldsStatus(fields);
                            }
                            var filteredProperties = _.filter(me.properties(), function (item) {
                                for (var i = 0; i < me.fields().length; i++) {
                                    if (me.fields()[i]['Id'] == item['Id']) {
                                        return false;
                                    }
                                }
                                return true;
                            });
                            me.properties(filteredProperties);
                            me.toggleSelectedPropertyOrFieldDefs(me.fields());
                            var availablePropertiesOrFields = [];
                            for (var j = 0; j < me.fields().length; j++) {
                                var item = me.fields()[j];
                                me.properties.push(item);
                            }
                            var addedPties = me.buildAddedPropertiesOrFieldsList();
                            me.sortAsc();
                            me.addedProperties([]);
                            me.addedProperties(addedPties);
                            if (result.HasMoreItems == true) {
                                currentStart = currentStart + requestData.pageSize;
                                requestData.start = currentStart;
                                me.trimClient.doGet(fieldPath, requestData).done(processor);
                            }
                            else {
                                me.loaded(true);
                            }
                        };
                        this.setupDragDrop();
                        me.trimClient.doGet(fieldPath, requestData).done(processor);
                        this.loading(false);
                    };
                    PropertyOrFieldSelector.prototype.setupDragDrop = function () {
                        setTimeout(function () {
                            $('#added-properties').sortable({
                                containment: 'parent',
                                cursor: "move",
                                items: "tr"
                            });
                        }, 500);
                    };
                    PropertyOrFieldSelector.prototype.buildAddedPropertiesOrFieldsList = function () {
                        var me = this;
                        var tempColection = {};
                        var addedPties = [];
                        _.each(me.properties(), function (item) {
                            if (item.IsAdded() == true) {
                                tempColection[item.Id] = item;
                            }
                        });
                        if (me.currentViewPanelDefArray) {
                            if (me.currentViewPanelDefArray.length > 0) {
                                _.each(me.currentViewPanelDefArray, function (item) {
                                    if (tempColection[item.Id]) {
                                        addedPties.push(tempColection[item.Id]);
                                    }
                                    else {
                                        addedPties.push(tempColection[item.Id]);
                                    }
                                });
                            }
                        }
                        return addedPties;
                    };
                    PropertyOrFieldSelector.prototype.moveSelectedProperty = function (direction) {
                        var me = this;
                        var addedPofdOrderedByUser = $('#added-properties tr.active');
                        me.isDownDisabled(true);
                        me.isUpDisabled(true);
                        if (addedPofdOrderedByUser.length == 1) {
                            if (direction == "down")
                                addedPofdOrderedByUser.insertAfter(addedPofdOrderedByUser.next());
                            else
                                addedPofdOrderedByUser.insertBefore(addedPofdOrderedByUser.prev());
                            me.isDownDisabled(false);
                            me.isUpDisabled(false);
                        }
                        me.updateSelectedPofds(this);
                    };
                    PropertyOrFieldSelector.prototype.updateSelectedPofds = function (me) {
                        var selectedPofds = me.getCurrentlySelectedPofds();
                        var oldSelecteds = me.addedProperties().slice();
                        var newSelecteds = [];
                        var selectingCount = 0;
                        for (var i = 0; i < selectedPofds.length; i++) {
                            for (var j = 0; j < oldSelecteds.length; j++) {
                                if (oldSelecteds[j].Id != undefined && selectedPofds[i] == oldSelecteds[j].Id) {
                                    newSelecteds.push(oldSelecteds[j]);
                                    if (oldSelecteds[j].IsSelected())
                                        selectingCount++;
                                    break;
                                }
                            }
                        }
                        if (newSelecteds.length <= 0) {
                            me.isDownDisabled(true);
                            me.isUpDisabled(true);
                        }
                        else if (newSelecteds.length <= selectingCount) {
                            me.isUpDisabled(true);
                            me.isDownDisabled(true);
                        }
                        else if (newSelecteds[0].IsSelected())
                            me.isUpDisabled(true);
                        else if (newSelecteds[newSelecteds.length - 1].IsSelected())
                            me.isDownDisabled(true);
                        this.addedProperties(newSelecteds);
                    };
                    PropertyOrFieldSelector.prototype.toggleSelected = function (propertyOrField, parentSelector) {
                        var me = this;
                        var selectedPofds = parentSelector.getCurrentlySelectedPofds();
                        var oldSelecteds = parentSelector.addedProperties().slice();
                        var selectingCount = 0;
                        var newSelecteds = [];
                        var negatedState = !propertyOrField.IsSelected();
                        propertyOrField.IsSelected(negatedState);
                        for (var i = 0; i < selectedPofds.length; i++) {
                            for (var j = 0; j < oldSelecteds.length; j++) {
                                if (oldSelecteds[j].Id != undefined && selectedPofds[i] == oldSelecteds[j].Id) {
                                    newSelecteds.push(oldSelecteds[j]);
                                    if (oldSelecteds[j].IsSelected())
                                        selectingCount++;
                                    break;
                                }
                            }
                        }
                        parentSelector.addedProperties(newSelecteds);
                        me.isUpDisabled(true);
                        me.isDownDisabled(true);
                        if (newSelecteds.length <= selectingCount) {
                            me.isDisabled(true);
                            me.isUpDisabled(true);
                            me.isDownDisabled(true);
                        }
                        else if (selectingCount <= 0) {
                            me.isDisabled(true);
                        }
                        else {
                            me.isDisabled(false);
                        }
                        if (selectingCount == 1) {
                            me.isUpDisabled(false);
                            me.isDownDisabled(false);
                        }
                        if (newSelecteds.length <= 1) {
                            me.isDownDisabled(true);
                            me.isUpDisabled(true);
                        }
                        else if (newSelecteds[0].IsSelected())
                            me.isUpDisabled(true);
                        else if (newSelecteds[newSelecteds.length - 1].IsSelected())
                            me.isDownDisabled(true);
                    };
                    PropertyOrFieldSelector.prototype.toggleSelectedPropertyOrFieldDefs = function (allPofds) {
                        var keyValues = {};
                        _.each(allPofds, function (pofd) {
                            pofd['IsAdded'] = ko.observable(false);
                            pofd['IsVisible'] = ko.observable(true),
                                pofd['IsSelected'] = ko.observable(false),
                                keyValues[pofd.Id] = pofd;
                        });
                        var me = this;
                        _.each(this.selectedPropertyOrFields(), function (pofd) {
                            if (keyValues[pofd.Id]) {
                                keyValues[pofd.Id]['IsAdded'](true);
                            }
                        });
                    };
                    PropertyOrFieldSelector.prototype.getCurrentlySelectedPofds = function () {
                        var addedPofdOrderedByUser = $('#added-properties tr');
                        var pofdArray = [];
                        _.each(addedPofdOrderedByUser, function (trElement) {
                            var pofId = $(trElement).data('pid');
                            pofdArray.push(pofId);
                        });
                        return pofdArray;
                    };
                    PropertyOrFieldSelector.prototype.onOK = function () {
                        var selectedPofds = this.getCurrentlySelectedPofds();
                        if (selectedPofds.length == 0) {
                            throw HP.HPTRIM.Messages.bob_select1orMore;
                        }
                        var uri = this.currentTrimObject.Uri;
                        var path = "PropertyDef";
                        var objTypeName = this.currentTrimObject.baseObjectType.name;
                        var jsonData = { TrimType: this.currentTrimObject.baseObjectType.name, ForObject: uri, ListType: 'Detailed', PropertiesAndFields: selectedPofds };
                        var trimObject = new HPTRIM.TrimBaseObject(HP.HPTRIM.Utils.TrimHelper.toBaseObjectType(objTypeName), uri);
                        var me = this;
                        this.trimClient.doPost(path, jsonData).done(function (result) {
                            me.updateCallback(trimObject, selectedPofds);
                        });
                    };
                    PropertyOrFieldSelector.prototype.sortAsc = function () {
                        this.sort(Sort.Ascending);
                        this.sortState(Sort.Ascending);
                    };
                    PropertyOrFieldSelector.prototype.sortDesc = function () {
                        this.sort(Sort.Descending);
                        this.sortState(Sort.Descending);
                    };
                    PropertyOrFieldSelector.prototype.sort = function (sort) {
                        var collection = this.properties;
                        collection.sort(function (a, b) {
                            var left = a.Caption.toLowerCase();
                            var right = b.Caption.toLowerCase();
                            var re = 0;
                            if (sort == Sort.Ascending) {
                                re = left == right ? 0 : (left < right ? -1 : 1);
                            }
                            else if (sort == Sort.Descending) {
                                re = left == right ? 0 : (left > right ? -1 : 1);
                            }
                            return re;
                        });
                    };
                    PropertyOrFieldSelector.prototype.processOnSearchKeyUp = function (filterField, event) {
                        var keyCode = event.which;
                        var value = filterField.getValueEx();
                        var KEY_BACKSPACE = 8;
                        if (keyCode < 46) {
                            if (keyCode == KEY_BACKSPACE) {
                                if (value === "") {
                                }
                            }
                            return;
                        }
                        if (keyCode > 90) {
                            return;
                        }
                        var MIN_FILTER_SEARCH_LENGTH = 3;
                        var waitInterval = 500;
                        clearInterval(this.typingTimer);
                        this.typingTimer = setTimeout(function () {
                            var value = filterField.getValueEx();
                            value = value.trim();
                            if (value === "") {
                                return;
                            }
                            if (value.length < MIN_FILTER_SEARCH_LENGTH) {
                                return;
                            }
                            if (/^[a-zA-Z0-9]+$/.test(value)) {
                            }
                        }, waitInterval);
                    };
                    PropertyOrFieldSelector.prototype.addSelectedPofds = function () {
                        var _this = this;
                        _.each(this.properties(), function (prop) {
                            if (prop.IsSelected() == true && prop.IsVisible() == true) {
                                if (!prop.IsAdded()) {
                                    _this.addedProperties.push(prop);
                                    prop.IsVisible(false);
                                    prop.IsAdded(true);
                                    prop.IsSelected(false);
                                    _this.isDisabled(false);
                                    if (_this.isUpDisabled() === true)
                                        _this.isDownDisabled(true);
                                }
                            }
                        });
                        var addedPropps = this.addedProperties().slice();
                        var selectingCount = 0;
                        _.each(addedPropps, function (property) {
                            if (property.IsSelected() == true) {
                                selectingCount++;
                            }
                        });
                        if (addedPropps.length <= selectingCount || selectingCount > 1) {
                            this.isUpDisabled(true);
                            this.isDownDisabled(true);
                        }
                        else {
                            this.isUpDisabled(false);
                            this.isDownDisabled(false);
                        }
                    };
                    PropertyOrFieldSelector.prototype.removeSelectedPofds = function () {
                        var _this = this;
                        var pofdIndexToRemove = [];
                        var pofdIdToMakeVisible = [];
                        var addedPropps = this.addedProperties().slice();
                        this.addedProperties([]);
                        var index = 0;
                        _.each(addedPropps, function (property) {
                            if (property.IsSelected() == true) {
                                pofdIndexToRemove.push(index);
                                property.IsSelected(false);
                                property.IsAdded(false);
                                property.IsVisible(true);
                                _this.isDisabled(true);
                                _this.isDownDisabled(true);
                                _this.isUpDisabled(true);
                                pofdIdToMakeVisible.push(property.Id);
                            }
                            index++;
                        });
                        _.each(pofdIndexToRemove, function (index) {
                            delete addedPropps[index];
                        });
                        var compactedArray = _.compact(addedPropps);
                        this.addedProperties(compactedArray);
                        var availableProps = this.properties();
                        var indexedPofds = this.indexPropertiesOrFieldsById();
                        _.each(pofdIdToMakeVisible, function (pid) {
                            var prop = indexedPofds[pid];
                            if (prop) {
                                prop.IsAdded(false);
                                prop.IsVisible(true);
                                prop.IsSelected(false);
                            }
                        });
                    };
                    PropertyOrFieldSelector.prototype.indexPropertiesOrFieldsById = function () {
                        return _.indexBy(this.properties(), "Id");
                    };
                    PropertyOrFieldSelector.prototype.clear = function () {
                        this.addedProperties([]);
                        this.properties([]);
                        this.filterValue("");
                    };
                    return PropertyOrFieldSelector;
                }());
                Widgets.PropertyOrFieldSelector = PropertyOrFieldSelector;
            })(Widgets = App.Widgets || (App.Widgets = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Panels;
            (function (Panels) {
                var Plugins;
                (function (Plugins) {
                    "use strict";
                    var RecordActionsOverlay = (function (_super) {
                        __extends(RecordActionsOverlay, _super);
                        function RecordActionsOverlay(trimClient) {
                            _super.call(this, []);
                            var overlayAdditionalPanelClass = 'as-spa-overlay-content-additional';
                            var toggleVisible = function (event) {
                                var overlayAdditionalPanelClassSelector = $('.' + overlayAdditionalPanelClass);
                                overlayAdditionalPanelClassSelector.toggleClass('active');
                            };
                            this.objectPropertiesPanel = new Plugins.ObjectPropertiesPanel(trimClient, toggleVisible, overlayAdditionalPanelClass, "templates/Widgets/OverlayPropertiesPanel");
                            this.actionsComponent = new RecordActionsComponent(trimClient);
                            var me = this;
                            this.actionsComponent.selectedItem.subscribe(function (newItem) {
                                if (newItem) {
                                    var newUri = newItem.Uri;
                                    var trimObject = new HPTRIM.TrimBaseObject(HPTRIM.BaseObjectTypes.RecordAction, newUri);
                                    me.updatePropertiesViewPanel(trimObject);
                                    me.objectPropertiesPanel.visible(true);
                                }
                                else {
                                    me.objectPropertiesPanel.visible(false);
                                }
                            });
                            this.panels([this.actionsComponent, this.objectPropertiesPanel]);
                        }
                        RecordActionsOverlay.prototype.initialiseView = function () {
                            this.objectPropertiesPanel.propertyOrFieldListView.toggleVisible();
                            this.objectPropertiesPanel.propertyOrFieldListView.toggleVisible();
                            if (this.actionsComponent.selectedItem()) {
                                this.objectPropertiesPanel.visible(true);
                            }
                            else {
                                this.objectPropertiesPanel.visible(false);
                            }
                        };
                        return RecordActionsOverlay;
                    }(HP.HPTRIM.Framework.Components.Layouts.ContainerPanel));
                    Plugins.RecordActionsOverlay = RecordActionsOverlay;
                    "use strict";
                    var RecordActionsComponentActions = (function () {
                        function RecordActionsComponentActions() {
                        }
                        RecordActionsComponentActions.ATTACH_RECORD_ACTION_TASK = {
                            id: "RecordAttachAction",
                            caption: HP.HPTRIM.Messages.web_newRecordAction,
                            toolTip: HP.HPTRIM.Messages.web_newRecordAction,
                            icon: "new_x16",
                            successMessage: HPTRIM.Messages.web_success,
                            isGroup: false,
                            preConditions: [],
                            supportsTagged: false,
                            supportsSingle: true,
                            objectType: HPTRIM.BaseObjectTypes.Record,
                            serviceAction: "AttachAction",
                            serviceActionFullType: 'HP.HPTRIM.ServiceModel.AttachAction',
                            serviceActionParameters: [],
                            serviceActionValueParameters: [],
                            requireCustomForm: true,
                            requiredProperties: [],
                            requiredCommandIds: [],
                            updatedProperties: [],
                            objectUpdated: true,
                            objectDeleted: false,
                            returnedType: HPTRIM.BaseObjectTypes.Record,
                            checkForWarnings: true,
                        };
                        RecordActionsComponentActions.COMPLETE_ALL_RECORD_ACTION_TASK = {
                            id: "CompleteAllAttachAction",
                            caption: HP.HPTRIM.Messages.web_completeAll,
                            toolTip: HP.HPTRIM.Messages.web_completeAll,
                            icon: "new_x16",
                            successMessage: HPTRIM.Messages.web_success,
                            isGroup: false,
                            requiredPermission: "ActionsAdmin",
                            enabledCommandId: "RecCompleteCurrAct",
                            preConditions: [],
                            supportsTagged: false,
                            supportsSingle: true,
                            objectType: HPTRIM.BaseObjectTypes.Record,
                            serviceAction: "CompleteActions",
                            serviceActionFullType: 'HP.HPTRIM.ServiceModel.CompleteActions',
                            serviceActionParameters: [
                                {
                                    caption: HP.HPTRIM.Messages.web_completionDateTime,
                                    parameterName: "CompleteActionsCompletionDate",
                                    "isMandatory": true,
                                    type: "Date",
                                }
                            ],
                            serviceActionValueParameters: [
                                {
                                    parameterName: "CompleteActionsComplete",
                                    value: "All",
                                    type: "string"
                                }
                            ],
                            requireCustomForm: false,
                            requiredProperties: ["CurrentAction"],
                            requiredCommandIds: ["RecCompleteCurrAct"],
                            updatedProperties: ["CurrentAction"],
                            objectUpdated: true,
                            objectDeleted: false,
                            returnedType: HPTRIM.BaseObjectTypes.Record,
                            checkForWarnings: true,
                        };
                        RecordActionsComponentActions.COMPLETE_LATEST_RECORD_ACTION_TASK = {
                            id: "CompleteLatestAttachAction",
                            caption: HP.HPTRIM.Messages.web_completeCurrentAction,
                            toolTip: HP.HPTRIM.Messages.web_completeCurrentAction,
                            icon: "new_x16",
                            successMessage: HPTRIM.Messages.web_success,
                            isGroup: false,
                            preConditions: [],
                            supportsTagged: false,
                            supportsSingle: true,
                            objectType: HPTRIM.BaseObjectTypes.Record,
                            serviceAction: "CompleteActions",
                            serviceActionFullType: 'HP.HPTRIM.ServiceModel.CompleteActions',
                            serviceActionParameters: [
                                {
                                    caption: HP.HPTRIM.Messages.web_completionDateTime,
                                    parameterName: "CompleteActionsCompletionDate",
                                    "isMandatory": true,
                                    type: "Datetime",
                                },
                                {
                                    caption: HP.HPTRIM.Messages.web_recordActionName,
                                    parameterName: "",
                                    type: "text",
                                    objectPropertyName: "RecordCurrentAction",
                                    readonly: true
                                }
                            ],
                            serviceActionValueParameters: [
                                {
                                    parameterName: "CompleteActionsComplete",
                                    value: "Current",
                                    type: "string"
                                }
                            ],
                            requireCustomForm: false,
                            requiredProperties: ["CurrentAction"],
                            requiredCommandIds: ["RecCompleteCurrAct"],
                            updatedProperties: ["CurrentAction"],
                            objectUpdated: true,
                            objectDeleted: false,
                            returnedType: HPTRIM.BaseObjectTypes.Record,
                            checkForWarnings: true,
                        };
                        RecordActionsComponentActions.REMOVE_ALL_RECORD_ACTION_TASK = {
                            id: "RemoveAllAttachAction",
                            caption: HP.HPTRIM.Messages.web_removeAction,
                            toolTip: HP.HPTRIM.Messages.web_removeAction,
                            icon: "removex_x16",
                            successMessage: HPTRIM.Messages.web_success,
                            isGroup: false,
                            requiredPermission: "ActionsAdmin",
                            preConditions: [],
                            showConfirmation: true,
                            confirmationTitle: HP.HPTRIM.Messages.web_removeAllActions,
                            confirmationString: HP.HPTRIM.Messages.web_removeAllConfirmation,
                            supportsTagged: false,
                            supportsSingle: true,
                            objectType: HPTRIM.BaseObjectTypes.Record,
                            serviceAction: "RemoveAllActions",
                            serviceActionFullType: 'HP.HPTRIM.ServiceModel.RemoveAllActions',
                            serviceActionParameters: [],
                            serviceActionValueParameters: [],
                            requireCustomForm: false,
                            requiredProperties: ["CurrentAction"],
                            requiredCommandIds: ["RecCompleteCurrAct"],
                            updatedProperties: ["CurrentAction"],
                            objectUpdated: true,
                            objectDeleted: false,
                            returnedType: HPTRIM.BaseObjectTypes.Record,
                            checkForWarnings: true,
                        };
                        RecordActionsComponentActions.REMOVE_RECORD_ACTION_TASK = {
                            id: "RemoveAttachAction",
                            caption: HP.HPTRIM.Messages.web_delete,
                            toolTip: HP.HPTRIM.Messages.web_delete,
                            icon: "remove_x24",
                            successMessage: HPTRIM.Messages.web_success,
                            isGroup: false,
                            preConditions: [],
                            showConfirmation: true,
                            confirmationTitle: HP.HPTRIM.Messages.web_removeAction,
                            confirmationString: HP.HPTRIM.Messages.web_sonfirmRemoveAction,
                            supportsTagged: false,
                            supportsSingle: true,
                            objectType: HPTRIM.BaseObjectTypes.Record,
                            serviceAction: "RemoveAction",
                            serviceActionFullType: 'HP.HPTRIM.ServiceModel.RemoveAction',
                            serviceActionParameters: [],
                            serviceActionValueParameters: [
                                {
                                    parameterName: "RemoveActionRecordActionUri",
                                    objectPropertyName: "recordAction",
                                    type: "object",
                                }],
                            requireCustomForm: false,
                            requiredProperties: ["CurrentAction"],
                            requiredCommandIds: ["RecCompleteCurrAct"],
                            updatedProperties: ["CurrentAction"],
                            objectUpdated: true,
                            objectDeleted: false,
                            returnedType: HPTRIM.BaseObjectTypes.Record,
                            checkForWarnings: true,
                        };
                        return RecordActionsComponentActions;
                    }());
                    Plugins.RecordActionsComponentActions = RecordActionsComponentActions;
                    "use strict";
                    var RecordActionsComponent = (function (_super) {
                        __extends(RecordActionsComponent, _super);
                        function RecordActionsComponent(trimClient) {
                            var _this = this;
                            _super.call(this, "templates/Framework/Overlays/RecordActionsComponent", true);
                            this.recordUri = ko.observable("");
                            this.selectedItem = ko.observable(null);
                            this.showNewActionAndProcedure = ko.observable(false);
                            this.errorHandler = function (title, error) { };
                            this.save = function (data, refresh, updateCallback) { };
                            this.actionAdmin = ko.observable(false);
                            this.error = ko.observable(false);
                            this.recordActions = ko.observableArray([]);
                            this.template = ko.observable("RecordActionComponentRecordAction");
                            this.title = ko.observable("");
                            this.recordName = ko.observable("");
                            this.errorVisible = ko.observable(false);
                            this.alertDetails = ko.observable("");
                            this.canCompleteAll = ko.observable(true);
                            this.trimClient = trimClient;
                            var me = this;
                            var mainObjectDefs = this.trimClient.getMainObjectDefinitions();
                            this.recordActionObjectDefinition = _.find(mainObjectDefs.definitions, function (mainObjectDef) { return mainObjectDef.Id == HPTRIM.BaseObjectTypes.RecordAction.Id; });
                            this.loading = ko.observable(false);
                            this.loadingMessage = ko.observable(HPTRIM.Messages.web_loading);
                            this.noRecordActionsMessage = ko.observable(HPTRIM.Messages.web_pendingElectronicUpload);
                            if (this.trimClient.getDatabase().currentUserPermissions().ActionsAdmin) {
                                this.actionAdmin(true);
                            }
                            this.load = function (uri) {
                                _this.selectedItem(null);
                                if (uri) {
                                    _this.loading(true);
                                    _this.error(false);
                                    var search = new HPTRIM.TrimMainObjectSearch(_this.trimClient, HPTRIM.BaseObjectTypes.RecordAction);
                                    search.setProperties([
                                        "RecordActionRecord",
                                        "RecordActionActionName",
                                        "RecordActionResponsibility",
                                        "RecordActionStatus",
                                        "RecordActionDone",
                                        "RecordActionOverdue",
                                        "RecordActionCompletedOnTime",
                                        "RecordActionIsReadyToStart",
                                        "Icon",
                                        "RecordActionStatus",
                                        "RecordActionDueDate",
                                        "RecordAction",
                                        "RecordActionParentRecordAction",
                                        "RecordActionDuration",
                                        "RecordActionCost",
                                        "enabledcommandids"
                                    ]);
                                    search.setDescendantProperties([
                                        "LocationInternetMailAddress",
                                        "LocationFormattedName"
                                    ]);
                                    search.setSortby("DueOn");
                                    var commandIds = [];
                                    _.each(me.recordActionObjectDefinition.updateTasks, function (updateTask) {
                                        if (updateTask.enabledCommandId) {
                                            commandIds.push(updateTask.enabledCommandId);
                                        }
                                    });
                                    commandIds = _.uniq(commandIds);
                                    search.setSelectedCommandIds(commandIds);
                                    search.setSearchString("record:" + uri);
                                    search.setPageSize(RecordActionsComponent.MAX_RESULTS);
                                    search.page().done(function (result) {
                                        if (result.TotalResults > RecordActionsComponent.MAX_RESULTS) {
                                            me.recordActions([]);
                                            _this.loading(false);
                                        }
                                        var rootRecordActions = [];
                                        var orphanActions = [];
                                        var foundActionReady = false;
                                        var rawRecordActions = result.Results;
                                        _.each(rawRecordActions, function (rawRecordAction) {
                                            var recordAction = {
                                                ChildActions: [],
                                                Uri: rawRecordAction.Uri,
                                                Icon: rawRecordAction.Icon,
                                                RecordActionDone: rawRecordAction.RecordActionDone.Value,
                                                RecordActionActionName: rawRecordAction.RecordActionActionName ? rawRecordAction.RecordActionActionName.Value : "",
                                                RecordActionDueDate: rawRecordAction.RecordActionDueDate,
                                                RecordActionParentObject: rawRecordAction.RecordActionParentRecordAction,
                                                RecordActionParentRecordAction: undefined,
                                                isRootNode: rawRecordAction.RecordActionParentRecordAction ? false : true,
                                                RecordActionRecord: rawRecordAction.RecordActionRecord,
                                                RecordActionResponsibility: rawRecordAction.RecordActionResponsibility,
                                                RecordActionStatus: rawRecordAction.RecordActionStatus ? rawRecordAction.RecordActionStatus.Value : "",
                                                RecordActionOverdue: rawRecordAction.RecordActionOverdue.Value,
                                                RecordActionCompletedOnTime: rawRecordAction.RecordActionCompletedOnTime.Value,
                                                RecordActionIsReadyToStart: rawRecordAction.RecordActionIsReadyToStart.Value,
                                                RecordActionCost: rawRecordAction.RecordActionCost.Value,
                                                RecordActionDuration: rawRecordAction.RecordActionDuration.Value,
                                                showingChildren: ko.observable(false),
                                                owningPanel: me,
                                                selected: ko.observable(false),
                                                EnabledCommandIds: rawRecordAction.EnabledCommandIds,
                                                visibleUpdateTasks: ko.observableArray([]),
                                                nodeDepth: 0,
                                            };
                                            me.updateVisibleUpdateTasks(recordAction);
                                            if (recordAction.isRootNode) {
                                                rootRecordActions.push(recordAction);
                                            }
                                            orphanActions.push(recordAction);
                                        });
                                        _.each(orphanActions, function (currentRecordAction) {
                                            if (currentRecordAction.RecordActionParentObject) {
                                                var parentAction = _.find(orphanActions, function (possibleParentRecordAction) {
                                                    return possibleParentRecordAction.Uri == currentRecordAction.RecordActionParentObject.Uri;
                                                });
                                                currentRecordAction.RecordActionParentRecordAction = parentAction;
                                                parentAction.ChildActions.push(currentRecordAction);
                                                parentAction.showingChildren(false);
                                            }
                                        });
                                        _.each(orphanActions, function (currentRecordAction) {
                                            var parentAction = currentRecordAction.RecordActionParentRecordAction;
                                            while (parentAction) {
                                                currentRecordAction.nodeDepth++;
                                                parentAction = parentAction.RecordActionParentRecordAction;
                                            }
                                        });
                                        me.recordActions(rootRecordActions);
                                        _this.loading(false);
                                    }).fail(function (errorResponse) {
                                        me.error(true);
                                        me.recordActions([]);
                                        _this.loading(false);
                                        var errorMsg = HP.HPTRIM.Messages.web_unableToConnectToWebServices;
                                        if (errorResponse.responseJSON && errorResponse.responseJSON.ResponseStatus && errorResponse.responseJSON.ResponseStatus.Message) {
                                            errorMsg = errorResponse.responseJSON.ResponseStatus.Message;
                                        }
                                        ko.postbox.publish(App.TRIMApp.NOTIFICATION_ERROR_TOPIC, errorMsg);
                                    });
                                }
                            };
                            this.toggle = function (item) {
                                if (item.ChildActions.length > 0) {
                                    item.showingChildren(!item.showingChildren());
                                }
                            };
                            this.selectItem = function (item) {
                                if (me.selectedItem() == item) {
                                    me.selectedItem(null);
                                    item.selected(false);
                                }
                                else {
                                    if (me.selectedItem()) {
                                        me.selectedItem().selected(false);
                                    }
                                    item.selected(true);
                                    me.selectedItem(item);
                                }
                            };
                            this.getMailToHref = function (item) {
                                return 'mailto:' + item.RecordActionResponsibility['LocationInternetMailAddress'].Value;
                            };
                            this.updateHandler = function (infoObject, task) {
                                _this.checkActionsVisible();
                                _this.refresh();
                                var itemToSelect = _.find(_this.recordActions(), function (recordAction) {
                                    return recordAction.Uri == infoObject.Uri;
                                });
                            };
                            this.updateHandlerForRecord = function (infoObject, task) {
                                _this.refresh();
                            };
                            this.dismiss = function () { };
                            this.executeTask = function (task) {
                                if (task.objectType == HPTRIM.BaseObjectTypes.RecordAction) {
                                    _this.taskHandler(task, me.selectedItem(), HPTRIM.BaseObjectTypes.RecordAction, me.updateHandler, me.warningHandler, me.errorHandler);
                                }
                                else if (task.objectType == HPTRIM.BaseObjectTypes.Record) {
                                    if (me.selectedItem()) {
                                        var recordInfoObject = $.extend({}, me.selectedItem().RecordActionRecord);
                                        var recordAction = $.extend({}, me.selectedItem());
                                        recordAction.displayValue = me.selectedItem().RecordActionActionName;
                                        recordInfoObject.recordAction = recordAction;
                                        _this.taskHandler(task, recordInfoObject, HPTRIM.BaseObjectTypes.Record, me.updateHandler, me.warningHandler, me.errorHandler);
                                    }
                                    else {
                                        var recordInfoObject = $.extend({}, me.currentRecordInfoObject);
                                        _this.taskHandler(task, recordInfoObject, HPTRIM.BaseObjectTypes.Record, me.updateHandler, me.warningHandler, me.errorHandler);
                                    }
                                }
                            };
                            this.goToRecordAction = function (action) {
                                _this.dismiss();
                                _this.search("uri:" + _this.selectedItem().Uri, _this.selectedItem().Uri, HPTRIM.BaseObjectTypes.RecordAction);
                            };
                            this.goToResponsibleLocation = function (action) {
                                _this.dismiss();
                                _this.search("uri:" + _this.selectedItem().RecordActionResponsibility.Uri, _this.selectedItem().RecordActionResponsibility.Uri, HPTRIM.BaseObjectTypes.Location);
                            };
                            this.newAction = function () {
                                _this.executeTask(RecordActionsComponentActions.ATTACH_RECORD_ACTION_TASK);
                            };
                            this.completeAll = function () {
                                _this.executeTask(RecordActionsComponentActions.COMPLETE_ALL_RECORD_ACTION_TASK);
                            };
                            this.deleteAll = function () {
                                _this.executeTask(RecordActionsComponentActions.REMOVE_ALL_RECORD_ACTION_TASK);
                            };
                        }
                        RecordActionsComponent.prototype.formatDate = function (rawDateObject) {
                            return HP.HPTRIM.Utils.String.formatDateTime(rawDateObject, this.trimClient.getDateFormat());
                        };
                        RecordActionsComponent.prototype.setRecord = function (uri, recordInfoObject) {
                            this.currentRecordInfoObject = recordInfoObject;
                            this.recordUri(uri);
                            if (recordInfoObject.RecordNumber) {
                                this.title(HP.HPTRIM.Messages.web_attachedRecordActions + ' - ' + recordInfoObject.RecordNumber.Value);
                            }
                            this.canCompleteAll(true);
                            if (recordInfoObject.EnabledCommandIds) {
                                this.canCompleteAll(false);
                                var recordEnabledCommands = recordInfoObject.EnabledCommandIds;
                                if (_.find(recordEnabledCommands, function (value) { return value == "RecCompleteCurrAct"; })) {
                                    this.canCompleteAll(true);
                                }
                                if (_.find(recordEnabledCommands, function (value) { return value == "RecAttachAction"; })) {
                                    this.showNewActionAndProcedure(true);
                                }
                            }
                        };
                        RecordActionsComponent.prototype.getTaskUIClass = function (action) {
                            if (action.RecordActionDone) {
                                return "#a8a8a8";
                            }
                            if (action.RecordActionOverdue) {
                                return "#a8a8a8";
                            }
                            if (action.RecordActionIsReadyToStart) {
                                return "#a8a8a8";
                            }
                            return "#a8a8a8";
                        };
                        RecordActionsComponent.prototype.refresh = function () {
                            this.recordActions([]);
                            this.load(this.recordUri());
                        };
                        RecordActionsComponent.prototype.updateVisibleUpdateTasks = function (recordAction) {
                            var _this = this;
                            var me = this;
                            recordAction.visibleUpdateTasks([]);
                            _.each(me.recordActionObjectDefinition.updateTasks, function (updateTask) {
                                var displayEnabled = true;
                                if (updateTask.requiredPermission) {
                                    if (_this.trimClient.getDatabase().currentUserPermissions()[updateTask.requiredPermission] != true) {
                                        return;
                                    }
                                }
                                if (updateTask.enabledCommandId) {
                                    if (!_.contains(recordAction.EnabledCommandIds, updateTask.enabledCommandId)) {
                                        return;
                                    }
                                }
                                if (displayEnabled && updateTask.preConditions) {
                                    _.each(updateTask.preConditions, function (preCondition) {
                                        displayEnabled = displayEnabled && (recordAction[preCondition.property] == preCondition.value ||
                                            recordAction[preCondition.property].Value == preCondition.value);
                                    });
                                }
                                if (displayEnabled) {
                                    recordAction.visibleUpdateTasks.push(updateTask);
                                }
                            });
                            if (this.currentRecordInfoObject && this.currentRecordInfoObject.EnabledCommandIds) {
                                if (_.find(this.currentRecordInfoObject.EnabledCommandIds, function (commandId) { return commandId == "RecAttachAction"; })) {
                                    recordAction.visibleUpdateTasks.push(RecordActionsComponentActions.REMOVE_RECORD_ACTION_TASK);
                                }
                            }
                        };
                        RecordActionsComponent.MAX_RESULTS = 9999;
                        return RecordActionsComponent;
                    }(HP.HPTRIM.Framework.Components.Layouts.Panel));
                    Plugins.RecordActionsComponent = RecordActionsComponent;
                })(Plugins = Panels.Plugins || (Panels.Plugins = {}));
            })(Panels = App.Panels || (App.Panels = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Panels;
            (function (Panels) {
                var Plugins;
                (function (Plugins) {
                    "use strict";
                    var RecordDocumentsOverlay = (function (_super) {
                        __extends(RecordDocumentsOverlay, _super);
                        function RecordDocumentsOverlay(trimClient) {
                            _super.call(this, []);
                            var overlayAdditionalPanelClass = HPTRIM.Utils.UIConstants.CSS_CLASS_OVERLAY_CONTENT_ADDITIONAL;
                            var toggleVisible = function (event) {
                                var overlayAdditionalPanelClassSelector = $('.' + overlayAdditionalPanelClass);
                                overlayAdditionalPanelClassSelector.toggleClass('active');
                            };
                            this.objectPropertiesPanel = new Plugins.ObjectPropertiesPanel(trimClient, toggleVisible, overlayAdditionalPanelClass, "templates/Widgets/OverlayPropertiesPanel");
                            this.actionsComponent = new RecordDocumentsComponent(trimClient);
                            this.panels([this.actionsComponent, this.objectPropertiesPanel]);
                        }
                        RecordDocumentsOverlay.prototype.initialiseView = function () {
                            this.objectPropertiesPanel.propertyOrFieldListView.toggleVisible();
                            this.objectPropertiesPanel.propertyOrFieldListView.toggleVisible();
                            if (this.actionsComponent.selectedItem()) {
                                this.objectPropertiesPanel.visible(true);
                            }
                            else {
                                this.objectPropertiesPanel.visible(false);
                            }
                        };
                        return RecordDocumentsOverlay;
                    }(HP.HPTRIM.Framework.Components.Layouts.ContainerPanel));
                    Plugins.RecordDocumentsOverlay = RecordDocumentsOverlay;
                    "use strict";
                    var RecordDocumentsComponent = (function (_super) {
                        __extends(RecordDocumentsComponent, _super);
                        function RecordDocumentsComponent(trimClient) {
                            var _this = this;
                            _super.call(this, "templates/Framework/Overlays/RecordDocumentOverlay", true);
                            this.cancelHandler = function () { };
                            this.recordUri = ko.observable("");
                            this.selectedItem = ko.observable(null);
                            this.errorHandler = function (title, error) { };
                            this.load = function (uri, updateCallback) { };
                            this.save = function (data, refresh, updateCallback) { };
                            this.actionAdmin = ko.observable(false);
                            this.error = ko.observable(false);
                            this.handleViewClick = function () { };
                            this.handleRenditionViewClick = function () { };
                            this.viewRecord = function () { };
                            this.viewRendition = function () { };
                            this.title = ko.observable("");
                            this.recordName = ko.observable("");
                            this.errorVisible = ko.observable(false);
                            this.alertDetails = ko.observable("");
                            this.fieldDecorators = [];
                            this.taskCaption = ko.observable("");
                            this.completedMessage = ko.observable('');
                            this.saveBtnClass = ko.observable("");
                            this.consticon = "actdone";
                            this.constEditor = "Editor";
                            this.constReviewer = "Reviewer";
                            this.constAuthorizer = "Authorizer";
                            this.cssClass(HPTRIM.Utils.UIConstants.CSS_CLASS_SAVED_SEARCH_FORM);
                            this.trimClient = trimClient;
                            var me = this;
                            this.loading = ko.observable(false);
                            this.loadingMessage = ko.observable(HPTRIM.Messages.web_loading);
                            if (this.trimClient.getDatabase().currentUserPermissions().ActionsAdmin) {
                                this.actionAdmin(true);
                            }
                            var commentPageItem = {
                                Caption: "",
                                Format: "String",
                                Name: "",
                                Value: ko.observable(null),
                                CharacterLimit: HPTRIM.Form.StringDecorator.TEXT_AREA_SIZE,
                            };
                            me.currentCommentsField = new HP.HPTRIM.Form.StringDecorator(commentPageItem);
                            me.currentCommentsField.Caption = ko.observable("");
                            me.fieldDecorators.push(me.currentCommentsField);
                            var reviewCompletedPageItem = {
                                Caption: "",
                                Format: "Boolean",
                                Name: "",
                                Value: ko.observable(null),
                                enable: true
                            };
                            me.reviewCompleted = new HP.HPTRIM.Form.BooleanDecorator(reviewCompletedPageItem);
                            me.reviewCompleted.Caption = ko.observable("");
                            me.fieldDecorators.push(this.reviewCompleted);
                            this.load = function (uri, updateCallback) {
                                if (uri) {
                                    _this.loading(true);
                                    _this.error(false);
                                    var search = new HPTRIM.TrimMainObjectSearch(_this.trimClient, HPTRIM.BaseObjectTypes.Record);
                                    search.setProperties(me.currentTask.requiredProperties);
                                    search.setDescendantProperties([
                                        "",
                                    ]);
                                    var commandIds = [];
                                    commandIds = _.uniq(me.currentTask.requiredCommandIds);
                                    search.setSelectedCommandIds(commandIds);
                                    search.setSearchString("uri:" + uri);
                                    search.setPageSize(RecordDocumentsComponent.MAX_RESULTS);
                                    search.page().done(function (result) {
                                        var rawRecordDocument = result.Results[0];
                                        me.setRecord(uri, rawRecordDocument);
                                        me.updateHandlerForRecord(rawRecordDocument);
                                        if (updateCallback != undefined)
                                            updateCallback(me.currentRecordInfoObject, me.currentTask);
                                        _this.loading(false);
                                    }).fail(function (errorResponse) {
                                        me.error(true);
                                        _this.loading(false);
                                        var errorMsg = HP.HPTRIM.Messages.web_unableToConnectToWebServices;
                                        if (errorResponse.responseJSON && errorResponse.responseJSON.ResponseStatus && errorResponse.responseJSON.ResponseStatus.Message) {
                                            errorMsg = errorResponse.responseJSON.ResponseStatus.Message;
                                        }
                                        ko.postbox.publish(App.TRIMApp.NOTIFICATION_ERROR_TOPIC, errorMsg);
                                    });
                                }
                            };
                            this.save = function (data, refresh, updateCallback) {
                                me.saveBtnClass('disabled');
                                var saveRequest = new HPTRIM.TrimObjectSave(me.trimClient, _this.currentTask.objectType, parseInt(me.recordUri()));
                                saveRequest.doRequestEx(data).done(function (rawResult) {
                                    if (rawResult.ResponseStatus && rawResult.ResponseStatus.Message) {
                                        me.alertDetails(rawResult.ResponseStatus.Message);
                                        me.errorVisible(true);
                                        me.saveBtnClass("");
                                    }
                                    else if (rawResult) {
                                        me.load(me.recordUri(), updateCallback);
                                        me.saveBtnClass("");
                                        me.errorVisible(false);
                                        me.cancelHandler();
                                    }
                                    else {
                                        me.alertDetails(HPTRIM.Messages.web_errorPerformingOperation);
                                        me.errorVisible(true);
                                    }
                                });
                            };
                            this.updateHandler = function (infoObject, task) {
                                var me = _this;
                                me.checkDocumentReviewVisible();
                            };
                            this.updateHandlerForRecord = function (infoObject, task) {
                                var comments, reviewCompleted, dueDate, reviewDate;
                                var currentUser = _this.trimClient.getDatabase().getCurrentUser();
                                var locationType = '';
                                var editorName = '';
                                if (me.currentTask.id == Panels.RecordDetails.RecordTasks.setDocumentReview().id) {
                                    locationType = _this.constReviewer;
                                    me.reviewCompleted.Caption(HP.HPTRIM.Utils.String.format(HP.HPTRIM.Messages.web_needCompleted, [me.currentTask.caption]));
                                }
                                else if (me.currentTask.id == Panels.RecordDetails.RecordTasks.setDocumentAuthorize().id) {
                                    locationType = _this.constAuthorizer;
                                    me.reviewCompleted.Caption(HP.HPTRIM.Messages.web_needAuthorized);
                                }
                                _.each(infoObject.ChildLocations, function (item) {
                                    if (item.RecordLocationTypeOfRecordLocation.Value == locationType && item.RecordLocationLocation.LocationFormattedName.Value == currentUser.displayValue) {
                                        comments = item.RecordLocationComments.Value;
                                        reviewCompleted = item.RecordLocationIsComplete.Value;
                                        dueDate = HP.HPTRIM.Utils.DateHelper.getDateFromServiceAPI(item.RecordLocationDueDate);
                                        reviewDate = HP.HPTRIM.Utils.DateHelper.getDateFromServiceAPI(item.RecordLocationFromDateTime);
                                    }
                                    else if (item.RecordLocationTypeOfRecordLocation.Value == _this.constEditor) {
                                        editorName = item.RecordLocationOriginalName.Value;
                                    }
                                });
                                me.currentCommentsField.Value(comments);
                                if (dueDate != undefined) {
                                    var lcDueDateTimeString = HP.HPTRIM.Utils.DateHelper.getDateAtTimeLocaleString(dueDate);
                                    var completedMessage = HP.HPTRIM.Utils.String.format(HP.HPTRIM.Messages.web_reviewDueDate, [me.currentTask.caption, lcDueDateTimeString]);
                                    me.completedMessage(completedMessage);
                                }
                                if (comments != "") {
                                    me.reviewCompleted.Value(reviewCompleted);
                                    if (reviewCompleted && reviewDate != undefined) {
                                        var lcReviewDateTimeString = HP.HPTRIM.Utils.DateHelper.getDateAtTimeLocaleString(reviewDate);
                                        var completedMessage = HP.HPTRIM.Utils.String.format(HP.HPTRIM.Messages.web_reviewDate, [me.currentTask.caption, lcReviewDateTimeString]);
                                        me.completedMessage(completedMessage);
                                    }
                                }
                                me.currentCommentsField.Caption(HP.HPTRIM.Utils.String.format(HP.HPTRIM.Messages.web_needCommentCaption, [editorName]));
                                var caption = HP.HPTRIM.Utils.String.format(HP.HPTRIM.Messages.web_documentReviewAuthorizationTitle, [me.currentTask.caption]);
                                ;
                                me.taskCaption(caption);
                            };
                            this.dismiss = function () { };
                            this.executeTask = function (task) {
                                var me = _this;
                                if (task.objectType == HPTRIM.BaseObjectTypes.Record) {
                                    me.taskHandler(task, _this.currentRecordInfoObject, HPTRIM.BaseObjectTypes.Record, me.updateHandler, me.warningHandler, me.errorHandler);
                                }
                            };
                            this.doUseNote = function () {
                                _this.getSetNotes();
                            };
                            this.doView = function () {
                                var me = _this;
                                me.cancelHandler();
                                me.koHandleViewClick(me.recordDetailInfoObject);
                            };
                            this.doUseTimeStamp = function () {
                                var me = _this;
                                var currentUser = _this.trimClient.getDatabase().getCurrentUser();
                                var currentValue = _this.currentCommentsField.Value();
                                var format = me.trimClient.getDateFormat();
                                var date = HP.HPTRIM.Utils.DateHelper.getCurrentUserTimeStamp();
                                var currentFormat = '"' + date + '  ' + me.trimClient.currentUserSortName + ':"';
                                if (!currentValue)
                                    currentValue = currentFormat;
                                else
                                    currentValue = currentValue + ' \n ' + currentFormat;
                                _this.currentCommentsField.Value(currentValue);
                            };
                            this.validateAndHandleErrors = function () {
                                var result = true;
                                var me = _this;
                                return result;
                            };
                            this.doTask = function () {
                                var me = _this;
                                if (me.validateAndHandleErrors()) {
                                    var review = me.currentCommentsField.Value();
                                    var reviewCompleted = me.reviewCompleted.Value();
                                    review = review.trim();
                                    var data = {};
                                    if (me.currentTask.id == Panels.RecordDetails.RecordTasks.setDocumentReview().id) {
                                        data["RecordMyReviewComments"] = review;
                                        data["Uri"] = me.recordUri();
                                        data["RecordMyReviewComplete"] = reviewCompleted;
                                    }
                                    else if (me.currentTask.id == Panels.RecordDetails.RecordTasks.setDocumentAuthorize().id) {
                                        data["RecordMyAuthorizationComments"] = review;
                                        data["Uri"] = me.recordUri();
                                        data["RecordMyAuthorizationComplete"] = reviewCompleted;
                                    }
                                    data['properties'] = me.currentTask.requiredProperties;
                                    if (me.currentTask.requiredCommandIds) {
                                        data['cid_SelectedIds'] = me.currentTask.requiredCommandIds;
                                    }
                                    me.save(data, true, me.updateCallback);
                                }
                            };
                            this.doCancel = function () {
                                _this.cancelHandler();
                            };
                        }
                        RecordDocumentsComponent.prototype.formatDate = function (rawDateObject) {
                            return HP.HPTRIM.Utils.String.formatDateTime(rawDateObject, this.trimClient.getDateFormat());
                        };
                        RecordDocumentsComponent.prototype.setRecord = function (uri, recordInfoObject) {
                            this.currentRecordInfoObject = recordInfoObject;
                            this.recordUri(uri);
                        };
                        RecordDocumentsComponent.prototype.setRecordDetailObject = function (recordInfoObject, task) {
                            var me = this;
                            me.recordDetailInfoObject = recordInfoObject;
                            me.setTask(task);
                            me.load(recordInfoObject.Uri);
                        };
                        RecordDocumentsComponent.prototype.setTask = function (task) {
                            this.currentTask = task;
                        };
                        RecordDocumentsComponent.prototype.koHandleViewClick = function (item) {
                            var uriFromTmpl;
                            var extFromTmpl;
                            var recNo;
                            var recTitle;
                            var showRevisionButton = false;
                            var revisionCount = 0;
                            var showRenditionButton = false;
                            var recordIsCheckedOut;
                            if (item) {
                                if (item.TrimType == 'Record') {
                                    if (item.ChildRenditions != null && item.ChildRenditions.length > 0)
                                        showRenditionButton = true;
                                    uriFromTmpl = item.Uri;
                                    extFromTmpl = item.RecordExtension.Value;
                                    recNo = item.RecordNumber.Value;
                                    recTitle = item.RecordTitle.Value;
                                    if (item.RecordRevisionCount.Value) {
                                        revisionCount = item.RecordRevisionCount.Value;
                                    }
                                    else {
                                        revisionCount = item.RecordRevisionCount;
                                    }
                                    recordIsCheckedOut = item.RecordIsCheckedOut.Value;
                                }
                                this.handleViewClick(uriFromTmpl, extFromTmpl, recNo, recTitle, revisionCount, recordIsCheckedOut, item.RecordSpURL.Value, item);
                            }
                        };
                        RecordDocumentsComponent.prototype.getSetNotes = function () {
                            var me = this;
                            var propertyName = 'RecordNotes';
                            var rty = this.currentRecordInfoObject['RecordRecordType'];
                            var notesInsertStyle = rty.RecordTypeNotesInsertStyle;
                            var annotateWhenReadOnly = rty.RecordTypeAnnotateWhenReadOnly;
                            var annotateOnly = rty.RecordTypeAnnotateOnly;
                            var canAddToNotes = this.currentRecordInfoObject['CanAddToNotes'];
                            this.showNotes(HPTRIM.BaseObjectTypes.Record, me.currentCommentsField, canAddToNotes, notesInsertStyle, annotateWhenReadOnly, annotateOnly);
                        };
                        RecordDocumentsComponent.prototype.refresh = function () {
                            this.load(this.recordUri());
                        };
                        RecordDocumentsComponent.prototype.updateVisibleUpdateTasks = function (records) {
                            var me = this;
                        };
                        RecordDocumentsComponent.MAX_RESULTS = 9999;
                        return RecordDocumentsComponent;
                    }(HP.HPTRIM.Framework.Components.Layouts.Panel));
                    Plugins.RecordDocumentsComponent = RecordDocumentsComponent;
                })(Plugins = Panels.Plugins || (Panels.Plugins = {}));
            })(Panels = App.Panels || (App.Panels = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Panels;
            (function (Panels) {
                var Plugins;
                (function (Plugins) {
                    "use strict";
                    var NotesForm = (function (_super) {
                        __extends(NotesForm, _super);
                        function NotesForm(trimClient) {
                            _super.call(this, 'templates/Framework/Overlays/NotesOverlay');
                            this.noteInsertStyle = ko.observable(HP.HPTRIM.NotesInsertStyles.Wherever);
                            this.existingNotes = ko.observable('');
                            this.submitEnabled = ko.observable(true);
                            this.save = function (data, refresh, updateCallback) { };
                            this.cancelHandler = function () { };
                            this.updateObjectPropertiesPanel = function () { };
                            this.errorVisible = ko.observable(false);
                            this.alertDetails = ko.observable("");
                            this.titleNotes = ko.observable("");
                            this.finishHandler = function () {
                            };
                            var existingNotesPageItem = {
                                Caption: HP.HPTRIM.Messages.web_notes,
                                Value: this.existingNotes,
                                CharacterLimit: 1024,
                            };
                            this.titleNotes(HP.HPTRIM.Messages.web_notes);
                            var colWidth = 85;
                            this.existingNotesField = new HP.HPTRIM.Form.StringDecorator(existingNotesPageItem);
                            this.existingNotesField.columns = colWidth;
                            this.existingNotesField.rowsDisplayed = 10;
                            var newNotesPageItem = {
                                Caption: HP.HPTRIM.Messages.web_addToNotes,
                                Value: ko.observable(),
                                CharacterLimit: 1024,
                            };
                            this.newNotesField = new HP.HPTRIM.Form.StringDecorator(newNotesPageItem);
                            this.newNotesField.rowsDisplayed = 3;
                            this.newNotesField.columns = colWidth;
                            this.trimClient = trimClient;
                            this.notesPropertyName = "";
                            this.uri = "";
                            this.setToTop = ko.observable(false);
                            var setToTopPageItem = {
                                Caption: HP.HPTRIM.Messages.web_NotesAtTheStart,
                                Format: "Boolean",
                                Name: "",
                                Value: this.setToTop,
                            };
                            this.setToTopCheckBox = new HPTRIM.Form.DotCheckBox(setToTopPageItem);
                            this.setToBottom = ko.observable(false);
                            var setToBottomPageItem = {
                                Caption: HP.HPTRIM.Messages.web_NotesAtTheEnd,
                                Format: "Boolean",
                                Name: "",
                                Value: this.setToBottom,
                            };
                            this.setToBottomCheckBox = new HPTRIM.Form.DotCheckBox(setToBottomPageItem);
                            this.addUserStamp = ko.observable(true);
                            var addUserStampCheckboxItem = {
                                Caption: HP.HPTRIM.Messages.web_insertStamp,
                                Format: "Boolean",
                                Name: "",
                                Value: this.addUserStamp,
                            };
                            this.addUserStampCheckBox = new HPTRIM.Form.TickCheckBox(addUserStampCheckboxItem);
                            var me = this;
                            this.setToTopCheckBox.onClick = function (currentCheckbox, evt) {
                                me.setToTop(true);
                                me.setToBottom(false);
                                me.setToTopCheckBox.enabled(false);
                                me.setToBottomCheckBox.enabled(true);
                                me.showLatestNotes();
                                return true;
                            };
                            this.setToBottomCheckBox.onClick = function (currentCheckbox, evt) {
                                me.setToBottom(true);
                                me.setToTop(false);
                                me.setToBottomCheckBox.enabled(false);
                                me.setToTopCheckBox.enabled(true);
                                me.showLatestNotes();
                                return true;
                            };
                            this.submitEnabled(true);
                            this.templateConfiguration.afterRender = function () {
                                setTimeout(function () {
                                    me.showLatestNotes();
                                }, 200);
                            };
                        }
                        NotesForm.prototype.setNotes = function (notes) {
                            this.existingNotes(notes);
                            this.existingNotesField.enabled(false);
                        };
                        NotesForm.prototype.clearAddToNotesField = function () {
                            $('#addToNotesField').val('');
                        };
                        NotesForm.prototype.setInsertStyle = function (noteInsertStyle) {
                            this.noteInsertStyle(noteInsertStyle);
                        };
                        NotesForm.prototype.showLatestNotes = function () {
                            var textarea = $('#' + this.existingNotesField.Id);
                            if (!textarea) {
                                return;
                            }
                            if (this.setToBottom()) {
                                var scrollHeight = textarea.prop('scrollHeight');
                                textarea.prop('scrollTop', scrollHeight);
                            }
                            else {
                                textarea.prop('scrollTop', 0);
                            }
                        };
                        NotesForm.prototype.resetPanel = function () {
                            this.uri = "";
                            this.notesPropertyName = "";
                            this.newNotesField.Value("");
                            this.setToTop(false);
                            this.setToBottom(true);
                            this.addUserStamp(true);
                            this.errorVisible(false);
                            this.alertDetails("");
                            this.submitEnabled(true);
                        };
                        NotesForm.prototype.addToNotes = function () {
                            var _this = this;
                            var me = this;
                            var notes = this.newNotesField.Value();
                            notes = notes.trim();
                            if (notes != "") {
                                var isBottom = me.setToBottom();
                                var isTop = me.setToTop();
                                var addUserStamp = me.addUserStamp();
                                var notesUpdateType = "AppendWithUserStamp";
                                if (isBottom) {
                                    notesUpdateType = addUserStamp ? "AppendWithUserStamp" : "AppendWithNewLine";
                                }
                                else if (isTop) {
                                    notesUpdateType = addUserStamp ? "PrependWithUserStamp" : "PrependWithNewLine";
                                }
                                var data = {};
                                data[me.notesPropertyName] = notes;
                                data.properties = me.notesPropertyName;
                                data.NotesUpdateType = notesUpdateType;
                                data.FailOnWarnings = true;
                                this.submitEnabled(false);
                                var complete = function (rawResult) {
                                    me.finishHandler();
                                    var result = rawResult.Results[0];
                                    me.existingNotes(result[me.notesPropertyName].Value);
                                    var trimObject = new HPTRIM.TrimBaseObject(me.objectType, me.uri);
                                    me.updateObjectPropertiesPanel(trimObject);
                                    me.submitEnabled(true);
                                };
                                var saveRequest = new HPTRIM.TrimObjectSave(me.trimClient, me.objectType, parseInt(me.uri));
                                saveRequest.doRequestEx(data).done(function (rawResult) {
                                    if (!rawResult.Results || rawResult.Results.length == 0) {
                                        if (HPTRIM.Utils.ServiceAPIUtils.isWarning(rawResult)) {
                                            var resubmit = function () {
                                                var saveRequestIgnoreError = new HPTRIM.TrimObjectSave(_this.trimClient, me.objectType, parseInt(me.uri));
                                                var dataIgnoreError = {};
                                                dataIgnoreError[me.notesPropertyName] = notes;
                                                dataIgnoreError.properties = me.notesPropertyName;
                                                dataIgnoreError.NotesUpdateType = notesUpdateType;
                                                dataIgnoreError.FailOnWarnings = false;
                                                saveRequestIgnoreError.doRequestEx(dataIgnoreError).done(function (resubmitResult) {
                                                    if (!resubmitResult.Results || resubmitResult.Results.length == 0) {
                                                        if (resubmitResult.ResponseStatus && resubmitResult.ResponseStatus.Message) {
                                                            _this.alertDetails(resubmitResult.ResponseStatus.Message);
                                                        }
                                                        else if (resubmitResult.ResponseStatus.Errors && resubmitResult.ResponseStatus.Errors.length > 0) {
                                                            var errorMessage = _.map(resubmitResult.ResponseStatus.Errors, function (rawError) {
                                                                return rawError.Message;
                                                            }).join(',');
                                                            _this.alertDetails(errorMessage);
                                                        }
                                                        else {
                                                            _this.alertDetails(HPTRIM.Messages.web_errorPerformingOperation);
                                                        }
                                                        _this.errorVisible(true);
                                                    }
                                                    else {
                                                        complete(resubmitResult);
                                                    }
                                                }).fail(function (error) {
                                                    if (error.ResponseStatus && error.ResponseStatus.Message) {
                                                        _this.alertDetails(error.ResponseStatus.Message);
                                                    }
                                                    else if (error.ResponseStatus.Errors && error.ResponseStatus.Errors.length > 0) {
                                                        var errorMessage = _.map(error.ResponseStatus.Errors, function (rawError) {
                                                            return rawError.Message;
                                                        }).join(',');
                                                        _this.alertDetails(errorMessage);
                                                    }
                                                    else {
                                                        _this.alertDetails(HPTRIM.Messages.web_errorPerformingOperation);
                                                    }
                                                    _this.errorVisible(true);
                                                });
                                            };
                                            var errorMessages = HPTRIM.Utils.ServiceAPIUtils.getWarningMessageArray(rawResult);
                                            _this.warningHandler(HPTRIM.Messages.web_showSecurityAccess, errorMessages, resubmit);
                                        }
                                        else {
                                            if (rawResult.ResponseStatus && rawResult.ResponseStatus.Message) {
                                                _this.alertDetails(rawResult.ResponseStatus.Message);
                                            }
                                            else if (rawResult) {
                                            }
                                            else {
                                                _this.alertDetails(HPTRIM.Messages.web_errorPerformingOperation);
                                            }
                                            _this.errorVisible(true);
                                        }
                                    }
                                    else {
                                        complete(rawResult);
                                    }
                                }).fail(function (rawResult) {
                                    if (rawResult.ResponseStatus && rawResult.ResponseStatus.Message) {
                                        _this.alertDetails(rawResult.ResponseStatus.Message);
                                    }
                                    else {
                                        _this.alertDetails(HPTRIM.Messages.web_errorPerformingOperation);
                                    }
                                    _this.errorVisible(true);
                                    _this.submitEnabled(true);
                                });
                                me.clearAddToNotesField();
                            }
                        };
                        return NotesForm;
                    }(HP.HPTRIM.Framework.Components.Layouts.Panel));
                    Plugins.NotesForm = NotesForm;
                })(Plugins = Panels.Plugins || (Panels.Plugins = {}));
            })(Panels = App.Panels || (App.Panels = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Panels;
            (function (Panels) {
                var Plugins;
                (function (Plugins) {
                    "use strict";
                    var ViewCommentsForm = (function (_super) {
                        __extends(ViewCommentsForm, _super);
                        function ViewCommentsForm(trimClient) {
                            var _this = this;
                            _super.call(this, 'templates/Framework/Overlays/ViewCommentsOverlay');
                            this.roleLocations = ko.observableArray([]);
                            this.fieldDecorators = [];
                            this.loading = ko.observable(true);
                            this.save = function (data, refresh, updateCallback) { };
                            this.handleViewClick = function () { };
                            this.cancelHandler = function () { };
                            this.updateHandler = function (result) { };
                            this.updateObjectPropertiesPanel = function () { };
                            this.load = function (uri, updateCallback) { };
                            this.errorVisible = ko.observable(false);
                            this.alertDetails = ko.observable("");
                            this.commentEnabled = ko.observable(true);
                            this.reviewersCanEdit = ko.observable(false);
                            this.selectedLocationUri = ko.observable("");
                            this.currentLocationItem = ko.observable("");
                            this.saveBtnClass = ko.observable("");
                            this.constActDoneicon = "actdone";
                            this.constActEditableicon = "bobnotes";
                            this.constActStarticon = "schholdsonlyfordisp";
                            this.constEditor = "Editor";
                            this.constReviewer = "Reviewer";
                            this.constAuthorizer = "Authorizer";
                            this.recordMyReviewComments = ko.observable("");
                            this.recordMyAuthorizationComments = ko.observable("");
                            this.recordEditorDetails = ko.observableArray([]);
                            this.recordMyEditorComments = ko.observable("");
                            this.requiredCommandIds = ["StartReview", "StartAuthorization", "ViewComments", "ReviewDocument", "AuthorizeDocument", "FinalizeDocument", "RestartDocumentReview"];
                            this.requiredProperties = ["ChildLocations", "RecordReviewersCanEdit", "RecordReviewState", "RecordEditor", "RecordEditorComments"];
                            this.recordUri = ko.observable("");
                            this.finishHandler = function () {
                            };
                            this.doTask = function () {
                                var me = _this;
                                var lcArray = [];
                                _.each(me.roleLocations(), function (item) {
                                    if (item.canEdit) {
                                        if (item.comments != "") {
                                            lcArray.push({
                                                'RecordLocationComments': item.comments,
                                                'Uri': item.uri
                                            });
                                        }
                                    }
                                });
                                var data = {};
                                data["ChildLocations"] = lcArray;
                                data['Uri'] = me.recordUri();
                                me.save(data, true);
                            };
                            this.cssClass(HPTRIM.Utils.UIConstants.CSS_CLASS_SAVED_SEARCH_FORM);
                            this.trimClient = trimClient;
                            this.uri = "";
                            var me = this;
                            var commentPageItem = {
                                Caption: "",
                                Format: "String",
                                Name: "",
                                Value: ko.observable(null),
                                CharacterLimit: HPTRIM.Form.StringDecorator.TEXT_AREA_SIZE,
                            };
                            me.currentCommentsField = new HP.HPTRIM.Form.StringDecorator(commentPageItem);
                            me.currentCommentsField.columns = HPTRIM.Utils.UIConstants.COMMENTS_COLUMN_SIZER;
                            me.currentCommentsField.rowsDisplayed = HPTRIM.Utils.UIConstants.COMMENTS_ROW_Displayed;
                            me.currentCommentsField.Caption = ko.observable("");
                            me.fieldDecorators.push(me.currentCommentsField);
                            me.currentUser = this.trimClient.getDatabase().getCurrentUser();
                            this.doView = function () {
                                me.cancelHandler();
                                me.koHandleViewClick(me.recordDetailInfoObject);
                            };
                            this.currentCommentsField.Value.subscribe(function (newValue) {
                                if (newValue != undefined && newValue != "") {
                                    _this.updateRecordLocationObject(newValue, _this.selectedLocationUri());
                                }
                            });
                            this.updateInfoObject = function (infoObject) {
                                var me = _this;
                                me.reviewersCanEdit(false);
                                _.each(infoObject.ChildLocations, function (item) {
                                    var canEdit = false;
                                    var icon = _this.constActStarticon;
                                    if (item.RecordLocationTypeOfRecordLocation.Value == _this.constEditor || item.RecordLocationTypeOfRecordLocation.Value == _this.constReviewer || item.RecordLocationTypeOfRecordLocation.Value == _this.constAuthorizer) {
                                        if (item.RecordLocationLocation.LocationFormattedName.Value == me.currentUser.displayValue) {
                                            if (item.RecordLocationTypeOfRecordLocation.Value == _this.constReviewer) {
                                                if (infoObject.RecordReviewState.Value == HP.HPTRIM.DocumentReviewStates[HP.HPTRIM.DocumentReviewStates.Reviewing]) {
                                                    canEdit = true;
                                                    me.reviewersCanEdit(true);
                                                }
                                            }
                                            else if (item.RecordLocationTypeOfRecordLocation.Value == _this.constAuthorizer) {
                                                if (infoObject.RecordReviewState.Value == HP.HPTRIM.DocumentReviewStates[HP.HPTRIM.DocumentReviewStates.Authorizing]) {
                                                    me.reviewersCanEdit(true);
                                                    canEdit = true;
                                                }
                                            }
                                            else if (item.RecordLocationTypeOfRecordLocation.Value == _this.constEditor) {
                                                if (infoObject.RecordReviewState.Value != HP.HPTRIM.DocumentReviewStates[HP.HPTRIM.DocumentReviewStates.Complete]) {
                                                    me.reviewersCanEdit(true);
                                                    canEdit = true;
                                                }
                                            }
                                        }
                                        if (item.RecordLocationIsComplete.Value == true) {
                                            icon = _this.constActDoneicon;
                                        }
                                        else if (item.RecordLocationComments.Value != '') {
                                            icon = _this.constActEditableicon;
                                        }
                                        me.roleLocations.push({
                                            icon: icon,
                                            role: item.RecordLocationTypeOfRecordLocation.Value,
                                            location: item.RecordLocationName.Value,
                                            locationFormattedName: item.RecordLocationLocation.LocationFormattedName.Value,
                                            comments: item.RecordLocationComments.Value,
                                            uri: item.Uri,
                                            canEdit: canEdit
                                        });
                                    }
                                });
                                me.loadComments(me.roleLocations[0]);
                                me.recordUri(infoObject.Uri);
                            };
                            this.doUseTimeStamp = function () {
                                var me = _this;
                                var currentValue = _this.currentCommentsField.Value();
                                var format = me.trimClient.getDateFormat();
                                var date = HP.HPTRIM.Utils.DateHelper.getCurrentUserTimeStamp();
                                var currentFormat = '"' + date + '  ' + me.trimClient.currentUserSortName + ':"';
                                if (!currentValue)
                                    currentValue = currentFormat;
                                else
                                    currentValue = currentValue + ' \n ' + currentFormat;
                                _this.currentCommentsField.Value(currentValue);
                            };
                            this.doUseNote = function () {
                                $('#hprm-dynamic-search-modal').hide();
                                _this.getSetNotes();
                            };
                            this.save = function (data, refresh) {
                                me.saveBtnClass('disabled');
                                var saveRequest = new HPTRIM.TrimObjectSave(me.trimClient, HPTRIM.BaseObjectTypes.Record, parseInt(me.recordUri()));
                                saveRequest.doRequestEx(data).done(function (rawResult) {
                                    if (rawResult.ResponseStatus && rawResult.ResponseStatus.Message) {
                                        me.alertDetails(rawResult.ResponseStatus.Message);
                                        me.errorVisible(true);
                                        me.saveBtnClass("");
                                    }
                                    else if (rawResult) {
                                        me.saveBtnClass("");
                                        me.errorVisible(false);
                                        me.cancelHandler();
                                    }
                                    else {
                                        me.alertDetails(HPTRIM.Messages.web_errorPerformingOperation);
                                        me.errorVisible(true);
                                    }
                                }).fail(function (errorResult) {
                                    me.alertDetails(errorResult.ResponseStatus.Message);
                                    me.errorVisible(true);
                                    me.saveBtnClass("");
                                });
                            };
                            this.load = function (uri, updateCallback) {
                                if (uri) {
                                    var search = new HPTRIM.TrimMainObjectSearch(_this.trimClient, HPTRIM.BaseObjectTypes.Record);
                                    search.setProperties(me.requiredProperties);
                                    search.setDescendantProperties([
                                        "",
                                    ]);
                                    var commandIds = [];
                                    commandIds = _.uniq(me.requiredCommandIds);
                                    search.setSelectedCommandIds(commandIds);
                                    search.setSearchString("uri:" + uri);
                                    search.setPageSize(Plugins.RecordDocumentsComponent.MAX_RESULTS);
                                    search.page().done(function (result) {
                                        var rawRecordDocument = result.Results[0];
                                        me.updateInfoObject(rawRecordDocument);
                                        me.loading(false);
                                    }).fail(function (errorResponse) {
                                        me.loading(false);
                                        var errorMsg = HP.HPTRIM.Messages.web_unableToConnectToWebServices;
                                        if (errorResponse.responseJSON && errorResponse.responseJSON.ResponseStatus && errorResponse.responseJSON.ResponseStatus.Message) {
                                            errorMsg = errorResponse.responseerrorMsgJSON.ResponseStatus.Message;
                                        }
                                    });
                                }
                            };
                        }
                        ViewCommentsForm.prototype.setRecordDetailObject = function (recordInfoObject) {
                            var me = this;
                            me.recordDetailInfoObject = recordInfoObject;
                            me.load(recordInfoObject.Uri);
                        };
                        ViewCommentsForm.prototype.koHandleViewClick = function (item) {
                            var uriFromTmpl;
                            var extFromTmpl;
                            var recNo;
                            var recTitle;
                            var showRevisionButton = false;
                            var revisionCount = 0;
                            var showRenditionButton = false;
                            var recordIsCheckedOut;
                            if (item) {
                                if (item.TrimType == 'Record') {
                                    if (item.ChildRenditions != null && item.ChildRenditions.length > 0)
                                        showRenditionButton = true;
                                    uriFromTmpl = item.Uri;
                                    extFromTmpl = item.RecordExtension.Value;
                                    recNo = item.RecordNumber.Value;
                                    recTitle = item.RecordTitle.Value;
                                    if (item.RecordRevisionCount.Value) {
                                        revisionCount = item.RecordRevisionCount.Value;
                                    }
                                    else {
                                        revisionCount = item.RecordRevisionCount;
                                    }
                                    recordIsCheckedOut = item.RecordIsCheckedOut.Value;
                                }
                                this.handleViewClick(uriFromTmpl, extFromTmpl, recNo, recTitle, revisionCount, recordIsCheckedOut, item.RecordSpURL.Value, item);
                            }
                        };
                        ViewCommentsForm.prototype.getSetNotes = function () {
                            var me = this;
                            var propertyName = 'RecordNotes';
                            var rty = this.recordDetailInfoObject['RecordRecordType'];
                            var notesInsertStyle = rty.RecordTypeNotesInsertStyle;
                            var annotateWhenReadOnly = rty.RecordTypeAnnotateWhenReadOnly;
                            var annotateOnly = rty.RecordTypeAnnotateOnly;
                            var canAddToNotes = this.recordDetailInfoObject['CanAddToNotes'];
                            var updateHandler = this.updateHandler;
                            this.showNotes(HPTRIM.BaseObjectTypes.Record, me.currentCommentsField, canAddToNotes, notesInsertStyle, annotateWhenReadOnly, annotateOnly);
                        };
                        ViewCommentsForm.prototype.resetPanel = function () {
                            this.uri = "";
                            this.errorVisible(false);
                            this.alertDetails("");
                            this.roleLocations().length = 0;
                            this.roleLocations([]);
                            this.selectedLocationUri("");
                        };
                        ViewCommentsForm.prototype.loadComments = function (item) {
                            var me = this;
                            if (!item) {
                                item = me.roleLocations()[0];
                            }
                            var currentUser = this.trimClient.getDatabase().getCurrentUser();
                            me.currentCommentsField.Caption(HP.HPTRIM.Utils.String.format(HP.HPTRIM.Messages.web_reviewerAuthorizerCommentsCaption, [item.role]));
                            me.selectedLocationUri(item.uri);
                            me.currentLocationItem(item);
                            me.currentCommentsField.Value(item.comments);
                            if (item.canEdit) {
                                me.commentEnabled(true);
                                me.currentCommentsField.fieldDisabled(false);
                            }
                            else {
                                me.commentEnabled(false);
                                me.currentCommentsField.fieldDisabled(true);
                            }
                        };
                        ViewCommentsForm.prototype.updateRecordLocationObject = function (comments, locationUri) {
                            var me = this;
                            var currentLocationItem = me.currentLocationItem();
                            if (currentLocationItem.comments !== comments) {
                                currentLocationItem.comments = comments;
                                me.roleLocations.replace(me.currentLocationItem(), currentLocationItem);
                                me.saveBtnClass("");
                            }
                        };
                        return ViewCommentsForm;
                    }(HP.HPTRIM.Framework.Components.Layouts.Panel));
                    Plugins.ViewCommentsForm = ViewCommentsForm;
                })(Plugins = Panels.Plugins || (Panels.Plugins = {}));
            })(Panels = App.Panels || (App.Panels = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Panels;
            (function (Panels) {
                var Plugins;
                (function (Plugins) {
                    "use strict";
                    var AddNotesForm = (function (_super) {
                        __extends(AddNotesForm, _super);
                        function AddNotesForm(trimClient) {
                            _super.call(this, 'templates/Framework/Overlays/NotesOverlay');
                            this.noteInsertStyle = ko.observable(HP.HPTRIM.NotesInsertStyles.Wherever);
                            this.existingNotes = ko.observable('');
                            this.submitEnabled = ko.observable(true);
                            this.save = function (data, refresh, updateCallback) { };
                            this.cancelHandler = function () { };
                            this.updateObjectPropertiesPanel = function () { };
                            this.errorVisible = ko.observable(false);
                            this.alertDetails = ko.observable("");
                            this.titleNotes = ko.observable("");
                            this.finishHandler = function () {
                            };
                            var existingNotesPageItem = {
                                Caption: "",
                                Value: this.existingNotes,
                                CharacterLimit: 1024,
                            };
                            this.titleNotes(HP.HPTRIM.Messages.web_addAnnotation);
                            var colWidth = 85;
                            this.existingNotesField = new HP.HPTRIM.Form.StringDecorator(existingNotesPageItem);
                            this.existingNotesField.columns = colWidth;
                            this.existingNotesField.rowsDisplayed = 10;
                            var newNotesPageItem = {
                                Caption: HP.HPTRIM.Messages.web_placeNewNotes,
                                Value: ko.observable(''),
                                CharacterLimit: 1024,
                            };
                            this.newNotesField = new HP.HPTRIM.Form.StringDecorator(newNotesPageItem);
                            this.newNotesField.rowsDisplayed = 3;
                            this.newNotesField.columns = colWidth;
                            this.trimClient = trimClient;
                            this.notesPropertyName = "";
                            this.uri = "";
                            this.setToTop = ko.observable(false);
                            var setToTopPageItem = {
                                Caption: HP.HPTRIM.Messages.web_NotesAtTheStart,
                                Format: "Boolean",
                                Name: "",
                                Value: this.setToTop,
                            };
                            this.setToTopCheckBox = new HPTRIM.Form.DotCheckBox(setToTopPageItem);
                            this.setToBottom = ko.observable(false);
                            var setToBottomPageItem = {
                                Caption: HP.HPTRIM.Messages.web_NotesAtTheEnd,
                                Format: "Boolean",
                                Name: "",
                                Value: this.setToBottom,
                            };
                            this.setToBottomCheckBox = new HPTRIM.Form.DotCheckBox(setToBottomPageItem);
                            this.addUserStamp = ko.observable(true);
                            var addUserStampCheckboxItem = {
                                Caption: HP.HPTRIM.Messages.web_insertStamp,
                                Format: "Boolean",
                                Name: "",
                                Value: this.addUserStamp,
                            };
                            this.addUserStampCheckBox = new HPTRIM.Form.TickCheckBox(addUserStampCheckboxItem);
                            var me = this;
                            this.setToTopCheckBox.onClick = function (currentCheckbox, evt) {
                                me.setToTop(true);
                                me.setToBottom(false);
                                me.setToTopCheckBox.enabled(false);
                                me.setToBottomCheckBox.enabled(true);
                                me.showLatestNotes();
                                return true;
                            };
                            this.setToBottomCheckBox.onClick = function (currentCheckbox, evt) {
                                me.setToBottom(true);
                                me.setToTop(false);
                                me.setToBottomCheckBox.enabled(false);
                                me.setToTopCheckBox.enabled(true);
                                me.showLatestNotes();
                                return true;
                            };
                            this.submitEnabled(true);
                            this.templateConfiguration.afterRender = function () {
                                setTimeout(function () {
                                    me.showLatestNotes();
                                }, 200);
                            };
                        }
                        AddNotesForm.prototype.setNotes = function (notes) {
                            this.existingNotes(notes);
                            this.existingNotesField.enabled(false);
                        };
                        AddNotesForm.prototype.clearAddToNotesField = function () {
                            $('#addToNotesField').val('');
                        };
                        AddNotesForm.prototype.setInsertStyle = function (noteInsertStyle) {
                            this.noteInsertStyle(noteInsertStyle);
                        };
                        AddNotesForm.prototype.showLatestNotes = function () {
                            var textarea = $('#' + this.existingNotesField.Id);
                            if (!textarea) {
                                return;
                            }
                            if (this.setToBottom()) {
                                var scrollHeight = textarea.prop('scrollHeight');
                                textarea.prop('scrollTop', scrollHeight);
                            }
                            else {
                                textarea.prop('scrollTop', 0);
                            }
                        };
                        AddNotesForm.prototype.resetPanel = function () {
                            this.uri = "";
                            this.notesPropertyName = "";
                            this.newNotesField.Value("");
                            this.setToTop(false);
                            this.setToBottom(true);
                            this.addUserStamp(true);
                            this.errorVisible(false);
                            this.alertDetails("");
                            this.submitEnabled(true);
                        };
                        AddNotesForm.prototype.addToNotes = function () {
                            var me = this;
                            var notes = this.newNotesField.Value();
                            notes = notes.trim();
                            if (notes != "") {
                                var isBottom = me.setToBottom();
                                var isTop = me.setToTop();
                                var addUserStamp = me.addUserStamp();
                                var notesUpdateType = "AppendWithUserStamp";
                                var comments = me.parentObject.Value();
                                var currentUser = this.trimClient.getDatabase().getCurrentUser();
                                if (isBottom) {
                                    notesUpdateType = addUserStamp ? "AppendWithUserStamp" : "AppendWithNewLine";
                                }
                                else if (isTop) {
                                    notesUpdateType = addUserStamp ? "PrependWithUserStamp" : "PrependWithNewLine";
                                }
                                var date = HP.HPTRIM.Utils.DateHelper.getCurrentUserTimeStamp();
                                switch (notesUpdateType) {
                                    case "AppendWithUserStamp":
                                        comments = comments + '\n\n"' + date + ' ' + me.trimClient.currentUserSortName + ':"' + '\n' + notes + '\n';
                                        break;
                                    case "AppendWithNewLine":
                                        comments = comments + '\n' + notes + '\n';
                                        break;
                                    case "PrependWithUserStamp":
                                        comments = '"' + date + ' ' + me.trimClient.currentUserSortName + ':"' + '\n' + notes + '\n\n' + comments;
                                        break;
                                    case "PrependWithNewLine":
                                        comments = notes + '\n' + comments;
                                        break;
                                }
                                this.parentObject.Value(comments);
                                this.submitEnabled(false);
                                me.clearAddToNotesField();
                                me.cancelHandler();
                            }
                        };
                        return AddNotesForm;
                    }(HP.HPTRIM.Framework.Components.Layouts.Panel));
                    Plugins.AddNotesForm = AddNotesForm;
                })(Plugins = Panels.Plugins || (Panels.Plugins = {}));
            })(Panels = App.Panels || (App.Panels = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Panels;
            (function (Panels) {
                var Plugins;
                (function (Plugins) {
                    "use strict";
                    var RecordSecurityAccessControlForm = (function (_super) {
                        __extends(RecordSecurityAccessControlForm, _super);
                        function RecordSecurityAccessControlForm(trimClient) {
                            _super.call(this, 'templates/Framework/Overlays/RecordSecurityAccessControlOverlay');
                            this.uri = ko.observable('');
                            this.selectedUris = ko.observableArray([]);
                            this.errorVisible = ko.observable(false);
                            this.alertDetails = ko.observable("");
                            this.save = function (data, refresh, updateCallback) { };
                            this.cancelHandler = function () { };
                            this.finishHandler = function (refresh) { };
                            this.trimClient = trimClient;
                            this.uri = ko.observable("");
                            this.isMultipleOperation = ko.observable(false);
                            this.recordAccessControlDecorator = ko.observable(undefined);
                            this.recordSecurityDecorator = ko.observable(undefined);
                            var me = this;
                            this.uri.subscribe(function (newValue) {
                                me.updateControls(newValue);
                            });
                        }
                        RecordSecurityAccessControlForm.prototype.appliesToTask = function (objectType, taskId) {
                            if (objectType == HPTRIM.BaseObjectTypes.Record && taskId == Panels.RecordDetails.RecordTasks.SetSecurityTaskId) {
                                return true;
                            }
                            return false;
                        };
                        RecordSecurityAccessControlForm.prototype.setInfoObject = function (infoObject, uriArray) {
                            this.errorVisible(false);
                            this.isMultipleOperation(true);
                            var anyUri = uriArray[0];
                            this.updateControls(anyUri);
                        };
                        RecordSecurityAccessControlForm.prototype.updateControls = function (uri) {
                            var _this = this;
                            this.errorVisible(false);
                            var custVal = "";
                            if (uri != "0" && uri != "") {
                                var aclRequest = new HPTRIM.TrimRecordInformationRequest(this.trimClient, uri, "AccessControlList,SecurityProfile");
                                aclRequest.doRequest().done(function (result) {
                                    if (result.Results.length == 1 && result.Results[0].AccessControlList && result.Results[0].SecurityProfile) {
                                        custVal = result.Results[0].SecurityProfile;
                                        if (_this.isMultipleOperation())
                                            custVal = '';
                                        var recordSecurityPageItem = {
                                            Caption: HPTRIM.BaseObjectTypes.SecurityLevel.Caption,
                                            CustomValue: custVal
                                        };
                                        _this.recordSecurityDecorator(new HPTRIM.Form.RecordSecurityDecorator(_this.trimClient, recordSecurityPageItem));
                                        var accessControlPageItem = {
                                            Caption: HP.HPTRIM.Messages.web_viewEditAccessControlCaption,
                                            CustomValue: result.Results[0].AccessControlList,
                                            Readonly: false
                                        };
                                        _this.recordAccessControlDecorator(new HPTRIM.Form.RecordAccessControlDecorator(accessControlPageItem));
                                    }
                                });
                            }
                        };
                        RecordSecurityAccessControlForm.prototype.validateAndHandleErrors = function () {
                            var result = true;
                            var me = this;
                            return result;
                        };
                        RecordSecurityAccessControlForm.prototype.doUpdateMultiple = function () {
                            var data = {};
                            data.AccessControlList = this.recordAccessControlDecorator().getValueEx();
                            data.SecurityProfile = this.recordSecurityDecorator().getValueEx();
                            data.FailOnWarnings = true;
                            var task = App.Panels.RecordDetails.RecordTasks.modifySecurityAccessTask();
                            this.executeTask(data, task);
                        };
                        RecordSecurityAccessControlForm.prototype.doUpdate = function () {
                            var _this = this;
                            this.errorVisible(false);
                            var data = {};
                            data.AccessControlList = this.recordAccessControlDecorator().getValueEx();
                            data.SecurityProfile = this.recordSecurityDecorator().getValueEx();
                            data.FailOnWarnings = true;
                            var saveRequest = new HPTRIM.TrimObjectSave(this.trimClient, HPTRIM.BaseObjectTypes.Record, parseInt(this.uri()));
                            saveRequest.doRequestEx(data).done(function (rawResult) {
                                if (!rawResult.Results || rawResult.Results.length == 0) {
                                    if (HPTRIM.Utils.ServiceAPIUtils.isWarning(rawResult)) {
                                        var resubmit = function () {
                                            var saveRequestIgnoreError = new HPTRIM.TrimObjectSave(_this.trimClient, HPTRIM.BaseObjectTypes.Record, parseInt(_this.uri()));
                                            var dataIgnoreError = {};
                                            dataIgnoreError.AccessControlList = _this.recordAccessControlDecorator().getValueEx();
                                            dataIgnoreError.SecurityProfile = _this.recordSecurityDecorator().getValueEx();
                                            dataIgnoreError.FailOnWarnings = false;
                                            saveRequestIgnoreError.doRequestEx(dataIgnoreError).done(function (resubmitResult) {
                                                if (!resubmitResult.Results || resubmitResult.Results.length == 0) {
                                                    if (resubmitResult.ResponseStatus && resubmitResult.ResponseStatus.Message) {
                                                        _this.alertDetails(resubmitResult.ResponseStatus.Message);
                                                    }
                                                    else if (resubmitResult.ResponseStatus.Errors && resubmitResult.ResponseStatus.Errors.length > 0) {
                                                        var errorMessage = _.map(resubmitResult.ResponseStatus.Errors, function (rawError) {
                                                            return rawError.Message;
                                                        }).join(',');
                                                        _this.alertDetails(errorMessage);
                                                    }
                                                    else {
                                                        _this.alertDetails(HPTRIM.Messages.web_errorPerformingOperation);
                                                    }
                                                    _this.errorVisible(true);
                                                }
                                                else {
                                                    _this.finishHandler(true);
                                                }
                                            }).fail(function (error) {
                                                if (error.ResponseStatus && error.ResponseStatus.Message) {
                                                    _this.alertDetails(error.ResponseStatus.Message);
                                                }
                                                else if (error.ResponseStatus.Errors && error.ResponseStatus.Errors.length > 0) {
                                                    var errorMessage = _.map(error.ResponseStatus.Errors, function (rawError) {
                                                        return rawError.Message;
                                                    }).join(',');
                                                    _this.alertDetails(errorMessage);
                                                }
                                                else {
                                                    _this.alertDetails(HPTRIM.Messages.web_errorPerformingOperation);
                                                }
                                                _this.errorVisible(true);
                                            });
                                        };
                                        var errorMessages = HPTRIM.Utils.ServiceAPIUtils.getWarningMessageArray(rawResult);
                                        _this.warningHandler(HPTRIM.Messages.web_showSecurityAccess, errorMessages, resubmit);
                                    }
                                    else {
                                        if (rawResult.ResponseStatus && rawResult.ResponseStatus.Message) {
                                            _this.alertDetails(rawResult.ResponseStatus.Message);
                                        }
                                        else {
                                            _this.alertDetails(HPTRIM.Messages.web_errorPerformingOperation);
                                        }
                                        _this.errorVisible(true);
                                    }
                                }
                                else {
                                    _this.finishHandler(true);
                                }
                            }).fail(function (error) {
                                if (error.ResponseStatus && error.ResponseStatus.Message) {
                                    _this.alertDetails(error.ResponseStatus.Message);
                                }
                                else {
                                    _this.alertDetails(HPTRIM.Messages.web_errorPerformingOperation);
                                }
                                _this.errorVisible(true);
                            });
                        };
                        ;
                        RecordSecurityAccessControlForm.prototype.resetPanel = function () {
                            this.uri("");
                            this.recordAccessControlDecorator(null);
                            this.recordSecurityDecorator(null);
                            this.isMultipleOperation(false);
                        };
                        return RecordSecurityAccessControlForm;
                    }(Plugins.CustomUpdateTaskForm));
                    Plugins.RecordSecurityAccessControlForm = RecordSecurityAccessControlForm;
                })(Plugins = Panels.Plugins || (Panels.Plugins = {}));
            })(Panels = App.Panels || (App.Panels = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Panels;
            (function (Panels) {
                var Plugins;
                (function (Plugins) {
                    "use strict";
                    var WarningOnOperationOverlay = (function (_super) {
                        __extends(WarningOnOperationOverlay, _super);
                        function WarningOnOperationOverlay() {
                            _super.call(this, 'templates/Framework/Overlays/WarningOnOperation');
                            this.warningMessageList = ko.observableArray([]);
                            this.cssClass('as-spa-check-in-form');
                            var me = this;
                            this.title = ko.observable("");
                            this.warningBody = ko.observable("");
                            this.defaultWarning = ko.observable(HPTRIM.Messages.web_error);
                            this.buttonsActive = ko.observable(true);
                            this.confirmHandler = function () { };
                            this.cancelHandler = function () { };
                            this.dismissHandler = function () { };
                        }
                        WarningOnOperationOverlay.prototype.reset = function () {
                            this.title("");
                            this.warningBody("");
                            this.defaultWarning(HPTRIM.Messages.web_error);
                            this.warningMessageList([]);
                            this.buttonsActive(true);
                            this.cancelHandler = this.dismissHandler;
                        };
                        WarningOnOperationOverlay.prototype.setUp = function (title, warningMessages, confirmCallback, cancelHandler, warningBody) {
                            this.title(title);
                            this.confirmHandler = confirmCallback;
                            this.cancelHandler = cancelHandler;
                            this.warningMessageList(warningMessages);
                            if (warningBody) {
                                this.warningBody(warningBody);
                            }
                            this.buttonsActive(true);
                        };
                        return WarningOnOperationOverlay;
                    }(HP.HPTRIM.Framework.Components.Layouts.Panel));
                    Plugins.WarningOnOperationOverlay = WarningOnOperationOverlay;
                })(Plugins = Panels.Plugins || (Panels.Plugins = {}));
            })(Panels = App.Panels || (App.Panels = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Panels;
            (function (Panels) {
                var Plugins;
                (function (Plugins) {
                    "use strict";
                    var ErrorOnOperationOverlay = (function (_super) {
                        __extends(ErrorOnOperationOverlay, _super);
                        function ErrorOnOperationOverlay() {
                            _super.call(this, 'templates/Framework/Overlays/ErrorOnOperation');
                            this.cssClass('as-spa-check-in-form');
                            var me = this;
                            this.title = ko.observable("");
                            this.defaultError = ko.observable(HPTRIM.Messages.web_error);
                            this.errorMessage = ko.observable(HPTRIM.Messages.web_error);
                            this.confirmHandler = function () { };
                        }
                        ErrorOnOperationOverlay.prototype.reset = function () {
                            this.title("");
                            this.defaultError(HPTRIM.Messages.web_error);
                        };
                        ErrorOnOperationOverlay.prototype.setUp = function (title, errorMessage, confirmCallback) {
                            this.title(title);
                            this.confirmHandler = confirmCallback;
                            this.errorMessage(errorMessage);
                        };
                        return ErrorOnOperationOverlay;
                    }(HP.HPTRIM.Framework.Components.Layouts.Panel));
                    Plugins.ErrorOnOperationOverlay = ErrorOnOperationOverlay;
                })(Plugins = Panels.Plugins || (Panels.Plugins = {}));
            })(Panels = App.Panels || (App.Panels = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Widgets;
            (function (Widgets) {
                var Sort;
                (function (Sort) {
                    Sort[Sort["Ascending"] = 0] = "Ascending";
                    Sort[Sort["Descending"] = 1] = "Descending";
                })(Sort || (Sort = {}));
                "use strict";
                var CommandSelectorOverlay = (function (_super) {
                    __extends(CommandSelectorOverlay, _super);
                    function CommandSelectorOverlay(trimClient) {
                        _super.call(this, 'templates/Framework/Overlays/BaseOverlay');
                        this.headerText = "$HeaderTextNotSet";
                        this.uri = ko.observable("0");
                        this.closeBehaviour = function () {
                        };
                        this.cssClass('as-spa-record-properties');
                        this.data = new HP.HPTRIM.App.Widgets.QuickAccessCommandSelectorPanel(trimClient);
                    }
                    CommandSelectorOverlay.prototype.updateSelector = function (currentTRIMobject, menuPopup, additionalData, fieldsStatus) {
                        this.data.updateCurrentTrimObject(currentTRIMobject, menuPopup, additionalData, fieldsStatus);
                    };
                    CommandSelectorOverlay.prototype.add = function () {
                    };
                    CommandSelectorOverlay.prototype.remove = function () {
                    };
                    CommandSelectorOverlay.prototype.refresh = function () {
                        this.data.reset();
                    };
                    CommandSelectorOverlay.prototype.close = function () {
                        this.closeBehaviour();
                        this.data.clear();
                    };
                    CommandSelectorOverlay.prototype.ok = function () {
                        this.data.onOK();
                        this.close();
                    };
                    return CommandSelectorOverlay;
                }(HP.HPTRIM.Framework.Components.Layouts.Panel));
                Widgets.CommandSelectorOverlay = CommandSelectorOverlay;
                var QuickAccessCommandSelectorPanel = (function () {
                    function QuickAccessCommandSelectorPanel(trimClient) {
                        var _this = this;
                        this.loaded = ko.observable(false);
                        this.properties = ko.observableArray([]);
                        this.fields = ko.observableArray([]);
                        this.addedProperties = ko.observableArray([]);
                        this.templateName = ko.observable("templates/Widgets/CommandSelector");
                        this.loading = ko.observable(true);
                        this.menus = ko.observable(null);
                        this.selectedCommands = ko.observableArray([]);
                        this.sortState = ko.observable(Sort.Ascending);
                        this.placeHolderText = "$$Find a command";
                        this.strDisplayedProperties = "$$Available Commands";
                        this.strAvailableProperties = "$$Displayed Properties";
                        this.filterValue = ko.observable("");
                        this.trimClient = trimClient;
                        this.filterValue.subscribe(function (newValue) {
                            _.each(_this.properties(), function (prop) {
                                if (newValue == "") {
                                    prop.IsVisible(true);
                                    return;
                                }
                                if (prop.Caption.toLowerCase().indexOf(newValue) > -1) {
                                    prop.IsVisible(true);
                                }
                                else {
                                    prop.IsVisible(false);
                                }
                            });
                        });
                    }
                    QuickAccessCommandSelectorPanel.prototype.updateCallback = function (trimBaseObject, selectedPofds) {
                    };
                    QuickAccessCommandSelectorPanel.prototype.updateCurrentTrimObject = function (currentTRIMobject, objectMenus, additionalData, fieldsStatus) {
                        this.currentTrimObject = currentTRIMobject;
                        this.menus(objectMenus);
                        var me = this;
                        this.loaded(false);
                        var bobType = currentTRIMobject.baseObjectType.name.toLowerCase();
                        this.trimClient.getPropertyAndFieldDefs(currentTRIMobject.baseObjectType, HPTRIM.PropertySets.ViewPanel, function (result) { me.processPropertyOrFieldDef(result, fieldsStatus); });
                    };
                    QuickAccessCommandSelectorPanel.prototype.reset = function () {
                        this.updateCurrentTrimObject(this.currentTrimObject, null, null, null);
                        this.loading(true);
                    };
                    QuickAccessCommandSelectorPanel.prototype.processPropertyOrFieldDef = function (result, fieldsStatus) {
                        this.loading(false);
                    };
                    QuickAccessCommandSelectorPanel.prototype.toggleSelected = function (propertyOrField) {
                        var negatedState = !propertyOrField.IsSelected();
                        propertyOrField.IsSelected(negatedState);
                    };
                    QuickAccessCommandSelectorPanel.prototype.toggleSelectedPropertyOrFieldDefs = function (allPofds) {
                        var keyValues = {};
                        _.each(allPofds, function (pofd) {
                            pofd['IsAdded'] = ko.observable(false);
                            pofd['IsVisible'] = ko.observable(true),
                                pofd['IsSelected'] = ko.observable(false),
                                keyValues[pofd.Id] = pofd;
                        });
                    };
                    QuickAccessCommandSelectorPanel.prototype.getAddedMenuItem = function () {
                        var quickAccessMenuItemsOrPopup = [];
                        for (var i in FlattenMenu.Record) {
                            var item = FlattenMenu.Record[i];
                            if (item.isAdded() == true) {
                                quickAccessMenuItemsOrPopup.push(item);
                            }
                        }
                        for (var i in this.menus().items) {
                            var item = this.menus().items[i];
                            if (item.isAdded() == true) {
                                quickAccessMenuItemsOrPopup.push(item);
                            }
                        }
                        return quickAccessMenuItemsOrPopup;
                    };
                    QuickAccessCommandSelectorPanel.prototype.onOK = function () {
                        var addedWebMenu = this.getAddedMenuItem();
                        g_recObjectKwikMenu.ObjectMenus = addedWebMenu;
                        ko.postbox.publish("QuickAccessCommandUpdated");
                    };
                    QuickAccessCommandSelectorPanel.prototype.sortAsc = function () {
                        this.sort(Sort.Ascending);
                        this.sortState(Sort.Ascending);
                    };
                    QuickAccessCommandSelectorPanel.prototype.sortDesc = function () {
                        this.sort(Sort.Descending);
                        this.sortState(Sort.Descending);
                    };
                    QuickAccessCommandSelectorPanel.prototype.sort = function (sort) {
                        var collection = this.properties;
                        collection.sort(function (a, b) {
                            var left = a.Caption.toLowerCase();
                            var right = b.Caption.toLowerCase();
                            var re = 0;
                            if (sort == Sort.Ascending) {
                                re = left == right ? 0 : (left < right ? -1 : 1);
                            }
                            else if (sort == Sort.Descending) {
                                re = left == right ? 0 : (left > right ? -1 : 1);
                            }
                            return re;
                        });
                    };
                    QuickAccessCommandSelectorPanel.prototype.processOnSearchKeyUp = function (filterField, event) {
                        var keyCode = event.which;
                        var value = filterField.getValueEx();
                        var KEY_BACKSPACE = 8;
                        if (keyCode < 46) {
                            if (keyCode == KEY_BACKSPACE) {
                                if (value === "") {
                                }
                            }
                            return;
                        }
                        if (keyCode > 90) {
                            return;
                        }
                        var MIN_FILTER_SEARCH_LENGTH = 3;
                        var waitInterval = 500;
                        clearInterval(this.typingTimer);
                        this.typingTimer = setTimeout(function () {
                            var value = filterField.getValueEx();
                            value = value.trim();
                            if (value === "") {
                                return;
                            }
                            if (value.length < MIN_FILTER_SEARCH_LENGTH) {
                                return;
                            }
                            if (/^[a-zA-Z0-9]+$/.test(value)) {
                            }
                        }, waitInterval);
                    };
                    QuickAccessCommandSelectorPanel.prototype.addSelectedPofds = function () {
                        var _this = this;
                        _.each(this.properties(), function (prop) {
                            if (prop.IsSelected() == true && prop.IsVisible() == true) {
                                _this.addedProperties.push(prop);
                                prop.IsVisible(false);
                                prop.IsAdded(true);
                                prop.IsSelected(false);
                            }
                        });
                    };
                    QuickAccessCommandSelectorPanel.prototype.removeSelectedPofds = function () {
                        var pofdIndexToRemove = [];
                        var pofdIdToMakeVisible = [];
                        var addedPropps = this.addedProperties();
                        var index = 0;
                        _.each(addedPropps, function (property) {
                            if (property.IsSelected() == true) {
                                pofdIndexToRemove.push(index);
                                property.IsSelected(false);
                                property.IsAdded(false);
                                property.IsVisible(true);
                                pofdIdToMakeVisible.push(property.Id);
                            }
                            index++;
                        });
                        _.each(pofdIndexToRemove, function (index) {
                            delete addedPropps[index];
                        });
                        var compactedArray = _.compact(addedPropps);
                        this.addedProperties(compactedArray);
                        var availableProps = this.properties();
                        var indexedPofds = this.indexPropertiesOrFieldsById();
                        _.each(pofdIdToMakeVisible, function (pid) {
                            var prop = indexedPofds[pid];
                            if (prop) {
                                prop.IsAdded(false);
                                prop.IsVisible(true);
                                prop.IsSelected(false);
                            }
                        });
                    };
                    QuickAccessCommandSelectorPanel.prototype.indexPropertiesOrFieldsById = function () {
                        return _.indexBy(this.properties(), "Id");
                    };
                    QuickAccessCommandSelectorPanel.prototype.clear = function () {
                        this.addedProperties([]);
                        this.properties([]);
                        this.filterValue("");
                    };
                    return QuickAccessCommandSelectorPanel;
                }());
                Widgets.QuickAccessCommandSelectorPanel = QuickAccessCommandSelectorPanel;
                var SelectedQuickAccessCommand = (function (_super) {
                    __extends(SelectedQuickAccessCommand, _super);
                    function SelectedQuickAccessCommand(trimClient) {
                        _super.call(this, "BrowseViaClassificationTree-Template");
                        this.classificationChange = function (uri) { };
                        this.initialized = false;
                        this.isInFavouriteView = false;
                        this.selectedClassification = HPTRIM.TrimBaseObject.makeEmpty();
                        this.topButtonClass = ko.observable(HPTRIM.Utils.UIConstants.PRIMARY_BUTTON_CLASS);
                        this.favoriteButtonClass = ko.observable(HPTRIM.Utils.UIConstants.DEFAULT_BUTTON_CLASS);
                        this.treeNodesRequest = new HP.HPTRIM.ClassificationTreeNodesRequest(trimClient);
                        this.trimClient = trimClient;
                    }
                    SelectedQuickAccessCommand.prototype.selectTop = function () {
                        this.load("top");
                        this.topButtonClass(HPTRIM.Utils.UIConstants.PRIMARY_BUTTON_CLASS);
                        this.favoriteButtonClass(HPTRIM.Utils.UIConstants.DEFAULT_BUTTON_CLASS);
                    };
                    SelectedQuickAccessCommand.prototype.selectFavorite = function () {
                        this.load("favorite");
                        this.topButtonClass(HPTRIM.Utils.UIConstants.DEFAULT_BUTTON_CLASS);
                        this.favoriteButtonClass(HPTRIM.Utils.UIConstants.PRIMARY_BUTTON_CLASS);
                    };
                    SelectedQuickAccessCommand.prototype.onNodeSelect = function (treeNode) {
                        var rawObject = treeNode.sourceObject;
                        if (!rawObject) {
                            return;
                        }
                        var iconId = rawObject.Icon.Id;
                        ;
                        this.selectedClassification = new HPTRIM.TrimBaseObject(HPTRIM.BaseObjectTypes.Classification, rawObject.Uri, rawObject.ClassificationTitle.Value, rawObject.ClassificationName.Value, iconId);
                        this.selectedClassification['sourceObject'] = rawObject;
                        if (treeNode.isExpanded()) {
                            treeNode.collapse();
                        }
                        else {
                            treeNode.expand();
                        }
                        var classification = treeNode.sourceObject;
                        var classRecPattern = classification.ClassificationRecordPattern.Value;
                        if (classRecPattern === "") {
                            this.newRecordFromClassification.visible(false);
                            this.showRecords.visible(false);
                        }
                        else {
                            this.newRecordFromClassification.visible(true);
                            this.showRecords.visible(true);
                        }
                        var isInFav = rawObject.IsInFavorites;
                        if (isInFav === true) {
                            this.toggleFavourite.icon("navfavorites_blu_x24");
                        }
                        else {
                            this.toggleFavourite.icon("navfavorites_light_x24");
                        }
                    };
                    SelectedQuickAccessCommand.prototype.onNodeUnSelect = function (treeNode) {
                        this.selectedClassification = HPTRIM.TrimBaseObject.makeEmpty();
                    };
                    SelectedQuickAccessCommand.prototype.load = function (searchString) {
                        if (searchString) {
                            this.treeNodesRequest.setRootSearchString(searchString);
                            if (searchString == 'favorite') {
                                this.isInFavouriteView = true;
                            }
                            else {
                                this.isInFavouriteView = false;
                            }
                        }
                        this.initialized = true;
                        var draggable = false;
                        var multipleRoots = true;
                        var id = '#' + 'BrowseViaClassificationTree' + this.id;
                        var ele = $(id);
                        ele.html('');
                        ele.data('bs.gtreetable', null);
                        $(id).gtreetable({
                            nodesWrapper: 'Results',
                            nodeLevel: 0,
                            cache: 1,
                            actions: null,
                            showExpandIconOnEmpty: true,
                            'types': {
                                'fpplans': 'fpplans_x16',
                                'navcontents': 'navcontents_x16'
                            },
                            "source": _.bind(this.treeNodesRequest.getNodes, this.treeNodesRequest),
                            onSelect: _.bind(this.onNodeSelect, this),
                            onUnselect: _.bind(this.onNodeUnSelect, this),
                            "language": "en-US",
                            "manyroots": multipleRoots,
                            "draggable": draggable,
                            defaultActions: null
                        });
                    };
                    return SelectedQuickAccessCommand;
                }(HP.HPTRIM.Framework.Components.Layouts.Panel));
                Widgets.SelectedQuickAccessCommand = SelectedQuickAccessCommand;
            })(Widgets = App.Widgets || (App.Widgets = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Panels;
            (function (Panels) {
                var Plugins;
                (function (Plugins) {
                    "use strict";
                    var ManualNumberingForm = (function (_super) {
                        __extends(ManualNumberingForm, _super);
                        function ManualNumberingForm(trimClient) {
                            _super.call(this, 'templates/Framework/Overlays/ManualNumberingOverlay');
                            this.recordLastNumber = ko.observable("");
                            this.recordNumberPattern = ko.observable("");
                            this.recordUri = ko.observable("");
                            this.cancelHandler = function () { };
                            this.finishHandler = function (refresh) { };
                            this.updateHandler = function (result) { };
                            this.dismiss = function () { };
                            this.trimClient = trimClient;
                            var me = this;
                        }
                        ManualNumberingForm.prototype.recNumSubmit = function () {
                            this.updateHandler(this.recordLastNumber().toString());
                        };
                        ManualNumberingForm.prototype.setRecordNumberProperties = function (recordDataEntryPanel) {
                            this.recordNumberPattern(recordDataEntryPanel.recordNumberPattern["Value"]);
                            this.recordLastNumber(recordDataEntryPanel.recordLastNumber["Value"]);
                            this.recordUri(recordDataEntryPanel.recordUri);
                        };
                        ManualNumberingForm.prototype.manualNumberInputField = function () {
                            setTimeout(function () {
                                var fieldInput = $('#manualNumberInput');
                                fieldInput.focus();
                            }, 500);
                        };
                        return ManualNumberingForm;
                    }(HP.HPTRIM.Framework.Components.Layouts.Panel));
                    Plugins.ManualNumberingForm = ManualNumberingForm;
                })(Plugins = Panels.Plugins || (Panels.Plugins = {}));
            })(Panels = App.Panels || (App.Panels = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Menu;
            (function (Menu) {
                var MenuItemPopup = (function (_super) {
                    __extends(MenuItemPopup, _super);
                    function MenuItemPopup() {
                        _super.call(this, "templates/MainObject/MenuGroup", true);
                        this.isAdded = ko.observable(false);
                        this.items = [];
                    }
                    return MenuItemPopup;
                }(HP.HPTRIM.Framework.Components.Layouts.Panel));
                Menu.MenuItemPopup = MenuItemPopup;
            })(Menu = App.Menu || (App.Menu = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Menu;
            (function (Menu) {
                (function (MenuView) {
                    MenuView[MenuView["Popup"] = 0] = "Popup";
                    MenuView[MenuView["Flat"] = 1] = "Flat";
                })(Menu.MenuView || (Menu.MenuView = {}));
                var MenuView = Menu.MenuView;
            })(Menu = App.Menu || (App.Menu = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Menu;
            (function (Menu) {
                var KwikObjectMenu = (function (_super) {
                    __extends(KwikObjectMenu, _super);
                    function KwikObjectMenu(enabledCommandIds, actionHandlers) {
                        var _this = this;
                        _super.call(this, "templates/MainObject/KwikObjectMenu", true);
                        this.enabledCommandIds = [];
                        this.commandHandlers = null;
                        this.menus = ko.observableArray([]);
                        this.commandHandlers = actionHandlers;
                        this.configureMenus();
                        ko.postbox.subscribe('QuickAccessCommandUpdated', function () {
                            _this.menus([]);
                            _this.configureMenus();
                        });
                    }
                    KwikObjectMenu.prototype.configureMenus = function () {
                        var menuDef = g_recObjectKwikMenu.ObjectMenus;
                        for (var i = 0; i < menuDef.length; i++) {
                            var menu = menuDef[i];
                            var action = null;
                            if (menu.MenuText || menu.menuText) {
                                var menuPopup = KwikObjectMenu.makeDropDown(menu);
                                this.menus.push(menuPopup);
                            }
                            else {
                                var menuItem = menu;
                                if (this.commandHandlers) {
                                    if (this.commandHandlers[menuItem.CommandId]) {
                                        menuItem['onclick'] = this.commandHandlers[menuItem.CommandId];
                                    }
                                }
                                var act = KwikObjectMenu.makeActionFromCommand(menuItem);
                                var command = new ActionManager.Button(act);
                                command.templateName(ActionManager.ActionManagerComponent.templates.button);
                                this.menus.push(command);
                            }
                        }
                    };
                    KwikObjectMenu.makeDropDown = function (menuPopup) {
                        var items = (menuPopup).items || menuPopup.Items;
                        var menuText = menuPopup.MenuText || menuPopup.menuText;
                        var actions = KwikObjectMenu.makeActionsFromCommands(items);
                        var dropDown = new ActionManager.ActionManagerComponent(menuText, actions);
                        dropDown.templateName(ActionManager.ActionManagerComponent.templates.dropdown);
                        return dropDown;
                    };
                    KwikObjectMenu.makeActionsFromCommands = function (menuItems) {
                        var tasks = [];
                        for (var i in menuItems) {
                            var menuItem = menuItems[i];
                            var taskDef = KwikObjectMenu.makeTaskOptions(menuItem);
                            tasks.push(taskDef);
                        }
                        return HP.HPTRIM.Utils.TrimHelper.makeTasks(tasks);
                    };
                    KwikObjectMenu.makeActionFromCommand = function (menuItem) {
                        var taskDef = KwikObjectMenu.makeTaskOptions(menuItem);
                        var action = new ActionManager.ActionBase(taskDef);
                        return action;
                    };
                    KwikObjectMenu.makeTaskOptions = function (menuItem) {
                        var actionHandler = function () {
                            alert(menuItem.MenuEntryString + ' - Not Implemented');
                        };
                        if (menuItem['onclick']) {
                            actionHandler = menuItem['onclick'];
                        }
                        var taskOption = {
                            caption: menuItem.MenuEntryString,
                            tooltip: menuItem.StatusBarMessage,
                            enabled: ko.observable(true),
                            visible: ko.observable(true),
                            active: false,
                            actionHandler: actionHandler
                        };
                        return taskOption;
                    };
                    return KwikObjectMenu;
                }(HP.HPTRIM.Framework.Components.Layouts.Panel));
                Menu.KwikObjectMenu = KwikObjectMenu;
            })(Menu = App.Menu || (App.Menu = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var g_recObjectKwikMenu = {
    "ObjectMenus": [
        {
            "__type": "HP.HPTRIM.ServiceModel.MenuPopup, HP.HPTRIM.ServiceAPI.Model",
            "ItemCount": 10,
            "MenuText": "0026New",
            "Items": [
                {
                    "__type": "HP.HPTRIM.ServiceModel.CommandDef, HP.HPTRIM.ServiceAPI.Model",
                    "RefreshStyle": "Add",
                    "IsListCommand": true,
                    "IsNavigationCommand": false,
                    "NeedsAnObject": false,
                    "CommandId": "New",
                    "MenuEntryString": "New Record",
                    "Tooltip": "New Record",
                    "StatusBarMessage": "New Record",
                    "Icon": "Unknown",
                    "MenuItemType": "MenuItemCommand"
                },
                {
                    "__type": "HP.HPTRIM.ServiceModel.MenuSeparator, HP.HPTRIM.ServiceAPI.Model",
                    "Icon": "Unknown",
                    "MenuItemType": "MenuItemSeparator"
                },
                {
                    "__type": "HP.HPTRIM.ServiceModel.CommandDef, HP.HPTRIM.ServiceAPI.Model",
                    "RefreshStyle": "Add",
                    "IsListCommand": true,
                    "IsNavigationCommand": false,
                    "NeedsAnObject": false,
                    "CommandId": "RecNewClient",
                    "MenuEntryString": "New Client Record",
                    "Tooltip": "Create a new Client Record",
                    "StatusBarMessage": "Create a new Client Record",
                    "Icon": "ClientRecord",
                    "MenuItemType": "MenuItemCommand"
                },
                {
                    "__type": "HP.HPTRIM.ServiceModel.CommandDef, HP.HPTRIM.ServiceAPI.Model",
                    "RefreshStyle": "Add",
                    "IsListCommand": false,
                    "IsNavigationCommand": false,
                    "NeedsAnObject": true,
                    "CommandId": "RecNewMatter",
                    "MenuEntryString": "New Matter Record",
                    "Tooltip": "Create a new Matter Record for this Client",
                    "StatusBarMessage": "Create a new Matter Record for this Client",
                    "Icon": "MatterRecord",
                    "MenuItemType": "MenuItemCommand"
                },
                {
                    "__type": "HP.HPTRIM.ServiceModel.CommandDef, HP.HPTRIM.ServiceAPI.Model",
                    "RefreshStyle": "Add",
                    "IsListCommand": false,
                    "IsNavigationCommand": false,
                    "NeedsAnObject": true,
                    "CommandId": "RecNewMatterItem",
                    "MenuEntryString": "New Record Relating To A Matter",
                    "Tooltip": "Create a new Record relating to this matter",
                    "StatusBarMessage": "Create a new Record relating to this matter",
                    "Icon": "BeigeFile",
                    "MenuItemType": "MenuItemCommand"
                },
                {
                    "__type": "HP.HPTRIM.ServiceModel.MenuSeparator, HP.HPTRIM.ServiceAPI.Model",
                    "Icon": "Unknown",
                    "MenuItemType": "MenuItemSeparator"
                },
                {
                    "__type": "HP.HPTRIM.ServiceModel.CommandDef, HP.HPTRIM.ServiceAPI.Model",
                    "RefreshStyle": "Add",
                    "IsListCommand": false,
                    "IsNavigationCommand": false,
                    "NeedsAnObject": true,
                    "CommandId": "RecCopy",
                    "MenuEntryString": "Copy Record",
                    "Tooltip": "Copy Record",
                    "StatusBarMessage": "Copy Record",
                    "Icon": "EditCopy",
                    "MenuItemType": "MenuItemCommand"
                },
                {
                    "__type": "HP.HPTRIM.ServiceModel.CommandDef, HP.HPTRIM.ServiceAPI.Model",
                    "RefreshStyle": "Current",
                    "IsListCommand": false,
                    "IsNavigationCommand": false,
                    "NeedsAnObject": true,
                    "CommandId": "RecNewPart",
                    "MenuEntryString": "New Part",
                    "Tooltip": "Create New Part",
                    "StatusBarMessage": "Create New Part",
                    "Icon": "RecNewPart",
                    "MenuItemType": "MenuItemCommand"
                },
                {
                    "__type": "HP.HPTRIM.ServiceModel.CommandDef, HP.HPTRIM.ServiceAPI.Model",
                    "RefreshStyle": "Add",
                    "IsListCommand": false,
                    "IsNavigationCommand": false,
                    "NeedsAnObject": true,
                    "CommandId": "RecNewVersion",
                    "MenuEntryString": "New Version",
                    "Tooltip": "Create New Version",
                    "StatusBarMessage": "Create New Version",
                    "Icon": "RecNewVersion",
                    "MenuItemType": "MenuItemCommand"
                },
                {
                    "__type": "HP.HPTRIM.ServiceModel.CommandDef, HP.HPTRIM.ServiceAPI.Model",
                    "RefreshStyle": "Add",
                    "IsListCommand": false,
                    "IsNavigationCommand": false,
                    "NeedsAnObject": true,
                    "CommandId": "RecNewRedaction",
                    "MenuEntryString": "New Redaction",
                    "Tooltip": "Create New Redaction",
                    "StatusBarMessage": "Create New Redaction",
                    "Icon": "Unknown",
                    "MenuItemType": "MenuItemCommand"
                }
            ],
            "Icon": "Unknown",
            "MenuItemType": "MenuItemPopup"
        },
        {
            "__type": "HP.HPTRIM.ServiceModel.MenuPopup, HP.HPTRIM.ServiceAPI.Model",
            "ItemCount": 8,
            "MenuText": "Locations",
            "Items": [
                {
                    "__type": "HP.HPTRIM.ServiceModel.CommandDef, HP.HPTRIM.ServiceAPI.Model",
                    "RefreshStyle": "CurrentAndParent",
                    "IsListCommand": false,
                    "IsNavigationCommand": false,
                    "NeedsAnObject": true,
                    "CommandId": "RecContainer",
                    "MenuEntryString": "Container",
                    "Tooltip": "Set Record Container",
                    "StatusBarMessage": "Set Record Container",
                    "Icon": "RecContainer",
                    "MenuItemType": "MenuItemCommand"
                },
                {
                    "__type": "HP.HPTRIM.ServiceModel.CommandDef, HP.HPTRIM.ServiceAPI.Model",
                    "RefreshStyle": "Current",
                    "IsListCommand": false,
                    "IsNavigationCommand": false,
                    "NeedsAnObject": true,
                    "CommandId": "RecSeries",
                    "MenuEntryString": "Series",
                    "Tooltip": "Set Series record",
                    "StatusBarMessage": "Set Series record",
                    "Icon": "RecSeries",
                    "MenuItemType": "MenuItemCommand"
                },
                {
                    "__type": "HP.HPTRIM.ServiceModel.CommandDef, HP.HPTRIM.ServiceAPI.Model",
                    "RefreshStyle": "Current",
                    "IsListCommand": false,
                    "IsNavigationCommand": false,
                    "NeedsAnObject": true,
                    "CommandId": "RecCurrentLoc",
                    "MenuEntryString": "Assignee",
                    "Tooltip": "Set Assignee",
                    "StatusBarMessage": "Set Assignee",
                    "Icon": "ReccurrentLoc",
                    "MenuItemType": "MenuItemCommand"
                },
                {
                    "__type": "HP.HPTRIM.ServiceModel.CommandDef, HP.HPTRIM.ServiceAPI.Model",
                    "RefreshStyle": "Current",
                    "IsListCommand": false,
                    "IsNavigationCommand": false,
                    "NeedsAnObject": true,
                    "CommandId": "RecHomeLoc",
                    "MenuEntryString": "Home",
                    "Tooltip": "Set Home",
                    "StatusBarMessage": "Set Home",
                    "Icon": "Unknown",
                    "MenuItemType": "MenuItemCommand"
                },
                {
                    "__type": "HP.HPTRIM.ServiceModel.CommandDef, HP.HPTRIM.ServiceAPI.Model",
                    "RefreshStyle": "Current",
                    "IsListCommand": false,
                    "IsNavigationCommand": false,
                    "NeedsAnObject": true,
                    "CommandId": "RecOwnerLoc",
                    "MenuEntryString": "Owner",
                    "Tooltip": "Set Owner",
                    "StatusBarMessage": "Set Owner",
                    "Icon": "Unknown",
                    "MenuItemType": "MenuItemCommand"
                },
                {
                    "__type": "HP.HPTRIM.ServiceModel.CommandDef, HP.HPTRIM.ServiceAPI.Model",
                    "RefreshStyle": "Current",
                    "IsListCommand": false,
                    "IsNavigationCommand": false,
                    "NeedsAnObject": true,
                    "CommandId": "RecAddContact",
                    "MenuEntryString": "Attach Contact",
                    "Tooltip": "Attach Contact",
                    "StatusBarMessage": "Attach Contact",
                    "Icon": "RecAddContact",
                    "MenuItemType": "MenuItemCommand"
                },
                {
                    "__type": "HP.HPTRIM.ServiceModel.CommandDef, HP.HPTRIM.ServiceAPI.Model",
                    "RefreshStyle": "Current",
                    "IsListCommand": false,
                    "IsNavigationCommand": false,
                    "NeedsAnObject": true,
                    "CommandId": "RecRemoveContact",
                    "MenuEntryString": "Remove Contact",
                    "Tooltip": "Remove Contact",
                    "StatusBarMessage": "Remove Contact",
                    "Icon": "Unknown",
                    "MenuItemType": "MenuItemCommand"
                },
                {
                    "__type": "HP.HPTRIM.ServiceModel.CommandDef, HP.HPTRIM.ServiceAPI.Model",
                    "RefreshStyle": "None",
                    "IsListCommand": false,
                    "IsNavigationCommand": true,
                    "NeedsAnObject": true,
                    "CommandId": "ShowContacts",
                    "MenuEntryString": "Show Contacts",
                    "Tooltip": "Show Locations that are Contacts of the selected Records",
                    "StatusBarMessage": "Show Locations that are Contacts of the selected Records",
                    "Icon": "LocList",
                    "MenuItemType": "MenuItemCommand"
                }
            ],
            "Icon": "Unknown",
            "MenuItemType": "MenuItemPopup"
        },
        {
            "__type": "HP.HPTRIM.ServiceModel.CommandDef, HP.HPTRIM.ServiceAPI.Model",
            "RefreshStyle": "CurrentAndParent",
            "IsListCommand": false,
            "IsNavigationCommand": false,
            "NeedsAnObject": true,
            "CommandId": "Properties",
            "MenuEntryString": "Properties",
            "Tooltip": "Display Properties",
            "StatusBarMessage": "Display Properties",
            "Icon": "Properties",
            "MenuItemType": "MenuItemCommand"
        },
        {
            "__type": "HP.HPTRIM.ServiceModel.CommandDef, HP.HPTRIM.ServiceAPI.Model",
            "RefreshStyle": "Current",
            "IsListCommand": false,
            "IsNavigationCommand": false,
            "NeedsAnObject": true,
            "CommandId": "Notes",
            "MenuEntryString": "Notes",
            "Tooltip": "Display and/or modify Notes",
            "StatusBarMessage": "Display and/or modify Notes",
            "Icon": "BobNotes",
            "MenuItemType": "MenuItemCommand"
        },
        {
            "__type": "HP.HPTRIM.ServiceModel.CommandDef, HP.HPTRIM.ServiceAPI.Model",
            "RefreshStyle": "Current",
            "IsListCommand": false,
            "IsNavigationCommand": false,
            "NeedsAnObject": true,
            "CommandId": "RecCurrentLoc",
            "MenuEntryString": "Assignee",
            "Tooltip": "Set Assignee",
            "StatusBarMessage": "Set Assignee",
            "Icon": "ReccurrentLoc",
            "MenuItemType": "MenuItemCommand"
        },
    ]
};
var g_recObjectMenu = {
    "ObjectMenus": [
        {
            "__type": "HP.HPTRIM.ServiceModel.MenuPopup, HP.HPTRIM.ServiceAPI.Model",
            "ItemCount": 4,
            "MenuText": "&New",
            "Items": [
                {
                    "__type": "HP.HPTRIM.ServiceModel.CommandDef, HP.HPTRIM.ServiceAPI.Model",
                    "RefreshStyle": "Add",
                    "IsListCommand": true,
                    "IsNavigationCommand": false,
                    "NeedsAnObject": false,
                    "CommandId": "New",
                    "MenuEntryString": "New Record",
                    "Tooltip": "New Record",
                    "StatusBarMessage": "New Record",
                    "Icon": "Unknown",
                    "MenuItemType": "MenuItemCommand"
                },
                {
                    "__type": "HP.HPTRIM.ServiceModel.MenuSeparator, HP.HPTRIM.ServiceAPI.Model",
                    "Icon": "Unknown",
                    "MenuItemType": "MenuItemSeparator"
                },
                {
                    "__type": "HP.HPTRIM.ServiceModel.CommandDef, HP.HPTRIM.ServiceAPI.Model",
                    "RefreshStyle": "Current",
                    "IsListCommand": false,
                    "IsNavigationCommand": false,
                    "NeedsAnObject": true,
                    "CommandId": "RecNewPart",
                    "MenuEntryString": "New Part",
                    "Tooltip": "Create New Part",
                    "StatusBarMessage": "Create New Part",
                    "Icon": "RecNewPart",
                    "MenuItemType": "MenuItemCommand"
                },
                {
                    "__type": "HP.HPTRIM.ServiceModel.CommandDef, HP.HPTRIM.ServiceAPI.Model",
                    "RefreshStyle": "Add",
                    "IsListCommand": false,
                    "IsNavigationCommand": false,
                    "NeedsAnObject": true,
                    "CommandId": "RecNewVersion",
                    "MenuEntryString": "New Version",
                    "Tooltip": "Create New Version",
                    "StatusBarMessage": "Create New Version",
                    "Icon": "RecNewVersion",
                    "MenuItemType": "MenuItemCommand"
                }
            ],
            "PopupId": "RecordNew",
            "Icon": "Unknown",
            "MenuItemType": "MenuItemPopup"
        },
        {
            "__type": "HP.HPTRIM.ServiceModel.MenuPopup, HP.HPTRIM.ServiceAPI.Model",
            "ItemCount": 3,
            "MenuText": "&Search",
            "Items": [
                {
                    "__type": "HP.HPTRIM.ServiceModel.CommandDef, HP.HPTRIM.ServiceAPI.Model",
                    "RefreshStyle": "All",
                    "IsListCommand": false,
                    "IsNavigationCommand": true,
                    "NeedsAnObject": false,
                    "CommandId": "Search",
                    "MenuEntryString": "Refine Search",
                    "Tooltip": "Refine Search",
                    "StatusBarMessage": "Refine Search",
                    "Icon": "Refinesearch",
                    "MenuItemType": "MenuItemCommand"
                },
                {
                    "__type": "HP.HPTRIM.ServiceModel.MenuSeparator, HP.HPTRIM.ServiceAPI.Model",
                    "Icon": "Unknown",
                    "MenuItemType": "MenuItemSeparator"
                },
                {
                    "__type": "HP.HPTRIM.ServiceModel.CommandDef, HP.HPTRIM.ServiceAPI.Model",
                    "RefreshStyle": "All",
                    "IsListCommand": false,
                    "IsNavigationCommand": true,
                    "NeedsAnObject": false,
                    "CommandId": "SaveSearchAs",
                    "MenuEntryString": "Save Search As",
                    "Tooltip": "Save Search As",
                    "StatusBarMessage": "Save Search As",
                    "Icon": "SaveSearch",
                    "MenuItemType": "MenuItemCommand"
                }
            ],
            "PopupId": "RecordSearch",
            "Icon": "Unknown",
            "MenuItemType": "MenuItemPopup"
        },
        {
            "__type": "HP.HPTRIM.ServiceModel.MenuPopup, HP.HPTRIM.ServiceAPI.Model",
            "ItemCount": 8,
            "MenuText": "Navigation",
            "Items": [
                {
                    "__type": "HP.HPTRIM.ServiceModel.CommandDef, HP.HPTRIM.ServiceAPI.Model",
                    "RefreshStyle": "All",
                    "IsListCommand": false,
                    "IsNavigationCommand": true,
                    "NeedsAnObject": true,
                    "CommandId": "NavRelated",
                    "MenuEntryString": "Related Records",
                    "Tooltip": "Navigate To Related Records",
                    "StatusBarMessage": "Navigate To Related Records",
                    "Icon": "NavRelated",
                    "MenuItemType": "MenuItemCommand"
                },
                {
                    "__type": "HP.HPTRIM.ServiceModel.CommandDef, HP.HPTRIM.ServiceAPI.Model",
                    "RefreshStyle": "All",
                    "IsListCommand": false,
                    "IsNavigationCommand": true,
                    "NeedsAnObject": true,
                    "CommandId": "NavLatestVersion",
                    "MenuEntryString": "Latest Version",
                    "Tooltip": "Navigate To Latest Version",
                    "StatusBarMessage": "Navigate To Latest Version",
                    "Icon": "NavLatestVersion",
                    "MenuItemType": "MenuItemCommand"
                },
                {
                    "__type": "HP.HPTRIM.ServiceModel.MenuSeparator, HP.HPTRIM.ServiceAPI.Model",
                    "Icon": "Unknown",
                    "MenuItemType": "MenuItemSeparator"
                },
                {
                    "__type": "HP.HPTRIM.ServiceModel.CommandDef, HP.HPTRIM.ServiceAPI.Model",
                    "RefreshStyle": "All",
                    "IsListCommand": false,
                    "IsNavigationCommand": true,
                    "NeedsAnObject": true,
                    "CommandId": "NavContainer",
                    "MenuEntryString": "Container Record",
                    "Tooltip": "Navigate To Container Record",
                    "StatusBarMessage": "Navigate To Container Record",
                    "Icon": "NavContainer",
                    "MenuItemType": "MenuItemCommand"
                },
                {
                    "__type": "HP.HPTRIM.ServiceModel.CommandDef, HP.HPTRIM.ServiceAPI.Model",
                    "RefreshStyle": "All",
                    "IsListCommand": false,
                    "IsNavigationCommand": true,
                    "NeedsAnObject": true,
                    "CommandId": "NavContainerExt",
                    "MenuEntryString": "Container Records (+ Alternative)",
                    "Tooltip": "Navigate To Container Records (Includes Alternative)",
                    "StatusBarMessage": "Navigate To Container Records (Includes Alternative)",
                    "Icon": "NavContainerExt",
                    "MenuItemType": "MenuItemCommand"
                },
                {
                    "__type": "HP.HPTRIM.ServiceModel.CommandDef, HP.HPTRIM.ServiceAPI.Model",
                    "RefreshStyle": "All",
                    "IsListCommand": false,
                    "IsNavigationCommand": true,
                    "NeedsAnObject": true,
                    "CommandId": "NavContentsExt",
                    "MenuEntryString": "Contained Records (+ Alternative)",
                    "Tooltip": "Navigate To Contents (includes Alternative Contents)",
                    "StatusBarMessage": "Navigate To Contents (includes Alternative Contents)",
                    "Icon": "NavContentsExt",
                    "MenuItemType": "MenuItemCommand"
                },
                {
                    "__type": "HP.HPTRIM.ServiceModel.MenuSeparator, HP.HPTRIM.ServiceAPI.Model",
                    "Icon": "Unknown",
                    "MenuItemType": "MenuItemSeparator"
                },
                {
                    "__type": "HP.HPTRIM.ServiceModel.CommandDef, HP.HPTRIM.ServiceAPI.Model",
                    "RefreshStyle": "All",
                    "IsListCommand": false,
                    "IsNavigationCommand": true,
                    "NeedsAnObject": true,
                    "CommandId": "NavSameContact",
                    "MenuEntryString": "Records With Same Contacts",
                    "Tooltip": "Navigate To Records with same Contact",
                    "StatusBarMessage": "Navigate To Records with same Contact",
                    "Icon": "NavSameContact",
                    "MenuItemType": "MenuItemCommand"
                }
            ],
            "PopupId": "RecordNavigation",
            "Icon": "Unknown",
            "MenuItemType": "MenuItemPopup"
        },
        {
            "__type": "HP.HPTRIM.ServiceModel.MenuSeparator, HP.HPTRIM.ServiceAPI.Model",
            "Icon": "Unknown",
            "MenuItemType": "MenuItemSeparator"
        },
        {
            "__type": "HP.HPTRIM.ServiceModel.CommandDef, HP.HPTRIM.ServiceAPI.Model",
            "RefreshStyle": "All",
            "IsListCommand": false,
            "IsNavigationCommand": true,
            "NeedsAnObject": true,
            "CommandId": "NavContents",
            "MenuEntryString": "Contained Records",
            "Tooltip": "Navigate To Contents",
            "StatusBarMessage": "Navigate To Contents",
            "Icon": "NavContents",
            "MenuItemType": "MenuItemCommand"
        },
        {
            "__type": "HP.HPTRIM.ServiceModel.CommandDef, HP.HPTRIM.ServiceAPI.Model",
            "RefreshStyle": "None",
            "IsListCommand": false,
            "IsNavigationCommand": false,
            "NeedsAnObject": true,
            "CommandId": "View",
            "MenuEntryString": "View",
            "Tooltip": "View Electronic",
            "StatusBarMessage": "View Electronic",
            "Icon": "Viewer",
            "MenuItemType": "MenuItemCommand"
        },
        {
            "__type": "HP.HPTRIM.ServiceModel.CommandDef, HP.HPTRIM.ServiceAPI.Model",
            "RefreshStyle": "Current",
            "IsListCommand": false,
            "IsNavigationCommand": false,
            "NeedsAnObject": true,
            "CommandId": "RecCheckOut",
            "MenuEntryString": "Check Out",
            "Tooltip": "Check Out Document",
            "StatusBarMessage": "Check Out Document",
            "Icon": "RecCheckout",
            "MenuItemType": "MenuItemCommand"
        },
        {
            "__type": "HP.HPTRIM.ServiceModel.CommandDef, HP.HPTRIM.ServiceAPI.Model",
            "RefreshStyle": "Current",
            "IsListCommand": false,
            "IsNavigationCommand": false,
            "NeedsAnObject": true,
            "CommandId": "RecCheckIn",
            "MenuEntryString": "Check In",
            "Tooltip": "Check In an Electronic Document",
            "StatusBarMessage": "Check In an Electronic Document",
            "Icon": "RecCheckin",
            "MenuItemType": "MenuItemCommand"
        },
        {
            "__type": "HP.HPTRIM.ServiceModel.CommandDef, HP.HPTRIM.ServiceAPI.Model",
            "RefreshStyle": "Current",
            "IsListCommand": false,
            "IsNavigationCommand": false,
            "NeedsAnObject": true,
            "CommandId": "RecSuperCopy",
            "MenuEntryString": "Supercopy",
            "Tooltip": "Supercopy Document",
            "StatusBarMessage": "Supercopy Document",
            "Icon": "RecSupercopy",
            "MenuItemType": "MenuItemCommand"
        },
        {
            "__type": "HP.HPTRIM.ServiceModel.MenuSeparator, HP.HPTRIM.ServiceAPI.Model",
            "Icon": "Unknown",
            "MenuItemType": "MenuItemSeparator"
        },
        {
            "__type": "HP.HPTRIM.ServiceModel.MenuPopup, HP.HPTRIM.ServiceAPI.Model",
            "ItemCount": 4,
            "MenuText": "Details",
            "Items": [
                {
                    "__type": "HP.HPTRIM.ServiceModel.CommandDef, HP.HPTRIM.ServiceAPI.Model",
                    "RefreshStyle": "Current",
                    "IsListCommand": false,
                    "IsNavigationCommand": false,
                    "NeedsAnObject": true,
                    "CommandId": "Notes",
                    "MenuEntryString": "Notes",
                    "Tooltip": "Display and/or modify Notes",
                    "StatusBarMessage": "Display and/or modify Notes",
                    "Icon": "BobNotes",
                    "MenuItemType": "MenuItemCommand"
                },
                {
                    "__type": "HP.HPTRIM.ServiceModel.CommandDef, HP.HPTRIM.ServiceAPI.Model",
                    "RefreshStyle": "Current",
                    "IsListCommand": false,
                    "IsNavigationCommand": false,
                    "NeedsAnObject": true,
                    "CommandId": "EditUserfields",
                    "MenuEntryString": "Additional Fields",
                    "Tooltip": "Additional Fields",
                    "StatusBarMessage": "Additional Fields",
                    "Icon": "Unknown",
                    "MenuItemType": "MenuItemCommand"
                },
                {
                    "__type": "HP.HPTRIM.ServiceModel.MenuSeparator, HP.HPTRIM.ServiceAPI.Model",
                    "Icon": "Unknown",
                    "MenuItemType": "MenuItemSeparator"
                },
                {
                    "__type": "HP.HPTRIM.ServiceModel.CommandDef, HP.HPTRIM.ServiceAPI.Model",
                    "RefreshStyle": "Current",
                    "IsListCommand": false,
                    "IsNavigationCommand": false,
                    "NeedsAnObject": true,
                    "CommandId": "RecRelate",
                    "MenuEntryString": "Relate",
                    "Tooltip": "Relate Records To",
                    "StatusBarMessage": "Relate Records To",
                    "Icon": "RecRelate",
                    "MenuItemType": "MenuItemCommand"
                }
            ],
            "PopupId": "RecordDetails",
            "Icon": "Unknown",
            "MenuItemType": "MenuItemPopup"
        },
        {
            "__type": "HP.HPTRIM.ServiceModel.MenuPopup, HP.HPTRIM.ServiceAPI.Model",
            "ItemCount": 2,
            "MenuText": "Security and Audit",
            "Items": [
                {
                    "__type": "HP.HPTRIM.ServiceModel.CommandDef, HP.HPTRIM.ServiceAPI.Model",
                    "RefreshStyle": "Current",
                    "IsListCommand": false,
                    "IsNavigationCommand": false,
                    "NeedsAnObject": true,
                    "CommandId": "Security",
                    "MenuEntryString": "Security/Access",
                    "Tooltip": "Update Security and Access Policy",
                    "StatusBarMessage": "Update Security and Access Policy",
                    "Icon": "Security",
                    "MenuItemType": "MenuItemCommand"
                },
                {
                    "__type": "HP.HPTRIM.ServiceModel.CommandDef, HP.HPTRIM.ServiceAPI.Model",
                    "RefreshStyle": "None",
                    "IsListCommand": false,
                    "IsNavigationCommand": true,
                    "NeedsAnObject": true,
                    "CommandId": "ShowAuditEvents",
                    "MenuEntryString": "Active Audit Events",
                    "Tooltip": "Browse Active Audit Events",
                    "StatusBarMessage": "Browse Active Audit Events",
                    "Icon": "OnlineAuditLog",
                    "MenuItemType": "MenuItemCommand"
                }
            ],
            "PopupId": "RecordSecurity",
            "Icon": "Unknown",
            "MenuItemType": "MenuItemPopup"
        },
        {
            "__type": "HP.HPTRIM.ServiceModel.MenuPopup, HP.HPTRIM.ServiceAPI.Model",
            "ItemCount": 7,
            "MenuText": "Locations",
            "Items": [
                {
                    "__type": "HP.HPTRIM.ServiceModel.CommandDef, HP.HPTRIM.ServiceAPI.Model",
                    "RefreshStyle": "CurrentAndParent",
                    "IsListCommand": false,
                    "IsNavigationCommand": false,
                    "NeedsAnObject": true,
                    "CommandId": "RecContainer",
                    "MenuEntryString": "Container",
                    "Tooltip": "Set Record Container",
                    "StatusBarMessage": "Set Record Container",
                    "Icon": "RecContainer",
                    "MenuItemType": "MenuItemCommand"
                },
                {
                    "__type": "HP.HPTRIM.ServiceModel.CommandDef, HP.HPTRIM.ServiceAPI.Model",
                    "RefreshStyle": "Current",
                    "IsListCommand": false,
                    "IsNavigationCommand": false,
                    "NeedsAnObject": true,
                    "CommandId": "RecCurrentLoc",
                    "MenuEntryString": "Assignee",
                    "Tooltip": "Set Assignee",
                    "StatusBarMessage": "Set Assignee",
                    "Icon": "ReccurrentLoc",
                    "MenuItemType": "MenuItemCommand"
                },
                {
                    "__type": "HP.HPTRIM.ServiceModel.CommandDef, HP.HPTRIM.ServiceAPI.Model",
                    "RefreshStyle": "Current",
                    "IsListCommand": false,
                    "IsNavigationCommand": false,
                    "NeedsAnObject": true,
                    "CommandId": "RecHomeLoc",
                    "MenuEntryString": "Home",
                    "Tooltip": "Set Home",
                    "StatusBarMessage": "Set Home",
                    "Icon": "Unknown",
                    "MenuItemType": "MenuItemCommand"
                },
                {
                    "__type": "HP.HPTRIM.ServiceModel.CommandDef, HP.HPTRIM.ServiceAPI.Model",
                    "RefreshStyle": "Current",
                    "IsListCommand": false,
                    "IsNavigationCommand": false,
                    "NeedsAnObject": true,
                    "CommandId": "RecOwnerLoc",
                    "MenuEntryString": "Owner",
                    "Tooltip": "Set Owner",
                    "StatusBarMessage": "Set Owner",
                    "Icon": "Unknown",
                    "MenuItemType": "MenuItemCommand"
                },
                {
                    "__type": "HP.HPTRIM.ServiceModel.CommandDef, HP.HPTRIM.ServiceAPI.Model",
                    "RefreshStyle": "Current",
                    "IsListCommand": false,
                    "IsNavigationCommand": false,
                    "NeedsAnObject": true,
                    "CommandId": "RecAddContact",
                    "MenuEntryString": "Attach Contact",
                    "Tooltip": "Attach Contact",
                    "StatusBarMessage": "Attach Contact",
                    "Icon": "RecAddContact",
                    "MenuItemType": "MenuItemCommand"
                },
                {
                    "__type": "HP.HPTRIM.ServiceModel.CommandDef, HP.HPTRIM.ServiceAPI.Model",
                    "RefreshStyle": "Current",
                    "IsListCommand": false,
                    "IsNavigationCommand": false,
                    "NeedsAnObject": true,
                    "CommandId": "RecRemoveContact",
                    "MenuEntryString": "Remove Contact",
                    "Tooltip": "Remove Contact",
                    "StatusBarMessage": "Remove Contact",
                    "Icon": "Unknown",
                    "MenuItemType": "MenuItemCommand"
                },
                {
                    "__type": "HP.HPTRIM.ServiceModel.CommandDef, HP.HPTRIM.ServiceAPI.Model",
                    "RefreshStyle": "None",
                    "IsListCommand": false,
                    "IsNavigationCommand": true,
                    "NeedsAnObject": true,
                    "CommandId": "ShowContacts",
                    "MenuEntryString": "Show Contacts",
                    "Tooltip": "Show Locations that are Contacts of the selected Records",
                    "StatusBarMessage": "Show Locations that are Contacts of the selected Records",
                    "Icon": "LocList",
                    "MenuItemType": "MenuItemCommand"
                }
            ],
            "PopupId": "RecordLocations",
            "Icon": "Unknown",
            "MenuItemType": "MenuItemPopup"
        },
        {
            "__type": "HP.HPTRIM.ServiceModel.MenuPopup, HP.HPTRIM.ServiceAPI.Model",
            "ItemCount": 3,
            "MenuText": "Requests",
            "Items": [
                {
                    "__type": "HP.HPTRIM.ServiceModel.CommandDef, HP.HPTRIM.ServiceAPI.Model",
                    "RefreshStyle": "None",
                    "IsListCommand": false,
                    "IsNavigationCommand": false,
                    "NeedsAnObject": true,
                    "CommandId": "RecAddRetrieveTemporaryRequest",
                    "MenuEntryString": "Retrieve - Temporary",
                    "Tooltip": "Create a new Retrieve - Temporary Request for the selected Record",
                    "StatusBarMessage": "Create a new Retrieve - Temporary Request for the selected Record",
                    "Icon": "RecRequest",
                    "MenuItemType": "MenuItemCommand"
                },
                {
                    "__type": "HP.HPTRIM.ServiceModel.MenuSeparator, HP.HPTRIM.ServiceAPI.Model",
                    "Icon": "Unknown",
                    "MenuItemType": "MenuItemSeparator"
                },
                {
                    "__type": "HP.HPTRIM.ServiceModel.CommandDef, HP.HPTRIM.ServiceAPI.Model",
                    "RefreshStyle": "None",
                    "IsListCommand": false,
                    "IsNavigationCommand": true,
                    "NeedsAnObject": true,
                    "CommandId": "RecShowRequests",
                    "MenuEntryString": "Show Requests",
                    "Tooltip": "Show Requests for the selected Records",
                    "StatusBarMessage": "Show Requests for the selected Records",
                    "Icon": "Unknown",
                    "MenuItemType": "MenuItemCommand"
                }
            ],
            "PopupId": "RecordRequests",
            "Icon": "Unknown",
            "MenuItemType": "MenuItemPopup"
        },
        {
            "__type": "HP.HPTRIM.ServiceModel.MenuPopup, HP.HPTRIM.ServiceAPI.Model",
            "ItemCount": 6,
            "MenuText": "Workflow",
            "Items": [
                {
                    "__type": "HP.HPTRIM.ServiceModel.CommandDef, HP.HPTRIM.ServiceAPI.Model",
                    "RefreshStyle": "None",
                    "IsListCommand": false,
                    "IsNavigationCommand": false,
                    "NeedsAnObject": true,
                    "CommandId": "RecNewWorkflow",
                    "MenuEntryString": "Initiate Workflow",
                    "Tooltip": "Initiate Workflow On Record",
                    "StatusBarMessage": "Initiate Workflow On Record",
                    "Icon": "RecNewWorkflow",
                    "MenuItemType": "MenuItemCommand"
                },
                {
                    "__type": "HP.HPTRIM.ServiceModel.CommandDef, HP.HPTRIM.ServiceAPI.Model",
                    "RefreshStyle": "Current",
                    "IsListCommand": false,
                    "IsNavigationCommand": false,
                    "NeedsAnObject": true,
                    "CommandId": "RecCompleteCurrAct",
                    "MenuEntryString": "Complete Current action",
                    "Tooltip": "Complete Current action",
                    "StatusBarMessage": "Complete Current action",
                    "Icon": "RecCompleteCurrAct",
                    "MenuItemType": "MenuItemCommand"
                },
                {
                    "__type": "HP.HPTRIM.ServiceModel.CommandDef, HP.HPTRIM.ServiceAPI.Model",
                    "RefreshStyle": "Current",
                    "IsListCommand": false,
                    "IsNavigationCommand": false,
                    "NeedsAnObject": true,
                    "CommandId": "RecAttachAction",
                    "MenuEntryString": "Action/Procedure",
                    "Tooltip": "Attach Action/Procedure",
                    "StatusBarMessage": "Attach Action/Procedure",
                    "Icon": "RecAttachAction",
                    "MenuItemType": "MenuItemCommand"
                },
                {
                    "__type": "HP.HPTRIM.ServiceModel.CommandDef, HP.HPTRIM.ServiceAPI.Model",
                    "RefreshStyle": "Current",
                    "IsListCommand": false,
                    "IsNavigationCommand": false,
                    "NeedsAnObject": true,
                    "CommandId": "RecBrowseActions",
                    "MenuEntryString": "Show Actions/Procedures",
                    "Tooltip": "Show Attached Actions/Procedures",
                    "StatusBarMessage": "Show Attached Actions/Procedures",
                    "Icon": "Unknown",
                    "MenuItemType": "MenuItemCommand"
                },
                {
                    "__type": "HP.HPTRIM.ServiceModel.CommandDef, HP.HPTRIM.ServiceAPI.Model",
                    "RefreshStyle": "None",
                    "IsListCommand": false,
                    "IsNavigationCommand": true,
                    "NeedsAnObject": true,
                    "CommandId": "ShowActivities",
                    "MenuEntryString": "Show Activities",
                    "Tooltip": "Display Associated Activities",
                    "StatusBarMessage": "Display Associated Activities",
                    "Icon": "Unknown",
                    "MenuItemType": "MenuItemCommand"
                },
                {
                    "__type": "HP.HPTRIM.ServiceModel.CommandDef, HP.HPTRIM.ServiceAPI.Model",
                    "RefreshStyle": "None",
                    "IsListCommand": false,
                    "IsNavigationCommand": true,
                    "NeedsAnObject": true,
                    "CommandId": "ShowTodoItems",
                    "MenuEntryString": "Show To Do Items",
                    "Tooltip": "Display Associated To Do Items",
                    "StatusBarMessage": "Display Associated To Do Items",
                    "Icon": "Unknown",
                    "MenuItemType": "MenuItemCommand"
                }
            ],
            "PopupId": "RecordWorkflow",
            "Icon": "Unknown",
            "MenuItemType": "MenuItemPopup"
        },
        {
            "__type": "HP.HPTRIM.ServiceModel.MenuPopup, HP.HPTRIM.ServiceAPI.Model",
            "ItemCount": 2,
            "MenuText": "Electronic",
            "Items": [
                {
                    "__type": "HP.HPTRIM.ServiceModel.CommandDef, HP.HPTRIM.ServiceAPI.Model",
                    "RefreshStyle": "Current",
                    "IsListCommand": false,
                    "IsNavigationCommand": false,
                    "NeedsAnObject": true,
                    "CommandId": "RecDocFinal",
                    "MenuEntryString": "Final",
                    "Tooltip": "Make Final",
                    "StatusBarMessage": "Make Final",
                    "Icon": "RecDocFinal",
                    "MenuItemType": "MenuItemCommand"
                },
                {
                    "__type": "HP.HPTRIM.ServiceModel.CommandDef, HP.HPTRIM.ServiceAPI.Model",
                    "RefreshStyle": "None",
                    "IsListCommand": false,
                    "IsNavigationCommand": false,
                    "NeedsAnObject": true,
                    "CommandId": "RequestRendition",
                    "MenuEntryString": "Request Rendition",
                    "Tooltip": "Request the automatic rendering engine to create a new rendition",
                    "StatusBarMessage": "Request the automatic rendering engine to create a new rendition",
                    "Icon": "RequestRendition",
                    "MenuItemType": "MenuItemCommand"
                }
            ],
            "PopupId": "RecordElectronic",
            "Icon": "Unknown",
            "MenuItemType": "MenuItemPopup"
        },
        {
            "__type": "HP.HPTRIM.ServiceModel.MenuPopup, HP.HPTRIM.ServiceAPI.Model",
            "ItemCount": 1,
            "MenuText": "Archiving",
            "Items": [
                {
                    "__type": "HP.HPTRIM.ServiceModel.CommandDef, HP.HPTRIM.ServiceAPI.Model",
                    "RefreshStyle": "Current",
                    "IsListCommand": false,
                    "IsNavigationCommand": false,
                    "NeedsAnObject": true,
                    "CommandId": "RecMakeInactive",
                    "MenuEntryString": "Make Inactive",
                    "Tooltip": "Make Record Inactive",
                    "StatusBarMessage": "Make Record Inactive",
                    "Icon": "Unknown",
                    "MenuItemType": "MenuItemCommand"
                }
            ],
            "PopupId": "RecordArchiving",
            "Icon": "Unknown",
            "MenuItemType": "MenuItemPopup"
        },
        {
            "__type": "HP.HPTRIM.ServiceModel.MenuPopup, HP.HPTRIM.ServiceAPI.Model",
            "ItemCount": 5,
            "MenuText": "Se&nd To",
            "Items": [
                {
                    "__type": "HP.HPTRIM.ServiceModel.CommandDef, HP.HPTRIM.ServiceAPI.Model",
                    "RefreshStyle": "None",
                    "IsListCommand": false,
                    "IsNavigationCommand": false,
                    "NeedsAnObject": true,
                    "CommandId": "AddToFavorites",
                    "MenuEntryString": "Favorites",
                    "Tooltip": "Add To Favorites",
                    "StatusBarMessage": "Add To Favorites",
                    "Icon": "AddToFavorites",
                    "MenuItemType": "MenuItemCommand"
                },
                {
                    "__type": "HP.HPTRIM.ServiceModel.CommandDef, HP.HPTRIM.ServiceAPI.Model",
                    "RefreshStyle": "None",
                    "IsListCommand": false,
                    "IsNavigationCommand": false,
                    "NeedsAnObject": true,
                    "CommandId": "AddRecentDoc",
                    "MenuEntryString": "Add To Recent Documents",
                    "Tooltip": "Add Record to Recent Documents",
                    "StatusBarMessage": "Add Record to Recent Documents",
                    "Icon": "AddToRecentDocuments",
                    "MenuItemType": "MenuItemCommand"
                },
                {
                    "__type": "HP.HPTRIM.ServiceModel.CommandDef, HP.HPTRIM.ServiceAPI.Model",
                    "RefreshStyle": "None",
                    "IsListCommand": false,
                    "IsNavigationCommand": false,
                    "NeedsAnObject": true,
                    "CommandId": "AddRecentFolder",
                    "MenuEntryString": "Add To Containers",
                    "Tooltip": "Add Record to Containers",
                    "StatusBarMessage": "Add Record to Containers",
                    "Icon": "AddToRecentContainers",
                    "MenuItemType": "MenuItemCommand"
                },
                {
                    "__type": "HP.HPTRIM.ServiceModel.CommandDef, HP.HPTRIM.ServiceAPI.Model",
                    "RefreshStyle": "None",
                    "IsListCommand": false,
                    "IsNavigationCommand": false,
                    "NeedsAnObject": true,
                    "CommandId": "AddToWorktray",
                    "MenuEntryString": "Add To Records Work Tray",
                    "Tooltip": "Add Records to the Records Work Tray",
                    "StatusBarMessage": "Add Records to the Records Work Tray",
                    "Icon": "AddToWorkTray",
                    "MenuItemType": "MenuItemCommand"
                },
                {
                    "__type": "HP.HPTRIM.ServiceModel.CommandDef, HP.HPTRIM.ServiceAPI.Model",
                    "RefreshStyle": "None",
                    "IsListCommand": false,
                    "IsNavigationCommand": false,
                    "NeedsAnObject": true,
                    "CommandId": "AddToUserLabel",
                    "MenuEntryString": "Add To User Label",
                    "Tooltip": "Add To User Label",
                    "StatusBarMessage": "Add To User Label",
                    "Icon": "Unknown",
                    "MenuItemType": "MenuItemCommand"
                }
            ],
            "PopupId": "RecordSendTo",
            "Icon": "Unknown",
            "MenuItemType": "MenuItemPopup"
        },
        {
            "__type": "HP.HPTRIM.ServiceModel.MenuPopup, HP.HPTRIM.ServiceAPI.Model",
            "ItemCount": 5,
            "MenuText": "Remove From",
            "Items": [
                {
                    "__type": "HP.HPTRIM.ServiceModel.CommandDef, HP.HPTRIM.ServiceAPI.Model",
                    "RefreshStyle": "None",
                    "IsListCommand": false,
                    "IsNavigationCommand": false,
                    "NeedsAnObject": true,
                    "CommandId": "RemoveFromFavorites",
                    "MenuEntryString": "Remove from Favorites",
                    "Tooltip": "Remove from Favorites",
                    "StatusBarMessage": "Remove from Favorites",
                    "Icon": "Unknown",
                    "MenuItemType": "MenuItemCommand"
                },
                {
                    "__type": "HP.HPTRIM.ServiceModel.CommandDef, HP.HPTRIM.ServiceAPI.Model",
                    "RefreshStyle": "None",
                    "IsListCommand": false,
                    "IsNavigationCommand": false,
                    "NeedsAnObject": true,
                    "CommandId": "RemoveRecentDoc",
                    "MenuEntryString": "Remove Record from Recent Documents",
                    "Tooltip": "Remove Record from Recent Documents",
                    "StatusBarMessage": "Remove Record from Recent Documents",
                    "Icon": "Unknown",
                    "MenuItemType": "MenuItemCommand"
                },
                {
                    "__type": "HP.HPTRIM.ServiceModel.CommandDef, HP.HPTRIM.ServiceAPI.Model",
                    "RefreshStyle": "None",
                    "IsListCommand": false,
                    "IsNavigationCommand": false,
                    "NeedsAnObject": true,
                    "CommandId": "RemoveRecentFolder",
                    "MenuEntryString": "Remove Record from Containers",
                    "Tooltip": "Remove Record from Containers",
                    "StatusBarMessage": "Remove Record from Containers",
                    "Icon": "Unknown",
                    "MenuItemType": "MenuItemCommand"
                },
                {
                    "__type": "HP.HPTRIM.ServiceModel.CommandDef, HP.HPTRIM.ServiceAPI.Model",
                    "RefreshStyle": "None",
                    "IsListCommand": false,
                    "IsNavigationCommand": false,
                    "NeedsAnObject": true,
                    "CommandId": "RemoveFromWorktray",
                    "MenuEntryString": "Remove Record from Records Work Tray",
                    "Tooltip": "Remove Record from Records Work Tray",
                    "StatusBarMessage": "Remove Record from Records Work Tray",
                    "Icon": "Unknown",
                    "MenuItemType": "MenuItemCommand"
                },
                {
                    "__type": "HP.HPTRIM.ServiceModel.CommandDef, HP.HPTRIM.ServiceAPI.Model",
                    "RefreshStyle": "None",
                    "IsListCommand": false,
                    "IsNavigationCommand": false,
                    "NeedsAnObject": true,
                    "CommandId": "RemoveFromUserLabel",
                    "MenuEntryString": "Remove from User Label",
                    "Tooltip": "Remove from User Label",
                    "StatusBarMessage": "Remove from User Label",
                    "Icon": "Unknown",
                    "MenuItemType": "MenuItemCommand"
                }
            ],
            "PopupId": "RecordRemoveFrom",
            "Icon": "Unknown",
            "MenuItemType": "MenuItemPopup"
        },
        {
            "__type": "HP.HPTRIM.ServiceModel.MenuSeparator, HP.HPTRIM.ServiceAPI.Model",
            "Icon": "Unknown",
            "MenuItemType": "MenuItemSeparator"
        },
        {
            "__type": "HP.HPTRIM.ServiceModel.CommandDef, HP.HPTRIM.ServiceAPI.Model",
            "RefreshStyle": "CurrentAndParent",
            "IsListCommand": false,
            "IsNavigationCommand": false,
            "NeedsAnObject": true,
            "CommandId": "Properties",
            "MenuEntryString": "Properties",
            "Tooltip": "Display Properties",
            "StatusBarMessage": "Display Properties",
            "Icon": "Properties",
            "MenuItemType": "MenuItemCommand"
        }
    ]
};
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Menu;
            (function (Menu) {
                var MenuSeparator = (function (_super) {
                    __extends(MenuSeparator, _super);
                    function MenuSeparator() {
                        _super.call(this, "templates/MainObject/MenuSeparator", true);
                        this.isAdded = ko.observable(false);
                    }
                    return MenuSeparator;
                }(HP.HPTRIM.Framework.Components.Layouts.Panel));
                Menu.MenuSeparator = MenuSeparator;
            })(Menu = App.Menu || (App.Menu = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var FlattenMenu = {
    Record: {}
};
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Menu;
            (function (Menu) {
                var MenuItemTypes = {
                    MenuItemCommand: 'MenuItemCommand',
                    MenuItemPopup: "MenuItemPopup",
                    MenuItemSeparator: "MenuItemSeparator"
                };
                (function (MenuPurpose) {
                    MenuPurpose[MenuPurpose["ForTaskExecution"] = 0] = "ForTaskExecution";
                    MenuPurpose[MenuPurpose["ForAddRemoveQuickAccess"] = 1] = "ForAddRemoveQuickAccess";
                })(Menu.MenuPurpose || (Menu.MenuPurpose = {}));
                var MenuPurpose = Menu.MenuPurpose;
                var MenuGroupConverter = (function () {
                    function MenuGroupConverter(objectMenu, enabledCommandIds, commandHandlers, menuPurpose) {
                        this.menuPurpose = MenuPurpose.ForTaskExecution;
                        this.objectMenu = objectMenu;
                        this.actionHandlers = commandHandlers;
                        this.menuPurpose = menuPurpose;
                    }
                    MenuGroupConverter.prototype.makeMenuFromJson = function (paramaObjectMenu) {
                        var objectMenu = this.objectMenu;
                        if (paramaObjectMenu) {
                            objectMenu = paramaObjectMenu;
                        }
                        var menuItemPopup = new Menu.MenuItemPopup();
                        for (var i in objectMenu) {
                            var item = objectMenu[i];
                            var itemType = item.MenuItemType;
                            if (itemType == MenuItemTypes.MenuItemPopup) {
                                if (item.ItemCount == 0) {
                                    continue;
                                }
                                var menuGroup = this.makeGroup(item);
                                menuItemPopup.items.push(menuGroup);
                            }
                            else if (itemType == MenuItemTypes.MenuItemCommand) {
                                var menuItemCommand = this.makeCommand(item);
                                menuItemPopup.items.push(menuItemCommand);
                                FlattenMenu.Record[menuItemCommand.CommandId] = menuItemCommand;
                            }
                            else if (itemType == MenuItemTypes.MenuItemSeparator) {
                                var sep = this.makeSeparator();
                                menuItemPopup.items.push(sep);
                            }
                        }
                        return menuItemPopup;
                    };
                    MenuGroupConverter.prototype.makeGroup = function (item) {
                        var menuGroup = this.makeMenuFromJson(item.Items);
                        menuGroup.menuText = item.MenuText;
                        if (this.menuPurpose == MenuPurpose.ForAddRemoveQuickAccess) {
                            if (this.actionHandlers) {
                                if (this.actionHandlers['AddRemoveCommand']) {
                                    menuGroup.onclick = this.actionHandlers['AddRemoveCommand'];
                                }
                            }
                        }
                        return menuGroup;
                    };
                    MenuGroupConverter.prototype.makeCommand = function (item) {
                        var menuItem = new Menu.MenuItem();
                        menuItem.iconClass = ' ' + item.Icon.toLowerCase() + "_x16";
                        menuItem.onclick = function () {
                            alert(item.MenuEntryString + " - Not Implemented");
                        };
                        if (this.menuPurpose == MenuPurpose.ForTaskExecution) {
                            if (this.actionHandlers) {
                                if (this.actionHandlers[item.CommandId]) {
                                    menuItem.onclick = this.actionHandlers[item.CommandId];
                                }
                            }
                        }
                        if (this.menuPurpose == MenuPurpose.ForAddRemoveQuickAccess) {
                            if (this.actionHandlers) {
                                if (this.actionHandlers['AddRemoveCommand']) {
                                    menuItem.onclick = this.actionHandlers['AddRemoveCommand'];
                                }
                            }
                        }
                        menuItem = _.extend(menuItem, item);
                        return menuItem;
                    };
                    MenuGroupConverter.prototype.makeSeparator = function () {
                        var menuItem = new Menu.MenuSeparator();
                        return menuItem;
                    };
                    return MenuGroupConverter;
                }());
                Menu.MenuGroupConverter = MenuGroupConverter;
            })(Menu = App.Menu || (App.Menu = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Menu;
            (function (Menu) {
                var MenuItem = (function (_super) {
                    __extends(MenuItem, _super);
                    function MenuItem() {
                        _super.call(this, "templates/MainObject/MenuItem", true);
                        this.isAdded = ko.observable(false);
                    }
                    return MenuItem;
                }(HP.HPTRIM.Framework.Components.Layouts.Panel));
                Menu.MenuItem = MenuItem;
            })(Menu = App.Menu || (App.Menu = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Menu;
            (function (Menu) {
                var ObjectMenu = (function (_super) {
                    __extends(ObjectMenu, _super);
                    function ObjectMenu(forTrimObject, enabledCommandIds, actionHandlers) {
                        _super.call(this, 'templates/MainObject/ObjectMenu', true);
                        this.trimObject = forTrimObject;
                        this.menuPopup = new Menu.ObjectMenuPopup(g_recObjectMenu.ObjectMenus, enabledCommandIds, actionHandlers);
                        this.quickObjectMenu = new Menu.KwikObjectMenu(enabledCommandIds, actionHandlers);
                    }
                    return ObjectMenu;
                }(HP.HPTRIM.Framework.Components.Layouts.Panel));
                Menu.ObjectMenu = ObjectMenu;
            })(Menu = App.Menu || (App.Menu = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Menu;
            (function (Menu) {
                var ObjectMenuPopup = (function (_super) {
                    __extends(ObjectMenuPopup, _super);
                    function ObjectMenuPopup(objectMenu, enabledCommandIds, actionHandlers) {
                        _super.call(this, "templates/MainObject/ObjectMenuPopup", true);
                        this.initialized = false;
                        this.menuView = ko.observable(Menu.MenuView.Popup);
                        this.enabledCommandIds = [];
                        this.commandHandlers = null;
                        this.commandHandlers = actionHandlers;
                        this.configureMenuFinder();
                        this.configureMenuPopup(objectMenu);
                    }
                    ObjectMenuPopup.prototype.initMenu = function () {
                        if (this.initialized == false) {
                            $("#menu-popup").menu();
                            this.initialized = true;
                        }
                    };
                    ObjectMenuPopup.prototype.customizeActions = function () {
                        ko.postbox.publish("ShowCommandsCustomization");
                    };
                    ObjectMenuPopup.prototype.configureMenuPopup = function (objectMenu) {
                        var converter = new Menu.MenuGroupConverter(g_recObjectMenu.ObjectMenus, null, this.commandHandlers);
                        var menu = converter.makeMenuFromJson();
                        this.menu = menu;
                    };
                    ObjectMenuPopup.prototype.configureMenuFinder = function () {
                        var _this = this;
                        var option = {
                            Caption: "",
                            Value: ko.observable(""),
                            CharacterLimit: 100,
                            ToolTip: HP.HPTRIM.Messages.web_searchSelectMethod
                        };
                        this.txtMenuSearch = new HP.HPTRIM.Form.StringDecorator(option, "templates/Field/SearchTextBox");
                        this.txtMenuSearch.Value.subscribe(function (newValue) {
                            if (newValue.trim() == '') {
                                _this.menuView(Menu.MenuView.Popup);
                                _this.unsetCommandFilter();
                                $("#menu-popup").menu();
                                return;
                            }
                            if (newValue.length >= 3) {
                                _this.menuView(Menu.MenuView.Flat);
                                _this.setCommandFilter(newValue);
                                $("#menu-popup-flat").menu();
                            }
                        });
                    };
                    ObjectMenuPopup.prototype.setCommandFilter = function (menuText) {
                        var toMatch = menuText.toLowerCase();
                        for (var i in FlattenMenu.Record) {
                            var item = FlattenMenu.Record[i];
                            if (!item) {
                                continue;
                            }
                            var itemMenuText = item.MenuEntryString.toLowerCase();
                            var statusBarMessage = item.StatusBarMessage.toLowerCase();
                            if (menuText == '') {
                                item.visible(true);
                                return;
                            }
                            if (itemMenuText.indexOf(toMatch) > -1 ||
                                statusBarMessage.indexOf(toMatch) > -1) {
                                item.visible(true);
                            }
                            else {
                                item.visible(false);
                            }
                        }
                        ;
                    };
                    ObjectMenuPopup.prototype.unsetCommandFilter = function () {
                        this.setCommandFilter('');
                    };
                    return ObjectMenuPopup;
                }(HP.HPTRIM.Framework.Components.Layouts.Panel));
                Menu.ObjectMenuPopup = ObjectMenuPopup;
            })(Menu = App.Menu || (App.Menu = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Panels;
            (function (Panels) {
                var SearchEditor;
                (function (SearchEditor) {
                    var Mixins;
                    (function (Mixins) {
                        var ReceiveBobChangeNotificationMixin = (function () {
                            function ReceiveBobChangeNotificationMixin() {
                            }
                            ReceiveBobChangeNotificationMixin.prototype.setUpOnBobTypeChanged = function () {
                                var _this = this;
                                ReceiveBobChangeNotificationMixin.s_app.trimGlobalSearchPanel.selectedType.subscribe(function (newValue) {
                                    _this.onBobTypeChanged(newValue);
                                });
                            };
                            ReceiveBobChangeNotificationMixin.prototype.onBobTypeChanged = function (bobType) {
                                this.bobType = bobType;
                            };
                            return ReceiveBobChangeNotificationMixin;
                        }());
                        Mixins.ReceiveBobChangeNotificationMixin = ReceiveBobChangeNotificationMixin;
                    })(Mixins = SearchEditor.Mixins || (SearchEditor.Mixins = {}));
                })(SearchEditor = Panels.SearchEditor || (Panels.SearchEditor = {}));
            })(Panels = App.Panels || (App.Panels = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Panels;
            (function (Panels) {
                var SearchEditor;
                (function (SearchEditor) {
                    "use strict";
                    var SearchBuilderPart = (function () {
                        function SearchBuilderPart(clause) {
                            var _this = this;
                            this.isGroup = ko.observable(false);
                            this.searchBuilderPartList = ko.observableArray([]);
                            this.parent = null;
                            this.isOperator = ko.observable(false);
                            this.operatorType = "";
                            this.operatorCaption = ko.observable("");
                            this.isClause = ko.observable(false);
                            this.isNegated = ko.observable(false);
                            this.clauseCaption = "";
                            this.tooltip = "";
                            this.isRawString = ko.observable(false);
                            this.rawValue = ko.observable("");
                            this.hasStringValue = ko.observable(false);
                            this.stringValue = ko.observable("");
                            this.groupWords = ko.observable(false);
                            this.hasObjectValue = ko.observable(false);
                            this.objectValue = ko.observable(null);
                            this.hasQueryValue = ko.observable(false);
                            this.queryValue = ko.observable("");
                            this.isRecursive = ko.observable(false);
                            this.clauseValueAsString = ko.observable("");
                            this.selected = ko.observable(false);
                            this.selectCallback = function (item) { };
                            this.unselectCallback = function (item, rebuildQuery) { };
                            this.remove = function (item) { };
                            this.enterRemove = function () { return _this.koRemove; };
                            var me = this;
                            if (clause) {
                                this.clause = clause;
                                this.isClause(true);
                                this.clauseCaption = clause.Caption;
                                this.tooltip = clause.ToolTip;
                                if (clause.ParameterFormat != "Boolean") {
                                    this.hasStringValue(true);
                                }
                            }
                            this.toggleSelect = function (doNotRebuild) {
                                if (me.selected()) {
                                    me.selected(false);
                                    me.unselectCallback(me, !doNotRebuild);
                                }
                                else {
                                    me.selected(true);
                                    me.selectCallback(me);
                                }
                            };
                        }
                        SearchBuilderPart.prototype.koRemove = function () { this.remove(this); };
                        ;
                        SearchBuilderPart.prototype.makeAnd = function () {
                            this.operatorType = "and";
                            this.operatorCaption(HPTRIM.Messages.web_searchAnd);
                            this.selected(false);
                        };
                        SearchBuilderPart.prototype.makeOr = function () {
                            this.operatorType = "or";
                            this.operatorCaption(HPTRIM.Messages.web_searchOr);
                            this.selected(false);
                        };
                        SearchBuilderPart.prototype.getFriendlyString = function () {
                            var query = "";
                            if (this.isOperator()) {
                                return this.operatorCaption();
                            }
                            var notPrefix = this.isNegated() ? HPTRIM.Messages.web_Not + ' ' : '';
                            if (this.isGroup()) {
                                query = query + notPrefix;
                                query = query + '(';
                                _.forEach(this.searchBuilderPartList(), function (part) {
                                    query = query + part.getFriendlyString() + " ";
                                });
                                query = query.trim();
                                query = query + ') ';
                                return query;
                            }
                            if (this.hasQueryValue()) {
                                query = notPrefix + this.clauseCaption + '[' + this.queryValue() + ']';
                            }
                            else if (this.hasObjectValue() && this.objectValue()) {
                                query = notPrefix + this.clauseCaption + ':' + this.stringValue() + " (" + this.objectValue().Uri + ")";
                            }
                            else if (this.hasStringValue()) {
                                var stringValue = this.stringValue();
                                if (this.clause.Id == "RecordContent") {
                                    if (this.groupWords() && stringValue.indexOf(' ') != -1) {
                                        stringValue = "\"\\\"" + stringValue + "\\\"\"";
                                    }
                                    else {
                                        stringValue = "\"" + stringValue + "\"";
                                    }
                                }
                                else {
                                    if (this.groupWords()) {
                                        stringValue = "\"" + stringValue + "\"";
                                    }
                                }
                                query = notPrefix + this.clause.Name + ':' + stringValue + '';
                            }
                            else if (this.isClause()) {
                                query = notPrefix + this.clause.Name;
                            }
                            else if (this.isRawString()) {
                                query = this.rawValue();
                            }
                            return query;
                        };
                        SearchBuilderPart.prototype.getSearchAsString = function () {
                            var notPrefix = this.isNegated() ? HPTRIM.Messages.web_Not + ' ' : '';
                            var query = "";
                            if (this.isGroup()) {
                                query = query + notPrefix;
                                query = query + ' ( ';
                                _.forEach(this.searchBuilderPartList(), function (part) {
                                    query = query + " " + part.getSearchAsString() + " ";
                                });
                                query = query + ' ) ';
                            }
                            if (this.isOperator()) {
                                query = " " + this.operatorCaption() + " ";
                            }
                            if (this.hasQueryValue()) {
                                query = notPrefix + this.clause.Name + '[' + this.queryValue() + ']';
                            }
                            else if (this.hasObjectValue() && this.objectValue()) {
                                query = notPrefix + this.clause.Name + ':' + this.objectValue().Uri;
                            }
                            else if (this.hasStringValue()) {
                                var stringValue = this.stringValue();
                                if (this.clause.Id == "RecordContent") {
                                    if (this.groupWords() && stringValue.indexOf(' ') != -1) {
                                        stringValue = "\"\\\"" + stringValue + "\\\"\"";
                                    }
                                    else {
                                        stringValue = "\"" + stringValue + "\"";
                                    }
                                }
                                else {
                                    if (this.groupWords()) {
                                        stringValue = "\"" + stringValue + "\"";
                                    }
                                }
                                query = notPrefix + this.clause.Name + ':' + stringValue + '';
                            }
                            else if (this.isClause()) {
                                query = notPrefix + this.clause.Name;
                            }
                            else if (this.isRawString()) {
                                query = this.rawValue();
                            }
                            if (this.isRecursive()) {
                                query = query + '+';
                            }
                            query = query.replace(/  +/g, ' ');
                            return query;
                        };
                        return SearchBuilderPart;
                    }());
                    SearchEditor.SearchBuilderPart = SearchBuilderPart;
                })(SearchEditor = Panels.SearchEditor || (Panels.SearchEditor = {}));
            })(Panels = App.Panels || (App.Panels = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Panels;
            (function (Panels) {
                var SearchEditor;
                (function (SearchEditor) {
                    "use strict";
                    var SearchBuilderPanel = (function (_super) {
                        __extends(SearchBuilderPanel, _super);
                        function SearchBuilderPanel(trimClient) {
                            var _this = this;
                            _super.call(this, "templates/Search/SearchBuilderPanel");
                            this.title = ko.observable(HPTRIM.Messages.web_searchBuildQuery);
                            this.submitCaption = ko.observable(HPTRIM.Messages.web_search);
                            this.baseObjectType = ko.observable(HPTRIM.BaseObjectTypes.Record);
                            this.searchBuilderPartList = ko.observableArray([]);
                            this.filterString = "";
                            this.currentClause = ko.observable(null);
                            this.showClauseHelp = ko.observable(false);
                            this.showParamaterHelp = ko.observable(false);
                            this.partSelected = ko.observable(false);
                            this.showUpdateButton = ko.observable(false);
                            this.negatePart = ko.observable(false);
                            this.openOperators = ko.observableArray([]);
                            this.showingField = ko.observable(false);
                            this.currentField = ko.observable(null);
                            this.currentFieldIsDate = ko.observable(false);
                            this.fieldSubscription = null;
                            this.showGroupWordsCheckbox = ko.observable(false);
                            this.groupWords = ko.observable(false);
                            this.groupWordsSubscription = null;
                            this.showRawField = ko.observable(false);
                            this.rawField = ko.observable(null);
                            this.rawFieldSubscription = null;
                            this.showingObjectControls = ko.observable(false);
                            this.itemMethod = { value: 0, text: HPTRIM.Messages.web_searchSelectSingleItem };
                            this.subSearchMethod = { value: 1, text: HPTRIM.Messages.web_searchSelectItemFromSearch };
                            this.inputMethods = ko.observableArray([this.itemMethod, this.subSearchMethod]);
                            this.selectedMethod = ko.observable(this.itemMethod);
                            this.selectedMethodValue = ko.observable(this.itemMethod.value);
                            this.currentItemPicker = ko.observable(null);
                            this.itemPickerSubscription = null;
                            this.subQuerySubscription = null;
                            this.showingLookupSet = ko.observable(false);
                            this.currentLookupSetField = ko.observable(null);
                            this.showIsRecursive = ko.observable(false);
                            this.isRecursive = ko.observable(false);
                            this.isRecursiveSubscription = null;
                            this.groupSelected = ko.observable(false);
                            this.negateGroup = ko.observable(false);
                            this.buildingGroup = ko.observable(false);
                            this.buildGroupEnabled = ko.observable(false);
                            this.buildingGroupList = ko.observableArray([]);
                            this.errorVisible = ko.observable(false);
                            this.errorMessage = ko.observable("");
                            this.trimClient = trimClient;
                            var me = this;
                            this.negateCheckbox = HPTRIM.Utils.Form.initialiseTickCheckBox(this.negatePart, HPTRIM.Messages.web_Not);
                            this.negateGroupCheckbox = HPTRIM.Utils.Form.initialiseTickCheckBox(this.negateGroup, HPTRIM.Messages.web_Not);
                            this.recursiveCheckbox = HPTRIM.Utils.Form.initialiseCheckBox(this.isRecursive, HPTRIM.Messages.web_searchRecursive);
                            this.groupWordsCheckbox = HPTRIM.Utils.Form.initialiseCheckBox(this.groupWords, HPTRIM.Messages.web_groupWordForSearchClause);
                            var subQueryPageItem = {
                                Caption: HPTRIM.Messages.web_searchSubSearchLabel,
                                Format: "String",
                                Name: "",
                                Value: ko.observable(""),
                            };
                            this.subQueryDecorator = new HP.HPTRIM.Form.StringDecorator(subQueryPageItem);
                            this.baseObjectType.subscribe(function (newValue) {
                                me.clear();
                            });
                            this.canBuildGroup = ko.computed(function () {
                                if (me.searchBuilderPartList().length == 0) {
                                    return false;
                                }
                                ;
                                if (me.searchBuilderPartList().length > 1) {
                                    return true;
                                }
                                var isAGroupWithElements = function (part) {
                                    if (part.searchBuilderPartList().length == 0) {
                                        return false;
                                    }
                                    else if (part.searchBuilderPartList().length > 1) {
                                        return true;
                                    }
                                    else {
                                        return (isAGroupWithElements(part.searchBuilderPartList()[0]));
                                    }
                                };
                                return isAGroupWithElements(me.searchBuilderPartList()[0]);
                            });
                            this.negateGroup.subscribe(function (newValue) {
                                if (me.currentPart) {
                                    if (me.currentPart.isGroup()) {
                                        me.currentPart.isNegated(newValue);
                                    }
                                }
                            });
                            this.negatePart.subscribe(function (newValue) {
                                if (me.currentPart) {
                                    if (me.currentPart.isClause()) {
                                        me.currentPart.isNegated(newValue);
                                    }
                                }
                            });
                            this.selectPart = function (part) {
                                _this.closeOperators();
                                if (me.buildingGroup()) {
                                    me.addToGroupSelection(part);
                                    return;
                                }
                                me.doPartSelection(part);
                            };
                            this.unselectPart = function (part, rebuild) {
                                if (_this.buildingGroup()) {
                                    var currentGroupList = _this.buildingGroupList();
                                    _this.buildingGroupList(_.without(currentGroupList, part));
                                    _this.buildGroupEnabled(false);
                                }
                                else {
                                    _this.showUpdateButton(false);
                                    _this.groupSelected(false);
                                    _this.partSelected(false);
                                    part.selected(false);
                                    _this.currentPart = undefined;
                                    _this.hideAndResetMethodControls();
                                    if (part.isRawString() && rebuild) {
                                        var query = _this.getQuery();
                                        _this.setQuery(query);
                                    }
                                }
                            };
                            this.removePart = function (part) {
                                if (me.buildingGroup()) {
                                    var currentGroupList = me.buildingGroupList();
                                    var newGroupList = _.filter(currentGroupList, function (groupPart) { return groupPart != part; });
                                    me.buildingGroupList(newGroupList);
                                }
                                if (me.currentPart == part) {
                                    var doNotRebuild = true;
                                    me.currentPart.toggleSelect(doNotRebuild);
                                }
                                var owningGroupPart = null;
                                var findPartsList = function (part, partsList) {
                                    var searchBuilderPartList = [];
                                    if (_.contains(partsList, part)) {
                                        return partsList;
                                    }
                                    for (var i = 0; i < partsList.length; i++) {
                                        var targetPart = partsList[i];
                                        if (targetPart.isGroup()) {
                                            var groupPartList = findPartsList(part, targetPart.searchBuilderPartList());
                                            if (groupPartList.length > 0) {
                                                if (owningGroupPart == null) {
                                                    owningGroupPart = targetPart;
                                                }
                                                return groupPartList;
                                            }
                                        }
                                    }
                                    ;
                                    return searchBuilderPartList;
                                };
                                var partsList = findPartsList(part, me.searchBuilderPartList());
                                if (partsList.length == 0) {
                                }
                                if (part.isGroup()) {
                                    var index = _.indexOf(partsList, part);
                                    if (part.searchBuilderPartList().length == 0) {
                                        if (index > 0) {
                                            var possibleOperatorPart = partsList[index - 1];
                                            if (possibleOperatorPart.isOperator()) {
                                                partsList = _.without(partsList, possibleOperatorPart);
                                            }
                                        }
                                        partsList = _.without(partsList, part);
                                    }
                                    else {
                                        if (index > 0) {
                                            var possibleOperatorPart = partsList[index - 1];
                                            if (possibleOperatorPart.isOperator()) {
                                                part.searchBuilderPartList()[0].previousOperatorPart = possibleOperatorPart;
                                            }
                                        }
                                        var arg = [index, 1].concat(part.searchBuilderPartList());
                                        partsList.splice.apply(partsList, arg);
                                    }
                                    me.updatePartList(partsList, owningGroupPart);
                                }
                                else {
                                    if (part.previousOperatorPart) {
                                        partsList = _.without(partsList, part.previousOperatorPart);
                                    }
                                    partsList = _.without(partsList, part);
                                    if (partsList[0]) {
                                        if (partsList[0].isOperator()) {
                                            if (partsList.length > 0) {
                                                if (partsList[1].previousOperatorPart) {
                                                    partsList[1].previousOperatorPart = null;
                                                }
                                            }
                                            partsList = _.without(partsList, partsList[0]);
                                        }
                                    }
                                    if (partsList.length > 0) {
                                        var lastPart = partsList[partsList.length - 1];
                                        if (lastPart.isOperator()) {
                                            partsList = partsList.slice(0, partsList.length - 1);
                                        }
                                    }
                                    me.updatePartList(partsList, owningGroupPart);
                                }
                            };
                        }
                        SearchBuilderPanel.prototype.showError = function (error) {
                            this.errorVisible(error.length != 0);
                            this.errorMessage(error);
                            var me = this;
                        };
                        ;
                        SearchBuilderPanel.prototype.clear = function () {
                            this.closeOperators();
                            this.hideAndResetMethodControls();
                            this.searchBuilderPartList([]);
                        };
                        SearchBuilderPanel.prototype.closeOperators = function () {
                            _.each(this.openOperators(), function (operator) {
                                operator.selected(false);
                            });
                            this.openOperators([]);
                        };
                        SearchBuilderPanel.prototype.getQuery = function () {
                            var query = "";
                            _.each(this.searchBuilderPartList(), function (item) {
                                if (query) {
                                    query = query + " ";
                                }
                                query = query + item.getSearchAsString();
                            });
                            query = query.replace(/\) /g, ")").replace(/ \(/g, "(");
                            query = query.replace(/ \)/g, ")").replace(/\( /g, "(");
                            return query;
                        };
                        SearchBuilderPanel.prototype.editSubQueryClick = function () {
                            var me = this;
                            if (this.currentClause()) {
                                var bobType = HPTRIM.Utils.TrimHelper.toBaseObjectType(this.currentClause().ObjectTypeParameter);
                                if (bobType) {
                                    var queryString = this.subQueryDecorator.Value();
                                    var title = HPTRIM.Messages.web_search + ": " + this.currentClause().Caption + " (" + bobType.Caption + ")";
                                    this.editSubQuery(bobType, queryString, undefined, title, function (query) {
                                        me.subQueryDecorator.Value(query);
                                        if (me.currentPart) {
                                            me.currentPart.hasQueryValue(true);
                                            me.currentPart.hasObjectValue(true);
                                            me.currentPart.queryValue(query);
                                            me.currentPart.stringValue('[' + query + ']');
                                        }
                                        else {
                                            me.addNewPart(true);
                                        }
                                    });
                                }
                                var childType = HPTRIM.Utils.TrimHelper.toChildObjectType(this.currentClause().ObjectTypeParameter);
                                if (childType) {
                                    var queryString = this.subQueryDecorator.Value();
                                    var title = HPTRIM.Messages.web_search + ": " + this.currentClause().Caption + " (" + childType.Caption + ")";
                                    this.editSubQuery(childType, queryString, undefined, title, function (query) {
                                        me.subQueryDecorator.Value(query);
                                        if (me.currentPart) {
                                            me.currentPart.hasQueryValue(true);
                                            me.currentPart.hasObjectValue(true);
                                            me.currentPart.queryValue(query);
                                            me.currentPart.stringValue('[' + query + ']');
                                        }
                                        else {
                                            me.addNewPart(true);
                                        }
                                    });
                                }
                            }
                        };
                        SearchBuilderPanel.prototype.onSearchClauseSelect = function (clause) {
                            var me = this;
                            if (this.buildingGroup()) {
                                this.buildingGroup(false);
                                _.each(this.buildingGroupList(), function (searchPart) {
                                    searchPart.selected(false);
                                });
                                this.buildingGroupList([]);
                            }
                            this.closeOperators();
                            if (this.partSelected() && this.currentPart) {
                                this.currentPart.toggleSelect();
                            }
                            this.hideAndResetMethodControls();
                            clause.BaseObjectTypes = this.baseObjectType();
                            this.currentClause(clause);
                            this.selectedMethod(this.itemMethod);
                            this.selectedMethodValue(this.itemMethod.value);
                            if (this.partSelected() && this.currentPart) {
                                this.currentPart.selected(false);
                            }
                            this.negatePart(false);
                            var itemPicker = SearchBuilderPanel.makeItemPicker(this.trimClient, clause);
                            if (itemPicker) {
                                if (clause.LookupSet) {
                                    itemPicker.setCustomUri(clause.LookupSet.Uri);
                                }
                                this.showingLookupSet(false);
                                this.currentItemPicker(itemPicker);
                                this.showingObjectControls(true);
                                itemPicker.hasFocus(true);
                            }
                            var objectType = clause.ObjectTypeParameter;
                            if (this.baseObjectType().HasHierarchy) {
                                this.showIsRecursive(true);
                            }
                            var fieldDecorator = HPTRIM.Form.Search.SearchBuilderDecoratorFactory.makeFieldDecorator(this.trimClient, clause);
                            if (fieldDecorator) {
                                fieldDecorator.enterCallback = function (Value) {
                                    me.addNewPart();
                                };
                                this.currentField(fieldDecorator);
                                var format = me.currentClause().ParameterFormat;
                                if (format == "Date" || format == "Datetime" || format == "DateTime" || format == "Daterange" || format == "DateRange") {
                                    me.currentFieldIsDate(true);
                                }
                                this.showingField(true);
                                if (clause.Id == "RecordContent") {
                                    me.showGroupWordsCheckbox(true);
                                }
                                else if (clause.Id == "RecordNumber") {
                                    me.showGroupWordsCheckbox(false);
                                }
                                else if (format == "Text" || format == "String") {
                                    me.showGroupWordsCheckbox(true);
                                }
                                if (me.currentClause().ParameterFormat == "Boolean") {
                                    var jQueryButton = $("#web_addSearchClause");
                                    jQueryButton.focus();
                                }
                                else {
                                    var jQueryFieldRef = $("#" + fieldDecorator.Id);
                                    jQueryFieldRef.focus();
                                }
                                me.showingLookupSet(false);
                            }
                        };
                        SearchBuilderPanel.makeItemPicker = function (trimClient, searchClause) {
                            if (searchClause.Id == "Acl") {
                                return null;
                            }
                            return HP.HPTRIM.Form.Search.SearchBuilderDecoratorFactory.makeItemPicker(trimClient, searchClause);
                        };
                        SearchBuilderPanel.prototype.addNewPart = function (keepShowingControls) {
                            var me = this;
                            var newSearchBuilderPart = SearchBuilderPanel.makeSearchPart(this.currentClause(), this.negatePart(), this.removePart, this.selectPart, this.unselectPart);
                            if (this.showingField()) {
                                var field = this.currentField();
                                var value = field.getValueEx();
                                if (value == null || value == '') {
                                    return;
                                }
                                if (this.currentClause().Id == "RecordContent") {
                                    var stringValue = field.Value();
                                    newSearchBuilderPart.stringValue(stringValue);
                                    newSearchBuilderPart.groupWords(this.groupWords());
                                }
                                else if (this.currentClause().Id == "RecordNumber") {
                                    var stringValue = field.Value();
                                    stringValue = stringValue.replace(new RegExp('"', 'g'), '');
                                    stringValue = stringValue.replace(new RegExp(',', 'g'), '","');
                                    newSearchBuilderPart.stringValue(stringValue);
                                    newSearchBuilderPart.groupWords(true);
                                }
                                else if (field.Format == "Date" || field.Format == "Daterange" || field.Format == "Datetime") {
                                    newSearchBuilderPart.stringValue(field.getValueEx());
                                }
                                else if (field.Format == "Geography") {
                                    newSearchBuilderPart.stringValue(field.getValueEx());
                                }
                                else if (field.Format == "String" || field.Format == "Enum") {
                                    var stringValue = field.Value();
                                    newSearchBuilderPart.groupWords(this.groupWords());
                                    newSearchBuilderPart.stringValue(stringValue);
                                }
                                else if (field.Format != "Boolean") {
                                    newSearchBuilderPart.stringValue(field.Value());
                                }
                            }
                            else if (this.showingObjectControls()) {
                                if (this.selectedMethodValue() == this.itemMethod.value) {
                                    if (this.showingLookupSet()) {
                                        var lookupField = this.currentLookupSetField();
                                        var stringLookupValue = lookupField.Value();
                                        newSearchBuilderPart.stringValue(stringLookupValue);
                                        newSearchBuilderPart.hasObjectValue(false);
                                        newSearchBuilderPart.isRecursive(this.isRecursive());
                                    }
                                    else {
                                        if (this.currentItemPicker().getValue() && this.currentItemPicker().getValue().Uri && this.currentItemPicker().getValue().Uri != 0) {
                                            newSearchBuilderPart.stringValue(this.currentItemPicker().getRawValue());
                                            newSearchBuilderPart.hasObjectValue(true);
                                            newSearchBuilderPart.objectValue(this.currentItemPicker().getValue());
                                            newSearchBuilderPart.isRecursive(this.isRecursive());
                                            if (this.currentClause().ParameterFormat == 'Text' || this.currentClause().ParameterFormat == 'String') {
                                                var currentLookupFieldString = this.currentItemPicker().getValue();
                                                var currentStringLookupValue = currentLookupFieldString.displayValue;
                                                newSearchBuilderPart.stringValue(currentStringLookupValue);
                                                newSearchBuilderPart.hasObjectValue(false);
                                                newSearchBuilderPart.isRecursive(this.isRecursive());
                                            }
                                        }
                                        else {
                                            var currentLookupFieldText = this.currentItemPicker().getValue();
                                            if (this.currentClause().ParameterFormat == 'Text' && this.currentClause().ObjectTypeParameter == "LookupItem") {
                                                currentLookupFieldText = this.currentItemPicker().getValueEx().replace(/;/g, "; ");
                                            }
                                            newSearchBuilderPart.stringValue(currentLookupFieldText);
                                            newSearchBuilderPart.queryValue(currentLookupFieldText);
                                            newSearchBuilderPart.hasObjectValue(false);
                                            newSearchBuilderPart.isRecursive(this.isRecursive());
                                        }
                                    }
                                }
                                else if (this.selectedMethodValue() == this.subSearchMethod.value) {
                                    if (this.subQueryDecorator.Value()) {
                                        newSearchBuilderPart.hasQueryValue(true);
                                        newSearchBuilderPart.queryValue(this.subQueryDecorator.Value());
                                        newSearchBuilderPart.stringValue("[" + this.subQueryDecorator.Value() + "]");
                                    }
                                }
                                if (!newSearchBuilderPart.stringValue) {
                                    return;
                                }
                            }
                            var searchBuilderParts = this.searchBuilderPartList();
                            if (this.groupSelected() && this.currentPart.isGroup()) {
                                searchBuilderParts = this.currentPart.searchBuilderPartList();
                            }
                            if (searchBuilderParts.length > 0) {
                                var operatorPart = new SearchEditor.SearchBuilderPart();
                                operatorPart.isOperator(true);
                                operatorPart.operatorCaption(HPTRIM.Messages.web_changeToAnd);
                                operatorPart.operatorType = HPTRIM.Messages.web_changeToAnd;
                                operatorPart.tooltip = HPTRIM.Messages.web_changeToAnd;
                                operatorPart.selectCallback = function (currentPart) {
                                    me.closeOperators();
                                    var openOperators = [currentPart];
                                    me.openOperators(openOperators);
                                };
                                operatorPart.unselectCallback = function (currentPart) {
                                    var newOpenOperators = _.filter(me.openOperators(), function (openOperator) {
                                        return openOperator == currentPart;
                                    });
                                    me.openOperators(newOpenOperators);
                                };
                                searchBuilderParts.push(operatorPart);
                                newSearchBuilderPart.previousOperatorPart = operatorPart;
                            }
                            searchBuilderParts.push(newSearchBuilderPart);
                            if (this.groupSelected() && this.currentPart.isGroup()) {
                                this.currentPart.searchBuilderPartList(searchBuilderParts);
                            }
                            else {
                                this.searchBuilderPartList(searchBuilderParts);
                            }
                            this.hideAndResetMethodControls();
                            this.scrollSearchPills();
                        };
                        SearchBuilderPanel.prototype.cancelAddNewPart = function () {
                            this.hideAndResetMethodControls();
                        };
                        SearchBuilderPanel.prototype.finishUpdating = function () {
                            if (this.currentPart.clause && this.currentPart.clause.Id == "Acl") {
                                this.currentPart.objectValue().Uri = this.currentPart.stringValue();
                            }
                            else if (this.currentPart.clause && this.currentPart.clause.Id == "RecordContent") {
                            }
                            else if (this.currentPart.clause && this.currentPart.clause.Id == "RecordNumber") {
                                var value = this.currentField().Value();
                                value = value.replace(new RegExp('","', 'g'), ',');
                                value = value.replace(new RegExp(',', 'g'), '","');
                                this.currentPart.stringValue(value);
                                this.currentPart.groupWords(true);
                            }
                            else {
                                if (this.currentPart.clause && this.currentPart.clause.ParameterFormat == "String") {
                                }
                            }
                            this.currentPart.toggleSelect();
                            this.hideAndResetMethodControls();
                        };
                        SearchBuilderPanel.makeSearchPart = function (searchClause, negatePart, removePart, selectPart, unselectPart) {
                            var newSearchBuilderPart = new SearchEditor.SearchBuilderPart(searchClause);
                            if (negatePart) {
                                newSearchBuilderPart.isNegated(true);
                            }
                            newSearchBuilderPart.remove = removePart;
                            newSearchBuilderPart.selectCallback = selectPart;
                            newSearchBuilderPart.unselectCallback = unselectPart;
                            return newSearchBuilderPart;
                        };
                        SearchBuilderPanel.prototype.startBuildingGroup = function () {
                            this.closeOperators();
                            if (this.partSelected() && this.currentPart) {
                                this.currentPart.toggleSelect();
                                this.cancelAddNewPart();
                            }
                            this.buildingGroup(true);
                            this.buildingGroupList([]);
                        };
                        SearchBuilderPanel.prototype.cancelBuildingGroup = function () {
                            this.buildingGroup(false);
                            _.each(this.buildingGroupList(), function (part) {
                                part.selected(false);
                            });
                        };
                        SearchBuilderPanel.prototype.addToGroupSelection = function (part) {
                            this.buildGroupEnabled(false);
                            if (this.buildingGroupList().length == 0) {
                                this.buildingGroupList([part]);
                                this.buildGroupEnabled(false);
                            }
                            else if (this.buildingGroupList().length == 1) {
                                var groupBeginPart = this.buildingGroupList()[0];
                                if (groupBeginPart == part) {
                                    return;
                                }
                                if (groupBeginPart.parent != part.parent) {
                                    part.selected(false);
                                    this.errorMessage(HPTRIM.Messages.web_searchGroupMustHaveSameParent);
                                    return;
                                }
                                var containingPartList = this.searchBuilderPartList();
                                if (part.parent) {
                                    containingPartList = part.parent.searchBuilderPartList();
                                }
                                var startIndex = containingPartList.indexOf(groupBeginPart);
                                var index = containingPartList.indexOf(part);
                                if (startIndex < index) {
                                    this.buildingGroupList([groupBeginPart, part]);
                                }
                                else {
                                    this.buildingGroupList([part, groupBeginPart]);
                                }
                                this.buildGroupEnabled(true);
                            }
                            else if (this.buildingGroupList().length >= 2) {
                                part.selected(false);
                                this.showError(HPTRIM.Messages.web_searchSelectStartAndEndOfGroup);
                                return;
                            }
                        };
                        SearchBuilderPanel.prototype.makeGroup = function () {
                            if (this.buildingGroupList().length != 2) {
                                return;
                            }
                            var parentPart = this.buildingGroupList()[0].parent;
                            this.buildingGroup(false);
                            _.each(this.buildingGroupList(), function (part) {
                                part.selected(false);
                            });
                            var newGroup = new SearchEditor.SearchBuilderPart();
                            newGroup.isGroup(true);
                            newGroup.parent = parentPart;
                            newGroup.remove = this.removePart;
                            newGroup.selectCallback = this.selectPart;
                            newGroup.unselectCallback = this.unselectPart;
                            if (!parentPart) {
                                var currentList = this.searchBuilderPartList();
                                var groupStart = this.buildingGroupList()[0];
                                var groupEnd = this.buildingGroupList()[0];
                                if (this.buildingGroupList().length == 2) {
                                    groupEnd = this.buildingGroupList()[1];
                                }
                                var startIndex = currentList.indexOf(groupStart);
                                var endIndex = startIndex;
                                if (groupEnd) {
                                    endIndex = currentList.indexOf(groupEnd);
                                }
                                var group = currentList.slice(startIndex, endIndex + 1);
                                _.each(group, function (part) {
                                    part.parent = newGroup;
                                });
                                newGroup.searchBuilderPartList(group);
                                currentList.splice(startIndex, group.length, newGroup);
                                this.searchBuilderPartList(currentList);
                            }
                            else {
                                var currentList = parentPart.searchBuilderPartList();
                                var groupStart = this.buildingGroupList()[0];
                                var groupEnd = this.buildingGroupList()[1];
                                var startIndex = currentList.indexOf(groupStart);
                                var endIndex = currentList.indexOf(groupEnd);
                                var group = currentList.slice(startIndex, endIndex + 1);
                                _.each(group, function (part) {
                                    part.parent = newGroup;
                                });
                                newGroup.searchBuilderPartList(group);
                                currentList.splice(startIndex, group.length, newGroup);
                                parentPart.searchBuilderPartList(currentList);
                                this.searchBuilderPartList.valueHasMutated();
                            }
                            this.buildGroupEnabled(false);
                        };
                        SearchBuilderPanel.prototype.updatePartList = function (newPartList, owningGroupPart) {
                            if (owningGroupPart) {
                                owningGroupPart.searchBuilderPartList(newPartList);
                                _.each(newPartList, function (part) {
                                    part.parent = owningGroupPart;
                                });
                                if (owningGroupPart.searchBuilderPartList().length == 0) {
                                    this.removePart(owningGroupPart);
                                }
                            }
                            else {
                                _.each(newPartList, function (part) {
                                    part.parent = undefined;
                                });
                                this.searchBuilderPartList(newPartList);
                            }
                        };
                        SearchBuilderPanel.prototype.doPartSelection = function (part) {
                            var me = this;
                            this.hideAndResetMethodControls();
                            if (me.partSelected() && me.currentPart) {
                                me.currentPart.selected(false);
                            }
                            else if (me.groupSelected() && me.currentPart) {
                                me.currentPart.selected(false);
                            }
                            me.currentPart = part;
                            me.currentPart.selected(true);
                            if (me.currentPart.clause) {
                                me.currentClause(me.currentPart.clause);
                            }
                            me.selectedMethod(me.itemMethod);
                            me.selectedMethodValue(me.itemMethod.value);
                            if (part.isGroup()) {
                                me.groupSelected(true);
                                me.negateGroup(part.isNegated());
                                me.partSelected(false);
                                me.negatePart(false);
                                me.showUpdateButton(false);
                            }
                            else if (part.isRawString()) {
                                me.groupSelected(false);
                                me.partSelected(true);
                                me.negatePart(false);
                                me.showingObjectControls(false);
                                me.currentItemPicker(null);
                                me.showingField(false);
                                me.currentFieldIsDate(false);
                                me.currentField(null);
                                me.showRawField(false);
                                var dummyPageItem = {
                                    Caption: "",
                                    Format: "String",
                                    Name: "",
                                    Value: ko.observable(null),
                                };
                                var stringDecorator = new HP.HPTRIM.Form.StringDecorator(dummyPageItem);
                                stringDecorator.submitPropertyName = "";
                                me.rawField(stringDecorator);
                                stringDecorator.setValue(me.currentPart.rawValue());
                                me.rawFieldSubscription = stringDecorator.Value.subscribe(function (newValue) {
                                    if (me.currentPart) {
                                        me.currentPart.rawValue(me.rawField().Value());
                                    }
                                });
                                me.showRawField(true);
                            }
                            else {
                                me.groupSelected(false);
                                me.partSelected(true);
                                me.negatePart(part.isNegated());
                                me.showingObjectControls(false);
                                me.currentItemPicker(null);
                                me.showingField(false);
                                me.showGroupWordsCheckbox(false);
                                me.currentFieldIsDate(false);
                                me.currentField(null);
                                var itemPicker = SearchBuilderPanel.makeItemPicker(this.trimClient, me.currentClause());
                                if (itemPicker) {
                                    me.showUpdateButton(true);
                                    me.currentItemPicker(itemPicker);
                                    me.showingObjectControls(true);
                                    if (me.currentPart.objectValue()) {
                                        me.selectedMethod(me.itemMethod);
                                        me.selectedMethodValue(me.itemMethod.value);
                                        itemPicker.setValue(me.currentPart.objectValue());
                                    }
                                    me.itemPickerSubscription = itemPicker.value.subscribe(function (newValue) {
                                        if (me.currentPart) {
                                            me.currentPart.stringValue(me.currentItemPicker().getRawValue());
                                            me.currentPart.objectValue(me.currentItemPicker().getValue());
                                            me.currentPart.queryValue("");
                                        }
                                    });
                                    if (me.currentPart.queryValue()) {
                                        me.selectedMethod(me.subSearchMethod);
                                        me.selectedMethodValue(me.subSearchMethod.value);
                                        me.subQueryDecorator.Value(me.currentPart.queryValue());
                                    }
                                    me.subQuerySubscription = me.subQueryDecorator.Value.subscribe(function (newValue) {
                                        if (me.currentPart) {
                                            me.currentPart.queryValue(me.currentItemPicker().getRawValue());
                                            me.currentPart.stringValue('[' + me.subQueryDecorator.Value() + ']');
                                            me.currentPart.objectValue(null);
                                        }
                                    });
                                    if (me.currentPart.hasObjectValue()) {
                                        var bobType = HPTRIM.Utils.TrimHelper.toBaseObjectType(this.currentPart.clause.ObjectTypeParameter);
                                        if (bobType) {
                                            var isRecursive = bobType.HasHierarchy;
                                            me.showIsRecursive(true);
                                            me.isRecursive(me.currentPart.isRecursive());
                                            me.isRecursiveSubscription = me.isRecursive.subscribe(function (newValue) {
                                                if (me.currentPart) {
                                                    me.currentPart.isRecursive(newValue);
                                                }
                                            });
                                        }
                                    }
                                }
                                var fieldDecorator = HPTRIM.Form.Search.SearchBuilderDecoratorFactory.makeFieldDecorator(me.trimClient, me.currentClause());
                                if (fieldDecorator) {
                                    fieldDecorator.enterCallback = function (Value) {
                                        me.finishUpdating();
                                    };
                                    var format = me.currentClause().ParameterFormat;
                                    if (format == "Date" || format == "Datetime" || format == "DateTime" || format == "Daterange" || format == "DateRange") {
                                        me.currentFieldIsDate(true);
                                    }
                                    me.currentField(fieldDecorator);
                                    me.showingField(true);
                                    if (me.currentClause().ParameterFormat != "Boolean") {
                                        if (me.currentClause().Id == "RecordContent") {
                                            this.showGroupWordsCheckbox(true);
                                            this.groupWordsCheckbox.Value(false);
                                            var stringValue = me.currentPart.stringValue();
                                            fieldDecorator.setValue(stringValue);
                                            this.groupWords(me.currentPart.groupWords());
                                            me.fieldSubscription = fieldDecorator.Value.subscribe(function (newValue) {
                                                if (me.currentPart) {
                                                    me.currentPart.stringValue(me.currentField().Value());
                                                }
                                            });
                                            me.groupWordsSubscription = me.groupWords.subscribe(function (newValue) {
                                                if (me.currentPart) {
                                                    me.currentPart.groupWords(newValue);
                                                }
                                            });
                                        }
                                        else if (me.currentClause().Id == "RecordNumber") {
                                            this.showGroupWordsCheckbox(false);
                                            this.groupWordsCheckbox.Value(false);
                                            this.groupWords(true);
                                            var stringValue = me.currentPart.stringValue();
                                            stringValue = stringValue.replace(new RegExp('","', 'g'), ',');
                                            fieldDecorator.setValue(stringValue);
                                            me.fieldSubscription = fieldDecorator.Value.subscribe(function (newValue) {
                                                if (me.currentPart) {
                                                    me.currentPart.stringValue(me.currentField().Value());
                                                }
                                            });
                                        }
                                        else {
                                            if (me.currentClause().ParameterFormat == "String" || me.currentClause().ParameterFormat == "Text") {
                                                me.showGroupWordsCheckbox(true);
                                                me.groupWords(me.currentPart.groupWords());
                                                me.groupWordsSubscription = me.groupWords.subscribe(function (newValue) {
                                                    if (me.currentPart) {
                                                        me.currentPart.groupWords(newValue);
                                                    }
                                                });
                                            }
                                            var stringValue = me.currentPart.stringValue();
                                            if (stringValue && stringValue[0] == '"' && stringValue[stringValue.length - 1] == '"') {
                                                me.groupWords(true);
                                                me.currentPart.groupWords(true);
                                                stringValue = stringValue.slice(1, stringValue.length - 1);
                                            }
                                            if (me.currentClause().LookupSet) {
                                                var udfComboBox = fieldDecorator;
                                                var newValue = { "Caption": stringValue, "Name": stringValue };
                                                if (!udfComboBox.items() || (udfComboBox.items() && udfComboBox.items().length == 0)) {
                                                    udfComboBox.items([newValue]);
                                                }
                                                udfComboBox.Value(newValue);
                                            }
                                            else {
                                                fieldDecorator.setValue(stringValue);
                                            }
                                            me.fieldSubscription = fieldDecorator.Value.subscribe(function (newValue) {
                                                if (me.currentPart) {
                                                    me.currentPart.stringValue(me.currentField().Value());
                                                }
                                            });
                                            me.showingLookupSet(false);
                                            if (me.currentClause().LookupSet && me.currentClause().ParameterFormat != "String" && me.currentClause().ParameterFormat != "Text") {
                                                me.showingField(false);
                                                me.currentLookupSetField(fieldDecorator);
                                                me.showingLookupSet(true);
                                            }
                                        }
                                        me.showUpdateButton(true);
                                    }
                                }
                            }
                        };
                        ;
                        SearchBuilderPanel.prototype.toggleClauseParamaterHelp = function () {
                            this.showParamaterHelp(!this.showParamaterHelp());
                        };
                        SearchBuilderPanel.prototype.toggleClauseHelp = function () {
                            this.showClauseHelp(!this.showClauseHelp());
                            if (!this.showClauseHelp()) {
                                this.showParamaterHelp(false);
                            }
                        };
                        SearchBuilderPanel.prototype.setQuery = function (query) {
                            var _this = this;
                            var me = this;
                            this.trimClient.getAdditionaFields(function (additionalFields) {
                                _this.trimClient.getAndProcessSearchClauseDefinition(_this.baseObjectType().name, function (searchClauses) {
                                    var searchBuilderParts = [];
                                    query = query.replace(/\)/g, ' ) ').replace(/\(/g, ' ( ');
                                    query = query.replace(/\]/g, ' ] ').replace(/\[/g, ' [ ');
                                    var tokenArray = query.split(" ");
                                    var operatorSelectPart = function (currentPart) {
                                        me.closeOperators();
                                        var openOperators = [currentPart];
                                        me.openOperators(openOperators);
                                    };
                                    var operatorUnselectPart = function (currentPart) {
                                        var newOpenOperators = _.filter(me.openOperators(), function (openOperator) {
                                            return openOperator == currentPart;
                                        });
                                        me.openOperators(newOpenOperators);
                                    };
                                    searchBuilderParts = SearchBuilderPanel.processTokenArray(_this.trimClient, tokenArray, searchClauses, additionalFields, operatorSelectPart, operatorUnselectPart, _this.removePart, _this.selectPart, _this.unselectPart);
                                    if (searchBuilderParts.length > 0) {
                                        SearchBuilderPanel.makeFriendlyPartStrings(me.trimClient, searchBuilderParts);
                                        me.searchBuilderPartList(searchBuilderParts);
                                    }
                                });
                            });
                        };
                        ;
                        SearchBuilderPanel.processQuery = function (query, baseObjectType, trimClient, callback, operatorSelectPart, operatorUnselectPart, removePart, selectPart, unselectPart) {
                            if (!operatorSelectPart) {
                                operatorSelectPart = function (currentPart) { };
                            }
                            ;
                            if (!operatorUnselectPart) {
                                operatorUnselectPart = function (currentPart) { };
                            }
                            ;
                            if (!removePart) {
                                removePart = function (currentPart) { };
                            }
                            ;
                            if (!selectPart) {
                                selectPart = function (currentPart) { };
                            }
                            ;
                            if (!unselectPart) {
                                unselectPart = function (currentPart, rebuild) { };
                            }
                            ;
                            trimClient.getAdditionaFields(function (additionalFields) {
                                trimClient.getAndProcessSearchClauseDefinition(baseObjectType.name, function (searchClauses) {
                                    var searchBuilderParts = [];
                                    query = query.replace(/\)/g, ' ) ').replace(/\(/g, ' ( ');
                                    query = query.replace(/\]/g, ' ] ').replace(/\[/g, ' [ ');
                                    var tokenArray = query.split(" ");
                                    callback(SearchBuilderPanel.processTokenArray(trimClient, tokenArray, searchClauses, additionalFields, operatorSelectPart, operatorUnselectPart, removePart, selectPart, unselectPart));
                                });
                            });
                        };
                        SearchBuilderPanel.makeFriendlyPartStrings = function (trimClient, searchBuilderPartList, finalCallback) {
                            var fullSearchBuilderList = searchBuilderPartList;
                            var processList = function (currentSearchPartList) {
                                _.forEach(currentSearchPartList, function (searchBuilderPart) {
                                    if (searchBuilderPart.hasObjectValue()) {
                                        var existingValue = searchBuilderPart.objectValue();
                                        if (existingValue.Uri && (existingValue.Uri != "0")) {
                                            if (parseFloat(existingValue.Uri)) {
                                                HPTRIM.Utils.TrimHelper.loadObject(trimClient, existingValue, function (newValue) {
                                                    _.forEach(currentSearchPartList, function (targetPart) {
                                                        if (targetPart.objectValue() && (targetPart.objectValue().Uri == newValue.Uri) && (targetPart.objectValue().baseObjectType.Name == newValue.baseObjectType.Name)) {
                                                            targetPart.stringValue(newValue.displayValue);
                                                            targetPart.objectValue(newValue);
                                                        }
                                                    });
                                                    if (finalCallback) {
                                                        finalCallback(fullSearchBuilderList);
                                                    }
                                                    ;
                                                });
                                            }
                                        }
                                    }
                                    if (searchBuilderPart.isGroup()) {
                                        processList(searchBuilderPart.searchBuilderPartList());
                                    }
                                    ;
                                });
                            };
                            processList(searchBuilderPartList);
                            if (finalCallback) {
                                finalCallback(searchBuilderPartList);
                            }
                            ;
                        };
                        SearchBuilderPanel.processTokenArray = function (trimClient, tokenArray, searchClauses, additionalFields, operatorSelectCallback, operatorUnselectCallback, removePart, selectPart, unselectPart) {
                            var searchBuilderParts = [];
                            var operatorOnStack = undefined;
                            for (var tokenIndex = 0; tokenIndex < tokenArray.length; tokenIndex++) {
                                var partString = tokenArray[tokenIndex];
                                if (partString) {
                                    if (partString.toLowerCase() == HPTRIM.Messages.web_changeToAnd.toLowerCase() || partString.toLowerCase() == HPTRIM.Messages.web_changeToOr.toLowerCase()) {
                                        var operatorPart = new SearchEditor.SearchBuilderPart();
                                        operatorPart.isOperator(true);
                                        operatorPart.operatorType = partString;
                                        operatorPart.operatorCaption(partString);
                                        operatorPart.tooltip = partString;
                                        operatorOnStack = operatorPart;
                                        searchBuilderParts.push(operatorPart);
                                        operatorPart.selectCallback = operatorSelectCallback;
                                        operatorPart.unselectCallback = operatorUnselectCallback;
                                    }
                                    else {
                                        var negated = false;
                                        if (partString == "not" || partString == HPTRIM.Messages.web_Not) {
                                            negated = true;
                                            var valueTerminated = false;
                                            while (tokenIndex < tokenArray.length && !valueTerminated) {
                                                tokenIndex = tokenIndex + 1;
                                                if (tokenArray[tokenIndex]) {
                                                    value = tokenArray[tokenIndex];
                                                    valueTerminated = true;
                                                }
                                            }
                                            if (valueTerminated) {
                                                partString = value;
                                            }
                                        }
                                        if (partString == "(") {
                                            var groupTokenIndex = tokenIndex + 1;
                                            var openCount = 1;
                                            while (groupTokenIndex < tokenArray.length && openCount > 0) {
                                                if (tokenArray[groupTokenIndex] == ')') {
                                                    openCount = openCount - 1;
                                                }
                                                else if (tokenArray[groupTokenIndex] == '(') {
                                                    openCount = openCount + 1;
                                                }
                                                groupTokenIndex = groupTokenIndex + 1;
                                            }
                                            if (openCount == 0) {
                                                var newGroupPart = new SearchEditor.SearchBuilderPart();
                                                newGroupPart.isGroup(true);
                                                newGroupPart.tooltip = HPTRIM.Messages.web_locTypeGroup;
                                                newGroupPart.remove = removePart;
                                                newGroupPart.selectCallback = selectPart;
                                                newGroupPart.unselectCallback = unselectPart;
                                                newGroupPart.isNegated(negated);
                                                var groupTokenArray = tokenArray.slice(tokenIndex + 1, groupTokenIndex - 1);
                                                newGroupPart.searchBuilderPartList(SearchBuilderPanel.processTokenArray(trimClient, groupTokenArray, searchClauses, additionalFields, operatorSelectCallback, operatorUnselectCallback, removePart, selectPart, unselectPart));
                                                _.each(newGroupPart.searchBuilderPartList(), function (part) {
                                                    part.parent = newGroupPart;
                                                });
                                                if (operatorOnStack) {
                                                    newGroupPart.previousOperatorPart = operatorOnStack;
                                                    operatorOnStack = undefined;
                                                }
                                                searchBuilderParts.push(newGroupPart);
                                                tokenIndex = groupTokenIndex;
                                            }
                                            else {
                                                var rawPart = SearchBuilderPanel.makeRawPart(partString, negated, operatorOnStack, removePart, selectPart, unselectPart);
                                                searchBuilderParts.push(rawPart);
                                            }
                                        }
                                        else {
                                            var clauseParts = partString.split(':');
                                            if (clauseParts[0]) {
                                                var clauseName = clauseParts[0];
                                                var searchClause = _.find(searchClauses, function (clause) {
                                                    return (clause.Name.toLowerCase() == clauseName.toLowerCase());
                                                });
                                                if (!searchClause) {
                                                    var udf = _.find(additionalFields, function (additionalField) {
                                                        return (additionalField.Name == clauseName);
                                                    });
                                                    if (udf) {
                                                        searchClause = udf;
                                                    }
                                                }
                                                if (!searchClause) {
                                                    var rawPart = this.makeRawPart(partString, negated, operatorOnStack, removePart, selectPart, unselectPart);
                                                    searchBuilderParts.push(rawPart);
                                                }
                                                else {
                                                    var newSearchPart = this.makeSearchPart(searchClause, negated, removePart, selectPart, unselectPart);
                                                    if (searchClause.ParameterFormat == "Object") {
                                                        var isSubQuery = false;
                                                        var value = "";
                                                        if (clauseParts[1]) {
                                                            value = clauseParts[1];
                                                        }
                                                        else {
                                                            var valueTerminated = false;
                                                            var bracketsOpen = false;
                                                            var openBracketCount = 0;
                                                            while (tokenIndex < tokenArray.length && (!valueTerminated || bracketsOpen)) {
                                                                tokenIndex = tokenIndex + 1;
                                                                if (tokenArray[tokenIndex]) {
                                                                    if (tokenArray[tokenIndex] == "[") {
                                                                        valueTerminated = true;
                                                                        isSubQuery = true;
                                                                        bracketsOpen = true;
                                                                        openBracketCount = openBracketCount + 1;
                                                                    }
                                                                    else if (tokenArray[tokenIndex] == "]") {
                                                                        openBracketCount = openBracketCount - 1;
                                                                        bracketsOpen = (openBracketCount > 0);
                                                                    }
                                                                    else if (!isSubQuery) {
                                                                        value = tokenArray[tokenIndex];
                                                                        valueTerminated = true;
                                                                    }
                                                                }
                                                                if (isSubQuery) {
                                                                    value = value + " " + tokenArray[tokenIndex];
                                                                }
                                                            }
                                                        }
                                                        if (value) {
                                                            if (value.indexOf('+') != -1) {
                                                                newSearchPart.isRecursive(true);
                                                                value = value.replace('+', '');
                                                            }
                                                            if (!isSubQuery) {
                                                                if (newSearchPart.clause.LookupSet) {
                                                                    newSearchPart.hasStringValue(true);
                                                                    newSearchPart.stringValue(value);
                                                                }
                                                                else {
                                                                    newSearchPart.hasObjectValue(true);
                                                                    var existingValue = new HPTRIM.TrimBaseObject(HPTRIM.Utils.TrimHelper.toBaseObjectType(searchClause.ObjectTypeParameter), value, value);
                                                                    newSearchPart.objectValue(existingValue);
                                                                    newSearchPart.stringValue(value);
                                                                }
                                                            }
                                                            else {
                                                                var processedQueryValue = value.replace('[', '').replace(/\]([^\]]*)/, '$1');
                                                                newSearchPart.hasQueryValue(true);
                                                                newSearchPart.queryValue(processedQueryValue);
                                                                newSearchPart.stringValue(value);
                                                            }
                                                        }
                                                    }
                                                    else if (searchClause.ParameterFormat == "Boolean") {
                                                    }
                                                    else {
                                                        var value = "";
                                                        if (clauseParts[1]) {
                                                            value = clauseParts[1];
                                                        }
                                                        var valueTerminated = false;
                                                        var openBracketCount = 0;
                                                        var openQuote = false;
                                                        if (value) {
                                                            openQuote = value.indexOf('"') != -1;
                                                        }
                                                        while (tokenIndex < tokenArray.length && !valueTerminated) {
                                                            tokenIndex = tokenIndex + 1;
                                                            var currentToken = tokenArray[tokenIndex];
                                                            if (currentToken) {
                                                                if (currentToken == '(') {
                                                                    openBracketCount = openBracketCount + 1;
                                                                }
                                                                else if (currentToken == ')') {
                                                                    openBracketCount = openBracketCount - 1;
                                                                }
                                                                var openQuotes = (currentToken.match(/"/g) || []).length;
                                                                if (openQuotes && openQuotes % 2) {
                                                                    openQuote = !openQuote;
                                                                }
                                                                var currentTokenAsPossibleOperator = currentToken.toLowerCase();
                                                                var isOperator = (currentTokenAsPossibleOperator == "or" || currentTokenAsPossibleOperator == "and" || currentToken == "]" || (currentToken == ")"));
                                                                if (searchClause && searchClause.Id == "RecordNumber") {
                                                                    isOperator = (currentTokenAsPossibleOperator == "or" || currentTokenAsPossibleOperator == "and" || (currentToken == ")"));
                                                                }
                                                                if ((!openQuote) && isOperator && openBracketCount <= 0) {
                                                                    valueTerminated = true;
                                                                    if (currentToken == ")" && openBracketCount == 0) {
                                                                        value = value + " " + currentToken;
                                                                    }
                                                                    else {
                                                                        tokenIndex = tokenIndex - 1;
                                                                    }
                                                                }
                                                                else {
                                                                    if (searchClause && searchClause.Id == "RecordNumber") {
                                                                        value = value + currentToken;
                                                                    }
                                                                    else {
                                                                        value = (value ? value + " " : "") + currentToken;
                                                                    }
                                                                }
                                                            }
                                                        }
                                                        if (value) {
                                                            if (searchClause.Id == "RecordContent") {
                                                                if (value.length > 2) {
                                                                    if (value[0] == '"' && value[1] == '\\' && value[2] == '"'
                                                                        && value[value.length - 3] == '\\' && value[value.length - 2] == '"' && value[value.length - 1] == '"') {
                                                                        newSearchPart.groupWords(true);
                                                                        value = value.slice(3, value.length - 3);
                                                                    }
                                                                    else if (value[0] == '"' && value[value.length - 1] == '"') {
                                                                        value = value.slice(1, value.length - 1);
                                                                    }
                                                                }
                                                            }
                                                            else if (searchClause.ParameterFormat == "String") {
                                                                if (value[0] == '"' && value[value.length - 1] == '"') {
                                                                    newSearchPart.groupWords(true);
                                                                    value = value.slice(1, value.length - 1);
                                                                }
                                                            }
                                                            newSearchPart.stringValue(value);
                                                        }
                                                    }
                                                    if (operatorOnStack) {
                                                        newSearchPart.previousOperatorPart = operatorOnStack;
                                                        operatorOnStack = undefined;
                                                    }
                                                    searchBuilderParts.push(newSearchPart);
                                                }
                                            }
                                        }
                                    }
                                }
                            }
                            return searchBuilderParts;
                        };
                        SearchBuilderPanel.prototype.hideAndResetMethodControls = function () {
                            this.isRecursive(false);
                            this.groupWords(false);
                            this.removeSubscriptions();
                            this.showClauseHelp(false);
                            this.showingField(false);
                            this.currentFieldIsDate(false);
                            this.showGroupWordsCheckbox(false);
                            this.showingObjectControls(false);
                            this.showIsRecursive(false);
                            this.currentClause(null);
                            this.showRawField(false);
                            this.showingLookupSet(false);
                        };
                        SearchBuilderPanel.prototype.removeSubscriptions = function () {
                            var me = this;
                            var removeSubscription = function (subscription) {
                                if (subscription) {
                                    subscription.dispose();
                                }
                            };
                            removeSubscription(me.fieldSubscription);
                            removeSubscription(me.itemPickerSubscription);
                            removeSubscription(me.subQuerySubscription);
                            removeSubscription(me.isRecursiveSubscription);
                            removeSubscription(me.rawFieldSubscription);
                        };
                        SearchBuilderPanel.prototype.scrollSearchPills = function () {
                            var element = document.getElementById("SearchPillContainer");
                            if (element) {
                                element.scrollTop = element.scrollHeight;
                            }
                        };
                        SearchBuilderPanel.makeRawPart = function (partString, negated, operatorOnStack, removePart, selectPart, unselectPart) {
                            var rawPart = new SearchEditor.SearchBuilderPart();
                            if (negated) {
                                rawPart.isNegated(true);
                            }
                            if (operatorOnStack) {
                                rawPart.previousOperatorPart = operatorOnStack;
                                operatorOnStack = undefined;
                            }
                            rawPart.rawValue(partString);
                            rawPart.isRawString(true);
                            rawPart.tooltip = HPTRIM.Messages.web_searchUnknownClause;
                            rawPart.remove = removePart;
                            rawPart.selectCallback = selectPart;
                            rawPart.unselectCallback = unselectPart;
                            return rawPart;
                        };
                        return SearchBuilderPanel;
                    }(HP.HPTRIM.Framework.Components.Layouts.Panel));
                    SearchEditor.SearchBuilderPanel = SearchBuilderPanel;
                })(SearchEditor = Panels.SearchEditor || (Panels.SearchEditor = {}));
            })(Panels = App.Panels || (App.Panels = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Panels;
            (function (Panels) {
                var SearchEditor;
                (function (SearchEditor) {
                    var SearchClauseFinderPanel = (function (_super) {
                        __extends(SearchClauseFinderPanel, _super);
                        function SearchClauseFinderPanel(trimClient, bobType) {
                            var _this = this;
                            _super.call(this, 'templates/Search/SearchClauseFinder');
                            this.searchClauseView = SearchEditor.SearchClausesView.ByCategory;
                            this.selectionCaption = HPTRIM.Messages.web_selectionCaption;
                            this.searchClausesByCategory = {};
                            this.searchClausesByName = {};
                            this.searchClauseGroupEnumDef = {};
                            this.filteredClausesByCategory = null;
                            this.isFilteringSearchClauses = ko.observable(false);
                            this.title = ko.observable(HPTRIM.Messages.web_searchSelectMethod);
                            this.loading = ko.observable(true);
                            this.alphabeticalButtonClass = ko.observable(HPTRIM.Utils.UIConstants.DEFAULT_BUTTON_CLASS);
                            this.categoryButtonClass = ko.observable(HPTRIM.Utils.UIConstants.PRIMARY_BUTTON_CLASS);
                            this.cateogoryTabVisible = ko.observable(true);
                            this.alphabeticalTabVisible = ko.observable(false);
                            this.getNodes = function (nodeId) { };
                            this.trimClient = trimClient;
                            this.baseObjectType = bobType ? bobType : HP.HPTRIM.BaseObjectTypes.Record;
                            this.searchClausesContainerId = this.id + "_" + "searchClausesContainer";
                            this.searchClausesContainerLocator = "#" + this.searchClausesContainerId;
                            var option = {
                                Caption: "",
                                Value: ko.observable(""),
                                CharacterLimit: 100,
                                ToolTip: HPTRIM.Messages.web_searchSelectMethod
                            };
                            this.txtSearchSearchClause = new HP.HPTRIM.Form.StringDecorator(option);
                            this.txtSearchSearchClause.enterCallback = _.bind(this.applyFilterOnSearchClauses, this);
                            this.txtSearchSearchClause.onKeyUp = _.bind(this.processOnSearchKeyUp, this);
                            this.setUpSearchClauseBuilders();
                            this.setupDataStructure(true);
                            var me = this;
                            this.updateList = function () {
                                _this.toggleView(_this.searchClauseView, true);
                            };
                        }
                        SearchClauseFinderPanel.prototype.getSearchClausesByCategory = function () {
                            return this.searchClausesByCategory;
                        };
                        SearchClauseFinderPanel.prototype.getSearchClausesByName = function () {
                            return this.searchClausesByName;
                        };
                        SearchClauseFinderPanel.prototype.setUpSearchClauseBuilders = function () {
                            var _this = this;
                            var me = this;
                            var classes = {
                                node: 'node',
                                loading: 'node-loading',
                                hovered: 'node-hovered',
                                expanded: 'node-expanded',
                                collapsed: 'node-collapsed',
                                name: 'node-name',
                                icon: 'node-icon',
                                ceIcon: 'node-icon-ce',
                                typeIcon: 'node-icon-type',
                                indent: 'node-indent',
                            };
                            var template = '<table class="table gtreetable">' +
                                '  <tr class="' + classes.node + ' ' + classes.collapsed + '">' +
                                '    <td>' +
                                '      <div class="node-container" tabindex="0">${indent}${ecIcon}${typeIcon}${name}</div>' +
                                '    </td> ' +
                                '  </tr>' +
                                '</table>';
                            var templateParts = {
                                indent: '<span class="node-indent">&zwnj;</span>',
                                ecIcon: '<span class="node-icon-ce icon"></span>',
                                typeIcon: '<span class="node-icon-type" style="width: 20px; display:inline-block">&nbsp;</span>',
                                name: '<span class="node-name"></span>',
                            };
                            this.buildSearchClausesByCategory = function (filteredCategory) {
                                var usingFilteredResult = false;
                                var searchClausesGroupedByCategory = null;
                                if (filteredCategory) {
                                    searchClausesGroupedByCategory = filteredCategory;
                                    usingFilteredResult = true;
                                }
                                else {
                                    searchClausesGroupedByCategory = _this.searchClausesByCategory;
                                }
                                var nodeJSON = _this.processCategories(searchClausesGroupedByCategory);
                                var draggable = false, multipleRoots = true;
                                var iconTypes = _this.makeIconsTypes();
                                var onSelect = function (treeNode) {
                                    if (treeNode.searchClause) {
                                        me.onClauseSelect(treeNode);
                                    }
                                    else if (treeNode.isExpanded()) {
                                        treeNode.collapse();
                                    }
                                    else {
                                        treeNode.expand();
                                    }
                                };
                                $(me.searchClausesContainerLocator).gtreetable({
                                    nodesWrapper: 'Results',
                                    nodeLevel: 0,
                                    cache: 0,
                                    showExpandIconOnEmpty: false,
                                    template: template,
                                    templateParts: templateParts,
                                    actions: [],
                                    'types': iconTypes,
                                    "source": me.getNodes,
                                    "language": "en-US",
                                    "manyroots": multipleRoots,
                                    "draggable": false,
                                    "nodeJSON": nodeJSON,
                                    "classes": classes,
                                    "onSelect": onSelect,
                                    "onUnselect": onSelect,
                                });
                            };
                            this.buildSearchClausesByAlphabetical = function (filteredList) {
                                var convertToTreeInterface = function (results, level) {
                                    var newResults = [];
                                    _.each(results, function (result) {
                                        var newObject = {
                                            id: result.Name + "$" + level,
                                            level: 0,
                                            name: result.Caption,
                                            type: result.Icon.toLowerCase(),
                                            searchClause: result,
                                            hasChildren: false,
                                        };
                                        newResults.push(newObject);
                                    });
                                    return { 'Results': newResults };
                                };
                                var searchClauses = filteredList ? filteredList : _this.searchClausesByName;
                                var nodeJSON = convertToTreeInterface(searchClauses, 0);
                                var multipleRoots = true;
                                var iconTypes = _this.makeIconsTypes();
                                var treeElement = $(_this.searchClausesContainerLocator);
                                if (treeElement.length == 1) {
                                    $(treeElement).gtreetable({
                                        nodesWrapper: 'Results',
                                        nodeLevel: 0,
                                        cache: 0,
                                        showExpandIconOnEmpty: false,
                                        template: template,
                                        templateParts: templateParts,
                                        actions: [],
                                        "types": iconTypes,
                                        "source": me.getNodes,
                                        "language": "en-US",
                                        "manyroots": multipleRoots,
                                        "draggable": false,
                                        "nodeJSON": nodeJSON,
                                        "classes": classes,
                                        "onSelect": me.onClauseSelect,
                                        "onUnselect": me.onClauseSelect,
                                        linkDefaultActionToDblClick: true
                                    });
                                }
                            };
                            this.getNodes = function (nodeId) {
                                var level = 0;
                                if (nodeId) {
                                    var parts = nodeId.split('$');
                                    nodeId = parts[0];
                                    level = parseInt(parts[1]);
                                }
                                var searchClauseId = nodeId;
                                var convertToTreeInterface = function (results, level) {
                                    if (results.length == 0) {
                                        var newObject = {
                                            id: "-1",
                                            level: level,
                                            name: "Nothing under here",
                                            uri: "-1"
                                        };
                                        return [newObject];
                                    }
                                    var newResults = [];
                                    _.each(results, function (result) {
                                        var newObject = {
                                            id: result.Name + "$" + level,
                                            level: level,
                                            name: result.Caption,
                                            uri: result.Name + "$" + level,
                                            type: result.Icon.toLowerCase(),
                                            searchClause: result,
                                            hasChildren: false,
                                        };
                                        newResults.push(newObject);
                                    });
                                    return newResults;
                                };
                                var customConverter = function (json) {
                                    var obj = json;
                                    obj.Results = convertToTreeInterface(json, 1);
                                    return obj;
                                };
                                var data = {};
                                if (me.filteredClausesByCategory && me.searchClauseView === SearchEditor.SearchClausesView.ByCategory) {
                                    var searchCategory = me.filteredClausesByCategory[nodeId];
                                    if (searchCategory) {
                                        data = customConverter(searchCategory);
                                    }
                                }
                                else {
                                    var searchCategory = me.searchClausesByCategory[nodeId];
                                    if (searchCategory) {
                                        data = customConverter(searchCategory);
                                    }
                                }
                                var searchClause = me.searchClausesByName[nodeId];
                                if (searchClause) {
                                    var newObject = {
                                        id: "-1",
                                        level: 2,
                                        name: searchClause.ParametersTooltip,
                                        uri: "-1",
                                        renderNameInPreTag: true
                                    };
                                    var returnObject = { "Results": [newObject] };
                                    return { "data": returnObject };
                                }
                                return { data: data };
                            };
                        };
                        SearchClauseFinderPanel.prototype.onBobTypeChanged = function (bobType) {
                            this.baseObjectType = bobType;
                            var thenUpdateView = true;
                            this.setupDataStructure(thenUpdateView);
                        };
                        SearchClauseFinderPanel.prototype.isRendered = function () {
                            return $(this.searchClausesContainerLocator).length != 0;
                        };
                        SearchClauseFinderPanel.prototype.resetSearchClauseTreeView = function () {
                            var ele = $(this.searchClausesContainerLocator);
                            ele.html('');
                            ele.data('bs.gtreetable', null);
                            this.filteredClausesByCategory = null;
                        };
                        SearchClauseFinderPanel.prototype.showAlphabetical = function () {
                            this.resetSearchClauseTreeView();
                            this.searchClauseView = SearchEditor.SearchClausesView.ByAlphabetical;
                            var filterValue = this.txtSearchSearchClause.getValueEx();
                            if (filterValue.trim() !== "") {
                                this.applyFilterOnSearchClauses(filterValue);
                                return;
                            }
                            this.alphabeticalButtonClass(HPTRIM.Utils.UIConstants.PRIMARY_BUTTON_CLASS);
                            this.categoryButtonClass(HPTRIM.Utils.UIConstants.DEFAULT_BUTTON_CLASS);
                            this.alphabeticalTabVisible(true);
                            this.cateogoryTabVisible(false);
                            this.buildSearchClausesByAlphabetical();
                        };
                        SearchClauseFinderPanel.prototype.showCategories = function () {
                            this.resetSearchClauseTreeView();
                            this.searchClauseView = SearchEditor.SearchClausesView.ByCategory;
                            var filterValue = this.txtSearchSearchClause.getValueEx();
                            if (filterValue.trim() !== "") {
                                this.applyFilterOnSearchClauses(filterValue);
                                return;
                            }
                            this.alphabeticalButtonClass(HPTRIM.Utils.UIConstants.DEFAULT_BUTTON_CLASS);
                            this.categoryButtonClass(HPTRIM.Utils.UIConstants.PRIMARY_BUTTON_CLASS);
                            this.alphabeticalTabVisible(false);
                            this.cateogoryTabVisible(true);
                            this.buildSearchClausesByCategory();
                        };
                        SearchClauseFinderPanel.prototype.toggleView = function (view, forceToggle) {
                            if (view === this.searchClauseView && forceToggle !== true) {
                                return;
                            }
                            this.resetSearchClauseTreeView();
                            this.searchClauseView = view;
                            var filterValue = this.txtSearchSearchClause.getValueEx();
                            if (filterValue.trim() !== "") {
                                this.applyFilterOnSearchClauses(filterValue);
                                return;
                            }
                            if (view === SearchEditor.SearchClausesView.ByCategory) {
                                this.buildSearchClausesByCategory();
                            }
                            else if (view === SearchEditor.SearchClausesView.ByAlphabetical) {
                                this.buildSearchClausesByAlphabetical();
                            }
                            else {
                            }
                        };
                        SearchClauseFinderPanel.prototype.setupDataStructure = function (thenUpdateView) {
                            var me = this;
                            var name = this.baseObjectType.Name ? this.baseObjectType.Name : this.baseObjectType.name;
                            if (name) {
                                var forBobType = name.toLowerCase();
                                if (forBobType == 'record' || forBobType == 'checkinstyle') {
                                    me.indexSearchClauses(forBobType, thenUpdateView);
                                    var callback = function (additionalFields) {
                                        me.indexSearchClauses(forBobType, true, additionalFields);
                                    };
                                    this.trimClient.getAdditionaFields(callback);
                                }
                                else {
                                    this.indexSearchClauses(forBobType, thenUpdateView);
                                }
                            }
                        };
                        SearchClauseFinderPanel.prototype.indexSearchClauses = function (forBobType, thenUpdateView, additionalFields) {
                            var _this = this;
                            var me = this;
                            me.loading(true);
                            this.trimClient.getAndProcessSearchClauseDefinition(forBobType, function (searchClauses) {
                                me.loading(false);
                                _this.trimClient.getEnumDefinition('SearchClauseGroup').done(function (searchClauseGroup) {
                                    _this.searchClauseGroupEnumDef = _.indexBy(searchClauseGroup, 'Name');
                                });
                                if (additionalFields) {
                                    var additionalFieldsWithoutBlockedClauses = _.filter(additionalFields, function (udf) {
                                        var found = udf.CanSearch.indexOf(_this.baseObjectType.Id) > -1;
                                        return found;
                                    });
                                    searchClauses = searchClauses.concat(additionalFieldsWithoutBlockedClauses);
                                }
                                _this.searchClausesByCategory = _.groupBy(searchClauses, function (clause) {
                                    if (clause && clause.MethodGroup) {
                                        return clause.MethodGroup;
                                    }
                                    return HPTRIM.Messages.web_unknown;
                                });
                                _this.sortSearchClauseGroupByCaption();
                                _this.searchClausesByName = _.indexBy(searchClauses, "Name");
                                if (thenUpdateView) {
                                    me.toggleView(HP.HPTRIM.App.Panels.SearchEditor.SearchClausesView.ByCategory, true);
                                }
                            });
                        };
                        SearchClauseFinderPanel.prototype.sortSearchClauseGroupByCaption = function () {
                            var _this = this;
                            var searchClauseGroupKeys = [];
                            var searchClauseGroupsAsArray = _.toArray(this.searchClauseGroupEnumDef);
                            var categoryCaptions = _.pluck(searchClauseGroupsAsArray, 'Caption').sort();
                            var nonOrderedList = [];
                            _.each(this.searchClausesByCategory, function (category, key) {
                                var _key = key;
                                if (key == 'AdditionalField') {
                                    _key = 'Field';
                                }
                                var scg = _this.searchClauseGroupEnumDef[_key];
                                if (scg) {
                                    nonOrderedList.push({ MethodGroup: _key, Caption: scg.Caption });
                                }
                            });
                            var orderedGroupByCaption = _.sortBy(nonOrderedList, 'Caption');
                            var orderedList = {};
                            for (var index in orderedGroupByCaption) {
                                var methodGroup = orderedGroupByCaption[index];
                                var methodGroupKey = methodGroup.MethodGroup;
                                if (methodGroupKey == 'Field') {
                                    methodGroupKey = 'AdditionalField';
                                }
                                var category = this.searchClausesByCategory[methodGroupKey];
                                orderedList[methodGroupKey] = category;
                            }
                            this.searchClausesByCategory = orderedList;
                        };
                        SearchClauseFinderPanel.prototype.processOnSearchKeyUp = function (filterField, event) {
                            var _this = this;
                            var keyCode = event.which;
                            var value = filterField.getValueEx();
                            var KEY_BACKSPACE = 8;
                            if (keyCode < 46) {
                                if (keyCode == KEY_BACKSPACE) {
                                    if (value === "") {
                                        this.isFilteringSearchClauses(false);
                                        this.toggleView(this.searchClauseView, true);
                                    }
                                }
                                return;
                            }
                            if (keyCode > 90) {
                                return;
                            }
                            this.isFilteringSearchClauses(true);
                            var MIN_FILTER_SEARCH_LENGTH = 3;
                            var waitInterval = 500;
                            clearInterval(this.typingTimer);
                            this.typingTimer = setTimeout(function () {
                                var value = filterField.getValueEx();
                                value = value.trim();
                                if (value === "") {
                                    _this.toggleView(_this.searchClauseView, true);
                                    return;
                                }
                                if (value.length < MIN_FILTER_SEARCH_LENGTH) {
                                    _this.isFilteringSearchClauses(false);
                                    return;
                                }
                                if (/^[a-zA-Z0-9]+$/.test(value)) {
                                    _this.applyFilterOnSearchClauses(value);
                                    _this.isFilteringSearchClauses(false);
                                }
                            }, waitInterval);
                        };
                        SearchClauseFinderPanel.prototype.applyFilterOnSearchClauses = function (value) {
                            var filteredList = this.filterSearchClauses(value);
                            this.resetSearchClauseTreeView();
                            switch (this.searchClauseView) {
                                case SearchEditor.SearchClausesView.ByAlphabetical:
                                    {
                                        this.buildSearchClausesByAlphabetical(filteredList);
                                    }
                                    break;
                                case SearchEditor.SearchClausesView.ByCategory:
                                    {
                                        var filteredSearchClausesGroupByMethod = _.groupBy(filteredList, function (clause) {
                                            return clause.MethodGroup;
                                        });
                                        this.filteredClausesByCategory = filteredSearchClausesGroupByMethod;
                                        this.buildSearchClausesByCategory(this.filteredClausesByCategory);
                                        this.expandRootNodes();
                                    }
                            }
                        };
                        SearchClauseFinderPanel.prototype.expandRootNodes = function () {
                            var _this = this;
                            if (!this.setIntervalHandle) {
                                this.setIntervalHandle = setInterval(function () {
                                    var rootNodes = $('[data-level=0]');
                                    if (rootNodes.length == 0) {
                                        return;
                                    }
                                    _.each(rootNodes, function (ele) {
                                        var node = $(_this.searchClausesContainerLocator).gtreetable('getNode', $(ele));
                                        if (node.length == 0) {
                                            return;
                                        }
                                        node.expand();
                                    });
                                    clearInterval(_this.setIntervalHandle);
                                    _this.setIntervalHandle = null;
                                }, 10);
                            }
                        };
                        SearchClauseFinderPanel.prototype.filterSearchClauses = function (value) {
                            var _this = this;
                            var filteredList = _.filter(this.searchClausesByName, function (searchClause) {
                                var isMatching = false;
                                var valueLowerCase = value.toLowerCase();
                                var methodGroup = _this.searchClauseGroupEnumDef[searchClause.MethodGroup];
                                var categoryCaption = methodGroup ? methodGroup.Caption : HP.HPTRIM.Messages.web_additional_Fields;
                                var isMatching = _this.hasValue([searchClause.Id, searchClause.Caption, searchClause.MethodGroup, categoryCaption], valueLowerCase);
                                return isMatching;
                            });
                            return filteredList;
                        };
                        SearchClauseFinderPanel.prototype.hasValue = function (list, value) {
                            var hasMatches = _.some(list, function (item) {
                                if (item) {
                                    return item.toLowerCase().indexOf(value) >= 0;
                                }
                                return false;
                            });
                            return hasMatches;
                        };
                        SearchClauseFinderPanel.prototype.makeIconsTypes = function () {
                            var icons = [];
                            _.each(this.searchClauseGroupEnumDef, function (enumDef) {
                                var iconKey = enumDef.Icon.toLowerCase();
                                icons.push(iconKey.toLocaleLowerCase());
                            });
                            var searchClausesIcon = _.uniq(_.pluck(this.searchClausesByName, 'Icon'));
                            var categoryAndSearchClauseIcons = icons.concat(searchClausesIcon);
                            var iconTypes = {};
                            _.each(categoryAndSearchClauseIcons, function (icon) {
                                var _icon = icon.toLowerCase();
                                iconTypes[_icon] = _icon + "_x16";
                            });
                            return iconTypes;
                        };
                        SearchClauseFinderPanel.prototype.processCategories = function (nodeJSON) {
                            var _this = this;
                            var convertToTreeInterface = function (results, level) {
                                var newResults = [];
                                _.each(results, function (result) {
                                    var newObject = {
                                        id: result.Id + "$" + level,
                                        level: 1,
                                        type: result.Icon.toLowerCase(),
                                        name: result.Caption,
                                        searchClause: result,
                                        hasChildren: false,
                                    };
                                    newResults.push(newObject);
                                });
                                return newResults;
                            };
                            var customConverter = function (groupByCategories) {
                                var returnObject = { Results: {} };
                                _.each(groupByCategories, function (category, key) {
                                    var searchClauseGroup = _this.searchClauseGroupEnumDef[key];
                                    if (!searchClauseGroup) {
                                        searchClauseGroup = {
                                            Icon: "TrimObject",
                                            Caption: HP.HPTRIM.Messages.web_additional_Fields,
                                        };
                                    }
                                    var categoryIcon = searchClauseGroup.Icon;
                                    var rootLevel = 0;
                                    var currentCategory = convertToTreeInterface(category, rootLevel);
                                    var re = returnObject.Results;
                                    re[key] = currentCategory;
                                    re[key].name = searchClauseGroup.Caption;
                                    re[key].level = rootLevel;
                                    re[key].id = key + "$" + rootLevel;
                                    if (categoryIcon) {
                                        re[key].type = categoryIcon.toLowerCase();
                                    }
                                    re[key].hasChildren = true;
                                });
                                return returnObject;
                            };
                            var treeInterfaceData = customConverter(nodeJSON);
                            return treeInterfaceData;
                        };
                        return SearchClauseFinderPanel;
                    }(HP.HPTRIM.Framework.Components.Layouts.Panel));
                    SearchEditor.SearchClauseFinderPanel = SearchClauseFinderPanel;
                })(SearchEditor = Panels.SearchEditor || (Panels.SearchEditor = {}));
            })(Panels = App.Panels || (App.Panels = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Panels;
            (function (Panels) {
                var SearchEditor;
                (function (SearchEditor) {
                    var BaseFilter = (function () {
                        function BaseFilter(clauseId, caption, clauseString, criteriaFormat) {
                            this.hasOptions = ko.observable(false);
                            this.hasItemPicker = ko.observable(false);
                            this.hasField = ko.observable(false);
                            this.errorVisible = ko.observable(false);
                            this.alertDetails = ko.observable("");
                            this.clauseId = clauseId;
                            this.caption = ko.observable(caption);
                            this.clauseString = clauseString;
                            this.criteriaFormat = criteriaFormat;
                        }
                        BaseFilter.prototype.getIsNegated = function () {
                            return false;
                        };
                        BaseFilter.prototype.getEnumName = function () {
                            return "Unknown";
                        };
                        BaseFilter.prototype.getEnumItems = function () {
                            return [];
                        };
                        BaseFilter.prototype.getObjectTypeName = function () {
                            return "Unknown";
                        };
                        BaseFilter.prototype.getFilterString = function () { return ""; };
                        BaseFilter.prototype.getCriteriaString = function () { return ""; };
                        BaseFilter.prototype.getHasValue = function () { return false; };
                        BaseFilter.prototype.setByString = function (filterValue) { };
                        ;
                        return BaseFilter;
                    }());
                    SearchEditor.BaseFilter = BaseFilter;
                    var EnumFilter = (function (_super) {
                        __extends(EnumFilter, _super);
                        function EnumFilter(clauseId, caption, clauseString, enumName, criteriaFormat) {
                            _super.call(this, clauseId, caption, clauseString, criteriaFormat);
                            this.hasOptions(true);
                            this.enumName = enumName;
                            this.options = ko.observableArray([]);
                        }
                        EnumFilter.prototype.setByString = function (filterString) {
                            var me = this;
                            if (filterString) {
                                var filterParts = filterString.split(":");
                                if (filterParts.length > 1) {
                                    var clauseId = filterParts[0];
                                    var filterValue = filterParts[1];
                                    _.each(me.options(), function (option) {
                                        option.Value(false);
                                    });
                                    var values = filterValue.split(",");
                                    _.each(values, function (value) {
                                        var checkbox = _.find(me.options(), function (currentOption) {
                                            return me.enumName + '_' + value == currentOption.Name;
                                        });
                                        if (checkbox) {
                                            checkbox.Value(true);
                                        }
                                    });
                                }
                            }
                        };
                        EnumFilter.prototype.getEnumName = function () {
                            return this.enumName;
                        };
                        EnumFilter.prototype.getEnumItems = function () {
                            return this.enumItems;
                        };
                        EnumFilter.prototype.getFilterString = function () {
                            var filterString = "";
                            var criteriaString = this.getCriteriaString();
                            if (criteriaString) {
                                filterString = this.clauseString + ":" + criteriaString;
                            }
                            return filterString;
                        };
                        EnumFilter.prototype.getHasValue = function () {
                            return this.getCriteriaString() != "";
                        };
                        EnumFilter.prototype.getCriteriaString = function () {
                            var _this = this;
                            var filterString = "";
                            var enumFilterString = "";
                            var typeNotSelected = false;
                            _.each(this.options(), function (currentOption) {
                                var name = currentOption.Name;
                                name = name.replace(_this.enumName + '_', '');
                                if (currentOption.Value()) {
                                    enumFilterString = enumFilterString + (enumFilterString ? ',' : '') + name;
                                }
                                else {
                                    typeNotSelected = true;
                                }
                            });
                            if (typeNotSelected) {
                                filterString = enumFilterString;
                            }
                            return filterString;
                        };
                        return EnumFilter;
                    }(BaseFilter));
                    SearchEditor.EnumFilter = EnumFilter;
                    var StringFilter = (function (_super) {
                        __extends(StringFilter, _super);
                        function StringFilter(caption, clauseId, clauseString, textBoxCaption, criteriaFormat, isList, listSeparator) {
                            _super.call(this, clauseId, caption, clauseString, criteriaFormat);
                            this.isList = isList;
                            this.listSeparator = listSeparator;
                            this.hasField(true);
                            var dummyPageItem = {
                                Caption: textBoxCaption,
                                Format: "String",
                                Name: clauseId,
                                Value: ko.observable(null),
                            };
                            var stringDecorator = new HP.HPTRIM.Form.StringDecorator(dummyPageItem);
                            stringDecorator.submitPropertyName = clauseId;
                            this.filterField = ko.observable(stringDecorator);
                        }
                        StringFilter.prototype.getHasValue = function () {
                            return this.getCriteriaString() != "";
                        };
                        StringFilter.prototype.getCriteriaString = function () {
                            var criteriaString = "";
                            if (this.filterField().Value()) {
                                criteriaString = this.filterField().Value();
                            }
                            criteriaString = criteriaString.trim();
                            if (this.isList) {
                                if (this.listSeparator && this.listSeparator.length == 1) {
                                    criteriaString = criteriaString.replace(/\s/g, '');
                                    if (criteriaString.charAt(criteriaString.length - 1) == this.listSeparator) {
                                        criteriaString = criteriaString.slice(0, criteriaString.length - 1);
                                    }
                                }
                            }
                            return criteriaString;
                        };
                        StringFilter.prototype.getFilterString = function () {
                            var filterString = "";
                            var criteriaString = this.getCriteriaString();
                            if (criteriaString) {
                                filterString = this.clauseString + ":" + criteriaString;
                            }
                            return filterString;
                        };
                        StringFilter.prototype.setByString = function (filterValue) {
                            if (filterValue.indexOf(':') != -1) {
                                filterValue = filterValue.slice(filterValue.indexOf(":") + 1);
                            }
                            this.filterField().setValue(filterValue);
                        };
                        return StringFilter;
                    }(BaseFilter));
                    SearchEditor.StringFilter = StringFilter;
                    var NumberFilter = (function (_super) {
                        __extends(NumberFilter, _super);
                        function NumberFilter(caption, clauseId, clauseString, textBoxCaption, criteriaFormat) {
                            _super.call(this, clauseId, caption, clauseString, criteriaFormat);
                            this.hasField(true);
                            var dummyPageItem = {
                                Caption: textBoxCaption,
                                Format: "Number",
                                Name: clauseId,
                                Value: ko.observable(null),
                            };
                            var numberDecorator = new HP.HPTRIM.Form.NumberDecorator(dummyPageItem);
                            numberDecorator.submitPropertyName = clauseId;
                            this.filterField = ko.observable(numberDecorator);
                        }
                        NumberFilter.prototype.getHasValue = function () {
                            return this.getCriteriaString() != "";
                        };
                        NumberFilter.prototype.getCriteriaString = function () {
                            var criteriaAsString = "";
                            if (this.filterField().Value()) {
                                criteriaAsString = this.filterField().Value();
                            }
                            if (criteriaAsString == "0") {
                                return "";
                            }
                            if (this.criteriaFormat && criteriaAsString) {
                                criteriaAsString = HPTRIM.Utils.String.format(this.criteriaFormat, [criteriaAsString]);
                            }
                            criteriaAsString = criteriaAsString.trim();
                            return criteriaAsString;
                        };
                        NumberFilter.prototype.getFilterString = function () {
                            var filterString = "";
                            var criteriaAsString = this.getCriteriaString();
                            if (criteriaAsString) {
                                filterString = this.clauseString + ":" + criteriaAsString;
                            }
                            return filterString;
                        };
                        NumberFilter.prototype.setByString = function (filterValue) {
                            if (filterValue.indexOf(':') != -1) {
                                filterValue = filterValue.slice(filterValue.indexOf(":") + 1);
                            }
                            var valueAsNumber = 0;
                            if (this.criteriaFormat) {
                                var parts = this.criteriaFormat.split(' ');
                                var tokenLocation = parts.indexOf('{0}');
                                if (tokenLocation >= 0) {
                                    var filterParts = filterValue.split(' ');
                                    if (filterParts.length >= tokenLocation) {
                                        valueAsNumber = parseInt(filterParts[tokenLocation]);
                                    }
                                    else {
                                        valueAsNumber = parseInt(filterValue);
                                    }
                                }
                                else {
                                    valueAsNumber = parseInt(filterValue);
                                }
                            }
                            else {
                                valueAsNumber = parseInt(filterValue);
                            }
                            if (isNaN(valueAsNumber)) {
                                valueAsNumber = 0;
                            }
                            this.filterField().setValue("" + valueAsNumber);
                        };
                        return NumberFilter;
                    }(BaseFilter));
                    SearchEditor.NumberFilter = NumberFilter;
                    var ObjectFilter = (function () {
                        function ObjectFilter(trimClient, clauseId, caption, clauseString, objectType, pickerFilterString) {
                            var _this = this;
                            this.hasOptions = ko.observable(false);
                            this.hasItemPicker = ko.observable(true);
                            this.hasField = ko.observable(false);
                            this.errorVisible = ko.observable(false);
                            this.alertDetails = ko.observable("");
                            this.getHasValue = function () {
                                return _this.filterItemPicker().hasValidValue;
                            };
                            this.setByString = function (newValue) {
                                _this.filterItemPicker().setRawValue(newValue);
                            };
                            this.clauseId = clauseId;
                            this.caption = ko.observable(caption);
                            this.clauseString = clauseString;
                            this.filterObjectType = objectType;
                            var itemPicker = undefined;
                            var title = objectType.Caption;
                            itemPicker = HP.HPTRIM.Form.TrimObjectDecorator.makeTrimItemPicker(trimClient, objectType.name, title, objectType.name, false, false);
                            itemPicker.submitPropertyName = clauseId;
                            if (itemPicker.isHidden) {
                                itemPicker.showTextField = true;
                                itemPicker.label(title);
                            }
                            if (pickerFilterString) {
                                itemPicker.filterClause(pickerFilterString);
                            }
                            this.filterItemPicker = ko.observable(itemPicker);
                        }
                        ObjectFilter.prototype.getIsNegated = function () {
                            return false;
                        };
                        ObjectFilter.prototype.getEnumName = function () {
                            return "Unknown";
                        };
                        ObjectFilter.prototype.getEnumItems = function () {
                            return [];
                        };
                        ObjectFilter.prototype.getObjectTypeName = function () {
                            return this.filterObjectType.name;
                        };
                        ObjectFilter.prototype.getFilterString = function () {
                            var filterValue = "";
                            if (this.filterItemPicker().getValue()) {
                                filterValue = this.filterItemPicker().getValue().Uri;
                            }
                            if (typeof (filterValue) != "number") {
                                filterValue = filterValue.trim();
                            }
                            if (filterValue) {
                                filterValue = this.clauseString + ":" + filterValue;
                            }
                            return filterValue;
                        };
                        ObjectFilter.prototype.getCriteriaString = function () {
                            var criteriaString = "";
                            if (this.filterItemPicker().getValue()) {
                                criteriaString = this.filterItemPicker().getValue().Uri;
                            }
                            criteriaString = criteriaString.trim();
                            return criteriaString;
                        };
                        return ObjectFilter;
                    }());
                    SearchEditor.ObjectFilter = ObjectFilter;
                    var BooleanFilter = (function (_super) {
                        __extends(BooleanFilter, _super);
                        function BooleanFilter(caption, clauseId, clauseString, options, reversed) {
                            _super.call(this, clauseId, caption, clauseString, null);
                            this.reversed = false;
                            this.hasOptions(true);
                            this.options = ko.observableArray(options);
                            this.reversed = reversed;
                        }
                        BooleanFilter.prototype.getHasValue = function () {
                            return this.getFilterString() != "";
                        };
                        BooleanFilter.prototype.getIsNegated = function () {
                            if (this.options().length == 0) {
                                return false;
                            }
                            var activeFilters = _.filter(this.options(), function (checkBox) {
                                return checkBox.Value() === true;
                            });
                            var negated = false;
                            if (!this.reversed) {
                                if (activeFilters.length == 1) {
                                    if (activeFilters[0].isNegated) {
                                        negated = true;
                                    }
                                }
                            }
                            else {
                                if (activeFilters.length == 0) {
                                    if (this.options()[0].isNegated) {
                                        negated = true;
                                    }
                                }
                            }
                            return negated;
                        };
                        BooleanFilter.prototype.getFilterString = function () {
                            var filterString = "";
                            if (this.options().length == 0) {
                                return filterString;
                            }
                            var activeFilters = _.filter(this.options(), function (checkBox) {
                                return checkBox.Value() === true;
                            });
                            if (this.reversed) {
                                if (activeFilters.length == 0) {
                                    if (this.options()[0].isNegated) {
                                        filterString = "not " + this.clauseString;
                                    }
                                    else {
                                        filterString = this.clauseString;
                                    }
                                }
                            }
                            else {
                                if (activeFilters.length == 1) {
                                    filterString = (activeFilters[0].isNegated ? 'not ' : '') + this.clauseString;
                                }
                            }
                            return filterString;
                        };
                        BooleanFilter.prototype.setByString = function (filterValue) {
                            var me = this;
                            var filterValueNegated = false;
                            if (filterValue.toLowerCase().indexOf("not ") != -1) {
                                filterValueNegated = true;
                            }
                            if (this.reversed) {
                                if (this.options()[0].isNegated) {
                                    this.options()[0].Value(false);
                                }
                                else {
                                    this.options()[0].Value(true);
                                }
                            }
                            else {
                                _.each(this.options(), function (checkBox) {
                                    if (filterValueNegated === checkBox.isNegated) {
                                        checkBox.Value(true);
                                    }
                                    else {
                                        checkBox.Value(false);
                                    }
                                });
                            }
                        };
                        return BooleanFilter;
                    }(BaseFilter));
                    SearchEditor.BooleanFilter = BooleanFilter;
                })(SearchEditor = Panels.SearchEditor || (Panels.SearchEditor = {}));
            })(Panels = App.Panels || (App.Panels = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Panels;
            (function (Panels) {
                var SearchEditor;
                (function (SearchEditor) {
                    var SearchFilterPanel = (function (_super) {
                        __extends(SearchFilterPanel, _super);
                        function SearchFilterPanel(trimClient, objectType, rawFilters) {
                            _super.call(this, "templates/Search/SearchFilterPanel");
                            this.title = ko.observable(HPTRIM.Messages.web_filter);
                            this.submitCaption = ko.observable(HPTRIM.Messages.web_dp_okText);
                            this.resetToDefaultCaption = ko.observable(HPTRIM.Messages.web_resetButtonCaption);
                            this.callback = function (filterString) { };
                            this.currentObjectFilterDefaults = [];
                            this.filterList = ko.observableArray([]);
                            this.showSaveFiltersAsDefault = ko.observable(false);
                            this.saveFiltersAsDefault = ko.observable(false);
                            this.showSaveOk = ko.observable(false);
                            this.rawFilters = [];
                            this.errCount = 0;
                            this.recordTypeRawFilter = [];
                            this.trimClient = trimClient;
                            this.objectType = objectType;
                            var me = this;
                            this.recordTypeRawFilter.push((new SearchEditor.SearchRecordTypeFilterPanel(this.trimClient)).getRawFilter());
                            this.saveFiltersAsDefaultCheckbox = HPTRIM.Utils.Form.initialiseCheckBox(this.saveFiltersAsDefault, HPTRIM.Messages.web_saveAsDefaultFilter);
                            if (objectType.Name == HPTRIM.BaseObjectTypes.Record.Name
                                || objectType.Name == HPTRIM.BaseObjectTypes.Location.Name
                                || objectType.Name == HPTRIM.BaseObjectTypes.Workflow.Name
                                || objectType.Name == HPTRIM.BaseObjectTypes.Activity.Name) {
                                this.showSaveFiltersAsDefault(true);
                            }
                            var currentObjectDefaults = this.trimClient.getSearchDefaultsForObject(objectType);
                            this.currentObjectFilterDefaults = currentObjectDefaults.Filters;
                            this.rawFilters = rawFilters;
                            this.makeFilters(trimClient, this.rawFilters);
                        }
                        SearchFilterPanel.prototype.makeFilters = function (trimClient, rawFilters) {
                            var _this = this;
                            if (rawFilters) {
                                _.forEach(rawFilters, function (rawFilter) {
                                    if (rawFilter.format == "boolean") {
                                        _this.filterList.push(_this.makeBooleanFilter(rawFilter));
                                    }
                                    else if (rawFilter.format == "enum") {
                                        _this.filterList.push(_this.makeEnumFilter(rawFilter));
                                    }
                                    else if (rawFilter.format == "string") {
                                        _this.filterList.push(_this.makeStringFilter(rawFilter));
                                    }
                                    else if (rawFilter.format == "number") {
                                        _this.filterList.push(_this.makeNumberFilter(rawFilter));
                                    }
                                    else if (rawFilter.format == "caption") {
                                        _this.filterList.push(_this.makeBaseFilter(rawFilter));
                                    }
                                    else if (rawFilter.format == "unknown") {
                                        _this.filterList.push(_this.makeBaseFilter(rawFilter));
                                    }
                                    else if (rawFilter.format == "object") {
                                        _this.filterList.push(_this.makeObjectFilter(trimClient, rawFilter));
                                    }
                                });
                            }
                        };
                        SearchFilterPanel.prototype.showError = function (enumFilter) {
                            var me = this;
                            if (enumFilter.errCaption != "" && enumFilter.errCaption != undefined) {
                                enumFilter.alertDetails(enumFilter.errCaption);
                                enumFilter.errorVisible(true);
                            }
                        };
                        SearchFilterPanel.prototype.makeEnumFilter = function (rawFilter) {
                            var _this = this;
                            var me = this;
                            var enumFilter = new SearchEditor.EnumFilter(rawFilter.clauseId, rawFilter.caption, rawFilter.clauseString, rawFilter.enumName, rawFilter.criteriaFormat);
                            this.trimClient.getAndProcessEnumDefinition(enumFilter.enumName, function (newEnumArray) {
                                var DefaultFilterClauseForThisEnum = _.find(_this.currentObjectFilterDefaults, function (filter) {
                                    return filter.ClauseId == rawFilter.clauseId;
                                });
                                enumFilter.enumItems = newEnumArray;
                                var oneInGroupMustBeOn = rawFilter.oneInGroupMustBeOn;
                                var checkboxArray = [];
                                var activeEnumValues = [];
                                if (DefaultFilterClauseForThisEnum) {
                                    var criteriaString = DefaultFilterClauseForThisEnum.CriteriaString;
                                    var criteriaArray = criteriaString.split(',');
                                    _.forEach(criteriaArray, function (criteria) {
                                        var value = _.find(newEnumArray, function (enumItemValue) {
                                            return enumItemValue.Value == +criteria;
                                        });
                                        if (value) {
                                            activeEnumValues.push(value);
                                        }
                                    });
                                }
                                _.forEach(newEnumArray, function (newEnumValue) {
                                    var checkbox = new HP.HPTRIM.Form.TickCheckBox({
                                        Caption: newEnumValue.Caption,
                                        Value: ko.observable(true),
                                        Name: rawFilter.enumName + '_' + newEnumValue.Value
                                    });
                                    if (DefaultFilterClauseForThisEnum) {
                                        var activeItem = _.find(activeEnumValues, function (selectedEnum) {
                                            return selectedEnum.Name == newEnumValue.Name;
                                        });
                                        if (activeItem) {
                                            checkbox.Value(true);
                                        }
                                        else {
                                            checkbox.Value(false);
                                        }
                                    }
                                    enumFilter.options.push(checkbox);
                                    checkboxArray.push(checkbox);
                                });
                                if (oneInGroupMustBeOn) {
                                    _.each(checkboxArray, function (checkBox) {
                                        checkBox.Value.subscribe(function (newValue) {
                                            var valueChecked = false;
                                            _.each(checkboxArray, function (currentCheckBox) {
                                                valueChecked = currentCheckBox.Value() || valueChecked;
                                            });
                                            if (!valueChecked) {
                                                enumFilter.errCaption = rawFilter.errCaption;
                                                me.showError(enumFilter);
                                                me.showSaveOk(true);
                                                me.errCount++;
                                            }
                                            else if (valueChecked) {
                                                if (enumFilter.errorVisible()) {
                                                    me.clearError(enumFilter);
                                                    if (me.showSaveOk() && me.errCount > 0) {
                                                        me.errCount--;
                                                        if (me.errCount <= 0)
                                                            me.showSaveOk(false);
                                                    }
                                                }
                                            }
                                        });
                                    });
                                }
                            });
                            return enumFilter;
                        };
                        SearchFilterPanel.prototype.clearError = function (enumFilter) {
                            enumFilter.errorVisible(false);
                            enumFilter.alertDetails('');
                        };
                        SearchFilterPanel.prototype.makeBaseFilter = function (rawFilter) {
                            return new SearchEditor.BaseFilter(rawFilter.clauseId, rawFilter.caption, rawFilter.clauseString, rawFilter.criteriaFormat);
                        };
                        SearchFilterPanel.prototype.makeObjectFilter = function (trimClient, rawFilter) {
                            var me = this;
                            var objectFilter = new SearchEditor.ObjectFilter(trimClient, rawFilter.clauseId, rawFilter.caption, rawFilter.clauseString, rawFilter.objectType, rawFilter.pickerFilterString);
                            var clauseId = rawFilter.clauseId;
                            var defaultFilterClause = _.find(this.currentObjectFilterDefaults, function (filterDef) {
                                return filterDef.ClauseId == clauseId;
                            });
                            if (defaultFilterClause) {
                                objectFilter.filterItemPicker().setAndLoadValue(defaultFilterClause.CriteriaString);
                            }
                            return objectFilter;
                        };
                        SearchFilterPanel.prototype.makeStringFilter = function (rawFilter) {
                            var me = this;
                            var stringFilter = new SearchEditor.StringFilter(rawFilter.caption, rawFilter.clauseId, rawFilter.clauseString, rawFilter.fieldCaption, rawFilter.criteriaFormat, rawFilter.isList, rawFilter.listSeparator);
                            var clauseId = rawFilter.clauseId;
                            var defaultFilterClause = _.find(this.currentObjectFilterDefaults, function (filterDef) {
                                return filterDef.ClauseId == clauseId;
                            });
                            if (defaultFilterClause) {
                                stringFilter.setByString(defaultFilterClause.CriteriaString);
                            }
                            return stringFilter;
                        };
                        SearchFilterPanel.prototype.makeNumberFilter = function (rawFilter) {
                            var me = this;
                            var numberFilter = new SearchEditor.NumberFilter(rawFilter.caption, rawFilter.clauseId, rawFilter.clauseString, rawFilter.fieldCaption, rawFilter.criteriaFormat);
                            var clauseId = rawFilter.clauseId;
                            var defaultFilterClause = _.find(this.currentObjectFilterDefaults, function (filterDef) {
                                return filterDef.ClauseId == clauseId;
                            });
                            if (defaultFilterClause) {
                                numberFilter.setByString(defaultFilterClause.CriteriaString);
                            }
                            return numberFilter;
                        };
                        SearchFilterPanel.prototype.makeBooleanFilter = function (rawFilter) {
                            var me = this;
                            var checkboxArray = [];
                            var clauseId = rawFilter.clauseId;
                            var oneInGroupMustBeOn = rawFilter.oneInGroupMustBeOn;
                            var defaultClauseFound = false;
                            var defaultClauseIsNegated = false;
                            var defaultFilterClause = _.find(this.currentObjectFilterDefaults, function (filterDef) {
                                return filterDef.ClauseId == clauseId;
                            });
                            if (defaultFilterClause) {
                                defaultClauseFound = true;
                                if (defaultFilterClause.IsNegated) {
                                    defaultClauseIsNegated = true;
                                }
                            }
                            var booleanFilter = new SearchEditor.BooleanFilter(rawFilter.caption, rawFilter.clauseId, rawFilter.clauseString, checkboxArray, rawFilter.reversed);
                            _.each(rawFilter.options, function (filterOption) {
                                var initValue = true;
                                if (rawFilter.defaultUnchecked) {
                                    initValue = false;
                                }
                                if (defaultClauseFound) {
                                    initValue = false;
                                    if (filterOption.negated === defaultClauseIsNegated) {
                                        initValue = true;
                                    }
                                }
                                var checkbox = new HP.HPTRIM.Form.TickCheckBox({
                                    Caption: filterOption.caption,
                                    Value: ko.observable(initValue),
                                    Name: filterOption.name,
                                });
                                if (filterOption.negated) {
                                    checkbox.isNegated = true;
                                }
                                checkboxArray.push(checkbox);
                            });
                            if (oneInGroupMustBeOn) {
                                _.each(checkboxArray, function (checkBox) {
                                    checkBox.Value.subscribe(function (newValue) {
                                        if (newValue) {
                                            return;
                                        }
                                        var valueChecked = false;
                                        _.each(checkboxArray, function (currentCheckBox) {
                                            valueChecked = currentCheckBox.Value() || valueChecked;
                                        });
                                        if (!valueChecked) {
                                            booleanFilter.errCaption = rawFilter.errCaption;
                                            checkBox.Value(true);
                                        }
                                    });
                                });
                            }
                            return booleanFilter;
                        };
                        SearchFilterPanel.prototype.reset = function () {
                            this.filterList([]);
                            this.makeFilters(this.trimClient, this.rawFilters);
                        };
                        SearchFilterPanel.prototype.setFilterString = function (rawFilterString) {
                            var me = this;
                            var rawFilter = [];
                            if (rawFilterString) {
                                var trimmedFilterString = rawFilterString.trim();
                                if (trimmedFilterString) {
                                    var rawFilterParts = rawFilterString.split(" ");
                                    for (var i = 0; i < rawFilterParts.length; i++) {
                                        var currentFilterString = rawFilterParts[i];
                                        if (currentFilterString == "not") {
                                            i = i + 1;
                                            currentFilterString = currentFilterString + " " + rawFilterParts[i];
                                        }
                                        var clauseName = rawFilterParts[i].split(':')[0];
                                        _.forEach(this.filterList(), function (filter) {
                                            if (filter.clauseString == clauseName) {
                                                if (filter.criteriaFormat) {
                                                    var criteriaFormatParts = filter.criteriaFormat.split(' ');
                                                    if (criteriaFormatParts.length > 1) {
                                                        for (var j = 1; j < criteriaFormatParts.length; j++) {
                                                            i++;
                                                            if (i < rawFilterParts.length) {
                                                                currentFilterString = currentFilterString + " " + rawFilterParts[i];
                                                            }
                                                        }
                                                    }
                                                }
                                                filter.setByString(currentFilterString);
                                            }
                                        });
                                    }
                                }
                            }
                        };
                        SearchFilterPanel.prototype.saveSearchFilters = function (continueCallback, failCallback, suppliedRecordTypeFilter) {
                            var _this = this;
                            var me = this;
                            var filtersToSave = [];
                            _.each(this.filterList(), function (filter) {
                                if (filter.getHasValue()) {
                                    var rawNewFilter = {
                                        "AccessControlType": 65535,
                                        "ClauseId": filter.clauseId,
                                        "ComparisonOperator": "Matching",
                                        "CriteriaString": filter.getCriteriaString(),
                                        "IsFieldSearch": false,
                                        "IsNegated": filter.getIsNegated(),
                                        "EnumName": filter.getEnumName(),
                                        "EnumItems": [],
                                        "TrimType": filter.getObjectTypeName(),
                                        "IsOperator": false,
                                        "IsSearchClause": true
                                    };
                                    filtersToSave.push(rawNewFilter);
                                }
                            });
                            if (suppliedRecordTypeFilter) {
                                filtersToSave.push(suppliedRecordTypeFilter);
                            }
                            else if (this.objectType == HPTRIM.BaseObjectTypes.Record) {
                                var currentObjectDefaults = this.trimClient.getSearchDefaultsForObject(this.objectType);
                                var oldObjectFilterDefaults = currentObjectDefaults.Filters;
                                var recordTypeFilter = _.find(oldObjectFilterDefaults, function (oldFilter) {
                                    return oldFilter.ClauseId == "RecordType";
                                });
                                if (recordTypeFilter) {
                                    if (!(recordTypeFilter.CriteriaString.indexOf("uri:") === 0)) {
                                        recordTypeFilter.CriteriaString = "uri:" + recordTypeFilter.CriteriaString;
                                    }
                                    filtersToSave.push(recordTypeFilter);
                                }
                            }
                            var currentObjectDefaults = this.trimClient.getSearchDefaultsForObject(this.objectType);
                            var rawSearchDefaults = {};
                            currentObjectDefaults.Filters = filtersToSave;
                            rawSearchDefaults[this.objectType.name] = currentObjectDefaults;
                            var data = {};
                            data['SearchDefaults'] = rawSearchDefaults;
                            var Uri = parseInt(this.trimClient.getDatabase().getCurrentUser().Uri);
                            var saveRequest = new HPTRIM.TrimObjectSave(this.trimClient, HPTRIM.BaseObjectTypes.Location, Uri);
                            saveRequest.doRequestEx(data).done(function (result) {
                                _this.trimClient.updateSearchDefaultFilters(me.objectType, filtersToSave);
                                continueCallback();
                            }).fail(function (error) {
                                var errorMsg = HP.HPTRIM.Messages.web_unableToConnectToWebServices;
                                if (error.message) {
                                    errorMsg = error.message;
                                }
                                failCallback(errorMsg);
                            });
                        };
                        SearchFilterPanel.prototype.getCurrentDefaultFilterString = function () {
                            var me = this;
                            var defaultFilterString = "";
                            _.forEach(this.currentObjectFilterDefaults, function (defaultFilter) {
                                if (defaultFilterString) {
                                    defaultFilterString = defaultFilterString + " ";
                                }
                                if (defaultFilter.IsNegated) {
                                    defaultFilterString = defaultFilterString + " not ";
                                }
                                var clauseId = defaultFilter.ClauseId;
                                var rawDefaultFilter = (_.find(me.rawFilters, function (rawFilter) {
                                    return rawFilter.clauseId == clauseId;
                                }));
                                if (!rawDefaultFilter) {
                                    rawDefaultFilter = (_.find(me.recordTypeRawFilter, function (recordTypeRawFilter) {
                                        if (recordTypeRawFilter.clauseId == undefined) {
                                            recordTypeRawFilter.clauseId = recordTypeRawFilter.ClauseId;
                                        }
                                        return recordTypeRawFilter.clauseId == clauseId;
                                    }));
                                }
                                if (rawDefaultFilter) {
                                    clauseId = rawDefaultFilter.clauseString;
                                }
                                ;
                                defaultFilterString = defaultFilterString + clauseId;
                                if (defaultFilter.CriteriaString) {
                                    defaultFilterString = defaultFilterString + ":" + defaultFilter.CriteriaString;
                                }
                            });
                            return defaultFilterString;
                        };
                        SearchFilterPanel.prototype.getFilterString = function () {
                            var filterString = "";
                            var addFilter = function (newPart) {
                                if (filterString && newPart) {
                                    filterString = filterString + " " + newPart;
                                }
                                else {
                                    filterString = filterString + newPart;
                                }
                            };
                            _.forEach(this.filterList(), function (filter) {
                                addFilter(filter.getFilterString());
                            });
                            return filterString;
                        };
                        return SearchFilterPanel;
                    }(HP.HPTRIM.Framework.Components.Layouts.Panel));
                    SearchEditor.SearchFilterPanel = SearchFilterPanel;
                    var SearchOptionFilterPanel = (function (_super) {
                        __extends(SearchOptionFilterPanel, _super);
                        function SearchOptionFilterPanel(trimClient, objectType, rawFilters) {
                            _super.call(this, "templates/Search/SearchOptionFilterPanel");
                            this.title = ko.observable(HPTRIM.Messages.web_options);
                            this.submitCaption = ko.observable(HPTRIM.Messages.web_dp_okText);
                            this.resetToDefaultCaption = ko.observable(HPTRIM.Messages.web_resetButtonCaption);
                            this.callback = function (filterString) { };
                            this.currentObjectFilterDefaults = [];
                            this.filterList = ko.observableArray([]);
                            this.showSaveFiltersAsDefault = ko.observable(false);
                            this.saveFiltersAsDefault = ko.observable(false);
                            this.showSaveOk = ko.observable(false);
                            this.rawFilters = [];
                            this.errCount = 0;
                            this.trimClient = trimClient;
                            this.objectType = objectType;
                            var me = this;
                            this.saveFiltersAsDefaultCheckbox = HPTRIM.Utils.Form.initialiseCheckBox(this.saveFiltersAsDefault, HPTRIM.Messages.web_saveAsDefaultOption);
                            if (objectType.Name == HPTRIM.BaseObjectTypes.Record.Name
                                || objectType.Name == HPTRIM.BaseObjectTypes.Activity.Name) {
                                this.showSaveFiltersAsDefault(true);
                            }
                            var currentObjectDefaults = this.trimClient.getSearchDefaultsForObject(objectType);
                            this.currentObjectFilterDefaults = currentObjectDefaults.Filters;
                            this.rawFilters = rawFilters;
                            this.makeFilters(trimClient, this.rawFilters);
                        }
                        SearchOptionFilterPanel.prototype.makeFilters = function (trimClient, rawFilters) {
                            var _this = this;
                            if (rawFilters) {
                                _.forEach(rawFilters, function (rawFilter) {
                                    if (rawFilter.format == "boolean") {
                                        _this.filterList.push(_this.makeBooleanFilter(rawFilter));
                                    }
                                });
                            }
                        };
                        SearchOptionFilterPanel.prototype.showError = function (enumFilter) {
                            var me = this;
                            if (enumFilter.errCaption != "" && enumFilter.errCaption != undefined) {
                                enumFilter.alertDetails(enumFilter.errCaption);
                                enumFilter.errorVisible(true);
                            }
                        };
                        SearchOptionFilterPanel.prototype.clearError = function (enumFilter) {
                            enumFilter.errorVisible(false);
                            enumFilter.alertDetails('');
                        };
                        SearchOptionFilterPanel.prototype.makeBooleanFilter = function (rawFilter) {
                            var me = this;
                            var checkboxArray = [];
                            var clauseId = rawFilter.clauseId;
                            var oneInGroupMustBeOn = rawFilter.oneInGroupMustBeOn;
                            var defaultClauseFound = false;
                            var defaultClauseIsNegated = false;
                            var defaultFilterClause = _.find(this.currentObjectFilterDefaults, function (filterDef) {
                                return filterDef.ClauseId == clauseId;
                            });
                            if (defaultFilterClause) {
                                defaultClauseFound = true;
                                if (defaultFilterClause.IsNegated) {
                                    defaultClauseIsNegated = true;
                                }
                            }
                            var booleanFilter = new SearchEditor.BooleanFilter(rawFilter.caption, rawFilter.clauseId, rawFilter.clauseString, checkboxArray, rawFilter.reversed);
                            _.each(rawFilter.options, function (filterOption) {
                                var initValue = true;
                                if (rawFilter.defaultUnchecked) {
                                    initValue = false;
                                }
                                if (defaultClauseFound) {
                                    initValue = false;
                                    if (filterOption.negated === defaultClauseIsNegated) {
                                        initValue = true;
                                    }
                                }
                                var checkbox = new HP.HPTRIM.Form.TickCheckBox({
                                    Caption: filterOption.caption,
                                    Value: ko.observable(initValue),
                                    Name: filterOption.name,
                                });
                                if (filterOption.negated) {
                                    checkbox.isNegated = true;
                                }
                                checkboxArray.push(checkbox);
                            });
                            if (oneInGroupMustBeOn) {
                                _.each(checkboxArray, function (checkBox) {
                                    checkBox.Value.subscribe(function (newValue) {
                                        if (newValue) {
                                            return;
                                        }
                                        var valueChecked = false;
                                        _.each(checkboxArray, function (currentCheckBox) {
                                            valueChecked = currentCheckBox.Value() || valueChecked;
                                        });
                                        if (!valueChecked) {
                                            booleanFilter.errCaption = rawFilter.errCaption;
                                            checkBox.Value(true);
                                        }
                                    });
                                });
                            }
                            return booleanFilter;
                        };
                        SearchOptionFilterPanel.prototype.reset = function () {
                            this.filterList([]);
                            this.makeFilters(this.trimClient, this.rawFilters);
                        };
                        SearchOptionFilterPanel.prototype.setOptionString = function (rawFilterString) {
                            var me = this;
                            var rawFilter = [];
                            if (rawFilterString) {
                                var trimmedFilterString = rawFilterString.trim();
                                if (trimmedFilterString) {
                                    var rawFilterParts = rawFilterString.split(" ");
                                    for (var i = 0; i < rawFilterParts.length; i++) {
                                        var currentFilterString = rawFilterParts[i];
                                        if (currentFilterString == "not") {
                                            i = i + 1;
                                            currentFilterString = currentFilterString + " " + rawFilterParts[i];
                                        }
                                        var clauseName = rawFilterParts[i].split(':')[0];
                                        _.forEach(this.filterList(), function (filter) {
                                            if (filter.clauseString == clauseName) {
                                                if (filter.criteriaFormat) {
                                                    var criteriaFormatParts = filter.criteriaFormat.split(' ');
                                                    if (criteriaFormatParts.length > 1) {
                                                        for (var j = 1; j < criteriaFormatParts.length; j++) {
                                                            i++;
                                                            if (i < rawFilterParts.length) {
                                                                currentFilterString = currentFilterString + " " + rawFilterParts[i];
                                                            }
                                                        }
                                                    }
                                                }
                                                filter.setByString(currentFilterString);
                                            }
                                        });
                                    }
                                }
                            }
                        };
                        SearchOptionFilterPanel.prototype.saveSearchOptionsFilters = function (continueCallback, failCallback, suppliedSearchOptionsFilter) {
                            var me = this;
                            var optionString = me.getOptionString();
                            var data = {};
                            if (this.objectType == HPTRIM.BaseObjectTypes.Record || this.objectType == HPTRIM.BaseObjectTypes.Activity) {
                                _.forEach(this.filterList(), function (filter) {
                                    _.forEach(filter.options(), function (option) {
                                        data[option.Id] = option.Value();
                                    });
                                });
                                var path = "UserOptions/Search";
                                this.trimClient.doPost(path, data).done(function (response) {
                                    continueCallback();
                                }).fail(function (rawResponse) {
                                    var errMessage = HPTRIM.Messages.web_error;
                                    if (rawResponse.ResponseStatus && rawResponse.ResponseStatus.Message) {
                                        errMessage = rawResponse.ResponseStatus.Message;
                                    }
                                    failCallback(errMessage);
                                });
                            }
                        };
                        SearchOptionFilterPanel.prototype.getCurrentDefaultFilterString = function () {
                            var me = this;
                            var defaultFilterString = "";
                            _.forEach(this.currentObjectFilterDefaults, function (defaultFilter) {
                                if (defaultFilterString) {
                                    defaultFilterString = defaultFilterString + " ";
                                }
                                if (defaultFilter.IsNegated) {
                                    defaultFilterString = defaultFilterString + " not ";
                                }
                                var clauseId = defaultFilter.ClauseId;
                                var rawDefaultFilter = (_.find(me.rawFilters, function (rawFilter) {
                                    return rawFilter.clauseId == clauseId;
                                }));
                                if (rawDefaultFilter) {
                                    clauseId = rawDefaultFilter.clauseString;
                                }
                                ;
                                defaultFilterString = defaultFilterString + clauseId;
                                if (defaultFilter.CriteriaString) {
                                    defaultFilterString = defaultFilterString + ":" + defaultFilter.CriteriaString;
                                }
                            });
                            return defaultFilterString;
                        };
                        SearchOptionFilterPanel.prototype.getOptionString = function () {
                            var filterString = "";
                            var addFilter = function (newPart) {
                                if (filterString && newPart) {
                                    filterString = filterString + " " + newPart;
                                }
                                else {
                                    filterString = filterString + newPart;
                                }
                            };
                            _.forEach(this.filterList(), function (filter) {
                                addFilter(filter.getFilterString());
                            });
                            return filterString;
                        };
                        return SearchOptionFilterPanel;
                    }(HP.HPTRIM.Framework.Components.Layouts.Panel));
                    SearchEditor.SearchOptionFilterPanel = SearchOptionFilterPanel;
                })(SearchEditor = Panels.SearchEditor || (Panels.SearchEditor = {}));
            })(Panels = App.Panels || (App.Panels = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Panels;
            (function (Panels) {
                var SearchEditor;
                (function (SearchEditor) {
                    var SearchRecordTypeFilterPanel = (function (_super) {
                        __extends(SearchRecordTypeFilterPanel, _super);
                        function SearchRecordTypeFilterPanel(trimClient) {
                            var _this = this;
                            _super.call(this, "templates/Search/SearchRecordTypeFilterPanel");
                            this.title = ko.observable(HPTRIM.Messages.web_filter);
                            this.submitCaption = ko.observable(HPTRIM.Messages.web_dp_okText);
                            this.resetToDefaultCaption = ko.observable(HPTRIM.Messages.web_resetButtonCaption);
                            this.callback = function (filterString) { };
                            this.currentObjectFilterDefaults = [];
                            this.recordTypes = ko.observableArray([]);
                            this.saveFiltersAsDefault = ko.observable(false);
                            this.pendingRequest = ko.observable(false);
                            this.currentIndex = ko.observable(0);
                            this.currentPageNo = ko.observable(0);
                            this.trimClient = trimClient;
                            this.hasDefaults = false;
                            this.hasMoreItems = true;
                            var currentObjectDefaults = this.trimClient.getSearchDefaultsForObject(HPTRIM.BaseObjectTypes.Record);
                            this.currentObjectFilterDefaults = currentObjectDefaults.Filters;
                            this.pageSize = 200;
                            this.currentIndex(0);
                            var defaultFilterClauseForRecordType = _.find(this.currentObjectFilterDefaults, function (filter) {
                                return filter.ClauseId == "RecordType";
                            });
                            this.defaultTypeUriArray = [];
                            if (defaultFilterClauseForRecordType && defaultFilterClauseForRecordType.CriteriaString.trim() != "all") {
                                this.hasDefaults = true;
                                var criteriaString = defaultFilterClauseForRecordType.CriteriaString;
                                if (criteriaString && criteriaString.charAt(0) == '[' && criteriaString.charAt(criteriaString.length - 1) == ']') {
                                    criteriaString = criteriaString.slice(1, criteriaString.length - 1);
                                }
                                if (criteriaString == "all") {
                                    this.hasDefaults = false;
                                }
                                else {
                                    var uriString = criteriaString.slice(criteriaString.indexOf(':') + 1);
                                    this.defaultTypeUriArray = uriString.split(",");
                                }
                            }
                            this.saveFiltersAsDefaultCheckbox = HPTRIM.Utils.Form.initialiseCheckBox(this.saveFiltersAsDefault, HPTRIM.Messages.web_saveAsRecordTypeDefaultFilter);
                            this.updateQuery();
                            var selectAllState = !this.hasDefaults;
                            var option = {
                                Value: ko.observable(selectAllState),
                                Caption: HP.HPTRIM.Messages.web_selectAll
                            };
                            var dropDown = new HP.HPTRIM.Form.TickCheckBox(option);
                            dropDown.onClick = function (tickCheckBox, evt) {
                                if (tickCheckBox.Value() == true) {
                                    _this.selectAll();
                                }
                                else {
                                    _this.clearAll();
                                }
                                return true;
                            };
                            this.selectionControl = dropDown;
                        }
                        SearchRecordTypeFilterPanel.prototype.scrolled = function (data, event) {
                            var elem = event.target;
                            if (elem.scrollTop + elem.offsetHeight >= elem.scrollHeight) {
                                this.updateQuery();
                            }
                        };
                        SearchRecordTypeFilterPanel.prototype.updateQuery = function () {
                            if (!this.pendingRequest() && this.hasMoreItems) {
                                var me = this;
                                var typesRequest = new HPTRIM.TrimMainObjectSearch(this.trimClient, HPTRIM.BaseObjectTypes.RecordType);
                                typesRequest.setItemsToLoad(this.currentIndex(), this.pageSize);
                                typesRequest.setProperties(["name", "icon"]);
                                typesRequest.setSearchString("all");
                                typesRequest.setPuropose(HP.HPTRIM.RecordTypeFilter.ForRecordSearch.toString());
                                this.pendingRequest(true);
                                typesRequest.page().done(function (resultSet) {
                                    me.pendingRequest(false);
                                    if (resultSet.Results) {
                                        var recordTypeArray = [];
                                        _.each(resultSet.Results, function (rawRecordType) {
                                            var typeName = rawRecordType.RecordTypeName ? rawRecordType.RecordTypeName.Value : "";
                                            var checkValue = true;
                                            if (me.hasDefaults) {
                                                checkValue = false;
                                                if (_.find(me.defaultTypeUriArray, function (uri) { return rawRecordType.Uri == uri; })) {
                                                    checkValue = true;
                                                }
                                            }
                                            var selectedObservable = ko.observable(checkValue);
                                            var recordTypeFilterItem = {
                                                caption: ko.observable(typeName),
                                                name: ko.observable(typeName),
                                                icon: ko.observable(rawRecordType.Icon ? rawRecordType.Icon.Id.toLowerCase() + "_x24" : ""),
                                                uri: rawRecordType.Uri,
                                                selected: selectedObservable,
                                                selectedCheckbox: new HP.HPTRIM.Form.TickCheckBox({
                                                    Caption: '',
                                                    Value: selectedObservable,
                                                    Name: '',
                                                }),
                                            };
                                            recordTypeArray.push(recordTypeFilterItem);
                                        });
                                        var tempRecordTypes = me.recordTypes();
                                        me.recordTypes(tempRecordTypes.concat(recordTypeArray));
                                        if (resultSet.TotalResults && me.currentIndex() == 0) {
                                            me.pages = ((resultSet.TotalResults % me.pageSize) > 0) ? 1 + Math.floor(resultSet.TotalResults / me.pageSize) : resultSet.TotalResults / me.pageSize;
                                            me.currentPageNo(1);
                                        }
                                        if (me.currentIndex() == 0) {
                                            me.currentPageNo(1);
                                            me.currentIndex(me.pageSize + 1);
                                        }
                                        else {
                                            me.currentPageNo(((me.currentIndex() % me.pageSize) > 0) ? 1 + Math.floor(me.currentIndex() / me.pageSize) : me.currentIndex() / me.pageSize);
                                            me.currentIndex((me.currentPageNo() * me.pageSize) + 1);
                                        }
                                        me.hasMoreItems = resultSet.HasMoreItems;
                                    }
                                });
                            }
                        };
                        SearchRecordTypeFilterPanel.prototype.showError = function (message) {
                        };
                        SearchRecordTypeFilterPanel.prototype.reset = function () {
                        };
                        SearchRecordTypeFilterPanel.prototype.getCurrentDefaultFilterString = function () {
                        };
                        SearchRecordTypeFilterPanel.prototype.getRawFilter = function () {
                            var rawTypeNewFilter = null;
                            if (this.getCriteriaString()) {
                                rawTypeNewFilter = {
                                    "AccessControlType": 65535,
                                    "ClauseId": "RecordType",
                                    "clauseString": "type",
                                    "ComparisonOperator": "Matching",
                                    "CriteriaString": this.getCriteriaString(),
                                    "IsFieldSearch": false,
                                    "IsNegated": false,
                                    "EnumName": "Unknown",
                                    "EnumItems": [],
                                    "TrimType": "RecordType",
                                    "IsOperator": false,
                                    "IsSearchClause": true
                                };
                            }
                            return rawTypeNewFilter;
                        };
                        SearchRecordTypeFilterPanel.prototype.saveSearchFilters = function (continueCallback, failCallback) {
                            var _this = this;
                            var me = this;
                            var rawTypeNewFilter = this.getRawFilter();
                            var currentObjectDefaults = this.trimClient.getSearchDefaultsForObject(HPTRIM.BaseObjectTypes.Record);
                            var filtersToSave = _.filter(currentObjectDefaults.Filters, function (defaultFilter) {
                                return defaultFilter.ClauseId != "RecordType";
                            });
                            if (me.getCriteriaString()) {
                                filtersToSave.push(rawTypeNewFilter);
                            }
                            ;
                            var currentObjectDefaults = this.trimClient.getSearchDefaultsForObject(HPTRIM.BaseObjectTypes.Record);
                            var rawSearchDefaults = {};
                            currentObjectDefaults.Filters = filtersToSave;
                            rawSearchDefaults["Record"] = currentObjectDefaults;
                            var data = {};
                            data['SearchDefaults'] = rawSearchDefaults;
                            var Uri = parseInt(this.trimClient.getDatabase().getCurrentUser().Uri);
                            var saveRequest = new HPTRIM.TrimObjectSave(this.trimClient, HPTRIM.BaseObjectTypes.Location, Uri);
                            saveRequest.doRequestEx(data).done(function (result) {
                                _this.trimClient.updateSearchDefaultFilters(HPTRIM.BaseObjectTypes.Record, filtersToSave);
                                continueCallback();
                            }).fail(function (error) {
                                var errorMsg = HP.HPTRIM.Messages.web_unableToConnectToWebServices;
                                if (error.message) {
                                    errorMsg = error.message;
                                }
                                failCallback(errorMsg);
                            });
                        };
                        SearchRecordTypeFilterPanel.prototype.clearAll = function () {
                            _.forEach(this.recordTypes(), function (recordType) {
                                recordType.selected(false);
                            });
                        };
                        SearchRecordTypeFilterPanel.prototype.selectAll = function () {
                            _.forEach(this.recordTypes(), function (recordType) {
                                recordType.selected(true);
                            });
                        };
                        SearchRecordTypeFilterPanel.prototype.setFilterString = function (filterString) {
                            var me = this;
                            if (filterString) {
                                var filterList = filterString.split(" ");
                                _.each(filterList, function (rawFilter) {
                                    var filterParts = rawFilter.split(":");
                                    if (filterParts.length >= 2) {
                                        if (filterParts[0] == "type") {
                                            var typeString = filterParts[1];
                                            if (typeString == "all") {
                                                me.selectAll();
                                            }
                                            if (filterParts[1] == "uri") {
                                                typeString = filterParts[2];
                                                var types = typeString.split(",");
                                                me.setTypes(types);
                                            }
                                        }
                                    }
                                });
                            }
                        };
                        SearchRecordTypeFilterPanel.prototype.setTypes = function (typeUris) {
                            var me = this;
                            var setTypesWorker = function () {
                                _.forEach(me.recordTypes(), function (recordType) {
                                    recordType.selected(false);
                                });
                                _.forEach(typeUris, function (selectedUri) {
                                    var recordTypeCheckbox = _.find(me.recordTypes(), function (recordType) {
                                        return (recordType.uri == selectedUri);
                                    });
                                    if (recordTypeCheckbox) {
                                        recordTypeCheckbox.selected(true);
                                    }
                                    ;
                                });
                            };
                            if (me.recordTypes().length > 0) {
                                setTypesWorker();
                            }
                            else {
                                var typesSubscription = me.recordTypes.subscribe(function (newValue) {
                                    if (newValue.length > 0) {
                                        setTypesWorker();
                                        typesSubscription.dispose();
                                    }
                                });
                            }
                        };
                        SearchRecordTypeFilterPanel.prototype.getFilterString = function () {
                            var filterString = "";
                            var criteriaString = this.getCriteriaString();
                            if (criteriaString) {
                                filterString = "type:" + criteriaString;
                            }
                            return filterString;
                        };
                        SearchRecordTypeFilterPanel.prototype.getCriteriaString = function () {
                            var criteriaString = "all";
                            var enabledTypesString = "";
                            var anyDisabled = false;
                            _.forEach(this.recordTypes(), function (recordType) {
                                if (recordType.selected()) {
                                    if (enabledTypesString) {
                                        enabledTypesString = enabledTypesString + ",";
                                    }
                                    enabledTypesString = enabledTypesString + recordType.uri;
                                }
                                else {
                                    anyDisabled = true;
                                }
                            });
                            if (anyDisabled && enabledTypesString) {
                                criteriaString = "[uri:" + enabledTypesString + "]";
                            }
                            return criteriaString;
                        };
                        return SearchRecordTypeFilterPanel;
                    }(HP.HPTRIM.Framework.Components.Layouts.Panel));
                    SearchEditor.SearchRecordTypeFilterPanel = SearchRecordTypeFilterPanel;
                })(SearchEditor = Panels.SearchEditor || (Panels.SearchEditor = {}));
            })(Panels = App.Panels || (App.Panels = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Panels;
            (function (Panels) {
                var SearchEditor;
                (function (SearchEditor) {
                    var SearchSortPanel = (function (_super) {
                        __extends(SearchSortPanel, _super);
                        function SearchSortPanel(trimClient, objectType) {
                            var _this = this;
                            _super.call(this, "templates/Search/SearchSortPanel");
                            this.title = ko.observable(HPTRIM.Messages.web_sort);
                            this.submitCaption = ko.observable(HPTRIM.Messages.web_dp_okText);
                            this.resetToDefaultCaption = ko.observable(HPTRIM.Messages.web_resetButtonCaption);
                            this.callback = function (filterString) { };
                            this.currentObjectSortDefaultString = "";
                            this.currentObjectSortDefaults = [];
                            this.saveSortsAsDefault = ko.observable(false);
                            this.allSortClauses = [];
                            this.firstSortSelector = ko.observableArray([]);
                            this.firstSort = ko.observable(null);
                            this.firstSortValue = ko.observable("");
                            this.firstSortDescending = ko.observable(false);
                            this.secondSortEnabled = ko.observable(false);
                            this.secondSortSelector = ko.observableArray([]);
                            this.secondSort = ko.observable(null);
                            this.secondSortValue = ko.observable("");
                            this.secondSortDescending = ko.observable(false);
                            this.thirdSortEnabled = ko.observable(false);
                            this.thirdSortSelector = ko.observableArray([]);
                            this.thirdSort = ko.observable(null);
                            this.thirdSortValue = ko.observable("");
                            this.thirdSortDescending = ko.observable(false);
                            this.rawFilters = [];
                            this.trimClient = trimClient;
                            this.objectType = objectType;
                            var me = this;
                            this.saveSortsAsDefaultCheckbox = HPTRIM.Utils.Form.initialiseTickCheckBox(this.saveSortsAsDefault, HPTRIM.Messages.web_saveAsDefaultSort + ' for ' + this.objectType.Caption + ' ' + HPTRIM.Messages.web_search);
                            var currentObjectDefaults = this.trimClient.getSearchDefaultsForObject(objectType);
                            this.currentObjectSortDefaultString = currentObjectDefaults.SortString;
                            this.firstSortDescendingCheckbox = HPTRIM.Utils.Form.initialiseTickCheckBox(this.firstSortDescending, HPTRIM.Messages.web_descending);
                            this.secondSortDescendingCheckbox = HPTRIM.Utils.Form.initialiseTickCheckBox(this.secondSortDescending, HPTRIM.Messages.web_descending);
                            this.secondSortDescendingCheckbox.enable = this.secondSortEnabled;
                            this.secondSortEnabled.subscribe(function (newValue) {
                                if (!newValue) {
                                    me.secondSortDescending(false);
                                }
                            });
                            this.thirdSortDescendingCheckbox = HPTRIM.Utils.Form.initialiseTickCheckBox(this.thirdSortDescending, HPTRIM.Messages.web_descending);
                            this.thirdSortDescendingCheckbox.enable = this.thirdSortEnabled;
                            this.thirdSortEnabled.subscribe(function (newValue) {
                                if (!newValue) {
                                    me.thirdSortDescending(false);
                                }
                            });
                            var populateResults = function () {
                                _this.allSortClauses = _.sortBy(_this.allSortClauses, function (searchClause) { return searchClause.Caption; });
                                _this.firstSortSelector(_this.allSortClauses);
                                _this.firstSort(SearchSortPanel.EMPTY_SORT);
                                _this.firstSortValue.subscribe(function (newValue) {
                                    if (newValue) {
                                        _this.secondSortEnabled(true);
                                        var secondSortPossiblities = _.filter(_this.allSortClauses, function (clause) {
                                            return clause.Name != newValue;
                                        });
                                        _this.secondSortSelector(secondSortPossiblities);
                                        if (newValue == _this.secondSortValue()) {
                                            _this.secondSortValue("");
                                        }
                                        if (_this.thirdSortEnabled()) {
                                            var thirdSortPossiblities = _.filter(_this.allSortClauses, function (clause) {
                                                return (clause.Name != newValue) && (clause.Name != _this.secondSortValue());
                                            });
                                        }
                                        _this.thirdSortSelector(thirdSortPossiblities);
                                        if (newValue == _this.thirdSortValue()) {
                                            _this.thirdSortValue("");
                                        }
                                    }
                                    else {
                                        _this.secondSortEnabled(false);
                                        _this.secondSortValue("");
                                        _this.thirdSortEnabled(false);
                                        _this.thirdSortValue("");
                                    }
                                });
                                _this.secondSortEnabled(false);
                                _this.secondSortSelector(_this.allSortClauses);
                                _this.secondSortValue.subscribe(function (newValue) {
                                    if (newValue) {
                                        _this.thirdSortEnabled(true);
                                        var thirdSortPossiblities = _.filter(_this.allSortClauses, function (clause) {
                                            return (clause.Name != newValue) && (clause.Name != _this.firstSortValue());
                                        });
                                        _this.thirdSortSelector(thirdSortPossiblities);
                                        if (newValue == _this.thirdSortValue()) {
                                            _this.thirdSortValue("");
                                        }
                                    }
                                    else {
                                        _this.thirdSortEnabled(false);
                                        _this.thirdSortValue("");
                                    }
                                });
                                _this.thirdSortEnabled(false);
                                _this.thirdSortSelector(_this.allSortClauses);
                                if (_this.currentObjectSortDefaultString) {
                                    var currentDefaultParts = _this.currentObjectSortDefaultString.split(' ');
                                    var processSortPart = function (sortPart, targetSortClause, targetSortValue, targetDescending) {
                                        var isDescending = false;
                                        if (sortPart.indexOf('-') != -1) {
                                            isDescending = true;
                                            sortPart = sortPart.replace('-', '');
                                        }
                                        targetDescending(isDescending);
                                        targetSortValue(sortPart);
                                        var searchClause = null;
                                        if (sortPart) {
                                            searchClause = _.find(_this.allSortClauses, function (currentSortClause) {
                                                return currentSortClause.Name.toLowerCase() == sortPart.toLowerCase();
                                            });
                                        }
                                        targetSortClause(searchClause);
                                    };
                                    if (currentDefaultParts && currentDefaultParts.length > 0) {
                                        processSortPart(currentDefaultParts[0], _this.firstSort, _this.firstSortValue, _this.firstSortDescending);
                                    }
                                    if (currentDefaultParts && currentDefaultParts.length > 1) {
                                        processSortPart(currentDefaultParts[1], _this.secondSort, _this.secondSortValue, _this.secondSortDescending);
                                    }
                                    if (currentDefaultParts && currentDefaultParts.length > 2) {
                                        processSortPart(currentDefaultParts[2], _this.thirdSort, _this.thirdSortValue, _this.thirdSortDescending);
                                    }
                                }
                            };
                            trimClient.getAndProcessSearchClauseDefinition(objectType.name, function (result) {
                                _this.allSortClauses = [];
                                _this.allSortClauses.push(SearchSortPanel.EMPTY_SORT);
                                _.each(result, function (searchClause) {
                                    if (searchClause.CanSort === true) {
                                        _this.allSortClauses.push(searchClause);
                                    }
                                });
                                if (objectType.HasUserFields === true && objectType == HPTRIM.BaseObjectTypes.Record) {
                                    _this.trimClient.getAdditionaFieldSearchClauses(function (additionalFields) {
                                        _.each(additionalFields, function (clause) {
                                            _this.allSortClauses.push(clause);
                                        });
                                        populateResults();
                                    });
                                }
                                else {
                                    populateResults();
                                }
                            });
                            var me = this;
                            this.saveSearchSort = function (callback, errorCallback) {
                                var sortString = me.getSortString();
                                var currentObjectDefaults = _this.trimClient.getSearchDefaultsForObject(objectType);
                                currentObjectDefaults.SortString = sortString;
                                var rawSortDefaults = {};
                                if (_this.objectType == HPTRIM.BaseObjectTypes.Record) {
                                    if (currentObjectDefaults.Filters) {
                                        var recordTypeFilter = _.find(currentObjectDefaults.Filters, function (filter) {
                                            return filter.ClauseId == "RecordType";
                                        });
                                        if (recordTypeFilter) {
                                            if (!(recordTypeFilter.CriteriaString.indexOf("uri:") == 0)) {
                                                recordTypeFilter.CriteriaString = "uri:" + recordTypeFilter.CriteriaString;
                                            }
                                        }
                                    }
                                }
                                rawSortDefaults[_this.objectType.name] = currentObjectDefaults;
                                var data = {};
                                data['SearchDefaults'] = rawSortDefaults;
                                var Uri = parseInt(_this.trimClient.getDatabase().getCurrentUser().Uri);
                                var saveRequest = new HPTRIM.TrimObjectSave(_this.trimClient, HPTRIM.BaseObjectTypes.Location, Uri);
                                saveRequest.doRequestEx(data).done(function (result) {
                                    _this.trimClient.updateSearchDefaultSort(me.objectType, sortString);
                                    callback();
                                }).fail(function (error) {
                                    var errorMsg = HP.HPTRIM.Messages.web_unableToConnectToWebServices;
                                    if (error.message) {
                                        errorMsg = error.message;
                                    }
                                    errorCallback(errorMsg);
                                });
                            };
                        }
                        SearchSortPanel.prototype.getSortString = function () {
                            var sortString = "";
                            if (this.firstSortValue()) {
                                sortString = sortString + this.firstSortValue();
                                if (this.firstSortDescending()) {
                                    sortString = sortString + "-";
                                }
                            }
                            if (this.firstSortValue() && this.secondSortValue()) {
                                sortString = sortString + " " + this.secondSortValue();
                                if (this.secondSortDescending()) {
                                    sortString = sortString + "-";
                                }
                            }
                            if (this.firstSortValue() && this.secondSortValue() && this.thirdSortValue()) {
                                sortString = sortString + " " + this.thirdSortValue();
                                if (this.thirdSortDescending()) {
                                    sortString = sortString + "-";
                                }
                            }
                            return sortString;
                        };
                        SearchSortPanel.prototype.setSortString = function (newSort) {
                            if (newSort) {
                                var sort = newSort.trim();
                                if (sort) {
                                    var rawSort = "";
                                    var sortTokens = sort.split(" ");
                                    if (sortTokens[0]) {
                                        var rawSort = sortTokens[0];
                                        if (rawSort.slice(-1) == '-') {
                                            this.firstSortDescending(true);
                                            rawSort = rawSort.slice(0, -1);
                                        }
                                        var firstClause = _.find(this.allSortClauses, function (clause) {
                                            if (clause.Name == rawSort) {
                                                return true;
                                            }
                                            return false;
                                        });
                                        if (firstClause) {
                                            this.firstSort(firstClause);
                                            this.firstSortValue(firstClause.Name);
                                        }
                                    }
                                    if (sortTokens[1]) {
                                        rawSort = sortTokens[1];
                                        if (rawSort.slice(-1) == '-') {
                                            this.secondSortDescending(true);
                                            rawSort = rawSort.slice(0, -1);
                                        }
                                        var secondClause = _.find(this.allSortClauses, function (clause) {
                                            if (clause.Name == rawSort) {
                                                return true;
                                            }
                                            return false;
                                        });
                                        if (secondClause) {
                                            this.secondSort(secondClause);
                                            this.secondSortValue(secondClause.Name);
                                        }
                                    }
                                    if (sortTokens[2]) {
                                        var rawSort = sortTokens[2];
                                        if (rawSort.slice(-1) == '-') {
                                            this.thirdSortDescending(true);
                                            rawSort = rawSort.slice(0, -1);
                                        }
                                        var thirdClause = _.find(this.allSortClauses, function (clause) {
                                            if (clause.Name == rawSort) {
                                                return true;
                                            }
                                            return false;
                                        });
                                        if (thirdClause) {
                                            this.thirdSort(thirdClause);
                                            this.thirdSortValue(thirdClause.Name);
                                        }
                                    }
                                }
                                this.trimClient.updateSearchDefaultSort(this.objectType, newSort);
                            }
                        };
                        SearchSortPanel.EMPTY_SORT = {
                            ParameterFormat: "Unknown",
                            MethodGroup: "Unknown",
                            BasedOnProperty: "Unknown",
                            Caption: "",
                            InternalName: "",
                            Icon: "",
                            Name: "",
                            Id: "EmptySearchClause",
                            CanSort: true,
                            CanSearch: [],
                        };
                        return SearchSortPanel;
                    }(HP.HPTRIM.Framework.Components.Layouts.Panel));
                    SearchEditor.SearchSortPanel = SearchSortPanel;
                })(SearchEditor = Panels.SearchEditor || (Panels.SearchEditor = {}));
            })(Panels = App.Panels || (App.Panels = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Panels;
            (function (Panels) {
                var SearchEditor;
                (function (SearchEditor) {
                    var SearchFilterModal = (function (_super) {
                        __extends(SearchFilterModal, _super);
                        function SearchFilterModal(searchFilterPanel) {
                            _super.call(this, "templates/Search/SearchFilterModal");
                            this.title = ko.observable(HPTRIM.Messages.web_search + " " + HPTRIM.Messages.web_filter);
                            this.dismiss = function () { };
                            this.updateFilters = function () { };
                            var me = this;
                            this.searchFilterPanel = searchFilterPanel;
                        }
                        SearchFilterModal.prototype.onOk = function () {
                            var me = this;
                            var filterString = this.searchFilterPanel.getFilterString();
                            if (this.searchFilterPanel.saveFiltersAsDefault()) {
                                me.searchFilterPanel.saveSearchFilters(function () { me.searchFilterPanel.callback(filterString); me.dismiss(); }, function (error) { });
                            }
                            else {
                                me.searchFilterPanel.callback(filterString);
                                me.dismiss();
                            }
                        };
                        SearchFilterModal.prototype.cancel = function () {
                            this.dismiss();
                        };
                        return SearchFilterModal;
                    }(HP.HPTRIM.Framework.Components.Layouts.Panel));
                    SearchEditor.SearchFilterModal = SearchFilterModal;
                    var SearchRecordTypeFilterModal = (function (_super) {
                        __extends(SearchRecordTypeFilterModal, _super);
                        function SearchRecordTypeFilterModal(searchRecordTypeFilterPanel) {
                            _super.call(this, "templates/Search/SearchRecordTypeFilterModal");
                            this.title = ko.observable(HPTRIM.Messages.web_search + " " + HPTRIM.Messages.web_filter + " - " + HPTRIM.Messages.web_recordType);
                            this.dismiss = function () { };
                            this.updateFilters = function () { };
                            var me = this;
                            this.searchRecordTypeFilterPanel = searchRecordTypeFilterPanel;
                        }
                        SearchRecordTypeFilterModal.prototype.onOk = function () {
                            var me = this;
                            var filterString = this.searchRecordTypeFilterPanel.getFilterString();
                            var finish = function () {
                                me.searchRecordTypeFilterPanel.callback(filterString);
                                me.dismiss();
                            };
                            var failCallback = function (message) {
                            };
                            if (this.searchRecordTypeFilterPanel.saveFiltersAsDefault()) {
                                this.searchRecordTypeFilterPanel.saveSearchFilters(finish, failCallback);
                            }
                            else {
                                finish();
                            }
                        };
                        SearchRecordTypeFilterModal.prototype.cancel = function () {
                            this.dismiss();
                        };
                        return SearchRecordTypeFilterModal;
                    }(HP.HPTRIM.Framework.Components.Layouts.Panel));
                    SearchEditor.SearchRecordTypeFilterModal = SearchRecordTypeFilterModal;
                    var SearchSortModal = (function (_super) {
                        __extends(SearchSortModal, _super);
                        function SearchSortModal(searchSortPanel) {
                            _super.call(this, "templates/Search/SearchSortModal");
                            this.title = ko.observable(HPTRIM.Messages.web_search + " " + HPTRIM.Messages.web_sort);
                            this.dismiss = function () { };
                            this.updateSort = function () { };
                            var me = this;
                            this.searchSortPanel = searchSortPanel;
                        }
                        SearchSortModal.prototype.onOk = function () {
                            var me = this;
                            var sortString = this.searchSortPanel.getSortString();
                            if (this.searchSortPanel.saveSortsAsDefault()) {
                                me.searchSortPanel.saveSearchSort(function () { me.searchSortPanel.callback(sortString); me.dismiss(); }, function (error) { });
                            }
                            else {
                                me.searchSortPanel.callback(sortString);
                                me.dismiss();
                            }
                        };
                        SearchSortModal.prototype.cancel = function () {
                            this.dismiss();
                        };
                        return SearchSortModal;
                    }(HP.HPTRIM.Framework.Components.Layouts.Panel));
                    SearchEditor.SearchSortModal = SearchSortModal;
                    var SearchOptionFilterModal = (function (_super) {
                        __extends(SearchOptionFilterModal, _super);
                        function SearchOptionFilterModal(searchOptionFilterPanel) {
                            _super.call(this, "templates/Search/SearchOptionModal");
                            this.title = ko.observable(HPTRIM.Messages.web_search + " " + HPTRIM.Messages.web_options);
                            this.dismiss = function () { };
                            this.updateOption = function () { };
                            var me = this;
                            this.searchOptionFilterPanel = searchOptionFilterPanel;
                        }
                        SearchOptionFilterModal.prototype.onOk = function () {
                            var me = this;
                            var filterString = this.searchOptionFilterPanel.getOptionString();
                            if (this.searchOptionFilterPanel.saveFiltersAsDefault()) {
                                me.searchOptionFilterPanel.saveSearchOptionsFilters(function () { me.searchOptionFilterPanel.callback(filterString); me.dismiss(); }, function (error) { });
                            }
                            else {
                                me.searchOptionFilterPanel.callback(filterString);
                                me.dismiss();
                            }
                        };
                        SearchOptionFilterModal.prototype.cancel = function () {
                            this.dismiss();
                        };
                        return SearchOptionFilterModal;
                    }(HP.HPTRIM.Framework.Components.Layouts.Panel));
                    SearchEditor.SearchOptionFilterModal = SearchOptionFilterModal;
                })(SearchEditor = Panels.SearchEditor || (Panels.SearchEditor = {}));
            })(Panels = App.Panels || (App.Panels = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Panels;
            (function (Panels) {
                var SearchEditor;
                (function (SearchEditor) {
                    var SearchPreviewPanel = (function (_super) {
                        __extends(SearchPreviewPanel, _super);
                        function SearchPreviewPanel(trimClient, title, trimType, query, filter, sort, purpose) {
                            var _this = this;
                            _super.call(this, "templates/Search/SearchPreviewPanel", true);
                            this.iconProperty = ko.observable(null);
                            this.propertiesAndFieldsDefintion = ko.observableArray([]);
                            this.searchingString = ko.observable(HP.HPTRIM.Messages.web_retrievingResults + "...");
                            this.showSearchTitle = ko.observable(HP.HPTRIM.Messages.web_searchBuilder);
                            this.showSearchBuilder = function () { };
                            this.searchFieldClass = ko.observable("");
                            this.searchField = ko.observable("");
                            this.onSearchEnter = function () { };
                            this.onSearchEscape = function () { };
                            this.executeSearch = function () { };
                            this.okHandler = function () { };
                            this.cancelHandler = function () { };
                            this.selectedItem = ko.observable(null);
                            this.selectedItemList = [];
                            var me = this;
                            this.title = ko.observable(title);
                            this.searching = ko.observable(false);
                            this.currentType = trimType;
                            this.searchField(query);
                            this.activeFilter = filter;
                            this.activeSort = sort;
                            this.activePurpose = purpose;
                            var overlayAdditionalPanelClass = 'as-spa-overlay-content-additional';
                            var toggleVisible = function (event) {
                                var overlayAdditionalPanelClassSelector = $('.' + overlayAdditionalPanelClass);
                                overlayAdditionalPanelClassSelector.toggleClass('active');
                                $('#overlayPropOvrlyMinMax').toggleClass('doublechevron_right').toggleClass('doublechevron_left');
                            };
                            this.objectPropertiesPanel = new App.Panels.Plugins.ObjectPropertiesPanel(trimClient, toggleVisible, overlayAdditionalPanelClass, "templates/Widgets/OverlayPropertiesPanel");
                            this.selectItem = function (item) {
                                _this.selectedItem(item);
                                var uri = item.Fields['Uri'];
                                me.updatePropertiesViewPanel(uri, me.currentType);
                                me.objectPropertiesPanel.visible(true);
                                var baseObject = new HPTRIM.TrimBaseObject(me.currentType, uri, uri);
                                me.selectedItemList = [baseObject];
                                HPTRIM.Utils.TrimHelper.loadObject(trimClient, baseObject, function (loadedObject) {
                                    me.selectedItemList = _.filter(me.selectedItemList, function (bob) {
                                        if (bob == baseObject) {
                                            return false;
                                        }
                                        return true;
                                    });
                                    me.selectedItemList = [loadedObject];
                                });
                            };
                            if (!query) {
                                if (trimType.HasFavorites) {
                                    query = 'favorite';
                                }
                                else if (trimType.HasHierarchy) {
                                    query = 'top';
                                }
                                else {
                                    query = 'all';
                                }
                                this.searchField(query);
                            }
                            var searchQuery = {
                                baseObjectType: trimType,
                                filter: filter,
                                sortBy: sort,
                                searchString: query
                            };
                            var pagingSearchCallback = function () {
                                me.searching(true);
                                me.itemListPanel.getItemList().items([]);
                                me.objectPropertiesPanel.visible(false);
                            };
                            this.itemListPanel = new HP.HPTRIM.App.Panels.ItemList.TrimPagingItemListPanel(trimClient, me, title, searchQuery, pagingSearchCallback, function () { me.searching(false); });
                            this.itemListPanel.templateName('/templates/ItemList/PreviewListCard');
                            this.itemListPanel.getTrimItemListLoader().properties = HPTRIM.Utils.TrimHelper.getSearchPreviewPropertyNames(trimType);
                            this.itemListPanel.updateQuery(searchQuery, function (result) {
                                if (result.PropertiesAndFields) {
                                    var props = _.filter(result.PropertiesAndFields[trimType.name], function (prop) {
                                        return (_.contains(HPTRIM.Utils.TrimHelper.getSearchPreviewPropertyNames(trimType), prop.Id));
                                    });
                                    _this.propertiesAndFieldsDefintion(props);
                                }
                            });
                            me.onSearchEnter = function () {
                                me.doSearch(trimType, me.searchField());
                            };
                            me.executeSearch = function () {
                                me.doSearch(trimType, me.searchField());
                            };
                            this.searchFieldClass = ko.observable('');
                            var isIEBrowser = window['ActiveXObject'] !== undefined ? true : false;
                            if (isIEBrowser) {
                                this.searchFieldClass("clearable");
                            }
                            else {
                                this.searchFieldClass("clearable x");
                                $(document).on('mousemove', '.x', function (mouseEvent) {
                                    if (this.offsetWidth - 18 < mouseEvent.clientX - this.getBoundingClientRect().left) {
                                        $(this).addClass('onX');
                                    }
                                    else {
                                        $(this).removeClass('onX');
                                    }
                                });
                                $(document).on('click', '.onX', function () {
                                    $(this).val('').change();
                                });
                                $(document).on('touchstart', '.onX, .x', function (touchStartEvent) {
                                    var touchXVal = 99999;
                                    if (touchStartEvent.originalEvent &&
                                        touchStartEvent.originalEvent.changedTouches &&
                                        touchStartEvent.originalEvent.changedTouches[0]) {
                                        touchXVal = touchStartEvent.originalEvent.changedTouches[0].clientX;
                                    }
                                    if ((this.offsetWidth - 24) < (touchXVal - this.getBoundingClientRect().left - 8)) {
                                        touchStartEvent.preventDefault();
                                        $(this).val('').change();
                                    }
                                });
                            }
                        }
                        SearchPreviewPanel.prototype.getRequiredProperties = function () {
                            HPTRIM.Utils.TrimHelper.getSearchPreviewPropertyNames(this.currentType);
                        };
                        SearchPreviewPanel.prototype.hasIcon = function (item) {
                            return false;
                        };
                        SearchPreviewPanel.prototype.getIconClass = function (item) {
                            return "";
                        };
                        SearchPreviewPanel.prototype.doSearch = function (trimType, query, filter, sort, purpose) {
                            var _this = this;
                            if (query) {
                                var searchQuery = {
                                    baseObjectType: trimType,
                                    filter: filter ? filter : this.activeFilter,
                                    sortBy: sort ? sort : this.activeSort,
                                    searchString: query
                                };
                                this.itemListPanel.updateQuery(searchQuery, function (result) {
                                    if (result.PropertiesAndFields) {
                                        _this.propertiesAndFieldsDefintion(result.PropertiesAndFields[trimType.name]);
                                    }
                                });
                            }
                        };
                        SearchPreviewPanel.prototype.renderData = function (property, item) {
                            if (property.PFFormat == "Boolean") {
                                if (item.Fields[property.Id] === true || item.Fields[property.Id].Value === true) {
                                    return property.Property.TrueString;
                                }
                                else {
                                    return property.Property.FalseString;
                                }
                            }
                            if (item.Fields[property.Id]) {
                                if (item.Fields[property.Id].StringValue || item.Fields[property.Id].StringValue === "") {
                                    return item.Fields[property.Id].StringValue;
                                }
                                else if (item.Fields[property.Id].Value || item.Fields[property.Id].Value === "") {
                                    return item.Fields[property.Id].Value;
                                }
                                else {
                                    return item.Fields[property.Id];
                                }
                            }
                            return "";
                        };
                        SearchPreviewPanel.prototype.isIconProperty = function (property) {
                            if (property.Id == "RecordRecordType") {
                                return true;
                            }
                            return false;
                        };
                        return SearchPreviewPanel;
                    }(HP.HPTRIM.Framework.Components.Layouts.Panel));
                    SearchEditor.SearchPreviewPanel = SearchPreviewPanel;
                })(SearchEditor = Panels.SearchEditor || (Panels.SearchEditor = {}));
            })(Panels = App.Panels || (App.Panels = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Panels;
            (function (Panels) {
                var Framework;
                (function (Framework) {
                    "use strict";
                    var BodyTab = (function () {
                        function BodyTab(panel, title, objectType) {
                            this.panel = ko.observable(panel);
                            this.title = ko.observable(title);
                            this.objectType = objectType;
                            this.isActive = ko.observable(false);
                            this.isHomeTab = ko.observable(false);
                            this.query = ko.observable("");
                        }
                        BodyTab.prototype.refresh = function () {
                            if (this.recordsPanelRef) {
                                this.recordsPanelRef.refresh();
                            }
                            else if (this.workflowPanelRef) {
                                this.workflowPanelRef.refresh();
                            }
                            else if (this.mainObjectPanelRef) {
                                this.mainObjectPanelRef.refresh();
                            }
                            else if (this.dashboardPanelRef) {
                                this.dashboardPanelRef.mainPanel.refreshPanels();
                            }
                        };
                        BodyTab.prototype.refreshCurrentItem = function () {
                            if (this.recordsPanelRef) {
                                this.recordsPanelRef.recordsDetailComponent.refresh();
                            }
                            else if (this.workflowPanelRef) {
                                this.workflowPanelRef.refresh();
                            }
                            else if (this.mainObjectPanelRef) {
                                this.mainObjectPanelRef.refresh();
                            }
                            else if (this.dashboardPanelRef) {
                                this.dashboardPanelRef.mainPanel.refreshPanels();
                            }
                        };
                        return BodyTab;
                    }());
                    Framework.BodyTab = BodyTab;
                    var BodyPanel = (function (_super) {
                        __extends(BodyPanel, _super);
                        function BodyPanel(trimClient, fileUploadProvider, mainObjectDefs, childObjectDefs, supportedTypes) {
                            var _this = this;
                            _super.call(this, []);
                            this.tabPanelList = ko.observableArray([]);
                            this.visibleTabPanelList = ko.observableArray([]);
                            this.ulDropdownElemId = "id-dropdown-menu";
                            this.ulDropdownElemClass = "dropdown-menu";
                            this.currentIndex = -1;
                            this.itemCssClass = "a.overflowEllipsis";
                            this.notifyTypeChangeCallback = function (type) { };
                            this.defaultReturnAction = function () { };
                            this.templateName("templates/Framework/TabbedBodyPanel");
                            this.trimClient = trimClient;
                            this.mainObjectDefs = mainObjectDefs;
                            this.childObjectDefs = childObjectDefs;
                            this.supportedTypes = supportedTypes;
                            this.fileUploadProvider = fileUploadProvider;
                            this.currentActiveTabPanel = ko.observable(null);
                            this.currentActiveTabPanel.subscribe(function (newValue) {
                                _.each(_this.tabPanelList(), function (tabPanel) {
                                    tabPanel.isActive(false);
                                });
                                newValue.isActive(true);
                                if (newValue === _this.dashBoardTab)
                                    newValue.isHomeTab(true);
                            });
                            this.dashBoardPanel = new HP.HPTRIM.App.Panels.Framework.Dashboard.DashboardPanel(trimClient, supportedTypes);
                            this.dashBoardTab = new BodyTab(this.dashBoardPanel, HPTRIM.Messages.web_home);
                            this.dashBoardTab.dashboardPanelRef = this.dashBoardPanel;
                            this.currentActiveTabPanel(this.dashBoardTab);
                            this.currentActiveTabPanel.subscribe(function (newValue) {
                                _this.notifyTypeChangeCallback(newValue.objectType);
                            });
                            this.tabPanelList.subscribe(function (newTabs) {
                                var start = 0;
                                if (newTabs.length > 5) {
                                    start = newTabs.length - 5;
                                    if (newTabs[start - 1].isHomeTab()) {
                                        HP.HPTRIM.Utils.TrimHelper.arraySwap(newTabs, start, start - 1);
                                    }
                                }
                                if (!newTabs[start].isHomeTab()) {
                                    HP.HPTRIM.Utils.TrimHelper.arraySwap(newTabs, start, start + 1);
                                }
                                _this.visibleTabPanelList(newTabs.slice(start));
                            });
                            this.tabPanelList.push(this.dashBoardTab);
                        }
                        BodyPanel.prototype.select = function (bodyTabToSelect) {
                            this.currentActiveTabPanel(bodyTabToSelect);
                            var visibleTabs = this.visibleTabPanelList();
                            if (!_.contains(visibleTabs, bodyTabToSelect)) {
                                visibleTabs.pop();
                                visibleTabs.push(bodyTabToSelect);
                                this.visibleTabPanelList(visibleTabs);
                            }
                        };
                        BodyPanel.prototype.checkIsTabAlreadyExist = function (queryString, objectType) {
                            var tabSearchString = '';
                            var upperCaseTabTitletoCheck = '';
                            upperCaseTabTitletoCheck = objectType.Name.toUpperCase().trim() + ' - ' + queryString.toUpperCase().trim();
                            var retrunIndex = -1;
                            for (var i = 0; i < this.tabPanelList().length; i++) {
                                if (this.tabPanelList()[i].objectType == undefined) {
                                    continue;
                                }
                                if (this.tabPanelList()[i].isHomeTab()) {
                                    tabSearchString = this.tabPanelList()[i].title().toUpperCase().trim();
                                }
                                else if (this.tabPanelList()[i].objectType == HPTRIM.BaseObjectTypes.Record) {
                                    tabSearchString = this.tabPanelList()[i].objectType.Name.toUpperCase().trim() + ' - ' + this.tabPanelList()[i].recordsPanelRef.currentQuery().toUpperCase().trim();
                                }
                                else if ((this.tabPanelList()[i].objectType == HPTRIM.BaseObjectTypes.Activity) || (this.tabPanelList()[i].objectType == HPTRIM.BaseObjectTypes.Workflow)) {
                                    tabSearchString = this.tabPanelList()[i].objectType.Name.toUpperCase().trim() + ' - ' + this.tabPanelList()[i].workflowPanelRef.currentQuery().toUpperCase().trim();
                                }
                                else {
                                    tabSearchString = this.tabPanelList()[i].objectType.Name.toUpperCase().trim() + ' - ' + this.tabPanelList()[i].mainObjectPanelRef.currentQuery().toUpperCase().trim();
                                }
                                if (tabSearchString.replace(/ /g, '') == upperCaseTabTitletoCheck.replace(/ /g, '')) {
                                    retrunIndex = i;
                                    break;
                                }
                            }
                            return retrunIndex;
                        };
                        BodyPanel.prototype.getSelectedIndex = function (ele) {
                            var ulList = (ele.parentElement.parentElement.parentElement).children;
                            for (var i in ulList) {
                                var listElement = ulList[i];
                                var divCollection = listElement.children;
                                var firstAnchorElement = divCollection[0].children[0];
                                var secondAnchorElement = divCollection[1].children[0];
                                if (ele == firstAnchorElement) {
                                    return parseInt(i) * 2;
                                }
                                else if (ele == secondAnchorElement) {
                                    return (parseInt(i) * 2) + 1;
                                }
                            }
                            return -1;
                        };
                        BodyPanel.prototype.keybordEnterKey = function (bodyTabToSelect) {
                            var keynum;
                            if (window.event) {
                                keynum = event.keyCode;
                            }
                            else if (event.which) {
                                keynum = event.which;
                            }
                            if (keynum === 13) {
                                this.select(bodyTabToSelect);
                                return false;
                            }
                            return true;
                        };
                        ;
                        BodyPanel.prototype.keybordXEnterKey = function (bodyTabToRemove) {
                            var keynum;
                            if (window.event) {
                                keynum = event.keyCode;
                            }
                            else if (event.which) {
                                keynum = event.which;
                            }
                            if (keynum === 13) {
                                this.remove(bodyTabToRemove);
                                return false;
                            }
                            return true;
                        };
                        ;
                        BodyPanel.prototype.keyboardNavEnterKeyPress = function (bodyTabToSelectorRemove, selOrRemove) {
                            var KEY_ESC = 27, KEY_ENTER = 13, SPACE_KEY = 32;
                            var ulClass = this.ulDropdownElemId;
                            var keynum;
                            var target = event.target || event.srcElement;
                            var shiftKey = event.shiftKey;
                            if (target instanceof Element) {
                                var ele = target;
                                var anchor = ele.getElementsByTagName("a")[0];
                                if (window.event) {
                                    keynum = event.keyCode;
                                }
                                else if (event.which) {
                                    keynum = event.which;
                                }
                                if (keynum === 13 && selOrRemove == 's') {
                                    this.select(bodyTabToSelectorRemove);
                                    return false;
                                }
                                else if (keynum === 13 && selOrRemove == 'r') {
                                    this.remove(bodyTabToSelectorRemove);
                                    return false;
                                }
                                if (keynum === 40 || keynum == 38 || keynum === 9 || (shiftKey && keynum == 9)) {
                                    this.handleUpDownKey(event, bodyTabToSelectorRemove, ele);
                                    return;
                                }
                                if (keynum === 27) {
                                    if ($("#" + this.ulDropdownElemId).parent().hasClass("open")) {
                                        $("#" + this.ulDropdownElemId).parent().toggleClass('open').trigger('shown.bs.dropdown');
                                        return false;
                                    }
                                }
                                return true;
                            }
                        };
                        ;
                        BodyPanel.prototype.handleUpDownKey = function (event, bodyTabToSelect, ele) {
                            var KEY_ESC = 27, KEY_ENTER = 13, SPACE_KEY = 32;
                            this.currentIndex = this.getSelectedIndex(ele);
                            if (event.keyCode == 38) {
                                this.currentIndex--;
                            }
                            if (event.keyCode == 40) {
                                this.currentIndex++;
                            }
                            if (this.currentIndex > 2 * (this.tabPanelList().length)) {
                                this.currentIndex = 2 * (this.tabPanelList().length);
                            }
                            if (this.currentIndex < -1) {
                                this.currentIndex = -1;
                            }
                            var itemsSelector = this.itemCssClass;
                            var getItemeSelectorClass = document.activeElement;
                            var itemRow = $(itemsSelector)[this.currentIndex];
                            if (itemRow && this.currentIndex < 2 * (this.tabPanelList().length)) {
                                var alignWithTop = false;
                                itemRow.scrollIntoView(alignWithTop);
                                $(itemRow).focus();
                            }
                        };
                        BodyPanel.prototype.removeClass = function (el, className) {
                            if (el.classList) {
                                el.classList.remove(className);
                            }
                            else {
                                el.className = el.className.replace(new RegExp('(^|\\b)' + className.split(' ').join('|') + '(\\b|$)', 'gi'), ' ');
                            }
                        };
                        ;
                        BodyPanel.prototype.addClass = function (el, className) {
                            if (el.classList) {
                                el.classList.add(className);
                            }
                            else {
                                el.className += ' ' + className;
                            }
                        };
                        ;
                        BodyPanel.prototype.searchCurrentPanel = function (objectType, queryString, uri, filterString, sortString) {
                            var me = this;
                            var panelTab = this.currentActiveTabPanel();
                            if (panelTab.objectType != objectType) {
                                var panelTab = this.makeNewTab(objectType, objectType.Name + " " + queryString);
                            }
                            if (objectType == HPTRIM.BaseObjectTypes.Record) {
                                panelTab.recordsPanelRef.showDefaultPanelView();
                                if (queryString) {
                                    panelTab.recordsPanelRef.executeQuery(queryString, true, sortString, filterString);
                                }
                                if (uri) {
                                    panelTab.recordsPanelRef.selectedUri(uri);
                                }
                            }
                            else {
                                this.tabPanelList.push(panelTab);
                                this.currentActiveTabPanel(panelTab);
                                if (uri) {
                                    panelTab.mainObjectPanelRef.selectedUri(uri);
                                }
                                panelTab.mainObjectPanelRef.doSearch(queryString, uri, filterString, sortString);
                            }
                        };
                        BodyPanel.prototype.remove = function (bodyTabToRemove) {
                            if (this.tabPanelList().length > 1 && !(bodyTabToRemove.isHomeTab())) {
                                var newTabPanelList = this.tabPanelList();
                                var currentIndex = newTabPanelList.indexOf(bodyTabToRemove);
                                var updateActiveTab = false;
                                if (this.currentActiveTabPanel() == bodyTabToRemove && currentIndex > 0) {
                                    currentIndex = currentIndex - 1;
                                    updateActiveTab = true;
                                }
                                newTabPanelList = _.filter(newTabPanelList, function (bodyTab) {
                                    return bodyTab != bodyTabToRemove;
                                });
                                this.tabPanelList(newTabPanelList);
                                if (updateActiveTab) {
                                    this.currentActiveTabPanel(newTabPanelList[currentIndex]);
                                    $('#' + this.currentActiveTabPanel().panel().id + '_Tab').tab('show');
                                }
                            }
                        };
                        BodyPanel.prototype.openPanelAndSearch = function (objectType, queryString, uri, filterString, sortString, searchOptions, callBack) {
                            var alreadyExistTabIndex = this.checkIsTabAlreadyExist(queryString, objectType);
                            if (alreadyExistTabIndex != -1) {
                                this.select(this.tabPanelList()[alreadyExistTabIndex]);
                                return;
                            }
                            var panelTab = this.makeNewTab(objectType, objectType.name + " - " + queryString);
                            if (objectType == HPTRIM.BaseObjectTypes.Record) {
                                if (queryString) {
                                    panelTab.recordsPanelRef.executeQuery(queryString, true, sortString, filterString, searchOptions);
                                }
                                else {
                                    panelTab.recordsPanelRef.showDefaultPanelView();
                                }
                                if (uri) {
                                    panelTab.recordsPanelRef.selectedUri(uri);
                                }
                            }
                            else if (objectType == HPTRIM.BaseObjectTypes.Workflow) {
                                panelTab.workflowPanelRef.showViewAndSearch(Panels.WorkflowPanel.WORKFLOW_VIEW_ID, queryString, filterString, sortString, searchOptions);
                            }
                            else if (objectType == HPTRIM.BaseObjectTypes.Activity) {
                                panelTab.workflowPanelRef.showViewAndSearch(Panels.WorkflowPanel.ACTIVITIES_DUE_VIEW_ID, queryString, filterString, sortString, searchOptions);
                            }
                            else {
                                var mainObjectPanel = panelTab.mainObjectPanelRef;
                                if (mainObjectPanel) {
                                    mainObjectPanel.doSearch(queryString, uri, filterString, sortString, searchOptions);
                                }
                            }
                            if (callBack) {
                                var recDetailComp = panelTab.recordsPanelRef.recordsDetailComponent;
                                recDetailComp.uri = uri;
                                recDetailComp.updateModel(uri, "", function () {
                                    recDetailComp.canView(true);
                                    panelTab.recordsPanelRef.koHandleViewClick(recDetailComp.recordInfoObject);
                                });
                            }
                        };
                        BodyPanel.prototype.openPanelAndShowView = function (objectType, viewId, uri) {
                            var panelTab = this.makeNewTab(objectType, objectType.name);
                            if (objectType == HPTRIM.BaseObjectTypes.Record) {
                                panelTab.recordsPanelRef.showRecordView(viewId, uri);
                                if (uri) {
                                    panelTab.recordsPanelRef.selectedUri(uri);
                                }
                            }
                            if (objectType == HPTRIM.BaseObjectTypes.Activity) {
                                panelTab.workflowPanelRef.showViewAndSearch(viewId, uri);
                                if (uri) {
                                    panelTab.workflowPanelRef.selectedUri(uri);
                                }
                            }
                        };
                        BodyPanel.prototype.showRecordPanel = function (id, uri) {
                            var panelTab = this.makeNewTab(HPTRIM.BaseObjectTypes.Record, HPTRIM.BaseObjectTypes.Record.name);
                            panelTab.title(HPTRIM.BaseObjectTypes.Record.Caption);
                            panelTab.recordsPanelRef.showRecordView(id, uri);
                            return panelTab.recordsPanelRef;
                        };
                        BodyPanel.prototype.showWorkflowPanel = function () {
                            var panelTab = this.makeNewTab(HPTRIM.BaseObjectTypes.Workflow, HPTRIM.BaseObjectTypes.Workflow.name);
                            panelTab.workflowPanelRef.activitiesDueView();
                            panelTab.workflowPanelRef.showViewAndSearch(Panels.WorkflowPanel.WORKFLOW_VIEW_ID, Panels.WorkflowPanel.GET_ALL_WORKFLOW_QUERY());
                        };
                        BodyPanel.prototype.showMainObjectPanel = function (objectType) {
                            var panelTab = this.makeNewTab(objectType, objectType.Name);
                            if (panelTab.mainObjectPanelRef) {
                                panelTab.mainObjectPanelRef.showDefaultView();
                            }
                        };
                        BodyPanel.prototype.showSelectedSubMainObjecPanel = function (objectType, id, trayPage) {
                            var panelTab = this.makeNewTab(objectType, objectType.Name);
                            if (panelTab.mainObjectPanelRef) {
                                panelTab.mainObjectPanelRef.showSelectedSubMenuItemView(id, trayPage);
                            }
                        };
                        BodyPanel.prototype.showDashboard = function () {
                            if (_.contains(this.tabPanelList(), this.dashBoardTab)) {
                            }
                            else {
                                this.tabPanelList.push(this.dashBoardTab);
                            }
                            this.currentActiveTabPanel(this.dashBoardTab);
                            if (event)
                                this.dashBoardTab.refresh();
                            $('#' + this.dashBoardTab.panel().id + '_Tab').tab('show');
                        };
                        BodyPanel.prototype.showNewLocationDataEntryPanel = function (trimClient, displayErrorMethod) {
                            var _this = this;
                            var currentActiveTab = this.currentActiveTabPanel();
                            var createLocationPanel = new HP.HPTRIM.App.Panels.LocationDataEntryForm.CreateLocationPanel(trimClient);
                            var createLocationTab = new BodyTab(createLocationPanel, HP.HPTRIM.Utils.String.format(HPTRIM.Messages.web_createNewObject, [HPTRIM.BaseObjectTypes.Location.name]));
                            createLocationTab.createLocationPanelRef = createLocationPanel;
                            createLocationPanel.locationDateEntryPanel.displayError = displayErrorMethod;
                            createLocationPanel.locationDateEntryPanel.doneHandler = function (uri) {
                                var bodyTabs = _.filter(_this.tabPanelList(), function (bodyTab) {
                                    return bodyTab != createLocationTab;
                                });
                                _this.tabPanelList(bodyTabs);
                                var bodyTab = _this.makeNewTab(HPTRIM.BaseObjectTypes.Location, HPTRIM.BaseObjectTypes.Location.Name);
                                bodyTab.mainObjectPanelRef.localSearchHandler("uri:" + uri, uri, HPTRIM.BaseObjectTypes.Location);
                            };
                            createLocationPanel.locationDateEntryPanel.cancel = function () {
                                _this.removeTabAndMakeTargetActive(createLocationTab, currentActiveTab);
                            };
                            createLocationPanel.commandPanel.cancelAction = function () {
                                _this.removeTabAndMakeTargetActive(createLocationTab, currentActiveTab);
                            };
                            this.tabPanelList.push(createLocationTab);
                            this.currentActiveTabPanel(createLocationTab);
                        };
                        BodyPanel.prototype.showNewMainObjectDataEntryPanel = function (createMainObjectPanel, objectDef, defaultFieldValues, callback) {
                            var _this = this;
                            if (objectDef.Id == "UserLabel") {
                                var parentUserLabelPageItem = {
                                    Name: "UserLabelParentLabel",
                                    Format: "Object",
                                    Caption: "Parent user label",
                                    Value: ko.observable('')
                                };
                                if (!objectDef.DataEntryFormDefinition.Pages[0].PageItems.some(function (x) { return x.Name == parentUserLabelPageItem.Name; })) {
                                    var decoratedPageItem = HP.HPTRIM.Form.DecoratorFactory.make(this.trimClient, parentUserLabelPageItem, false);
                                    objectDef.DataEntryFormDefinition.Pages[0].PageItems.push(decoratedPageItem);
                                }
                            }
                            if (defaultFieldValues) {
                                _.each(defaultFieldValues, function (oneValue) {
                                    var foundPageItem = _this.trimClient.getPageItem(objectDef.DataEntryFormDefinition, oneValue.FieldName);
                                    if (foundPageItem != undefined) {
                                        if (foundPageItem.setValue) {
                                            foundPageItem.setValue(oneValue.FieldValue);
                                        }
                                        else {
                                            if (foundPageItem.Value) {
                                                foundPageItem.Value(oneValue.FieldValue);
                                            }
                                        }
                                        if (foundPageItem.setRawValue) {
                                            foundPageItem.setRawValue(oneValue.FieldValue.displayValue.Value ? oneValue.FieldValue.displayValue.Value : oneValue.FieldValue.displayValue);
                                        }
                                        if (objectDef.Id == "UserLabel") {
                                            if (!createMainObjectPanel.createOrModifyMainObjectFormPanel.form().formDefinition().Pages[0].PageItems.some(function (x) { return x.Name == foundPageItem.Name; })) {
                                                createMainObjectPanel.createOrModifyMainObjectFormPanel.form().formDefinition().Pages[0].PageItems.push(foundPageItem);
                                            }
                                        }
                                        createMainObjectPanel.createOrModifyMainObjectFormPanel.form().formDefinition.valueHasMutated();
                                    }
                                });
                            }
                            ;
                            var currentActiveTab = this.currentActiveTabPanel();
                            var createMainObjectTab = new BodyTab(createMainObjectPanel, HP.HPTRIM.Utils.String.format(HPTRIM.Messages.web_createNewObject, [objectDef.type.name]));
                            this.tabPanelList.push(createMainObjectTab);
                            this.currentActiveTabPanel(createMainObjectTab);
                            createMainObjectPanel.returnAction = function (result) {
                                if (result) {
                                    if (callback) {
                                        callback(result.Uri);
                                    }
                                }
                                var bodyTabs = _.filter(_this.tabPanelList(), function (bodyTab) {
                                    return bodyTab != createMainObjectTab;
                                });
                                _this.tabPanelList(bodyTabs);
                                var uri = result.Uri;
                                var type = objectDef.type;
                                var bodyTab = _this.makeNewTab(type, type.Name);
                                bodyTab.mainObjectPanelRef.localSearchHandler("uri:" + uri, uri, type);
                            };
                            createMainObjectPanel.cancelAction = function () {
                                _this.removeTabAndMakeTargetActive(createMainObjectTab, currentActiveTab);
                            };
                            return createMainObjectPanel;
                        };
                        BodyPanel.prototype.showNewRecordDataEntryPanel = function (fileDropped, recordTypeFilter, propertyValues, defaultClassification) {
                            var _this = this;
                            var createRecordPanel = new HP.HPTRIM.App.Panels.RecordDataEntryForm.CreateOrModifyRecordOverlayPanel(this.trimClient, this.fileUploadProvider);
                            this.wireUpCreateRecordPanel(createRecordPanel);
                            createRecordPanel.commandPanel.recordTypeFilter(recordTypeFilter);
                            createRecordPanel.configureCommandPanel(propertyValues, fileDropped, defaultClassification);
                            var currentActiveTab = this.currentActiveTabPanel();
                            var createRecordTab = new BodyTab(createRecordPanel, HPTRIM.Messages.web_createNewRecord);
                            createRecordTab.createOrModifyRecordPanelRef = createRecordPanel;
                            this.tabPanelList.push(createRecordTab);
                            this.currentActiveTabPanel(createRecordTab);
                            createRecordPanel.completeAction = function (uri) {
                                var bodyTabs = _.filter(_this.tabPanelList(), function (bodyTab) {
                                    return bodyTab != createRecordTab;
                                });
                                _this.tabPanelList(bodyTabs);
                                var bodyTab = _this.makeNewTab(HPTRIM.BaseObjectTypes.Record, HPTRIM.BaseObjectTypes.Record.Name);
                                bodyTab.recordsPanelRef.showRecordView(Panels.RecordsPanel.CREATED_VIEW_ID, uri);
                            };
                            createRecordPanel.dataEntryPanel.cancel = function () {
                                _this.removeTabAndMakeTargetActive(createRecordTab, currentActiveTab);
                            };
                            return createRecordPanel;
                        };
                        BodyPanel.prototype.newRecordDataEntryPanelInModal = function (fileDropped, recordTypeFilter, propertyValues, defaultClassification, purpose) {
                            var createRecordPanel = new HP.HPTRIM.App.Panels.RecordDataEntryForm.CreateOrModifyRecordOverlayPanel(this.trimClient, this.fileUploadProvider, purpose);
                            this.wireUpCreateRecordPanel(createRecordPanel);
                            createRecordPanel.commandPanel.recordTypeFilter(recordTypeFilter);
                            createRecordPanel.configureCommandPanel(propertyValues, fileDropped, defaultClassification, purpose);
                            return createRecordPanel;
                        };
                        BodyPanel.prototype.newCreateRecordDataEntryPanel = function () {
                            var createRecordPanel = new HP.HPTRIM.App.Panels.RecordDataEntryForm.CreateRecord(this.trimClient, this.fileUploadProvider);
                            this.wireUpCreateRecordPanel(createRecordPanel);
                            return createRecordPanel;
                        };
                        BodyPanel.prototype.showNewWorkflowFromTemplateWizard = function (displayErrorMethod) {
                            var _this = this;
                            var workflowFromTemplateWizardPanel = new HP.HPTRIM.App.Panels.Workflow.WorkflowWizardPanel(this.trimClient);
                            workflowFromTemplateWizardPanel.workflowDataEntryPanel.displayError = displayErrorMethod;
                            var currentActiveTab = this.currentActiveTabPanel();
                            var workflowFromTemplateTab = new BodyTab(workflowFromTemplateWizardPanel, HPTRIM.Messages.web_initiateWorkFlow);
                            workflowFromTemplateTab.workflowFromTemplateWizardPanelRef = workflowFromTemplateWizardPanel;
                            this.tabPanelList.push(workflowFromTemplateTab);
                            this.currentActiveTabPanel(workflowFromTemplateTab);
                            workflowFromTemplateWizardPanel.close = function () {
                                _this.removeTabAndMakeTargetActive(workflowFromTemplateTab, currentActiveTab);
                            };
                            return workflowFromTemplateWizardPanel;
                        };
                        BodyPanel.prototype.showUpdateRecordDataEntryPanel = function (uri, updateAction) {
                            var _this = this;
                            var me = this;
                            var currentActiveTab = this.currentActiveTabPanel();
                            var owningPanel = currentActiveTab.recordsPanelRef;
                            var modifyRecordPanel = new HP.HPTRIM.App.Panels.RecordDataEntryForm.CreateOrModifyRecordOverlayPanel(this.trimClient, this.fileUploadProvider);
                            this.wireUpModifyRecordPanel(modifyRecordPanel);
                            var modifyRecordTab = new BodyTab(modifyRecordPanel, HPTRIM.Messages.web_modify + ' ' + HPTRIM.BaseObjectTypes.Record.name);
                            modifyRecordTab.createOrModifyRecordPanelRef = modifyRecordPanel;
                            this.tabPanelList.replace(currentActiveTab, modifyRecordTab);
                            var returnToOriginalBodyTab = function () {
                                _this.tabPanelList.replace(modifyRecordTab, currentActiveTab);
                                _this.currentActiveTabPanel(currentActiveTab);
                            };
                            modifyRecordPanel.dataEntryPanel.cancel = returnToOriginalBodyTab;
                            var updateCallback = function (result) {
                                returnToOriginalBodyTab();
                                _.forEach(_this.tabPanelList(), function (tab) {
                                    if (tab.objectType == HPTRIM.BaseObjectTypes.Record) {
                                        var recordsPanel = tab.recordsPanelRef;
                                        recordsPanel.updateDataFromResult(result);
                                        if (recordsPanel.selectedUri() == result.Uri) {
                                            recordsPanel.recordsDetailComponent.useCachedResult(result);
                                            recordsPanel.objectPropertiesPanel.refresh();
                                        }
                                    }
                                });
                            };
                            modifyRecordPanel.update(uri, updateCallback);
                            this.currentActiveTabPanel(modifyRecordTab);
                        };
                        BodyPanel.prototype.showUpdateMainObjectdDataEntryPanel = function (uri, objectDef, displayErrorMethod, requiredProperties, requiredCommandIds, updateAction) {
                            var _this = this;
                            var me = this;
                            var currentActiveTab = this.currentActiveTabPanel();
                            var owningPanel = currentActiveTab.mainObjectPanelRef;
                            var modifyMainObjectPanel = new HP.HPTRIM.App.Panels.MainObject.CreateOrModifyMainObjectPanel(this.trimClient);
                            var modifyMainObjectTab = new BodyTab(modifyMainObjectPanel, HPTRIM.Messages.web_modify + ' ' + objectDef.type.name);
                            var returnToOriginalBodyTab = function () {
                                _this.tabPanelList.replace(modifyMainObjectTab, currentActiveTab);
                                _this.currentActiveTabPanel(currentActiveTab);
                            };
                            modifyMainObjectPanel.cancelAction = function () {
                                returnToOriginalBodyTab();
                            };
                            modifyMainObjectPanel.returnAction = function (infoObject) {
                                returnToOriginalBodyTab();
                                _.forEach(_this.tabPanelList(), function (tab) {
                                    if (tab.objectType == objectDef.type) {
                                        var mainObjectPanel = tab.mainObjectPanelRef;
                                        mainObjectPanel.updateItemListPanelItem(infoObject);
                                        if (mainObjectPanel.selectedUri() == infoObject.Uri) {
                                            mainObjectPanel.detailComponent.updateDetailComponentWithCachedResult(infoObject);
                                            mainObjectPanel.objectPropertiesPanel.refresh();
                                        }
                                    }
                                });
                                updateAction(infoObject);
                            };
                            modifyMainObjectPanel.errorAction = displayErrorMethod;
                            modifyMainObjectPanel.updateObjectDef(objectDef);
                            modifyMainObjectPanel.createOrModifyMainObjectFormPanel.update(objectDef, uri, requiredCommandIds, requiredProperties);
                            this.tabPanelList.replace(currentActiveTab, modifyMainObjectTab);
                            this.currentActiveTabPanel(modifyMainObjectTab);
                        };
                        BodyPanel.prototype.showModifyActivityPanel = function (activityUri) {
                            var _this = this;
                            var me = this;
                            var currentActiveTab = this.currentActiveTabPanel();
                            var workflowPanel = currentActiveTab.workflowPanelRef;
                            var activityDetailComponent = workflowPanel.activityDetailComponent;
                            var modifyActivityPanel = new HP.HPTRIM.App.Panels.ActivityDetails.ModifyActivityOverlayPanel(this.trimClient);
                            var modifyActivityTab = new BodyTab(modifyActivityPanel, HPTRIM.Messages.web_modify + ' ' + HPTRIM.BaseObjectTypes.Activity.name);
                            var returnToOriginalBodyTab = function () {
                                _this.tabPanelList.replace(modifyActivityTab, currentActiveTab);
                                _this.currentActiveTabPanel(currentActiveTab);
                            };
                            modifyActivityPanel.returnAction = function (message, result) {
                                returnToOriginalBodyTab();
                                if (message) {
                                    activityDetailComponent.actionResult(message);
                                    activityDetailComponent.actionResultDisplay(true);
                                    activityDetailComponent.doFadeInOutOnInformationalText();
                                }
                                if (result) {
                                    workflowPanel.activityItemListPanel.updateDataFromResult(result);
                                    activityDetailComponent.useCachedResult(result);
                                    _.forEach(_this.tabPanelList(), function (tab) {
                                        if (tab.objectType == HPTRIM.BaseObjectTypes.Activity) {
                                            var actPanel = tab.workflowPanelRef;
                                            if (actPanel) {
                                                actPanel.updateDataFromResult(result);
                                                if (actPanel.selectedUri() == result.Uri) {
                                                    actPanel.activityDetailComponent.useCachedResult(result);
                                                    var queryString = actPanel.activityItemListPanel.searchQueryObject.searchString;
                                                    workflowPanel.updateView(actPanel.activityItemListPanel, queryString);
                                                    actPanel.activityItemListPanel.refresh();
                                                }
                                            }
                                        }
                                    });
                                }
                                workflowPanel.objectPropertiesPanel.visible(true);
                            };
                            modifyActivityPanel.update(activityUri, activityDetailComponent.useCachedResult);
                            this.tabPanelList.replace(currentActiveTab, modifyActivityTab);
                            this.currentActiveTabPanel(modifyActivityTab);
                        };
                        BodyPanel.prototype.makeNewTab = function (objectType, title) {
                            var _this = this;
                            $('.itemlist-header').css({ zIndex: 0 });
                            var panelTab;
                            if (objectType == HPTRIM.BaseObjectTypes.Record) {
                                var recordPanel = new Panels.RecordsPanel(this.trimClient);
                                this.wireUpRecordPanel(recordPanel);
                                this.wireUpGenericRecordPanel(recordPanel);
                                recordPanel.updateCallback = function (infoObject, task) {
                                    _.forEach(_this.tabPanelList(), function (tab) {
                                        if (tab.objectType == HPTRIM.BaseObjectTypes.Record) {
                                            var recordPanel_1 = tab.recordsPanelRef;
                                            recordPanel_1.updateDataFromResult(infoObject);
                                            if (recordPanel_1.selectedUri() == infoObject.Uri) {
                                                recordPanel_1.recordsDetailComponent.useCachedResult(infoObject, task);
                                                recordPanel_1.objectPropertiesPanel.refresh();
                                            }
                                        }
                                    });
                                };
                                var panelTab_1 = new BodyTab(recordPanel, title, objectType);
                                panelTab_1.recordsPanelRef = recordPanel;
                                this.tabPanelList.push(panelTab_1);
                                this.currentActiveTabPanel(panelTab_1);
                                return panelTab_1;
                            }
                            else if (objectType == HPTRIM.BaseObjectTypes.Activity || objectType == HPTRIM.BaseObjectTypes.Workflow) {
                                var workflowPanel = new Panels.WorkflowPanel(this.trimClient, this.fileUploadProvider);
                                this.wireUpWorkflowPanel(workflowPanel);
                                this.wireUpGenericRecordPanel(workflowPanel);
                                panelTab = new BodyTab(workflowPanel, title, objectType);
                                panelTab.workflowPanelRef = workflowPanel;
                                this.tabPanelList.push(panelTab);
                                this.currentActiveTabPanel(panelTab);
                                return panelTab;
                            }
                            else {
                                var mainObjectDef_1 = _.find(this.mainObjectDefs, function (mainObjectDef) {
                                    return mainObjectDef.type == objectType;
                                });
                                var mainObjectPanel = null;
                                if (mainObjectDef_1.type.Id == HPTRIM.BaseObjectTypes.SavedSearch.Id) {
                                    mainObjectPanel = new HP.HPTRIM.App.Panels.MainObject.SavedSearchMainObjectPanel(this.trimClient, mainObjectDef_1, this.childObjectDefs, this.supportedTypes);
                                }
                                else {
                                    mainObjectPanel = new Panels.MainObjectPanel(this.trimClient, mainObjectDef_1, this.childObjectDefs, this.supportedTypes);
                                }
                                this.wireUpMainObjectPanel(mainObjectPanel);
                                mainObjectPanel.updateCallback = function (infoObject) {
                                    _.forEach(_this.tabPanelList(), function (tab) {
                                        if (tab.objectType == mainObjectDef_1.type) {
                                            var mainObjectPanel = tab.mainObjectPanelRef;
                                            mainObjectPanel.updateItemListPanelItem(infoObject);
                                            mainObjectPanel.detailComponent.updateDetailComponentWithCachedResult(infoObject);
                                            mainObjectPanel.objectPropertiesPanel.refresh();
                                        }
                                    });
                                };
                                panelTab = new BodyTab(mainObjectPanel, title, objectType);
                                panelTab.mainObjectPanelRef = mainObjectPanel;
                                this.tabPanelList.push(panelTab);
                                this.currentActiveTabPanel(panelTab);
                                return panelTab;
                            }
                        };
                        BodyPanel.prototype.removeTabAndMakeTargetActive = function (tabToRemove, tabToActivate) {
                            var bodyTabs = _.filter(this.tabPanelList(), function (bodyTab) {
                                return bodyTab != tabToRemove;
                            });
                            if (bodyTabs.length == 0) {
                                this.tabPanelList.push(this.dashBoardTab);
                            }
                            this.tabPanelList(bodyTabs);
                            if (_.contains(bodyTabs, tabToActivate)) {
                                this.currentActiveTabPanel(tabToActivate);
                            }
                            else {
                                this.currentActiveTabPanel(this.tabPanelList()[0]);
                            }
                        };
                        return BodyPanel;
                    }(HP.HPTRIM.Framework.Components.Layouts.SinglePage.BodyPanel));
                    Framework.BodyPanel = BodyPanel;
                })(Framework = Panels.Framework || (Panels.Framework = {}));
            })(Panels = App.Panels || (App.Panels = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Panels;
            (function (Panels) {
                var Framework;
                (function (Framework) {
                    "use strict";
                    var NavPanel = (function (_super) {
                        __extends(NavPanel, _super);
                        function NavPanel(trimClient, order) {
                            _super.call(this);
                            this.profileUsername = ko.observable('');
                            this.profileUserType = ko.observable('');
                            this.profileDatasetId = ko.observable('');
                            this.profileServerName = ko.observable('');
                            this.showLogout = ko.observable(false);
                            this.logoutLocation = ko.observable('');
                            NavPanel.HOME_CAPTION = HP.HPTRIM.Messages.web_home;
                            NavPanel.RECORD_CAPTION = HP.HPTRIM.Messages.web_records;
                            NavPanel.WORKFLOW_CAPTION = HP.HPTRIM.BaseObjectTypes.Workflow.CaptionPlural;
                            NavPanel.HELP_CAPTION = HP.HPTRIM.Messages.dp_cap_Help;
                            NavPanel.WORKLISTS_CAPTION = HP.HPTRIM.Messages.web_workLists;
                            this.trimClient = trimClient;
                            this.order = [];
                            if (order) {
                                this.order = order;
                            }
                            var db = trimClient.getDatabase();
                            var wgs = db.workgroupServerName();
                            var currentUser = db.currentLoggedInUser().displayValue;
                            var dbID = db.id();
                            var datasets = [];
                            this.showLogout(HPTRIM.Config.useADFS);
                            this.logoutLocation(this.trimClient.getADFSLogoutURL());
                            this.profileUserType(trimClient.currentUserType());
                            this.profileUsername(currentUser);
                            this.profileDatasetId(dbID);
                            this.profileServerName(wgs);
                            var me = this;
                            this.visible(true);
                        }
                        NavPanel.prototype.getActionByType = function (type) {
                            return this.mainObjectPanelsByName[type.name];
                        };
                        NavPanel.prototype.getActionByTypeName = function (name) {
                            return this.mainObjectPanelsByName[name];
                        };
                        NavPanel.prototype.getActionByName = function (actionName) {
                            var returnAction = _.find(this.actions(), function (action) {
                                return action.caption == actionName;
                            });
                            if (!returnAction) {
                                _.each(this.actions(), function (action) {
                                    if (action.childActions) {
                                        returnAction = _.find(action.childActions(), function (action) {
                                            return action.caption == actionName;
                                        });
                                    }
                                });
                            }
                            if (!returnAction) {
                                returnAction = this.actions()[0];
                            }
                            return returnAction;
                        };
                        NavPanel.prototype.setActionActive = function (action) {
                            if (!action) {
                                return;
                            }
                            var deactivateAction = function (action) {
                                action.active(false);
                                if (action.childActions) {
                                    _.each(action.childActions(), deactivateAction);
                                }
                            };
                            _.each(this.actions(), deactivateAction);
                            action.active(true);
                        };
                        NavPanel.HOME_CAPTION = HP.HPTRIM.Messages.web_home;
                        NavPanel.HOME_ICON = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAFCGlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDIgNzkuMTYwOTI0LCAyMDE3LzA3LzEzLTAxOjA2OjM5ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAxOC0wMy0yMlQxMTozNTo0NFoiIHhtcDpNb2RpZnlEYXRlPSIyMDE4LTA0LTAzVDE0OjM1OjI0KzAxOjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDE4LTA0LTAzVDE0OjM1OjI0KzAxOjAwIiBkYzpmb3JtYXQ9ImltYWdlL3BuZyIgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyIgcGhvdG9zaG9wOklDQ1Byb2ZpbGU9InNSR0IgSUVDNjE5NjYtMi4xIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjNjZjdkMDIxLTQ0YTctNGY0MC1iMWQ1LWJhN2ZlYjgxMjk2NCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDozY2Y3ZDAyMS00NGE3LTRmNDAtYjFkNS1iYTdmZWI4MTI5NjQiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDozY2Y3ZDAyMS00NGE3LTRmNDAtYjFkNS1iYTdmZWI4MTI5NjQiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjNjZjdkMDIxLTQ0YTctNGY0MC1iMWQ1LWJhN2ZlYjgxMjk2NCIgc3RFdnQ6d2hlbj0iMjAxOC0wMy0yMlQxMTozNTo0NFoiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAoV2luZG93cykiLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+D+hdOAAAAK5JREFUOI2t08tqAjEUBuBvxII4dHQtok+n9K1rW117Azei48KxxDCGiP4QSPJfckhyirquvYJiNv9K8Wv0cEKFcyzoJMwbDJuAEn3U2OUEbDCI9vZtwraA7xZziM9w0Y3IH0wSZjg+quAvwwwfWMQBK4wzzDdMXavVwRKjJ8w3TPDbDU6usM00DzTPGd7BLhKVKJpRRty/NvWRDg/md0gFZOHtAWFrVjkBxavtfAHhFh86NWYmCAAAAABJRU5ErkJggg==';
                        NavPanel.RECORD_CAPTION = HP.HPTRIM.Messages.web_records;
                        NavPanel.RECORD_ICON = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAFCGlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDIgNzkuMTYwOTI0LCAyMDE3LzA3LzEzLTAxOjA2OjM5ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAxOC0wMy0yMlQxMTozNTo0NloiIHhtcDpNb2RpZnlEYXRlPSIyMDE4LTA0LTAzVDE0OjM4OjMwKzAxOjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDE4LTA0LTAzVDE0OjM4OjMwKzAxOjAwIiBkYzpmb3JtYXQ9ImltYWdlL3BuZyIgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyIgcGhvdG9zaG9wOklDQ1Byb2ZpbGU9InNSR0IgSUVDNjE5NjYtMi4xIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjFiZDhlYjUxLWJjMGYtNDU0NS1iNzYzLTg2NjY5NDg0MTFkYiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDoxYmQ4ZWI1MS1iYzBmLTQ1NDUtYjc2My04NjY2OTQ4NDExZGIiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDoxYmQ4ZWI1MS1iYzBmLTQ1NDUtYjc2My04NjY2OTQ4NDExZGIiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjFiZDhlYjUxLWJjMGYtNDU0NS1iNzYzLTg2NjY5NDg0MTFkYiIgc3RFdnQ6d2hlbj0iMjAxOC0wMy0yMlQxMTozNTo0NloiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAoV2luZG93cykiLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+RQa8KAAAAGtJREFUOI1j/P//PwMlgAWZk5aeic20fwwMDEzogrNmTmfEMAAmiA3gMBxhAC4FMENnzZzOiE0NhtPw2Q417A/JBqAZwooszoJdOSrAFzYEDUD3N7phRHsBFxg1gEwDkGMC2QCysiUjpdkZAM30KLhX4h4KAAAAAElFTkSuQmCC';
                        NavPanel.RECORD_TYPES_CAPTION = HP.HPTRIM.Messages.web_recordType;
                        NavPanel.WORKLISTS_CAPTION = HP.HPTRIM.Messages.web_workLists;
                        NavPanel.WORKLISTS_ICON = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAFCGlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDIgNzkuMTYwOTI0LCAyMDE3LzA3LzEzLTAxOjA2OjM5ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAxOC0wMy0yMlQxMTozNTo0OFoiIHhtcDpNb2RpZnlEYXRlPSIyMDE4LTA0LTAzVDE0OjQwOjE0KzAxOjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDE4LTA0LTAzVDE0OjQwOjE0KzAxOjAwIiBkYzpmb3JtYXQ9ImltYWdlL3BuZyIgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyIgcGhvdG9zaG9wOklDQ1Byb2ZpbGU9InNSR0IgSUVDNjE5NjYtMi4xIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjUxMDE3NjNjLTMyODEtOTM0OS05OTcwLTYxNjA5YWU2ODllMiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo1MTAxNzYzYy0zMjgxLTkzNDktOTk3MC02MTYwOWFlNjg5ZTIiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1MTAxNzYzYy0zMjgxLTkzNDktOTk3MC02MTYwOWFlNjg5ZTIiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjUxMDE3NjNjLTMyODEtOTM0OS05OTcwLTYxNjA5YWU2ODllMiIgc3RFdnQ6d2hlbj0iMjAxOC0wMy0yMlQxMTozNTo0OFoiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAoV2luZG93cykiLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+iJTKGAAAARZJREFUOI2l078uBFEUx/HPIGITj6BTSKioFCp6jUcQoiCxVvAKk2A3ofQI20mUKoWKijdBtmAUzk2um9lqf8nk3nvOme/5M3eqpmlMompv/6DNPsROYXvEVhk4VZx30cTLR5jHHLrYDN/yOEAHd7hHhVt8YIRB2OANq22ArwjazmzdyNqNc4K85ICpCGqb5nWx5pA6Ab4z5zDW2VhPijXpFGcJkIgbWI/9KMruh79fAAZ5C0nPWMhaycvO9Zkl+gc4HlN2OcgHPMW+SRepjp5SO7ny4VaFbTpVcN4SnJQqyeFVPD95C2tjIGmQcBn+TnLmgFesZJAaS1hEL2w9XPm7dGCmyPYe2Q5xI751qMZF2V816e/8CyvFPrkyxji7AAAAAElFTkSuQmCC';
                        NavPanel.REQUEST_ICON = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAFCGlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDIgNzkuMTYwOTI0LCAyMDE3LzA3LzEzLTAxOjA2OjM5ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAxOC0wMy0yMlQxMTozNTo0NloiIHhtcDpNb2RpZnlEYXRlPSIyMDE4LTA0LTAzVDE0OjQxOjMwKzAxOjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDE4LTA0LTAzVDE0OjQxOjMwKzAxOjAwIiBkYzpmb3JtYXQ9ImltYWdlL3BuZyIgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyIgcGhvdG9zaG9wOklDQ1Byb2ZpbGU9InNSR0IgSUVDNjE5NjYtMi4xIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjU1ZmYwOGE5LWY1ZWUtOTY0MC1iMGYyLWU2YmQxYzNkOWI4ZiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo1NWZmMDhhOS1mNWVlLTk2NDAtYjBmMi1lNmJkMWMzZDliOGYiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo1NWZmMDhhOS1mNWVlLTk2NDAtYjBmMi1lNmJkMWMzZDliOGYiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjU1ZmYwOGE5LWY1ZWUtOTY0MC1iMGYyLWU2YmQxYzNkOWI4ZiIgc3RFdnQ6d2hlbj0iMjAxOC0wMy0yMlQxMTozNTo0NloiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAoV2luZG93cykiLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+9MOQYwAAAJlJREFUOI2tU9ENAyEIBXMDdKJuU637NCGwRIe4gTrCu59qbCspd+1LiEYU3gNkAPQLlujFXOqJiB7jmakwewxyqRFqKUUZzGAq6BLGjKbC0SDp/fFedAmmwnsyfwQ4CreNUTYM4HANTIX/KmE1lTPRvCujpBc/gG6XfMW4bzbzN+uj/G2QPP9Yg/W53hy59+bPpfYA7meKYgO5BGhT9NXgkgAAAABJRU5ErkJggg==';
                        NavPanel.LOCATION_ICON = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAFCGlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDIgNzkuMTYwOTI0LCAyMDE3LzA3LzEzLTAxOjA2OjM5ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAxOC0wMy0yMlQxMTozNTo0NFoiIHhtcDpNb2RpZnlEYXRlPSIyMDE4LTA0LTAzVDE0OjM3OjAzKzAxOjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDE4LTA0LTAzVDE0OjM3OjAzKzAxOjAwIiBkYzpmb3JtYXQ9ImltYWdlL3BuZyIgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyIgcGhvdG9zaG9wOklDQ1Byb2ZpbGU9InNSR0IgSUVDNjE5NjYtMi4xIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjI5MjVkMzhmLTdmYTctMzM0My05OTJlLTIxM2ZmYzkyMmYxYyIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDoyOTI1ZDM4Zi03ZmE3LTMzNDMtOTkyZS0yMTNmZmM5MjJmMWMiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDoyOTI1ZDM4Zi03ZmE3LTMzNDMtOTkyZS0yMTNmZmM5MjJmMWMiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjI5MjVkMzhmLTdmYTctMzM0My05OTJlLTIxM2ZmYzkyMmYxYyIgc3RFdnQ6d2hlbj0iMjAxOC0wMy0yMlQxMTozNTo0NFoiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAoV2luZG93cykiLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+ux51FwAAAQdJREFUOI2l06FOA1EQBdCzbaEUEgTB8B0EhUYhUOAxu9kv2uwKCJ4gUHwCBAsJQYOrIMUQaLuI7pZSXlOaTjJi7szcOzMvLyrL0jLWgjhJu1W8+c++d2wVeRa1aqTIs+1FlOMkLccTTCvHSRphvcJ38IJekWcf00SNAHOjar7CK+5wgX6Vq60fJEATh9ibiHdxFKqfRTBAr4pLo6MN/aw8m6Da8xoP+Kz8EbdozyWIk/QE9zgu8mytyLMOTnGDg+n6PyPhHKvoxkk6nBBq4wyX8wgGRnfoBHLDaSBE8IUogNe5XxZ6hSejy4f8edYEKzVQ5Nn+DPWgjVeIk/QNGwv0NiFa9jt/AxatRzianfSaAAAAAElFTkSuQmCC';
                        NavPanel.SAVEDSEARCH_ICON = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAFCGlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDIgNzkuMTYwOTI0LCAyMDE3LzA3LzEzLTAxOjA2OjM5ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAxOC0wMy0yMlQxMTozNTo0NloiIHhtcDpNb2RpZnlEYXRlPSIyMDE4LTA0LTAzVDE0OjQyOjM4KzAxOjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDE4LTA0LTAzVDE0OjQyOjM4KzAxOjAwIiBkYzpmb3JtYXQ9ImltYWdlL3BuZyIgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyIgcGhvdG9zaG9wOklDQ1Byb2ZpbGU9InNSR0IgSUVDNjE5NjYtMi4xIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOmQ4MmNiYjNhLWFiNTAtYTY0OS1hMzYwLWNhNzkyNzAyZTYxNCIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpkODJjYmIzYS1hYjUwLWE2NDktYTM2MC1jYTc5MjcwMmU2MTQiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpkODJjYmIzYS1hYjUwLWE2NDktYTM2MC1jYTc5MjcwMmU2MTQiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOmQ4MmNiYjNhLWFiNTAtYTY0OS1hMzYwLWNhNzkyNzAyZTYxNCIgc3RFdnQ6d2hlbj0iMjAxOC0wMy0yMlQxMTozNTo0NloiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAoV2luZG93cykiLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+umE6gwAAAQdJREFUOI2Vk7FKA0EQhr+LWwmRiK1WVtYxYHyQgA/gxbS+zLL7CHkQIxjBzspKW0FMfazNvzLsbcT7m9m9mflmhtlrUkpktcvVFpjq+glMgAPgOQZ/SUVNSol2uZoBG2CnpHfgEbgCzoAvYAzMY/BPFuBkN8Cbqi5i8B+mq1NgDZwozllAc9vebYFz4DUGf11rU6AHYF6OM9LME2CxL1nK/qn9OMoH23ZNxVizHmCgbiygG5jcxeDv88XF4N1f0VnaRk9OzlRzAsTgGx3Xsi89QBFoqybZvELKF+nK4D26sHG2mF1jU+tCvmP5doJ89wD/UQz+SJBxhgx+B4J0wCEUP8YAyG/eD5HsXzdLJpKRAAAAAElFTkSuQmCC';
                        NavPanel.CHECKINSTYLE_ICON = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAF+mlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDIgNzkuMTYwOTI0LCAyMDE3LzA3LzEzLTAxOjA2OjM5ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoV2luZG93cykiIHhtcDpDcmVhdGVEYXRlPSIyMDE4LTA0LTI2VDA4OjA1OjE1KzAxOjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAxOC0wNC0yNlQxNTo0MjozMCswMTowMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAxOC0wNC0yNlQxNTo0MjozMCswMTowMCIgZGM6Zm9ybWF0PSJpbWFnZS9wbmciIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIHBob3Rvc2hvcDpJQ0NQcm9maWxlPSJzUkdCIElFQzYxOTY2LTIuMSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDoxYTc3MmFjNi01YjAwLWZiNGMtOGFiNi0xNzJkMjg5NTg2NTEiIHhtcE1NOkRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDphMmEzOWYwOS1jN2UzLWUwNDQtYmJhNy1lOTYzYmVhY2Y3NTUiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo4OGRjMzkyNy0zOWU2LTIwNDQtOTcwZS1mZWMwZjdlYTFhMDMiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjg4ZGMzOTI3LTM5ZTYtMjA0NC05NzBlLWZlYzBmN2VhMWEwMyIgc3RFdnQ6d2hlbj0iMjAxOC0wNC0yNlQwODowNToxNSswMTowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKFdpbmRvd3MpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDoxYTc3MmFjNi01YjAwLWZiNGMtOGFiNi0xNzJkMjg5NTg2NTEiIHN0RXZ0OndoZW49IjIwMTgtMDQtMjZUMTU6NDI6MzArMDE6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE4IChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5VAZ6aAAAAh0lEQVQ4jcVTQQ7AIAgryx6wV7r4IoKf3BPYZRjCZnTzMC4GbEshSqqKmVim2ADWHiDteQNwxHoRplEHN/IlrNWBJa2wbpFcBXrE2KAIk9W6I6Q9axEmEzOy5U0HHmjd4ihDDp4cTQl8cuB3YPmrJfrTkwGAVLX5DiI43nUFIji6KsJEv//GEznYWQgiVzA9AAAAAElFTkSuQmCC';
                        NavPanel.CLASSIFICATION_ICON = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAsklEQVRIidVVQQ6DMAyzJQ77/2s5TPMuy5R0TSnQSp1PFNzaiYEAk0EAkCQAsnV2TZIfbsZ5AtiMC1t4sZvYCuEg8FX1cI5LMOG/SsXR4M/CXLYq8M8aVUUlkjMqCOgWkKTiLRorUENPS2e0SABoFXcLmKOzbfrfkGdmEAwt0SLB/XeWCbmWQdPV3S/51KYrAjwSWS4DQ5gHyKvIZnLJsXushbwDeLjNfqA3DfqDD/jj8QYJcGhfGkCFewAAAABJRU5ErkJggg==';
                        NavPanel.USERLABEL_ICON = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAGtmlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDIgNzkuMTYwOTI0LCAyMDE3LzA3LzEzLTAxOjA2OjM5ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgKFdpbmRvd3MpIiB4bXA6Q3JlYXRlRGF0ZT0iMjAxOC0wNC0xM1QxNzo0OToyNyswMTowMCIgeG1wOk1vZGlmeURhdGU9IjIwMTgtMDQtMTZUMDk6MTg6MDYrMDE6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMTgtMDQtMTZUMDk6MTg6MDYrMDE6MDAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiBwaG90b3Nob3A6SUNDUHJvZmlsZT0ic1JHQiBJRUM2MTk2Ni0yLjEiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NTIzNGQxODUtOGY0Yi1hMDQxLTk5NWYtMGFhYWY3ZTM5NDA0IiB4bXBNTTpEb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6NTljY2UxZmYtZjMwNi01ZjQyLWE5ODgtMjE1ZjA1YmE5ODc2IiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6M2NlZDE4MjEtNGY1Yy02MDQzLThhODgtYmQ0MjA2ZWMyNDk2Ij4gPHhtcE1NOkhpc3Rvcnk+IDxyZGY6U2VxPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY3JlYXRlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDozY2VkMTgyMS00ZjVjLTYwNDMtOGE4OC1iZDQyMDZlYzI0OTYiIHN0RXZ0OndoZW49IjIwMTgtMDQtMTNUMTc6NDk6MjcrMDE6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAoV2luZG93cykiLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjNlMjkzNDg5LWNkMmYtNjI0MS1hMmNhLTY1OTcwY2FkZmU1ZiIgc3RFdnQ6d2hlbj0iMjAxOC0wNC0xNlQwOTowNjoxMyswMTowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6NTIzNGQxODUtOGY0Yi1hMDQxLTk5NWYtMGFhYWY3ZTM5NDA0IiBzdEV2dDp3aGVuPSIyMDE4LTA0LTE2VDA5OjE4OjA2KzAxOjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgKFdpbmRvd3MpIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDwvcmRmOlNlcT4gPC94bXBNTTpIaXN0b3J5PiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PuqgCcQAAAD9SURBVDiNjdOvTsNQFAbwX5clRfAAGB4BQxCYJbhp3BSZ2jIIr0GCQsHKVHHTvABihgdAYHBoNDMU0dukf7ijn2nvd875er5zepOiKLQxmy9giglG2GCNfPW4bOQOO9UlpsiQhvMYZ+E9rycOIgKTWnGFNPANxARGffmYwKYvHxNYY9vitoFvIDbEPDw7W2gnJvU1hvXt4xLPeK/lnuIYD1Ct868OXnCCW3zhAwc4DPEUdzELgxBsz+a6JnCDJb5hOJsvur9iE0Ww9BNs7GGFi+qL/yFR+n7Ca+DOYxZ2idzjCG+hC3072Im+AgWulFYSfFaBPhaqIWbI2tf5F4GyNd3GrI3qAAAAAElFTkSuQmCC';
                        NavPanel.HELP_CAPTION = HP.HPTRIM.Messages.dp_cap_Help;
                        NavPanel.HELP_ICON = '';
                        NavPanel.WORKFLOW_CAPTION = HP.HPTRIM.BaseObjectTypes.Workflow.CaptionPlural;
                        return NavPanel;
                    }(HP.HPTRIM.Framework.Components.Layouts.SinglePage.NavPanel));
                    Framework.NavPanel = NavPanel;
                    var AppNavPanel = (function (_super) {
                        __extends(AppNavPanel, _super);
                        function AppNavPanel(trimClient, mainObjectDefs, order, activeFeatures) {
                            _super.call(this, trimClient, order);
                            this.onPostPanelSwitched = function () { };
                            var me = this;
                            this.workflowEnabled = _.contains(activeFeatures, "Workflow");
                            this.configureActions(mainObjectDefs);
                        }
                        AppNavPanel.prototype.onPanelSwitched = function () {
                            this.onPostPanelSwitched();
                        };
                        AppNavPanel.prototype.configureActions = function (mainObjectDefs) {
                            var _this = this;
                            var me = this;
                            var showHomeFunction = function (action) {
                                me.showHomeFunction();
                                me.onPanelSwitched();
                                if ($('#NAV_WORKLISTS').hasClass("selected")) {
                                    $('#NAV_WORKLISTS').removeClass("active selected");
                                    $("#NAV_WORKLISTS .nav-second-level").collapse('hide');
                                }
                            };
                            var showRecordsFunction = function (action) {
                                me.showRecordsFunction();
                                me.onPanelSwitched();
                                if ($('#NAV_WORKLISTS').hasClass("selected")) {
                                    $('#NAV_WORKLISTS').removeClass("active selected");
                                    $("#NAV_WORKLISTS .nav-second-level").collapse('hide');
                                }
                            };
                            var showWorkflowFunction = function (action) {
                                me.showWorkflowFunction();
                                me.onPanelSwitched();
                            };
                            var showHelpFunction = function (action) {
                                var virtualDirectory = HPRMWebConfig.virtualDirectory;
                                var languageCode = me.trimClient.getCurrentLanguageCode();
                                var url = virtualDirectory + "Content/help/" + languageCode + "/WebClient.htm";
                                window.open(url, "_blank");
                            };
                            var homeAction = new HP.HPTRIM.Framework.Components.ActionManager.ActionBase({ tooltip: NavPanel.HOME_CAPTION, caption: NavPanel.HOME_CAPTION, icon: NavPanel.HOME_ICON, actionHandler: showHomeFunction, active: true, id: "HOME" });
                            var recordAction = new HP.HPTRIM.Framework.Components.ActionManager.ActionBase({ tooltip: NavPanel.RECORD_CAPTION, url: 'q=favorite&t=record', caption: NavPanel.RECORD_CAPTION, icon: NavPanel.RECORD_ICON, actionHandler: showRecordsFunction, id: "RECORDS"
                            });
                            var actions = [];
                            actions.push(homeAction);
                            actions.push(recordAction);
                            var metisMenuInitialised = false;
                            var worklistsId = "WORKLISTS";
                            var workItemAction = new HP.HPTRIM.Framework.Components.ActionManager.ActionBase({
                                tooltip: NavPanel.WORKLISTS_CAPTION, caption: NavPanel.WORKLISTS_CAPTION, icon: NavPanel.WORKLISTS_ICON, actionHandler: function () {
                                    if (!metisMenuInitialised) {
                                        metisMenuInitialised = true;
                                        var jQueryNavMenu = $('#side-menu');
                                        jQueryNavMenu.metisMenu();
                                        var navItemId = "#NAV_" + worklistsId;
                                        $(navItemId).addClass("active selected");
                                        var navSecondLevel = navItemId + " .nav-second-level";
                                        var jQueryNavSecondLevel = $(navSecondLevel);
                                        jQueryNavSecondLevel.collapse('show');
                                    }
                                }, id: worklistsId
                            });
                            var workflowAction = new HP.HPTRIM.Framework.Components.ActionManager.ActionBase({ tooltip: NavPanel.WORKFLOW_CAPTION, caption: NavPanel.WORKFLOW_CAPTION, icon: "", actionHandler: showWorkflowFunction, id: "WORKFLOW" });
                            if (this.workflowEnabled) {
                                workItemAction.childActions.push(workflowAction);
                            }
                            this.mainObjectPanelsByName = {};
                            _.each(mainObjectDefs, function (mainObjectDef) {
                                if (mainObjectDef.isHiddenInNavPanel) {
                                    return;
                                }
                                if (mainObjectDef.RequiredFeaturePermissions && mainObjectDef.RequiredFeaturePermissions.length > 0) {
                                    var havePermissions = true;
                                    _.each(mainObjectDef.RequiredFeaturePermissions, function (permissionName) {
                                        var hasPermission = _this.trimClient.getDatabase().currentUserPermissions()[permissionName];
                                        if (!hasPermission) {
                                            havePermissions = false;
                                        }
                                    });
                                    if (!havePermissions) {
                                        return;
                                    }
                                }
                                var defaultTray;
                                var query = 'all';
                                _.each(mainObjectDef.trayPages, function (trayPage) {
                                    _.each(trayPage.pageItems, function (pageItem) {
                                        if (pageItem.isDefault) {
                                            defaultTray = pageItem;
                                        }
                                    });
                                });
                                if (!defaultTray) {
                                    var firstTrayPage = mainObjectDef.trayPages[0];
                                    if (firstTrayPage && firstTrayPage.pageItems[0]) {
                                        defaultTray = firstTrayPage.pageItems[0];
                                    }
                                }
                                if (defaultTray) {
                                    query = defaultTray.query;
                                }
                                var caption = mainObjectDef.CaptionPlural;
                                if (mainObjectDef.navCaptionOverride) {
                                    caption = mainObjectDef.navCaptionOverride;
                                }
                                var workListItems = [
                                    HPTRIM.BaseObjectTypes.RecordAction,
                                    HPTRIM.BaseObjectTypes.TodoItem,
                                    HPTRIM.BaseObjectTypes.ConsignmentApprover,
                                ];
                                var mainObjectPanelAction = new HP.HPTRIM.Framework.Components.ActionManager.ActionBase({
                                    url: 't=' + mainObjectDef.type.Name + '&q=' + mainObjectDef.trayPages[0].pageItems[0].query,
                                    tooltip: caption,
                                    caption: caption,
                                    icon: "",
                                    actionHandler: function () {
                                        me.showMainObjectPanel(mainObjectDef.type);
                                        me.onPanelSwitched();
                                        if (!_.contains(workListItems, mainObjectDef.type)) {
                                            if ($('#NAV_WORKLISTS').hasClass("selected")) {
                                                $('#NAV_WORKLISTS').removeClass("active selected");
                                                $("#NAV_WORKLISTS .nav-second-level").collapse('hide');
                                            }
                                        }
                                    }
                                });
                                var iconName = (mainObjectDef.navIcon + "_icon").toUpperCase();
                                if (NavPanel[iconName]) {
                                    mainObjectPanelAction.icon(NavPanel[iconName]);
                                }
                                mainObjectPanelAction.id = mainObjectDef.type.name.toUpperCase();
                                _this.mainObjectPanelsByName[mainObjectDef.type.name] = mainObjectPanelAction;
                                if (_.contains(workListItems, mainObjectDef.type)) {
                                    workItemAction.childActions.push(mainObjectPanelAction);
                                }
                                else {
                                    actions.push(mainObjectPanelAction);
                                }
                            });
                            if (workItemAction.childActions().length > 0) {
                                actions.push(workItemAction);
                            }
                            var orderedActions = [];
                            _.each(this.order, function (id) {
                                _.each(actions, function (action) {
                                    if (action.id && action.id.toLowerCase() == id.toLowerCase()) {
                                        orderedActions.push(action);
                                    }
                                    if (action.id && action.id.toLowerCase() == ("MainObject_" + id).toLowerCase()) {
                                        orderedActions.push(action);
                                    }
                                });
                            });
                            _.each(actions, function (action) {
                                if (!_.contains(orderedActions, action)) {
                                    orderedActions.push(action);
                                }
                            });
                            this.actions(orderedActions);
                        };
                        return AppNavPanel;
                    }(NavPanel));
                    Framework.AppNavPanel = AppNavPanel;
                })(Framework = Panels.Framework || (Panels.Framework = {}));
            })(Panels = App.Panels || (App.Panels = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Panels;
            (function (Panels) {
                var Framework;
                (function (Framework) {
                    "use strict";
                    var GlobalSearchPanel = (function (_super) {
                        __extends(GlobalSearchPanel, _super);
                        function GlobalSearchPanel(trimClient, supportedTypes, hideRecordType) {
                            var _this = this;
                            _super.call(this);
                            this.profileUsername = ko.observable('');
                            this.profileUserType = ko.observable('');
                            this.profileDatasetId = ko.observable('');
                            this.profileServerName = ko.observable('');
                            this.showLogout = ko.observable(false);
                            this.logoutLocation = ko.observable('');
                            this.formSearchDropdown = ko.observable(null);
                            this.filterSortDropdown = ko.observable(null);
                            this.smallFormSearchActions = ko.observableArray([]);
                            this.smallFilterSortActions = ko.observableArray([]);
                            this.homePageVisible = function () { };
                            this.showSearchForm = function () { };
                            this.showSavedSearches = function () { };
                            this.saveSearch = function () { };
                            this.showSettings = function () { };
                            this.showUserProfile = function () { };
                            this.showHelp = function () { };
                            this.showError = function (message) { };
                            this.updateClausePanel = function (caption) { };
                            this.updateFilterPanel = function (caption) { };
                            this.updateSortPanel = function (caption) { };
                            this.showSearchEditor = function (baseOjbectType, existingQuery, searchOptionFilterPanel) { };
                            this.showSearchFilterPanel = function (filterPanelRef) { };
                            this.showRecordTypeFilterPanel = function (recordTypeFilterRef) { };
                            this.showSearchOptionFilterPanel = function (recordTypeFilterRef) { };
                            this.showSearchSortPanel = function (sortPanelRef) { };
                            this.searchHistoryArray = ko.observableArray([]);
                            this.currentSearchHistory = ko.observableArray([]);
                            this.errorVisible = ko.observable(false);
                            this.alertDetails = ko.observable("");
                            this.cmLogo = ko.observable("");
                            this.latestQuery = "";
                            if (hideRecordType && supportedTypes.length == 0) {
                                throw "Invalid Global search construction - cannot hide record and have no supported types.";
                            }
                            this.templateName('templates/Search/GlobalSearchPanel');
                            this.trimClient = trimClient;
                            var db = trimClient.getDatabase();
                            var wgs = db.workgroupServerName();
                            var currentUser = db.currentLoggedInUser().displayValue;
                            var dbID = db.id();
                            var datasets = [];
                            this.showLogout(HPTRIM.Config.useADFS);
                            this.logoutLocation(this.trimClient.getADFSLogoutURL());
                            this.profileUserType(trimClient.currentUserType());
                            this.profileUsername(currentUser);
                            this.profileDatasetId(dbID);
                            this.profileServerName(wgs);
                            this.cmLogo(HPRMWebConfig.virtualDirectory + "Content/img/CMLogo.png");
                            var me = this;
                            this.saveSearchButtonEnabled = ko.observable(false);
                            this.isSelected = ko.observable(false);
                            this.showFilterButton = ko.observable(false);
                            this.showRecordTypeFilterButton = ko.observable(false);
                            this.showSearchOptionButton = ko.observable(false);
                            this.searchField = ko.observable("");
                            this.currentFilter = ko.observable("");
                            this.currentSort = ko.observable("");
                            this.currentSearchOptions = ko.observable("");
                            this.currentObjectName = ko.observable("");
                            if (hideRecordType) {
                                this.topTypes = ko.observableArray([]);
                            }
                            else {
                                this.topTypes = ko.observableArray([HPTRIM.BaseObjectTypes.Record]);
                            }
                            this.supportedTypes = ko.observableArray([]);
                            if (hideRecordType) {
                                this.selectedType = ko.observable(supportedTypes[0]);
                            }
                            else {
                                this.selectedType = ko.observable(HPTRIM.BaseObjectTypes.Record);
                            }
                            if (supportedTypes) {
                                _.each(supportedTypes, function (type) {
                                    if (type == HPTRIM.BaseObjectTypes.Location) {
                                        _this.topTypes.push(type);
                                    }
                                    else if (type == HPTRIM.BaseObjectTypes.Record || type == HPTRIM.BaseObjectTypes.SearchForm) {
                                    }
                                    else {
                                        _this.supportedTypes.push(type);
                                    }
                                });
                            }
                            this.supportedTypes(_.sortBy(this.supportedTypes(), 'Caption'));
                            this.homePageVisible = function () {
                            };
                            this.showSearchForm = function () {
                            };
                            this.showSettings = function () {
                            };
                            this.showUserProfile = function () {
                            };
                            this.showHelp = function () {
                            };
                            this.searchHandler = function (queryString, uri, objectType, filterString, sortString, searchOptions, dontUpdateGlobalSearchField) {
                            };
                            this.getCurrentDisplayedObject = function () {
                                return undefined;
                            };
                            this.localSearchHandler = function (queryString, uri, objectType, filterString, sortString, searchOptions, dontUpdateGlobalSearchField) {
                            };
                            this.onSearchEnter = function () {
                                me.search();
                                if ($('.global-search-input-container').hasClass('open')) {
                                    $('.global-search-input-container').toggleClass('open');
                                }
                            };
                            this.searchFieldClass = ko.observable('');
                            var isIEBrowser = window['ActiveXObject'] !== undefined ? true : false;
                            if (isIEBrowser) {
                                this.searchFieldClass("clearable");
                            }
                            else {
                                this.searchFieldClass("clearable x");
                                $(document).on('mousemove', '.x', function (mouseEvent) {
                                    if (this.offsetWidth - 18 < mouseEvent.pageX - this.getBoundingClientRect().left) {
                                        $(this).addClass('onX');
                                    }
                                    else {
                                        $(this).removeClass('onX');
                                    }
                                });
                                $(document).on('click', '.onX', function () {
                                    $(this).val('').change();
                                });
                                $(document).on('touchstart', '.onX, .x', function (touchStartEvent) {
                                    var touchXVal = 99999;
                                    if (touchStartEvent.originalEvent &&
                                        touchStartEvent.originalEvent.changedTouches &&
                                        touchStartEvent.originalEvent.changedTouches[0]) {
                                        touchXVal = touchStartEvent.originalEvent.changedTouches[0].clientX;
                                    }
                                    if ((this.offsetWidth - 24) < (touchXVal - this.getBoundingClientRect().left - 8)) {
                                        touchStartEvent.preventDefault();
                                        $(this).val('').change();
                                    }
                                });
                            }
                            this.afterRender = function () {
                            };
                            this.selectedType.subscribe(function (newType) {
                                _this.setupFilter(newType);
                                _this.setupSort(newType);
                                var objectSearchHistory = _.find(_this.searchHistoryArray(), function (searchHistoryObject) {
                                    return searchHistoryObject.objectType == newType;
                                });
                                if (!objectSearchHistory) {
                                    objectSearchHistory = {
                                        objectType: newType,
                                        history: [],
                                    };
                                    _this.searchHistoryArray.push(objectSearchHistory);
                                }
                                _this.currentSearchHistory(objectSearchHistory.history);
                            });
                            var searchAheadTimerHandler;
                            this.searchAheadSubscriptionMethod = function (newValue) {
                                var query = _this.searchField();
                                var isHomePageVisible = _this.homePageVisible();
                                if (query.length < GlobalSearchPanel.SEARCH_AHEAD_MIN_EXECUTE_LENGTH && !isHomePageVisible) {
                                    me.latestQuery = "";
                                }
                                if (query.length >= GlobalSearchPanel.SEARCH_AHEAD_MIN_EXECUTE_LENGTH && !isHomePageVisible) {
                                    if (query.indexOf('*') == -1 && query.indexOf(':') == -1) {
                                        query = query + "*";
                                        me.latestQuery = query;
                                    }
                                    else {
                                        me.latestQuery = "";
                                    }
                                    if (searchAheadTimerHandler) {
                                        window.clearTimeout(searchAheadTimerHandler);
                                    }
                                    searchAheadTimerHandler = setTimeout(function () {
                                        me.timerComplete();
                                    }, GlobalSearchPanel.SEARCH_AHEAD_TIMEOUT_MS);
                                }
                            };
                            if (HPTRIM.Config.searchAhead) {
                                this.searchFieldSubscription = this.searchField.subscribe(this.searchAheadSubscriptionMethod);
                            }
                            this.searchField.subscribe(function (query) {
                                if (query && query.length > 0) {
                                    _this.saveSearchButtonEnabled(true);
                                }
                                else {
                                    _this.saveSearchButtonEnabled(false);
                                }
                            });
                            this.koHandlerSearchEditorClick = function () {
                                me.showSearchEditor(me.selectedType(), me.searchField(), _this.currentSearchOptionFilterRef);
                            };
                            this.koHandlerSearchFilterClick = function () {
                                me.showSearchFilterPanel(_this.currentFilterPanelRef);
                            };
                            this.koHandlerSearchRecordTypeFilterClick = function () {
                                me.showRecordTypeFilterPanel(_this.currentRecordTypeFilterRef);
                            };
                            this.koHandlerSearchOptionFilterClick = function () {
                                me.showSearchOptionFilterPanel(_this.currentSearchOptionFilterRef);
                            };
                            this.koHandlerSearchSortClick = function () {
                                me.showSearchSortPanel(_this.currentSortPanelRef);
                            };
                            this.getFavouriteFormSearch();
                            ko.postbox.subscribe("SearchFormAddedOrRemovedFromFavourite", function (isInFavourite) {
                                setTimeout(function () {
                                    _this.getFavouriteFormSearch();
                                }, 200);
                            });
                            this.buildSortAndFilter();
                            var rawSearchHistory = trimClient.getCookie(GlobalSearchPanel.SEARCH_HISTORY_COOKIE_NAKE, "");
                            if (rawSearchHistory) {
                                try {
                                    var searchHistoryJSON = Base64.decode(rawSearchHistory);
                                    var searchHistory = JSON.parse(searchHistoryJSON);
                                    this.buildSearchHstoryFromCookie(searchHistory);
                                }
                                catch (e) {
                                    trimClient.setCookie(GlobalSearchPanel.SEARCH_HISTORY_COOKIE_NAKE, "", 1000);
                                }
                            }
                        }
                        GlobalSearchPanel.prototype.updateQueryFieldWithoutSearching = function (queryString, queryStringTitle) {
                            if (this.searchFieldSubscription) {
                                this.searchFieldSubscription.dispose();
                            }
                            if (queryStringTitle != undefined) {
                                this.searchField(queryStringTitle);
                            }
                            else {
                                this.searchField(queryString);
                            }
                            this.updateSearchHistory(queryString, this.selectedType());
                            this.searchFieldSubscription = this.searchField.subscribe(this.searchAheadSubscriptionMethod);
                        };
                        GlobalSearchPanel.prototype.timerComplete = function () {
                            if (this.latestQuery.length > GlobalSearchPanel.SEARCH_AHEAD_MIN_EXECUTE_LENGTH) {
                                this.search(this.latestQuery);
                            }
                        };
                        GlobalSearchPanel.prototype.executeSearch = function () {
                            this.latestQuery = "";
                            this.search();
                        };
                        GlobalSearchPanel.prototype.search = function (suppliedQuery) {
                            $('#global-search-input').blur();
                            $(".as-spa-content-main").css('width', "");
                            $(".as-spa-content-primary").css('width', "");
                            $(".as-spa-content-additional").css('width', "");
                            this.doSearch(suppliedQuery);
                        };
                        GlobalSearchPanel.prototype.doSearch = function (suppliedQuery) {
                            this.latestQuery = "";
                            var filterString = this.currentFilter();
                            var sortString = this.currentSort();
                            var query = this.searchField();
                            var searchOptions = this.currentSearchOptions();
                            if (suppliedQuery) {
                                query = suppliedQuery;
                            }
                            if (!query) {
                                return;
                            }
                            this.updateSearchHistory(query, this.selectedType());
                            var activeObject = this.getCurrentDisplayedObject();
                            if (activeObject && activeObject == this.selectedType()) {
                                this.localSearchHandler(query, "", this.selectedType(), filterString, sortString, searchOptions, true);
                            }
                            else {
                                this.searchHandler(query, "", this.selectedType(), filterString, sortString, searchOptions, true);
                            }
                        };
                        GlobalSearchPanel.prototype.buildSearchHstoryFromCookie = function (searchHistoryFromCookie) {
                            var me = this;
                            var loadedSearchHistoryArray = _.map(searchHistoryFromCookie, function (searchHistoryCookieObject) {
                                var currentType = HP.HPTRIM.Utils.TrimHelper.toBaseObjectType(searchHistoryCookieObject.objectTypeName);
                                var queryObjects = _.map(searchHistoryCookieObject.queryHistory, function (query) {
                                    var queryObject = {
                                        query: query,
                                        actionHandler: function () {
                                            if (me.searchFieldSubscription) {
                                                me.searchFieldSubscription.dispose();
                                            }
                                            me.searchField(query);
                                            me.searchFieldSubscription = me.searchField.subscribe(me.searchAheadSubscriptionMethod);
                                            me.doSearch(query);
                                        },
                                        removeHandler: function () {
                                            var updatedSearchHistory = me.currentSearchHistory().filter(function (value) {
                                                return value.query != query;
                                            });
                                            me.currentSearchHistory(updatedSearchHistory);
                                            me.updateSearchHistoryArrayFromCurrentSearchHistoryObject();
                                            me.saveSearchHistory();
                                        },
                                        friendlyString: ko.observable(query)
                                    };
                                    Panels.SearchEditor.SearchBuilderPanel.processQuery(query, currentType, me.trimClient, function (searchBuilderParts) {
                                        var finalCallback = function (searchBuilderParts) {
                                            var friendlyQuery = "";
                                            _.forEach(searchBuilderParts, function (searchBuilderPart) {
                                                friendlyQuery = friendlyQuery + searchBuilderPart.getFriendlyString().trim() + " ";
                                            });
                                            queryObject.friendlyString(friendlyQuery);
                                        };
                                        Panels.SearchEditor.SearchBuilderPanel.makeFriendlyPartStrings(me.trimClient, searchBuilderParts, finalCallback);
                                    });
                                    return queryObject;
                                });
                                queryObjects = _.filter(queryObjects, function (historyQuery) {
                                    return (historyQuery.query != "");
                                });
                                var searchHistory = {
                                    objectType: currentType,
                                    history: queryObjects
                                };
                                return searchHistory;
                            });
                            this.searchHistoryArray(loadedSearchHistoryArray);
                            var currentObjectHistory = _.find(loadedSearchHistoryArray, function (searchHistory) {
                                return searchHistory.objectType == me.selectedType();
                            });
                            if (currentObjectHistory) {
                                this.currentSearchHistory(currentObjectHistory.history);
                            }
                        };
                        GlobalSearchPanel.prototype.updateSearchHistory = function (query, currentType) {
                            var _this = this;
                            var me = this;
                            if (!currentType) {
                                currentType = this.selectedType();
                            }
                            var historyOfQueries = _.filter(this.currentSearchHistory(), function (oldSearchHistoryObject) {
                                return oldSearchHistoryObject.query != query;
                            }).reverse();
                            var queryObject = {
                                query: query,
                                actionHandler: function () {
                                    if (me.searchFieldSubscription) {
                                        me.searchFieldSubscription.dispose();
                                    }
                                    me.searchField(query);
                                    me.searchFieldSubscription = me.searchField.subscribe(me.searchAheadSubscriptionMethod);
                                    me.doSearch(query);
                                },
                                removeHandler: function () {
                                    var updatedSearchHistory = me.currentSearchHistory().filter(function (value) {
                                        return value.query != query;
                                    });
                                    me.currentSearchHistory(updatedSearchHistory);
                                    me.updateSearchHistoryArrayFromCurrentSearchHistoryObject();
                                    me.saveSearchHistory();
                                },
                                friendlyString: ko.observable(query)
                            };
                            Panels.SearchEditor.SearchBuilderPanel.processQuery(query, currentType, me.trimClient, function (searchBuilderParts) {
                                if (query == "") {
                                    return;
                                }
                                var finalCallback = function (searchBuilderParts) {
                                    var friendlyQuery = "";
                                    _.forEach(searchBuilderParts, function (searchBuilderPart) {
                                        friendlyQuery = friendlyQuery + searchBuilderPart.getFriendlyString().trim() + " ";
                                    });
                                    if (friendlyQuery === "") {
                                        friendlyQuery = query;
                                    }
                                    queryObject.friendlyString(friendlyQuery);
                                };
                                Panels.SearchEditor.SearchBuilderPanel.makeFriendlyPartStrings(me.trimClient, searchBuilderParts, finalCallback);
                            });
                            historyOfQueries.push(queryObject);
                            if (historyOfQueries.length > GlobalSearchPanel.MAX_HISTORY_LENGTH) {
                                var startIndex = historyOfQueries.length - GlobalSearchPanel.MAX_HISTORY_LENGTH;
                                historyOfQueries = historyOfQueries.slice(startIndex);
                            }
                            this.currentSearchHistory(historyOfQueries.reverse());
                            var objectHistoryArray = this.searchHistoryArray();
                            var currentHistory = _.find(this.searchHistoryArray(), function (searchHistoryObject) {
                                return searchHistoryObject.objectType == _this.selectedType();
                            });
                            if (!currentHistory) {
                                currentHistory = {
                                    objectType: this.selectedType(),
                                    history: [],
                                };
                                objectHistoryArray.push(currentHistory);
                            }
                            currentHistory.history = historyOfQueries;
                            this.searchHistoryArray(objectHistoryArray);
                            this.saveSearchHistory();
                        };
                        GlobalSearchPanel.prototype.updateSearchHistoryArrayFromCurrentSearchHistoryObject = function () {
                            var currentSearchHistory = this.currentSearchHistory();
                            var currentType = this.selectedType();
                            var searchHistoryObject = {
                                history: currentSearchHistory,
                                objectType: currentType,
                            };
                            var updatedHistoryArray = _.filter(this.searchHistoryArray(), function (value) {
                                return value.objectType != currentType;
                            });
                            updatedHistoryArray.push(searchHistoryObject);
                            this.searchHistoryArray(updatedHistoryArray);
                        };
                        GlobalSearchPanel.prototype.saveSearchHistory = function () {
                            var searchHistoryCookie = _.map(this.searchHistoryArray(), function (historyObject) {
                                return {
                                    objectTypeName: historyObject.objectType.name,
                                    queryHistory: _.map(historyObject.history, function (history) {
                                        return history.query;
                                    })
                                };
                            });
                            var historyJSON = Base64.encode(JSON.stringify(searchHistoryCookie));
                            this.trimClient.setCookie(GlobalSearchPanel.SEARCH_HISTORY_COOKIE_NAKE, historyJSON, 2920);
                        };
                        GlobalSearchPanel.prototype.setType = function (type) {
                            if (this.selectedType().name != type.name) {
                                if (type.Name.toLocaleLowerCase() !== "searchform") {
                                    this.selectedType(type);
                                }
                                this.getFavouriteFormSearch();
                            }
                        };
                        GlobalSearchPanel.prototype.getFavouriteFormSearch = function () {
                            var me = this;
                            var bobType = this.selectedType().name;
                            var searchString = "favorite", properties = ["DefinitionForm ,name"];
                            var request = new HPTRIM.TrimMainObjectSearch(this.trimClient, HP.HPTRIM.BaseObjectTypes.SearchForm);
                            request.setSearchString(searchString);
                            request.setFilter("type : " + bobType);
                            request.setProperties(properties);
                            var promise = request.page().done(function (response) {
                                me.buildSearchFormButtons(response);
                            }).fail(function (errorResponse) {
                                var errorMsg = HP.HPTRIM.Messages.web_unableToConnectToWebServices;
                                if (errorResponse.ResponseStatus && errorResponse.ResponseStatus.Message) {
                                    errorMsg = errorResponse.ResponseStatus.Message;
                                }
                                if (errorResponse.responseJSON && errorResponse.responseJSON.ResponseStatus && errorResponse.responseJSON.ResponseStatus.Message) {
                                    errorMsg = errorResponse.responseJSON.ResponseStatus.Message;
                                }
                                ko.postbox.publish(App.TRIMApp.NOTIFICATION_ERROR_TOPIC, errorMsg);
                            });
                        };
                        GlobalSearchPanel.prototype.buildSortAndFilter = function () {
                            var me = this;
                            var actions = [];
                            var smallActions = [];
                            var builderActionOption = {
                                id: "searchBuilder",
                                caption: "",
                                tooltip: HP.HPTRIM.Messages.web_searchEditor,
                                enabled: ko.observable(true),
                                visible: ko.observable(true),
                                actionHandler: function () { me.koHandlerSearchEditorClick(); },
                            };
                            actions.push(new HP.HPTRIM.Framework.Components.ActionManager.ActionBase(builderActionOption));
                            var smallBuilderActionOption = {
                                id: "searchBuilder",
                                caption: HP.HPTRIM.Messages.web_searchEditor,
                                tooltip: HP.HPTRIM.Messages.web_searchEditor,
                                enabled: ko.observable(true),
                                visible: ko.observable(true),
                                actionHandler: function () { me.koHandlerSearchEditorClick(); },
                            };
                            smallActions.push(new HP.HPTRIM.Framework.Components.ActionManager.ActionBase(smallBuilderActionOption));
                            var filterActionOption = {
                                id: "filter",
                                caption: HPTRIM.Messages.web_filter,
                                tooltip: HP.HPTRIM.Messages.web_filter,
                                enabled: me.showFilterButton,
                                visible: me.showFilterButton,
                                actionHandler: function () { me.koHandlerSearchFilterClick(); },
                            };
                            actions.push(new HP.HPTRIM.Framework.Components.ActionManager.ActionBase(filterActionOption));
                            smallActions.push(new HP.HPTRIM.Framework.Components.ActionManager.ActionBase(filterActionOption));
                            var filterActionOption = {
                                id: "filter",
                                caption: HP.HPTRIM.Messages.web_filter + " " + HPTRIM.BaseObjectTypes.RecordType.CaptionPlural,
                                tooltip: HP.HPTRIM.Messages.web_filter + " " + HPTRIM.BaseObjectTypes.RecordType.CaptionPlural,
                                enabled: me.showRecordTypeFilterButton,
                                visible: me.showRecordTypeFilterButton,
                                actionHandler: function () { me.koHandlerSearchRecordTypeFilterClick(); },
                            };
                            actions.push(new HP.HPTRIM.Framework.Components.ActionManager.ActionBase(filterActionOption));
                            smallActions.push(new HP.HPTRIM.Framework.Components.ActionManager.ActionBase(filterActionOption));
                            var searchOptionActionOption = {
                                id: "options",
                                caption: HP.HPTRIM.Messages.web_search + ' ' + HP.HPTRIM.Messages.web_options,
                                tooltip: HP.HPTRIM.Messages.web_search + ' ' + HP.HPTRIM.Messages.web_options,
                                enabled: me.showSearchOptionButton,
                                visible: me.showSearchOptionButton,
                                actionHandler: function () { me.koHandlerSearchOptionFilterClick(); },
                            };
                            actions.push(new HP.HPTRIM.Framework.Components.ActionManager.ActionBase(searchOptionActionOption));
                            smallActions.push(new HP.HPTRIM.Framework.Components.ActionManager.ActionBase(searchOptionActionOption));
                            var sortActionOption = {
                                id: "sort",
                                caption: HPTRIM.Messages.web_sort,
                                tooltip: HP.HPTRIM.Messages.web_sort,
                                enabled: ko.observable(true),
                                visible: ko.observable(true),
                                actionHandler: function () { me.koHandlerSearchSortClick(); },
                            };
                            actions.push(new HP.HPTRIM.Framework.Components.ActionManager.ActionBase(sortActionOption));
                            smallActions.push(new HP.HPTRIM.Framework.Components.ActionManager.ActionBase(sortActionOption));
                            var filterSortDropDown = new HP.HPTRIM.Framework.Components.ActionManager.ActionManagerComponent("FormSearch", actions);
                            filterSortDropDown.cssClass("application_search_builder btn save-search-btn");
                            filterSortDropDown.dropDownButtonClass("save-search-btn");
                            filterSortDropDown.extraTitle(HPTRIM.Messages.web_filter + "/" + HPTRIM.Messages.web_sort + " " + HPTRIM.Messages.web_options);
                            me.filterSortDropdown(filterSortDropDown);
                            me.filterSortDropdown().templateName(HP.HPTRIM.Framework.Components.ActionManager.ActionManagerComponent.templates.splitButton);
                            me.smallFilterSortActions(smallActions);
                        };
                        GlobalSearchPanel.prototype.buildSearchFormButtons = function (response) {
                            var me = this;
                            var searchFormDictionary = {};
                            var searchForms = response.Results;
                            var actions = [];
                            var smallActions = [];
                            var actionOption = {
                                id: null,
                                caption: HP.HPTRIM.BaseObjectTypes.SearchForm.Caption,
                                tooltip: HP.HPTRIM.Messages.web_openFormSearch,
                                enabled: ko.observable(true),
                                visible: ko.observable(true),
                                actionHandler: function () { me.showSearchForm(); },
                            };
                            var defaultSearchForm = {
                                id: "DefaultSearchForm",
                                caption: "",
                                tooltip: HP.HPTRIM.Messages.web_openFormSearch,
                                enabled: ko.observable(true),
                                visible: ko.observable(true),
                                actionHandler: function () {
                                    me.showSearchForm();
                                }
                            };
                            var defaultForm = new HP.HPTRIM.Framework.Components.ActionManager.ActionBase(defaultSearchForm);
                            actions.push(defaultForm);
                            var smallDefaultSearchForm = {
                                id: "DefaultSearchForm",
                                caption: HP.HPTRIM.Messages.web_openFormSearch,
                                tooltip: HP.HPTRIM.Messages.web_openFormSearch,
                                enabled: ko.observable(true),
                                visible: ko.observable(true),
                                actionHandler: function () {
                                    me.showSearchForm();
                                }
                            };
                            smallActions.push(new HP.HPTRIM.Framework.Components.ActionManager.ActionBase(smallDefaultSearchForm));
                            var count = 0;
                            _.each(searchForms, function (form) {
                                var newOption = $.extend(actionOption, {
                                    caption: form.SearchFormName.Value,
                                    tooltip: HP.HPTRIM.Messages.web_openFormSearch + " - " + form.SearchFormName.Value,
                                    id: "SearchForm_" + form.Uri,
                                    actionHandler: function () {
                                        var args = [];
                                        for (var _i = 0; _i < arguments.length; _i++) {
                                            args[_i - 0] = arguments[_i];
                                        }
                                        var thisAction = args[0];
                                        me.showSearchForm(thisAction.definitionForm);
                                    }
                                });
                                if (count == 0) {
                                    defaultForm.actionHandler = function () {
                                        var args = [];
                                        for (var _i = 0; _i < arguments.length; _i++) {
                                            args[_i - 0] = arguments[_i];
                                        }
                                        me.showSearchForm(form.DefinitionForm);
                                    };
                                    count++;
                                }
                                searchFormDictionary[form.Uri] = form.DefinitionForm;
                                var action = $.extend(new HP.HPTRIM.Framework.Components.ActionManager.ActionBase(newOption), {
                                    definitionForm: form.DefinitionForm
                                });
                                actions.push(action);
                                smallActions.push(action);
                            });
                            var divider = {
                                id: "divider",
                                caption: "-",
                                enabled: ko.observable(true),
                                visible: ko.observable(true),
                                actionHandler: function () {
                                }
                            };
                            var manageSearchForm = {
                                id: "0",
                                caption: HP.HPTRIM.Messages.vwr_tbar_view + " " + HP.HPTRIM.BaseObjectTypes.SearchForm.CaptionPlural,
                                tooltip: HP.HPTRIM.Messages.vwr_tbar_view + " " + HP.HPTRIM.BaseObjectTypes.SearchForm.CaptionPlural,
                                icon: "addtofavorites_x16",
                                enabled: ko.observable(true),
                                visible: ko.observable(true),
                                actionHandler: function () {
                                    me.manageSearchForm(me.selectedType());
                                }
                            };
                            actions.push(new HP.HPTRIM.Framework.Components.ActionManager.ActionBase(divider));
                            smallActions.push(new HP.HPTRIM.Framework.Components.ActionManager.ActionBase(divider));
                            actions.push(new HP.HPTRIM.Framework.Components.ActionManager.ActionBase(manageSearchForm));
                            smallActions.push(new HP.HPTRIM.Framework.Components.ActionManager.ActionBase(manageSearchForm));
                            var shouldDisplayDropDownCaret = true;
                            var formSearch = new HP.HPTRIM.Framework.Components.ActionManager.ActionManagerComponent("FormSearch", actions);
                            formSearch.cssClass("application_search_form btn save-search-btn");
                            formSearch.dropDownButtonClass("save-search-btn");
                            formSearch.caption(HPTRIM.Messages.web_openFormSearch);
                            formSearch.extraTitle(HPTRIM.Messages.web_formSearchMenu + " " + HPTRIM.Messages.web_options);
                            formSearch.displayDropDownCaret(shouldDisplayDropDownCaret);
                            formSearch.templateName(HP.HPTRIM.Framework.Components.ActionManager.ActionManagerComponent.templates.splitButton);
                            me.formSearchDropdown(formSearch);
                            me.smallFormSearchActions(smallActions);
                            var searchFormLocator = '#' + formSearch.id;
                            setTimeout(function () {
                                $(searchFormLocator).sortable({
                                    containment: 'parent',
                                    cursor: "move",
                                    items: "> li[id!='0']"
                                }).droppable({
                                    drop: function (e, ui) {
                                        var element = ui.draggable;
                                        var id = $(element).attr('id');
                                        var firstSearchFormUriBeforeDrop;
                                        var parts = id.split('_');
                                        if (parts.length > 0) {
                                            firstSearchFormUriBeforeDrop = parts[1];
                                        }
                                        setTimeout(function () {
                                            var currentList = $(searchFormLocator + '> li[id!=0]');
                                            if (currentList.length == 0)
                                                return;
                                            var firstSearchForm = currentList[0];
                                            var firstSearchFormUriAfterDrop = $(firstSearchForm).attr('id').split('_')[1];
                                            var searchFormToMoveUri = 0;
                                            if (firstSearchFormUriAfterDrop !== firstSearchFormUriBeforeDrop) {
                                                searchFormToMoveUri = firstSearchFormUriAfterDrop;
                                            }
                                            else {
                                                searchFormToMoveUri = firstSearchFormUriBeforeDrop;
                                            }
                                            var savePosition = new HP.HPTRIM.TrimObjectSave(me.trimClient, HPTRIM.BaseObjectTypes.SearchForm, searchFormToMoveUri);
                                            savePosition.doRequestEx({
                                                "ChangePositionWithinFavorites": {
                                                    "ChangePositionWithinFavoritespositionChange": HP.HPTRIM.LabelPositionChange.MoveToTop
                                                }
                                            });
                                            defaultForm.actionHandler = function () {
                                                me.showSearchForm(searchFormDictionary[searchFormToMoveUri]);
                                            };
                                        }, 500);
                                    }
                                }).disableSelection();
                            }, 1000);
                        };
                        GlobalSearchPanel.MAX_HISTORY_LENGTH = 8;
                        GlobalSearchPanel.SEARCH_AHEAD_MIN_EXECUTE_LENGTH = 3;
                        GlobalSearchPanel.SEARCH_AHEAD_TIMEOUT_MS = 1000;
                        GlobalSearchPanel.MAX_CLAUSE_COUNT_CATEGORY = 100;
                        GlobalSearchPanel.SEARCH_HISTORY_COOKIE_NAKE = "CM_recentSearches";
                        return GlobalSearchPanel;
                    }(HP.HPTRIM.Framework.Components.Layouts.SinglePage.HeaderPanel));
                    Framework.GlobalSearchPanel = GlobalSearchPanel;
                    var ManageSearchFormMixin = (function () {
                        function ManageSearchFormMixin() {
                        }
                        ManageSearchFormMixin.prototype.manageSearchForm = function (objectType) {
                            var handler = App.ActionHandlers.ShowMainObjectHandler.getSearchViewHandler(ManageSearchFormMixin.s_app);
                            var searchString = "type:" + objectType.name;
                            handler(HPTRIM.BaseObjectTypes.SearchForm, searchString);
                        };
                        return ManageSearchFormMixin;
                    }());
                    Framework.ManageSearchFormMixin = ManageSearchFormMixin;
                })(Framework = Panels.Framework || (Panels.Framework = {}));
            })(Panels = App.Panels || (App.Panels = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Panels;
            (function (Panels) {
                var Framework;
                (function (Framework) {
                    "use strict";
                    var DocumentViewerHeader = (function (_super) {
                        __extends(DocumentViewerHeader, _super);
                        function DocumentViewerHeader(trimClient) {
                            var _this = this;
                            _super.call(this, "DocumentViewerNewHeaderTemplate");
                            this.title = ko.observable("");
                            this.actions = ko.observable(null);
                            this.isUrlVisible = ko.observable(false);
                            this.showRenditionsButton = ko.observable(false);
                            this.showRevisionsButton = ko.observable(false);
                            this.enableRevisionButton = ko.observable(true);
                            this.enableRenditionsButton = ko.observable(true);
                            this.showDownloadButton = ko.observable(true);
                            this.actionResult = ko.observable('');
                            this.toggleURLView = function () {
                                var link = _this.formatLink(_this.downloadLink());
                                HPTRIM.Utils.String.copyToClipboard(link);
                                $("#documentViewerInfo").html(HP.HPTRIM.Messages.web_urlCoppied);
                                $("#documentViewerInfo").show("drop", 500);
                                $("#documentViewerInfo").delay(3000).hide("drop", "down", 500).delay(1500);
                            };
                            this.show_Revisions = function () { };
                            this.show_Renditions = function () { };
                            this.setCachedHtml = function () { };
                            this.trimClient = trimClient;
                            this.isSharePoint = ko.observable(false);
                            this.uri = ko.observable("");
                            this.downloadLink = ko.observable("");
                            this.isExpanded = ko.observable(false);
                            this.showURLLinkButton = ko.observable(true);
                            this.actionResult = ko.observable("");
                            this.actionResultDisplay = ko.observable(false);
                            var showRevisions = new HP.HPTRIM.Framework.Components.ActionManager.ActionBase({
                                id: "showRevisions",
                                caption: HP.HPTRIM.Messages.web_revisions,
                                tooltip: HP.HPTRIM.Messages.web_showThePreviousRevisions,
                                enabled: this.enableRevisionButton,
                                visible: this.showRevisionsButton,
                                active: true,
                                actionHandler: function (action) {
                                    _this.show_Revisions();
                                }
                            });
                            var showRenditions = new HP.HPTRIM.Framework.Components.ActionManager.ActionBase({
                                id: "showRenditions",
                                caption: HP.HPTRIM.Messages.web_renditions,
                                tooltip: HP.HPTRIM.Messages.web_showThePreviousRenditions,
                                enabled: this.enableRenditionsButton,
                                visible: this.showRenditionsButton,
                                active: true,
                                actionHandler: function (action) {
                                    _this.show_Renditions();
                                }
                            });
                            var isIpad = (navigator.userAgent.match(/iPad/i) != null || navigator.userAgent.match(/Macintosh/i));
                            var downloadWindowType = '_self';
                            if (isIpad) {
                                downloadWindowType = '_blank';
                            }
                            var downloadDocument = new HP.HPTRIM.Framework.Components.ActionManager.ActionBase({
                                id: "downloadDocument",
                                caption: "",
                                tooltip: HP.HPTRIM.Messages.web_download,
                                icon: "download_viewer_24",
                                enabled: ko.observable(true),
                                visible: this.showDownloadButton,
                                active: true,
                                actionHandler: function (action) {
                                    var strDownloadLink = _this.downloadLink();
                                    window.open(strDownloadLink, downloadWindowType);
                                }
                            });
                            var showURL = new HP.HPTRIM.Framework.Components.ActionManager.ActionBase({
                                id: "showURL",
                                caption: "",
                                tooltip: HP.HPTRIM.Messages.web_urlLink,
                                icon: "urllink_viewer_24",
                                enabled: ko.observable(true),
                                visible: ko.observable(true),
                                active: true,
                                actionHandler: function (action) {
                                    _this.toggleURLView();
                                }
                            });
                            var toggleVisible = function (event) {
                            };
                            var actions = [downloadDocument, showURL];
                            if (!HPRMWebConfig.disableDownloadDocument == true) {
                                this.actions(new HP.HPTRIM.Framework.Components.ActionManager.ActionManagerComponent("Command", actions));
                                this.actions().templateName('DocumentViewerNewHeaderActionTemplate');
                            }
                            var rightActions = [showRevisions, showRenditions];
                            this.rightActions = new HP.HPTRIM.Framework.Components.ActionManager.ActionManagerComponent("Command", rightActions);
                            this.rightActions.templateName('DocumentViewerNewHeaderActionTemplate');
                        }
                        DocumentViewerHeader.prototype.formatLink = function (link) {
                            var getVirtualDirInPath = false;
                            var basePath = HP.HPTRIM.Utils.TrimHelper.getBaseUrl(getVirtualDirInPath);
                            var returnValue;
                            if (!this.isSharePoint())
                                returnValue = HP.HPTRIM.Framework.Components.Shared.String.format("{0}{1}", [basePath, link]);
                            else
                                returnValue = HP.HPTRIM.Framework.Components.Shared.String.format("{0}", [link]);
                            return returnValue.replace('?', '');
                        };
                        DocumentViewerHeader.prototype.setContext = function (context) {
                            this.uri(context.uri);
                            this.downloadLink(context.downloadLink());
                            var me = this;
                            var deferred = new $.Deferred();
                            var promise = deferred.promise();
                            promise.done(function (result, realPath, promise) {
                                var downloadPath = realPath + "Document?";
                                var realHtml = result.replace(/=\"resource\//g, "=\"" + realPath + "resource/");
                                realHtml = realHtml.replace(/alt=''/g, "");
                                realHtml = realHtml.replace(/alt!=/g, "");
                                realHtml = realHtml.replace(/<img /g, "<img alt='" + HP.HPTRIM.Messages.web_noImage + "'");
                                me.setCachedHtml(realHtml);
                                me.downloadLink(downloadPath);
                            }).fail(function (errorThrown, result, realPath) {
                                var showDefaultPane = false;
                                var jsonResult = jQuery.parseJSON(result);
                                if (jsonResult.ResponseStatus) {
                                    if (jsonResult.ResponseStatus.Message) {
                                        var message = jsonResult.ResponseStatus.Message;
                                        if ((message.indexOf(HP.HPTRIM.Messages.web_convert) != -1)
                                            && (message.indexOf(HP.HPTRIM.Messages.web_accessDenied) == -1)) {
                                            showDefaultPane = true;
                                        }
                                    }
                                }
                                if (showDefaultPane) {
                                    me.downloadLink(realPath + "Document?");
                                }
                                else {
                                    var actionResult = HP.HPTRIM.Messages.web_accessDenied;
                                    actionResult += ",";
                                    if (jsonResult.ResponseStatus) {
                                        if (jsonResult.ResponseStatus.Message) {
                                            var message = jsonResult.ResponseStatus.Message;
                                            if (message.indexOf(HP.HPTRIM.Messages.web_accessDenied) == -1) {
                                                message = HP.HPTRIM.Messages.web_accessDenied;
                                                message += ",";
                                                actionResult += HP.HPTRIM.Messages.web_reason;
                                                actionResult += message;
                                            }
                                        }
                                    }
                                    me.actionResult(actionResult);
                                    me.actionResultDisplay(true);
                                    me.downloadLink("");
                                }
                            });
                            var rendition = new HPTRIM.TrimRecordRenditionRequest(me.trimClient, me.uri());
                            var request = rendition.doRequest(deferred);
                        };
                        return DocumentViewerHeader;
                    }(HP.HPTRIM.Framework.Components.Layouts.Panel));
                    Framework.DocumentViewerHeader = DocumentViewerHeader;
                    var DocumentViewerPanel = (function (_super) {
                        __extends(DocumentViewerPanel, _super);
                        function DocumentViewerPanel(trimClient) {
                            var _this = this;
                            _super.call(this);
                            this.cachedHtmlOfCurrentDocument = "";
                            this.cachedHtmlOfCurrentDocumentRendition = "";
                            this.hasRendition = ko.observable(false);
                            this.trimClient = trimClient;
                            this.headerPanel = new DocumentViewerHeader(trimClient);
                            this.headerPanel.hide = function () {
                                try {
                                    var iframes = document.querySelectorAll('iframe');
                                    for (var i = 0; i < iframes.length; i++) {
                                        if (iframes[i].id != "mapContainerIframe") {
                                            iframes[i].parentNode.removeChild(iframes[i]);
                                        }
                                    }
                                    _this.headerPanel.setCachedHtml = _this.setCacheHtml;
                                    _this.recordViewOverlayPanel.revisionPanel.reset();
                                }
                                catch (e) {
                                }
                                _this.hide();
                                _this.reset();
                                if (_this.headerPanel.isUrlVisible()) {
                                    _this.headerPanel.isUrlVisible(false);
                                }
                            };
                            this.headerPanel.setCachedHtml = function (html) {
                                _this.setCacheHtml(html);
                            };
                        }
                        DocumentViewerPanel.prototype.setCacheHtml = function (html) {
                            this.cachedHtmlOfCurrentDocument = html;
                            this.cachedHtmlOfCurrentDocumentRendition = html;
                        };
                        DocumentViewerPanel.prototype.setTitle = function (title) {
                            this.headerPanel.title(title);
                        };
                        DocumentViewerPanel.prototype.setRecordViewOverlayForRendition = function (recordViewOverlay) {
                            var me = this;
                            this.recordViewOverlayPanel.revisionPanel.handleCurrentDocumentChange = function () {
                                me.cachedHtmlOfCurrentDocumentRendition = me.recordViewOverlayPanel.recordHtml();
                            };
                        };
                        DocumentViewerPanel.prototype.setRecordViewOverlay = function (recordViewOverlay) {
                            this.panels([recordViewOverlay]);
                            this.recordViewOverlayPanel = recordViewOverlay;
                            var me = this;
                            this.recordViewOverlayPanel.revisionPanel.handleCurrentDocumentChange = function () {
                                me.cachedHtmlOfCurrentDocument = me.recordViewOverlayPanel.recordHtml();
                            };
                        };
                        DocumentViewerPanel.prototype.setUpShowRevisions = function (uri, htmlToCache) {
                            var me = this;
                            me.cachedHtmlOfCurrentDocument = htmlToCache;
                            if (me.recordViewOverlayPanel &&
                                me.recordViewOverlayPanel.objectPanel &&
                                me.recordViewOverlayPanel.objectPanel.visible()) {
                                me.recordViewOverlayPanel.objectPanel.visible(false);
                                me.recordViewOverlayPanel.objectPanel.propertyOrFieldListView.toggleVisible();
                            }
                            this.showRevisions = function () {
                                var objectPropertiesPanel = me.recordViewOverlayPanel.objectPanel;
                                objectPropertiesPanel.visible(true);
                                objectPropertiesPanel.cssClass('as-spa-content-additional active');
                                var revisionBtn = $('#showRevisions');
                                var renditionBtn = $('#showRenditions');
                                if (objectPropertiesPanel.cssClass() == 'as-spa-content-additional active') {
                                    if (revisionBtn != undefined) {
                                        revisionBtn.addClass('btnActive');
                                        objectPropertiesPanel.propertyOrFieldListView.revisionActionsVisible(true);
                                    }
                                    if (renditionBtn != undefined) {
                                        renditionBtn.removeClass('btnActive');
                                    }
                                }
                                else {
                                    revisionBtn.removeClass('btnActive');
                                }
                                me.recordViewOverlayPanel.revisionPanel.childObjects([]);
                                me.recordViewOverlayPanel.revisionPanel.refresh(uri);
                                me.recordViewOverlayPanel.revisionPanel.viewCurrentDocument = function () {
                                    var searchStringForHighlight = me.trimClient.contentSearchHighlightString;
                                    if (searchStringForHighlight.length) {
                                        var currentHTML = htmlToCache;
                                        var highlightedContent = HP.HPTRIM.Utils.TrimHelper.getHighlightedContent(currentHTML, searchStringForHighlight);
                                        me.cachedHtmlOfCurrentDocument = highlightedContent;
                                    }
                                    me.recordViewOverlayPanel.recordHtml(me.cachedHtmlOfCurrentDocument);
                                };
                            };
                            this.headerPanel.show_Revisions = this.showRevisions;
                        };
                        DocumentViewerPanel.prototype.setUpShowRenditions = function (uri, htmlToCache) {
                            var me = this;
                            me.cachedHtmlOfCurrentDocumentRendition = htmlToCache;
                            this.showRenditions = function () {
                                var objectPropertiesPanel = me.recordViewOverlayPanel.objectPanel;
                                objectPropertiesPanel.visible(true);
                                objectPropertiesPanel.cssClass('as-spa-content-additional active');
                                var revisionBtn = $('#showRevisions');
                                var renditionBtn = $('#showRenditions');
                                if (objectPropertiesPanel.cssClass() == 'as-spa-content-additional active') {
                                    if (revisionBtn != undefined) {
                                        revisionBtn.removeClass('btnActive');
                                    }
                                    if (renditionBtn != undefined) {
                                        renditionBtn.addClass('btnActive');
                                        objectPropertiesPanel.propertyOrFieldListView.revisionActionsVisible(false);
                                    }
                                }
                                else {
                                    renditionBtn.removeClass('btnActive');
                                }
                                me.recordViewOverlayPanel.revisionPanel.childObjects([]);
                                me.recordViewOverlayPanel.revisionPanel.refreshRendition(uri);
                                me.recordViewOverlayPanel.revisionPanel.viewCurrentDocument = function () {
                                    me.recordViewOverlayPanel.recordHtml(me.cachedHtmlOfCurrentDocumentRendition);
                                };
                                objectPropertiesPanel.propertyOrFieldListView.revisionActionsEnabled(false);
                            };
                            this.headerPanel.show_Renditions = this.showRenditions;
                        };
                        DocumentViewerPanel.prototype.reset = function () {
                            $('.integration').toggleClass('has-backdrop');
                            var revisionBtn = $('#showRevisions');
                            var renditionBtn = $('#showRenditions');
                            revisionBtn.removeClass("btnActive");
                            renditionBtn.removeClass("btnActive");
                            var recViewPanel = this.panels()[0];
                            if (recViewPanel) {
                                recViewPanel.reset();
                            }
                            this.headerPanel.title("");
                            try {
                                recViewPanel.panels()[2].visible(false);
                            }
                            catch (e) { }
                        };
                        return DocumentViewerPanel;
                    }(HP.HPTRIM.Framework.Components.Layouts.ModalPanel));
                    Framework.DocumentViewerPanel = DocumentViewerPanel;
                })(Framework = Panels.Framework || (Panels.Framework = {}));
            })(Panels = App.Panels || (App.Panels = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Panels;
            (function (Panels) {
                var Framework;
                (function (Framework) {
                    "use strict";
                    var DocumentRenditionViewerHeader = (function (_super) {
                        __extends(DocumentRenditionViewerHeader, _super);
                        function DocumentRenditionViewerHeader(trimClient) {
                            var _this = this;
                            _super.call(this, "RenditionDocumentViewerHeaderTemplate");
                            this.title = ko.observable("");
                            this.actions = ko.observable(null);
                            this.isUrlVisible = ko.observable(false);
                            this.showRenditionsButton = ko.observable(false);
                            this.showRevisionsButton = ko.observable(true);
                            this.enableRevisionButton = ko.observable(true);
                            this.enableRenditionsButton = ko.observable(true);
                            this.showDownloadButton = ko.observable(true);
                            this.actionResult = ko.observable('');
                            this.toggleURLView = function () {
                                var link = _this.formatLink(_this.downloadLink());
                                HPTRIM.Utils.String.copyToClipboard(link);
                                $("#renditionDocumentViewerInfo").html(HP.HPTRIM.Messages.web_urlCoppied);
                                $("#renditionDocumentViewerInfo").show("drop", 500);
                                $("#renditionDocumentViewerInfo").delay(3000).hide("drop", "down", 500).delay(1500);
                            };
                            this.show_Renditions = function () { };
                            this.show_Revisions = function () { };
                            this.setCachedHtml = function () { };
                            this.trimClient = trimClient;
                            this.isSharePoint = ko.observable(false);
                            this.uri = ko.observable("");
                            this.downloadLink = ko.observable("");
                            this.isExpanded = ko.observable(false);
                            this.showURLLinkButton = ko.observable(true);
                            this.actionResult = ko.observable("");
                            this.actionResultDisplay = ko.observable(false);
                            var showRenditions = new HP.HPTRIM.Framework.Components.ActionManager.ActionBase({
                                id: "showRenditions",
                                caption: HP.HPTRIM.Messages.web_renditions,
                                tooltip: HP.HPTRIM.Messages.web_showThePreviousRenditions,
                                visible: this.showRenditionsButton,
                                enabled: this.enableRenditionsButton,
                                active: true,
                                actionHandler: function (action) {
                                    _this.show_Renditions();
                                }
                            });
                            var showRevisions = new HP.HPTRIM.Framework.Components.ActionManager.ActionBase({
                                id: "showRevisions",
                                caption: HP.HPTRIM.Messages.web_revisions,
                                tooltip: HP.HPTRIM.Messages.web_showThePreviousRevisions,
                                visible: this.showRevisionsButton,
                                enabled: this.enableRevisionButton,
                                active: true,
                                actionHandler: function (action) {
                                    _this.show_Revisions();
                                }
                            });
                            var isIpad = (navigator.userAgent.match(/iPad/i) != null || navigator.userAgent.match(/Macintosh/i));
                            var downloadWindowType = '_self';
                            if (isIpad) {
                                downloadWindowType = '_blank';
                            }
                            var downloadDocument = new HP.HPTRIM.Framework.Components.ActionManager.ActionBase({
                                id: "downloadDocument",
                                caption: "",
                                tooltip: HP.HPTRIM.Messages.web_download,
                                icon: "download_viewer_24",
                                enabled: ko.observable(true),
                                visible: this.showDownloadButton,
                                active: true,
                                actionHandler: function (action) {
                                    var strDownloadLink = _this.downloadLink();
                                    window.open(strDownloadLink, downloadWindowType);
                                }
                            });
                            var showURL = new HP.HPTRIM.Framework.Components.ActionManager.ActionBase({
                                id: "showURL",
                                caption: "",
                                tooltip: HP.HPTRIM.Messages.web_urlLink,
                                icon: "urllink_viewer_24",
                                enabled: ko.observable(true),
                                visible: ko.observable(true),
                                active: true,
                                actionHandler: function (action) {
                                    _this.toggleURLView();
                                }
                            });
                            var toggleVisible = function (event) {
                                $('.as-spa-content-additional').toggleClass('active');
                            };
                            var actions = [downloadDocument, showURL];
                            if (!HPRMWebConfig.disableDownloadDocument == true) {
                                this.actions(new HP.HPTRIM.Framework.Components.ActionManager.ActionManagerComponent("Command", actions));
                                this.actions().templateName('RenditionDocumentViewerHeaderActionTemplate');
                            }
                            var rightActions = [showRevisions, showRenditions];
                            this.rightActions = new HP.HPTRIM.Framework.Components.ActionManager.ActionManagerComponent("Command", rightActions);
                            this.rightActions.templateName('RenditionDocumentViewerHeaderActionTemplate');
                        }
                        DocumentRenditionViewerHeader.prototype.formatLink = function (link) {
                            var getVirtualDirInPath = false;
                            var basePath = HP.HPTRIM.Utils.TrimHelper.getBaseUrl(getVirtualDirInPath);
                            var returnValue;
                            if (!this.isSharePoint())
                                returnValue = HP.HPTRIM.Framework.Components.Shared.String.format("{0}{1}", [basePath, link]);
                            else
                                returnValue = HP.HPTRIM.Framework.Components.Shared.String.format("{0}", [link]);
                            return returnValue.replace('?', '');
                        };
                        DocumentRenditionViewerHeader.prototype.setContext = function (context) {
                            this.uri(context.uri);
                            this.downloadLink(context.downloadLink());
                        };
                        return DocumentRenditionViewerHeader;
                    }(HP.HPTRIM.Framework.Components.Layouts.Panel));
                    Framework.DocumentRenditionViewerHeader = DocumentRenditionViewerHeader;
                    var DocumentRenditionViewerPanel = (function (_super) {
                        __extends(DocumentRenditionViewerPanel, _super);
                        function DocumentRenditionViewerPanel(trimClient) {
                            var _this = this;
                            _super.call(this);
                            this.cachedHtmlOfCurrentDocument = "";
                            this.headerPanel = new DocumentRenditionViewerHeader(trimClient);
                            this.headerPanel.hide = function () {
                                try {
                                    var iframes = document.querySelectorAll('iframe');
                                    for (var i = 0; i < iframes.length; i++) {
                                        if (iframes[i].id != "mapContainerIframe") {
                                            iframes[i].parentNode.removeChild(iframes[i]);
                                        }
                                    }
                                    _this.headerPanel.setCachedHtml = _this.setCacheHtml;
                                    _this.recordViewRenditionOverlayPanel.renditionPanel.reset();
                                }
                                catch (e) {
                                }
                                _this.hide();
                                _this.reset();
                                if (_this.headerPanel.isUrlVisible()) {
                                    _this.headerPanel.isUrlVisible(false);
                                }
                            };
                            this.headerPanel.setCachedHtml = function (html) {
                                _this.setCacheHtml(html);
                            };
                        }
                        DocumentRenditionViewerPanel.prototype.setCacheHtml = function (html) {
                            this.cachedHtmlOfCurrentDocument = html;
                        };
                        DocumentRenditionViewerPanel.prototype.setTitle = function (title) {
                            this.headerPanel.title(title);
                        };
                        DocumentRenditionViewerPanel.prototype.setRecordViewOverlayForRendition = function (recordRenditionViewOverlay) {
                            this.panels([recordRenditionViewOverlay]);
                            this.recordViewRenditionOverlayPanel = recordRenditionViewOverlay;
                            var me = this;
                            this.recordViewRenditionOverlayPanel.renditionPanel.handleCurrentDocumentChange = function () {
                                me.cachedHtmlOfCurrentDocument = me.recordViewRenditionOverlayPanel.recordHtml();
                            };
                        };
                        DocumentRenditionViewerPanel.prototype.setUpShowRenditions = function (uri, htmlToCache) {
                            var me = this;
                            var renditionBtn = $('#cm-rendition-Viewer-container .nav_buttons')[1];
                            $(renditionBtn).css("border-bottom", "3px solid #ffffff");
                            var revisionBtn = $('#cm-Viewer-container .nav_buttons')[0];
                            $(revisionBtn).css("border-bottom", "none");
                            me.cachedHtmlOfCurrentDocument = htmlToCache;
                            if (me.recordViewRenditionOverlayPanel &&
                                me.recordViewRenditionOverlayPanel.objectPanel &&
                                me.recordViewRenditionOverlayPanel.objectPanel.visible()) {
                                me.recordViewRenditionOverlayPanel.objectPanel.visible(false);
                                me.recordViewRenditionOverlayPanel.objectPanel.propertiesRenditionListView.toggleVisible();
                            }
                            this.showRenditions = function () {
                                var objectPropertiesPanel = me.recordViewRenditionOverlayPanel.objectPanel;
                                objectPropertiesPanel.visible(true);
                                objectPropertiesPanel.propertiesRenditionListView.toggleVisible();
                                me.recordViewRenditionOverlayPanel.renditionPanel.refresh(uri);
                                me.recordViewRenditionOverlayPanel.renditionPanel.viewCurrentDocument = function () {
                                    me.recordViewRenditionOverlayPanel.recordHtml(me.cachedHtmlOfCurrentDocument);
                                };
                            };
                            this.headerPanel.show_Renditions = this.showRenditions;
                        };
                        DocumentRenditionViewerPanel.prototype.setUpShowRevisions = function (recordInfoData, recordsDetailComponent) {
                            var me = this;
                            var uriFromTmpl;
                            var extFromTmpl;
                            var recNo;
                            var recTitle;
                            var showRevisionButton;
                            var revisionCount = 0;
                            var showRenditionButton = false;
                            var recordIsCheckedOut;
                            me.wireUpDocumentRenditionViewerPanel(recordsDetailComponent);
                            if (recordInfoData) {
                                if (recordInfoData.TrimType == 'Record') {
                                    if (recordInfoData.ChildRenditions != null && recordInfoData.ChildRenditions.length > 0)
                                        showRenditionButton = true;
                                    uriFromTmpl = recordInfoData.Uri;
                                    extFromTmpl = recordInfoData.RecordExtension;
                                    recNo = recordInfoData.RecordNumber;
                                    recTitle = recordInfoData.RecordTitle;
                                    if (recordInfoData.RecordRevisionCount.Value) {
                                        revisionCount = recordInfoData.RecordRevisionCount.Value;
                                    }
                                    else {
                                        revisionCount = recordInfoData.RecordRevisionCount;
                                    }
                                    recordIsCheckedOut = recordInfoData.RecordIsCheckedOut.Value;
                                }
                                me.showRevisions = function () {
                                    me.handleViewClick(uriFromTmpl, extFromTmpl, recNo, recTitle, revisionCount, recordIsCheckedOut, recordInfoData.RecordSpURL, recordInfoData);
                                };
                                me.headerPanel.show_Revisions = this.showRevisions;
                            }
                        };
                        DocumentRenditionViewerPanel.prototype.reset = function () {
                            $('.integration').toggleClass('has-backdrop');
                            var recViewPanel = this.panels()[0];
                            if (recViewPanel) {
                                recViewPanel.reset();
                            }
                            this.headerPanel.title("");
                            try {
                                recViewPanel.panels()[2].visible(false);
                            }
                            catch (e) { }
                        };
                        return DocumentRenditionViewerPanel;
                    }(HP.HPTRIM.Framework.Components.Layouts.ModalPanel));
                    Framework.DocumentRenditionViewerPanel = DocumentRenditionViewerPanel;
                })(Framework = Panels.Framework || (Panels.Framework = {}));
            })(Panels = App.Panels || (App.Panels = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Panels;
            (function (Panels) {
                var Framework;
                (function (Framework) {
                    var Dashboard;
                    (function (Dashboard) {
                        "use strict";
                        var DashboardPanel = (function (_super) {
                            __extends(DashboardPanel, _super);
                            function DashboardPanel(trimClient, supportedTypes) {
                                var mainPanel = new Dashboard.DashMainPanel(trimClient, supportedTypes);
                                _super.call(this, mainPanel);
                                this.mainPanel = mainPanel;
                            }
                            DashboardPanel.prototype.getClassName = function () {
                                return DashboardPanel.CLASS_NAME;
                            };
                            DashboardPanel.prototype.getTypeForPanel = function () {
                                return HPTRIM.BaseObjectTypes.Record;
                            };
                            DashboardPanel.CLASS_NAME = "DashboardPanel";
                            return DashboardPanel;
                        }(HP.HPTRIM.Framework.Components.Layouts.SinglePage.DashboardPanel));
                        Dashboard.DashboardPanel = DashboardPanel;
                    })(Dashboard = Framework.Dashboard || (Framework.Dashboard = {}));
                })(Framework = Panels.Framework || (Panels.Framework = {}));
            })(Panels = App.Panels || (App.Panels = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Panels;
            (function (Panels) {
                var Framework;
                (function (Framework) {
                    var Dashboard;
                    (function (Dashboard) {
                        "use strict";
                        var DashMainPanel = (function (_super) {
                            __extends(DashMainPanel, _super);
                            function DashMainPanel(trimClient, supportedTypes) {
                                _super.call(this);
                                this.showError = function (message) { };
                                this.showParamaterisedSearch = function (search, callback, type) { };
                                this.search = function (query, uri, type, filter, sort, searchOptions) { };
                                this.showItemCallback = function (baseObjectType, searchString, viewid, uri, filter, sort, searchOptions) { };
                                this.templateName("templates/Framework/Dashboard/MainPanel/DashboardPanel");
                                this.trimClient = trimClient;
                                this.supportedTypes = supportedTypes;
                                this.configurePanels();
                            }
                            DashMainPanel.prototype.configurePanels = function () {
                                var _this = this;
                                var startupOptionsObservable = this.trimClient.getUserOptions().startupOptions;
                                if (this.m_subscription) {
                                    this.m_subscription.dispose();
                                }
                                this.m_subscription = startupOptionsObservable.subscribe(function (newValue) {
                                    _this.configurePanels();
                                });
                                var startupOptions = startupOptionsObservable();
                                var panel1 = this.processStartupItem(startupOptions.StartupUserOptionsWebClientPane1), panel2 = this.processStartupItem(startupOptions.StartupUserOptionsWebClientPane2), panel3 = this.processStartupItem(startupOptions.StartupUserOptionsWebClientPane3);
                                var panels = _.compact([panel1, panel2, panel3]);
                                var itemListPanels = [];
                                var panelCount = panels.length;
                                var MAX_PANELS = 3, count = 0;
                                var cssMap = ['', '', 'as-spa-dash-main-two-columns', 'as-spa-dash-main-secondary'];
                                _.each(panels, function (item) {
                                    if (!item) {
                                        return;
                                    }
                                    if (count >= MAX_PANELS) {
                                        return;
                                    }
                                    var panel = _this.makeItemListPanel(item);
                                    if (panel) {
                                        var css = cssMap[panelCount] || '';
                                        panel.cssClass(css);
                                        itemListPanels.push(panel);
                                    }
                                    count++;
                                });
                                this.panels(itemListPanels);
                            };
                            DashMainPanel.prototype.makeItemListPanel = function (startupItem) {
                                var stringStartupType = startupItem.Value;
                                var userOptionDefs = this.trimClient.getUserOptions().startupOptionDefs();
                                var userOptionDef = _.find(userOptionDefs, function (item) {
                                    var idWithUserOptionPrefix = "StartupUserOptions" + stringStartupType;
                                    return item.Id == idWithUserOptionPrefix;
                                });
                                try {
                                    userOptionDef['Caption'] = startupItem['StringValue'];
                                }
                                catch (x) { }
                                ;
                                var recBobType = HP.HPTRIM.BaseObjectTypes.Record;
                                var searchStringFor = {
                                    "RecentDocuments": { value: "myDocuments", bobType: recBobType, sortBy: "updated-" },
                                    "DocumentsCheckedOut": { value: "checkedOutBy:" + HPTRIM.Messages.bob_sbMe, bobType: recBobType },
                                    "FavoriteRecords": { value: "favorite", bobType: recBobType },
                                    "FavoriteSearches": { value: "favorite", bobType: HP.HPTRIM.BaseObjectTypes.SavedSearch },
                                    "InDueTray": { value: "dueOrInTray", bobType: recBobType },
                                    "DueTray": { value: "duetray", bobType: recBobType },
                                    "InTray": { value: "inTray", bobType: recBobType },
                                    "WorkTray": { value: "WorkTray", bobType: recBobType },
                                    "RecentContainers": { value: "myContainers", bobType: recBobType }
                                };
                                var searchString = "myDocuments";
                                var bobType = recBobType;
                                var sortBy = "";
                                if (searchStringFor[stringStartupType]) {
                                    searchString = searchStringFor[stringStartupType].value;
                                    bobType = searchStringFor[stringStartupType].bobType;
                                    sortBy = searchStringFor[stringStartupType].sortBy;
                                }
                                else {
                                }
                                var isDisableViewAllButton = searchStringFor[stringStartupType].disableViewAllButton;
                                var panel = this.makeTrimSearchResultPanel(searchString, userOptionDef, isDisableViewAllButton, bobType, sortBy);
                                return panel;
                            };
                            DashMainPanel.prototype.processStartupItem = function (viewPane) {
                                if (!viewPane) {
                                    return viewPane;
                                }
                                if (viewPane.Value == "Empty") {
                                    return undefined;
                                }
                                return viewPane;
                            };
                            DashMainPanel.prototype.afterRender = function () {
                                $(".draggable").sortable({
                                    handle: ".drag-handle",
                                    connectWith: ".draggable",
                                    tolerance: "pointer",
                                    forcePlaceholderSize: true,
                                    opacity: 0.8,
                                });
                            };
                            DashMainPanel.prototype.makeTrimSearchResultPanel = function (searchString, userOptionDef, isDisableViewAllButton, baseObjectType, sortBy) {
                                var _this = this;
                                var me = this;
                                var viewIdMap = {
                                    "StartupUserOptionsDocumentsCheckedOut": HP.HPTRIM.App.Panels.RecordsPanel.CHECKED_OUT_VIEW_ID,
                                    "StartupUserOptionsRecentDocuments": HP.HPTRIM.App.Panels.RecordsPanel.RECENTS_VIEW_ID,
                                    "StartupUserOptionsFavoriteRecords": HP.HPTRIM.App.Panels.RecordsPanel.FAVORITE_VIEW_ID,
                                };
                                var viewId = viewIdMap[userOptionDef.Id];
                                var bobType = baseObjectType;
                                if (!bobType) {
                                    bobType = HPTRIM.BaseObjectTypes.Record;
                                }
                                var caption = userOptionDef.Caption || userOptionDef.CaptionShort;
                                if (!caption) {
                                    caption = "";
                                }
                                var panel = new Dashboard.DashboardTrimSearchResultPanel(this.trimClient, searchString, bobType, caption, isDisableViewAllButton, sortBy);
                                panel.setViewId(viewId);
                                panel.showItemCallback = function (baseObjectType, searchString, viewid, item) {
                                    if (baseObjectType == HPTRIM.BaseObjectTypes.SavedSearch) {
                                        var type = _.find(_this.supportedTypes, function (currentType) {
                                            return (currentType.name == item.Fields.SavedSearchObjectType);
                                        });
                                        if (!type) {
                                            me.showError(HPTRIM.Messages.web_unsupportedType);
                                            return;
                                        }
                                        if (item.Fields.SavedSearchIsOldFormat === true || item.Fields.SavedSearchIsOldFormat.Value === true) {
                                            me.showError(HPTRIM.Messages.web_oldFormatSavedSearchNotSupported);
                                            return;
                                        }
                                        var searchDefinition = item.Fields.SearchDefinition;
                                        var sort = item.Fields.SavedSearchSortString;
                                        if (item.Fields.SavedSearchSortString && item.Fields.SavedSearchSortString.Value !== undefined) {
                                            sort = item.Fields.SavedSearchSortString.Value;
                                        }
                                        var filter = item.Fields.SavedSearchFilterString;
                                        if (item.Fields.SavedSearchFilterString && item.Fields.SavedSearchFilterString.Value !== undefined) {
                                            filter = item.Fields.SavedSearchFilterString.Value;
                                        }
                                        var objectType = HPTRIM.Utils.TrimHelper.toBaseObjectType(item.Fields.SavedSearchObjectType);
                                        var options = "";
                                        var searchOptions = _this.trimClient.searchOptionDefinitions;
                                        _.forEach(searchOptions[objectType.name], function (searchOption) {
                                            var id = searchOption.Id;
                                            if (id) {
                                                var savedSearchOptionId = id.replace('SearchUserOptions', 'SavedSearch');
                                                if (item.Fields[savedSearchOptionId] == true || (item.Fields[savedSearchOptionId] && item.Fields[savedSearchOptionId].Value)) {
                                                    if (options) {
                                                        options = options + ',';
                                                    }
                                                    options = options + id;
                                                }
                                            }
                                        });
                                        if (HP.HPTRIM.Form.Search.ParameterisedSearchForm.hasParameterisedSearch(searchDefinition.SearchStack)) {
                                            _this.showParamaterisedSearch(item.Fields.SearchDefinition, _this.search, type, filter, sort, options);
                                            return;
                                        }
                                        var queryString = item.Fields.SavedSearchQueryString;
                                        me.showItemCallback(objectType, queryString, 0, "", filter, sort, options);
                                    }
                                    else {
                                        me.showItemCallback(baseObjectType, searchString, viewid, item.Fields.Uri);
                                    }
                                };
                                panel.showAllCallback = function (baseObjectType, searchString, viewid) {
                                    me.showItemCallback(baseObjectType, searchString, viewid, "");
                                };
                                panel.updateList();
                                return panel;
                            };
                            DashMainPanel.prototype.refreshPanels = function () {
                                var panels = this.panels();
                                _.each(panels, function (panel) {
                                    if (panel.updateList) {
                                        panel.updateList();
                                    }
                                });
                            };
                            return DashMainPanel;
                        }(HP.HPTRIM.Framework.Components.Layouts.SinglePage.DashboardMainPanel));
                        Dashboard.DashMainPanel = DashMainPanel;
                    })(Dashboard = Framework.Dashboard || (Framework.Dashboard = {}));
                })(Framework = Panels.Framework || (Panels.Framework = {}));
            })(Panels = App.Panels || (App.Panels = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Panels;
            (function (Panels) {
                var Framework;
                (function (Framework) {
                    var Dashboard;
                    (function (Dashboard) {
                        "use strict";
                        var DashboardTrimSearchResultPanel = (function (_super) {
                            __extends(DashboardTrimSearchResultPanel, _super);
                            function DashboardTrimSearchResultPanel(trimClient, searchString, baseObjectType, caption, disableViewAllButton, sortBy) {
                                _super.call(this);
                                this.showItemCallback = function (baseObjectType, searchString, viewid, item) { };
                                this.showAllCallback = function (baseObjectType, searchString, viewid) { };
                                this.templateString = 'templates/Framework/Dashboard/MainPanel/SearchResult';
                                this.footerCaptionTpl = function () { };
                                this.viewId = 0;
                                this.viewAllButtonClass = "ViewAllBtn text-center center-block";
                                this.disableViewAllButton = ko.observable(false);
                                this.trimClient = trimClient;
                                this.viewAllButtonVisible = ko.observable(true);
                                this.baseObjectType = baseObjectType;
                                this.searchString = searchString;
                                this.footerCaptionTpl = _.template(HP.HPTRIM.Messages.web_viewAll + " (<%= count %>) " + caption);
                                this.footerCaption = " ";
                                this.headerCaption = caption;
                                var searchOption = "";
                                var userOption = this.trimClient.getUserOptions();
                                if (HPRM_userSearchOptions.SearchUserOptionsAssigneeSearchIncludesPosition.Value && _.contains(['dueTray', 'inTray', 'duetray', 'intray'], searchString)) {
                                    searchOption = 'SearchUserOptionsAssigneeSearchIncludesPosition';
                                }
                                var query = { searchString: searchString, baseObjectType: baseObjectType, sortBy: sortBy, searchOptions: searchOption };
                                this.trimItemListPanel = new HP.HPTRIM.App.Panels.ItemList.TrimItemListPanel(trimClient, this, query);
                                var itemListComponent = this.trimItemListPanel.getItemList();
                                $.extend(itemListComponent, this);
                                this.trimItemListPanel.getItemList().templateName(this.templateString);
                                if (disableViewAllButton) {
                                    this.disableViewAllButton(true);
                                }
                                else {
                                    this.disableViewAllButton(false);
                                }
                                this.panels([this.trimItemListPanel]);
                                var me = this;
                                this.trimItemListPanel.itemList.items.subscribe(function (items) {
                                    var isViewAllButtonVisible = items.length != 0;
                                    me.viewAllButtonVisible(isViewAllButtonVisible);
                                });
                            }
                            DashboardTrimSearchResultPanel.prototype.updateList = function () {
                                var _this = this;
                                var updateFooterCaptionWithTotalResultCallback = function (response) {
                                    if (response.TotalResults) {
                                        _this.footerCaption = _this.footerCaptionTpl({ count: response.TotalResults });
                                    }
                                };
                                this.trimItemListPanel.itemList.items([]);
                                this.trimItemListPanel.getItemList().load(updateFooterCaptionWithTotalResultCallback);
                            };
                            DashboardTrimSearchResultPanel.prototype.showItem = function (item) {
                                this.showItemCallback(this.baseObjectType, this.searchString, this.viewId, item);
                            };
                            DashboardTrimSearchResultPanel.prototype.viewAll = function () {
                                this.showAllCallback(this.baseObjectType, this.searchString, this.viewId);
                            };
                            DashboardTrimSearchResultPanel.prototype.setViewId = function (viewId) {
                                this.viewId = viewId;
                            };
                            return DashboardTrimSearchResultPanel;
                        }(HP.HPTRIM.Framework.Components.Layouts.ContainerPanel));
                        Dashboard.DashboardTrimSearchResultPanel = DashboardTrimSearchResultPanel;
                    })(Dashboard = Framework.Dashboard || (Framework.Dashboard = {}));
                })(Framework = Panels.Framework || (Panels.Framework = {}));
            })(Panels = App.Panels || (App.Panels = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Panels;
            (function (Panels) {
                var RecordDataEntryForm;
                (function (RecordDataEntryForm) {
                    "use strict";
                    var CreateOrModifyRecordOverlayPanel = (function (_super) {
                        __extends(CreateOrModifyRecordOverlayPanel, _super);
                        function CreateOrModifyRecordOverlayPanel(trimClient, fileUploadProvider, purpose) {
                            var _this = this;
                            _super.call(this);
                            this.trimClient = trimClient;
                            this.dataEntryPanel = new HP.HPTRIM.App.Panels.RecordDataEntryForm.RecordDataEntryPanel(trimClient, fileUploadProvider);
                            this.mainPanel.cssClass("as-spa-content-main");
                            var me = this;
                            this.dataEntryPanel.doneHandler = function (uri, recordTitle, recordNumber) {
                                me.completeAction(uri, recordTitle, recordNumber);
                            };
                            this.mainPanel.panels([this.dataEntryPanel]);
                            this.commandPanel = new CreateRecordCommandPanel(this.trimClient, fileUploadProvider, this.dataEntryPanel, purpose);
                            this.primaryPanel.panels([this.commandPanel]);
                            this.commandPanel.formLoadedCallback = function () {
                            };
                            this.returnAction = function () {
                            };
                            this.updateAction = function (message, result) {
                            };
                            this.completeAction = function (uri, title, recNumber) {
                            };
                            this.commandPanel.displayDataEntryForm = function (visible) {
                                _this.mainPanel.visible(visible);
                            };
                            this.visible.subscribe(function (newValue) {
                                if (newValue === true) {
                                    if (_this.dataEntryPanel.form()) {
                                        var localDateFieldArray = _this.dataEntryPanel.form().dateFieldArray;
                                        _.each(localDateFieldArray, function (pageItem) {
                                            if (pageItem.Format && (pageItem.Format == "Date" || pageItem.Format == "Datetime")) {
                                                pageItem.reinitaliseDatePicker();
                                            }
                                        });
                                    }
                                }
                            });
                        }
                        CreateOrModifyRecordOverlayPanel.prototype.getClassName = function () {
                            return CreateOrModifyRecordOverlayPanel.CLASS_NAME;
                        };
                        CreateOrModifyRecordOverlayPanel.prototype.update = function (uri, updateCallback) {
                            this.commandPanel.rtyField = null;
                            this.commandPanel.showingRecordTypeField(false);
                            this.commandPanel.createOrEdit(HP.HPTRIM.Messages.web_update + " " + HP.HPTRIM.Messages.web_record);
                            this.dataEntryPanel.update(uri);
                            if (updateCallback) {
                                this.dataEntryPanel.updateHandler = updateCallback;
                            }
                            this.commandPanel.showLink(true);
                            this.commandPanel.showUrl(false);
                        };
                        CreateOrModifyRecordOverlayPanel.prototype.resetPanels = function () {
                            this.dataEntryPanel.form(null);
                            this.dataEntryPanel.updateMode = false;
                            this.dataEntryPanel.allowSave = true;
                            this.commandPanel.createOrEdit(HP.HPTRIM.Messages.web_create + " " + HP.HPTRIM.Messages.web_record);
                            this.commandPanel.showLink(false);
                            this.commandPanel.showUrl = ko.observable(false);
                            this.commandPanel.url("");
                            this.dataEntryPanel.alertDetails("");
                            this.dataEntryPanel.displaySuccess(false);
                        };
                        CreateOrModifyRecordOverlayPanel.prototype.configureCommandPanel = function (prePopulatedFields, purpose, defaultClassification, additionalPurpose) {
                            this.commandPanel.configureFields(prePopulatedFields, purpose, defaultClassification, additionalPurpose);
                        };
                        CreateOrModifyRecordOverlayPanel.prototype.setContext = function (context) {
                            this.resetPanels();
                            if (context.uri) {
                                this.commandPanel.showingRecordTypeField(false);
                                this.commandPanel.rtyField = null;
                                this.commandPanel.createOrEdit(HP.HPTRIM.Messages.web_update + " " + HP.HPTRIM.Messages.web_record);
                                this.dataEntryPanel.update(context.uri);
                            }
                            this.commandPanel.showLink(true);
                            this.commandPanel.showUrl = ko.observable(false);
                            this.commandPanel.url(window.location.href);
                        };
                        CreateOrModifyRecordOverlayPanel.CLASS_NAME = "CreateOrModifyRecordOverlayPanel";
                        return CreateOrModifyRecordOverlayPanel;
                    }(HP.HPTRIM.Framework.Components.Layouts.SinglePage.ContentPanel));
                    RecordDataEntryForm.CreateOrModifyRecordOverlayPanel = CreateOrModifyRecordOverlayPanel;
                    "use strict";
                    var CreateRecordCommandPanel = (function (_super) {
                        __extends(CreateRecordCommandPanel, _super);
                        function CreateRecordCommandPanel(trimClient, fileUploadProvider, dataEntryPanel, purpose) {
                            _super.call(this, 'templates/Record/CreateRecordCommandPanel', true);
                            this.showingRecordTypeField = ko.observable(true);
                            this.recordTypeFilter = ko.observable("");
                            this.createOrEdit = ko.observable("");
                            this.displayError = function (message) { };
                            this.showLink = ko.observable(false);
                            this.showUrl = ko.observable(false);
                            this.url = ko.observable("");
                            this.formLoadedCallback = function () { };
                            this.homeLocation = undefined;
                            this.trimClient = trimClient;
                            this.fileUploadProvider = fileUploadProvider;
                            this.configureFields();
                            this.dataEntryPanel = dataEntryPanel;
                            this.downloadLocation = ko.observable("");
                            var me = this;
                            this.createOrEdit(HP.HPTRIM.Messages.web_create + " " + HP.HPTRIM.Messages.web_record);
                            this.recordTypeFilter.subscribe(function (newValue) {
                                if (me.rtyField) {
                                    me.rtyField.filterClause(newValue);
                                    me.rtyField.doSearch();
                                }
                            });
                            this.defaultClassification = undefined;
                        }
                        CreateRecordCommandPanel.prototype.configureFields = function (prePopulatedFields, fileDropped, defaultClassification, purpose) {
                            this.showingRecordTypeField(false);
                            var resultExpansionOverlay = false;
                            var defaultRecType = null;
                            var defaultContainer = null;
                            this.defaultClassification = defaultClassification;
                            if (fileDropped) {
                                defaultRecType = this.trimClient.getFileDropDefaultRecordType();
                                defaultContainer = this.trimClient.getFileDropDefaultContainer();
                            }
                            if (defaultRecType != null) {
                                this.rtyField = new HP.HPTRIM.Field.RecordTypePicker(this.trimClient, HP.HPTRIM.Messages.rec_select + " " + HP.HPTRIM.Messages.web_recordType, false, resultExpansionOverlay);
                                this.rtyField.enableClickToExpand = true;
                                this.rtyField.setRawValue(defaultRecType.displayValue);
                                this.rtyField.enable(false);
                                if (purpose > 0)
                                    this.rtyField.setPurpose(purpose);
                                else
                                    this.rtyField.purpose = 4;
                                if (defaultContainer == null) {
                                    this.setupRecordTypePickerEventHandler(prePopulatedFields);
                                }
                                else {
                                    this.setupRecordTypePickerEventHandler(prePopulatedFields, defaultContainer);
                                }
                                this.showingRecordTypeField(true);
                                this.rtyField.hasFocus(false);
                                this.recordTypeSelectedCallback(null, defaultRecType);
                            }
                            else {
                                this.rtyField = new HP.HPTRIM.Field.RecordTypePicker(this.trimClient, HP.HPTRIM.Messages.rec_select + " " + HP.HPTRIM.Messages.web_recordType, false, resultExpansionOverlay);
                                this.rtyField.enableClickToExpand = true;
                                if (fileDropped) {
                                    this.rtyField.filterClause('haselecdocsupport');
                                }
                                else {
                                    this.rtyField.filterClause(this.recordTypeFilter());
                                }
                                if (purpose > 0)
                                    this.rtyField.setPurpose(purpose);
                                else
                                    this.rtyField.purpose = 2;
                                this.rtyField.setRawValue('all');
                                this.rtyField.doSearch();
                                if (defaultContainer == null) {
                                    this.setupRecordTypePickerEventHandler(prePopulatedFields);
                                }
                                else {
                                    this.setupRecordTypePickerEventHandler(prePopulatedFields, defaultContainer);
                                }
                                this.showingRecordTypeField(true);
                                this.rtyField.hasFocus(true);
                            }
                        };
                        CreateRecordCommandPanel.prototype.setContainer = function (container) {
                            this.container = container;
                            if (container) {
                                this.homeLocation = HP.HPTRIM.Messages.web_incontainerColon + " <" + container.displayValue + ">";
                            }
                            else {
                                this.homeLocation = undefined;
                            }
                            var form = this.dataEntryPanel.form();
                            if (form) {
                                if (form.containerField) {
                                    form.containerField.setValue(container);
                                }
                                if (form.homeField) {
                                    form.homeField.setValue(undefined);
                                    form.homeField.setRawValue(this.homeLocation);
                                    form.homeField.enable(false);
                                }
                            }
                        };
                        CreateRecordCommandPanel.prototype.setupRecordTypePickerEventHandler = function (prePopulatedFields, defaultContainer) {
                            var me = this;
                            var processResultForm = function (rawResult, recordType) {
                                if (rawResult.Results.length > 0) {
                                    var resultData = rawResult.Results[0];
                                    var rawFormDefinition = resultData.DataEntryFormDefinition;
                                    if (rawFormDefinition == undefined) {
                                        rawFormDefinition = resultData.RecordDataEntryForm;
                                    }
                                    var form = new HP.HPTRIM.Form.RecordDataEntryForm(me.trimClient, me.fileUploadProvider, rawFormDefinition, recordType, null, me.defaultClassification);
                                    if (recordType) {
                                        var titlingMethod = HPTRIM.TitlingMethods.FreeText;
                                        if (recordType.jsonObject) {
                                            titlingMethod = recordType.jsonObject.RecordTypeTitlingMethod;
                                        }
                                        form.titlingMethod = titlingMethod;
                                    }
                                    if (prePopulatedFields != undefined) {
                                        if (form.containerField != undefined) {
                                            if (prePopulatedFields['RecordContainer'] != undefined) {
                                                form.containerField.setValue(prePopulatedFields['RecordContainer']);
                                                if (form.homeField != undefined) {
                                                    var value = new HPTRIM.TrimBaseObject(HPTRIM.BaseObjectTypes.Record, "0", HP.HPTRIM.Messages.web_incontainerColon);
                                                    form.homeField.setValue(value);
                                                    form.homeField.enable(false);
                                                }
                                            }
                                        }
                                        else {
                                            if (prePopulatedFields['RecordContainer'] != undefined) {
                                                form.preSetKeyValues["RecordContainer"] = prePopulatedFields['RecordContainer'];
                                                form.preSetKeyValues["RecordContainer"].Name = "RecordContainer";
                                                if (form.homeField != undefined) {
                                                    form.homeField.setRawValue("");
                                                    form.homeField.enable(false);
                                                }
                                            }
                                        }
                                        if (form.homeField != undefined) {
                                            if (prePopulatedFields['RecordHomeLocation'] != undefined) {
                                                form.homeField.setValue(prePopulatedFields['RecordHomeLocation']);
                                            }
                                        }
                                        else {
                                            if (prePopulatedFields['RecordHomeLocation'] != undefined) {
                                                form.preSetKeyValues["RecordHomeLocation"] = prePopulatedFields['RecordHomeLocation'];
                                                form.preSetKeyValues["RecordHomeLocation"].Name = "RecordHomeLocation";
                                            }
                                        }
                                        if (form.assigneeField != undefined) {
                                            if (prePopulatedFields['RecordAssignee'] != undefined) {
                                                form.assigneeField.setValue(prePopulatedFields['RecordAssignee']);
                                            }
                                        }
                                        else {
                                            if (prePopulatedFields['RecordAssignee'] != undefined) {
                                                form.preSetKeyValues["RecordAssignee"] = prePopulatedFields['RecordAssignee'];
                                                form.preSetKeyValues["RecordAssignee"].Name = "RecordAssignee";
                                            }
                                        }
                                        if (form.authorField != undefined) {
                                            if (prePopulatedFields['RecordAuthor'] != undefined) {
                                                form.authorField.setValue(prePopulatedFields['RecordAuthor']);
                                            }
                                        }
                                        else {
                                            if (prePopulatedFields['RecordAuthor'] != undefined) {
                                                form.preSetKeyValues["RecordAuthor"] = prePopulatedFields['RecordAuthor'];
                                                form.preSetKeyValues["RecordAuthor"].Name = "RecordAuthor";
                                            }
                                        }
                                        if (form.titleDecorator != undefined) {
                                            if (prePopulatedFields['RecordTitle'] != undefined) {
                                                form.titleDecorator.Value(prePopulatedFields['RecordTitle']);
                                            }
                                        }
                                        else if (form.freeTextTitleField != undefined) {
                                            if (prePopulatedFields['RecordTitle'] != undefined) {
                                                form.freeTextTitleField.Value(prePopulatedFields['RecordTitle']);
                                            }
                                        }
                                        else {
                                            if (prePopulatedFields['RecordTitle'] != undefined) {
                                                var recordTitle = {};
                                                recordTitle["Value"] = prePopulatedFields['RecordTitle'];
                                                recordTitle["Name"] = "RecordTitle";
                                                form.preSetKeyValues["RecordTitle"] = recordTitle;
                                            }
                                        }
                                        if (form.dateCreatedField != undefined) {
                                            if (prePopulatedFields['RecordDateCreated'] != undefined) {
                                                form.dateCreatedField.Value(prePopulatedFields['RecordDateCreated']);
                                            }
                                        }
                                        else {
                                            if (prePopulatedFields['RecordDateCreated'] != undefined) {
                                                form.preSetKeyValues["RecordDateCreated"] = prePopulatedFields['RecordDateCreated'];
                                                form.preSetKeyValues["RecordDateCreated"].Name = "RecordDateCreated";
                                            }
                                        }
                                        if (prePopulatedFields['SuperCopyUri'] != undefined) {
                                            form.forCreatingSupercopyUri(prePopulatedFields['SuperCopyUri']);
                                            form.showFileUploader(false);
                                        }
                                    }
                                    if (defaultContainer != null && !me.container) {
                                        if (form.containerField) {
                                            form.containerField.setDefaultValue(defaultContainer);
                                            form.containerField.toggleEdit();
                                            if (form.homeField != undefined) {
                                                var value = new HPTRIM.TrimBaseObject(HPTRIM.BaseObjectTypes.Record, "0", HP.HPTRIM.Messages.web_incontainerColon + defaultContainer.displayValue);
                                                form.homeField.setValue(value);
                                                form.homeField.enable(false);
                                                setTimeout(function () {
                                                    var value = new HPTRIM.TrimBaseObject(HPTRIM.BaseObjectTypes.Record, "0", HP.HPTRIM.Messages.web_incontainerColon + defaultContainer.displayValue);
                                                    form.homeField.setValue(value);
                                                    form.homeField.enable(false);
                                                }, 400);
                                            }
                                        }
                                    }
                                    if (me.container) {
                                        if (form.containerField) {
                                            form.containerField.setValue(me.container);
                                        }
                                        if (form.homeField) {
                                            setTimeout(function () {
                                                var value = new HPTRIM.TrimBaseObject(HPTRIM.BaseObjectTypes.Record, "0", me.homeLocation);
                                                form.homeField.setValue(value);
                                                form.homeField.enable(false);
                                            }, 400);
                                        }
                                    }
                                    if (form.defaultClassification && form.classificationField) {
                                        form.classificationField.setValue(form.defaultClassification);
                                        form.classificationField.isEditing(false);
                                        var rawClassification = form.defaultClassification.sourceObject;
                                        if (rawClassification) {
                                            if (form.retentionScheduleField && rawClassification.ClassificationRetentionSchedule) {
                                                var rawSchedule = rawClassification.ClassificationRetentionSchedule;
                                                form.retentionScheduleField.setValue(new HPTRIM.TrimBaseObject(HPTRIM.BaseObjectTypes.Schedule, rawSchedule.Uri, rawSchedule.ScheduleTitle ? rawSchedule.ScheduleTitle.Value : rawSchedule.Uri));
                                            }
                                            ;
                                            if (form.ownerField && rawClassification.ClassificationOwnerLocation) {
                                                var rawOwner = rawClassification.ClassificationOwnerLocation;
                                                form.ownerField.setValue(new HPTRIM.TrimBaseObject(HPTRIM.BaseObjectTypes.Location, rawOwner.Uri, rawOwner.LocationFormattedName ? rawOwner.LocationFormattedName.Value : rawOwner.Uri));
                                            }
                                            if (form.homeField && rawClassification.ClassificationHomeLocation) {
                                                var rawHome = rawClassification.ClassificationHomeLocation;
                                                form.homeField.setValue(new HPTRIM.TrimBaseObject(HPTRIM.BaseObjectTypes.Location, rawHome.Uri, rawHome.LocationFormattedName ? rawHome.LocationFormattedName.Value : rawHome.Uri));
                                            }
                                        }
                                    }
                                    form.warningHandler = me.dataEntryPanel.warningHandler;
                                    me.dataEntryPanel.setFormDataEntry(form);
                                    me.formLoadedCallback();
                                }
                            };
                            this.recordTypeSelectedCallback = function (field, value) {
                                HPTRIM.Utils.Form.resetThesaurusOverlayPanel();
                                if (me.displayDataEntryForm) {
                                    me.displayDataEntryForm(true);
                                }
                                var rty = value;
                                var additionalData = {};
                                var rtyDetails = new HPTRIM.TrimBaseObjectRequest(me.trimClient, rty, "RecordTypeEStore,storeType,Classification,RecordTypeNeedsClassification,RecordTypeName,DataEntryFormDefinition,RecordTypeCheckDuplicateTitles,RecordTypeNumberPattern,RecordTypeLastNumber", additionalData);
                                me.dataEntryPanel.displaySuccess(false);
                                me.dataEntryPanel.alertDetails('');
                                rtyDetails.doRequest().done(function (result) {
                                    processResultForm(result, rty);
                                }).fail(function (xhr, status, statusInfo) {
                                    var details = "";
                                    if (xhr.responseJSON && xhr.responseJSON.ResponseStatus) {
                                        var response = xhr.responseJSON.ResponseStatus;
                                        details = response.Message;
                                    }
                                    me.displayError(details ? details : HPTRIM.Messages.web_accessDenied);
                                });
                            };
                            this.rtyField.on({ 'afterItemClicked': this.recordTypeSelectedCallback });
                        };
                        CreateRecordCommandPanel.prototype.toggleURLView = function () {
                            var basePath = HP.HPTRIM.Utils.TrimHelper.getBaseUrl();
                            var query = HP.HPTRIM.Framework.Components.Shared.String.format("uri={0}&action={1}", [this.dataEntryPanel.editingRecordUri(), "update"]);
                            var url = HP.HPTRIM.Framework.Components.Shared.String.format("{0}?{1}", [basePath, query]);
                            this.url(url);
                            var currentState = this.showUrl();
                            this.showUrl(!currentState);
                        };
                        return CreateRecordCommandPanel;
                    }(HP.HPTRIM.Framework.Components.Layouts.Panel));
                    RecordDataEntryForm.CreateRecordCommandPanel = CreateRecordCommandPanel;
                    var CreateRecord = (function (_super) {
                        __extends(CreateRecord, _super);
                        function CreateRecord(trimClient, fileUploadProvider, purpose) {
                            var _this = this;
                            _super.call(this, trimClient, fileUploadProvider, purpose);
                            this.doneCallBack = function () { };
                            this.dataEntryPanel.doneHandler = function (uri, recordTitle, recordNumber) {
                                ko.postbox.publish("RECORD_CREATED", uri);
                                _this.doneCallBack();
                                if (_this.doneCallBack['callback']) {
                                    _this.doneCallBack['callback']();
                                    _this.dataEntryPanel.cancel();
                                }
                            };
                        }
                        return CreateRecord;
                    }(CreateOrModifyRecordOverlayPanel));
                    RecordDataEntryForm.CreateRecord = CreateRecord;
                })(RecordDataEntryForm = Panels.RecordDataEntryForm || (Panels.RecordDataEntryForm = {}));
            })(Panels = App.Panels || (App.Panels = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Panels;
            (function (Panels) {
                var RecordDataEntryForm;
                (function (RecordDataEntryForm) {
                    "use strict";
                    var RecordDataEntryPanel = (function (_super) {
                        __extends(RecordDataEntryPanel, _super);
                        function RecordDataEntryPanel(trimClient, fileUploadProvider) {
                            _super.call(this, 'templates/Record/RecordCreationForm/inputMetaData');
                            this.form = ko.observable(null);
                            this.pendingFileName = ko.observable('');
                            this.filePending = ko.observable(false);
                            this.cancel = function () { };
                            this.titleError = false;
                            this.manualNumberingRequired = ko.observable(false);
                            this.updateMode = false;
                            this.allowSave = true;
                            this.updated = false;
                            this.displayError = function (message) { };
                            this.displaySuccess = ko.observable(false);
                            this.alertDetails = ko.observable('');
                            this.doneHandler = function (Uri, title, recNumber) { };
                            this.updateHandler = function (result) { };
                            this.manualNumberingHandler = function () { };
                            this.clearErrorCallback = function () { };
                            this.warningHandler = function (title, errors, continueCallback) { continueCallback(); };
                            this.recordLongNumber = '';
                            this.editingRecordUri = ko.observable("");
                            this.fields = ko.observableArray([]);
                            this.trimClient = trimClient;
                            this.fileUploadProvider = fileUploadProvider;
                            this.hideFileUploadComponent = ko.observable(false);
                            this.keepCheckedOut = ko.observable(false);
                            this.recordTitle = ko.observable("");
                            this.displaySuccess = ko.observable(false);
                            this.focusTitleField = ko.observable(false);
                            var me = this;
                            var postTo = HPRMWebConfig.virtualDirectory + "Api/FileUpload/PostFormData";
                            var postToQueryString = "?locUri=" + me.trimClient.getDatabase().getCurrentUser().Uri;
                            var completeUrl = postTo + postToQueryString;
                        }
                        RecordDataEntryPanel.prototype.update = function (uri) {
                            var _this = this;
                            var me = this;
                            me.updateMode = true;
                            me.allowSave = true;
                            me.editingRecordUri(uri);
                            var updateRecord = new HPTRIM.TrimRecordInformationRequest(me.trimClient, uri);
                            updateRecord.addProperty('DataEntryFormDefinition');
                            updateRecord.addProperty('ChildKeywords');
                            updateRecord.addProperty('RecordNumber');
                            updateRecord.doRequest()
                                .done(function (result) {
                                var formFromServer = result.Results[0];
                                me.allowSave = false;
                                var pages = formFromServer.DataEntryFormDefinition.Pages;
                                for (var i = 0; i < pages.length && !me.allowSave; i++) {
                                    var currentPage = pages[i];
                                    for (var j = 0; j < currentPage.PageItems.length && !me.allowSave; j++) {
                                        if (currentPage.PageItems[j].Readonly === false) {
                                            me.allowSave = true;
                                        }
                                    }
                                }
                                var itemFound = false;
                                for (var j = 0; j < me.fields().length; j++) {
                                    var aField = me.fields()[j];
                                    var currentPageReadonly = aField.Readonly;
                                    var currentPageNotVisible = !aField.Visible;
                                    if (currentPageNotVisible || currentPageReadonly) {
                                        for (var k = 0; k < pages.length; k++) {
                                            itemFound = false;
                                            var currentPage = pages[k];
                                            for (var m = currentPage.PageItems.length - 1; m >= 0; m--) {
                                                if (currentPage.PageItems[m].Caption == aField.Caption) {
                                                    if (currentPageNotVisible) {
                                                        currentPage.PageItems.splice(m, 1);
                                                    }
                                                    else {
                                                        currentPage.PageItems[m].Readonly = true;
                                                    }
                                                    itemFound = true;
                                                    break;
                                                }
                                            }
                                            if (itemFound) {
                                                break;
                                            }
                                        }
                                    }
                                }
                                formFromServer.DataEntryFormDefinition.RecordNumber = formFromServer.RecordNumber.Value;
                                var form = new HP.HPTRIM.Form.RecordDataEntryForm(me.trimClient, me.fileUploadProvider, formFromServer.DataEntryFormDefinition, null, uri);
                                form.updateMode = true;
                                form.warningHandler = _this.warningHandler;
                                _this.setKeywords(form, formFromServer.ChildKeywords);
                                form.titlingMethod = { Value: formFromServer.DataEntryFormDefinition.TitlingMethod };
                                try {
                                    me.setFormDataEntry(form);
                                }
                                catch (ex) {
                                    if (console) {
                                        if (console.log) {
                                            console.log('Unable to set dataentry form. ' + ex);
                                        }
                                    }
                                }
                            })
                                .fail(function (err) {
                                var jsonError = err.responseJSON;
                                var msg = HP.HPTRIM.Messages.web_recordUpdateFailed + jsonError['ResponseStatus']['Message'];
                                me.alertDetails(msg);
                                me.displayError(msg);
                                $('#notificationWindow').toggleClass('slideIn').toggleClass('slideOut');
                            });
                        };
                        RecordDataEntryPanel.prototype.setKeywords = function (form, childKeywords) {
                            if (!childKeywords) {
                                return;
                            }
                            if (childKeywords.length == 0) {
                                return;
                            }
                            var structuredTitleField = form.formDefinition().Pages[0].PageItems[0];
                            if (structuredTitleField) {
                                if (structuredTitleField.Id == "RecordGeneratedTitle") {
                                    structuredTitleField.keywords = childKeywords;
                                }
                            }
                        };
                        RecordDataEntryPanel.prototype.configureEventHandler = function () {
                            var me = this;
                            this.recordNumberPattern = this.form().recordNumberPattern;
                            this.recordLastNumber = this.form().recordLastNumber;
                            this.recordUri = this.form().recordUri;
                            this.form()['afterSaveHandler'] = function (result) {
                                if (result.Results && result.Results[0]) {
                                    var Uri = result.Results[0].Uri;
                                    var recordNumber = result.Results[0].RecordNumber ? result.Results[0].RecordNumber.Value : "";
                                    var recordTitle = result.Results[0].RecordTitle ? result.Results[0].RecordTitle.Value : "";
                                    if (me.updateMode) {
                                        if (recordTitle == undefined || recordTitle == "") {
                                            me.displayError(HPTRIM.Messages.web_recordUpdatedButAccessDenied);
                                            me.cancel();
                                        }
                                        else {
                                            me.updateHandler(result.Results[0]);
                                        }
                                    }
                                    else {
                                        if (recordTitle == undefined || recordTitle == "") {
                                            me.displayError(HPTRIM.Messages.web_recordCreatedButAccessDenied);
                                            me.cancel();
                                        }
                                        else {
                                            me.doneHandler(Uri, recordTitle, recordNumber);
                                        }
                                    }
                                }
                                else if (result.ResponseStatus && result.ResponseStatus.Message) {
                                    if (result.ResponseStatus.ErrorCode == "WARN") {
                                        me.displayError(result.ResponseStatus.Message);
                                        me.cancel();
                                    }
                                    else {
                                        me.displayError(result.ResponseStatus.Message);
                                    }
                                }
                                else {
                                    me.displayError(HPTRIM.Messages.web_error);
                                }
                                HPTRIM.Utils.Form.resetThesaurusOverlayPanel();
                            };
                            this.form().errorHandler = function (response) {
                                var errorMessage = "";
                                var warningList = [];
                                var responseStatus = response.ResponseStatus;
                                if (responseStatus) {
                                    if (responseStatus.ErrorCode && responseStatus.Message) {
                                        errorMessage = responseStatus.Message;
                                    }
                                    else {
                                        var errors = responseStatus.Errors;
                                        if (errors != null && errors.length > 0) {
                                            errors = _.uniq(errors, function (error) {
                                                if (error.Meta && error.Meta.WarningCodes) {
                                                    return error.Meta.WarningCodes;
                                                }
                                                return error.ErrorCode;
                                            });
                                            for (var _i = 0, errors_1 = errors; _i < errors_1.length; _i++) {
                                                var err = errors_1[_i];
                                                var mesg = err['Message'];
                                                if (err.Meta == null || err.Meta.Bad == "True") {
                                                    errorMessage = (mesg != "") ? HP.HPTRIM.Messages.web_recordCreationFailed + " " + mesg : err;
                                                    break;
                                                }
                                                else if (err.ErrorCode != "" && err.Meta.WarningCodes == "") {
                                                    var customizeErroMessage = "";
                                                    if (err.FieldName == "RecordLongNumber") {
                                                        me.manualNumberingRequired(true);
                                                        me.form().manualNumberingRequired = true;
                                                        me.form().manualNumberEnteredHasError = true;
                                                        customizeErroMessage = err.Message;
                                                        if (customizeErroMessage.search(HPTRIM.Messages.web_warning) >= 0) {
                                                            customizeErroMessage = customizeErroMessage.replace(HPTRIM.Messages.web_warning, "");
                                                        }
                                                        if (customizeErroMessage.search("-") >= 0) {
                                                            customizeErroMessage = customizeErroMessage.replace("-", "");
                                                        }
                                                        if (customizeErroMessage.search(":") >= 0) {
                                                            customizeErroMessage = customizeErroMessage.replace(":", "");
                                                        }
                                                    }
                                                    if (customizeErroMessage != "") {
                                                        errorMessage = customizeErroMessage;
                                                    }
                                                    else {
                                                        errorMessage = err.Message;
                                                    }
                                                }
                                                else {
                                                    warningList.push(mesg);
                                                }
                                            }
                                        }
                                    }
                                }
                                if (errorMessage != "") {
                                    if (errorMessage.search("LongNumber") > 0) {
                                        me.manualNumberingRequired(true);
                                        me.form().manualNumberingRequired = true;
                                        me.form().manualNumberEnteredHasError = true;
                                        if ((errorMessage.search(me.form().recordLongNumber) >= 0) && response.ResponseStatus["ErrorCode"] == "ArgumentException") {
                                            errorMessage = HPTRIM.Messages.web_record + " " + me.form().recordLongNumber + " " + HPTRIM.Messages.web_renumberRecord + " " + me.form().recordLongNumber;
                                        }
                                    }
                                    me.alertDetails(errorMessage);
                                    me.displayError(errorMessage);
                                    $('#notificationWindow').toggleClass('slideIn').toggleClass('slideOut');
                                }
                                else {
                                    var redispatchFunc = function () {
                                        HP.HPTRIM.Form.DataEntryForm.redispatchWithoutWarnings(me.form());
                                    };
                                    var title = HPTRIM.Messages.web_warning;
                                    me.warningHandler(title, warningList, redispatchFunc);
                                }
                            };
                        };
                        RecordDataEntryPanel.prototype.setFormDataEntry = function (form) {
                            try {
                                this.manualNumberingRequired(form.manualNumberingRequired);
                                this.form(form);
                                this.configureEventHandler();
                                this.populateForm();
                            }
                            catch (ex) {
                                throw ex;
                            }
                        };
                        RecordDataEntryPanel.prototype.populateForm = function () {
                            var form = this.form();
                            if (this.hideFileUploadComponent()) {
                                form.showFileUploader(false);
                                form.showFilePreSpecData(true);
                            }
                            if (form.recordTitleDecorator && form.recordTitleDecorator.Value() == "") {
                                form.recordTitleDecorator.Value(this.recordTitle());
                            }
                            form.keepCheckedOut(this.keepCheckedOut());
                            if (this.pendingFileName.length > 0) {
                                form.fileDropped(true);
                                this.pendingFileName = ko.observable('');
                                form.setFileDropDefaultContainerFor();
                            }
                        };
                        RecordDataEntryPanel.prototype.focusFirstControl = function (focus) {
                            this.focusTitleField(focus);
                        };
                        RecordDataEntryPanel.prototype.submitCheckRecordNumber = function () {
                            var form = this.form();
                            var me = this;
                            if (!form.mandatoryFieldCheck()) {
                                me.manualNumberingHandler(me);
                                if (this.recordLongNumber != '' && !form.manualNumberEnteredHasError) {
                                    form.submit();
                                }
                            }
                            else {
                                return;
                            }
                        };
                        return RecordDataEntryPanel;
                    }(HP.HPTRIM.Framework.Components.Layouts.Panel));
                    RecordDataEntryForm.RecordDataEntryPanel = RecordDataEntryPanel;
                })(RecordDataEntryForm = Panels.RecordDataEntryForm || (Panels.RecordDataEntryForm = {}));
            })(Panels = App.Panels || (App.Panels = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Panels;
            (function (Panels) {
                var LocationDataEntryForm;
                (function (LocationDataEntryForm) {
                    "use strict";
                    var CreateLocationPanel = (function (_super) {
                        __extends(CreateLocationPanel, _super);
                        function CreateLocationPanel(trimClient) {
                            var _this = this;
                            _super.call(this);
                            this.trimClient = trimClient;
                            var me = this;
                            this.mainPanel.panels([]);
                            this.commandPanel = new CreateLocationCommandPanel(this.trimClient);
                            this.primaryPanel.panels([this.commandPanel]);
                            this.locationDateEntryPanel = new LocationDataEntryForm.LocationDataEntryPanel(this.trimClient);
                            this.mainPanel.panels([this.locationDateEntryPanel]);
                            this.commandPanel.loadForm = function (typeOfLocationName) {
                                var me = _this;
                                var path = "Location/DataEntryFormDefinition?InitializeAsType=" + typeOfLocationName;
                                me.trimClient.doGet(path).done(function (rawData) {
                                    var dataEntryFormDefinition = rawData.Results[0].DataEntryFormDefinition;
                                    var typeOfLocation = {
                                        caption: "",
                                        icon: "",
                                        value: typeOfLocationName
                                    };
                                    var overrideIsInternalPageItem = function (pageItem) {
                                        var permissions = trimClient.getDatabase().currentUserPermissions();
                                        var createInternal = false;
                                        var createExternal = false;
                                        if (permissions.CreateExternalLocation == true) {
                                            createExternal = true;
                                        }
                                        if (permissions.CreateInternalLocation == true) {
                                            createInternal = true;
                                        }
                                        if (createExternal && !createInternal) {
                                            pageItem.Readonly = true;
                                            pageItem.Value = false;
                                        }
                                        if (!createExternal && createInternal) {
                                            pageItem.Readonly = true;
                                            pageItem.Value = true;
                                        }
                                        if (createExternal && createInternal) {
                                            pageItem.ReadOnly = false;
                                        }
                                    };
                                    _.find(dataEntryFormDefinition.Pages, function (page) {
                                        return _.find(page.PageItems, function (pageItem) {
                                            if (pageItem.Name == "LocationIsWithin") {
                                                overrideIsInternalPageItem(pageItem);
                                                return true;
                                            }
                                            return false;
                                        });
                                    });
                                    _.each(dataEntryFormDefinition.Pages, function (page) {
                                        return _.each(page.PageItems, function (pageItem) {
                                            if (pageItem.Name == "LocationAddressAddressType") {
                                                pageItem.Format = "PlainText";
                                            }
                                        });
                                    });
                                    var form = new HP.HPTRIM.Form.LocationDataEntryForm(me.trimClient, dataEntryFormDefinition, typeOfLocation);
                                    me.locationDateEntryPanel.setFormDataEntry(form);
                                });
                            };
                        }
                        CreateLocationPanel.prototype.getClassName = function () {
                            return CreateLocationPanel.CLASS_NAME;
                        };
                        CreateLocationPanel.prototype.resetPanels = function () {
                            this.locationDateEntryPanel.setFormDataEntry(null);
                            this.commandPanel.loadForm(this.commandPanel.locationTypeField.Value());
                        };
                        CreateLocationPanel.CLASS_NAME = "CreateLocationOverlayPanel";
                        return CreateLocationPanel;
                    }(HP.HPTRIM.Framework.Components.Layouts.SinglePage.ContentPanel));
                    LocationDataEntryForm.CreateLocationPanel = CreateLocationPanel;
                    "use strict";
                    var CreateLocationCommandPanel = (function (_super) {
                        __extends(CreateLocationCommandPanel, _super);
                        function CreateLocationCommandPanel(trimClient) {
                            _super.call(this, 'templates/Location/CreateLocationCommandPanel', true);
                            this.trimClient = trimClient;
                            var me = this;
                            this.title = ko.observable(HPTRIM.Messages.web_location);
                            this.createDescription = ko.observable(HPTRIM.Utils.String.format(HPTRIM.Messages.web_createNewObject, [HPTRIM.Messages.web_location]));
                            this.locationTypeField = new HP.HPTRIM.Field.LocationTypes(trimClient, ["StorageProvider"]);
                            this.locationTypeField.Value.subscribe(function (newValue) {
                                me.loadForm(newValue);
                            });
                        }
                        return CreateLocationCommandPanel;
                    }(HP.HPTRIM.Framework.Components.Layouts.Panel));
                    LocationDataEntryForm.CreateLocationCommandPanel = CreateLocationCommandPanel;
                })(LocationDataEntryForm = Panels.LocationDataEntryForm || (Panels.LocationDataEntryForm = {}));
            })(Panels = App.Panels || (App.Panels = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Panels;
            (function (Panels) {
                var LocationDataEntryForm;
                (function (LocationDataEntryForm) {
                    "use strict";
                    var LocationDataEntryPanel = (function (_super) {
                        __extends(LocationDataEntryPanel, _super);
                        function LocationDataEntryPanel(trimClient) {
                            _super.call(this, 'templates/Location/LocationDataEntryPanel');
                            this.form = ko.observable(null);
                            this.cancel = function () { };
                            this.allowSave = true;
                            this.updated = false;
                            this.displayError = function (message) { };
                            this.alertDetails = ko.observable('');
                            this.doneHandler = function (uri) { };
                            this.clearErrorCallback = function () { };
                            this.trimClient = trimClient;
                            var me = this;
                        }
                        LocationDataEntryPanel.prototype.setFormDataEntry = function (form) {
                            var me = this;
                            this.form(form);
                            if (form) {
                                this.form()['afterSaveHandler'] = function (result) {
                                    var Uri = "" + result.Results[0].Uri;
                                    me.doneHandler(Uri);
                                };
                                this.form().errorHandler = function (err) {
                                    var errorMessage = err;
                                    if (err['ResponseStatus']) {
                                        var errorStart = HPTRIM.Utils.String.format(HP.HPTRIM.Messages.web_objectCreationFailed, [HPTRIM.BaseObjectTypes.Location.Caption]);
                                        errorMessage = errorStart + err['ResponseStatus']['Message'];
                                    }
                                    me.alertDetails(errorMessage);
                                    me.displayError(errorMessage);
                                    $('#notificationWindow').toggleClass('slideIn').toggleClass('slideOut');
                                };
                                _.each(form.formDefinition().Pages, function (page) {
                                    _.each(page.PageItems, function (pageItem) {
                                        if (pageItem.Mandatory) {
                                            page.forceShow();
                                        }
                                        if (pageItem.Name == "LocationIsWithin" && pageItem.Readonly === true) {
                                            pageItem.fieldDisabled(true);
                                        }
                                    });
                                });
                            }
                        };
                        return LocationDataEntryPanel;
                    }(HP.HPTRIM.Framework.Components.Layouts.Panel));
                    LocationDataEntryForm.LocationDataEntryPanel = LocationDataEntryPanel;
                })(LocationDataEntryForm = Panels.LocationDataEntryForm || (Panels.LocationDataEntryForm = {}));
            })(Panels = App.Panels || (App.Panels = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Panels;
            (function (Panels) {
                var Settings;
                (function (Settings) {
                    "use strict";
                    var LocaleTabPanel = (function (_super) {
                        __extends(LocaleTabPanel, _super);
                        function LocaleTabPanel(trimClient) {
                            var _this = this;
                            _super.call(this, 'templates/Settings/LocaleTabPanel');
                            this.errorVisible = ko.observable(false);
                            this.alertDetails = ko.observable("");
                            this.cancel = function () { };
                            this.isDirty = false;
                            this.timezoneDirty = false;
                            this.pageSizeDirty = false;
                            this.trimClient = trimClient;
                            this.cssClass('as-spa-saved-search-form');
                            var me = this;
                            var errorSubscription = function (newValue) {
                                me.errorVisible(newValue.length != 0);
                                me.alertDetails(newValue);
                            };
                            var timezones = HPRM_applicationSettings.Timezones;
                            this.timezonesOption = new HP.HPTRIM.Field.TimezoneCombobox(timezones);
                            var selectedTimezone = trimClient.getUserOptions().webclientOptions().WebClientUserOptionsTimezone.Value;
                            this.timezonesOption.Value(selectedTimezone);
                            this.timezonesOption['Caption'] = HP.HPTRIM.Messages.trm_statsTimeZoneHeading;
                            this.timezonesOption.Value.subscribe(function (Value) {
                                _this.timezoneDirty = true;
                            });
                            this.pageSizeOption = new HP.HPTRIM.Field.ComboBox([40, 60, 80, 100]);
                            this.pageSizeOption.Id = "pagesize-combo-box";
                            this.pageSizeOption.Caption = HP.HPTRIM.Messages.web_pagesize;
                            var pageSize = trimClient.getUserOptions().webclientOptions().WebClientUserOptionsPageSize.Value;
                            if (pageSize == "" || pageSize == '20') {
                                this.pageSizeOption.Value(40);
                            }
                            else {
                                this.pageSizeOption.Value(pageSize);
                            }
                            this.pageSizeOption.Value.subscribe(function (newValue) {
                                _this.pageSizeDirty = _this.trimClient.getUserOptions().webclientOptions().WebClientUserOptionsPageSize.Value != newValue;
                            });
                            this.languagesOption = new HP.HPTRIM.Field.LanguageComboBox(trimClient);
                            this.languagesOption["Caption"] = HP.HPTRIM.Messages.bob_infoLanguage;
                            trimClient.getUserOptions().preferredLanguage.subscribe(function (newValue) {
                                _this.languagesOption['Value'] = newValue;
                            });
                            this.languagesOption['Value'] = trimClient.getUserOptions().preferredLanguage();
                            this.languagesOption.focusCallback = function () {
                                _this.isDirty = true;
                            };
                            var util = HP.HPTRIM.Utils.TrimHelper;
                            var dateOptions = [];
                            var dateFormatOption = trimClient.getUserOptions();
                            dateFormatOption['dateFormatId'] = ko.observable('date-format-combo-box');
                            dateFormatOption['dateSeparatorId'] = ko.observable('date-separator-combo-box');
                            dateFormatOption['dateOptions'] = ko.observableArray();
                            var dateSep = dateFormatOption.dateSeparator();
                            if (dateSep) {
                                dateFormatOption['dateOptions'](me.generateDateOptions(dateSep));
                            }
                            dateFormatOption.dateSeparator.subscribe(function (newValue) {
                                dateSep = newValue;
                                var tmp = dateFormatOption['selectedValue']();
                                dateFormatOption['dateOptions'](me.generateDateOptions(newValue));
                                dateFormatOption['selectedValue'](tmp);
                            });
                            dateFormatOption.monthBeforeDay;
                            dateFormatOption.preferredLanguage;
                            dateFormatOption.yearFirst;
                            var yyyyMmDd = "YYYY/MM/DD YYYY-MM-DD YYYY.MM.DD", mmDdYyyy = "MM/DD/YYYY MM-DD-YYYY MM.DD.YYYY", ddMmYyyy = "DD/MM/YYYY DD-MM-YYYY DD.MM.YYYY";
                            dateFormatOption['selectedValue'] = ko.computed({
                                read: function () {
                                    var revalue = util.format("DD{0}MM{0}YYYY", [dateSep]);
                                    var isYearFirst = dateFormatOption.yearFirst();
                                    var isMonthBeforeDay = dateFormatOption.monthBeforeDay();
                                    if (isYearFirst == true) {
                                        return util.format("YYYY{0}MM{0}DD", [dateSep]);
                                    }
                                    if (isMonthBeforeDay == true) {
                                        return util.format("MM{0}DD{0}YYYY", [dateSep]);
                                    }
                                    return revalue;
                                },
                                write: function (value) {
                                    var dateFormatOption = me.trimClient.getUserOptions();
                                    if (yyyyMmDd.indexOf(value) > -1) {
                                        dateFormatOption.yearFirst(true);
                                        dateFormatOption.monthBeforeDay(false);
                                    }
                                    else if (mmDdYyyy.indexOf(value) > -1) {
                                        dateFormatOption.monthBeforeDay(true);
                                        dateFormatOption.yearFirst(false);
                                    }
                                    else if (ddMmYyyy.indexOf(value) > -1) {
                                        dateFormatOption.monthBeforeDay(false);
                                        dateFormatOption.yearFirst(false);
                                    }
                                    me.isDirty = true;
                                    return false;
                                }
                            });
                            this.dateFormatOption = dateFormatOption;
                            this.trimClient = trimClient;
                        }
                        LocaleTabPanel.prototype.generateDateOptions = function (dateSep) {
                            var util = HP.HPTRIM.Utils.TrimHelper;
                            var dateOptions = [];
                            dateOptions.push(util.format("YYYY{0}MM{0}DD", [dateSep]));
                            dateOptions.push(util.format("MM{0}DD{0}YYYY", [dateSep]));
                            dateOptions.push(util.format("DD{0}MM{0}YYYY", [dateSep]));
                            return dateOptions;
                        };
                        LocaleTabPanel.prototype.save = function (saveAsGlobalSetting, callback, errorHandler) {
                            var _this = this;
                            var saveTimeZone = function (timeZoneCallback) {
                                if (!_this.timezoneDirty && !_this.pageSizeDirty) {
                                    timeZoneCallback();
                                }
                                else {
                                    var urlPath = "UserOptions/WebClient";
                                    var userOption = _this.trimClient.getUserOptions();
                                    var postData = {};
                                    if (_this.timezoneDirty) {
                                        postData['WebClientUserOptionsTimezone'] = _this.timezonesOption.Value();
                                    }
                                    if (_this.pageSizeDirty) {
                                        postData['WebClientUserOptionsPageSize'] = _this.pageSizeOption.Value();
                                    }
                                    if (saveAsGlobalSetting === true) {
                                        postData["SaveAsGlobalSetting"] = true;
                                    }
                                    _this.trimClient.doPost(urlPath, postData).done(function (response) {
                                        var wcOpt = _this.trimClient.getUserOptions().webclientOptions();
                                        wcOpt.WebClientUserOptionsTimezone.Value = response.UserOptions.WebClientUserOptionsTimezone.Value;
                                        wcOpt.WebClientUserOptionsPageSize.Value = response.UserOptions.WebClientUserOptionsPageSize.Value;
                                        callback();
                                    }).fail(function (rawResponse) {
                                        var errMessage = HPTRIM.Messages.web_error;
                                        if (rawResponse.ResponseStatus && rawResponse.ResponseStatus.Message) {
                                            errMessage = rawResponse.ResponseStatus.Message;
                                        }
                                        errorHandler(errMessage);
                                    });
                                }
                            };
                            if (!this.isDirty) {
                                saveTimeZone(callback);
                            }
                            else {
                                var selectedLang = this.languagesOption['Value'];
                                var path = "UserOptions/Locale";
                                var dateFormatOption = this.trimClient.getUserOptions();
                                var monthBeforeDay = dateFormatOption.monthBeforeDay();
                                var yearFirst = dateFormatOption.yearFirst();
                                var dateSep = dateFormatOption.dateSeparator();
                                var data = {
                                    "LocaleUserOptionsPreferredLanguage": selectedLang,
                                    "LocaleUserOptionsDateSeparator": dateSep,
                                    "LocaleUserOptionsMonthBeforeDay": monthBeforeDay,
                                    'LocaleUserOptionsYearFirst': yearFirst
                                };
                                if (saveAsGlobalSetting === true) {
                                    data["SaveAsGlobalSetting"] = true;
                                }
                                this.trimClient.doPost(path, data).done(function (response) {
                                    setTimeout(function () {
                                        saveTimeZone(callback);
                                    }, 1000);
                                }).fail(function (rawResponse) {
                                    var errMessage = HPTRIM.Messages.web_error;
                                    if (rawResponse.ResponseStatus && rawResponse.ResponseStatus.Message) {
                                        errMessage = rawResponse.ResponseStatus.Message;
                                    }
                                    errorHandler(errMessage);
                                });
                            }
                        };
                        return LocaleTabPanel;
                    }(HP.HPTRIM.Framework.Components.Layouts.Panel));
                    Settings.LocaleTabPanel = LocaleTabPanel;
                })(Settings = Panels.Settings || (Panels.Settings = {}));
            })(Panels = App.Panels || (App.Panels = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Panels;
            (function (Panels) {
                var Settings;
                (function (Settings) {
                    "use strict";
                    var DashboardConfigurationTabPanel = (function (_super) {
                        __extends(DashboardConfigurationTabPanel, _super);
                        function DashboardConfigurationTabPanel(trimClient) {
                            _super.call(this, 'templates/Settings/DashboardConfigurationTabPanel');
                            this.strOnlySupportThreeDashboarrdItems = HP.HPTRIM.Messages.web_onlySupportThreeDashboarrdItems;
                            this.strDeselectOneOrMoreItem = HP.HPTRIM.Messages.web_deselectOneOrMoreItem;
                            this.onItemSelect = function (currentCheckBox, evt) { return true; };
                            this.onError = function (error) { };
                            this.supportedDashboardItems = {
                                'StartupUserOptionsActivityDue': false, 'StartupUserOptionsDocumentsCheckedOut': true,
                                'StartupUserOptionsDueTray': true, 'StartupUserOptionsFavoriteLocations': false,
                                'StartupUserOptionsFavoriteRecords': true, 'StartupUserOptionsFavoriteSearches': true,
                                'StartupUserOptionsFavoriteWorkflows': false, 'StartupUserOptionsInDueTray': true,
                                'StartupUserOptionsInTray': true, 'StartupUserOptionsRecentContainers': true,
                                'StartupUserOptionsRecentDocuments': true, 'StartupUserOptionsWorkTray': true
                            };
                            this.trimClient = trimClient;
                            this.startupCheckboxes = [];
                            this.previousStates = [];
                            this.configureStartupItems();
                        }
                        DashboardConfigurationTabPanel.prototype.configureStartupItems = function () {
                            var _this = this;
                            var userOption = this.trimClient.getUserOptions();
                            var startupOptions = userOption.startupOptions();
                            var truthyValues = [];
                            if (startupOptions.StartupUserOptionsWebClientPane1 && startupOptions.StartupUserOptionsWebClientPane1.Value)
                                truthyValues.push(startupOptions.StartupUserOptionsWebClientPane1.Value);
                            if (startupOptions.StartupUserOptionsWebClientPane2 && startupOptions.StartupUserOptionsWebClientPane2.Value)
                                truthyValues.push(startupOptions.StartupUserOptionsWebClientPane2.Value);
                            if (startupOptions.StartupUserOptionsWebClientPane3 && startupOptions.StartupUserOptionsWebClientPane3.Value)
                                truthyValues.push(startupOptions.StartupUserOptionsWebClientPane3.Value);
                            this.startupItemList = userOption.startupOptionDefs;
                            var objects = this.startupItemList();
                            this.onItemSelect = function (currentCheckBox, evt) {
                                var obj = _.countBy(_this.startupCheckboxes, function (chk) {
                                    return chk.Value() == true;
                                });
                                if (obj['true'] > 3) {
                                    currentCheckBox.Value(false);
                                    var error = HP.HPTRIM.Framework.Components.Shared.String.format(_this.strDeselectOneOrMoreItem, [currentCheckBox.Caption]);
                                    _this.onError(error);
                                    return false;
                                }
                                return true;
                            };
                            for (var index in objects) {
                                var item = objects[index];
                                if (!this.supportedDashboardItems[item.Id]) {
                                    continue;
                                }
                                var idWithoutUserOptionPrefix = item.Id.replace("StartupUserOptions", "");
                                var isChecked = false;
                                if (_.contains(truthyValues, idWithoutUserOptionPrefix)) {
                                    isChecked = true;
                                }
                                var checkbox = this.makeCheckBox({
                                    Caption: item.Caption || item.CaptionShort,
                                    Value: ko.observable(isChecked),
                                    Name: idWithoutUserOptionPrefix
                                });
                                checkbox.onClick = this.onItemSelect;
                                this.startupCheckboxes.push(checkbox);
                                this.previousStates.push(checkbox.Value());
                            }
                            this.rememberCurrentSettings();
                        };
                        DashboardConfigurationTabPanel.prototype.makeCheckBox = function (item) {
                            var checkbox = new HP.HPTRIM.Form.DotCheckBox({
                                Caption: item.Caption,
                                Value: item.Value,
                                Name: item.Name
                            });
                            return checkbox;
                        };
                        DashboardConfigurationTabPanel.prototype.save = function (saveAsGlobal, callback, errorHandler) {
                            var me = this;
                            if (!this.isModified()) {
                                callback();
                            }
                            else {
                                var newOption = this.getData();
                                if (saveAsGlobal === true) {
                                    newOption.SaveAsGlobalSetting = true;
                                }
                                var options = this.trimClient.getUserOptions();
                                options.startupOptions(newOption);
                                this.trimClient.doPost("UserOptions/Startup", newOption, "json").done(function (response) {
                                    callback();
                                }).fail(function (rawResponse) {
                                    var errMessage = HPTRIM.Messages.web_error;
                                    if (rawResponse.ResponseStatus && rawResponse.ResponseStatus.Message) {
                                        errMessage = rawResponse.ResponseStatus.Message;
                                    }
                                    errorHandler(errMessage);
                                });
                            }
                        };
                        DashboardConfigurationTabPanel.prototype.getData = function () {
                            var items = this.startupCheckboxes;
                            var newOption = {};
                            var limit = 3, loopCounter = 0;
                            var tempViewPanes = [];
                            _.each(items, function (item) {
                                if (loopCounter >= limit) {
                                    return;
                                }
                                if (item.Value() == true) {
                                    tempViewPanes[loopCounter] = {
                                        "Value": item.Name, "StringValue": item.Caption
                                    };
                                    loopCounter++;
                                }
                            });
                            var empty = HP.HPTRIM.Utils.EnumHelper.toString(HP.HPTRIM.StartupPaneType, HP.HPTRIM.StartupPaneType.Empty);
                            newOption.StartupUserOptionsWebClientPane1 = {
                                Value: tempViewPanes[0] ? tempViewPanes[0].Value : empty,
                                StringValue: tempViewPanes[0] ? tempViewPanes[0].StringValue : empty
                            };
                            newOption.StartupUserOptionsWebClientPane2 = {
                                Value: tempViewPanes[1] ? tempViewPanes[1].Value : empty,
                                StringValue: tempViewPanes[1] ? tempViewPanes[1].StringValue : empty
                            };
                            newOption.StartupUserOptionsWebClientPane3 = {
                                Value: tempViewPanes[2] ? tempViewPanes[2].Value : empty,
                                StringValue: tempViewPanes[2] ? tempViewPanes[2].StringValue : empty
                            };
                            return newOption;
                        };
                        DashboardConfigurationTabPanel.prototype.keyboardNavEnterKeyPress = function () {
                            var KEY_ENTER = 13, SPACE_KEY = 32;
                            var keynum;
                            if (window.event) {
                                keynum = event.keyCode;
                            }
                            else if (event.which) {
                                keynum = event.which;
                            }
                            if (keynum === KEY_ENTER || keynum === SPACE_KEY) {
                                var target = event.target || event.srcElement;
                                if (target instanceof Element) {
                                    var ele = target;
                                    var check = ele.getElementsByTagName("input")[0];
                                    check.click();
                                }
                            }
                        };
                        ;
                        DashboardConfigurationTabPanel.prototype.isModified = function () {
                            var returnValue = false;
                            var me = this;
                            var loopCounter = 0;
                            var items = me.startupCheckboxes;
                            _.each(items, function (item) {
                                if (item.Value() != me.previousStates[loopCounter]) {
                                    returnValue = true;
                                }
                                loopCounter++;
                            });
                            this.rememberCurrentSettings();
                            return returnValue;
                        };
                        DashboardConfigurationTabPanel.prototype.rememberCurrentSettings = function () {
                            var _this = this;
                            var me = this;
                            var loopCounter = 0;
                            var items = me.startupCheckboxes;
                            _.each(items, function (item) {
                                _this.previousStates[loopCounter] = item.Value();
                                loopCounter++;
                            });
                        };
                        return DashboardConfigurationTabPanel;
                    }(HP.HPTRIM.Framework.Components.Layouts.Panel));
                    Settings.DashboardConfigurationTabPanel = DashboardConfigurationTabPanel;
                })(Settings = Panels.Settings || (Panels.Settings = {}));
            })(Panels = App.Panels || (App.Panels = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Panels;
            (function (Panels) {
                var Settings;
                (function (Settings) {
                    "use strict";
                    var ViewerOptionsTabPanel = (function (_super) {
                        __extends(ViewerOptionsTabPanel, _super);
                        function ViewerOptionsTabPanel(trimClient) {
                            _super.call(this, 'BypassViewerOptions-template');
                            this.captionUseOnstreamViewer = HP.HPTRIM.Messages.web_useOnstreamViewerFileTypes;
                            this.captionBypassViewer = HP.HPTRIM.Messages.web_bypassViewerFileTypes;
                            this.errorVisible = ko.observable(false);
                            this.alertDetails = ko.observable("");
                            this.cancel = function () { };
                            this.sendBackToHome = function () { };
                            this.isDirty = false;
                            this.timezone = '';
                            this.onError = function (error) { };
                            this.chosenFieldsInitilized = false;
                            this.bypassFileTypeFieldId = '#bypassFileTypes';
                            this.onstreamFileTypeFieldId = '#onstreamFileTypes';
                            var userOption = trimClient.getUserOptions();
                            var webclientOptions = userOption.webclientOptions();
                            var bypassFileTypesArray = webclientOptions.WebClientUserOptionsBypassFileTypes.Value.replace(/ /g, '').split(';');
                            var onstreamFileTypesArray = webclientOptions.WebClientUserOptionsOnstreamFileTypes.Value.replace(/ /g, '').split(';');
                            this.trimClient = trimClient;
                            this.cssClass('as-spa-saved-search-form');
                            var me = this;
                            var errorSubscription = function (newValue) {
                                me.errorVisible(newValue.length != 0);
                                me.alertDetails(newValue);
                            };
                            this.templateConfiguration.afterRender = function (elements) {
                                me.afterRender();
                            };
                        }
                        ViewerOptionsTabPanel.prototype.validateSettings = function (bypassFileTypesArray, onstreamFileTypesArray) {
                            var matches = $(bypassFileTypesArray).filter(onstreamFileTypesArray);
                            if (matches.length > 0) {
                                var exts = $(matches).toArray().join(',');
                                return false;
                            }
                            return true;
                        };
                        ViewerOptionsTabPanel.prototype.getErrors = function (bypassFileTypesArray, onstreamFileTypesArray) {
                            var matches = $(bypassFileTypesArray).filter(onstreamFileTypesArray);
                            if (matches.length > 0) {
                                var exts = $(matches).toArray().join(',');
                                return HP.HPTRIM.Messages.web_duplicateFileExtensionFound + ': ' + exts;
                            }
                            return "";
                        };
                        ViewerOptionsTabPanel.prototype.save = function (bypassFileTypesArray, onstreamFileTypesArray, saveAsGlobalSetting, callback, errorHandler) {
                            var _this = this;
                            if (!this.validateSettings(bypassFileTypesArray, onstreamFileTypesArray)) {
                                errorHandler(this.getErrors(bypassFileTypesArray, onstreamFileTypesArray));
                            }
                            this.isDirty = this.checkIsDirty(bypassFileTypesArray, onstreamFileTypesArray);
                            if (this.isDirty == false) {
                                callback();
                            }
                            else {
                                var userOption = this.trimClient.getUserOptions();
                                userOption.bypassViewerFileTypes(bypassFileTypesArray);
                                userOption.onstreamViewerFileTypes(onstreamFileTypesArray);
                                var path = "UserOptions/WebClient";
                                var strBypassFileTypes = "";
                                if (bypassFileTypesArray) {
                                    strBypassFileTypes = bypassFileTypesArray.join(';');
                                }
                                var strOnstreamFileTypes = "";
                                if (onstreamFileTypesArray) {
                                    strOnstreamFileTypes = onstreamFileTypesArray.join(';');
                                }
                                var pageSize = this.trimClient.getUserOptions().webclientOptions().WebClientUserOptionsPageSize;
                                var data = {};
                                if (strBypassFileTypes !== null) {
                                    data['WebClientUserOptionsBypassFileTypes'] = strBypassFileTypes;
                                }
                                if (strOnstreamFileTypes != null) {
                                    data['WebClientUserOptionsOnstreamFileTypes'] = strOnstreamFileTypes;
                                }
                                data['WebClientUserOptionsPageSize'] = pageSize;
                                if (saveAsGlobalSetting === true) {
                                    data["SaveAsGlobalSetting"] = true;
                                }
                                this.trimClient.doPost(path, data).done(function (response) {
                                    var wcOpt = _this.trimClient.getUserOptions().webclientOptions();
                                    wcOpt.WebClientUserOptionsBypassFileTypes.Value = response.UserOptions.WebClientUserOptionsBypassFileTypes.Value;
                                    wcOpt.WebClientUserOptionsOnstreamFileTypes.Value = response.UserOptions.WebClientUserOptionsOnstreamFileTypes.Value;
                                    wcOpt.WebClientUserOptionsTimezone.Value = response.UserOptions.WebClientUserOptionsTimezone.Value;
                                    callback();
                                }).fail(function (rawResponse) {
                                    var errMessage = HPTRIM.Messages.web_error;
                                    if (rawResponse.ResponseStatus && rawResponse.ResponseStatus.Message) {
                                        errMessage = rawResponse.ResponseStatus.Message;
                                    }
                                    errorHandler(errMessage);
                                });
                            }
                        };
                        ViewerOptionsTabPanel.prototype.checkIsDirty = function (bypassFileTypesArray, onstreamFileTypesArray) {
                            var isDirty = false;
                            var onstreamFileTypeDirty = false, bypassFileTypeDirty = false;
                            var byPassFileTypesValue = "";
                            if (bypassFileTypesArray) {
                                byPassFileTypesValue = bypassFileTypesArray.join(',');
                            }
                            var onStreamFileTypesValue = "";
                            if (onstreamFileTypesArray) {
                                onStreamFileTypesValue = onstreamFileTypesArray.join(',');
                            }
                            var userOption = this.trimClient.getUserOptions();
                            bypassFileTypeDirty = (userOption.bypassViewerFileTypes() ? userOption.bypassViewerFileTypes().join(',') : "") != byPassFileTypesValue;
                            onstreamFileTypeDirty = (userOption.onstreamViewerFileTypes() ? userOption.onstreamViewerFileTypes().join(',') : "") != onStreamFileTypesValue;
                            isDirty = onstreamFileTypeDirty || bypassFileTypeDirty;
                            return isDirty;
                        };
                        ViewerOptionsTabPanel.prototype.getSettingsClientSide = function () {
                            return {};
                        };
                        ViewerOptionsTabPanel.prototype.afterRender = function () {
                            var jQobj = this.initChosenFields();
                            if (!jQobj) {
                                return;
                            }
                            var userOption = this.trimClient.getUserOptions();
                            var webclientOptions = userOption.webclientOptions();
                            var onstreamFileTypesArray = webclientOptions.WebClientUserOptionsOnstreamFileTypes.Value.replace(/ /g, '').split(';');
                            var bypassFileTypesArray = webclientOptions.WebClientUserOptionsBypassFileTypes.Value.replace(/ /g, '').split(';');
                            var bypassFileTypeField = jQobj[0];
                            var onstreamFileTypeField = jQobj[1];
                            $(bypassFileTypeField).val(bypassFileTypesArray);
                            $(onstreamFileTypeField).val(onstreamFileTypesArray);
                            jQobj.trigger("chosen:updated");
                        };
                        ViewerOptionsTabPanel.prototype.initChosenFields = function () {
                            var jQobj = $('.chosen-file-types');
                            if (jQobj.length == 0) {
                                return null;
                            }
                            if (this.chosenFieldsInitilized == true) {
                                if (jQobj.length == 4) {
                                    var selects = $([jQobj[0], jQobj[2]]);
                                    return selects;
                                }
                            }
                            jQobj.chosen({
                                width: '95%',
                                disable_search: true,
                                inherit_select_classes: true,
                                placeholder_text_multiple: ' '
                            });
                            this.chosenFieldsInitilized = true;
                            return jQobj;
                        };
                        return ViewerOptionsTabPanel;
                    }(HP.HPTRIM.Framework.Components.Layouts.Panel));
                    Settings.ViewerOptionsTabPanel = ViewerOptionsTabPanel;
                })(Settings = Panels.Settings || (Panels.Settings = {}));
            })(Panels = App.Panels || (App.Panels = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Panels;
            (function (Panels) {
                var ItemList;
                (function (ItemList) {
                    "use strict";
                    var TrimItemListPanel = (function (_super) {
                        __extends(TrimItemListPanel, _super);
                        function TrimItemListPanel(trimClient, owningPanel, searchQueryObject, itemList, recordSetId) {
                            _super.call(this, 'templates/ItemList/TRIMItemListPanel');
                            this.recordSetId = "";
                            this.updateDataFromResult = function (result) {
                            };
                            var baseObjectType = searchQueryObject.baseObjectType;
                            this.cssClass('trimItemListPanel');
                            this.searchQueryObject = searchQueryObject;
                            this.trimClient = trimClient;
                            this.recordSetId = recordSetId;
                            this.trimItemListLoader = new HP.HPTRIM.DataLoader.TrimItemListLoader(trimClient, this.searchQueryObject.searchString, baseObjectType, owningPanel, searchQueryObject.sortBy, this.recordSetId);
                            if (searchQueryObject.searchOptions) {
                                this.trimItemListLoader._searchOptions = searchQueryObject.searchOptions;
                            }
                            if (itemList) {
                                this.itemList = itemList;
                            }
                            else {
                                this.itemList = new HP.HPTRIM.App.Panels.ItemList.TrimItemListComponent(trimClient, { loader: this.trimItemListLoader }, baseObjectType, owningPanel);
                            }
                        }
                        TrimItemListPanel.prototype.getItemList = function () {
                            return this.itemList;
                        };
                        TrimItemListPanel.prototype.getCurrentQuery = function () {
                            if (this.searchQueryObject) {
                                return this.searchQueryObject.searchString;
                            }
                            return "";
                        };
                        TrimItemListPanel.prototype.getTrimItemListLoader = function () {
                            return this.trimItemListLoader;
                        };
                        TrimItemListPanel.prototype.setTrimItemListLoader = function (trimItemListLoader) {
                            this.trimItemListLoader = trimItemListLoader;
                        };
                        TrimItemListPanel.prototype.getCurrentType = function () {
                            return this.searchQueryObject.baseObjectType;
                        };
                        TrimItemListPanel.prototype.updateQuery = function (searchQueryObject, callback, clearList) {
                            if (clearList) {
                                this.itemList.items([]);
                            }
                            this.searchQueryObject.searchString = searchQueryObject.searchString;
                            this.searchQueryObject.sortBy = searchQueryObject.sortBy;
                            this.searchQueryObject.filter = searchQueryObject.filter;
                            this.searchQueryObject.searchOptions = searchQueryObject.searchOptions;
                            if (this.searchQueryObject.parentObjectType) {
                                this.trimItemListLoader._parentObjectType = this.searchQueryObject.parentObjectType;
                            }
                            this.trimItemListLoader._searchString = this.searchQueryObject.searchString;
                            if (this.trimItemListLoader.setBaseObjectType) {
                                this.trimItemListLoader.setBaseObjectType(searchQueryObject.baseObjectType);
                            }
                            this.trimItemListLoader._filterString = this.searchQueryObject.filter;
                            this.trimItemListLoader._searchOptions = this.searchQueryObject.searchOptions;
                            if (this.searchQueryObject.sortBy && this.searchQueryObject.sortBy.length > 0) {
                                var sortCols = this.searchQueryObject.sortBy.split(",");
                                var thisSortBy = "";
                                thisSortBy = sortCols[0];
                                if (this.trimItemListLoader._sortOrder != "" && this.trimItemListLoader._sortOrder != undefined) {
                                    var indexOfCurrentCol = sortCols.indexOf(this.trimItemListLoader._sortOrder);
                                    if ((sortCols.length - 1) != indexOfCurrentCol) {
                                        thisSortBy = sortCols[indexOfCurrentCol + 1];
                                    }
                                }
                                this.trimItemListLoader._sortOrder = thisSortBy;
                            }
                            else if (this.searchQueryObject.sortBy == "") {
                                this.trimItemListLoader._sortOrder = "";
                            }
                            else {
                                var searchDefault = this.trimClient.getSearchDefaults();
                                if (searchDefault) {
                                    var defSortForThisObject = searchDefault[this.searchQueryObject.baseObjectType.name];
                                    if (defSortForThisObject != undefined) {
                                        this.trimItemListLoader._sortOrder = defSortForThisObject.SortString;
                                    }
                                }
                            }
                            this.trimItemListLoader.updateSearchRecordSetId(this.searchQueryObject.searchString);
                            this.itemList.updateLoader(this.trimItemListLoader);
                            this.itemList.load(callback);
                        };
                        TrimItemListPanel.prototype.refresh = function (callback) {
                            var localCallback = callback ? callback : function (result) { };
                            this.updateQuery(this.searchQueryObject, localCallback, true);
                        };
                        TrimItemListPanel.prototype.makePropertySets = function () {
                            var propertySets = HPTRIM.IncludeProperties.Properties;
                            return propertySets;
                        };
                        return TrimItemListPanel;
                    }(HP.HPTRIM.Framework.Components.Layouts.Panel));
                    ItemList.TrimItemListPanel = TrimItemListPanel;
                })(ItemList = Panels.ItemList || (Panels.ItemList = {}));
            })(Panels = App.Panels || (App.Panels = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Panels;
            (function (Panels) {
                var ItemList;
                (function (ItemList) {
                    "use strict";
                    var TrimPagingItemListPanel = (function (_super) {
                        __extends(TrimPagingItemListPanel, _super);
                        function TrimPagingItemListPanel(trimClient, owningPanel, title, searchQueryObject, pagerRequestCallback, pagerResponseCallback) {
                            var _this = this;
                            _super.call(this, trimClient, owningPanel, searchQueryObject);
                            this.pagerRequestCallback = pagerRequestCallback;
                            this.pagerResponseCallback = pagerResponseCallback;
                            this.trimClient = trimClient;
                            this.pagingPlugin = new TrimPagingPlugin(trimClient, this.getItemList(), TrimPagingItemListPanel.MAX_PAGE_NUMBER_BUTTONS, trimClient.currentListPageSize(), pagerRequestCallback, pagerResponseCallback);
                            trimClient.currentListPageSize.subscribe(function (newSize) {
                                var oldSize = _this.pagingPlugin.getPagingSize();
                                _this.pagingPlugin.setPagingSize(newSize);
                                if (_this.getItemList().defaultListSizeChanged == true) {
                                    _this.getItemList().defaultListSizeChanged = false;
                                    _this.pagingPlugin.pageSizeChangingRefresh(oldSize, newSize);
                                }
                            });
                            var me = this;
                            $(window).resize(function () {
                                if (me.pagingPlugin.currentWidth() < TrimPagingItemListPanel.WINDOW_WIDTH_FOR_PAGINATION_CHANGE) {
                                    if ($(window).width() >= TrimPagingItemListPanel.WINDOW_WIDTH_FOR_PAGINATION_CHANGE) {
                                        me.pagingPlugin.currentWidth($(window).width());
                                        me.pagingPlugin.refreshPagination();
                                    }
                                }
                                else {
                                    if ($(window).width() < TrimPagingItemListPanel.WINDOW_WIDTH_FOR_PAGINATION_CHANGE) {
                                        me.pagingPlugin.currentWidth($(window).width());
                                        me.pagingPlugin.refreshPagination();
                                    }
                                }
                            });
                        }
                        TrimPagingItemListPanel.prototype.updateQuery = function (searchQueryObject, callback, clearList, clearPaging) {
                            this.trimClient.currentListPageSize(this.trimClient.getListPageSize());
                            this.pagingPlugin.setPagingSize(this.trimClient.currentListPageSize());
                            this.pagingPlugin.reset(true);
                            _super.prototype.updateQuery.call(this, searchQueryObject, callback, clearList);
                        };
                        TrimPagingItemListPanel.prototype.getPagingPlugin = function () {
                            return this.pagingPlugin;
                        };
                        TrimPagingItemListPanel.MAX_PAGE_NUMBER_BUTTONS = 10;
                        TrimPagingItemListPanel.WINDOW_WIDTH_FOR_PAGINATION_CHANGE = 1350;
                        return TrimPagingItemListPanel;
                    }(ItemList.TrimItemListPanel));
                    ItemList.TrimPagingItemListPanel = TrimPagingItemListPanel;
                    var TrimPagingPlugin = (function (_super) {
                        __extends(TrimPagingPlugin, _super);
                        function TrimPagingPlugin(trimClient, itemListComponent, numberPagerButtons, numberItemsPerPage, requestCallback, responseCallback) {
                            var _this = this;
                            _super.call(this, "templates/ItemList/HPRMPager");
                            this.name = 'paging';
                            this.totalItems = ko.observable(0);
                            this.pages = ko.observableArray([]);
                            this.currentPage = ko.observable(0);
                            this.pageSize = ko.observable(0);
                            this.currentWidth = ko.observable();
                            this.buttons = ko.observableArray([]);
                            this.goToLabel = ko.observable('go to');
                            this.itemPerPageLabel = ko.observable(HP.HPTRIM.Messages.web_pagesize + " ");
                            this.trimClient = trimClient;
                            this.itemList = itemListComponent;
                            this.itemList.registerPlugin(this);
                            var windowWidth = $(window).width();
                            this.currentWidth(windowWidth);
                            if (!numberItemsPerPage) {
                                numberItemsPerPage = 50;
                            }
                            this.pageSize(numberItemsPerPage);
                            this.itemList.setPageSize(numberItemsPerPage);
                            this.totalNoOfActivities = ko.computed(function () {
                                if (_this.itemList.items().length > 0) {
                                    return true;
                                }
                                else {
                                    return false;
                                }
                            });
                            this.pageSummary = ko.computed(function () {
                                if (_this.itemList.items().length > 0) {
                                    if (_this.currentWidth() >= TrimPagingItemListPanel.WINDOW_WIDTH_FOR_PAGINATION_CHANGE) {
                                        var start = _this.currentPage() * _this.pageSize() + 1;
                                        return HP.HPTRIM.Framework.Components.Shared.String.format(HP.HPTRIM.Messages.web_pageInformation, [start, start - 1 + _this.itemList.items().length, _this.totalItems()]);
                                    }
                                    else {
                                        var start = _this.currentPage() * _this.pageSize() + 1;
                                        return '' + start + '-' + (start - 1 + _this.itemList.items().length) + ' of ' + _this.totalItems();
                                    }
                                }
                                return null;
                            });
                            if (!numberPagerButtons) {
                                numberPagerButtons = 5;
                            }
                            this.numberofPagerButtons = numberPagerButtons;
                            this.registerSubscriptions();
                            if (responseCallback) {
                                this.responseCallback = responseCallback;
                            }
                            if (requestCallback) {
                                this.requestCallback = requestCallback;
                            }
                            this.itemsRefreshed = false;
                        }
                        TrimPagingPlugin.prototype.setPagingSize = function (newSize) {
                            this.pageSize(newSize);
                            this.itemList.setPageSize(newSize);
                            var trimList = this.itemList;
                            trimList.currentListPageSize(newSize);
                        };
                        TrimPagingPlugin.prototype.getPagingSize = function () {
                            return this.pageSize();
                        };
                        TrimPagingPlugin.prototype.getRequestData = function () {
                            if (this.requestCallback) {
                                this.requestCallback();
                            }
                            var requestData = { Paging: { pageSize: this.pageSize(), page: this.currentPage() } };
                            return requestData;
                        };
                        TrimPagingPlugin.prototype.setResponseData = function (data) {
                            if (this.responseCallback) {
                                this.responseCallback();
                            }
                            var pluginData = data.Paging;
                            this.totalItems(pluginData.total);
                            this.updatePagesObservableArray();
                        };
                        TrimPagingPlugin.prototype.reset = function (donotNotify) {
                            var me = this;
                            if (donotNotify) {
                                me.currentPageSubscription.dispose();
                                me.currentPage(0);
                                me.currentPageSubscription = me.currentPage.subscribe(function () {
                                    if (me.itemsRefreshed) {
                                        me.itemsRefreshed = false;
                                    }
                                    else {
                                        me.itemList.refresh(null);
                                    }
                                    me.updatePagesObservableArray();
                                });
                            }
                            else {
                                this.currentPage(0);
                            }
                            this.totalItems(0);
                            this.updatePagesObservableArray();
                        };
                        TrimPagingPlugin.prototype.registerSubscriptions = function () {
                            var me = this;
                            me.currentPageSubscription = me.currentPage.subscribe(function () {
                                if (me.itemsRefreshed) {
                                    me.itemsRefreshed = false;
                                }
                                else {
                                    me.itemList.refresh(null);
                                }
                                me.updatePagesObservableArray();
                            });
                        };
                        TrimPagingPlugin.prototype.generateEvent = function (pageNumber) {
                        };
                        TrimPagingPlugin.prototype.pageSizeChangingRefresh = function (oldSize, newSize) {
                            var me = this;
                            var oldFirstListedItemIndex = this.currentPage() * oldSize;
                            var newCurrentPage = 0;
                            while (newCurrentPage * newSize <= oldFirstListedItemIndex) {
                                newCurrentPage++;
                            }
                            newCurrentPage--;
                            var newFirstListedItemIndex = newCurrentPage * newSize;
                            var forceRefresh = false;
                            if (oldSize < newSize) {
                                if (newFirstListedItemIndex < oldFirstListedItemIndex) {
                                    if (newFirstListedItemIndex + newSize > oldFirstListedItemIndex + oldSize) {
                                        me.itemList.getExtraItems(newFirstListedItemIndex, oldFirstListedItemIndex - newFirstListedItemIndex, false, function () { me.itemList.getExtraItems(oldFirstListedItemIndex + oldSize, newFirstListedItemIndex + newSize - oldFirstListedItemIndex - oldSize, true, null); });
                                    }
                                    else {
                                        me.itemList.getExtraItems(newFirstListedItemIndex, oldFirstListedItemIndex - newFirstListedItemIndex, true, null);
                                    }
                                }
                                else {
                                    me.itemList.getExtraItems(oldFirstListedItemIndex + oldSize, newSize - oldSize, true, null);
                                }
                            }
                            else {
                                me.itemList.decrease(newSize, oldSize - newSize);
                                forceRefresh = true;
                            }
                            me.itemsRefreshed = true;
                            me.currentPage(newCurrentPage);
                            if (newCurrentPage == me.currentPage()) {
                                me.itemsRefreshed = false;
                            }
                            if (forceRefresh) {
                                me.updatePagesObservableArray();
                            }
                        };
                        TrimPagingPlugin.prototype.updatePagesObservableArray = function () {
                            this.pages([]);
                            this.buttons([]);
                            if (this.totalItems() <= this.pageSize()) {
                                return;
                            }
                            var totalPages = Math.ceil(this.totalItems() / this.pageSize());
                            var numberOfPagesNeeded = totalPages;
                            if (numberOfPagesNeeded > this.numberofPagerButtons) {
                                numberOfPagesNeeded = this.numberofPagerButtons;
                            }
                            var pagesOnLeft = Math.ceil(numberOfPagesNeeded / 2);
                            var startPage = this.currentPage() - pagesOnLeft;
                            if (startPage < 0) {
                                startPage = 0;
                            }
                            if (startPage + numberOfPagesNeeded > totalPages) {
                                startPage = totalPages - numberOfPagesNeeded;
                            }
                            this.pages.push({ text: "S", pageNumber: 0, active: false, list: this.itemList });
                            for (var index = startPage; index < startPage + numberOfPagesNeeded; index++) {
                                var page = { text: index + 1, pageNumber: index, active: false, list: this.itemList };
                                if (index == this.currentPage()) {
                                    page.active = true;
                                }
                                this.pages.push(page);
                            }
                            this.pages.push({ text: "E", pageNumber: Math.ceil(this.totalItems() / this.pageSize()) - 1, active: false, list: this.itemList });
                            this.refreshPagination();
                        };
                        TrimPagingPlugin.prototype.refreshPagination = function () {
                            this.buttons([]);
                            var lastPageNo = Math.ceil(this.totalItems() / this.pageSize()) - 1;
                            var currPageNo = this.currentPage();
                            if (this.currentWidth() >= TrimPagingItemListPanel.WINDOW_WIDTH_FOR_PAGINATION_CHANGE) {
                                this.goToLabel('go to');
                                this.itemPerPageLabel(HP.HPTRIM.Messages.web_pagesize + " ");
                                this.buttons.push({ text: "first", title: "first page", pageNo: 0, visible: currPageNo > 0 });
                                this.buttons.push({ text: ". . .", title: "previous 3 pages", pageNo: currPageNo - 3, visible: (currPageNo - 3) >= 0 });
                                this.buttons.push({ text: "<", title: "previous page", pageNo: currPageNo - 1, visible: currPageNo - 1 > 0 });
                                this.buttons.push({ text: "" + currPageNo, title: "page " + currPageNo, pageNo: currPageNo - 1, visible: (currPageNo - 1) >= 0 });
                                this.buttons.push({ text: "" + (currPageNo + 1), title: "page " + (currPageNo + 1), pageNo: currPageNo, visible: true });
                                this.buttons.push({ text: "" + (currPageNo + 2), title: "page " + (currPageNo + 2), pageNo: currPageNo + 1, visible: currPageNo + 1 < lastPageNo });
                                this.buttons.push({ text: ">", title: "next page", pageNo: currPageNo + 1, visible: currPageNo + 1 <= lastPageNo });
                                this.buttons.push({ text: ". . .", title: "next 3 pages", pageNo: currPageNo + 3, visible: (currPageNo + 3) < lastPageNo });
                                this.buttons.push({ text: "last", title: "last page", pageNo: lastPageNo, visible: lastPageNo > currPageNo });
                                this.buttons.push({ text: "page 10", title: "page 10", pageNo: 9, visible: lastPageNo > 8 });
                                this.buttons.push({ text: "page 20", title: "page 20", pageNo: 19, visible: lastPageNo > 18 });
                                this.buttons.push({ text: "page 30", title: "page 30", pageNo: 29, visible: lastPageNo > 28 });
                                this.buttons.push({ text: "page 40", title: "page 40", pageNo: 39, visible: lastPageNo > 38 });
                                this.buttons.push({ text: "page 50", title: "page 50", pageNo: 49, visible: lastPageNo > 48 });
                                this.buttons.push({ text: "page 60", title: "page 60", pageNo: 59, visible: lastPageNo > 58 });
                                this.buttons.push({ text: "page 70", title: "page 70", pageNo: 69, visible: lastPageNo > 68 });
                            }
                            else {
                                this.goToLabel('');
                                this.itemPerPageLabel(HP.HPTRIM.Messages.web_pagesize + " ");
                                this.buttons.push({ text: "< <", title: "first page", pageNo: 0, visible: true });
                                this.buttons.push({ text: ". . .", title: "previous 3 pages", pageNo: currPageNo - 3, visible: (currPageNo - 3) >= 0 });
                                this.buttons.push({ text: "<", title: "previous page", pageNo: currPageNo - 2, visible: false });
                                this.buttons.push({ text: "" + currPageNo, title: "page " + currPageNo, pageNo: currPageNo - 1, visible: (currPageNo - 1) >= 0 });
                                this.buttons.push({ text: "" + (currPageNo + 1), title: "page " + (currPageNo + 1), pageNo: currPageNo, visible: true });
                                this.buttons.push({ text: "" + (currPageNo + 2), title: "page " + (currPageNo + 2), pageNo: currPageNo + 1, visible: currPageNo + 1 < lastPageNo });
                                this.buttons.push({ text: ">", title: "next page", pageNo: currPageNo + 2, visible: false });
                                this.buttons.push({ text: ". . .", title: "next 3 pages", pageNo: currPageNo + 3, visible: (currPageNo + 3) < lastPageNo });
                                this.buttons.push({ text: "> >", title: "last page", pageNo: lastPageNo, visible: true });
                                this.buttons.push({ text: "page 10", title: "page 10", pageNo: 9, visible: lastPageNo > 8 });
                                this.buttons.push({ text: "page 20", title: "page 20", pageNo: 19, visible: lastPageNo > 18 });
                                this.buttons.push({ text: "page 30", title: "page 30", pageNo: 29, visible: lastPageNo > 28 });
                                this.buttons.push({ text: "page 40", title: "page 40", pageNo: 39, visible: lastPageNo > 38 });
                                this.buttons.push({ text: "page 50", title: "page 50", pageNo: 49, visible: lastPageNo > 48 });
                                this.buttons.push({ text: "page 60", title: "page 60", pageNo: 59, visible: lastPageNo > 58 });
                                this.buttons.push({ text: "page 70", title: "page 70", pageNo: 69, visible: lastPageNo > 68 });
                            }
                        };
                        return TrimPagingPlugin;
                    }(HP.HPTRIM.Framework.Components.Layouts.Panel));
                    ItemList.TrimPagingPlugin = TrimPagingPlugin;
                })(ItemList = Panels.ItemList || (Panels.ItemList = {}));
            })(Panels = App.Panels || (App.Panels = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Panels;
            (function (Panels) {
                var ItemList;
                (function (ItemList) {
                    "use strict";
                    var TrimScrollspyItemListPanel = (function (_super) {
                        __extends(TrimScrollspyItemListPanel, _super);
                        function TrimScrollspyItemListPanel(trimClient, owningPanel, title, searchQueryObject, pagerRequestCallback, pagerResponseCallback, panelId) {
                            var _this = this;
                            _super.call(this, trimClient, owningPanel, searchQueryObject, null, panelId);
                            this.pagerRequestCallback = pagerRequestCallback;
                            this.pagerResponseCallback = pagerResponseCallback;
                            this.trimClient = trimClient;
                            this.plugin = new TrimScrollspyPlugin(trimClient, this.getItemList(), ItemList.TrimPagingItemListPanel.MAX_PAGE_NUMBER_BUTTONS, trimClient.currentListPageSize(), pagerRequestCallback, pagerResponseCallback, panelId);
                            this.plugin.setPanelId(this.id);
                            trimClient.currentListPageSize.subscribe(function (newSize) {
                                var oldSize = _this.plugin.getPagingSize();
                                _this.plugin.setPagingSize(newSize);
                                var list = _this.getItemList();
                                if (list.defaultListSizeChanged == true) {
                                    list.defaultListSizeChanged = false;
                                }
                            });
                            this.searchRecordSetId = panelId;
                        }
                        TrimScrollspyItemListPanel.prototype.updateQuery = function (searchQueryObject, callback, clearList, clearPaging) {
                            var _this = this;
                            this.trimClient.currentListPageSize(this.trimClient.getListPageSize());
                            this.plugin.setPagingSize(this.trimClient.currentListPageSize());
                            this.plugin.reset(true);
                            var idSelector = "#panel_" + this.id;
                            var asSpaContentMainForThisPanel = $(idSelector).parent();
                            $(asSpaContentMainForThisPanel).off('scroll');
                            var callbackWapper = function (result) {
                                setTimeout(function () {
                                    _this.plugin.makeSearchResultHeaderSticky();
                                }, 100);
                                callback(result);
                            };
                            _super.prototype.updateQuery.call(this, searchQueryObject, callbackWapper, clearList);
                        };
                        TrimScrollspyItemListPanel.prototype.getPlugin = function () {
                            return this.plugin;
                        };
                        TrimScrollspyItemListPanel.MAX_PAGE_NUMBER_BUTTONS = 10;
                        TrimScrollspyItemListPanel.WINDOW_WIDTH_FOR_PAGINATION_CHANGE = 1350;
                        return TrimScrollspyItemListPanel;
                    }(ItemList.TrimItemListPanel));
                    ItemList.TrimScrollspyItemListPanel = TrimScrollspyItemListPanel;
                    var TrimScrollspyPlugin = (function (_super) {
                        __extends(TrimScrollspyPlugin, _super);
                        function TrimScrollspyPlugin(trimClient, itemListComponent, numberPagerButtons, numberItemsPerPage, requestCallback, responseCallback, panelId) {
                            var _this = this;
                            _super.call(this, "templates/ItemList/ScrollspyPlugin");
                            this.name = 'scrospy';
                            this.totalItems = ko.observable(0);
                            this.pages = ko.observableArray([]);
                            this.currentPage = ko.observable(0);
                            this.pageSize = ko.observable(0);
                            this.KEY_UP = 38;
                            this.KEY_DOWN = 40;
                            this.KEY_ENTER = 13;
                            this.KEY_ESC = 27;
                            this.KEY_TAB = 9;
                            this.currentIndex = -1;
                            this.currentWidth = ko.observable();
                            this.buttons = ko.observableArray([]);
                            this.goToLabel = ko.observable('go to');
                            this.itemPerPageLabel = ko.observable(HP.HPTRIM.Messages.web_pagesize + " ");
                            this.isLoading = ko.observable(false);
                            this.onPageFetched = function (fetchedObjectUris) { };
                            this.hasAdjustedHeight = false;
                            this.forPanelHtmlId = "";
                            this.requestPendingResponse = false;
                            this.trimClient = trimClient;
                            this.itemList = itemListComponent;
                            this.itemList.registerPlugin(this);
                            var windowWidth = $(window).width();
                            this.currentWidth(windowWidth);
                            if (!numberItemsPerPage) {
                                numberItemsPerPage = 50;
                            }
                            this.pageSize(numberItemsPerPage);
                            this.itemList.setPageSize(numberItemsPerPage);
                            this.pageSummary = ko.observable('');
                            this.totalItems(0);
                            this.registerSubscriptions();
                            if (responseCallback) {
                                this.responseCallback = responseCallback;
                            }
                            if (requestCallback) {
                                this.requestCallback = requestCallback;
                            }
                            this.itemsRefreshed = false;
                            this.sections = ko.observableArray([]);
                            this.itemList.hasMoreItems.subscribe(function (value) {
                                if (value == true) {
                                    if (_this.totalItems() == 500)
                                        _this.pageSummary(HP.HPTRIM.Framework.Components.Shared.String.format(HP.HPTRIM.Messages.web_showingResults, [1, _this.itemList.items().length]));
                                    else
                                        _this.pageSummary(HP.HPTRIM.Framework.Components.Shared.String.format(HP.HPTRIM.Messages.web_pageInformation, [1, _this.itemList.items().length, _this.totalItems()]));
                                }
                            });
                            this.searchRecordSetId = panelId;
                        }
                        TrimScrollspyPlugin.prototype.initSection = function () {
                            var iPageSize = parseInt(this.pageSize());
                            var topSectionName = "1 - " + this.pageSize();
                            var topSection = new Section(topSectionName, 0, this.searchRecordSetId);
                            var secondSectionName = iPageSize + " - " + (iPageSize + iPageSize);
                            var secondSection = new Section(secondSectionName, this.pageSize(), this.searchRecordSetId);
                            this.sections.push(topSection);
                            this.sections.push(secondSection);
                            this.ulDropdownElemId = $("#scrollingSection");
                        };
                        TrimScrollspyPlugin.prototype.getSelectedIndex = function (ele) {
                            var ulList = (ele.parentElement).children;
                            for (var i in ulList) {
                                if (ele == ulList[i]) {
                                    return parseInt(i);
                                }
                            }
                            return -1;
                        };
                        TrimScrollspyPlugin.prototype.onBtnClick = function (data, event) {
                            var tsilp = this;
                            event.preventDefault();
                            if (this.liSelected) {
                                var anchor = this.liSelected.getElementsByTagName("a")[0];
                                this.manageListItem(anchor, false);
                            }
                            var target = event.target || event.srcElement;
                            var ulParent = target.parentElement.children;
                            var liCollection = ulParent[1].children;
                            tsilp.anchorToSelect = liCollection[0].getElementsByTagName("a")[0];
                            tsilp.liSelected = liCollection[0];
                            setTimeout(function () {
                                tsilp.manageListItem(tsilp.anchorToSelect, true);
                            }, 100);
                        };
                        TrimScrollspyPlugin.prototype.keyboardNav = function () {
                            var keynum;
                            if (window.event) {
                                keynum = event.keyCode;
                            }
                            else if (event.which) {
                                keynum = event.which;
                            }
                            var shiftKey = event.shiftKey;
                            var target = event.target || event.srcElement;
                            if (target instanceof Element) {
                                var ele = target;
                                var anchor = ele.getElementsByTagName("a")[0];
                                if (keynum === this.KEY_ENTER) {
                                    this.manageListItem(anchor, false);
                                    anchor.click();
                                }
                                if (keynum === this.KEY_DOWN || keynum == this.KEY_UP || keynum === this.KEY_TAB || (shiftKey && keynum == this.KEY_TAB)) {
                                    if (!anchor && $(this.ulDropdownElemId).parent().hasClass("open")) {
                                        ele = this.ulDropdownElemId.getElementsByTagName("li")[0];
                                    }
                                    this.handleUpDownKey(keynum, shiftKey, ele);
                                    return;
                                }
                                if (keynum === this.KEY_ESC) {
                                    if ($(this.ulDropdownElemId).parent().hasClass("open")) {
                                        $(this.ulDropdownElemId).parent().toggleClass('open').trigger('shown.bs.dropdown');
                                        this.manageListItem(anchor, false);
                                    }
                                }
                            }
                        };
                        ;
                        TrimScrollspyPlugin.prototype.removeClass = function (el, className) {
                            if (el.classList) {
                                el.classList.remove(className);
                            }
                            else {
                                el.className = el.className.replace(new RegExp('(^|\\b)' + className.split(' ').join('|') + '(\\b|$)', 'gi'), ' ');
                            }
                        };
                        ;
                        TrimScrollspyPlugin.prototype.addClass = function (el, className) {
                            if (el.classList) {
                                el.classList.add(className);
                            }
                            else {
                                el.className += ' ' + className;
                            }
                        };
                        ;
                        TrimScrollspyPlugin.prototype.manageListItem = function (anchor, isAdd) {
                            if (isAdd) {
                                this.addClass(anchor, 'dropdown-menu-selected');
                                this.liSelected.scrollIntoView(false);
                                $(this.liSelected).focus();
                            }
                            else {
                                this.removeClass(anchor, 'dropdown-menu-selected');
                            }
                        };
                        TrimScrollspyPlugin.prototype.handleUpDownKey = function (keynum, shiftKey, ele) {
                            var liLen = ele.parentElement.getElementsByTagName('li').length - 1;
                            var anchor;
                            var next;
                            this.currentIndex = this.getSelectedIndex(ele);
                            if (keynum == this.KEY_DOWN || keynum === this.KEY_TAB) {
                                if (keynum == this.KEY_DOWN)
                                    this.currentIndex++;
                                if (this.liSelected) {
                                    anchor = this.liSelected.getElementsByTagName("a")[0];
                                    this.manageListItem(anchor, false);
                                    next = ele.parentElement.getElementsByTagName('li')[this.currentIndex];
                                    if (typeof next !== undefined && this.currentIndex <= liLen) {
                                        this.liSelected = next;
                                    }
                                    else {
                                        this.currentIndex = 0;
                                        this.liSelected = ele.parentElement.getElementsByTagName('li')[0];
                                    }
                                    anchor = this.liSelected.getElementsByTagName("a")[0];
                                    this.manageListItem(anchor, true);
                                }
                                else {
                                    this.currentIndex = 0;
                                    this.liSelected = ele.parentElement.getElementsByTagName('li')[0];
                                    anchor = this.liSelected.getElementsByTagName("a")[0];
                                    this.manageListItem(anchor, true);
                                }
                            }
                            else if (keynum === this.KEY_UP || (shiftKey && keynum == this.KEY_TAB)) {
                                if (this.liSelected) {
                                    anchor = this.liSelected.getElementsByTagName("a")[0];
                                    this.manageListItem(anchor, false);
                                    if (keynum === this.KEY_UP)
                                        this.currentIndex--;
                                    next = ele.parentElement.getElementsByTagName('li')[this.currentIndex];
                                    if (typeof next !== undefined && this.currentIndex >= 0) {
                                        this.liSelected = next;
                                    }
                                    else {
                                        this.currentIndex = liLen;
                                        this.liSelected = ele.parentElement.getElementsByTagName('li')[liLen];
                                    }
                                    anchor = this.liSelected.getElementsByTagName("a")[0];
                                    this.manageListItem(anchor, true);
                                }
                                else {
                                    this.currentIndex = 0;
                                    this.liSelected = ele.parentElement.getElementsByTagName('li')[liLen];
                                    anchor = this.liSelected.getElementsByTagName("a")[0];
                                    this.manageListItem(anchor, true);
                                }
                            }
                        };
                        TrimScrollspyPlugin.prototype.setPagingSize = function (newSize) {
                            this.pageSize(newSize);
                            this.itemList.setPageSize(newSize);
                            var trimList = this.itemList;
                            trimList.currentListPageSize(newSize);
                        };
                        TrimScrollspyPlugin.prototype.getPagingSize = function () {
                            return this.pageSize();
                        };
                        TrimScrollspyPlugin.prototype.getRequestData = function () {
                            var currentPage = parseInt(this.currentPage().toString());
                            var requestData = { Paging: { pageSize: this.pageSize(), page: currentPage } };
                            currentPage++;
                            this.currentPage(currentPage);
                            return requestData;
                        };
                        TrimScrollspyPlugin.prototype.setPanelId = function (id) {
                            this.forPanelHtmlId = id;
                        };
                        TrimScrollspyPlugin.prototype.setResponseData = function (data) {
                            if (this.responseCallback) {
                                this.responseCallback();
                            }
                            var pluginData = data.Paging;
                            if (this.totalItems() == 0)
                                this.totalItems(pluginData.total);
                            this.updatePagesObservableArray();
                            if (this.totalItems() == 500)
                                this.pageSummary(HP.HPTRIM.Framework.Components.Shared.String.format(HP.HPTRIM.Messages.web_showingResults, [1, this.itemList.items().length]));
                            else
                                this.pageSummary(HP.HPTRIM.Framework.Components.Shared.String.format(HP.HPTRIM.Messages.web_pageInformation, [1, this.itemList.items().length, this.totalItems()]));
                            this.setupOnScroll();
                        };
                        TrimScrollspyPlugin.prototype.setupOnScroll = function () {
                            var _this = this;
                            var idSelector = "#panel_" + this.forPanelHtmlId;
                            var asSpaContentMainForThisPanel = $(idSelector).parent();
                            $(asSpaContentMainForThisPanel).off('scroll');
                            $(asSpaContentMainForThisPanel).on('scroll', function () {
                                var ele = $(idSelector + " .search-result-footer");
                                var shouldLoadMore = HP.HPTRIM.Utils.DomHelper.isElementInView(ele);
                                if (_this.itemList.hasMoreItems() == false) {
                                    _this.isLoading(false);
                                    return;
                                }
                                if (shouldLoadMore) {
                                    $('.itemlist-header').css({ height: '80px', backgroundColor: '#fff', zIndex: 1 });
                                    _this.isLoading(true);
                                    if (_this.requestPendingResponse == true) {
                                        return;
                                    }
                                    _this.loadMore();
                                }
                            });
                        };
                        TrimScrollspyPlugin.prototype.reset = function (donotNotify) {
                            var me = this;
                            this.sections = ko.observableArray([]);
                            this.pageSummary('');
                            if (donotNotify) {
                                me.currentPageSubscription.dispose();
                                me.currentPage(0);
                            }
                            else {
                                this.currentPage(0);
                            }
                            this.totalItems(0);
                            this.updatePagesObservableArray();
                        };
                        TrimScrollspyPlugin.prototype.registerSubscriptions = function () {
                            var me = this;
                            me.currentPageSubscription = me.currentPage.subscribe(function () {
                                if (me.itemsRefreshed) {
                                    me.itemsRefreshed = false;
                                }
                                else {
                                    me.itemList.refresh(null);
                                }
                                me.updatePagesObservableArray();
                            });
                        };
                        TrimScrollspyPlugin.prototype.generateEvent = function (pageNumber) {
                        };
                        TrimScrollspyPlugin.prototype.pageSizeChangingRefresh = function (oldSize, newSize) {
                        };
                        TrimScrollspyPlugin.prototype.updatePagesObservableArray = function () {
                        };
                        TrimScrollspyPlugin.prototype.loadMore = function () {
                            var _this = this;
                            this.isLoading(true);
                            var nextPage = this.currentPage() + 1;
                            this.requestPendingResponse = true;
                            var callBack = function (responseData) {
                                _this.isLoading(false);
                                _this.requestPendingResponse = false;
                                if (responseData.HasMoreItems == true) {
                                }
                                else {
                                }
                                if (_this.sections().length == 0) {
                                    _this.initSection();
                                }
                                else {
                                    var fetchedCount = _this.itemList.items().length;
                                    var pageSize = _this.pageSize();
                                    var startIndex = void 0, chunkEndIndex = void 0, name_1, section = void 0;
                                    if (_this.itemList.hasMoreItems() == true) {
                                        startIndex = fetchedCount - pageSize;
                                        chunkEndIndex = startIndex + pageSize;
                                        name_1 = startIndex + " - " + chunkEndIndex;
                                    }
                                    else {
                                        startIndex = fetchedCount - (fetchedCount % pageSize);
                                        chunkEndIndex = fetchedCount;
                                        name_1 = startIndex + " - " + chunkEndIndex;
                                    }
                                    section = new Section(name_1, startIndex - 1, _this.searchRecordSetId);
                                    _this.sections.push(section);
                                }
                                _this.makeSearchResultHeaderSticky();
                                var stringUris = HP.HPTRIM.Utils.TrimHelper.pluckUrisFromItemsArray(responseData.Items);
                                _this.onPageFetched(stringUris);
                            };
                            this.itemList.loadMore(callBack, this.searchRecordSetId);
                        };
                        TrimScrollspyPlugin.prototype.refreshPagination = function () {
                        };
                        TrimScrollspyPlugin.prototype.makeSearchResultHeaderSticky = function () {
                            if (this.totalItems() > 0) {
                                if (this.totalItems() == 500)
                                    this.pageSummary(HP.HPTRIM.Framework.Components.Shared.String.format(HP.HPTRIM.Messages.web_showingResults, [1, this.itemList.items().length]));
                                else
                                    this.pageSummary(HP.HPTRIM.Framework.Components.Shared.String.format(HP.HPTRIM.Messages.web_pageInformation, [1, this.itemList.items().length, this.totalItems()]));
                            }
                            else {
                                this.pageSummary('');
                            }
                            var css = {
                                position: 'sticky',
                                top: '-1px',
                                height: '75px',
                                backgroundColor: '#fff',
                                zIndex: 1
                            };
                            var me = this;
                            var itemListHeaderId = '#' + me.searchRecordSetId + "_itemlistHeader";
                            var listHeader = $(itemListHeaderId);
                            var isIEBrowser = HPTRIM.Utils.DomHelper.isIE();
                            if (isIEBrowser) {
                                _.extend(css, {
                                    position: 'absolute',
                                    width: '85%'
                                });
                                var spaObj_1 = listHeader.closest('.as-spa-content-main');
                                var originalHeight = spaObj_1.height();
                                if (!this.hasAdjustedHeight) {
                                    var newHeight = originalHeight - 80;
                                    spaObj_1.css({ marginTop: '80px', height: newHeight + 'px' });
                                    this.hasAdjustedHeight = true;
                                }
                                $(window).resize(function (e) {
                                    spaObj_1.css({ height: '89%' });
                                });
                                if (listHeader.length == 1) {
                                    listHeader.css(css);
                                }
                            }
                            else {
                                try {
                                    if (listHeader.length == 1) {
                                        listHeader.css(css);
                                    }
                                }
                                catch (x) { }
                                ;
                            }
                        };
                        return TrimScrollspyPlugin;
                    }(HP.HPTRIM.Framework.Components.Layouts.Panel));
                    ItemList.TrimScrollspyPlugin = TrimScrollspyPlugin;
                    var Section = (function () {
                        function Section(name, startIndex, scrollPanelId) {
                            this.name = "";
                            this.startIndex = -1;
                            this.panelId = "";
                            this.name = name;
                            this.startIndex = startIndex;
                            this.panelId = scrollPanelId;
                        }
                        Section.prototype.onClick = function () {
                            var jumpToId = "#" + this.panelId + "_section_" + this.startIndex;
                            var offsetTop = 120;
                            var elementTop = $(jumpToId).offset().top;
                            var containerScrollTop = $('.as-spa-content-main').scrollTop();
                            var topValue = containerScrollTop + elementTop - offsetTop;
                            $('.as-spa-content-main').animate({
                                scrollTop: topValue
                            }, 500);
                        };
                        return Section;
                    }());
                    ItemList.Section = Section;
                })(ItemList = Panels.ItemList || (Panels.ItemList = {}));
            })(Panels = App.Panels || (App.Panels = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Panels;
            (function (Panels) {
                var ItemList;
                (function (ItemList) {
                    "use strict";
                    var TrimItemListComponent = (function (_super) {
                        __extends(TrimItemListComponent, _super);
                        function TrimItemListComponent(trimClient, options, baseObjectType, owningPanel) {
                            _super.call(this, options);
                            this.trimClient = trimClient;
                            this.baseObjectType = baseObjectType;
                            this.owningPanel = owningPanel;
                            this.defaultListSizeChanged = false;
                            this.templateName('templates/Record/RecordsPanelItemList');
                            this.initialise();
                            this.currentListPageSize = ko.observable(trimClient.getListPageSize());
                        }
                        TrimItemListComponent.prototype.initialise = function () {
                            var _this = this;
                            this.noBaseObjectFound = ko.computed(function () {
                                if (_this.items().length == 0) {
                                    var bobType = _this.baseObjectType;
                                    var msg = HP.HPTRIM.Utils.String.format(HP.HPTRIM.Messages.bob_noObjectsFound, [bobType.CaptionPlural]);
                                    return msg;
                                }
                                return "";
                            });
                            this.noResultString = ko.computed(function () {
                                if (_this.items().length == 0) {
                                    var bobType = _this.baseObjectType;
                                    var msg = HP.HPTRIM.Utils.String.format(HP.HPTRIM.Messages.bob_noBobsFoundPossibleFilter, [bobType.CaptionPlural]);
                                    return msg;
                                }
                                return "";
                            });
                            this.noResultsTitle = ko.computed(function () {
                                if (_this.items().length == 0) {
                                    var bobType = _this.baseObjectType;
                                    var msg = HP.HPTRIM.Utils.String.format(HP.HPTRIM.Messages.bob_noBobsFoundPossibleFilter, [bobType.CaptionPlural]);
                                    return msg;
                                }
                                return "";
                            });
                        };
                        TrimItemListComponent.prototype.changeLisPageSize = function (newSize) {
                            if (newSize != undefined && newSize > -1) {
                                if (this.currentListPageSize() != newSize) {
                                    this.defaultListSizeChanged = true;
                                    this.currentListPageSize(newSize);
                                    this.trimClient.setCookie("listPageSize", newSize, 3000);
                                }
                            }
                        };
                        TrimItemListComponent.prototype.increasePageSize = function () {
                            if (this.currentListPageSize() == 20) {
                                this.defaultListSizeChanged = true;
                                this.currentListPageSize(40);
                                this.trimClient.setCookie("listPageSize", 40, 3000);
                            }
                            else if (this.currentListPageSize() == 40) {
                                this.defaultListSizeChanged = true;
                                this.currentListPageSize(100);
                                this.trimClient.setCookie("listPageSize", 100, 3000);
                            }
                        };
                        TrimItemListComponent.prototype.decreasePageSize = function () {
                            if (this.currentListPageSize() == 100) {
                                this.defaultListSizeChanged = true;
                                this.currentListPageSize(40);
                                this.trimClient.setCookie("listPageSize", 40, 3000);
                            }
                            else if (this.currentListPageSize() == 40) {
                                this.defaultListSizeChanged = true;
                                this.currentListPageSize(20);
                                this.trimClient.setCookie("listPageSize", 20, 3000);
                            }
                        };
                        return TrimItemListComponent;
                    }(HP.HPTRIM.Framework.Components.ItemList.ItemListComponent));
                    ItemList.TrimItemListComponent = TrimItemListComponent;
                })(ItemList = Panels.ItemList || (Panels.ItemList = {}));
            })(Panels = App.Panels || (App.Panels = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
var HP;
(function (HP) {
    var HPTRIM;
    (function (HPTRIM) {
        var App;
        (function (App) {
            var Panels;
            (function (Panels) {
                var ItemList;
                (function (ItemList) {
                    "use strict";
                    var ActivityDocumentItemExtender = (function () {
                        function ActivityDocumentItemExtender(trimClient) {
                            this.trimClient = trimClient;
                        }
                        ActivityDocumentItemExtender.prototype.extend = function (item) {
                            item.recordInfo = ko.observable(null);
                            item.isDuplicateActivityRecord = ko.observable(false);
                            var record = item.Fields.ActivityDocumentRecord;
                            if (!record) {
                                return;
                            }
                            var recUri = record.Uri;
                            var me = this;
                            var requiredProperties = "RecordNumber,RecordRecordType,isElectronic,isContainer,isCheckedOut,RecordContainer,RecordDocumentStatus,RecordDocumentType,RecordCheckedOutTo,isInFavorites,Author,RecordAssignee,RecordDateRegistered,RecordDateAssigned,RecordDateCreated,RecordHomeLocation,RecordRecordType,RecordOwnerLocation,RecordTitle,RecordExtension";
                            var recordInfoRequest = new HP.HPTRIM.TrimRecordInformationRequest(me.trimClient, recUri, requiredProperties);
                            recordInfoRequest.doRequest().done(function (result) {
                                var recordInfo = result.Results[0];
                                item.getIcon = HP.HPTRIM.Utils.TrimHelper.makeGetIconFunction();
                                item.recordInfo(recordInfo);
                                item.isDuplicateActivityRecord(false);
                            }).fail(function (errorResponse) {
                                var errorMsg = HP.HPTRIM.Messages.web_unableToConnectToWebServices;
                                if (errorResponse.ResponseStatus && errorResponse.ResponseStatus.Message) {
                                    errorMsg = errorResponse.ResponseStatus.Message;
                                }
                                if (errorResponse.responseJSON && errorResponse.responseJSON.ResponseStatus && errorResponse.responseJSON.ResponseStatus.Message) {
                                    errorMsg = errorResponse.responseJSON.ResponseStatus.Message;
                                }
                                ko.postbox.publish(App.TRIMApp.NOTIFICATION_ERROR_TOPIC, errorMsg);
                            });
                        };
                        return ActivityDocumentItemExtender;
                    }());
                    ItemList.ActivityDocumentItemExtender = ActivityDocumentItemExtender;
                })(ItemList = Panels.ItemList || (Panels.ItemList = {}));
            })(Panels = App.Panels || (App.Panels = {}));
        })(App = HPTRIM.App || (HPTRIM.App = {}));
    })(HPTRIM = HP.HPTRIM || (HP.HPTRIM = {}));
})(HP || (HP = {}));
